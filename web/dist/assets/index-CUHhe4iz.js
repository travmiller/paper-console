(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=t(l);fetch(l.href,o)}})();function ip(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hd={exports:{}},to={};var $0;function $T(){if($0)return to;$0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,o){var c=null;if(o!==void 0&&(c=""+o),l.key!==void 0&&(c=""+l.key),"key"in l){o={};for(var f in l)f!=="key"&&(o[f]=l[f])}else o=l;return l=o.ref,{$$typeof:n,type:s,key:c,ref:l!==void 0?l:null,props:o}}return to.Fragment=e,to.jsx=t,to.jsxs=t,to}var G0;function GT(){return G0||(G0=1,Hd.exports=$T()),Hd.exports}var x=GT(),Ud={exports:{}},Ee={};var Y0;function YT(){if(Y0)return Ee;Y0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function v(N){return N===null||typeof N!="object"?null:(N=b&&N[b]||N["@@iterator"],typeof N=="function"?N:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,E={};function C(N,Y,ie){this.props=N,this.context=Y,this.refs=E,this.updater=ie||k}C.prototype.isReactComponent={},C.prototype.setState=function(N,Y){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,Y,"setState")},C.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function z(){}z.prototype=C.prototype;function B(N,Y,ie){this.props=N,this.context=Y,this.refs=E,this.updater=ie||k}var ee=B.prototype=new z;ee.constructor=B,M(ee,C.prototype),ee.isPureReactComponent=!0;var G=Array.isArray;function F(){}var q={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function fe(N,Y,ie){var oe=ie.ref;return{$$typeof:n,type:N,key:Y,ref:oe!==void 0?oe:null,props:ie}}function Me(N,Y){return fe(N.type,Y,N.props)}function Ce(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function Re(N){var Y={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ie){return Y[ie]})}var nt=/\/+/g;function _e(N,Y){return typeof N=="object"&&N!==null&&N.key!=null?Re(""+N.key):Y.toString(36)}function Ie(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(F,F):(N.status="pending",N.then(function(Y){N.status==="pending"&&(N.status="fulfilled",N.value=Y)},function(Y){N.status==="pending"&&(N.status="rejected",N.reason=Y)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function I(N,Y,ie,oe,be){var ve=typeof N;(ve==="undefined"||ve==="boolean")&&(N=null);var Te=!1;if(N===null)Te=!0;else switch(ve){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(N.$$typeof){case n:case e:Te=!0;break;case m:return Te=N._init,I(Te(N._payload),Y,ie,oe,be)}}if(Te)return be=be(N),Te=oe===""?"."+_e(N,0):oe,G(be)?(ie="",Te!=null&&(ie=Te.replace(nt,"$&/")+"/"),I(be,Y,ie,"",function(Zt){return Zt})):be!=null&&(Ce(be)&&(be=Me(be,ie+(be.key==null||N&&N.key===be.key?"":(""+be.key).replace(nt,"$&/")+"/")+Te)),Y.push(be)),1;Te=0;var Fe=oe===""?".":oe+":";if(G(N))for(var Ge=0;Ge<N.length;Ge++)oe=N[Ge],ve=Fe+_e(oe,Ge),Te+=I(oe,Y,ie,ve,be);else if(Ge=v(N),typeof Ge=="function")for(N=Ge.call(N),Ge=0;!(oe=N.next()).done;)oe=oe.value,ve=Fe+_e(oe,Ge++),Te+=I(oe,Y,ie,ve,be);else if(ve==="object"){if(typeof N.then=="function")return I(Ie(N),Y,ie,oe,be);throw Y=String(N),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Te}function te(N,Y,ie){if(N==null)return N;var oe=[],be=0;return I(N,oe,"","",function(ve){return Y.call(ie,ve,be++)}),oe}function he(N){if(N._status===-1){var Y=N._result;Y=Y(),Y.then(function(ie){(N._status===0||N._status===-1)&&(N._status=1,N._result=ie)},function(ie){(N._status===0||N._status===-1)&&(N._status=2,N._result=ie)}),N._status===-1&&(N._status=0,N._result=Y)}if(N._status===1)return N._result.default;throw N._result}var De=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},ke={map:te,forEach:function(N,Y,ie){te(N,function(){Y.apply(this,arguments)},ie)},count:function(N){var Y=0;return te(N,function(){Y++}),Y},toArray:function(N){return te(N,function(Y){return Y})||[]},only:function(N){if(!Ce(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Ee.Activity=y,Ee.Children=ke,Ee.Component=C,Ee.Fragment=t,Ee.Profiler=l,Ee.PureComponent=B,Ee.StrictMode=s,Ee.Suspense=d,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(N){return q.H.useMemoCache(N)}},Ee.cache=function(N){return function(){return N.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(N,Y,ie){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var oe=M({},N.props),be=N.key;if(Y!=null)for(ve in Y.key!==void 0&&(be=""+Y.key),Y)!se.call(Y,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&Y.ref===void 0||(oe[ve]=Y[ve]);var ve=arguments.length-2;if(ve===1)oe.children=ie;else if(1<ve){for(var Te=Array(ve),Fe=0;Fe<ve;Fe++)Te[Fe]=arguments[Fe+2];oe.children=Te}return fe(N.type,be,oe)},Ee.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:o,_context:N},N},Ee.createElement=function(N,Y,ie){var oe,be={},ve=null;if(Y!=null)for(oe in Y.key!==void 0&&(ve=""+Y.key),Y)se.call(Y,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(be[oe]=Y[oe]);var Te=arguments.length-2;if(Te===1)be.children=ie;else if(1<Te){for(var Fe=Array(Te),Ge=0;Ge<Te;Ge++)Fe[Ge]=arguments[Ge+2];be.children=Fe}if(N&&N.defaultProps)for(oe in Te=N.defaultProps,Te)be[oe]===void 0&&(be[oe]=Te[oe]);return fe(N,ve,be)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(N){return{$$typeof:f,render:N}},Ee.isValidElement=Ce,Ee.lazy=function(N){return{$$typeof:m,_payload:{_status:-1,_result:N},_init:he}},Ee.memo=function(N,Y){return{$$typeof:h,type:N,compare:Y===void 0?null:Y}},Ee.startTransition=function(N){var Y=q.T,ie={};q.T=ie;try{var oe=N(),be=q.S;be!==null&&be(ie,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(F,De)}catch(ve){De(ve)}finally{Y!==null&&ie.types!==null&&(Y.types=ie.types),q.T=Y}},Ee.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},Ee.use=function(N){return q.H.use(N)},Ee.useActionState=function(N,Y,ie){return q.H.useActionState(N,Y,ie)},Ee.useCallback=function(N,Y){return q.H.useCallback(N,Y)},Ee.useContext=function(N){return q.H.useContext(N)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(N,Y){return q.H.useDeferredValue(N,Y)},Ee.useEffect=function(N,Y){return q.H.useEffect(N,Y)},Ee.useEffectEvent=function(N){return q.H.useEffectEvent(N)},Ee.useId=function(){return q.H.useId()},Ee.useImperativeHandle=function(N,Y,ie){return q.H.useImperativeHandle(N,Y,ie)},Ee.useInsertionEffect=function(N,Y){return q.H.useInsertionEffect(N,Y)},Ee.useLayoutEffect=function(N,Y){return q.H.useLayoutEffect(N,Y)},Ee.useMemo=function(N,Y){return q.H.useMemo(N,Y)},Ee.useOptimistic=function(N,Y){return q.H.useOptimistic(N,Y)},Ee.useReducer=function(N,Y,ie){return q.H.useReducer(N,Y,ie)},Ee.useRef=function(N){return q.H.useRef(N)},Ee.useState=function(N){return q.H.useState(N)},Ee.useSyncExternalStore=function(N,Y,ie){return q.H.useSyncExternalStore(N,Y,ie)},Ee.useTransition=function(){return q.H.useTransition()},Ee.version="19.2.1",Ee}var K0;function Ro(){return K0||(K0=1,Ud.exports=YT()),Ud.exports}var Q=Ro();const Mr=ip(Q);var Id={exports:{}},no={},Vd={exports:{}},qd={};var P0;function KT(){return P0||(P0=1,(function(n){function e(I,te){var he=I.length;I.push(te);e:for(;0<he;){var De=he-1>>>1,ke=I[De];if(0<l(ke,te))I[De]=te,I[he]=ke,he=De;else break e}}function t(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var te=I[0],he=I.pop();if(he!==te){I[0]=he;e:for(var De=0,ke=I.length,N=ke>>>1;De<N;){var Y=2*(De+1)-1,ie=I[Y],oe=Y+1,be=I[oe];if(0>l(ie,he))oe<ke&&0>l(be,ie)?(I[De]=be,I[oe]=he,De=oe):(I[De]=ie,I[Y]=he,De=Y);else if(oe<ke&&0>l(be,he))I[De]=be,I[oe]=he,De=oe;else break e}}return te}function l(I,te){var he=I.sortIndex-te.sortIndex;return he!==0?he:I.id-te.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var d=[],h=[],m=1,y=null,b=3,v=!1,k=!1,M=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function ee(I){for(var te=t(h);te!==null;){if(te.callback===null)s(h);else if(te.startTime<=I)s(h),te.sortIndex=te.expirationTime,e(d,te);else break;te=t(h)}}function G(I){if(M=!1,ee(I),!k)if(t(d)!==null)k=!0,F||(F=!0,Re());else{var te=t(h);te!==null&&Ie(G,te.startTime-I)}}var F=!1,q=-1,se=5,fe=-1;function Me(){return E?!0:!(n.unstable_now()-fe<se)}function Ce(){if(E=!1,F){var I=n.unstable_now();fe=I;var te=!0;try{e:{k=!1,M&&(M=!1,z(q),q=-1),v=!0;var he=b;try{t:{for(ee(I),y=t(d);y!==null&&!(y.expirationTime>I&&Me());){var De=y.callback;if(typeof De=="function"){y.callback=null,b=y.priorityLevel;var ke=De(y.expirationTime<=I);if(I=n.unstable_now(),typeof ke=="function"){y.callback=ke,ee(I),te=!0;break t}y===t(d)&&s(d),ee(I)}else s(d);y=t(d)}if(y!==null)te=!0;else{var N=t(h);N!==null&&Ie(G,N.startTime-I),te=!1}}break e}finally{y=null,b=he,v=!1}te=void 0}}finally{te?Re():F=!1}}}var Re;if(typeof B=="function")Re=function(){B(Ce)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,_e=nt.port2;nt.port1.onmessage=Ce,Re=function(){_e.postMessage(null)}}else Re=function(){C(Ce,0)};function Ie(I,te){q=C(function(){I(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(I){switch(b){case 1:case 2:case 3:var te=3;break;default:te=b}var he=b;b=te;try{return I()}finally{b=he}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(I,te){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var he=b;b=I;try{return te()}finally{b=he}},n.unstable_scheduleCallback=function(I,te,he){var De=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?De+he:De):he=De,I){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=he+ke,I={id:m++,callback:te,priorityLevel:I,startTime:he,expirationTime:ke,sortIndex:-1},he>De?(I.sortIndex=he,e(h,I),t(d)===null&&I===t(h)&&(M?(z(q),q=-1):M=!0,Ie(G,he-De))):(I.sortIndex=ke,e(d,I),k||v||(k=!0,F||(F=!0,Re()))),I},n.unstable_shouldYield=Me,n.unstable_wrapCallback=function(I){var te=b;return function(){var he=b;b=te;try{return I.apply(this,arguments)}finally{b=he}}}})(qd)),qd}var J0;function PT(){return J0||(J0=1,Vd.exports=KT()),Vd.exports}var $d={exports:{}},Gt={};var F0;function JT(){if(F0)return Gt;F0=1;var n=Ro();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(d,h,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:d,containerInfo:h,implementation:m}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Gt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Gt.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(d,h,null,m)},Gt.flushSync=function(d){var h=c.T,m=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=h,s.p=m,s.d.f()}},Gt.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(d,h))},Gt.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Gt.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,y=f(m,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?s.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:v}):m==="script"&&s.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Gt.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=f(h.as,h.crossOrigin);s.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(d)},Gt.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,y=f(m,h.crossOrigin);s.d.L(d,m,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Gt.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=f(h.as,h.crossOrigin);s.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(d)},Gt.requestFormReset=function(d){s.d.r(d)},Gt.unstable_batchedUpdates=function(d,h){return d(h)},Gt.useFormState=function(d,h,m){return c.H.useFormState(d,h,m)},Gt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Gt.version="19.2.1",Gt}var X0;function _1(){if(X0)return $d.exports;X0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$d.exports=JT(),$d.exports}var Q0;function FT(){if(Q0)return no;Q0=1;var n=PT(),e=Ro(),t=_1();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function f(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(s(188))}function h(r){var i=r.alternate;if(!i){if(i=o(r),i===null)throw Error(s(188));return i!==r?null:r}for(var a=r,u=i;;){var p=a.return;if(p===null)break;var g=p.alternate;if(g===null){if(u=p.return,u!==null){a=u;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===a)return d(p),r;if(g===u)return d(p),i;g=g.sibling}throw Error(s(188))}if(a.return!==u.return)a=p,u=g;else{for(var S=!1,T=p.child;T;){if(T===a){S=!0,a=p,u=g;break}if(T===u){S=!0,u=p,a=g;break}T=T.sibling}if(!S){for(T=g.child;T;){if(T===a){S=!0,a=g,u=p;break}if(T===u){S=!0,u=g,a=p;break}T=T.sibling}if(!S)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?r:i}function m(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=m(r),i!==null)return i;r=r.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),B=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),fe=Symbol.for("react.activity"),Me=Symbol.for("react.memo_cache_sentinel"),Ce=Symbol.iterator;function Re(r){return r===null||typeof r!="object"?null:(r=Ce&&r[Ce]||r["@@iterator"],typeof r=="function"?r:null)}var nt=Symbol.for("react.client.reference");function _e(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===nt?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case M:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case G:return"Suspense";case F:return"SuspenseList";case fe:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case B:return r.displayName||"Context";case z:return(r._context.displayName||"Context")+".Consumer";case ee:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case q:return i=r.displayName||null,i!==null?i:_e(r.type)||"Memo";case se:i=r._payload,r=r._init;try{return _e(r(i))}catch{}}return null}var Ie=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},De=[],ke=-1;function N(r){return{current:r}}function Y(r){0>ke||(r.current=De[ke],De[ke]=null,ke--)}function ie(r,i){ke++,De[ke]=r.current,r.current=i}var oe=N(null),be=N(null),ve=N(null),Te=N(null);function Fe(r,i){switch(ie(ve,i),ie(be,r),ie(oe,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?d0(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=d0(i),r=h0(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Y(oe),ie(oe,r)}function Ge(){Y(oe),Y(be),Y(ve)}function Zt(r){r.memoizedState!==null&&ie(Te,r);var i=oe.current,a=h0(i,r.type);i!==a&&(ie(be,r),ie(oe,a))}function tt(r){be.current===r&&(Y(oe),Y(be)),Te.current===r&&(Y(Te),Ql._currentValue=he)}var $n,P;function H(r){if($n===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);$n=i&&i[1]||"",P=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$n+r+P}var O=!1;function L(r,i){if(!r||O)return"";O=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(U){var _=U}Reflect.construct(r,[],J)}else{try{J.call()}catch(U){_=U}r.call(J.prototype)}}else{try{throw Error()}catch(U){_=U}(J=r())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(U){if(U&&_&&typeof U.stack=="string")return[U.stack,_.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),S=g[0],T=g[1];if(S&&T){var w=S.split(`
`),R=T.split(`
`);for(p=u=0;u<w.length&&!w[u].includes("DetermineComponentFrameRoot");)u++;for(;p<R.length&&!R[p].includes("DetermineComponentFrameRoot");)p++;if(u===w.length||p===R.length)for(u=w.length-1,p=R.length-1;1<=u&&0<=p&&w[u]!==R[p];)p--;for(;1<=u&&0<=p;u--,p--)if(w[u]!==R[p]){if(u!==1||p!==1)do if(u--,p--,0>p||w[u]!==R[p]){var $=`
`+w[u].replace(" at new "," at ");return r.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",r.displayName)),$}while(1<=u&&0<=p);break}}}finally{O=!1,Error.prepareStackTrace=a}return(a=r?r.displayName||r.name:"")?H(a):""}function Z(r,i){switch(r.tag){case 26:case 27:case 5:return H(r.type);case 16:return H("Lazy");case 13:return r.child!==i&&i!==null?H("Suspense Fallback"):H("Suspense");case 19:return H("SuspenseList");case 0:case 15:return L(r.type,!1);case 11:return L(r.type.render,!1);case 1:return L(r.type,!0);case 31:return H("Activity");default:return""}}function V(r){try{var i="",a=null;do i+=Z(r,a),a=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var le=Object.prototype.hasOwnProperty,re=n.unstable_scheduleCallback,X=n.unstable_cancelCallback,de=n.unstable_shouldYield,je=n.unstable_requestPaint,ye=n.unstable_now,ct=n.unstable_getCurrentPriorityLevel,lt=n.unstable_ImmediatePriority,$t=n.unstable_UserBlockingPriority,cn=n.unstable_NormalPriority,Nt=n.unstable_LowPriority,ii=n.unstable_IdlePriority,MS=n.log,CS=n.unstable_setDisableYieldValue,cl=null,un=null;function wr(r){if(typeof MS=="function"&&CS(r),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(cl,r)}catch{}}var fn=Math.clz32?Math.clz32:AS,wS=Math.log,NS=Math.LN2;function AS(r){return r>>>=0,r===0?32:31-(wS(r)/NS|0)|0}var Uo=256,Io=262144,Vo=4194304;function Ss(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function qo(r,i,a){var u=r.pendingLanes;if(u===0)return 0;var p=0,g=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var T=u&134217727;return T!==0?(u=T&~g,u!==0?p=Ss(u):(S&=T,S!==0?p=Ss(S):a||(a=T&~r,a!==0&&(p=Ss(a))))):(T=u&~g,T!==0?p=Ss(T):S!==0?p=Ss(S):a||(a=u&~r,a!==0&&(p=Ss(a)))),p===0?0:i!==0&&i!==p&&(i&g)===0&&(g=p&-p,a=i&-i,g>=a||g===32&&(a&4194048)!==0)?i:p}function ul(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function OS(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pp(){var r=Vo;return Vo<<=1,(Vo&62914560)===0&&(Vo=4194304),r}function Mu(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function fl(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function DS(r,i,a,u,p,g){var S=r.pendingLanes;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=a,r.entangledLanes&=a,r.errorRecoveryDisabledLanes&=a,r.shellSuspendCounter=0;var T=r.entanglements,w=r.expirationTimes,R=r.hiddenUpdates;for(a=S&~a;0<a;){var $=31-fn(a),J=1<<$;T[$]=0,w[$]=-1;var _=R[$];if(_!==null)for(R[$]=null,$=0;$<_.length;$++){var U=_[$];U!==null&&(U.lane&=-536870913)}a&=~J}u!==0&&Jp(r,u,0),g!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=g&~(S&~i))}function Jp(r,i,a){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-fn(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|a&261930}function Fp(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var u=31-fn(a),p=1<<u;p&i|r[u]&i&&(r[u]|=i),a&=~p}}function Xp(r,i){var a=i&-i;return a=(a&42)!==0?1:Cu(a),(a&(r.suspendedLanes|i))!==0?0:a}function Cu(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function wu(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Qp(){var r=te.p;return r!==0?r:(r=window.event,r===void 0?32:_0(r.type))}function Zp(r,i){var a=te.p;try{return te.p=r,i()}finally{te.p=a}}var Nr=Math.random().toString(36).slice(2),zt="__reactFiber$"+Nr,Wt="__reactProps$"+Nr,li="__reactContainer$"+Nr,Nu="__reactEvents$"+Nr,jS="__reactListeners$"+Nr,RS="__reactHandles$"+Nr,Wp="__reactResources$"+Nr,dl="__reactMarker$"+Nr;function Au(r){delete r[zt],delete r[Wt],delete r[Nu],delete r[jS],delete r[RS]}function oi(r){var i=r[zt];if(i)return i;for(var a=r.parentNode;a;){if(i=a[li]||a[zt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=v0(r);r!==null;){if(a=r[zt])return a;r=v0(r)}return i}r=a,a=r.parentNode}return null}function ai(r){if(r=r[zt]||r[li]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function hl(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function ci(r){var i=r[Wp];return i||(i=r[Wp]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function At(r){r[dl]=!0}var em=new Set,tm={};function ks(r,i){ui(r,i),ui(r+"Capture",i)}function ui(r,i){for(tm[r]=i,r=0;r<i.length;r++)em.add(i[r])}var zS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nm={},rm={};function LS(r){return le.call(rm,r)?!0:le.call(nm,r)?!1:zS.test(r)?rm[r]=!0:(nm[r]=!0,!1)}function $o(r,i,a){if(LS(i))if(a===null)r.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+a)}}function Go(r,i,a){if(a===null)r.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+a)}}function Wn(r,i,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttributeNS(i,a,""+u)}}function kn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function sm(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function _S(r,i,a){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,g=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return p.call(this)},set:function(S){a=""+S,g.call(this,S)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Ou(r){if(!r._valueTracker){var i=sm(r)?"checked":"value";r._valueTracker=_S(r,i,""+r[i])}}function im(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return r&&(u=sm(r)?r.checked?"true":"false":r.value),r=u,r!==a?(i.setValue(r),!0):!1}function Yo(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var BS=/[\n"\\]/g;function Tn(r){return r.replace(BS,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Du(r,i,a,u,p,g,S,T){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),i!=null?S==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+kn(i)):r.value!==""+kn(i)&&(r.value=""+kn(i)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),i!=null?ju(r,S,kn(i)):a!=null?ju(r,S,kn(a)):u!=null&&r.removeAttribute("value"),p==null&&g!=null&&(r.defaultChecked=!!g),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.name=""+kn(T):r.removeAttribute("name")}function lm(r,i,a,u,p,g,S,T){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),i!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){Ou(r);return}a=a!=null?""+kn(a):"",i=i!=null?""+kn(i):a,T||i===r.value||(r.value=i),r.defaultValue=i}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=T?r.checked:!!u,r.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S),Ou(r)}function ju(r,i,a){i==="number"&&Yo(r.ownerDocument)===r||r.defaultValue===""+a||(r.defaultValue=""+a)}function fi(r,i,a,u){if(r=r.options,i){i={};for(var p=0;p<a.length;p++)i["$"+a[p]]=!0;for(a=0;a<r.length;a++)p=i.hasOwnProperty("$"+r[a].value),r[a].selected!==p&&(r[a].selected=p),p&&u&&(r[a].defaultSelected=!0)}else{for(a=""+kn(a),i=null,p=0;p<r.length;p++){if(r[p].value===a){r[p].selected=!0,u&&(r[p].defaultSelected=!0);return}i!==null||r[p].disabled||(i=r[p])}i!==null&&(i.selected=!0)}}function om(r,i,a){if(i!=null&&(i=""+kn(i),i!==r.value&&(r.value=i),a==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=a!=null?""+kn(a):""}function am(r,i,a,u){if(i==null){if(u!=null){if(a!=null)throw Error(s(92));if(Ie(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),i=a}a=kn(i),r.defaultValue=a,u=r.textContent,u===a&&u!==""&&u!==null&&(r.value=u),Ou(r)}function di(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var HS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cm(r,i,a){var u=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,a):typeof a!="number"||a===0||HS.has(i)?i==="float"?r.cssFloat=a:r[i]=(""+a).trim():r[i]=a+"px"}function um(r,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var p in i)u=i[p],i.hasOwnProperty(p)&&a[p]!==u&&cm(r,p,u)}else for(var g in i)i.hasOwnProperty(g)&&cm(r,g,i[g])}function Ru(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var US=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),IS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(r){return IS.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function er(){}var zu=null;function Lu(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var hi=null,pi=null;function fm(r){var i=ai(r);if(i&&(r=i.stateNode)){var a=r[Wt]||null;e:switch(r=i.stateNode,i.type){case"input":if(Du(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Tn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==r&&u.form===r.form){var p=u[Wt]||null;if(!p)throw Error(s(90));Du(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<a.length;i++)u=a[i],u.form===r.form&&im(u)}break e;case"textarea":om(r,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&fi(r,!!a.multiple,i,!1)}}}var _u=!1;function dm(r,i,a){if(_u)return r(i,a);_u=!0;try{var u=r(i);return u}finally{if(_u=!1,(hi!==null||pi!==null)&&(Ra(),hi&&(i=hi,r=pi,pi=hi=null,fm(i),r)))for(i=0;i<r.length;i++)fm(r[i])}}function pl(r,i){var a=r.stateNode;if(a===null)return null;var u=a[Wt]||null;if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bu=!1;if(tr)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){Bu=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{Bu=!1}var Ar=null,Hu=null,Po=null;function hm(){if(Po)return Po;var r,i=Hu,a=i.length,u,p="value"in Ar?Ar.value:Ar.textContent,g=p.length;for(r=0;r<a&&i[r]===p[r];r++);var S=a-r;for(u=1;u<=S&&i[a-u]===p[g-u];u++);return Po=p.slice(r,1<u?1-u:void 0)}function Jo(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Fo(){return!0}function pm(){return!1}function en(r){function i(a,u,p,g,S){this._reactName=a,this._targetInst=p,this.type=u,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(a=r[T],this[T]=a?a(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Fo:pm,this.isPropagationStopped=pm,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),i}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xo=en(Ts),gl=y({},Ts,{view:0,detail:0}),VS=en(gl),Uu,Iu,yl,Qo=y({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==yl&&(yl&&r.type==="mousemove"?(Uu=r.screenX-yl.screenX,Iu=r.screenY-yl.screenY):Iu=Uu=0,yl=r),Uu)},movementY:function(r){return"movementY"in r?r.movementY:Iu}}),mm=en(Qo),qS=y({},Qo,{dataTransfer:0}),$S=en(qS),GS=y({},gl,{relatedTarget:0}),Vu=en(GS),YS=y({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),KS=en(YS),PS=y({},Ts,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),JS=en(PS),FS=y({},Ts,{data:0}),gm=en(FS),XS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WS(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=ZS[r])?!!i[r]:!1}function qu(){return WS}var ek=y({},gl,{key:function(r){if(r.key){var i=XS[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Jo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?QS[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qu,charCode:function(r){return r.type==="keypress"?Jo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Jo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),tk=en(ek),nk=y({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ym=en(nk),rk=y({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qu}),sk=en(rk),ik=y({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),lk=en(ik),ok=y({},Qo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ak=en(ok),ck=y({},Ts,{newState:0,oldState:0}),uk=en(ck),fk=[9,13,27,32],$u=tr&&"CompositionEvent"in window,bl=null;tr&&"documentMode"in document&&(bl=document.documentMode);var dk=tr&&"TextEvent"in window&&!bl,bm=tr&&(!$u||bl&&8<bl&&11>=bl),xm=" ",vm=!1;function Sm(r,i){switch(r){case"keyup":return fk.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function km(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var mi=!1;function hk(r,i){switch(r){case"compositionend":return km(i);case"keypress":return i.which!==32?null:(vm=!0,xm);case"textInput":return r=i.data,r===xm&&vm?null:r;default:return null}}function pk(r,i){if(mi)return r==="compositionend"||!$u&&Sm(r,i)?(r=hm(),Po=Hu=Ar=null,mi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return bm&&i.locale!=="ko"?null:i.data;default:return null}}var mk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tm(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!mk[r.type]:i==="textarea"}function Em(r,i,a,u){hi?pi?pi.push(u):pi=[u]:hi=u,i=Ia(i,"onChange"),0<i.length&&(a=new Xo("onChange","change",null,a,u),r.push({event:a,listeners:i}))}var xl=null,vl=null;function gk(r){l0(r,0)}function Zo(r){var i=hl(r);if(im(i))return r}function Mm(r,i){if(r==="change")return i}var Cm=!1;if(tr){var Gu;if(tr){var Yu="oninput"in document;if(!Yu){var wm=document.createElement("div");wm.setAttribute("oninput","return;"),Yu=typeof wm.oninput=="function"}Gu=Yu}else Gu=!1;Cm=Gu&&(!document.documentMode||9<document.documentMode)}function Nm(){xl&&(xl.detachEvent("onpropertychange",Am),vl=xl=null)}function Am(r){if(r.propertyName==="value"&&Zo(vl)){var i=[];Em(i,vl,r,Lu(r)),dm(gk,i)}}function yk(r,i,a){r==="focusin"?(Nm(),xl=i,vl=a,xl.attachEvent("onpropertychange",Am)):r==="focusout"&&Nm()}function bk(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Zo(vl)}function xk(r,i){if(r==="click")return Zo(i)}function vk(r,i){if(r==="input"||r==="change")return Zo(i)}function Sk(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var dn=typeof Object.is=="function"?Object.is:Sk;function Sl(r,i){if(dn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var p=a[u];if(!le.call(i,p)||!dn(r[p],i[p]))return!1}return!0}function Om(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Dm(r,i){var a=Om(r);r=0;for(var u;a;){if(a.nodeType===3){if(u=r+a.textContent.length,r<=i&&u>=i)return{node:a,offset:i-r};r=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Om(a)}}function jm(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?jm(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Rm(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Yo(r.document);i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=Yo(r.document)}return i}function Ku(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var kk=tr&&"documentMode"in document&&11>=document.documentMode,gi=null,Pu=null,kl=null,Ju=!1;function zm(r,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ju||gi==null||gi!==Yo(u)||(u=gi,"selectionStart"in u&&Ku(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),kl&&Sl(kl,u)||(kl=u,u=Ia(Pu,"onSelect"),0<u.length&&(i=new Xo("onSelect","select",null,i,a),r.push({event:i,listeners:u}),i.target=gi)))}function Es(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var yi={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionrun:Es("Transition","TransitionRun"),transitionstart:Es("Transition","TransitionStart"),transitioncancel:Es("Transition","TransitionCancel"),transitionend:Es("Transition","TransitionEnd")},Fu={},Lm={};tr&&(Lm=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);function Ms(r){if(Fu[r])return Fu[r];if(!yi[r])return r;var i=yi[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in Lm)return Fu[r]=i[a];return r}var _m=Ms("animationend"),Bm=Ms("animationiteration"),Hm=Ms("animationstart"),Tk=Ms("transitionrun"),Ek=Ms("transitionstart"),Mk=Ms("transitioncancel"),Um=Ms("transitionend"),Im=new Map,Xu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xu.push("scrollEnd");function Hn(r,i){Im.set(r,i),ks(i,[r])}var Wo=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},En=[],bi=0,Qu=0;function ea(){for(var r=bi,i=Qu=bi=0;i<r;){var a=En[i];En[i++]=null;var u=En[i];En[i++]=null;var p=En[i];En[i++]=null;var g=En[i];if(En[i++]=null,u!==null&&p!==null){var S=u.pending;S===null?p.next=p:(p.next=S.next,S.next=p),u.pending=p}g!==0&&Vm(a,p,g)}}function ta(r,i,a,u){En[bi++]=r,En[bi++]=i,En[bi++]=a,En[bi++]=u,Qu|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Zu(r,i,a,u){return ta(r,i,a,u),na(r)}function Cs(r,i){return ta(r,null,null,i),na(r)}function Vm(r,i,a){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a);for(var p=!1,g=r.return;g!==null;)g.childLanes|=a,u=g.alternate,u!==null&&(u.childLanes|=a),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(p=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,p&&i!==null&&(p=31-fn(a),r=g.hiddenUpdates,u=r[p],u===null?r[p]=[i]:u.push(i),i.lane=a|536870912),g):null}function na(r){if(50<Gl)throw Gl=0,ad=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var xi={};function Ck(r,i,a,u){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(r,i,a,u){return new Ck(r,i,a,u)}function Wu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function nr(r,i){var a=r.alternate;return a===null?(a=hn(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&65011712,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a.refCleanup=r.refCleanup,a}function qm(r,i){r.flags&=65011714;var a=r.alternate;return a===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,i=a.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function ra(r,i,a,u,p,g){var S=0;if(u=r,typeof r=="function")Wu(r)&&(S=1);else if(typeof r=="string")S=DT(r,a,oe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case fe:return r=hn(31,a,i,p),r.elementType=fe,r.lanes=g,r;case M:return ws(a.children,p,g,i);case E:S=8,p|=24;break;case C:return r=hn(12,a,i,p|2),r.elementType=C,r.lanes=g,r;case G:return r=hn(13,a,i,p),r.elementType=G,r.lanes=g,r;case F:return r=hn(19,a,i,p),r.elementType=F,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case B:S=10;break e;case z:S=9;break e;case ee:S=11;break e;case q:S=14;break e;case se:S=16,u=null;break e}S=29,a=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=hn(S,a,i,p),i.elementType=r,i.type=u,i.lanes=g,i}function ws(r,i,a,u){return r=hn(7,r,u,i),r.lanes=a,r}function ef(r,i,a){return r=hn(6,r,null,i),r.lanes=a,r}function $m(r){var i=hn(18,null,null,0);return i.stateNode=r,i}function tf(r,i,a){return i=hn(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Gm=new WeakMap;function Mn(r,i){if(typeof r=="object"&&r!==null){var a=Gm.get(r);return a!==void 0?a:(i={value:r,source:i,stack:V(i)},Gm.set(r,i),i)}return{value:r,source:i,stack:V(i)}}var vi=[],Si=0,sa=null,Tl=0,Cn=[],wn=0,Or=null,Gn=1,Yn="";function rr(r,i){vi[Si++]=Tl,vi[Si++]=sa,sa=r,Tl=i}function Ym(r,i,a){Cn[wn++]=Gn,Cn[wn++]=Yn,Cn[wn++]=Or,Or=r;var u=Gn;r=Yn;var p=32-fn(u)-1;u&=~(1<<p),a+=1;var g=32-fn(i)+p;if(30<g){var S=p-p%5;g=(u&(1<<S)-1).toString(32),u>>=S,p-=S,Gn=1<<32-fn(i)+p|a<<p|u,Yn=g+r}else Gn=1<<g|a<<p|u,Yn=r}function nf(r){r.return!==null&&(rr(r,1),Ym(r,1,0))}function rf(r){for(;r===sa;)sa=vi[--Si],vi[Si]=null,Tl=vi[--Si],vi[Si]=null;for(;r===Or;)Or=Cn[--wn],Cn[wn]=null,Yn=Cn[--wn],Cn[wn]=null,Gn=Cn[--wn],Cn[wn]=null}function Km(r,i){Cn[wn++]=Gn,Cn[wn++]=Yn,Cn[wn++]=Or,Gn=i.id,Yn=i.overflow,Or=r}var Lt=null,rt=null,Ue=!1,Dr=null,Nn=!1,sf=Error(s(519));function jr(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw El(Mn(i,r)),sf}function Pm(r){var i=r.stateNode,a=r.type,u=r.memoizedProps;switch(i[zt]=r,i[Wt]=u,a){case"dialog":Le("cancel",i),Le("close",i);break;case"iframe":case"object":case"embed":Le("load",i);break;case"video":case"audio":for(a=0;a<Kl.length;a++)Le(Kl[a],i);break;case"source":Le("error",i);break;case"img":case"image":case"link":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"input":Le("invalid",i),lm(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Le("invalid",i);break;case"textarea":Le("invalid",i),am(i,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||u.suppressHydrationWarning===!0||u0(i.textContent,a)?(u.popover!=null&&(Le("beforetoggle",i),Le("toggle",i)),u.onScroll!=null&&Le("scroll",i),u.onScrollEnd!=null&&Le("scrollend",i),u.onClick!=null&&(i.onclick=er),i=!0):i=!1,i||jr(r,!0)}function Jm(r){for(Lt=r.return;Lt;)switch(Lt.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Lt=Lt.return}}function ki(r){if(r!==Lt)return!1;if(!Ue)return Jm(r),Ue=!0,!1;var i=r.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=r.type,a=!(a!=="form"&&a!=="button")||Td(r.type,r.memoizedProps)),a=!a),a&&rt&&jr(r),Jm(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));rt=x0(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));rt=x0(r)}else i===27?(i=rt,Kr(r.type)?(r=Nd,Nd=null,rt=r):rt=i):rt=Lt?On(r.stateNode.nextSibling):null;return!0}function Ns(){rt=Lt=null,Ue=!1}function lf(){var r=Dr;return r!==null&&(sn===null?sn=r:sn.push.apply(sn,r),Dr=null),r}function El(r){Dr===null?Dr=[r]:Dr.push(r)}var of=N(null),As=null,sr=null;function Rr(r,i,a){ie(of,i._currentValue),i._currentValue=a}function ir(r){r._currentValue=of.current,Y(of)}function af(r,i,a){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===a)break;r=r.return}}function cf(r,i,a,u){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var g=p.dependencies;if(g!==null){var S=p.child;g=g.firstContext;e:for(;g!==null;){var T=g;g=p;for(var w=0;w<i.length;w++)if(T.context===i[w]){g.lanes|=a,T=g.alternate,T!==null&&(T.lanes|=a),af(g.return,a,r),u||(S=null);break e}g=T.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(s(341));S.lanes|=a,g=S.alternate,g!==null&&(g.lanes|=a),af(S,a,r),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===r){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function Ti(r,i,a,u){r=null;for(var p=i,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var T=p.type;dn(p.pendingProps.value,S.value)||(r!==null?r.push(T):r=[T])}}else if(p===Te.current){if(S=p.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Ql):r=[Ql])}p=p.return}r!==null&&cf(i,r,a,u),i.flags|=262144}function ia(r){for(r=r.firstContext;r!==null;){if(!dn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Os(r){As=r,sr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function _t(r){return Fm(As,r)}function la(r,i){return As===null&&Os(r),Fm(r,i)}function Fm(r,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},sr===null){if(r===null)throw Error(s(308));sr=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else sr=sr.next=i;return a}var wk=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(a,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(a){return a()})}},Nk=n.unstable_scheduleCallback,Ak=n.unstable_NormalPriority,xt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uf(){return{controller:new wk,data:new Map,refCount:0}}function Ml(r){r.refCount--,r.refCount===0&&Nk(Ak,function(){r.controller.abort()})}var Cl=null,ff=0,Ei=0,Mi=null;function Ok(r,i){if(Cl===null){var a=Cl=[];ff=0,Ei=pd(),Mi={status:"pending",value:void 0,then:function(u){a.push(u)}}}return ff++,i.then(Xm,Xm),i}function Xm(){if(--ff===0&&Cl!==null){Mi!==null&&(Mi.status="fulfilled");var r=Cl;Cl=null,Ei=0,Mi=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function Dk(r,i){var a=[],u={status:"pending",value:null,reason:null,then:function(p){a.push(p)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var p=0;p<a.length;p++)(0,a[p])(i)},function(p){for(u.status="rejected",u.reason=p,p=0;p<a.length;p++)(0,a[p])(void 0)}),u}var Qm=I.S;I.S=function(r,i){zy=ye(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Ok(r,i),Qm!==null&&Qm(r,i)};var Ds=N(null);function df(){var r=Ds.current;return r!==null?r:We.pooledCache}function oa(r,i){i===null?ie(Ds,Ds.current):ie(Ds,i.pool)}function Zm(){var r=df();return r===null?null:{parent:xt._currentValue,pool:r}}var Ci=Error(s(460)),hf=Error(s(474)),aa=Error(s(542)),ca={then:function(){}};function Wm(r){return r=r.status,r==="fulfilled"||r==="rejected"}function eg(r,i,a){switch(a=r[a],a===void 0?r.push(i):a!==i&&(i.then(er,er),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,ng(r),r;default:if(typeof i.status=="string")i.then(er,er);else{if(r=We,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=u}},function(u){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,ng(r),r}throw Rs=i,Ci}}function js(r){try{var i=r._init;return i(r._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Rs=a,Ci):a}}var Rs=null;function tg(){if(Rs===null)throw Error(s(459));var r=Rs;return Rs=null,r}function ng(r){if(r===Ci||r===aa)throw Error(s(483))}var wi=null,wl=0;function ua(r){var i=wl;return wl+=1,wi===null&&(wi=[]),eg(wi,r,i)}function Nl(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function fa(r,i){throw i.$$typeof===b?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function rg(r){function i(D,A){if(r){var j=D.deletions;j===null?(D.deletions=[A],D.flags|=16):j.push(A)}}function a(D,A){if(!r)return null;for(;A!==null;)i(D,A),A=A.sibling;return null}function u(D){for(var A=new Map;D!==null;)D.key!==null?A.set(D.key,D):A.set(D.index,D),D=D.sibling;return A}function p(D,A){return D=nr(D,A),D.index=0,D.sibling=null,D}function g(D,A,j){return D.index=j,r?(j=D.alternate,j!==null?(j=j.index,j<A?(D.flags|=67108866,A):j):(D.flags|=67108866,A)):(D.flags|=1048576,A)}function S(D){return r&&D.alternate===null&&(D.flags|=67108866),D}function T(D,A,j,K){return A===null||A.tag!==6?(A=ef(j,D.mode,K),A.return=D,A):(A=p(A,j),A.return=D,A)}function w(D,A,j,K){var me=j.type;return me===M?$(D,A,j.props.children,K,j.key):A!==null&&(A.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===se&&js(me)===A.type)?(A=p(A,j.props),Nl(A,j),A.return=D,A):(A=ra(j.type,j.key,j.props,null,D.mode,K),Nl(A,j),A.return=D,A)}function R(D,A,j,K){return A===null||A.tag!==4||A.stateNode.containerInfo!==j.containerInfo||A.stateNode.implementation!==j.implementation?(A=tf(j,D.mode,K),A.return=D,A):(A=p(A,j.children||[]),A.return=D,A)}function $(D,A,j,K,me){return A===null||A.tag!==7?(A=ws(j,D.mode,K,me),A.return=D,A):(A=p(A,j),A.return=D,A)}function J(D,A,j){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=ef(""+A,D.mode,j),A.return=D,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case v:return j=ra(A.type,A.key,A.props,null,D.mode,j),Nl(j,A),j.return=D,j;case k:return A=tf(A,D.mode,j),A.return=D,A;case se:return A=js(A),J(D,A,j)}if(Ie(A)||Re(A))return A=ws(A,D.mode,j,null),A.return=D,A;if(typeof A.then=="function")return J(D,ua(A),j);if(A.$$typeof===B)return J(D,la(D,A),j);fa(D,A)}return null}function _(D,A,j,K){var me=A!==null?A.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return me!==null?null:T(D,A,""+j,K);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case v:return j.key===me?w(D,A,j,K):null;case k:return j.key===me?R(D,A,j,K):null;case se:return j=js(j),_(D,A,j,K)}if(Ie(j)||Re(j))return me!==null?null:$(D,A,j,K,null);if(typeof j.then=="function")return _(D,A,ua(j),K);if(j.$$typeof===B)return _(D,A,la(D,j),K);fa(D,j)}return null}function U(D,A,j,K,me){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return D=D.get(j)||null,T(A,D,""+K,me);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case v:return D=D.get(K.key===null?j:K.key)||null,w(A,D,K,me);case k:return D=D.get(K.key===null?j:K.key)||null,R(A,D,K,me);case se:return K=js(K),U(D,A,j,K,me)}if(Ie(K)||Re(K))return D=D.get(j)||null,$(A,D,K,me,null);if(typeof K.then=="function")return U(D,A,j,ua(K),me);if(K.$$typeof===B)return U(D,A,j,la(A,K),me);fa(A,K)}return null}function ce(D,A,j,K){for(var me=null,qe=null,ue=A,Ne=A=0,He=null;ue!==null&&Ne<j.length;Ne++){ue.index>Ne?(He=ue,ue=null):He=ue.sibling;var $e=_(D,ue,j[Ne],K);if($e===null){ue===null&&(ue=He);break}r&&ue&&$e.alternate===null&&i(D,ue),A=g($e,A,Ne),qe===null?me=$e:qe.sibling=$e,qe=$e,ue=He}if(Ne===j.length)return a(D,ue),Ue&&rr(D,Ne),me;if(ue===null){for(;Ne<j.length;Ne++)ue=J(D,j[Ne],K),ue!==null&&(A=g(ue,A,Ne),qe===null?me=ue:qe.sibling=ue,qe=ue);return Ue&&rr(D,Ne),me}for(ue=u(ue);Ne<j.length;Ne++)He=U(ue,D,Ne,j[Ne],K),He!==null&&(r&&He.alternate!==null&&ue.delete(He.key===null?Ne:He.key),A=g(He,A,Ne),qe===null?me=He:qe.sibling=He,qe=He);return r&&ue.forEach(function(Qr){return i(D,Qr)}),Ue&&rr(D,Ne),me}function xe(D,A,j,K){if(j==null)throw Error(s(151));for(var me=null,qe=null,ue=A,Ne=A=0,He=null,$e=j.next();ue!==null&&!$e.done;Ne++,$e=j.next()){ue.index>Ne?(He=ue,ue=null):He=ue.sibling;var Qr=_(D,ue,$e.value,K);if(Qr===null){ue===null&&(ue=He);break}r&&ue&&Qr.alternate===null&&i(D,ue),A=g(Qr,A,Ne),qe===null?me=Qr:qe.sibling=Qr,qe=Qr,ue=He}if($e.done)return a(D,ue),Ue&&rr(D,Ne),me;if(ue===null){for(;!$e.done;Ne++,$e=j.next())$e=J(D,$e.value,K),$e!==null&&(A=g($e,A,Ne),qe===null?me=$e:qe.sibling=$e,qe=$e);return Ue&&rr(D,Ne),me}for(ue=u(ue);!$e.done;Ne++,$e=j.next())$e=U(ue,D,Ne,$e.value,K),$e!==null&&(r&&$e.alternate!==null&&ue.delete($e.key===null?Ne:$e.key),A=g($e,A,Ne),qe===null?me=$e:qe.sibling=$e,qe=$e);return r&&ue.forEach(function(qT){return i(D,qT)}),Ue&&rr(D,Ne),me}function Ze(D,A,j,K){if(typeof j=="object"&&j!==null&&j.type===M&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case v:e:{for(var me=j.key;A!==null;){if(A.key===me){if(me=j.type,me===M){if(A.tag===7){a(D,A.sibling),K=p(A,j.props.children),K.return=D,D=K;break e}}else if(A.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===se&&js(me)===A.type){a(D,A.sibling),K=p(A,j.props),Nl(K,j),K.return=D,D=K;break e}a(D,A);break}else i(D,A);A=A.sibling}j.type===M?(K=ws(j.props.children,D.mode,K,j.key),K.return=D,D=K):(K=ra(j.type,j.key,j.props,null,D.mode,K),Nl(K,j),K.return=D,D=K)}return S(D);case k:e:{for(me=j.key;A!==null;){if(A.key===me)if(A.tag===4&&A.stateNode.containerInfo===j.containerInfo&&A.stateNode.implementation===j.implementation){a(D,A.sibling),K=p(A,j.children||[]),K.return=D,D=K;break e}else{a(D,A);break}else i(D,A);A=A.sibling}K=tf(j,D.mode,K),K.return=D,D=K}return S(D);case se:return j=js(j),Ze(D,A,j,K)}if(Ie(j))return ce(D,A,j,K);if(Re(j)){if(me=Re(j),typeof me!="function")throw Error(s(150));return j=me.call(j),xe(D,A,j,K)}if(typeof j.then=="function")return Ze(D,A,ua(j),K);if(j.$$typeof===B)return Ze(D,A,la(D,j),K);fa(D,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,A!==null&&A.tag===6?(a(D,A.sibling),K=p(A,j),K.return=D,D=K):(a(D,A),K=ef(j,D.mode,K),K.return=D,D=K),S(D)):a(D,A)}return function(D,A,j,K){try{wl=0;var me=Ze(D,A,j,K);return wi=null,me}catch(ue){if(ue===Ci||ue===aa)throw ue;var qe=hn(29,ue,null,D.mode);return qe.lanes=K,qe.return=D,qe}finally{}}}var zs=rg(!0),sg=rg(!1),zr=!1;function pf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mf(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Lr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function _r(r,i,a){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Ye&2)!==0){var p=u.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),u.pending=i,i=na(r),Vm(r,null,a),i}return ta(r,u,i,a),na(r)}function Al(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,a|=u,i.lanes=a,Fp(r,a)}}function gf(r,i){var a=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var p=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?p=g=S:g=g.next=S,a=a.next}while(a!==null);g===null?p=g=i:g=g.next=i}else p=g=i;a={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}var yf=!1;function Ol(){if(yf){var r=Mi;if(r!==null)throw r}}function Dl(r,i,a,u){yf=!1;var p=r.updateQueue;zr=!1;var g=p.firstBaseUpdate,S=p.lastBaseUpdate,T=p.shared.pending;if(T!==null){p.shared.pending=null;var w=T,R=w.next;w.next=null,S===null?g=R:S.next=R,S=w;var $=r.alternate;$!==null&&($=$.updateQueue,T=$.lastBaseUpdate,T!==S&&(T===null?$.firstBaseUpdate=R:T.next=R,$.lastBaseUpdate=w))}if(g!==null){var J=p.baseState;S=0,$=R=w=null,T=g;do{var _=T.lane&-536870913,U=_!==T.lane;if(U?(Be&_)===_:(u&_)===_){_!==0&&_===Ei&&(yf=!0),$!==null&&($=$.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ce=r,xe=T;_=i;var Ze=a;switch(xe.tag){case 1:if(ce=xe.payload,typeof ce=="function"){J=ce.call(Ze,J,_);break e}J=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=xe.payload,_=typeof ce=="function"?ce.call(Ze,J,_):ce,_==null)break e;J=y({},J,_);break e;case 2:zr=!0}}_=T.callback,_!==null&&(r.flags|=64,U&&(r.flags|=8192),U=p.callbacks,U===null?p.callbacks=[_]:U.push(_))}else U={lane:_,tag:T.tag,payload:T.payload,callback:T.callback,next:null},$===null?(R=$=U,w=J):$=$.next=U,S|=_;if(T=T.next,T===null){if(T=p.shared.pending,T===null)break;U=T,T=U.next,U.next=null,p.lastBaseUpdate=U,p.shared.pending=null}}while(!0);$===null&&(w=J),p.baseState=w,p.firstBaseUpdate=R,p.lastBaseUpdate=$,g===null&&(p.shared.lanes=0),Vr|=S,r.lanes=S,r.memoizedState=J}}function ig(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function lg(r,i){var a=r.callbacks;if(a!==null)for(r.callbacks=null,r=0;r<a.length;r++)ig(a[r],i)}var Ni=N(null),da=N(0);function og(r,i){r=pr,ie(da,r),ie(Ni,i),pr=r|i.baseLanes}function bf(){ie(da,pr),ie(Ni,Ni.current)}function xf(){pr=da.current,Y(Ni),Y(da)}var pn=N(null),An=null;function Br(r){var i=r.alternate;ie(gt,gt.current&1),ie(pn,r),An===null&&(i===null||Ni.current!==null||i.memoizedState!==null)&&(An=r)}function vf(r){ie(gt,gt.current),ie(pn,r),An===null&&(An=r)}function ag(r){r.tag===22?(ie(gt,gt.current),ie(pn,r),An===null&&(An=r)):Hr()}function Hr(){ie(gt,gt.current),ie(pn,pn.current)}function mn(r){Y(pn),An===r&&(An=null),Y(gt)}var gt=N(0);function ha(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Cd(a)||wd(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var lr=0,we=null,Xe=null,vt=null,pa=!1,Ai=!1,Ls=!1,ma=0,jl=0,Oi=null,jk=0;function dt(){throw Error(s(321))}function Sf(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!dn(r[a],i[a]))return!1;return!0}function kf(r,i,a,u,p,g){return lr=g,we=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,I.H=r===null||r.memoizedState===null?Yg:Bf,Ls=!1,g=a(u,p),Ls=!1,Ai&&(g=ug(i,a,u,p)),cg(r),g}function cg(r){I.H=Ll;var i=Xe!==null&&Xe.next!==null;if(lr=0,vt=Xe=we=null,pa=!1,jl=0,Oi=null,i)throw Error(s(300));r===null||St||(r=r.dependencies,r!==null&&ia(r)&&(St=!0))}function ug(r,i,a,u){we=r;var p=0;do{if(Ai&&(Oi=null),jl=0,Ai=!1,25<=p)throw Error(s(301));if(p+=1,vt=Xe=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}I.H=Kg,g=i(a,u)}while(Ai);return g}function Rk(){var r=I.H,i=r.useState()[0];return i=typeof i.then=="function"?Rl(i):i,r=r.useState()[0],(Xe!==null?Xe.memoizedState:null)!==r&&(we.flags|=1024),i}function Tf(){var r=ma!==0;return ma=0,r}function Ef(r,i,a){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~a}function Mf(r){if(pa){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pa=!1}lr=0,vt=Xe=we=null,Ai=!1,jl=ma=0,Oi=null}function Jt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?we.memoizedState=vt=r:vt=vt.next=r,vt}function yt(){if(Xe===null){var r=we.alternate;r=r!==null?r.memoizedState:null}else r=Xe.next;var i=vt===null?we.memoizedState:vt.next;if(i!==null)vt=i,Xe=r;else{if(r===null)throw we.alternate===null?Error(s(467)):Error(s(310));Xe=r,r={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},vt===null?we.memoizedState=vt=r:vt=vt.next=r}return vt}function ga(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(r){var i=jl;return jl+=1,Oi===null&&(Oi=[]),r=eg(Oi,r,i),i=we,(vt===null?i.memoizedState:vt.next)===null&&(i=i.alternate,I.H=i===null||i.memoizedState===null?Yg:Bf),r}function ya(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Rl(r);if(r.$$typeof===B)return _t(r)}throw Error(s(438,String(r)))}function Cf(r){var i=null,a=we.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var u=we.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=ga(),we.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(r),u=0;u<r;u++)a[u]=Me;return i.index++,a}function or(r,i){return typeof i=="function"?i(r):i}function ba(r){var i=yt();return wf(i,Xe,r)}function wf(r,i,a){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var p=r.baseQueue,g=u.pending;if(g!==null){if(p!==null){var S=p.next;p.next=g.next,g.next=S}i.baseQueue=p=g,u.pending=null}if(g=r.baseState,p===null)r.memoizedState=g;else{i=p.next;var T=S=null,w=null,R=i,$=!1;do{var J=R.lane&-536870913;if(J!==R.lane?(Be&J)===J:(lr&J)===J){var _=R.revertLane;if(_===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),J===Ei&&($=!0);else if((lr&_)===_){R=R.next,_===Ei&&($=!0);continue}else J={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},w===null?(T=w=J,S=g):w=w.next=J,we.lanes|=_,Vr|=_;J=R.action,Ls&&a(g,J),g=R.hasEagerState?R.eagerState:a(g,J)}else _={lane:J,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},w===null?(T=w=_,S=g):w=w.next=_,we.lanes|=J,Vr|=J;R=R.next}while(R!==null&&R!==i);if(w===null?S=g:w.next=T,!dn(g,r.memoizedState)&&(St=!0,$&&(a=Mi,a!==null)))throw a;r.memoizedState=g,r.baseState=S,r.baseQueue=w,u.lastRenderedState=g}return p===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Nf(r){var i=yt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var u=a.dispatch,p=a.pending,g=i.memoizedState;if(p!==null){a.pending=null;var S=p=p.next;do g=r(g,S.action),S=S.next;while(S!==p);dn(g,i.memoizedState)||(St=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,u]}function fg(r,i,a){var u=we,p=yt(),g=Ue;if(g){if(a===void 0)throw Error(s(407));a=a()}else a=i();var S=!dn((Xe||p).memoizedState,a);if(S&&(p.memoizedState=a,St=!0),p=p.queue,Df(pg.bind(null,u,p,r),[r]),p.getSnapshot!==i||S||vt!==null&&vt.memoizedState.tag&1){if(u.flags|=2048,Di(9,{destroy:void 0},hg.bind(null,u,p,a,i),null),We===null)throw Error(s(349));g||(lr&127)!==0||dg(u,i,a)}return a}function dg(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=we.updateQueue,i===null?(i=ga(),we.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function hg(r,i,a,u){i.value=a,i.getSnapshot=u,mg(i)&&gg(r)}function pg(r,i,a){return a(function(){mg(i)&&gg(r)})}function mg(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!dn(r,a)}catch{return!0}}function gg(r){var i=Cs(r,2);i!==null&&ln(i,r,2)}function Af(r){var i=Jt();if(typeof r=="function"){var a=r;if(r=a(),Ls){wr(!0);try{a()}finally{wr(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:r},i}function yg(r,i,a,u){return r.baseState=a,wf(r,Xe,typeof u=="function"?u:or)}function zk(r,i,a,u,p){if(Sa(r))throw Error(s(485));if(r=i.action,r!==null){var g={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};I.T!==null?a(!0):g.isTransition=!1,u(g),a=i.pending,a===null?(g.next=i.pending=g,bg(i,g)):(g.next=a.next,i.pending=a.next=g)}}function bg(r,i){var a=i.action,u=i.payload,p=r.state;if(i.isTransition){var g=I.T,S={};I.T=S;try{var T=a(p,u),w=I.S;w!==null&&w(S,T),xg(r,i,T)}catch(R){Of(r,i,R)}finally{g!==null&&S.types!==null&&(g.types=S.types),I.T=g}}else try{g=a(p,u),xg(r,i,g)}catch(R){Of(r,i,R)}}function xg(r,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){vg(r,i,u)},function(u){return Of(r,i,u)}):vg(r,i,a)}function vg(r,i,a){i.status="fulfilled",i.value=a,Sg(i),r.state=a,i=r.pending,i!==null&&(a=i.next,a===i?r.pending=null:(a=a.next,i.next=a,bg(r,a)))}function Of(r,i,a){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=a,Sg(i),i=i.next;while(i!==u)}r.action=null}function Sg(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function kg(r,i){return i}function Tg(r,i){if(Ue){var a=We.formState;if(a!==null){e:{var u=we;if(Ue){if(rt){t:{for(var p=rt,g=Nn;p.nodeType!==8;){if(!g){p=null;break t}if(p=On(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){rt=On(p.nextSibling),u=p.data==="F!";break e}}jr(u)}u=!1}u&&(i=a[0])}}return a=Jt(),a.memoizedState=a.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kg,lastRenderedState:i},a.queue=u,a=qg.bind(null,we,u),u.dispatch=a,u=Af(!1),g=_f.bind(null,we,!1,u.queue),u=Jt(),p={state:i,dispatch:null,action:r,pending:null},u.queue=p,a=zk.bind(null,we,p,g,a),p.dispatch=a,u.memoizedState=r,[i,a,!1]}function Eg(r){var i=yt();return Mg(i,Xe,r)}function Mg(r,i,a){if(i=wf(r,i,kg)[0],r=ba(or)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Rl(i)}catch(S){throw S===Ci?aa:S}else u=i;i=yt();var p=i.queue,g=p.dispatch;return a!==i.memoizedState&&(we.flags|=2048,Di(9,{destroy:void 0},Lk.bind(null,p,a),null)),[u,g,r]}function Lk(r,i){r.action=i}function Cg(r){var i=yt(),a=Xe;if(a!==null)return Mg(i,a,r);yt(),i=i.memoizedState,a=yt();var u=a.queue.dispatch;return a.memoizedState=r,[i,u,!1]}function Di(r,i,a,u){return r={tag:r,create:a,deps:u,inst:i,next:null},i=we.updateQueue,i===null&&(i=ga(),we.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=r.next=r:(u=a.next,a.next=r,r.next=u,i.lastEffect=r),r}function wg(){return yt().memoizedState}function xa(r,i,a,u){var p=Jt();we.flags|=r,p.memoizedState=Di(1|i,{destroy:void 0},a,u===void 0?null:u)}function va(r,i,a,u){var p=yt();u=u===void 0?null:u;var g=p.memoizedState.inst;Xe!==null&&u!==null&&Sf(u,Xe.memoizedState.deps)?p.memoizedState=Di(i,g,a,u):(we.flags|=r,p.memoizedState=Di(1|i,g,a,u))}function Ng(r,i){xa(8390656,8,r,i)}function Df(r,i){va(2048,8,r,i)}function _k(r){we.flags|=4;var i=we.updateQueue;if(i===null)i=ga(),we.updateQueue=i,i.events=[r];else{var a=i.events;a===null?i.events=[r]:a.push(r)}}function Ag(r){var i=yt().memoizedState;return _k({ref:i,nextImpl:r}),function(){if((Ye&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Og(r,i){return va(4,2,r,i)}function Dg(r,i){return va(4,4,r,i)}function jg(r,i){if(typeof i=="function"){r=r();var a=i(r);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Rg(r,i,a){a=a!=null?a.concat([r]):null,va(4,4,jg.bind(null,i,r),a)}function jf(){}function zg(r,i){var a=yt();i=i===void 0?null:i;var u=a.memoizedState;return i!==null&&Sf(i,u[1])?u[0]:(a.memoizedState=[r,i],r)}function Lg(r,i){var a=yt();i=i===void 0?null:i;var u=a.memoizedState;if(i!==null&&Sf(i,u[1]))return u[0];if(u=r(),Ls){wr(!0);try{r()}finally{wr(!1)}}return a.memoizedState=[u,i],u}function Rf(r,i,a){return a===void 0||(lr&1073741824)!==0&&(Be&261930)===0?r.memoizedState=i:(r.memoizedState=a,r=_y(),we.lanes|=r,Vr|=r,a)}function _g(r,i,a,u){return dn(a,i)?a:Ni.current!==null?(r=Rf(r,a,u),dn(r,i)||(St=!0),r):(lr&42)===0||(lr&1073741824)!==0&&(Be&261930)===0?(St=!0,r.memoizedState=a):(r=_y(),we.lanes|=r,Vr|=r,i)}function Bg(r,i,a,u,p){var g=te.p;te.p=g!==0&&8>g?g:8;var S=I.T,T={};I.T=T,_f(r,!1,i,a);try{var w=p(),R=I.S;if(R!==null&&R(T,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var $=Dk(w,u);zl(r,i,$,bn(r))}else zl(r,i,u,bn(r))}catch(J){zl(r,i,{then:function(){},status:"rejected",reason:J},bn())}finally{te.p=g,S!==null&&T.types!==null&&(S.types=T.types),I.T=S}}function Bk(){}function zf(r,i,a,u){if(r.tag!==5)throw Error(s(476));var p=Hg(r).queue;Bg(r,p,i,he,a===null?Bk:function(){return Ug(r),a(u)})}function Hg(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:he},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:a},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Ug(r){var i=Hg(r);i.next===null&&(i=r.alternate.memoizedState),zl(r,i.next.queue,{},bn())}function Lf(){return _t(Ql)}function Ig(){return yt().memoizedState}function Vg(){return yt().memoizedState}function Hk(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var a=bn();r=Lr(a);var u=_r(i,r,a);u!==null&&(ln(u,i,a),Al(u,i,a)),i={cache:uf()},r.payload=i;return}i=i.return}}function Uk(r,i,a){var u=bn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Sa(r)?$g(i,a):(a=Zu(r,i,a,u),a!==null&&(ln(a,r,u),Gg(a,i,u)))}function qg(r,i,a){var u=bn();zl(r,i,a,u)}function zl(r,i,a,u){var p={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Sa(r))$g(i,p);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var S=i.lastRenderedState,T=g(S,a);if(p.hasEagerState=!0,p.eagerState=T,dn(T,S))return ta(r,i,p,0),We===null&&ea(),!1}catch{}finally{}if(a=Zu(r,i,p,u),a!==null)return ln(a,r,u),Gg(a,i,u),!0}return!1}function _f(r,i,a,u){if(u={lane:2,revertLane:pd(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Sa(r)){if(i)throw Error(s(479))}else i=Zu(r,a,u,2),i!==null&&ln(i,r,2)}function Sa(r){var i=r.alternate;return r===we||i!==null&&i===we}function $g(r,i){Ai=pa=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function Gg(r,i,a){if((a&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,a|=u,i.lanes=a,Fp(r,a)}}var Ll={readContext:_t,use:ya,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};Ll.useEffectEvent=dt;var Yg={readContext:_t,use:ya,useCallback:function(r,i){return Jt().memoizedState=[r,i===void 0?null:i],r},useContext:_t,useEffect:Ng,useImperativeHandle:function(r,i,a){a=a!=null?a.concat([r]):null,xa(4194308,4,jg.bind(null,i,r),a)},useLayoutEffect:function(r,i){return xa(4194308,4,r,i)},useInsertionEffect:function(r,i){xa(4,2,r,i)},useMemo:function(r,i){var a=Jt();i=i===void 0?null:i;var u=r();if(Ls){wr(!0);try{r()}finally{wr(!1)}}return a.memoizedState=[u,i],u},useReducer:function(r,i,a){var u=Jt();if(a!==void 0){var p=a(i);if(Ls){wr(!0);try{a(i)}finally{wr(!1)}}}else p=i;return u.memoizedState=u.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},u.queue=r,r=r.dispatch=Uk.bind(null,we,r),[u.memoizedState,r]},useRef:function(r){var i=Jt();return r={current:r},i.memoizedState=r},useState:function(r){r=Af(r);var i=r.queue,a=qg.bind(null,we,i);return i.dispatch=a,[r.memoizedState,a]},useDebugValue:jf,useDeferredValue:function(r,i){var a=Jt();return Rf(a,r,i)},useTransition:function(){var r=Af(!1);return r=Bg.bind(null,we,r.queue,!0,!1),Jt().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,a){var u=we,p=Jt();if(Ue){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),We===null)throw Error(s(349));(Be&127)!==0||dg(u,i,a)}p.memoizedState=a;var g={value:a,getSnapshot:i};return p.queue=g,Ng(pg.bind(null,u,g,r),[r]),u.flags|=2048,Di(9,{destroy:void 0},hg.bind(null,u,g,a,i),null),a},useId:function(){var r=Jt(),i=We.identifierPrefix;if(Ue){var a=Yn,u=Gn;a=(u&~(1<<32-fn(u)-1)).toString(32)+a,i="_"+i+"R_"+a,a=ma++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=jk++,i="_"+i+"r_"+a.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Lf,useFormState:Tg,useActionState:Tg,useOptimistic:function(r){var i=Jt();i.memoizedState=i.baseState=r;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=_f.bind(null,we,!0,a),a.dispatch=i,[r,i]},useMemoCache:Cf,useCacheRefresh:function(){return Jt().memoizedState=Hk.bind(null,we)},useEffectEvent:function(r){var i=Jt(),a={impl:r};return i.memoizedState=a,function(){if((Ye&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Bf={readContext:_t,use:ya,useCallback:zg,useContext:_t,useEffect:Df,useImperativeHandle:Rg,useInsertionEffect:Og,useLayoutEffect:Dg,useMemo:Lg,useReducer:ba,useRef:wg,useState:function(){return ba(or)},useDebugValue:jf,useDeferredValue:function(r,i){var a=yt();return _g(a,Xe.memoizedState,r,i)},useTransition:function(){var r=ba(or)[0],i=yt().memoizedState;return[typeof r=="boolean"?r:Rl(r),i]},useSyncExternalStore:fg,useId:Ig,useHostTransitionStatus:Lf,useFormState:Eg,useActionState:Eg,useOptimistic:function(r,i){var a=yt();return yg(a,Xe,r,i)},useMemoCache:Cf,useCacheRefresh:Vg};Bf.useEffectEvent=Ag;var Kg={readContext:_t,use:ya,useCallback:zg,useContext:_t,useEffect:Df,useImperativeHandle:Rg,useInsertionEffect:Og,useLayoutEffect:Dg,useMemo:Lg,useReducer:Nf,useRef:wg,useState:function(){return Nf(or)},useDebugValue:jf,useDeferredValue:function(r,i){var a=yt();return Xe===null?Rf(a,r,i):_g(a,Xe.memoizedState,r,i)},useTransition:function(){var r=Nf(or)[0],i=yt().memoizedState;return[typeof r=="boolean"?r:Rl(r),i]},useSyncExternalStore:fg,useId:Ig,useHostTransitionStatus:Lf,useFormState:Cg,useActionState:Cg,useOptimistic:function(r,i){var a=yt();return Xe!==null?yg(a,Xe,r,i):(a.baseState=r,[r,a.queue.dispatch])},useMemoCache:Cf,useCacheRefresh:Vg};Kg.useEffectEvent=Ag;function Hf(r,i,a,u){i=r.memoizedState,a=a(u,i),a=a==null?i:y({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Uf={enqueueSetState:function(r,i,a){r=r._reactInternals;var u=bn(),p=Lr(u);p.payload=i,a!=null&&(p.callback=a),i=_r(r,p,u),i!==null&&(ln(i,r,u),Al(i,r,u))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var u=bn(),p=Lr(u);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=_r(r,p,u),i!==null&&(ln(i,r,u),Al(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=bn(),u=Lr(a);u.tag=2,i!=null&&(u.callback=i),i=_r(r,u,a),i!==null&&(ln(i,r,a),Al(i,r,a))}};function Pg(r,i,a,u,p,g,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,S):i.prototype&&i.prototype.isPureReactComponent?!Sl(a,u)||!Sl(p,g):!0}function Jg(r,i,a,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==r&&Uf.enqueueReplaceState(i,i.state,null)}function _s(r,i){var a=i;if("ref"in i){a={};for(var u in i)u!=="ref"&&(a[u]=i[u])}if(r=r.defaultProps){a===i&&(a=y({},a));for(var p in r)a[p]===void 0&&(a[p]=r[p])}return a}function Fg(r){Wo(r)}function Xg(r){console.error(r)}function Qg(r){Wo(r)}function ka(r,i){try{var a=r.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Zg(r,i,a){try{var u=r.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function If(r,i,a){return a=Lr(a),a.tag=3,a.payload={element:null},a.callback=function(){ka(r,i)},a}function Wg(r){return r=Lr(r),r.tag=3,r}function ey(r,i,a,u){var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var g=u.value;r.payload=function(){return p(g)},r.callback=function(){Zg(i,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){Zg(i,a,u),typeof p!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function Ik(r,i,a,u,p){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=a.alternate,i!==null&&Ti(i,a,p,!0),a=pn.current,a!==null){switch(a.tag){case 31:case 13:return An===null?za():a.alternate===null&&ht===0&&(ht=3),a.flags&=-257,a.flags|=65536,a.lanes=p,u===ca?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([u]):i.add(u),fd(r,u,p)),!1;case 22:return a.flags|=65536,u===ca?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([u]):a.add(u)),fd(r,u,p)),!1}throw Error(s(435,a.tag))}return fd(r,u,p),za(),!1}if(Ue)return i=pn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,u!==sf&&(r=Error(s(422),{cause:u}),El(Mn(r,a)))):(u!==sf&&(i=Error(s(423),{cause:u}),El(Mn(i,a))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,u=Mn(u,a),p=If(r.stateNode,u,p),gf(r,p),ht!==4&&(ht=2)),!1;var g=Error(s(520),{cause:u});if(g=Mn(g,a),$l===null?$l=[g]:$l.push(g),ht!==4&&(ht=2),i===null)return!0;u=Mn(u,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,r=p&-p,a.lanes|=r,r=If(a.stateNode,u,r),gf(a,r),!1;case 1:if(i=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(qr===null||!qr.has(g))))return a.flags|=65536,p&=-p,a.lanes|=p,p=Wg(p),ey(p,r,a,u),gf(a,p),!1}a=a.return}while(a!==null);return!1}var Vf=Error(s(461)),St=!1;function Bt(r,i,a,u){i.child=r===null?sg(i,null,a,u):zs(i,r.child,a,u)}function ty(r,i,a,u,p){a=a.render;var g=i.ref;if("ref"in u){var S={};for(var T in u)T!=="ref"&&(S[T]=u[T])}else S=u;return Os(i),u=kf(r,i,a,S,g,p),T=Tf(),r!==null&&!St?(Ef(r,i,p),ar(r,i,p)):(Ue&&T&&nf(i),i.flags|=1,Bt(r,i,u,p),i.child)}function ny(r,i,a,u,p){if(r===null){var g=a.type;return typeof g=="function"&&!Wu(g)&&g.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=g,ry(r,i,g,u,p)):(r=ra(a.type,null,u,i,i.mode,p),r.ref=i.ref,r.return=i,i.child=r)}if(g=r.child,!Ff(r,p)){var S=g.memoizedProps;if(a=a.compare,a=a!==null?a:Sl,a(S,u)&&r.ref===i.ref)return ar(r,i,p)}return i.flags|=1,r=nr(g,u),r.ref=i.ref,r.return=i,i.child=r}function ry(r,i,a,u,p){if(r!==null){var g=r.memoizedProps;if(Sl(g,u)&&r.ref===i.ref)if(St=!1,i.pendingProps=u=g,Ff(r,p))(r.flags&131072)!==0&&(St=!0);else return i.lanes=r.lanes,ar(r,i,p)}return qf(r,i,a,u,p)}function sy(r,i,a,u){var p=u.children,g=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|a:a,r!==null){for(u=i.child=r.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~g}else u=0,i.child=null;return iy(r,i,g,a,u)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&oa(i,g!==null?g.cachePool:null),g!==null?og(i,g):bf(),ag(i);else return u=i.lanes=536870912,iy(r,i,g!==null?g.baseLanes|a:a,a,u)}else g!==null?(oa(i,g.cachePool),og(i,g),Hr(),i.memoizedState=null):(r!==null&&oa(i,null),bf(),Hr());return Bt(r,i,p,a),i.child}function _l(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function iy(r,i,a,u,p){var g=df();return g=g===null?null:{parent:xt._currentValue,pool:g},i.memoizedState={baseLanes:a,cachePool:g},r!==null&&oa(i,null),bf(),ag(i),r!==null&&Ti(r,i,u,!0),i.childLanes=p,null}function Ta(r,i){return i=Ma({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function ly(r,i,a){return zs(i,r.child,null,a),r=Ta(i,i.pendingProps),r.flags|=2,mn(i),i.memoizedState=null,r}function Vk(r,i,a){var u=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(Ue){if(u.mode==="hidden")return r=Ta(i,u),i.lanes=536870912,_l(null,r);if(vf(i),(r=rt)?(r=b0(r,Nn),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Or!==null?{id:Gn,overflow:Yn}:null,retryLane:536870912,hydrationErrors:null},a=$m(r),a.return=i,i.child=a,Lt=i,rt=null)):r=null,r===null)throw jr(i);return i.lanes=536870912,null}return Ta(i,u)}var g=r.memoizedState;if(g!==null){var S=g.dehydrated;if(vf(i),p)if(i.flags&256)i.flags&=-257,i=ly(r,i,a);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(St||Ti(r,i,a,!1),p=(a&r.childLanes)!==0,St||p){if(u=We,u!==null&&(S=Xp(u,a),S!==0&&S!==g.retryLane))throw g.retryLane=S,Cs(r,S),ln(u,r,S),Vf;za(),i=ly(r,i,a)}else r=g.treeContext,rt=On(S.nextSibling),Lt=i,Ue=!0,Dr=null,Nn=!1,r!==null&&Km(i,r),i=Ta(i,u),i.flags|=4096;return i}return r=nr(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Ea(r,i){var a=i.ref;if(a===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(r===null||r.ref!==a)&&(i.flags|=4194816)}}function qf(r,i,a,u,p){return Os(i),a=kf(r,i,a,u,void 0,p),u=Tf(),r!==null&&!St?(Ef(r,i,p),ar(r,i,p)):(Ue&&u&&nf(i),i.flags|=1,Bt(r,i,a,p),i.child)}function oy(r,i,a,u,p,g){return Os(i),i.updateQueue=null,a=ug(i,u,a,p),cg(r),u=Tf(),r!==null&&!St?(Ef(r,i,g),ar(r,i,g)):(Ue&&u&&nf(i),i.flags|=1,Bt(r,i,a,g),i.child)}function ay(r,i,a,u,p){if(Os(i),i.stateNode===null){var g=xi,S=a.contextType;typeof S=="object"&&S!==null&&(g=_t(S)),g=new a(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Uf,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},pf(i),S=a.contextType,g.context=typeof S=="object"&&S!==null?_t(S):xi,g.state=i.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Hf(i,a,S,u),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&Uf.enqueueReplaceState(g,g.state,null),Dl(i,u,g,p),Ol(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){g=i.stateNode;var T=i.memoizedProps,w=_s(a,T);g.props=w;var R=g.context,$=a.contextType;S=xi,typeof $=="object"&&$!==null&&(S=_t($));var J=a.getDerivedStateFromProps;$=typeof J=="function"||typeof g.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,$||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T||R!==S)&&Jg(i,g,u,S),zr=!1;var _=i.memoizedState;g.state=_,Dl(i,u,g,p),Ol(),R=i.memoizedState,T||_!==R||zr?(typeof J=="function"&&(Hf(i,a,J,u),R=i.memoizedState),(w=zr||Pg(i,a,w,u,_,R,S))?($||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=R),g.props=u,g.state=R,g.context=S,u=w):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,mf(r,i),S=i.memoizedProps,$=_s(a,S),g.props=$,J=i.pendingProps,_=g.context,R=a.contextType,w=xi,typeof R=="object"&&R!==null&&(w=_t(R)),T=a.getDerivedStateFromProps,(R=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==J||_!==w)&&Jg(i,g,u,w),zr=!1,_=i.memoizedState,g.state=_,Dl(i,u,g,p),Ol();var U=i.memoizedState;S!==J||_!==U||zr||r!==null&&r.dependencies!==null&&ia(r.dependencies)?(typeof T=="function"&&(Hf(i,a,T,u),U=i.memoizedState),($=zr||Pg(i,a,$,u,_,U,w)||r!==null&&r.dependencies!==null&&ia(r.dependencies))?(R||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,U,w),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,U,w)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===r.memoizedProps&&_===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&_===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=U),g.props=u,g.state=U,g.context=w,u=$):(typeof g.componentDidUpdate!="function"||S===r.memoizedProps&&_===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&_===r.memoizedState||(i.flags|=1024),u=!1)}return g=u,Ea(r,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,r!==null&&u?(i.child=zs(i,r.child,null,p),i.child=zs(i,null,a,p)):Bt(r,i,a,p),i.memoizedState=g.state,r=i.child):r=ar(r,i,p),r}function cy(r,i,a,u){return Ns(),i.flags|=256,Bt(r,i,a,u),i.child}var $f={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gf(r){return{baseLanes:r,cachePool:Zm()}}function Yf(r,i,a){return r=r!==null?r.childLanes&~a:0,i&&(r|=yn),r}function uy(r,i,a){var u=i.pendingProps,p=!1,g=(i.flags&128)!==0,S;if((S=g)||(S=r!==null&&r.memoizedState===null?!1:(gt.current&2)!==0),S&&(p=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,r===null){if(Ue){if(p?Br(i):Hr(),(r=rt)?(r=b0(r,Nn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Or!==null?{id:Gn,overflow:Yn}:null,retryLane:536870912,hydrationErrors:null},a=$m(r),a.return=i,i.child=a,Lt=i,rt=null)):r=null,r===null)throw jr(i);return wd(r)?i.lanes=32:i.lanes=536870912,null}var T=u.children;return u=u.fallback,p?(Hr(),p=i.mode,T=Ma({mode:"hidden",children:T},p),u=ws(u,p,a,null),T.return=i,u.return=i,T.sibling=u,i.child=T,u=i.child,u.memoizedState=Gf(a),u.childLanes=Yf(r,S,a),i.memoizedState=$f,_l(null,u)):(Br(i),Kf(i,T))}var w=r.memoizedState;if(w!==null&&(T=w.dehydrated,T!==null)){if(g)i.flags&256?(Br(i),i.flags&=-257,i=Pf(r,i,a)):i.memoizedState!==null?(Hr(),i.child=r.child,i.flags|=128,i=null):(Hr(),T=u.fallback,p=i.mode,u=Ma({mode:"visible",children:u.children},p),T=ws(T,p,a,null),T.flags|=2,u.return=i,T.return=i,u.sibling=T,i.child=u,zs(i,r.child,null,a),u=i.child,u.memoizedState=Gf(a),u.childLanes=Yf(r,S,a),i.memoizedState=$f,i=_l(null,u));else if(Br(i),wd(T)){if(S=T.nextSibling&&T.nextSibling.dataset,S)var R=S.dgst;S=R,u=Error(s(419)),u.stack="",u.digest=S,El({value:u,source:null,stack:null}),i=Pf(r,i,a)}else if(St||Ti(r,i,a,!1),S=(a&r.childLanes)!==0,St||S){if(S=We,S!==null&&(u=Xp(S,a),u!==0&&u!==w.retryLane))throw w.retryLane=u,Cs(r,u),ln(S,r,u),Vf;Cd(T)||za(),i=Pf(r,i,a)}else Cd(T)?(i.flags|=192,i.child=r.child,i=null):(r=w.treeContext,rt=On(T.nextSibling),Lt=i,Ue=!0,Dr=null,Nn=!1,r!==null&&Km(i,r),i=Kf(i,u.children),i.flags|=4096);return i}return p?(Hr(),T=u.fallback,p=i.mode,w=r.child,R=w.sibling,u=nr(w,{mode:"hidden",children:u.children}),u.subtreeFlags=w.subtreeFlags&65011712,R!==null?T=nr(R,T):(T=ws(T,p,a,null),T.flags|=2),T.return=i,u.return=i,u.sibling=T,i.child=u,_l(null,u),u=i.child,T=r.child.memoizedState,T===null?T=Gf(a):(p=T.cachePool,p!==null?(w=xt._currentValue,p=p.parent!==w?{parent:w,pool:w}:p):p=Zm(),T={baseLanes:T.baseLanes|a,cachePool:p}),u.memoizedState=T,u.childLanes=Yf(r,S,a),i.memoizedState=$f,_l(r.child,u)):(Br(i),a=r.child,r=a.sibling,a=nr(a,{mode:"visible",children:u.children}),a.return=i,a.sibling=null,r!==null&&(S=i.deletions,S===null?(i.deletions=[r],i.flags|=16):S.push(r)),i.child=a,i.memoizedState=null,a)}function Kf(r,i){return i=Ma({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Ma(r,i){return r=hn(22,r,null,i),r.lanes=0,r}function Pf(r,i,a){return zs(i,r.child,null,a),r=Kf(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function fy(r,i,a){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),af(r.return,i,a)}function Jf(r,i,a,u,p,g){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:p,treeForkCount:g}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=p,S.treeForkCount=g)}function dy(r,i,a){var u=i.pendingProps,p=u.revealOrder,g=u.tail;u=u.children;var S=gt.current,T=(S&2)!==0;if(T?(S=S&1|2,i.flags|=128):S&=1,ie(gt,S),Bt(r,i,u,a),u=Ue?Tl:0,!T&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&fy(r,a,i);else if(r.tag===19)fy(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(a=i.child,p=null;a!==null;)r=a.alternate,r!==null&&ha(r)===null&&(p=a),a=a.sibling;a=p,a===null?(p=i.child,i.child=null):(p=a.sibling,a.sibling=null),Jf(i,!1,p,a,g,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,p=i.child,i.child=null;p!==null;){if(r=p.alternate,r!==null&&ha(r)===null){i.child=p;break}r=p.sibling,p.sibling=a,a=p,p=r}Jf(i,!0,a,null,g,u);break;case"together":Jf(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function ar(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),Vr|=i.lanes,(a&i.childLanes)===0)if(r!==null){if(Ti(r,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,a=nr(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=nr(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function Ff(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&ia(r)))}function qk(r,i,a){switch(i.tag){case 3:Fe(i,i.stateNode.containerInfo),Rr(i,xt,r.memoizedState.cache),Ns();break;case 27:case 5:Zt(i);break;case 4:Fe(i,i.stateNode.containerInfo);break;case 10:Rr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,vf(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Br(i),i.flags|=128,null):(a&i.child.childLanes)!==0?uy(r,i,a):(Br(i),r=ar(r,i,a),r!==null?r.sibling:null);Br(i);break;case 19:var p=(r.flags&128)!==0;if(u=(a&i.childLanes)!==0,u||(Ti(r,i,a,!1),u=(a&i.childLanes)!==0),p){if(u)return dy(r,i,a);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ie(gt,gt.current),u)break;return null;case 22:return i.lanes=0,sy(r,i,a,i.pendingProps);case 24:Rr(i,xt,r.memoizedState.cache)}return ar(r,i,a)}function hy(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps)St=!0;else{if(!Ff(r,a)&&(i.flags&128)===0)return St=!1,qk(r,i,a);St=(r.flags&131072)!==0}else St=!1,Ue&&(i.flags&1048576)!==0&&Ym(i,Tl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=js(i.elementType),i.type=r,typeof r=="function")Wu(r)?(u=_s(r,u),i.tag=1,i=ay(null,i,r,u,a)):(i.tag=0,i=qf(null,i,r,u,a));else{if(r!=null){var p=r.$$typeof;if(p===ee){i.tag=11,i=ty(null,i,r,u,a);break e}else if(p===q){i.tag=14,i=ny(null,i,r,u,a);break e}}throw i=_e(r)||r,Error(s(306,i,""))}}return i;case 0:return qf(r,i,i.type,i.pendingProps,a);case 1:return u=i.type,p=_s(u,i.pendingProps),ay(r,i,u,p,a);case 3:e:{if(Fe(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var g=i.memoizedState;p=g.element,mf(r,i),Dl(i,u,null,a);var S=i.memoizedState;if(u=S.cache,Rr(i,xt,u),u!==g.cache&&cf(i,[xt],a,!0),Ol(),u=S.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=cy(r,i,u,a);break e}else if(u!==p){p=Mn(Error(s(424)),i),El(p),i=cy(r,i,u,a);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(rt=On(r.firstChild),Lt=i,Ue=!0,Dr=null,Nn=!0,a=sg(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ns(),u===p){i=ar(r,i,a);break e}Bt(r,i,u,a)}i=i.child}return i;case 26:return Ea(r,i),r===null?(a=E0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ue||(a=i.type,r=i.pendingProps,u=Va(ve.current).createElement(a),u[zt]=i,u[Wt]=r,Ht(u,a,r),At(u),i.stateNode=u):i.memoizedState=E0(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Zt(i),r===null&&Ue&&(u=i.stateNode=S0(i.type,i.pendingProps,ve.current),Lt=i,Nn=!0,p=rt,Kr(i.type)?(Nd=p,rt=On(u.firstChild)):rt=p),Bt(r,i,i.pendingProps.children,a),Ea(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&Ue&&((p=u=rt)&&(u=bT(u,i.type,i.pendingProps,Nn),u!==null?(i.stateNode=u,Lt=i,rt=On(u.firstChild),Nn=!1,p=!0):p=!1),p||jr(i)),Zt(i),p=i.type,g=i.pendingProps,S=r!==null?r.memoizedProps:null,u=g.children,Td(p,g)?u=null:S!==null&&Td(p,S)&&(i.flags|=32),i.memoizedState!==null&&(p=kf(r,i,Rk,null,null,a),Ql._currentValue=p),Ea(r,i),Bt(r,i,u,a),i.child;case 6:return r===null&&Ue&&((r=a=rt)&&(a=xT(a,i.pendingProps,Nn),a!==null?(i.stateNode=a,Lt=i,rt=null,r=!0):r=!1),r||jr(i)),null;case 13:return uy(r,i,a);case 4:return Fe(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=zs(i,null,u,a):Bt(r,i,u,a),i.child;case 11:return ty(r,i,i.type,i.pendingProps,a);case 7:return Bt(r,i,i.pendingProps,a),i.child;case 8:return Bt(r,i,i.pendingProps.children,a),i.child;case 12:return Bt(r,i,i.pendingProps.children,a),i.child;case 10:return u=i.pendingProps,Rr(i,i.type,u.value),Bt(r,i,u.children,a),i.child;case 9:return p=i.type._context,u=i.pendingProps.children,Os(i),p=_t(p),u=u(p),i.flags|=1,Bt(r,i,u,a),i.child;case 14:return ny(r,i,i.type,i.pendingProps,a);case 15:return ry(r,i,i.type,i.pendingProps,a);case 19:return dy(r,i,a);case 31:return Vk(r,i,a);case 22:return sy(r,i,a,i.pendingProps);case 24:return Os(i),u=_t(xt),r===null?(p=df(),p===null&&(p=We,g=uf(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=a),p=g),i.memoizedState={parent:u,cache:p},pf(i),Rr(i,xt,p)):((r.lanes&a)!==0&&(mf(r,i),Dl(i,null,null,a),Ol()),p=r.memoizedState,g=i.memoizedState,p.parent!==u?(p={parent:u,cache:u},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),Rr(i,xt,u)):(u=g.cache,Rr(i,xt,u),u!==p.cache&&cf(i,[xt],a,!0))),Bt(r,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function cr(r){r.flags|=4}function Xf(r,i,a,u,p){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if(Iy())r.flags|=8192;else throw Rs=ca,hf}else r.flags&=-16777217}function py(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!A0(i))if(Iy())r.flags|=8192;else throw Rs=ca,hf}function Ca(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Pp():536870912,r.lanes|=i,Li|=i)}function Bl(r,i){if(!Ue)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function st(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,u=0;if(i)for(var p=r.child;p!==null;)a|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)a|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=u,r.childLanes=a,i}function $k(r,i,a){var u=i.pendingProps;switch(rf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(i),null;case 1:return st(i),null;case 3:return a=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ir(xt),Ge(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(r===null||r.child===null)&&(ki(i)?cr(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,lf())),st(i),null;case 26:var p=i.type,g=i.memoizedState;return r===null?(cr(i),g!==null?(st(i),py(i,g)):(st(i),Xf(i,p,null,u,a))):g?g!==r.memoizedState?(cr(i),st(i),py(i,g)):(st(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&cr(i),st(i),Xf(i,p,r,u,a)),null;case 27:if(tt(i),a=ve.current,p=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&cr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return st(i),null}r=oe.current,ki(i)?Pm(i):(r=S0(p,u,a),i.stateNode=r,cr(i))}return st(i),null;case 5:if(tt(i),p=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&cr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return st(i),null}if(g=oe.current,ki(i))Pm(i);else{var S=Va(ve.current);switch(g){case 1:g=S.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=S.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=S.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?S.createElement(p,{is:u.is}):S.createElement(p)}}g[zt]=i,g[Wt]=u;e:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)g.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break e;for(;S.sibling===null;){if(S.return===null||S.return===i)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=g;e:switch(Ht(g,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&cr(i)}}return st(i),Xf(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,a),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&cr(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=ve.current,ki(i)){if(r=i.stateNode,a=i.memoizedProps,u=null,p=Lt,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}r[zt]=i,r=!!(r.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||u0(r.nodeValue,a)),r||jr(i,!0)}else r=Va(r).createTextNode(u),r[zt]=i,i.stateNode=r}return st(i),null;case 31:if(a=i.memoizedState,r===null||r.memoizedState!==null){if(u=ki(i),a!==null){if(r===null){if(!u)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[zt]=i}else Ns(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;st(i),r=!1}else a=lf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=a),r=!0;if(!r)return i.flags&256?(mn(i),i):(mn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return st(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=ki(i),u!==null&&u.dehydrated!==null){if(r===null){if(!p)throw Error(s(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[zt]=i}else Ns(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;st(i),p=!1}else p=lf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(mn(i),i):(mn(i),null)}return mn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=u!==null,r=r!==null&&r.memoizedState!==null,a&&(u=i.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==p&&(u.flags|=2048)),a!==r&&a&&(i.child.flags|=8192),Ca(i,i.updateQueue),st(i),null);case 4:return Ge(),r===null&&bd(i.stateNode.containerInfo),st(i),null;case 10:return ir(i.type),st(i),null;case 19:if(Y(gt),u=i.memoizedState,u===null)return st(i),null;if(p=(i.flags&128)!==0,g=u.rendering,g===null)if(p)Bl(u,!1);else{if(ht!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(g=ha(r),g!==null){for(i.flags|=128,Bl(u,!1),r=g.updateQueue,i.updateQueue=r,Ca(i,r),i.subtreeFlags=0,r=a,a=i.child;a!==null;)qm(a,r),a=a.sibling;return ie(gt,gt.current&1|2),Ue&&rr(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&ye()>Da&&(i.flags|=128,p=!0,Bl(u,!1),i.lanes=4194304)}else{if(!p)if(r=ha(g),r!==null){if(i.flags|=128,p=!0,r=r.updateQueue,i.updateQueue=r,Ca(i,r),Bl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!Ue)return st(i),null}else 2*ye()-u.renderingStartTime>Da&&a!==536870912&&(i.flags|=128,p=!0,Bl(u,!1),i.lanes=4194304);u.isBackwards?(g.sibling=i.child,i.child=g):(r=u.last,r!==null?r.sibling=g:i.child=g,u.last=g)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=ye(),r.sibling=null,a=gt.current,ie(gt,p?a&1|2:a&1),Ue&&rr(i,u.treeForkCount),r):(st(i),null);case 22:case 23:return mn(i),xf(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(a&536870912)!==0&&(i.flags&128)===0&&(st(i),i.subtreeFlags&6&&(i.flags|=8192)):st(i),a=i.updateQueue,a!==null&&Ca(i,a.retryQueue),a=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==a&&(i.flags|=2048),r!==null&&Y(Ds),null;case 24:return a=null,r!==null&&(a=r.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ir(xt),st(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Gk(r,i){switch(rf(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return ir(xt),Ge(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return tt(i),null;case 31:if(i.memoizedState!==null){if(mn(i),i.alternate===null)throw Error(s(340));Ns()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(mn(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ns()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Y(gt),null;case 4:return Ge(),null;case 10:return ir(i.type),null;case 22:case 23:return mn(i),xf(),r!==null&&Y(Ds),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return ir(xt),null;case 25:return null;default:return null}}function my(r,i){switch(rf(i),i.tag){case 3:ir(xt),Ge();break;case 26:case 27:case 5:tt(i);break;case 4:Ge();break;case 31:i.memoizedState!==null&&mn(i);break;case 13:mn(i);break;case 19:Y(gt);break;case 10:ir(i.type);break;case 22:case 23:mn(i),xf(),r!==null&&Y(Ds);break;case 24:ir(xt)}}function Hl(r,i){try{var a=i.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var p=u.next;a=p;do{if((a.tag&r)===r){u=void 0;var g=a.create,S=a.inst;u=g(),S.destroy=u}a=a.next}while(a!==p)}}catch(T){Pe(i,i.return,T)}}function Ur(r,i,a){try{var u=i.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var g=p.next;u=g;do{if((u.tag&r)===r){var S=u.inst,T=S.destroy;if(T!==void 0){S.destroy=void 0,p=i;var w=a,R=T;try{R()}catch($){Pe(p,w,$)}}}u=u.next}while(u!==g)}}catch($){Pe(i,i.return,$)}}function gy(r){var i=r.updateQueue;if(i!==null){var a=r.stateNode;try{lg(i,a)}catch(u){Pe(r,r.return,u)}}}function yy(r,i,a){a.props=_s(r.type,r.memoizedProps),a.state=r.memoizedState;try{a.componentWillUnmount()}catch(u){Pe(r,i,u)}}function Ul(r,i){try{var a=r.ref;if(a!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof a=="function"?r.refCleanup=a(u):a.current=u}}catch(p){Pe(r,i,p)}}function Kn(r,i){var a=r.ref,u=r.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(p){Pe(r,i,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(p){Pe(r,i,p)}else a.current=null}function by(r){var i=r.type,a=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(p){Pe(r,r.return,p)}}function Qf(r,i,a){try{var u=r.stateNode;dT(u,r.type,a,i),u[Wt]=i}catch(p){Pe(r,r.return,p)}}function xy(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Kr(r.type)||r.tag===4}function Zf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||xy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Kr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Wf(r,i,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(r,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(r),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=er));else if(u!==4&&(u===27&&Kr(r.type)&&(a=r.stateNode,i=null),r=r.child,r!==null))for(Wf(r,i,a),r=r.sibling;r!==null;)Wf(r,i,a),r=r.sibling}function wa(r,i,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(u!==4&&(u===27&&Kr(r.type)&&(a=r.stateNode),r=r.child,r!==null))for(wa(r,i,a),r=r.sibling;r!==null;)wa(r,i,a),r=r.sibling}function vy(r){var i=r.stateNode,a=r.memoizedProps;try{for(var u=r.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Ht(i,u,a),i[zt]=r,i[Wt]=a}catch(g){Pe(r,r.return,g)}}var ur=!1,kt=!1,ed=!1,Sy=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function Yk(r,i){if(r=r.containerInfo,Sd=Ja,r=Rm(r),Ku(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var p=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var S=0,T=-1,w=-1,R=0,$=0,J=r,_=null;t:for(;;){for(var U;J!==a||p!==0&&J.nodeType!==3||(T=S+p),J!==g||u!==0&&J.nodeType!==3||(w=S+u),J.nodeType===3&&(S+=J.nodeValue.length),(U=J.firstChild)!==null;)_=J,J=U;for(;;){if(J===r)break t;if(_===a&&++R===p&&(T=S),_===g&&++$===u&&(w=S),(U=J.nextSibling)!==null)break;J=_,_=J.parentNode}J=U}a=T===-1||w===-1?null:{start:T,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(kd={focusedElem:r,selectionRange:a},Ja=!1,Ot=i;Ot!==null;)if(i=Ot,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Ot=r;else for(;Ot!==null;){switch(i=Ot,g=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(a=0;a<r.length;a++)p=r[a],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,a=i,p=g.memoizedProps,g=g.memoizedState,u=a.stateNode;try{var ce=_s(a.type,p);r=u.getSnapshotBeforeUpdate(ce,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(xe){Pe(a,a.return,xe)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,a=r.nodeType,a===9)Md(r);else if(a===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Md(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Ot=r;break}Ot=i.return}}function ky(r,i,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:dr(r,a),u&4&&Hl(5,a);break;case 1:if(dr(r,a),u&4)if(r=a.stateNode,i===null)try{r.componentDidMount()}catch(S){Pe(a,a.return,S)}else{var p=_s(a.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(p,i,r.__reactInternalSnapshotBeforeUpdate)}catch(S){Pe(a,a.return,S)}}u&64&&gy(a),u&512&&Ul(a,a.return);break;case 3:if(dr(r,a),u&64&&(r=a.updateQueue,r!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{lg(r,i)}catch(S){Pe(a,a.return,S)}}break;case 27:i===null&&u&4&&vy(a);case 26:case 5:dr(r,a),i===null&&u&4&&by(a),u&512&&Ul(a,a.return);break;case 12:dr(r,a);break;case 31:dr(r,a),u&4&&My(r,a);break;case 13:dr(r,a),u&4&&Cy(r,a),u&64&&(r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(a=eT.bind(null,a),vT(r,a))));break;case 22:if(u=a.memoizedState!==null||ur,!u){i=i!==null&&i.memoizedState!==null||kt,p=ur;var g=kt;ur=u,(kt=i)&&!g?hr(r,a,(a.subtreeFlags&8772)!==0):dr(r,a),ur=p,kt=g}break;case 30:break;default:dr(r,a)}}function Ty(r){var i=r.alternate;i!==null&&(r.alternate=null,Ty(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Au(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ot=null,tn=!1;function fr(r,i,a){for(a=a.child;a!==null;)Ey(r,i,a),a=a.sibling}function Ey(r,i,a){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(cl,a)}catch{}switch(a.tag){case 26:kt||Kn(a,i),fr(r,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:kt||Kn(a,i);var u=ot,p=tn;Kr(a.type)&&(ot=a.stateNode,tn=!1),fr(r,i,a),Jl(a.stateNode),ot=u,tn=p;break;case 5:kt||Kn(a,i);case 6:if(u=ot,p=tn,ot=null,fr(r,i,a),ot=u,tn=p,ot!==null)if(tn)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(a.stateNode)}catch(g){Pe(a,i,g)}else try{ot.removeChild(a.stateNode)}catch(g){Pe(a,i,g)}break;case 18:ot!==null&&(tn?(r=ot,g0(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.stateNode),$i(r)):g0(ot,a.stateNode));break;case 4:u=ot,p=tn,ot=a.stateNode.containerInfo,tn=!0,fr(r,i,a),ot=u,tn=p;break;case 0:case 11:case 14:case 15:Ur(2,a,i),kt||Ur(4,a,i),fr(r,i,a);break;case 1:kt||(Kn(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"&&yy(a,i,u)),fr(r,i,a);break;case 21:fr(r,i,a);break;case 22:kt=(u=kt)||a.memoizedState!==null,fr(r,i,a),kt=u;break;default:fr(r,i,a)}}function My(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{$i(r)}catch(a){Pe(i,i.return,a)}}}function Cy(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{$i(r)}catch(a){Pe(i,i.return,a)}}function Kk(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Sy),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Sy),i;default:throw Error(s(435,r.tag))}}function Na(r,i){var a=Kk(r);i.forEach(function(u){if(!a.has(u)){a.add(u);var p=tT.bind(null,r,u);u.then(p,p)}})}function nn(r,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var p=a[u],g=r,S=i,T=S;e:for(;T!==null;){switch(T.tag){case 27:if(Kr(T.type)){ot=T.stateNode,tn=!1;break e}break;case 5:ot=T.stateNode,tn=!1;break e;case 3:case 4:ot=T.stateNode.containerInfo,tn=!0;break e}T=T.return}if(ot===null)throw Error(s(160));Ey(g,S,p),ot=null,tn=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)wy(i,r),i=i.sibling}var Un=null;function wy(r,i){var a=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:nn(i,r),rn(r),u&4&&(Ur(3,r,r.return),Hl(3,r),Ur(5,r,r.return));break;case 1:nn(i,r),rn(r),u&512&&(kt||a===null||Kn(a,a.return)),u&64&&ur&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(a=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var p=Un;if(nn(i,r),rn(r),u&512&&(kt||a===null||Kn(a,a.return)),u&4){var g=a!==null?a.memoizedState:null;if(u=r.memoizedState,a===null)if(u===null)if(r.stateNode===null){e:{u=r.type,a=r.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":g=p.getElementsByTagName("title")[0],(!g||g[dl]||g[zt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(u),p.head.insertBefore(g,p.querySelector("head > title"))),Ht(g,u,a),g[zt]=r,At(g),u=g;break e;case"link":var S=w0("link","href",p).get(u+(a.href||""));if(S){for(var T=0;T<S.length;T++)if(g=S[T],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(T,1);break t}}g=p.createElement(u),Ht(g,u,a),p.head.appendChild(g);break;case"meta":if(S=w0("meta","content",p).get(u+(a.content||""))){for(T=0;T<S.length;T++)if(g=S[T],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(T,1);break t}}g=p.createElement(u),Ht(g,u,a),p.head.appendChild(g);break;default:throw Error(s(468,u))}g[zt]=r,At(g),u=g}r.stateNode=u}else N0(p,r.type,r.stateNode);else r.stateNode=C0(p,u,r.memoizedProps);else g!==u?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,u===null?N0(p,r.type,r.stateNode):C0(p,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Qf(r,r.memoizedProps,a.memoizedProps)}break;case 27:nn(i,r),rn(r),u&512&&(kt||a===null||Kn(a,a.return)),a!==null&&u&4&&Qf(r,r.memoizedProps,a.memoizedProps);break;case 5:if(nn(i,r),rn(r),u&512&&(kt||a===null||Kn(a,a.return)),r.flags&32){p=r.stateNode;try{di(p,"")}catch(ce){Pe(r,r.return,ce)}}u&4&&r.stateNode!=null&&(p=r.memoizedProps,Qf(r,p,a!==null?a.memoizedProps:p)),u&1024&&(ed=!0);break;case 6:if(nn(i,r),rn(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,a=r.stateNode;try{a.nodeValue=u}catch(ce){Pe(r,r.return,ce)}}break;case 3:if(Ga=null,p=Un,Un=qa(i.containerInfo),nn(i,r),Un=p,rn(r),u&4&&a!==null&&a.memoizedState.isDehydrated)try{$i(i.containerInfo)}catch(ce){Pe(r,r.return,ce)}ed&&(ed=!1,Ny(r));break;case 4:u=Un,Un=qa(r.stateNode.containerInfo),nn(i,r),rn(r),Un=u;break;case 12:nn(i,r),rn(r);break;case 31:nn(i,r),rn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Na(r,u)));break;case 13:nn(i,r),rn(r),r.child.flags&8192&&r.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Oa=ye()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Na(r,u)));break;case 22:p=r.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,R=ur,$=kt;if(ur=R||p,kt=$||w,nn(i,r),kt=$,ur=R,rn(r),u&8192)e:for(i=r.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(a===null||w||ur||kt||Bs(r)),a=null,i=r;;){if(i.tag===5||i.tag===26){if(a===null){w=a=i;try{if(g=w.stateNode,p)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{T=w.stateNode;var J=w.memoizedProps.style,_=J!=null&&J.hasOwnProperty("display")?J.display:null;T.style.display=_==null||typeof _=="boolean"?"":(""+_).trim()}}catch(ce){Pe(w,w.return,ce)}}}else if(i.tag===6){if(a===null){w=i;try{w.stateNode.nodeValue=p?"":w.memoizedProps}catch(ce){Pe(w,w.return,ce)}}}else if(i.tag===18){if(a===null){w=i;try{var U=w.stateNode;p?y0(U,!0):y0(w.stateNode,!1)}catch(ce){Pe(w,w.return,ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Na(r,a))));break;case 19:nn(i,r),rn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Na(r,u)));break;case 30:break;case 21:break;default:nn(i,r),rn(r)}}function rn(r){var i=r.flags;if(i&2){try{for(var a,u=r.return;u!==null;){if(xy(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var p=a.stateNode,g=Zf(r);wa(r,g,p);break;case 5:var S=a.stateNode;a.flags&32&&(di(S,""),a.flags&=-33);var T=Zf(r);wa(r,T,S);break;case 3:case 4:var w=a.stateNode.containerInfo,R=Zf(r);Wf(r,R,w);break;default:throw Error(s(161))}}catch($){Pe(r,r.return,$)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Ny(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;Ny(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function dr(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ky(r,i.alternate,i),i=i.sibling}function Bs(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ur(4,i,i.return),Bs(i);break;case 1:Kn(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&yy(i,i.return,a),Bs(i);break;case 27:Jl(i.stateNode);case 26:case 5:Kn(i,i.return),Bs(i);break;case 22:i.memoizedState===null&&Bs(i);break;case 30:Bs(i);break;default:Bs(i)}r=r.sibling}}function hr(r,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,p=r,g=i,S=g.flags;switch(g.tag){case 0:case 11:case 15:hr(p,g,a),Hl(4,g);break;case 1:if(hr(p,g,a),u=g,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(R){Pe(u,u.return,R)}if(u=g,p=u.updateQueue,p!==null){var T=u.stateNode;try{var w=p.shared.hiddenCallbacks;if(w!==null)for(p.shared.hiddenCallbacks=null,p=0;p<w.length;p++)ig(w[p],T)}catch(R){Pe(u,u.return,R)}}a&&S&64&&gy(g),Ul(g,g.return);break;case 27:vy(g);case 26:case 5:hr(p,g,a),a&&u===null&&S&4&&by(g),Ul(g,g.return);break;case 12:hr(p,g,a);break;case 31:hr(p,g,a),a&&S&4&&My(p,g);break;case 13:hr(p,g,a),a&&S&4&&Cy(p,g);break;case 22:g.memoizedState===null&&hr(p,g,a),Ul(g,g.return);break;case 30:break;default:hr(p,g,a)}i=i.sibling}}function td(r,i){var a=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==a&&(r!=null&&r.refCount++,a!=null&&Ml(a))}function nd(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Ml(r))}function In(r,i,a,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ay(r,i,a,u),i=i.sibling}function Ay(r,i,a,u){var p=i.flags;switch(i.tag){case 0:case 11:case 15:In(r,i,a,u),p&2048&&Hl(9,i);break;case 1:In(r,i,a,u);break;case 3:In(r,i,a,u),p&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Ml(r)));break;case 12:if(p&2048){In(r,i,a,u),r=i.stateNode;try{var g=i.memoizedProps,S=g.id,T=g.onPostCommit;typeof T=="function"&&T(S,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(w){Pe(i,i.return,w)}}else In(r,i,a,u);break;case 31:In(r,i,a,u);break;case 13:In(r,i,a,u);break;case 23:break;case 22:g=i.stateNode,S=i.alternate,i.memoizedState!==null?g._visibility&2?In(r,i,a,u):Il(r,i):g._visibility&2?In(r,i,a,u):(g._visibility|=2,ji(r,i,a,u,(i.subtreeFlags&10256)!==0||!1)),p&2048&&td(S,i);break;case 24:In(r,i,a,u),p&2048&&nd(i.alternate,i);break;default:In(r,i,a,u)}}function ji(r,i,a,u,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=r,S=i,T=a,w=u,R=S.flags;switch(S.tag){case 0:case 11:case 15:ji(g,S,T,w,p),Hl(8,S);break;case 23:break;case 22:var $=S.stateNode;S.memoizedState!==null?$._visibility&2?ji(g,S,T,w,p):Il(g,S):($._visibility|=2,ji(g,S,T,w,p)),p&&R&2048&&td(S.alternate,S);break;case 24:ji(g,S,T,w,p),p&&R&2048&&nd(S.alternate,S);break;default:ji(g,S,T,w,p)}i=i.sibling}}function Il(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=r,u=i,p=u.flags;switch(u.tag){case 22:Il(a,u),p&2048&&td(u.alternate,u);break;case 24:Il(a,u),p&2048&&nd(u.alternate,u);break;default:Il(a,u)}i=i.sibling}}var Vl=8192;function Ri(r,i,a){if(r.subtreeFlags&Vl)for(r=r.child;r!==null;)Oy(r,i,a),r=r.sibling}function Oy(r,i,a){switch(r.tag){case 26:Ri(r,i,a),r.flags&Vl&&r.memoizedState!==null&&jT(a,Un,r.memoizedState,r.memoizedProps);break;case 5:Ri(r,i,a);break;case 3:case 4:var u=Un;Un=qa(r.stateNode.containerInfo),Ri(r,i,a),Un=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Vl,Vl=16777216,Ri(r,i,a),Vl=u):Ri(r,i,a));break;default:Ri(r,i,a)}}function Dy(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function ql(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];Ot=u,Ry(u,r)}Dy(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)jy(r),r=r.sibling}function jy(r){switch(r.tag){case 0:case 11:case 15:ql(r),r.flags&2048&&Ur(9,r,r.return);break;case 3:ql(r);break;case 12:ql(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Aa(r)):ql(r);break;default:ql(r)}}function Aa(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];Ot=u,Ry(u,r)}Dy(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ur(8,i,i.return),Aa(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Aa(i));break;default:Aa(i)}r=r.sibling}}function Ry(r,i){for(;Ot!==null;){var a=Ot;switch(a.tag){case 0:case 11:case 15:Ur(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ml(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ot=u;else e:for(a=r;Ot!==null;){u=Ot;var p=u.sibling,g=u.return;if(Ty(u),u===a){Ot=null;break e}if(p!==null){p.return=g,Ot=p;break e}Ot=g}}}var Pk={getCacheForType:function(r){var i=_t(xt),a=i.data.get(r);return a===void 0&&(a=r(),i.data.set(r,a)),a},cacheSignal:function(){return _t(xt).controller.signal}},Jk=typeof WeakMap=="function"?WeakMap:Map,Ye=0,We=null,ze=null,Be=0,Ke=0,gn=null,Ir=!1,zi=!1,rd=!1,pr=0,ht=0,Vr=0,Hs=0,sd=0,yn=0,Li=0,$l=null,sn=null,id=!1,Oa=0,zy=0,Da=1/0,ja=null,qr=null,Ct=0,$r=null,_i=null,mr=0,ld=0,od=null,Ly=null,Gl=0,ad=null;function bn(){return(Ye&2)!==0&&Be!==0?Be&-Be:I.T!==null?pd():Qp()}function _y(){if(yn===0)if((Be&536870912)===0||Ue){var r=Io;Io<<=1,(Io&3932160)===0&&(Io=262144),yn=r}else yn=536870912;return r=pn.current,r!==null&&(r.flags|=32),yn}function ln(r,i,a){(r===We&&(Ke===2||Ke===9)||r.cancelPendingCommit!==null)&&(Bi(r,0),Gr(r,Be,yn,!1)),fl(r,a),((Ye&2)===0||r!==We)&&(r===We&&((Ye&2)===0&&(Hs|=a),ht===4&&Gr(r,Be,yn,!1)),Pn(r))}function By(r,i,a){if((Ye&6)!==0)throw Error(s(327));var u=!a&&(i&127)===0&&(i&r.expiredLanes)===0||ul(r,i),p=u?Qk(r,i):ud(r,i,!0),g=u;do{if(p===0){zi&&!u&&Gr(r,i,0,!1);break}else{if(a=r.current.alternate,g&&!Fk(a)){p=ud(r,i,!1),g=!1;continue}if(p===2){if(g=i,r.errorRecoveryDisabledLanes&g)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var T=r;p=$l;var w=T.current.memoizedState.isDehydrated;if(w&&(Bi(T,S).flags|=256),S=ud(T,S,!1),S!==2){if(rd&&!w){T.errorRecoveryDisabledLanes|=g,Hs|=g,p=4;break e}g=sn,sn=p,g!==null&&(sn===null?sn=g:sn.push.apply(sn,g))}p=S}if(g=!1,p!==2)continue}}if(p===1){Bi(r,0),Gr(r,i,0,!0);break}e:{switch(u=r,g=p,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Gr(u,i,yn,!Ir);break e;case 2:sn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(p=Oa+300-ye(),10<p)){if(Gr(u,i,yn,!Ir),qo(u,0,!0)!==0)break e;mr=i,u.timeoutHandle=p0(Hy.bind(null,u,a,sn,ja,id,i,yn,Hs,Li,Ir,g,"Throttled",-0,0),p);break e}Hy(u,a,sn,ja,id,i,yn,Hs,Li,Ir,g,null,-0,0)}}break}while(!0);Pn(r)}function Hy(r,i,a,u,p,g,S,T,w,R,$,J,_,U){if(r.timeoutHandle=-1,J=i.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:er},Oy(i,g,J);var ce=(g&62914560)===g?Oa-ye():(g&4194048)===g?zy-ye():0;if(ce=RT(J,ce),ce!==null){mr=g,r.cancelPendingCommit=ce(Ky.bind(null,r,i,g,a,u,p,S,T,w,$,J,null,_,U)),Gr(r,g,S,!R);return}}Ky(r,i,g,a,u,p,S,T,w)}function Fk(r){for(var i=r;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var p=a[u],g=p.getSnapshot;p=p.value;try{if(!dn(g(),p))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gr(r,i,a,u){i&=~sd,i&=~Hs,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var p=i;0<p;){var g=31-fn(p),S=1<<g;u[g]=-1,p&=~S}a!==0&&Jp(r,a,i)}function Ra(){return(Ye&6)===0?(Yl(0),!1):!0}function cd(){if(ze!==null){if(Ke===0)var r=ze.return;else r=ze,sr=As=null,Mf(r),wi=null,wl=0,r=ze;for(;r!==null;)my(r.alternate,r),r=r.return;ze=null}}function Bi(r,i){var a=r.timeoutHandle;a!==-1&&(r.timeoutHandle=-1,mT(a)),a=r.cancelPendingCommit,a!==null&&(r.cancelPendingCommit=null,a()),mr=0,cd(),We=r,ze=a=nr(r.current,null),Be=i,Ke=0,gn=null,Ir=!1,zi=ul(r,i),rd=!1,Li=yn=sd=Hs=Vr=ht=0,sn=$l=null,id=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var p=31-fn(u),g=1<<p;i|=r[p],u&=~g}return pr=i,ea(),a}function Uy(r,i){we=null,I.H=Ll,i===Ci||i===aa?(i=tg(),Ke=3):i===hf?(i=tg(),Ke=4):Ke=i===Vf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,gn=i,ze===null&&(ht=1,ka(r,Mn(i,r.current)))}function Iy(){var r=pn.current;return r===null?!0:(Be&4194048)===Be?An===null:(Be&62914560)===Be||(Be&536870912)!==0?r===An:!1}function Vy(){var r=I.H;return I.H=Ll,r===null?Ll:r}function qy(){var r=I.A;return I.A=Pk,r}function za(){ht=4,Ir||(Be&4194048)!==Be&&pn.current!==null||(zi=!0),(Vr&134217727)===0&&(Hs&134217727)===0||We===null||Gr(We,Be,yn,!1)}function ud(r,i,a){var u=Ye;Ye|=2;var p=Vy(),g=qy();(We!==r||Be!==i)&&(ja=null,Bi(r,i)),i=!1;var S=ht;e:do try{if(Ke!==0&&ze!==null){var T=ze,w=gn;switch(Ke){case 8:cd(),S=6;break e;case 3:case 2:case 9:case 6:pn.current===null&&(i=!0);var R=Ke;if(Ke=0,gn=null,Hi(r,T,w,R),a&&zi){S=0;break e}break;default:R=Ke,Ke=0,gn=null,Hi(r,T,w,R)}}Xk(),S=ht;break}catch($){Uy(r,$)}while(!0);return i&&r.shellSuspendCounter++,sr=As=null,Ye=u,I.H=p,I.A=g,ze===null&&(We=null,Be=0,ea()),S}function Xk(){for(;ze!==null;)$y(ze)}function Qk(r,i){var a=Ye;Ye|=2;var u=Vy(),p=qy();We!==r||Be!==i?(ja=null,Da=ye()+500,Bi(r,i)):zi=ul(r,i);e:do try{if(Ke!==0&&ze!==null){i=ze;var g=gn;t:switch(Ke){case 1:Ke=0,gn=null,Hi(r,i,g,1);break;case 2:case 9:if(Wm(g)){Ke=0,gn=null,Gy(i);break}i=function(){Ke!==2&&Ke!==9||We!==r||(Ke=7),Pn(r)},g.then(i,i);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:Wm(g)?(Ke=0,gn=null,Gy(i)):(Ke=0,gn=null,Hi(r,i,g,7));break;case 5:var S=null;switch(ze.tag){case 26:S=ze.memoizedState;case 5:case 27:var T=ze;if(S?A0(S):T.stateNode.complete){Ke=0,gn=null;var w=T.sibling;if(w!==null)ze=w;else{var R=T.return;R!==null?(ze=R,La(R)):ze=null}break t}}Ke=0,gn=null,Hi(r,i,g,5);break;case 6:Ke=0,gn=null,Hi(r,i,g,6);break;case 8:cd(),ht=6;break e;default:throw Error(s(462))}}Zk();break}catch($){Uy(r,$)}while(!0);return sr=As=null,I.H=u,I.A=p,Ye=a,ze!==null?0:(We=null,Be=0,ea(),ht)}function Zk(){for(;ze!==null&&!de();)$y(ze)}function $y(r){var i=hy(r.alternate,r,pr);r.memoizedProps=r.pendingProps,i===null?La(r):ze=i}function Gy(r){var i=r,a=i.alternate;switch(i.tag){case 15:case 0:i=oy(a,i,i.pendingProps,i.type,void 0,Be);break;case 11:i=oy(a,i,i.pendingProps,i.type.render,i.ref,Be);break;case 5:Mf(i);default:my(a,i),i=ze=qm(i,pr),i=hy(a,i,pr)}r.memoizedProps=r.pendingProps,i===null?La(r):ze=i}function Hi(r,i,a,u){sr=As=null,Mf(i),wi=null,wl=0;var p=i.return;try{if(Ik(r,p,i,a,Be)){ht=1,ka(r,Mn(a,r.current)),ze=null;return}}catch(g){if(p!==null)throw ze=p,g;ht=1,ka(r,Mn(a,r.current)),ze=null;return}i.flags&32768?(Ue||u===1?r=!0:zi||(Be&536870912)!==0?r=!1:(Ir=r=!0,(u===2||u===9||u===3||u===6)&&(u=pn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Yy(i,r)):La(i)}function La(r){var i=r;do{if((i.flags&32768)!==0){Yy(i,Ir);return}r=i.return;var a=$k(i.alternate,i,pr);if(a!==null){ze=a;return}if(i=i.sibling,i!==null){ze=i;return}ze=i=r}while(i!==null);ht===0&&(ht=5)}function Yy(r,i){do{var a=Gk(r.alternate,r);if(a!==null){a.flags&=32767,ze=a;return}if(a=r.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(r=r.sibling,r!==null)){ze=r;return}ze=r=a}while(r!==null);ht=6,ze=null}function Ky(r,i,a,u,p,g,S,T,w){r.cancelPendingCommit=null;do _a();while(Ct!==0);if((Ye&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=Qu,DS(r,a,g,S,T,w),r===We&&(ze=We=null,Be=0),_i=i,$r=r,mr=a,ld=g,od=p,Ly=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,nT(cn,function(){return Qy(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=I.T,I.T=null,p=te.p,te.p=2,S=Ye,Ye|=4;try{Yk(r,i,a)}finally{Ye=S,te.p=p,I.T=u}}Ct=1,Py(),Jy(),Fy()}}function Py(){if(Ct===1){Ct=0;var r=$r,i=_i,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=I.T,I.T=null;var u=te.p;te.p=2;var p=Ye;Ye|=4;try{wy(i,r);var g=kd,S=Rm(r.containerInfo),T=g.focusedElem,w=g.selectionRange;if(S!==T&&T&&T.ownerDocument&&jm(T.ownerDocument.documentElement,T)){if(w!==null&&Ku(T)){var R=w.start,$=w.end;if($===void 0&&($=R),"selectionStart"in T)T.selectionStart=R,T.selectionEnd=Math.min($,T.value.length);else{var J=T.ownerDocument||document,_=J&&J.defaultView||window;if(_.getSelection){var U=_.getSelection(),ce=T.textContent.length,xe=Math.min(w.start,ce),Ze=w.end===void 0?xe:Math.min(w.end,ce);!U.extend&&xe>Ze&&(S=Ze,Ze=xe,xe=S);var D=Dm(T,xe),A=Dm(T,Ze);if(D&&A&&(U.rangeCount!==1||U.anchorNode!==D.node||U.anchorOffset!==D.offset||U.focusNode!==A.node||U.focusOffset!==A.offset)){var j=J.createRange();j.setStart(D.node,D.offset),U.removeAllRanges(),xe>Ze?(U.addRange(j),U.extend(A.node,A.offset)):(j.setEnd(A.node,A.offset),U.addRange(j))}}}}for(J=[],U=T;U=U.parentNode;)U.nodeType===1&&J.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<J.length;T++){var K=J[T];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}Ja=!!Sd,kd=Sd=null}finally{Ye=p,te.p=u,I.T=a}}r.current=i,Ct=2}}function Jy(){if(Ct===2){Ct=0;var r=$r,i=_i,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=I.T,I.T=null;var u=te.p;te.p=2;var p=Ye;Ye|=4;try{ky(r,i.alternate,i)}finally{Ye=p,te.p=u,I.T=a}}Ct=3}}function Fy(){if(Ct===4||Ct===3){Ct=0,je();var r=$r,i=_i,a=mr,u=Ly;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ct=5:(Ct=0,_i=$r=null,Xy(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(qr=null),wu(a),i=i.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(cl,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=I.T,p=te.p,te.p=2,I.T=null;try{for(var g=r.onRecoverableError,S=0;S<u.length;S++){var T=u[S];g(T.value,{componentStack:T.stack})}}finally{I.T=i,te.p=p}}(mr&3)!==0&&_a(),Pn(r),p=r.pendingLanes,(a&261930)!==0&&(p&42)!==0?r===ad?Gl++:(Gl=0,ad=r):Gl=0,Yl(0)}}function Xy(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Ml(i)))}function _a(){return Py(),Jy(),Fy(),Qy()}function Qy(){if(Ct!==5)return!1;var r=$r,i=ld;ld=0;var a=wu(mr),u=I.T,p=te.p;try{te.p=32>a?32:a,I.T=null,a=od,od=null;var g=$r,S=mr;if(Ct=0,_i=$r=null,mr=0,(Ye&6)!==0)throw Error(s(331));var T=Ye;if(Ye|=4,jy(g.current),Ay(g,g.current,S,a),Ye=T,Yl(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(cl,g)}catch{}return!0}finally{te.p=p,I.T=u,Xy(r,i)}}function Zy(r,i,a){i=Mn(a,i),i=If(r.stateNode,i,2),r=_r(r,i,2),r!==null&&(fl(r,2),Pn(r))}function Pe(r,i,a){if(r.tag===3)Zy(r,r,a);else for(;i!==null;){if(i.tag===3){Zy(i,r,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(qr===null||!qr.has(u))){r=Mn(a,r),a=Wg(2),u=_r(i,a,2),u!==null&&(ey(a,u,i,r),fl(u,2),Pn(u));break}}i=i.return}}function fd(r,i,a){var u=r.pingCache;if(u===null){u=r.pingCache=new Jk;var p=new Set;u.set(i,p)}else p=u.get(i),p===void 0&&(p=new Set,u.set(i,p));p.has(a)||(rd=!0,p.add(a),r=Wk.bind(null,r,i,a),i.then(r,r))}function Wk(r,i,a){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&a,r.warmLanes&=~a,We===r&&(Be&a)===a&&(ht===4||ht===3&&(Be&62914560)===Be&&300>ye()-Oa?(Ye&2)===0&&Bi(r,0):sd|=a,Li===Be&&(Li=0)),Pn(r)}function Wy(r,i){i===0&&(i=Pp()),r=Cs(r,i),r!==null&&(fl(r,i),Pn(r))}function eT(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),Wy(r,a)}function tT(r,i){var a=0;switch(r.tag){case 31:case 13:var u=r.stateNode,p=r.memoizedState;p!==null&&(a=p.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),Wy(r,a)}function nT(r,i){return re(r,i)}var Ba=null,Ui=null,dd=!1,Ha=!1,hd=!1,Yr=0;function Pn(r){r!==Ui&&r.next===null&&(Ui===null?Ba=Ui=r:Ui=Ui.next=r),Ha=!0,dd||(dd=!0,sT())}function Yl(r,i){if(!hd&&Ha){hd=!0;do for(var a=!1,u=Ba;u!==null;){if(r!==0){var p=u.pendingLanes;if(p===0)var g=0;else{var S=u.suspendedLanes,T=u.pingedLanes;g=(1<<31-fn(42|r)+1)-1,g&=p&~(S&~T),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,r0(u,g))}else g=Be,g=qo(u,u===We?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||ul(u,g)||(a=!0,r0(u,g));u=u.next}while(a);hd=!1}}function rT(){e0()}function e0(){Ha=dd=!1;var r=0;Yr!==0&&pT()&&(r=Yr);for(var i=ye(),a=null,u=Ba;u!==null;){var p=u.next,g=t0(u,i);g===0?(u.next=null,a===null?Ba=p:a.next=p,p===null&&(Ui=a)):(a=u,(r!==0||(g&3)!==0)&&(Ha=!0)),u=p}Ct!==0&&Ct!==5||Yl(r),Yr!==0&&(Yr=0)}function t0(r,i){for(var a=r.suspendedLanes,u=r.pingedLanes,p=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var S=31-fn(g),T=1<<S,w=p[S];w===-1?((T&a)===0||(T&u)!==0)&&(p[S]=OS(T,i)):w<=i&&(r.expiredLanes|=T),g&=~T}if(i=We,a=Be,a=qo(r,r===i?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,a===0||r===i&&(Ke===2||Ke===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&X(u),r.callbackNode=null,r.callbackPriority=0;if((a&3)===0||ul(r,a)){if(i=a&-a,i===r.callbackPriority)return i;switch(u!==null&&X(u),wu(a)){case 2:case 8:a=$t;break;case 32:a=cn;break;case 268435456:a=ii;break;default:a=cn}return u=n0.bind(null,r),a=re(a,u),r.callbackPriority=i,r.callbackNode=a,i}return u!==null&&u!==null&&X(u),r.callbackPriority=2,r.callbackNode=null,2}function n0(r,i){if(Ct!==0&&Ct!==5)return r.callbackNode=null,r.callbackPriority=0,null;var a=r.callbackNode;if(_a()&&r.callbackNode!==a)return null;var u=Be;return u=qo(r,r===We?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(By(r,u,i),t0(r,ye()),r.callbackNode!=null&&r.callbackNode===a?n0.bind(null,r):null)}function r0(r,i){if(_a())return null;By(r,i,!0)}function sT(){gT(function(){(Ye&6)!==0?re(lt,rT):e0()})}function pd(){if(Yr===0){var r=Ei;r===0&&(r=Uo,Uo<<=1,(Uo&261888)===0&&(Uo=256)),Yr=r}return Yr}function s0(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ko(""+r)}function i0(r,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,r.id&&a.setAttribute("form",r.id),i.parentNode.insertBefore(a,i),r=new FormData(r),a.parentNode.removeChild(a),r}function iT(r,i,a,u,p){if(i==="submit"&&a&&a.stateNode===p){var g=s0((p[Wt]||null).action),S=u.submitter;S&&(i=(i=S[Wt]||null)?s0(i.formAction):S.getAttribute("formAction"),i!==null&&(g=i,S=null));var T=new Xo("action","action",null,u,p);r.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Yr!==0){var w=S?i0(p,S):new FormData(p);zf(a,{pending:!0,data:w,method:p.method,action:g},null,w)}}else typeof g=="function"&&(T.preventDefault(),w=S?i0(p,S):new FormData(p),zf(a,{pending:!0,data:w,method:p.method,action:g},g,w))},currentTarget:p}]})}}for(var md=0;md<Xu.length;md++){var gd=Xu[md],lT=gd.toLowerCase(),oT=gd[0].toUpperCase()+gd.slice(1);Hn(lT,"on"+oT)}Hn(_m,"onAnimationEnd"),Hn(Bm,"onAnimationIteration"),Hn(Hm,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(Tk,"onTransitionRun"),Hn(Ek,"onTransitionStart"),Hn(Mk,"onTransitionCancel"),Hn(Um,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ks("onBeforeInput",["compositionend","keypress","textInput","paste"]),ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kl));function l0(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var u=r[a],p=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var S=u.length-1;0<=S;S--){var T=u[S],w=T.instance,R=T.currentTarget;if(T=T.listener,w!==g&&p.isPropagationStopped())break e;g=T,p.currentTarget=R;try{g(p)}catch($){Wo($)}p.currentTarget=null,g=w}else for(S=0;S<u.length;S++){if(T=u[S],w=T.instance,R=T.currentTarget,T=T.listener,w!==g&&p.isPropagationStopped())break e;g=T,p.currentTarget=R;try{g(p)}catch($){Wo($)}p.currentTarget=null,g=w}}}}function Le(r,i){var a=i[Nu];a===void 0&&(a=i[Nu]=new Set);var u=r+"__bubble";a.has(u)||(o0(i,r,2,!1),a.add(u))}function yd(r,i,a){var u=0;i&&(u|=4),o0(a,r,u,i)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function bd(r){if(!r[Ua]){r[Ua]=!0,em.forEach(function(a){a!=="selectionchange"&&(aT.has(a)||yd(a,!1,r),yd(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Ua]||(i[Ua]=!0,yd("selectionchange",!1,i))}}function o0(r,i,a,u){switch(_0(i)){case 2:var p=_T;break;case 8:p=BT;break;default:p=Rd}a=p.bind(null,i,a,r),p=void 0,!Bu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),u?p!==void 0?r.addEventListener(i,a,{capture:!0,passive:p}):r.addEventListener(i,a,!0):p!==void 0?r.addEventListener(i,a,{passive:p}):r.addEventListener(i,a,!1)}function xd(r,i,a,u,p){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var T=u.stateNode.containerInfo;if(T===p)break;if(S===4)for(S=u.return;S!==null;){var w=S.tag;if((w===3||w===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;T!==null;){if(S=oi(T),S===null)return;if(w=S.tag,w===5||w===6||w===26||w===27){u=g=S;continue e}T=T.parentNode}}u=u.return}dm(function(){var R=g,$=Lu(a),J=[];e:{var _=Im.get(r);if(_!==void 0){var U=Xo,ce=r;switch(r){case"keypress":if(Jo(a)===0)break e;case"keydown":case"keyup":U=tk;break;case"focusin":ce="focus",U=Vu;break;case"focusout":ce="blur",U=Vu;break;case"beforeblur":case"afterblur":U=Vu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=mm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=$S;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=sk;break;case _m:case Bm:case Hm:U=KS;break;case Um:U=lk;break;case"scroll":case"scrollend":U=VS;break;case"wheel":U=ak;break;case"copy":case"cut":case"paste":U=JS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=ym;break;case"toggle":case"beforetoggle":U=uk}var xe=(i&4)!==0,Ze=!xe&&(r==="scroll"||r==="scrollend"),D=xe?_!==null?_+"Capture":null:_;xe=[];for(var A=R,j;A!==null;){var K=A;if(j=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||j===null||D===null||(K=pl(A,D),K!=null&&xe.push(Pl(A,K,j))),Ze)break;A=A.return}0<xe.length&&(_=new U(_,ce,null,a,$),J.push({event:_,listeners:xe}))}}if((i&7)===0){e:{if(_=r==="mouseover"||r==="pointerover",U=r==="mouseout"||r==="pointerout",_&&a!==zu&&(ce=a.relatedTarget||a.fromElement)&&(oi(ce)||ce[li]))break e;if((U||_)&&(_=$.window===$?$:(_=$.ownerDocument)?_.defaultView||_.parentWindow:window,U?(ce=a.relatedTarget||a.toElement,U=R,ce=ce?oi(ce):null,ce!==null&&(Ze=o(ce),xe=ce.tag,ce!==Ze||xe!==5&&xe!==27&&xe!==6)&&(ce=null)):(U=null,ce=R),U!==ce)){if(xe=mm,K="onMouseLeave",D="onMouseEnter",A="mouse",(r==="pointerout"||r==="pointerover")&&(xe=ym,K="onPointerLeave",D="onPointerEnter",A="pointer"),Ze=U==null?_:hl(U),j=ce==null?_:hl(ce),_=new xe(K,A+"leave",U,a,$),_.target=Ze,_.relatedTarget=j,K=null,oi($)===R&&(xe=new xe(D,A+"enter",ce,a,$),xe.target=j,xe.relatedTarget=Ze,K=xe),Ze=K,U&&ce)t:{for(xe=cT,D=U,A=ce,j=0,K=D;K;K=xe(K))j++;K=0;for(var me=A;me;me=xe(me))K++;for(;0<j-K;)D=xe(D),j--;for(;0<K-j;)A=xe(A),K--;for(;j--;){if(D===A||A!==null&&D===A.alternate){xe=D;break t}D=xe(D),A=xe(A)}xe=null}else xe=null;U!==null&&a0(J,_,U,xe,!1),ce!==null&&Ze!==null&&a0(J,Ze,ce,xe,!0)}}e:{if(_=R?hl(R):window,U=_.nodeName&&_.nodeName.toLowerCase(),U==="select"||U==="input"&&_.type==="file")var qe=Mm;else if(Tm(_))if(Cm)qe=vk;else{qe=bk;var ue=yk}else U=_.nodeName,!U||U.toLowerCase()!=="input"||_.type!=="checkbox"&&_.type!=="radio"?R&&Ru(R.elementType)&&(qe=Mm):qe=xk;if(qe&&(qe=qe(r,R))){Em(J,qe,a,$);break e}ue&&ue(r,_,R),r==="focusout"&&R&&_.type==="number"&&R.memoizedProps.value!=null&&ju(_,"number",_.value)}switch(ue=R?hl(R):window,r){case"focusin":(Tm(ue)||ue.contentEditable==="true")&&(gi=ue,Pu=R,kl=null);break;case"focusout":kl=Pu=gi=null;break;case"mousedown":Ju=!0;break;case"contextmenu":case"mouseup":case"dragend":Ju=!1,zm(J,a,$);break;case"selectionchange":if(kk)break;case"keydown":case"keyup":zm(J,a,$)}var Ne;if($u)e:{switch(r){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else mi?Sm(r,a)&&(He="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(He="onCompositionStart");He&&(bm&&a.locale!=="ko"&&(mi||He!=="onCompositionStart"?He==="onCompositionEnd"&&mi&&(Ne=hm()):(Ar=$,Hu="value"in Ar?Ar.value:Ar.textContent,mi=!0)),ue=Ia(R,He),0<ue.length&&(He=new gm(He,r,null,a,$),J.push({event:He,listeners:ue}),Ne?He.data=Ne:(Ne=km(a),Ne!==null&&(He.data=Ne)))),(Ne=dk?hk(r,a):pk(r,a))&&(He=Ia(R,"onBeforeInput"),0<He.length&&(ue=new gm("onBeforeInput","beforeinput",null,a,$),J.push({event:ue,listeners:He}),ue.data=Ne)),iT(J,r,R,a,$)}l0(J,i)})}function Pl(r,i,a){return{instance:r,listener:i,currentTarget:a}}function Ia(r,i){for(var a=i+"Capture",u=[];r!==null;){var p=r,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=pl(r,a),p!=null&&u.unshift(Pl(r,p,g)),p=pl(r,i),p!=null&&u.push(Pl(r,p,g))),r.tag===3)return u;r=r.return}return[]}function cT(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function a0(r,i,a,u,p){for(var g=i._reactName,S=[];a!==null&&a!==u;){var T=a,w=T.alternate,R=T.stateNode;if(T=T.tag,w!==null&&w===u)break;T!==5&&T!==26&&T!==27||R===null||(w=R,p?(R=pl(a,g),R!=null&&S.unshift(Pl(a,R,w))):p||(R=pl(a,g),R!=null&&S.push(Pl(a,R,w)))),a=a.return}S.length!==0&&r.push({event:i,listeners:S})}var uT=/\r\n?/g,fT=/\u0000|\uFFFD/g;function c0(r){return(typeof r=="string"?r:""+r).replace(uT,`
`).replace(fT,"")}function u0(r,i){return i=c0(i),c0(r)===i}function Qe(r,i,a,u,p,g){switch(a){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||di(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&di(r,""+u);break;case"className":Go(r,"class",u);break;case"tabIndex":Go(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Go(r,a,u);break;case"style":um(r,u,g);break;case"data":if(i!=="object"){Go(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||a!=="href")){r.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=Ko(""+u),r.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(i!=="input"&&Qe(r,i,"name",p.name,p,null),Qe(r,i,"formEncType",p.formEncType,p,null),Qe(r,i,"formMethod",p.formMethod,p,null),Qe(r,i,"formTarget",p.formTarget,p,null)):(Qe(r,i,"encType",p.encType,p,null),Qe(r,i,"method",p.method,p,null),Qe(r,i,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=Ko(""+u),r.setAttribute(a,u);break;case"onClick":u!=null&&(r.onclick=er);break;case"onScroll":u!=null&&Le("scroll",r);break;case"onScrollEnd":u!=null&&Le("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(p.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}a=Ko(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""+u):r.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""):r.removeAttribute(a);break;case"capture":case"download":u===!0?r.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,u):r.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(a,u):r.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(a):r.setAttribute(a,u);break;case"popover":Le("beforetoggle",r),Le("toggle",r),$o(r,"popover",u);break;case"xlinkActuate":Wn(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Wn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Wn(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Wn(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Wn(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Wn(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Wn(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Wn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Wn(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":$o(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=US.get(a)||a,$o(r,a,u))}}function vd(r,i,a,u,p,g){switch(a){case"style":um(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(p.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"children":typeof u=="string"?di(r,u):(typeof u=="number"||typeof u=="bigint")&&di(r,""+u);break;case"onScroll":u!=null&&Le("scroll",r);break;case"onScrollEnd":u!=null&&Le("scrollend",r);break;case"onClick":u!=null&&(r.onclick=er);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tm.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(p=a.endsWith("Capture"),i=a.slice(2,p?a.length-7:void 0),g=r[Wt]||null,g=g!=null?g[a]:null,typeof g=="function"&&r.removeEventListener(i,g,p),typeof u=="function")){typeof g!="function"&&g!==null&&(a in r?r[a]=null:r.hasAttribute(a)&&r.removeAttribute(a)),r.addEventListener(i,u,p);break e}a in r?r[a]=u:u===!0?r.setAttribute(a,""):$o(r,a,u)}}}function Ht(r,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",r),Le("load",r);var u=!1,p=!1,g;for(g in a)if(a.hasOwnProperty(g)){var S=a[g];if(S!=null)switch(g){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Qe(r,i,g,S,a,null)}}p&&Qe(r,i,"srcSet",a.srcSet,a,null),u&&Qe(r,i,"src",a.src,a,null);return;case"input":Le("invalid",r);var T=g=S=p=null,w=null,R=null;for(u in a)if(a.hasOwnProperty(u)){var $=a[u];if($!=null)switch(u){case"name":p=$;break;case"type":S=$;break;case"checked":w=$;break;case"defaultChecked":R=$;break;case"value":g=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:Qe(r,i,u,$,a,null)}}lm(r,g,T,w,R,S,p,!1);return;case"select":Le("invalid",r),u=S=g=null;for(p in a)if(a.hasOwnProperty(p)&&(T=a[p],T!=null))switch(p){case"value":g=T;break;case"defaultValue":S=T;break;case"multiple":u=T;default:Qe(r,i,p,T,a,null)}i=g,a=S,r.multiple=!!u,i!=null?fi(r,!!u,i,!1):a!=null&&fi(r,!!u,a,!0);return;case"textarea":Le("invalid",r),g=p=u=null;for(S in a)if(a.hasOwnProperty(S)&&(T=a[S],T!=null))switch(S){case"value":u=T;break;case"defaultValue":p=T;break;case"children":g=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Qe(r,i,S,T,a,null)}am(r,u,p,g);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(u=a[w],u!=null))switch(w){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Qe(r,i,w,u,a,null)}return;case"dialog":Le("beforetoggle",r),Le("toggle",r),Le("cancel",r),Le("close",r);break;case"iframe":case"object":Le("load",r);break;case"video":case"audio":for(u=0;u<Kl.length;u++)Le(Kl[u],r);break;case"image":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"embed":case"source":case"link":Le("error",r),Le("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in a)if(a.hasOwnProperty(R)&&(u=a[R],u!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Qe(r,i,R,u,a,null)}return;default:if(Ru(i)){for($ in a)a.hasOwnProperty($)&&(u=a[$],u!==void 0&&vd(r,i,$,u,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(u=a[T],u!=null&&Qe(r,i,T,u,a,null))}function dT(r,i,a,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,S=null,T=null,w=null,R=null,$=null;for(U in a){var J=a[U];if(a.hasOwnProperty(U)&&J!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":w=J;default:u.hasOwnProperty(U)||Qe(r,i,U,null,u,J)}}for(var _ in u){var U=u[_];if(J=a[_],u.hasOwnProperty(_)&&(U!=null||J!=null))switch(_){case"type":g=U;break;case"name":p=U;break;case"checked":R=U;break;case"defaultChecked":$=U;break;case"value":S=U;break;case"defaultValue":T=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(137,i));break;default:U!==J&&Qe(r,i,_,U,u,J)}}Du(r,S,T,w,R,$,g,p);return;case"select":U=S=T=_=null;for(g in a)if(w=a[g],a.hasOwnProperty(g)&&w!=null)switch(g){case"value":break;case"multiple":U=w;default:u.hasOwnProperty(g)||Qe(r,i,g,null,u,w)}for(p in u)if(g=u[p],w=a[p],u.hasOwnProperty(p)&&(g!=null||w!=null))switch(p){case"value":_=g;break;case"defaultValue":T=g;break;case"multiple":S=g;default:g!==w&&Qe(r,i,p,g,u,w)}i=T,a=S,u=U,_!=null?fi(r,!!a,_,!1):!!u!=!!a&&(i!=null?fi(r,!!a,i,!0):fi(r,!!a,a?[]:"",!1));return;case"textarea":U=_=null;for(T in a)if(p=a[T],a.hasOwnProperty(T)&&p!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Qe(r,i,T,null,u,p)}for(S in u)if(p=u[S],g=a[S],u.hasOwnProperty(S)&&(p!=null||g!=null))switch(S){case"value":_=p;break;case"defaultValue":U=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==g&&Qe(r,i,S,p,u,g)}om(r,_,U);return;case"option":for(var ce in a)if(_=a[ce],a.hasOwnProperty(ce)&&_!=null&&!u.hasOwnProperty(ce))switch(ce){case"selected":r.selected=!1;break;default:Qe(r,i,ce,null,u,_)}for(w in u)if(_=u[w],U=a[w],u.hasOwnProperty(w)&&_!==U&&(_!=null||U!=null))switch(w){case"selected":r.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Qe(r,i,w,_,u,U)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)_=a[xe],a.hasOwnProperty(xe)&&_!=null&&!u.hasOwnProperty(xe)&&Qe(r,i,xe,null,u,_);for(R in u)if(_=u[R],U=a[R],u.hasOwnProperty(R)&&_!==U&&(_!=null||U!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(137,i));break;default:Qe(r,i,R,_,u,U)}return;default:if(Ru(i)){for(var Ze in a)_=a[Ze],a.hasOwnProperty(Ze)&&_!==void 0&&!u.hasOwnProperty(Ze)&&vd(r,i,Ze,void 0,u,_);for($ in u)_=u[$],U=a[$],!u.hasOwnProperty($)||_===U||_===void 0&&U===void 0||vd(r,i,$,_,u,U);return}}for(var D in a)_=a[D],a.hasOwnProperty(D)&&_!=null&&!u.hasOwnProperty(D)&&Qe(r,i,D,null,u,_);for(J in u)_=u[J],U=a[J],!u.hasOwnProperty(J)||_===U||_==null&&U==null||Qe(r,i,J,_,u,U)}function f0(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hT(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var p=a[u],g=p.transferSize,S=p.initiatorType,T=p.duration;if(g&&T&&f0(S)){for(S=0,T=p.responseEnd,u+=1;u<a.length;u++){var w=a[u],R=w.startTime;if(R>T)break;var $=w.transferSize,J=w.initiatorType;$&&f0(J)&&(w=w.responseEnd,S+=$*(w<T?1:(T-R)/(w-R)))}if(--u,i+=8*(g+S)/(p.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Sd=null,kd=null;function Va(r){return r.nodeType===9?r:r.ownerDocument}function d0(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h0(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Td(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ed=null;function pT(){var r=window.event;return r&&r.type==="popstate"?r===Ed?!1:(Ed=r,!0):(Ed=null,!1)}var p0=typeof setTimeout=="function"?setTimeout:void 0,mT=typeof clearTimeout=="function"?clearTimeout:void 0,m0=typeof Promise=="function"?Promise:void 0,gT=typeof queueMicrotask=="function"?queueMicrotask:typeof m0<"u"?function(r){return m0.resolve(null).then(r).catch(yT)}:p0;function yT(r){setTimeout(function(){throw r})}function Kr(r){return r==="head"}function g0(r,i){var a=i,u=0;do{var p=a.nextSibling;if(r.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"||a==="/&"){if(u===0){r.removeChild(p),$i(i);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Jl(r.ownerDocument.documentElement);else if(a==="head"){a=r.ownerDocument.head,Jl(a);for(var g=a.firstChild;g;){var S=g.nextSibling,T=g.nodeName;g[dl]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&g.rel.toLowerCase()==="stylesheet"||a.removeChild(g),g=S}}else a==="body"&&Jl(r.ownerDocument.body);a=p}while(a);$i(i)}function y0(r,i){var a=r;r=0;do{var u=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(r===0)break;r--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||r++;a=u}while(a)}function Md(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Md(a),Au(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}r.removeChild(a)}}function bT(r,i,a,u){for(;r.nodeType===1;){var p=a;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[dl])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=On(r.nextSibling),r===null)break}return null}function xT(r,i,a){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=On(r.nextSibling),r===null))return null;return r}function b0(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=On(r.nextSibling),r===null))return null;return r}function Cd(r){return r.data==="$?"||r.data==="$~"}function wd(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function vT(r,i){var a=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||a.readyState!=="loading")i();else{var u=function(){i(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function On(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Nd=null;function x0(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"||a==="/&"){if(i===0)return On(r.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}r=r.nextSibling}return null}function v0(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return r;i--}else a!=="/$"&&a!=="/&"||i++}r=r.previousSibling}return null}function S0(r,i,a){switch(i=Va(a),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Jl(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Au(r)}var Dn=new Map,k0=new Set;function qa(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var gr=te.d;te.d={f:ST,r:kT,D:TT,C:ET,L:MT,m:CT,X:NT,S:wT,M:AT};function ST(){var r=gr.f(),i=Ra();return r||i}function kT(r){var i=ai(r);i!==null&&i.tag===5&&i.type==="form"?Ug(i):gr.r(r)}var Ii=typeof document>"u"?null:document;function T0(r,i,a){var u=Ii;if(u&&typeof i=="string"&&i){var p=Tn(i);p='link[rel="'+r+'"][href="'+p+'"]',typeof a=="string"&&(p+='[crossorigin="'+a+'"]'),k0.has(p)||(k0.add(p),r={rel:r,crossOrigin:a,href:i},u.querySelector(p)===null&&(i=u.createElement("link"),Ht(i,"link",r),At(i),u.head.appendChild(i)))}}function TT(r){gr.D(r),T0("dns-prefetch",r,null)}function ET(r,i){gr.C(r,i),T0("preconnect",r,i)}function MT(r,i,a){gr.L(r,i,a);var u=Ii;if(u&&r&&i){var p='link[rel="preload"][as="'+Tn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(p+='[imagesrcset="'+Tn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(p+='[imagesizes="'+Tn(a.imageSizes)+'"]')):p+='[href="'+Tn(r)+'"]';var g=p;switch(i){case"style":g=Vi(r);break;case"script":g=qi(r)}Dn.has(g)||(r=y({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:r,as:i},a),Dn.set(g,r),u.querySelector(p)!==null||i==="style"&&u.querySelector(Fl(g))||i==="script"&&u.querySelector(Xl(g))||(i=u.createElement("link"),Ht(i,"link",r),At(i),u.head.appendChild(i)))}}function CT(r,i){gr.m(r,i);var a=Ii;if(a&&r){var u=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+Tn(u)+'"][href="'+Tn(r)+'"]',g=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=qi(r)}if(!Dn.has(g)&&(r=y({rel:"modulepreload",href:r},i),Dn.set(g,r),a.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Xl(g)))return}u=a.createElement("link"),Ht(u,"link",r),At(u),a.head.appendChild(u)}}}function wT(r,i,a){gr.S(r,i,a);var u=Ii;if(u&&r){var p=ci(u).hoistableStyles,g=Vi(r);i=i||"default";var S=p.get(g);if(!S){var T={loading:0,preload:null};if(S=u.querySelector(Fl(g)))T.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":i},a),(a=Dn.get(g))&&Ad(r,a);var w=S=u.createElement("link");At(w),Ht(w,"link",r),w._p=new Promise(function(R,$){w.onload=R,w.onerror=$}),w.addEventListener("load",function(){T.loading|=1}),w.addEventListener("error",function(){T.loading|=2}),T.loading|=4,$a(S,i,u)}S={type:"stylesheet",instance:S,count:1,state:T},p.set(g,S)}}}function NT(r,i){gr.X(r,i);var a=Ii;if(a&&r){var u=ci(a).hoistableScripts,p=qi(r),g=u.get(p);g||(g=a.querySelector(Xl(p)),g||(r=y({src:r,async:!0},i),(i=Dn.get(p))&&Od(r,i),g=a.createElement("script"),At(g),Ht(g,"link",r),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function AT(r,i){gr.M(r,i);var a=Ii;if(a&&r){var u=ci(a).hoistableScripts,p=qi(r),g=u.get(p);g||(g=a.querySelector(Xl(p)),g||(r=y({src:r,async:!0,type:"module"},i),(i=Dn.get(p))&&Od(r,i),g=a.createElement("script"),At(g),Ht(g,"link",r),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function E0(r,i,a,u){var p=(p=ve.current)?qa(p):null;if(!p)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Vi(a.href),a=ci(p).hoistableStyles,u=a.get(i),u||(u={type:"style",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){r=Vi(a.href);var g=ci(p).hoistableStyles,S=g.get(r);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,S),(g=p.querySelector(Fl(r)))&&!g._p&&(S.instance=g,S.state.loading=5),Dn.has(r)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Dn.set(r,a),g||OT(p,r,a,S.state))),i&&u===null)throw Error(s(528,""));return S}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=qi(a),a=ci(p).hoistableScripts,u=a.get(i),u||(u={type:"script",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Vi(r){return'href="'+Tn(r)+'"'}function Fl(r){return'link[rel="stylesheet"]['+r+"]"}function M0(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function OT(r,i,a,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Ht(i,"link",a),At(i),r.head.appendChild(i))}function qi(r){return'[src="'+Tn(r)+'"]'}function Xl(r){return"script[async]"+r}function C0(r,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Tn(a.href)+'"]');if(u)return i.instance=u,At(u),u;var p=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),At(u),Ht(u,"style",p),$a(u,a.precedence,r),i.instance=u;case"stylesheet":p=Vi(a.href);var g=r.querySelector(Fl(p));if(g)return i.state.loading|=4,i.instance=g,At(g),g;u=M0(a),(p=Dn.get(p))&&Ad(u,p),g=(r.ownerDocument||r).createElement("link"),At(g);var S=g;return S._p=new Promise(function(T,w){S.onload=T,S.onerror=w}),Ht(g,"link",u),i.state.loading|=4,$a(g,a.precedence,r),i.instance=g;case"script":return g=qi(a.src),(p=r.querySelector(Xl(g)))?(i.instance=p,At(p),p):(u=a,(p=Dn.get(g))&&(u=y({},a),Od(u,p)),r=r.ownerDocument||r,p=r.createElement("script"),At(p),Ht(p,"link",u),r.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,$a(u,a.precedence,r));return i.instance}function $a(r,i,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,g=p,S=0;S<u.length;S++){var T=u[S];if(T.dataset.precedence===i)g=T;else if(g!==p)break}g?g.parentNode.insertBefore(r,g.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(r,i.firstChild))}function Ad(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Od(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Ga=null;function w0(r,i,a){if(Ga===null){var u=new Map,p=Ga=new Map;p.set(a,u)}else p=Ga,u=p.get(a),u||(u=new Map,p.set(a,u));if(u.has(r))return u;for(u.set(r,null),a=a.getElementsByTagName(r),p=0;p<a.length;p++){var g=a[p];if(!(g[dl]||g[zt]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(i)||"";S=r+S;var T=u.get(S);T?T.push(g):u.set(S,[g])}}return u}function N0(r,i,a){r=r.ownerDocument||r,r.head.insertBefore(a,i==="title"?r.querySelector("head > title"):null)}function DT(r,i,a){if(a===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function A0(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function jT(r,i,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Vi(u.href),g=i.querySelector(Fl(p));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Ya.bind(r),i.then(r,r)),a.state.loading|=4,a.instance=g,At(g);return}g=i.ownerDocument||i,u=M0(u),(p=Dn.get(p))&&Ad(u,p),g=g.createElement("link"),At(g);var S=g;S._p=new Promise(function(T,w){S.onload=T,S.onerror=w}),Ht(g,"link",u),a.instance=g}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(r.count++,a=Ya.bind(r),i.addEventListener("load",a),i.addEventListener("error",a))}}var Dd=0;function RT(r,i){return r.stylesheets&&r.count===0&&Pa(r,r.stylesheets),0<r.count||0<r.imgCount?function(a){var u=setTimeout(function(){if(r.stylesheets&&Pa(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4+i);0<r.imgBytes&&Dd===0&&(Dd=62500*hT());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Pa(r,r.stylesheets),r.unsuspend)){var g=r.unsuspend;r.unsuspend=null,g()}},(r.imgBytes>Dd?50:800)+i);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Ya(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pa(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ka=null;function Pa(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ka=new Map,i.forEach(zT,r),Ka=null,Ya.call(r))}function zT(r,i){if(!(i.state.loading&4)){var a=Ka.get(r);if(a)var u=a.get(null);else{a=new Map,Ka.set(r,a);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var S=p[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}p=i.instance,S=p.getAttribute("data-precedence"),g=a.get(S)||u,g===u&&a.set(null,p),a.set(S,p),this.count++,u=Ya.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),g?g.parentNode.insertBefore(p,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),i.state.loading|=4}}var Ql={$$typeof:B,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function LT(r,i,a,u,p,g,S,T,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mu(0),this.hiddenUpdates=Mu(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function O0(r,i,a,u,p,g,S,T,w,R,$,J){return r=new LT(r,i,a,S,w,R,$,J,T),i=1,g===!0&&(i|=24),g=hn(3,null,null,i),r.current=g,g.stateNode=r,i=uf(),i.refCount++,r.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:a,cache:i},pf(g),r}function D0(r){return r?(r=xi,r):xi}function j0(r,i,a,u,p,g){p=D0(p),u.context===null?u.context=p:u.pendingContext=p,u=Lr(i),u.payload={element:a},g=g===void 0?null:g,g!==null&&(u.callback=g),a=_r(r,u,i),a!==null&&(ln(a,r,i),Al(a,r,i))}function R0(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function jd(r,i){R0(r,i),(r=r.alternate)&&R0(r,i)}function z0(r){if(r.tag===13||r.tag===31){var i=Cs(r,67108864);i!==null&&ln(i,r,67108864),jd(r,67108864)}}function L0(r){if(r.tag===13||r.tag===31){var i=bn();i=Cu(i);var a=Cs(r,i);a!==null&&ln(a,r,i),jd(r,i)}}var Ja=!0;function _T(r,i,a,u){var p=I.T;I.T=null;var g=te.p;try{te.p=2,Rd(r,i,a,u)}finally{te.p=g,I.T=p}}function BT(r,i,a,u){var p=I.T;I.T=null;var g=te.p;try{te.p=8,Rd(r,i,a,u)}finally{te.p=g,I.T=p}}function Rd(r,i,a,u){if(Ja){var p=zd(u);if(p===null)xd(r,i,u,Fa,a),B0(r,u);else if(UT(p,r,i,a,u))u.stopPropagation();else if(B0(r,u),i&4&&-1<HT.indexOf(r)){for(;p!==null;){var g=ai(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=Ss(g.pendingLanes);if(S!==0){var T=g;for(T.pendingLanes|=2,T.entangledLanes|=2;S;){var w=1<<31-fn(S);T.entanglements[1]|=w,S&=~w}Pn(g),(Ye&6)===0&&(Da=ye()+500,Yl(0))}}break;case 31:case 13:T=Cs(g,2),T!==null&&ln(T,g,2),Ra(),jd(g,2)}if(g=zd(u),g===null&&xd(r,i,u,Fa,a),g===p)break;p=g}p!==null&&u.stopPropagation()}else xd(r,i,u,null,a)}}function zd(r){return r=Lu(r),Ld(r)}var Fa=null;function Ld(r){if(Fa=null,r=oi(r),r!==null){var i=o(r);if(i===null)r=null;else{var a=i.tag;if(a===13){if(r=c(i),r!==null)return r;r=null}else if(a===31){if(r=f(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Fa=r,null}function _0(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ct()){case lt:return 2;case $t:return 8;case cn:case Nt:return 32;case ii:return 268435456;default:return 32}default:return 32}}var _d=!1,Pr=null,Jr=null,Fr=null,Zl=new Map,Wl=new Map,Xr=[],HT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B0(r,i){switch(r){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Zl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wl.delete(i.pointerId)}}function eo(r,i,a,u,p,g){return r===null||r.nativeEvent!==g?(r={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:g,targetContainers:[p]},i!==null&&(i=ai(i),i!==null&&z0(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),r)}function UT(r,i,a,u,p){switch(i){case"focusin":return Pr=eo(Pr,r,i,a,u,p),!0;case"dragenter":return Jr=eo(Jr,r,i,a,u,p),!0;case"mouseover":return Fr=eo(Fr,r,i,a,u,p),!0;case"pointerover":var g=p.pointerId;return Zl.set(g,eo(Zl.get(g)||null,r,i,a,u,p)),!0;case"gotpointercapture":return g=p.pointerId,Wl.set(g,eo(Wl.get(g)||null,r,i,a,u,p)),!0}return!1}function H0(r){var i=oi(r.target);if(i!==null){var a=o(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){r.blockedOn=i,Zp(r.priority,function(){L0(a)});return}}else if(i===31){if(i=f(a),i!==null){r.blockedOn=i,Zp(r.priority,function(){L0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Xa(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=zd(r.nativeEvent);if(a===null){a=r.nativeEvent;var u=new a.constructor(a.type,a);zu=u,a.target.dispatchEvent(u),zu=null}else return i=ai(a),i!==null&&z0(i),r.blockedOn=a,!1;i.shift()}return!0}function U0(r,i,a){Xa(r)&&a.delete(i)}function IT(){_d=!1,Pr!==null&&Xa(Pr)&&(Pr=null),Jr!==null&&Xa(Jr)&&(Jr=null),Fr!==null&&Xa(Fr)&&(Fr=null),Zl.forEach(U0),Wl.forEach(U0)}function Qa(r,i){r.blockedOn===i&&(r.blockedOn=null,_d||(_d=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,IT)))}var Za=null;function I0(r){Za!==r&&(Za=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Za===r&&(Za=null);for(var i=0;i<r.length;i+=3){var a=r[i],u=r[i+1],p=r[i+2];if(typeof u!="function"){if(Ld(u||a)===null)continue;break}var g=ai(a);g!==null&&(r.splice(i,3),i-=3,zf(g,{pending:!0,data:p,method:a.method,action:u},u,p))}}))}function $i(r){function i(w){return Qa(w,r)}Pr!==null&&Qa(Pr,r),Jr!==null&&Qa(Jr,r),Fr!==null&&Qa(Fr,r),Zl.forEach(i),Wl.forEach(i);for(var a=0;a<Xr.length;a++){var u=Xr[a];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Xr.length&&(a=Xr[0],a.blockedOn===null);)H0(a),a.blockedOn===null&&Xr.shift();if(a=(r.ownerDocument||r).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var p=a[u],g=a[u+1],S=p[Wt]||null;if(typeof g=="function")S||I0(a);else if(S){var T=null;if(g&&g.hasAttribute("formAction")){if(p=g,S=g[Wt]||null)T=S.formAction;else if(Ld(p)!==null)continue}else T=S.action;typeof T=="function"?a[u+1]=T:(a.splice(u,3),u-=3),I0(a)}}}function V0(){function r(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(S){return p=S})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function Bd(r){this._internalRoot=r}Wa.prototype.render=Bd.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,u=bn();j0(a,u,r,i,null,null)},Wa.prototype.unmount=Bd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;j0(r.current,2,null,r,null,null),Ra(),i[li]=null}};function Wa(r){this._internalRoot=r}Wa.prototype.unstable_scheduleHydration=function(r){if(r){var i=Qp();r={blockedOn:null,target:r,priority:i};for(var a=0;a<Xr.length&&i!==0&&i<Xr[a].priority;a++);Xr.splice(a,0,r),a===0&&H0(r)}};var q0=e.version;if(q0!=="19.2.1")throw Error(s(527,q0,"19.2.1"));te.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=h(i),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var VT={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{cl=ec.inject(VT),un=ec}catch{}}return no.createRoot=function(r,i){if(!l(r))throw Error(s(299));var a=!1,u="",p=Fg,g=Xg,S=Qg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=O0(r,1,!1,null,null,a,u,null,p,g,S,V0),r[li]=i.current,bd(r),new Bd(i)},no.hydrateRoot=function(r,i,a){if(!l(r))throw Error(s(299));var u=!1,p="",g=Fg,S=Xg,T=Qg,w=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(w=a.formState)),i=O0(r,1,!0,i,a??null,u,p,w,g,S,T,V0),i.context=D0(null),a=i.current,u=bn(),u=Cu(u),p=Lr(u),p.callback=null,_r(a,p,u),a=u,i.current.lanes=a,fl(i,a),Pn(i),r[li]=i.current,bd(r),new Wa(i)},no.version="19.2.1",no}var Z0;function XT(){if(Z0)return Id.exports;Z0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Id.exports=FT(),Id.exports}var QT=XT();const ZT=ip(QT);function WT({onComplete:n}){const[e,t]=Q.useState([]),[s,l]=Q.useState(""),[o,c]=Q.useState(""),[f,d]=Q.useState(!1),[h,m]=Q.useState(!1),[y,b]=Q.useState(!1),[v,k]=Q.useState(""),[M,E]=Q.useState(!1);Q.useEffect(()=>{C()},[]);const C=async()=>{d(!0),k("");try{const F=await(await fetch("/api/wifi/networks")).json();t(F.networks||[])}catch(G){k("Failed to scan networks"),console.error(G)}finally{d(!1)}},z=async G=>{if(G.preventDefault(),!s){k("Please select a network");return}m(!0),k("");try{const F=await fetch("/api/wifi/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ssid:s,password:o||null})});if(F.ok)b(!0),m(!1);else{const q=await F.json();k(q.detail||"Failed to connect"),m(!1)}}catch{b(!0),m(!1)}},B="w-full p-3 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border",ee="w-full py-3 px-4 rounded-lg font-bold transition-all";return y?x.jsx("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 bg-white min-h-screen",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-6xl mb-6",children:""}),x.jsx("h1",{className:"text-3xl mb-4 font-bold text-black",children:"Connecting to WiFi..."}),x.jsxs("p",{className:"text-gray-600 mb-6",children:["Your PC-1 is now connecting to ",x.jsx("strong",{className:"text-black",children:s})]}),x.jsxs("div",{className:"bg-bg-card border-4 border-black rounded-xl p-6 text-left mb-6 shadow-lg",children:[x.jsx("h2",{className:"font-bold text-black mb-4",children:"Next Steps:"}),x.jsxs("ol",{className:"space-y-3 text-black",children:[x.jsxs("li",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"1"}),x.jsxs("span",{children:["Disconnect from ",x.jsx("strong",{children:"PC-1-Setup"})," network on your phone"]})]}),x.jsxs("li",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"2"}),x.jsxs("span",{children:["Connect your phone to ",x.jsx("strong",{children:s})]})]}),x.jsxs("li",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"3"}),x.jsx("span",{children:"Wait about 30 seconds for the device to connect"})]}),x.jsxs("li",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"4"}),x.jsxs("span",{children:["Visit ",x.jsx("strong",{className:"text-black",children:"http://pc-1.local"})," to access settings"]})]})]})]}),x.jsx("p",{className:"text-sm text-gray-600",children:"If the connection fails, the PC-1 will re-create the setup network automatically."})]})}):x.jsxs("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 bg-white min-h-screen",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("h1",{className:"text-3xl sm:text-4xl mb-4 font-bold text-black",children:"WiFi Setup"}),x.jsx("p",{className:"text-gray-600",children:"Connect your PC-1 to your home WiFi network"})]}),v&&x.jsxs("div",{className:"bg-white border-2 border-red-500 text-red-600 p-4 rounded-lg mb-6",children:[x.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),v]}),x.jsx("div",{className:"bg-bg-card border-4 border-black rounded-xl p-4 flex flex-col shadow-lg mb-6",children:x.jsxs("form",{onSubmit:z,className:"space-y-6",children:[M?x.jsxs(x.Fragment,{children:[x.jsxs("div",{children:[x.jsx("label",{className:"block mb-2 font-bold text-black",children:"Network Name (SSID)"}),x.jsx("input",{type:"text",value:s,onChange:G=>l(G.target.value),className:B,placeholder:"Enter WiFi network name",required:!0,disabled:h})]}),x.jsx("button",{type:"button",onClick:()=>{E(!1),l("")},className:"text-sm text-gray-600 hover:text-black underline cursor-pointer",children:" Back to network list"})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsx("label",{className:"block font-bold text-black",children:"Available Networks"}),x.jsx("button",{type:"button",onClick:C,disabled:f,className:"text-sm px-3 py-1 bg-transparent border-2 border-gray-300 hover:border-black rounded-lg text-black transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:f?"Scanning...":"Refresh"})]}),x.jsxs("select",{value:s,onChange:G=>l(G.target.value),className:B,required:!0,disabled:h,children:[x.jsx("option",{value:"",children:"-- Select a network --"}),e.map(G=>x.jsxs("option",{value:G.ssid,children:[G.ssid," (",G.signal,"%) ",G.secure?"":""]},G.ssid))]})]}),x.jsx("button",{type:"button",onClick:()=>E(!0),className:"text-sm text-gray-600 hover:text-black underline cursor-pointer",children:"Enter network name manually"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block mb-2 font-bold text-black",children:"Password"}),x.jsx("input",{type:"password",value:o,onChange:G=>c(G.target.value),className:B,placeholder:"Enter WiFi password (leave blank if open network)",disabled:h})]}),x.jsx("button",{type:"submit",disabled:h||!s,className:`${ee} bg-transparent border-2 border-black text-black hover:bg-black hover:text-white disabled:opacity-50 disabled:cursor-not-allowed disabled:border-gray-300 disabled:text-gray-400 cursor-pointer`,children:h?"Connecting...":"Connect to WiFi"})]})}),x.jsxs("div",{className:"mt-8 p-4 bg-bg-card border-4 border-black rounded-xl shadow-lg",children:[x.jsxs("p",{className:"text-sm text-black mb-2",children:[x.jsx("strong",{children:"Note:"})," After clicking Connect, this device will disconnect from the setup network and join your home WiFi."]}),x.jsx("p",{className:"text-sm text-gray-600",children:"You'll need to reconnect your phone to your home WiFi to access the settings page."})]})]})}const Ch=(n,e="12h")=>{if(!n)return"";if(e==="24h")return n;const[t,s]=n.split(":"),l=parseInt(t,10),o=l>=12?"PM":"AM";return`${l%12||12}:${s} ${o}`},at="#000000",Zr="#3a3a3a",Us="#4a4a4a",Gd="#525252",B1=[`radial-gradient(circle at 20% 30%, ${at} 0%, ${Zr} 25%, ${at} 50%, ${Us} 75%, ${at} 100%)`,`radial-gradient(circle at 80% 70%, ${at} 0%, ${Us} 20%, ${at} 40%, ${Zr} 60%, ${at} 80%, ${Gd} 100%)`,`radial-gradient(ellipse at 50% 20%, ${at} 0%, ${Zr} 30%, ${at} 60%, ${Us} 90%, ${at} 100%)`,`radial-gradient(circle at 70% 50%, ${at} 0%, ${Gd} 15%, ${at} 35%, ${Zr} 55%, ${at} 75%, ${Us} 100%)`,`radial-gradient(ellipse at 30% 80%, ${at} 0%, ${Us} 25%, ${at} 50%, ${Zr} 75%, ${at} 100%)`,`radial-gradient(circle at 60% 40%, ${at} 0%, ${Zr} 20%, ${at} 45%, ${Gd} 70%, ${at} 100%)`,`radial-gradient(ellipse at 40% 60%, ${at} 0%, ${Us} 30%, ${at} 60%, ${Zr} 90%, ${at} 100%)`,`radial-gradient(circle at 50% 50%, ${at} 0%, ${Zr} 25%, ${at} 50%, ${Us} 75%, ${at} 100%)`],Xi=({children:n,onClick:e,disabled:t=!1,className:s="",type:l="button",loading:o=!1,...c})=>{const d={className:`px-6 py-2 bg-transparent border-2 rounded-lg font-bold transition-all cursor-pointer flex items-center gap-2 ${s}`,style:{borderColor:"var(--color-text-muted)",color:"var(--color-text-muted)"},onMouseEnter:h=>{!t&&!o&&(h.currentTarget.style.backgroundColor="var(--color-bg-white)",h.currentTarget.style.borderColor="var(--color-border-main)",h.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:h=>{!t&&!o&&(h.currentTarget.style.backgroundColor="transparent",h.currentTarget.style.borderColor="var(--color-text-muted)",h.currentTarget.style.color="var(--color-text-muted)")}};return x.jsx("button",{type:l,onClick:e,disabled:t||o,className:d.className,style:d.style,onMouseEnter:d.onMouseEnter,onMouseLeave:d.onMouseLeave,...c,children:o?"Loading...":n})},Zi=({className:n})=>x.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:[x.jsx("title",{children:"wifi"}),x.jsxs("g",{fill:"currentColor",children:[x.jsx("circle",{fill:"currentColor",cx:"8",cy:"12.5",r:"1.5"}),x.jsx("path",{fill:"currentColor",d:"M11.5,10C10.6,9,9.3,8.5,8,8.5S5.4,9,4.5,10L3.1,8.6C4.4,7.2,6.1,6.5,8,6.5s3.6,0.7,4.9,2.1 L11.5,10z"}),x.jsx("path",{fill:"currentColor",d:"M8,2C5,2,2.2,3.1,0,5.2l1.4,1.4C3.2,4.9,5.5,4,8,4s4.8,0.9,6.6,2.7L16,5.2C13.8,3.1,11,2,8,2z"})]})]}),xc=({className:n,style:e,...t})=>x.jsxs("svg",{className:n,style:e,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",...t,children:[x.jsx("title",{children:"wifi-off"}),x.jsxs("g",{fill:"currentColor",children:[x.jsx("path",{fill:"currentColor",d:"M8.142,7.507C8.094,7.506,8.048,7.5,8,7.5c-1.9,0-3.6,0.7-4.9,2.1L4.5,11 c0.798-0.886,1.912-1.357,3.06-1.457L8.142,7.507z"}),x.jsx("path",{fill:"currentColor",d:"M10.13,7.827L9.573,9.776c0.724,0.242,1.398,0.636,1.927,1.224l1.4-1.4 C12.11,8.749,11.171,8.161,10.13,7.827z"}),x.jsx("path",{fill:"currentColor",d:"M8.848,5.039l0.557-1.946C8.942,3.037,8.475,3,8,3C5,3,2.2,4.1,0,6.2l1.4,1.4C3.2,5.9,5.5,5,8,5 C8.286,5,8.568,5.015,8.848,5.039z"}),x.jsx("path",{fill:"currentColor",d:"M11.368,3.493l-0.55,1.924c1.4,0.428,2.684,1.186,3.781,2.283L16,6.2 C14.651,4.913,13.076,4.005,11.368,3.493z"}),x.jsx("path",{fill:"currentColor",d:"M6.001,16c-0.092,0-0.184-0.013-0.275-0.039c-0.531-0.152-0.839-0.705-0.688-1.236l4-14 c0.152-0.532,0.711-0.839,1.236-0.687c0.531,0.152,0.839,0.705,0.688,1.236l-4,14C6.836,15.714,6.436,16,6.001,16z"})]})]}),Ve={input:"w-full p-3 text-base bg-white border-2 border-zinc-300 rounded-lg text-black focus:border-black focus:outline-none ",inputSmall:"w-full p-2 text-sm bg-white border-2 border-zinc-300 rounded-lg text-black focus:border-black focus:outline-none ",label:"block mb-2 text-sm text-black  font-bold",labelSmall:"block mb-1 text-xs text-black  font-bold",buttonPrimary:"px-6 py-2 bg-transparent border-2 border-black text-black  font-bold rounded-lg hover:bg-black hover:text-white transition-all cursor-pointer",buttonDanger:"px-4 py-2 text-xs bg-transparent border-2 border-red-500 text-red-600 rounded-lg hover:bg-red-600 hover:text-white  font-bold transition-colors cursor-pointer",buttonGhost:"text-xs px-2 py-0.5 rounded border-2 bg-transparent text-zinc-500 border-zinc-400 hover:text-black hover:border-black  transition-colors cursor-pointer hover-shimmer",modalBackdrop:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",modalContent:"bg-white border-4 border-black rounded-xl p-4 sm:p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-lg",textSubtle:"text-xs text-zinc-500 "},H1=({value:n={},onChange:e,placeholder:t="Type city name (e.g. Boston, London, Tokyo)"})=>{const[s,l]=Q.useState(""),[o,c]=Q.useState([]),[f,d]=Q.useState(!1),h=Q.useRef(null),m=Q.useRef(null);Q.useEffect(()=>{const k=M=>{h.current&&!h.current.contains(M.target)&&c([])};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const y=async k=>{if(l(k),m.current&&clearTimeout(m.current),k.length<2){c([]),d(!1);return}m.current=setTimeout(async()=>{d(!0);try{const M=new AbortController,E=setTimeout(()=>M.abort(),15e3),C=await fetch(`/api/location/search?q=${encodeURIComponent(k)}&limit=20&use_api=false`,{signal:M.signal});clearTimeout(E);const z=await C.json();z.results?c(z.results):c([])}catch(M){M.name==="AbortError"?console.warn("Location search timed out"):(console.error("Error fetching locations:",M),c([]))}finally{d(!1)}},500)},b=k=>{const E={city_name:k.city||k.name,latitude:k.latitude,longitude:k.longitude,timezone:k.timezone,state:k.state,zipcode:k.zipcode};e(E),l(""),c([])},v=n&&n.city_name;return x.jsxs("div",{className:"space-y-3",ref:h,children:[x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"text",value:s,onChange:k=>y(k.target.value),placeholder:t,className:Ve.input,autoComplete:"off"}),f&&x.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:x.jsx("div",{className:"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin"})}),o.length>0&&x.jsx("ul",{className:"absolute w-full z-10 max-h-[300px] overflow-y-auto bg-white border-2 border-gray-300 border-t-0 rounded-b-lg shadow-lg list-none p-0 m-0",children:o.map(k=>x.jsx("li",{onClick:()=>b(k),className:"p-3 cursor-pointer border-b-2 border-gray-200 last:border-0 hover:bg-gray-50 transition-colors group",children:x.jsx("div",{className:"flex items-start justify-between",children:x.jsx("div",{className:"flex-1 min-w-0",children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("strong",{className:"text-black transition-colors",children:k.name}),k.state&&x.jsx("span",{className:"text-gray-500 text-xs",children:k.state}),k.zipcode&&x.jsxs("span",{className:"text-gray-500 text-xs",children:["(",k.zipcode,")"]}),k.population&&k.population>0&&x.jsx("span",{className:"text-xs text-gray-600",children:k.population>=1e6?`${(k.population/1e6).toFixed(1)}M`:k.population>=1e3?`${(k.population/1e3).toFixed(0)}K`:k.population}),k.country_code&&k.country_code!=="US"&&x.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-gray-100 text-gray-700 rounded border border-gray-300",children:k.country_code})]})})})},k.id))})]}),v?x.jsxs("div",{className:"bg-gray-50 border-2 border-gray-300 rounded-lg p-3 space-y-2",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:Ve.textSubtle,children:"City"}),x.jsxs("span",{className:"text-sm font-medium",children:[n.city_name,n.state&&`, ${n.state}`]})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:Ve.textSubtle,children:"Timezone"}),x.jsx("span",{className:"text-sm",children:n.timezone||"Not set"})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:Ve.textSubtle,children:"Coordinates"}),x.jsxs("span",{className:"text-sm",children:[n.latitude?.toFixed(4),", ",n.longitude?.toFixed(4)]})]})]}):x.jsx("p",{className:`${Ve.textSubtle} mt-1`,children:"Unless set, uses global location."})]})},eE=({searchTerm:n,searchResults:e,isSearching:t,handleSearch:s,selectLocation:l,settings:o,saveGlobalSettings:c,triggerAPMode:f,wifiStatus:d})=>{const h="w-full p-3 text-base border-2 border-gray-300 rounded-lg focus:outline-none box-border",m="block mb-2 font-bold",y=B1,[b,v]=Q.useState(null),[k,M]=Q.useState(""),[E,C]=Q.useState(""),[z,B]=Q.useState({type:"",message:""}),[ee,G]=Q.useState(!1),[F,q]=Q.useState(null),[se,fe]=Q.useState(!1),[Me,Ce]=Q.useState({type:"",message:""}),[Re,nt]=Q.useState(!1),[_e,Ie]=Q.useState(""),[I,te]=Q.useState(""),[he,De]=Q.useState(!1),[ke,N]=Q.useState(null),[Y,ie]=Q.useState(!1),[oe,be]=Q.useState(!1),[ve,Te]=Q.useState({type:"",message:""}),[Fe,Ge]=Q.useState(null),[Zt,tt]=Q.useState({stage:"",progress:0});Q.useEffect(()=>{const H=async()=>{try{const Z=await(await fetch("/api/system/time")).json();Z.datetime&&(v(Z),M(V=>V||Z.date),C(V=>V||Z.time.substring(0,5)))}catch(L){console.error("Error fetching system time:",L)}};H();const O=setInterval(H,3e4);return()=>clearInterval(O)},[]),Q.useEffect(()=>{if(o&&(o.timezone||o.city_name||o.time_sync_mode!==void 0)){const H=o.time_sync_mode||"manual";console.log("[TimeSync] Loading preference:",{syncMode:H,time_sync_mode:o.time_sync_mode}),G(H==="automatic")}},[o]),Q.useEffect(()=>{const H=async()=>{try{const Z=await(await fetch("/api/system/ssh/status")).json();q(Z)}catch(L){console.error("Error fetching SSH status:",L)}};H();const O=setInterval(H,3e4);return()=>clearInterval(O)},[]),Q.useEffect(()=>{(async()=>{try{const L=await(await fetch("/api/system/version")).json();L.version&&Ge(L.version)}catch(O){console.error("Error fetching current version:",O)}})()},[]);const $n=async()=>{if(!d?.connected){B({type:"error",message:"Internet connection required for automatic time sync"}),setTimeout(()=>B({type:"",message:""}),5e3);return}B({type:"",message:""});try{const O=await(await fetch("/api/system/time/sync",{method:"POST"})).json();if(O.success){B({type:"success",message:O.message||"Time synchronized successfully"});const Z=await(await fetch("/api/system/time")).json();Z.datetime&&(v(Z),M(Z.date),C(Z.time.substring(0,5)))}else B({type:"error",message:O.message||O.error||"Failed to sync time"})}catch(H){B({type:"error",message:"Error syncing time: "+H.message})}setTimeout(()=>B({type:"",message:""}),5e3)},P=async()=>{if(!k||!E){B({type:"error",message:"Please enter both date and time"}),setTimeout(()=>B({type:"",message:""}),5e3);return}const H=k.trim();if(!/^\d{4}-\d{2}-\d{2}$/.test(H)){B({type:"error",message:"Invalid date format. Please use YYYY-MM-DD format."}),setTimeout(()=>B({type:"",message:""}),5e3);return}let L=String(E||"").trim();if(!L||L.length===0){B({type:"error",message:"Please enter a valid time"}),setTimeout(()=>B({type:"",message:""}),5e3);return}const Z=/^(\d{1,2}):(\d{2})(:(\d{2}))?$/,V=L.match(Z);if(!V){console.error("Time validation failed:",{normalizedTime:L,original:E,type:typeof E,length:L.length,charCodes:L.split("").map(lt=>`${lt}(${lt.charCodeAt(0)})`)}),B({type:"error",message:`Invalid time format: "${L}". Please use HH:MM format (e.g., 14:30).`}),setTimeout(()=>B({type:"",message:""}),5e3);return}const le=V[1].padStart(2,"0"),re=V[2],X=V[4]||"00",de=parseInt(le,10),je=parseInt(re,10),ye=parseInt(X,10);if(isNaN(de)||de<0||de>23){B({type:"error",message:`Invalid hours: ${le}. Must be between 00 and 23.`}),setTimeout(()=>B({type:"",message:""}),5e3);return}if(isNaN(je)||je<0||je>59){B({type:"error",message:`Invalid minutes: ${re}. Must be between 00 and 59.`}),setTimeout(()=>B({type:"",message:""}),5e3);return}if(isNaN(ye)||ye<0||ye>59){B({type:"error",message:`Invalid seconds: ${X}. Must be between 00 and 59.`}),setTimeout(()=>B({type:"",message:""}),5e3);return}const ct=`${le}:${re}:${X}`;B({type:"",message:""});try{console.log("Setting time:",{date:H,time:ct});const lt=await fetch("/api/system/time",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:H,time:ct})});if(!lt.ok)throw new Error(`HTTP error! status: ${lt.status}`);const $t=await lt.json();$t.success?(B({type:"success",message:$t.message||"System time set successfully"}),G(!1),setTimeout(async()=>{try{const Nt=await(await fetch("/api/system/time")).json();Nt.datetime&&(v(Nt),M(Nt.date),C(Nt.time.substring(0,5)))}catch(cn){console.error("Error refreshing time:",cn)}},1e3)):B({type:"error",message:$t.message||$t.error||"Failed to set system time. The application may need sudo privileges."})}catch(lt){console.error("Error setting system time:",lt),B({type:"error",message:`Error setting system time: ${lt.message}. Make sure the backend is running and has proper permissions.`})}setTimeout(()=>B({type:"",message:""}),5e3)};return x.jsxs("div",{className:"space-y-4",children:[x.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:y[5]||y[0]},children:x.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[x.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Updates"}),x.jsx("p",{className:"text-sm text-gray-600 mb-4 ",children:"Check for software updates and keep your PC-1 running the latest version."}),Fe&&x.jsxs("div",{className:"mb-4 text-sm",children:[x.jsx("span",{className:"text-gray-600 font-bold",children:"Current Version: "}),x.jsx("span",{className:"font-mono font-bold text-black",children:Fe})]}),ke&&!oe&&x.jsxs("div",{className:`mb-4 p-3 rounded-lg text-sm ${ke.up_to_date?"bg-gray-100 text-black":"bg-white text-black border-2 border-gray-300 border-dashed"}`,children:[x.jsx("div",{className:"font-bold mb-1",children:ke.message}),x.jsx("div",{className:"text-xs text-gray-600 mt-1",children:ke.up_to_date?x.jsxs(x.Fragment,{children:["Current version: ",x.jsx("span",{className:"font-mono",children:ke.current_version||"unknown"})]}):x.jsxs(x.Fragment,{children:["Current: ",x.jsx("span",{className:"font-mono",children:ke.current_version||"unknown"}),"  Latest: ",x.jsx("span",{className:"font-mono",children:ke.latest_version||"unknown"}),ke.commits_behind>0&&x.jsxs(x.Fragment,{children:[" (",ke.commits_behind," ",ke.commits_behind===1?"update":"updates",")"]})]})})]}),ve.message&&!oe&&ve.type==="error"&&x.jsxs("div",{className:"mb-4 p-3 rounded-lg text-sm border-2 bg-white text-black border-black border-dashed",children:[x.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),ve.message]}),oe&&x.jsxs("div",{className:"mb-4 p-4 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("span",{className:"text-sm font-bold text-black",children:Zt.stage||"Installing update..."}),x.jsxs("span",{className:"text-xs text-gray-600 font-mono",children:[Zt.progress,"%"]})]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:x.jsx("div",{className:"bg-black h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:`${Zt.progress}%`}})})]}),!oe&&x.jsxs("div",{className:"flex gap-3",children:[x.jsx(Xi,{onClick:async()=>{ie(!0),Te({type:"",message:""});try{const O=await(await fetch("/api/system/updates/check")).json();N(O),O.error&&(Te({type:"error",message:O.error}),setTimeout(()=>Te({type:"",message:""}),5e3))}catch{Te({type:"error",message:"Could not check for updates. Check your internet connection."}),setTimeout(()=>Te({type:"",message:""}),5e3)}finally{ie(!1)}},disabled:Y,loading:Y,className:"flex-1",children:"Check for Updates"}),ke&&ke.available&&!oe&&x.jsx(Xi,{onClick:async()=>{if(!confirm("Install the update now? The device will restart automatically. The page will refresh automatically once the update is complete."))return;be(!0),Te({type:"",message:""}),tt({stage:"Installing update...",progress:10});try{const O=setInterval(()=>{tt(V=>V.progress<50?{...V,progress:Math.min(V.progress+2,50)}:V)},500),L=await fetch("/api/system/updates/install",{method:"POST"});clearInterval(O),tt({stage:"Update installed! Restarting service...",progress:60});const Z=await L.json();if(Z.success)tt({stage:"Service restarting...",progress:70}),N(null);else{tt({stage:"",progress:0}),Te({type:"error",message:Z.error||Z.message||"Update failed. Please try again."}),be(!1);return}}catch{tt({stage:"Service restarting...",progress:70}),N(null)}const H=setTimeout(()=>{window.location.reload()},45e3);setTimeout(()=>{tt({stage:"Waiting for service to restart...",progress:75});let O=0;const L=30,Z=async()=>{O++;const V=Math.min(75+Math.floor(O/L*20),95);tt({stage:"Waiting for service to restart...",progress:V});const le=new AbortController,re=setTimeout(()=>le.abort(),2e3);try{const X=await fetch("/api/health",{method:"GET",signal:le.signal});if(clearTimeout(re),X.ok){tt({stage:"Service ready! Reloading page...",progress:100}),clearTimeout(H),setTimeout(()=>window.location.reload(),500);return}else O<L?setTimeout(Z,1e3):(tt({stage:"Reloading page...",progress:100}),clearTimeout(H),setTimeout(()=>window.location.reload(),500))}catch{clearTimeout(re),O<L?setTimeout(Z,1e3):(tt({stage:"Reloading page...",progress:100}),clearTimeout(H),setTimeout(()=>window.location.reload(),500))}};Z()},5e3)},disabled:oe,className:"flex-1",children:"Install Update"})]})]})}),d&&x.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:y[0]},children:x.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[x.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Network"}),x.jsx("div",{className:"flex items-center justify-between",children:x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[d.connected?x.jsx(Zi,{className:"w-4 h-4",style:{color:"var(--color-text-muted)"}}):x.jsx(xc,{className:"w-4 h-4",style:{color:"var(--color-error)"}}),x.jsx("span",{className:"font-bold text-black ",children:d.connected&&d.ssid?d.ssid:d.mode==="ap"?"Setup Mode (AP)":"Not Connected"}),x.jsx("button",{type:"button",onClick:f,className:"text-xs underline ml-2 cursor-pointer font-bold",style:{color:"var(--color-brass)"},onMouseEnter:H=>H.currentTarget.style.color="var(--color-text-main)",onMouseLeave:H=>H.currentTarget.style.color="var(--color-brass)",children:"Reset WiFi"})]}),d.connected&&d.ip&&x.jsxs("div",{className:"text-xs text-gray-600 mt-1 ",children:["IP: ",d.ip]})]})})]})}),x.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:y[1]},children:x.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[x.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Time Settings"}),x.jsxs("div",{className:"mb-4",children:[x.jsx("label",{className:"block mb-2 text-sm text-gray-600  font-bold",children:"Time Format"}),x.jsxs("select",{value:o.time_format||"12h",onChange:H=>c({time_format:H.target.value}),className:h,children:[x.jsx("option",{value:"12h",children:"12-hour (3:45 PM)"}),x.jsx("option",{value:"24h",children:"24-hour (15:45)"})]}),x.jsx("p",{className:"text-xs text-gray-600 mt-1 ",children:"Choose how times are displayed across all modules"})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("label",{className:"block mb-3 text-sm font-medium text-black  font-bold",children:"Set Time"}),x.jsxs("div",{className:"flex gap-0 mb-0",children:[x.jsxs("label",{className:`relative flex flex-col items-center px-4 py-2 border-t-2 border-l-2 border-r-2 cursor-pointer transition-all rounded-tl-lg ${ee?"border-gray-300 border-b-2 border-b-black bg-white hover:border-black z-0":"border-black border-b-0 bg-white z-10"}`,children:[x.jsx("input",{type:"radio",name:"timeMode",checked:!ee,onChange:async()=>{console.log("[TimeSync] Switching to manual mode"),G(!1),c({time_sync_mode:"manual"});try{await fetch("/api/system/time/sync/disable",{method:"POST"}).catch(()=>{})}catch{}b&&(!k&&b.date&&M(b.date),!E&&b.time&&C(b.time.substring(0,5)))},className:"sr-only"}),x.jsx("span",{className:`text-sm font-medium  ${ee?"text-gray-600":"text-black font-bold"}`,children:"Manual"})]}),x.jsxs("label",{className:`relative flex flex-col items-center px-4 py-2 border-t-2 border-l-2 border-r-2 cursor-pointer transition-all rounded-tr-lg ${ee?"border-black border-b-0 bg-white z-10":"border-gray-300 border-b-2 border-b-black bg-white hover:border-black z-0"}`,children:[x.jsx("input",{type:"radio",name:"timeMode",checked:ee,onChange:()=>{console.log("[TimeSync] Switching to automatic mode"),G(!0),c({time_sync_mode:"automatic"}),d?.connected&&$n()},className:"sr-only"}),x.jsxs("div",{className:"flex items-baseline justify-center gap-1.5",children:[x.jsx(Zi,{className:`w-3 h-3 flex-shrink-0 ${ee?"text-black":"text-gray-600"}`,style:{transform:"translateY(0.125rem)"}}),x.jsx("span",{className:`text-sm font-medium  ${ee?"text-black font-bold":"text-gray-600"}`,children:"Automatic"})]})]})]}),ee&&x.jsx("div",{className:"p-4 border-2 border-black rounded-b-lg -mt-[2px]",children:d?.connected?x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-bold text-black mb-2 ",children:"Time Set Automatically"}),b&&x.jsxs("div",{className:"p-3 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[x.jsx("div",{className:"text-xs text-gray-600 mb-1 uppercase font-bold",children:"Current Time"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("div",{className:"text-lg font-bold text-black",children:[b.date," ",Ch(b.time,o.time_format||"12h")]}),x.jsx(Zi,{className:"w-3.5 h-3.5",style:{color:"var(--color-text-muted)"}})]})]})]}):x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-bold text-black mb-2 ",children:"Not Syncing"}),x.jsx("p",{className:"text-sm text-yellow-700 mb-3 ",children:"Internet connection required for automatic time synchronization. Connect to WiFi or use manual mode."}),b&&x.jsxs("div",{className:"p-3 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[x.jsx("div",{className:"text-xs text-gray-600 mb-1 uppercase font-bold",children:"Current Time"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("div",{className:"text-lg font-bold text-black",children:[b.date," ",Ch(b.time,o.time_format||"12h")]}),x.jsx(xc,{className:"w-3.5 h-3.5",style:{color:"var(--color-error)"}})]})]})]})}),!ee&&x.jsxs("div",{className:"p-4 border-2 border-black rounded-b-lg -mt-[2px]",children:[x.jsxs("div",{className:"grid grid-cols-1 min-[340px]:grid-cols-2 gap-3 mb-3",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Date"}),x.jsx("input",{type:"date",value:k,onChange:H=>M(H.target.value),className:"w-full py-3 px-2 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border "})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Time"}),x.jsx("input",{type:"time",value:E||"",onChange:H=>{const O=H.target.value;C(O),console.log("Time input changed:",O,"Type:",typeof O)},className:"w-full py-3 px-2 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border ",step:"1",required:!0})]})]}),x.jsx(Xi,{onClick:P,className:"w-full",children:"Set System Time"}),x.jsx("p",{className:"text-xs text-gray-600 mt-2 text-center ",children:"Use this when offline or to set a specific time"})]}),z.message&&x.jsxs("div",{className:`mt-4 p-3 rounded-lg text-sm  border-2 ${z.type==="success"?"bg-gray-100 text-black border-black":"bg-white text-black border-black border-dashed"}`,children:[z.type==="error"&&x.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),z.message]})]})]})}),x.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:y[2]},children:x.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[x.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Location"}),x.jsxs("div",{className:"mb-4",children:[x.jsx("label",{className:"block mb-2 text-sm text-gray-600 font-bold",children:"Set Location"}),x.jsx(H1,{value:o,onChange:H=>c(H)})]})]})}),x.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:y[3]},children:x.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[x.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Printer Settings"}),x.jsxs("div",{children:[x.jsx("label",{className:m,children:"Maximum Print Lines"}),x.jsx("input",{type:"number",min:"0",max:"1000",value:o.max_print_lines??200,onChange:H=>c({max_print_lines:parseInt(H.target.value)||0}),className:h}),x.jsx("p",{className:"text-xs text-gray-600 mt-1 ",children:"Maximum lines per print job to prevent endless prints. Set to 0 for no limit (default: 200)"})]})]})}),x.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:y[4]},children:x.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[x.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"SSH Access"}),x.jsx("p",{className:"text-sm text-gray-600 mb-4 ",children:"Manage SSH (Secure Shell) access to your PC-1 device. SSH allows advanced users to access the device via command line."}),F&&F.available?x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("span",{className:"text-sm font-medium text-black  font-bold",children:"SSH Service"}),x.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium  border-2 ${F.enabled&&F.active?"bg-white text-black border-black":F.enabled?"bg-gray-200 text-black border-gray-400":"bg-white text-gray-500 border-gray-300"}`,children:F.enabled&&F.active?"Enabled & Active":F.enabled?"Enabled":F.active?"Active":"Disabled"})]}),F.username&&x.jsxs("p",{className:"text-xs text-gray-600 mt-1 ",children:["Username: ",x.jsx("span",{className:"text-black ",children:F.username})]}),F.enabled&&x.jsxs("p",{className:"text-xs text-gray-600 mt-1 ",children:["Connect via: ",x.jsxs("span",{className:"text-black ",children:["ssh ",F.username||"admin","@pc-1.local"]})]})]}),x.jsxs("div",{className:"flex gap-3",children:[F.enabled?x.jsx("button",{type:"button",onClick:async()=>{if(confirm("Are you sure you want to disable SSH? You may lose remote access to the device.")){fe(!0),Ce({type:"",message:""});try{const O=await(await fetch("/api/system/ssh/disable",{method:"POST"})).json();if(O.success){Ce({type:"success",message:O.message});const Z=await(await fetch("/api/system/ssh/status")).json();q(Z)}else Ce({type:"error",message:O.message||"Failed to disable SSH"})}catch{Ce({type:"error",message:"Error disabling SSH"})}finally{fe(!1),setTimeout(()=>Ce({type:"",message:""}),5e3)}}},disabled:se,className:"flex-1 py-2.5 px-4 bg-transparent border-0 rounded-lg transition-all cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed font-bold",style:{color:"var(--color-error-light)"},onMouseEnter:H=>{se||(H.currentTarget.style.color="var(--color-error)")},onMouseLeave:H=>{se||(H.currentTarget.style.color="var(--color-error-light)")},children:se?"Disabling...":"Disable SSH"}):x.jsx("button",{type:"button",onClick:async()=>{fe(!0),Ce({type:"",message:""});try{const O=await(await fetch("/api/system/ssh/enable",{method:"POST"})).json();if(O.success){Ce({type:"success",message:O.message});const Z=await(await fetch("/api/system/ssh/status")).json();q(Z)}else Ce({type:"error",message:O.message||"Failed to enable SSH"})}catch{Ce({type:"error",message:"Error enabling SSH"})}finally{fe(!1),setTimeout(()=>Ce({type:"",message:""}),5e3)}},disabled:se,className:"flex-1 py-2.5 px-4 bg-transparent border-2 border-black text-black disabled:border-gray-300 disabled:text-gray-400 disabled:cursor-not-allowed rounded-lg  font-bold hover:bg-black hover:text-white transition-all cursor-pointer",children:se?"Enabling...":"Enable SSH"}),F.enabled&&x.jsx("button",{type:"button",onClick:()=>nt(!Re),className:"flex-1 py-2.5 px-4 bg-transparent border-2 border-gray-400 text-black rounded-lg  font-bold hover:border-black hover:bg-white transition-all cursor-pointer",children:Re?"Cancel":"Change Password"})]}),Re&&F.enabled&&x.jsxs("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:[x.jsx("h4",{className:"text-sm font-medium text-black mb-3  font-bold",children:"Change SSH Password"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"New Password"}),x.jsx("input",{type:"password",value:_e,onChange:H=>Ie(H.target.value),placeholder:"Minimum 8 characters",className:h,minLength:8})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Confirm Password"}),x.jsx("input",{type:"password",value:I,onChange:H=>te(H.target.value),placeholder:"Re-enter password",className:h,minLength:8})]}),x.jsx(Xi,{onClick:async()=>{if(!_e||_e.length<8){Ce({type:"error",message:"Password must be at least 8 characters"}),setTimeout(()=>Ce({type:"",message:""}),5e3);return}if(_e!==I){Ce({type:"error",message:"Passwords do not match"}),setTimeout(()=>Ce({type:"",message:""}),5e3);return}De(!0),Ce({type:"",message:""});try{const O=await(await fetch("/api/system/ssh/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({new_password:_e})})).json();O.success?(Ce({type:"success",message:O.message}),Ie(""),te(""),nt(!1)):Ce({type:"error",message:O.message||"Failed to change password"})}catch{Ce({type:"error",message:"Error changing password"})}finally{De(!1),setTimeout(()=>Ce({type:"",message:""}),5e3)}},disabled:he||!_e||!I,loading:he,className:"w-full",children:"Change Password"})]})]}),Me.message&&x.jsxs("div",{className:`p-3 rounded-lg text-sm  border-2 ${Me.type==="success"?"bg-gray-100 text-black border-black":"bg-white text-black border-black border-dashed"}`,children:[Me.type==="error"&&x.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),Me.message]})]}):x.jsx("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:x.jsx("p",{className:"text-sm text-gray-500 ",children:"SSH isn't available in testing mode"})})]})})]})},tE=[{id:"news",label:"News API",offline:!1,icon:"newspaper"},{id:"weather",label:"Weather",offline:!1,icon:"cloud-sun"}];let Wr=null,Yd=null;function zo(){const[n,e]=Q.useState(Wr||[]),[t,s]=Q.useState(!Wr),[l,o]=Q.useState(null);return Q.useEffect(()=>{if(Wr){e(Wr),s(!1);return}Yd||(Yd=fetch("/api/module-types").then(c=>{if(!c.ok)throw new Error("Failed to load module types");return c.json()}).then(c=>(Wr=c.moduleTypes||[],Wr)).catch(c=>(console.error("Error loading module types:",c),Wr=tE,Wr))),Yd.then(c=>{e(c),s(!1)})},[]),{moduleTypes:n,loading:t,error:l}}const Kd=({className:n,title:e="print",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsxs("g",{fill:"currentColor",children:[x.jsx("polyline",{fill:"none",points:"3.5 3.5 3.5 0.5 12.5 0.5 12.5 3.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),x.jsx("path",{d:"M3.5,12.5H.5v-4a3,3,0,0,1,3-3h9a3,3,0,0,1,3,3v4h-3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),x.jsx("rect",{height:"6",width:"9",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"3.5",y:"9.5"})]})]}),nE=({className:n,title:e="schedule",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsxs("g",{fill:"currentColor",children:[x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"11.5",x2:"15.5",y1:"0.5",y2:"4.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"7",x2:"7",y1:"5.5",y2:"8.5"}),x.jsx("circle",{cx:"7",cy:"9",fill:"none",r:"6.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),Pd=({className:n,title:e="arrow up",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsx("g",{fill:"currentColor",children:x.jsx("polyline",{fill:"none",points:"15.5,10.5 8,5.5 0.5,10.5 ",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),Jd=({className:n,title:e="arrow down",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsx("g",{fill:"currentColor",children:x.jsx("polyline",{fill:"none",points:"15.5,5.5 8,10.5 0.5,5.5 ",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),rE=({settings:n,modules:e,triggerChannelPrint:t,triggerModulePrint:s,setShowScheduleModal:l,swapChannels:o,setShowEditModuleModal:c,setEditingModule:f,moveModuleInChannel:d,assignModuleToChannel:h,reorderChannelModules:m,removeModuleFromChannel:y,setShowAddModuleModal:b,setShowCreateUnassignedModal:v,wifiStatus:k})=>{const{moduleTypes:M}=zo(),E=Q.useRef({}),C=Q.useRef(null),z=Q.useRef(!1),B=Q.useRef(null),[ee,G]=Q.useState(null),[F,q]=Q.useState(null),se=Q.useRef(null),fe=Q.useRef(new Map),Me=P=>typeof P=="string"&&P.trim().length>0,Ce=P=>{const H=P?.config||{};switch(P?.type){case"news":return Me(H.news_api_key);case"rss":return Array.isArray(H.rss_feeds)&&H.rss_feeds.some(O=>Me(String(O||"")));case"email":return Me(H.email_user)&&Me(H.email_password);case"calendar":return Array.isArray(H.ical_sources)&&H.ical_sources.some(O=>Me(O?.url));case"webhook":return Me(H.url);case"text":return Me(H.content);case"weather":return Me(H.city_name)||Me(n?.city_name);default:return!0}},Re=P=>`channel:${P}`,nt=P=>{if(P==="unassigned")return{type:"unassigned"};if(P?.startsWith("channel:")){const H=Number(P.split(":")[1]);if(Number.isFinite(H))return{type:"channel",position:H}}return null},_e=P=>{const H={};return P.forEach((O,L)=>{H[O]=L}),H},Ie=(P,H,O)=>{const L=[...P],[Z]=L.splice(H,1);return L.splice(O,0,Z),L},I=P=>{q(H=>P?H&&H.listId===P.listId&&H.index===P.index&&Math.abs(H.top-P.top)<1?H:P:H&&null),se.current=P,P?.listId&&fe.current.set(P.listId,P)},te=(P,H)=>{const O=E.current[P];if(!O)return null;const L=Array.from(O.querySelectorAll('[data-dnd-item="true"]')),Z=O.getBoundingClientRect();if(L.length===0)return{listId:P,index:0,top:Math.max(8,Math.floor(Z.height/2))};let V=L.length;for(let X=0;X<L.length;X+=1){const de=L[X].getBoundingClientRect(),je=de.top+de.height/2;if(H<je){V=X;break}}let le;if(V===0){const X=L[0].getBoundingClientRect(),de=Math.max(0,X.top-Z.top);le=X.top-Z.top-de/2}else if(V>=L.length){const X=L[L.length-1].getBoundingClientRect(),de=Math.max(0,Z.bottom-X.bottom);le=X.bottom-Z.top+de/2-1}else{const X=L[V-1].getBoundingClientRect(),de=L[V].getBoundingClientRect(),je=Math.max(0,de.top-X.bottom);le=X.bottom-Z.top+je/2-1}const re=Math.max(6,Math.min(le,Z.height-6));return{listId:P,index:V,top:re}},he=(P,H)=>{if(P.target.closest('[data-no-drag="true"]')){P.preventDefault();return}const O=P.currentTarget?.getBoundingClientRect?.();H.itemHeight=O?.height||44,z.current=!0,P.dataTransfer.effectAllowed="move",P.dataTransfer.setData("text/plain",H.moduleId),C.current=H,G(H)},De=(P,H)=>{if(!C.current||(P.preventDefault(),B.current))return;const O=P.clientY;B.current=requestAnimationFrame(()=>{B.current=null;const L=te(H,O);I(L)})},ke=(P,H)=>{P.currentTarget.contains(P.relatedTarget)},N=()=>{B.current&&(cancelAnimationFrame(B.current),B.current=null),q(null),G(null),C.current=null,se.current=null,fe.current.clear(),setTimeout(()=>{z.current=!1},0)},Y=P=>{const H=nt(P);return H?H.type==="unassigned"?tt.map(O=>O.id):(be[H.position]||[]).map(O=>O.module_id):[]},ie=(P,H)=>{z.current||(c(P),f(JSON.parse(JSON.stringify(H))))},oe=(P,H)=>{P.preventDefault();const O=C.current;if(!O)return;const Z=fe.current.get(H)||te(H,P.clientY)||F,V=Z?Z.index:0,le=O.listId,re=nt(le),X=nt(H);if(!re||!X){N();return}if(le===H){const de=Y(le),je=de.indexOf(O.moduleId);if(je===-1){N();return}let ye=V;if(ye>je&&(ye-=1),ye===je){N();return}const ct=Ie(de,je,ye);re.type==="unassigned"?Fe(ct):m(re.position,_e(ct),{optimistic:!0}),N();return}if(re.type==="unassigned"&&X.type==="channel"){const de=Y(H),je=Math.max(0,Math.min(V,de.length)),ye=[...de];ye.splice(je,0,O.moduleId),Fe(ct=>ct.filter(lt=>lt!==O.moduleId)),N(),(async()=>await h(X.position,O.moduleId,je,{silent:!0,optimistic:!0})&&await m(X.position,_e(ye),{optimistic:!0}))();return}if(re.type==="channel"&&X.type==="unassigned"){const de=Math.max(0,Math.min(V,tt.length));Fe(je=>{const ye=je.filter(ct=>ct!==O.moduleId);return ye.splice(de,0,O.moduleId),ye}),y(re.position,O.moduleId,{silent:!0,optimistic:!0}),N();return}if(re.type==="channel"&&X.type==="channel"){const de=Y(H),je=Math.max(0,Math.min(V,de.length)),ye=[...de];ye.splice(je,0,O.moduleId),N(),(async()=>!await y(re.position,O.moduleId,{silent:!0,optimistic:!0})||!await h(X.position,O.moduleId,je,{silent:!0,optimistic:!0})||await m(X.position,_e(ye),{optimistic:!0}))();return}N()},be=Q.useMemo(()=>{const P={};for(let H=1;H<=8;H+=1){const L=((n.channels?.[H]||{modules:[]}).modules||[]).map(Z=>({...Z,module:e[Z.module_id]})).filter(Z=>Z.module).sort((Z,V)=>Z.order-V.order);P[H]=L}return P},[e,n.channels]),ve=Q.useMemo(()=>{const P=new Set;return Object.values(n.channels||{}).forEach(H=>{(H.modules||[]).forEach(O=>{P.add(O.module_id)})}),Object.values(e||{}).filter(H=>!P.has(H.id))},[e,n.channels]),[Te,Fe]=Q.useState([]),Ge=Q.useMemo(()=>ve.map(P=>P.id),[ve]),Zt=Q.useMemo(()=>new Set(Ge),[Ge]);Q.useEffect(()=>{Fe(P=>{const H=new Set(Ge),O=P.filter(V=>H.has(V)),L=new Set(O),Z=Ge.filter(V=>!L.has(V));return Z.length===0&&O.length===P.length?P:[...O,...Z]})},[Ge]);const tt=Te.filter(P=>Zt.has(P)).map(P=>e[P]).filter(Boolean),$n=(P,H)=>{const O=Te.findIndex(Z=>Z===P);if(O===-1)return;const L=[...Te];H==="up"&&O>0?([L[O],L[O-1]]=[L[O-1],L[O]],Fe(L)):H==="down"&&O<L.length-1&&([L[O],L[O+1]]=[L[O+1],L[O]],Fe(L))};return x.jsxs("div",{className:"space-y-4",children:[x.jsx("div",{className:"space-y-4",children:[1,2,3,4,5,6,7,8].map(P=>{const H=n.channels?.[P]||{},O=be[P]||[],L=Re(P),Z=B1;return x.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:Z[P-1]},children:x.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col h-full",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3 gap-4",children:[x.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto",children:[x.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight",children:P}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{type:"button",onClick:()=>t(P),className:"group flex items-center justify-center px-2 py-1 rounded border-2 bg-transparent border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer",title:"Print Channel",children:x.jsx(Kd,{className:"w-3.5 h-3.5 text-gray-400 group-hover:text-black transition-all"})}),x.jsxs("button",{type:"button",onClick:()=>l(P),className:`group flex items-center gap-1 px-2 py-1 rounded border-2 transition-all cursor-pointer ${H.schedule&&H.schedule.length>0?"bg-transparent shadow-sm":"bg-transparent border-gray-300 hover:border-black hover:bg-white"}`,style:H.schedule&&H.schedule.length>0?{color:"var(--color-brass)",borderColor:"var(--color-brass)"}:{},onMouseEnter:V=>{H.schedule&&H.schedule.length>0&&(V.currentTarget.style.backgroundColor="var(--color-brass-10)")},onMouseLeave:V=>{H.schedule&&H.schedule.length>0&&(V.currentTarget.style.backgroundColor="transparent")},title:"Configure Schedule",children:[x.jsx(nE,{className:`w-3.5 h-3.5 transition-all ${H.schedule?.length>0?"":"text-gray-400 group-hover:text-black"}`,style:H.schedule?.length>0?{color:"var(--color-brass)"}:{}}),x.jsx("span",{className:`text-xs font-bold ${H.schedule?.length>0?"":"text-gray-400 group-hover:text-black"}`,style:H.schedule?.length>0?{color:"var(--color-brass)"}:{},children:H.schedule?.length||0})]})]})]}),x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{type:"button",onClick:V=>{V.preventDefault(),o(P,P-1)},disabled:P===1,className:"px-2 py-1 text-xs  border-2 border-gray-300 hover:border-black rounded text-gray-600 hover:text-black transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer hover:bg-white",title:"Move channel up",children:x.jsx(Pd,{className:"w-3 h-3"})}),x.jsx("button",{type:"button",onClick:V=>{V.preventDefault(),o(P,P+1)},disabled:P===8,className:"px-2 py-1 text-xs  border-2 border-gray-300 hover:border-black rounded text-gray-600 hover:text-black transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer hover:bg-white",title:"Move channel down",children:x.jsx(Jd,{className:"w-3 h-3"})})]})]}),x.jsxs("div",{ref:V=>{E.current[L]=V},onDragOver:V=>De(V,L),onDragLeave:V=>ke(V),onDrop:V=>oe(V,L),"data-drop-active":F?.listId===L,className:"space-y-2 mb-2 flex-grow min-h-[36px] dnd-list",role:"list",children:[O.map((V,le)=>x.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border-2 border-gray-600 hover:border-black group transition-all dnd-item cursor-pointer",style:{backgroundColor:"var(--color-bg-card)"},onMouseEnter:re=>re.currentTarget.style.setProperty("background-color","var(--color-bg-white)","important"),onMouseLeave:re=>re.currentTarget.style.setProperty("background-color","var(--color-bg-card)","important"),onClick:()=>ie(V.module_id,e[V.module_id]),onDragOver:re=>De(re,L),onDrop:re=>oe(re,L),draggable:!0,"data-dnd-item":"true","data-dragging":ee?.moduleId===V.module_id?"true":"false",onDragStart:re=>he(re,{moduleId:V.module_id,listId:L,index:le}),onDragEnd:N,role:"listitem",children:[x.jsx("div",{className:"flex-1 min-w-0 mr-2",children:(()=>{const re=M.find($t=>$t.id===V.module.type),X=re?!re.offline:!1,de=Ce(V.module),ye=X&&!de,ct=k?.connected;let lt="var(--color-text-muted)";return ct?ye&&(lt="var(--color-brass)"):lt="var(--color-error)",x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"text-sm font-bold text-gray-700 group-hover:text-black  truncate transition-colors",children:V.module.name}),x.jsxs("div",{className:`text-[10px]  truncate flex items-baseline gap-1 ${ye?"":"text-gray-700"}`,style:ye?{color:"var(--color-brass)"}:{},children:[X&&(ct?x.jsx(Zi,{className:"w-2.5 h-2.5 flex-shrink-0 group-hover:text-black transition-colors",style:{transform:"translateY(0.125rem)",color:lt}}):x.jsx(xc,{className:"w-2.5 h-2.5 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-error)"}})),x.jsx("span",{className:"truncate font-mono group-hover:text-black transition-colors",style:{color:"var(--color-text-muted)"},children:re?.label?.toUpperCase()})]})]})})()}),x.jsxs("div",{className:"flex gap-2 items-center",onClick:re=>re.stopPropagation(),"data-no-drag":"true",children:[x.jsx("button",{type:"button",onClick:()=>s(V.module_id),className:"px-1.5 py-1 rounded border border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer",title:"Print this module",children:x.jsx(Kd,{className:"w-3 h-3 text-gray-400 hover:text-black transition-colors"})}),x.jsxs("div",{className:"flex flex-col gap-0.5",children:[x.jsx("button",{type:"button",onClick:()=>d(P,V.module_id,"up"),disabled:le===0,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:re=>{const X=re.currentTarget.querySelector("svg");X&&(X.style.color="var(--color-text-main)")},onMouseLeave:re=>{const X=re.currentTarget.querySelector("svg");X&&(X.style.color="var(--color-text-muted)")},children:x.jsx(Pd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})}),x.jsx("button",{type:"button",onClick:()=>d(P,V.module_id,"down"),disabled:le===O.length-1,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:re=>{const X=re.currentTarget.querySelector("svg");X&&(X.style.color="var(--color-text-main)")},onMouseLeave:re=>{const X=re.currentTarget.querySelector("svg");X&&(X.style.color="var(--color-text-muted)")},children:x.jsx(Jd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})})]})]})]},V.module_id)),F?.listId===L&&x.jsx("div",{className:"dnd-indicator",style:{top:F.top}})]}),x.jsx("div",{className:"mt-auto",children:x.jsx("button",{type:"button",onClick:()=>b(P),onDragOver:V=>De(V,L),onDrop:V=>oe(V,L),className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs  font-bold tracking-wider cursor-pointer",style:{backgroundColor:"transparent"},onMouseEnter:V=>V.currentTarget.style.backgroundColor="var(--color-bg-white)",onMouseLeave:V=>V.currentTarget.style.backgroundColor="transparent",title:"Add a module to this channel",children:"+ ADD MODULE"})})]})},P)})}),x.jsxs("div",{className:"mt-8",children:[x.jsx("h3",{className:"text-lg font-bold text-black mb-4 tracking-tight border-b-2 border-dashed border-gray-300 pb-2",children:"UNASSIGNED MODULES"}),x.jsxs("div",{ref:P=>{E.current.unassigned=P},onDragOver:P=>De(P,"unassigned"),onDragLeave:P=>ke(P),onDrop:P=>oe(P,"unassigned"),"data-drop-active":F?.listId==="unassigned",className:"space-y-2 min-h-[36px] dnd-list",role:"list",children:[tt.length===0?x.jsx("div",{className:"text-sm text-gray-500 italic py-4",children:"No unassigned modules. Create a module below or assign existing modules to channels."}):tt.map((P,H)=>{const O=M.find(X=>X.id===P.type),L=O?!O.offline:!1,Z=Ce(P),V=L&&!Z,le=k?.connected;let re="var(--color-text-muted)";return le?V&&(re="var(--color-brass)"):re="var(--color-error)",x.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border-2 border-gray-300 hover:border-black group transition-all dnd-item cursor-pointer",style:{backgroundColor:"var(--color-bg-card)"},onMouseEnter:X=>X.currentTarget.style.setProperty("background-color","var(--color-bg-white)","important"),onMouseLeave:X=>X.currentTarget.style.setProperty("background-color","var(--color-bg-card)","important"),onClick:()=>ie(P.id,P),onDragOver:X=>De(X,"unassigned"),onDrop:X=>oe(X,"unassigned"),draggable:!0,"data-dnd-item":"true","data-dragging":ee?.moduleId===P.id?"true":"false",onDragStart:X=>he(X,{moduleId:P.id,listId:"unassigned",index:H}),onDragEnd:N,role:"listitem",children:[x.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[x.jsx("div",{className:"text-sm font-bold text-gray-700 group-hover:text-black truncate transition-colors",children:P.name}),x.jsxs("div",{className:`text-[10px] truncate flex items-baseline gap-1 ${V?"":"text-gray-700"}`,style:V?{color:"var(--color-brass)"}:{},children:[L&&(le?x.jsx(Zi,{className:"w-2.5 h-2.5 flex-shrink-0 group-hover:text-black transition-colors",style:{transform:"translateY(0.125rem)",color:re}}):x.jsx(xc,{className:"w-2.5 h-2.5 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-error)"}})),x.jsx("span",{className:"truncate font-mono group-hover:text-black transition-colors",style:{color:"var(--color-text-muted)"},children:O?.label?.toUpperCase()})]})]}),x.jsxs("div",{className:"flex gap-2 items-center",onClick:X=>X.stopPropagation(),"data-no-drag":"true",children:[x.jsx("button",{type:"button",onClick:()=>s(P.id),className:"px-1.5 py-1 rounded border border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer",title:"Print this module",children:x.jsx(Kd,{className:"w-3 h-3 text-gray-400 hover:text-black transition-colors"})}),x.jsxs("div",{className:"flex flex-col gap-0.5",children:[x.jsx("button",{type:"button",onClick:()=>$n(P.id,"up"),disabled:tt.findIndex(X=>X.id===P.id)===0,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:X=>{const de=X.currentTarget.querySelector("svg");de&&(de.style.color="var(--color-text-main)")},onMouseLeave:X=>{const de=X.currentTarget.querySelector("svg");de&&(de.style.color="var(--color-text-muted)")},children:x.jsx(Pd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})}),x.jsx("button",{type:"button",onClick:()=>$n(P.id,"down"),disabled:tt.findIndex(X=>X.id===P.id)===tt.length-1,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:X=>{const de=X.currentTarget.querySelector("svg");de&&(de.style.color="var(--color-text-main)")},onMouseLeave:X=>{const de=X.currentTarget.querySelector("svg");de&&(de.style.color="var(--color-text-muted)")},children:x.jsx(Jd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})})]})]})]},P.id)}),F?.listId==="unassigned"&&x.jsx("div",{className:"dnd-indicator",style:{top:F.top}})]}),x.jsx("div",{className:"mt-4",children:x.jsx("button",{type:"button",onClick:()=>{v&&v(!0)},className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs font-bold tracking-wider cursor-pointer",style:{backgroundColor:"transparent"},onMouseEnter:P=>P.currentTarget.style.backgroundColor="var(--color-bg-white)",onMouseLeave:P=>P.currentTarget.style.backgroundColor="transparent",title:"Add a new unassigned module",children:"+ ADD MODULE"})})]})]})},lp=({onClick:n,className:e="",...t})=>x.jsx("button",{onClick:n,className:`text-gray-500 hover:text-black text-2xl cursor-pointer hover-shimmer ${e}`,type:"button",...t,children:""}),W0=({channelPosition:n,onClose:e,onCreateModule:t,onAssignModule:s,onOpenEdit:l,isUnassigned:o=!1})=>{const c=Q.useRef(null),{moduleTypes:f}=zo();return n===null&&!o?null:x.jsx("div",{className:Ve.modalBackdrop,onMouseDown:d=>{d.target===d.currentTarget&&(c.current="backdrop")},onClick:d=>{d.target===d.currentTarget&&c.current==="backdrop"&&e(),c.current=null},children:x.jsxs("div",{className:Ve.modalContent,onClick:d=>d.stopPropagation(),children:[x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsx("h3",{className:"text-xl font-bold text-black ",children:n?`Add Module to Channel ${n}`:"Create Module"}),x.jsx(lp,{onClick:e})]}),x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[...f].sort((d,h)=>d.offline&&!h.offline?-1:!d.offline&&h.offline?1:d.label.localeCompare(h.label)).map(d=>x.jsx("button",{type:"button",onClick:async()=>{const h=await t(d.id);h&&(n&&await s(n,h.id),e(),l(h.id,h))},className:"flex flex-col items-center p-4 bg-white border-2 border-gray-300 hover:border-black rounded-lg transition-colors text-center group cursor-pointer hover-shimmer",children:x.jsxs("div",{className:"flex items-baseline justify-center gap-1.5",children:[!d.offline&&x.jsx(Zi,{className:"w-3 h-3 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-text-muted)"}}),x.jsx("span",{className:"font-bold text-black group-hover:text-black ",children:d.label})]})},d.id))})]})})},sE=({value:n={},onChange:e})=>{const[t,s]=Q.useState(()=>Object.entries(n||{}).map(([d,h])=>({key:d,value:h})));Q.useEffect(()=>{const d=new Map(Object.entries(n||{})),h=new Map(t.map(m=>[m.key,m.value]));d.size!==h.size&&s(Object.entries(n||{}).map(([m,y])=>({key:m,value:y})))},[n]);const l=d=>{const h={};d.forEach(m=>{m.key.trim()&&(h[m.key.trim()]=m.value)}),e(h)},o=(d,h,m)=>{const y=[...t];y[d]={...y[d],[h]:m},s(y),l(y)},c=()=>{s([...t,{key:"",value:""}])},f=d=>{const h=t.filter((m,y)=>y!==d);s(h),l(h)};return x.jsxs("div",{className:"space-y-2",children:[t.map((d,h)=>x.jsxs("div",{className:"flex gap-2 items-center",children:[x.jsx("input",{type:"text",value:d.key,onChange:m=>o(h,"key",m.target.value),placeholder:"Key",className:`${Ve.inputSmall} flex-1`}),x.jsx("input",{type:"text",value:d.value,onChange:m=>o(h,"value",m.target.value),placeholder:"Value",className:`${Ve.inputSmall} flex-1`}),x.jsx("button",{type:"button",onClick:()=>f(h),className:`${Ve.buttonDanger} flex-shrink-0 px-2`,children:""})]},h)),x.jsx("button",{type:"button",onClick:c,className:`${Ve.buttonGhost} text-xs w-full border-dashed border-2 border-gray-200 py-1`,children:"+ Add Entry"})]})},iE=({value:n=[],onChange:e})=>{const t=Array.isArray(n)?n:[],s=Q.useRef([]),l=(d,h,m)=>{const y=[...t];y[d]={...y[d],[h]:m},e(y)},o=d=>{const h=[...t],m={text:"",checked:!1};h.splice(d+1,0,m),e(h),setTimeout(()=>{s.current[d+1]&&s.current[d+1].focus()},0)},c=d=>{if(t.length<=1){l(0,"text","");return}const h=t.filter((y,b)=>b!==d);e(h);const m=Math.max(0,d-1);setTimeout(()=>{if(s.current[m]){s.current[m].focus();const y=s.current[m].value.length;s.current[m].setSelectionRange(y,y)}},0)},f=(d,h)=>{d.key==="Enter"?(d.preventDefault(),o(h)):d.key==="Backspace"&&t[h].text===""&&t.length>1?(d.preventDefault(),c(h)):d.key==="ArrowUp"&&h>0?(d.preventDefault(),s.current[h-1].focus()):d.key==="ArrowDown"&&h<t.length-1&&(d.preventDefault(),s.current[h+1].focus())};return Q.useEffect(()=>{t.length===0&&e([{text:"",checked:!1}])},[t.length]),x.jsxs("div",{className:"space-y-0 bg-white",children:[t.map((d,h)=>x.jsxs("div",{className:"flex items-center gap-3 group px-1 py-1 transition-all",children:[x.jsx("input",{type:"checkbox",checked:d.checked||!1,onChange:m=>l(h,"checked",m.target.checked),className:"w-5 h-5 text-black rounded border-2 border-zinc-300 focus:ring-0 cursor-pointer flex-shrink-0",style:{accentColor:"black"}}),x.jsx("input",{ref:m=>s.current[h]=m,type:"text",value:d.text||"",onChange:m=>l(h,"text",m.target.value),onKeyDown:m=>f(m,h),placeholder:"New checklist item...",className:"flex-1 bg-transparent border-none focus:outline-none focus:ring-0 py-1 text-base placeholder-zinc-300 transition-colors"}),x.jsx("button",{type:"button",onClick:()=>c(h),className:"opacity-0 group-hover:opacity-100 text-gray-300 hover:text-red-500 transition-all p-1",title:"Remove Item",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 256 256",children:x.jsx("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"})})})]},h)),x.jsx("div",{className:"pt-2",children:x.jsxs("button",{type:"button",onClick:()=>o(t.length-1),className:"text-xs text-gray-400 hover:text-gray-600 flex items-center gap-1 px-2",children:[x.jsx("span",{className:"text-sm",children:"+"})," Add another item"]})})]})},lE=({value:n,onChange:e,presets:t={},onPresetSelect:s})=>{const l=o=>{const c=o.target.value;if(e(c),c&&t[c]&&s){const f=t[c];let d={};if(f.values)d=f.values;else{const{label:h,...m}=f;d=m}s(d)}};return x.jsx("select",{value:n||"custom",onChange:l,className:Ve.input,children:Object.entries(t).map(([o,c])=>x.jsx("option",{value:o,children:c.label||o},o))})},oE=({className:n,title:e="check",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsx("g",{fill:"currentColor",children:x.jsx("path",{d:"M0.5,7l4,4.5 c0,0,2.5-5.5,11-8.5",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),aE=({className:n,title:e="warning",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsx("path",{fill:"currentColor",d:"M236.8,188.09,149.35,36.22h0a24.76,24.76,0,0,0-42.7,0L19.2,188.09a23.51,23.51,0,0,0,0,23.72A24.35,24.35,0,0,0,40.55,224h174.9a24.35,24.35,0,0,0,21.33-12.19A23.51,23.51,0,0,0,236.8,188.09ZM120,104a8,8,0,0,1,16,0v40a8,8,0,0,1-16,0Zm8,88a12,12,0,1,1,12-12A12,12,0,0,1,128,192Z"})]}),cE=({formData:n={}})=>{const[e,t]=Q.useState(!1),[s,l]=Q.useState(null),o=async()=>{t(!0),l(null);try{const f=await(await fetch("/api/webhook/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();l(f)}catch(c){l({success:!1,error:c.message})}finally{t(!1)}};return x.jsxs("div",{className:"space-y-3",children:[x.jsx("button",{type:"button",onClick:o,disabled:e||!n.url,className:"text-sm px-3 py-1.5 border-2 border-gray-300 rounded-lg hover:border-black disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e?x.jsxs("span",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"w-3 h-3 border-2 border-black border-t-transparent rounded-full animate-spin"}),"Testing..."]}):"Test Webhook"}),s&&x.jsx("div",{className:`p-3 rounded-lg text-sm border-2 ${s.success?"bg-gray-50 border-gray-300":"bg-white border-black border-dashed"}`,children:s.success?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex items-center gap-2 text-black font-bold mb-2",children:[x.jsx(oE,{className:"w-4 h-4"}),x.jsx("span",{children:"Success"}),s.status_code&&x.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["(HTTP ",s.status_code,")"]})]}),s.json_path&&x.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Extracted from: ",x.jsx("code",{className:"bg-gray-200 px-1 rounded",children:s.json_path})]}),x.jsx("div",{className:"bg-white border border-gray-200 rounded p-2 font-mono text-xs whitespace-pre-wrap break-words max-h-32 overflow-y-auto",children:s.content})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex items-center gap-2 text-black font-bold mb-2",children:[x.jsx(aE,{className:"w-4 h-4"}),x.jsx("span",{children:"Error"})]}),x.jsx("div",{className:"text-gray-600 text-xs",children:s.error}),s.raw_response&&x.jsxs("details",{className:"mt-2",children:[x.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"Show raw response"}),x.jsx("div",{className:"bg-gray-100 border border-gray-200 rounded p-2 font-mono text-xs whitespace-pre-wrap break-words max-h-32 overflow-y-auto mt-1",children:s.raw_response})]})]})})]})},uE=({value:n,onChange:e,schema:t,uiSchema:s={},moduleId:l,onActionComplete:o})=>{const[c,f]=Q.useState(!1),[d,h]=Q.useState(null),m=s["ui:options"]||{},y=m.action||"default",b=m.label||t?.title||"Action",v=m.confirmMessage,k=m.style||"primary",M=async()=>{if(!(v&&!window.confirm(v))){if(!l){console.error("ActionButton: moduleId is required"),h("error");return}f(!0),h(null);try{const C=await fetch(`/api/modules/${l}/actions/${y}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(C.ok){const z=await C.json();h("success"),z.reload&&o?setTimeout(()=>o(),300):setTimeout(()=>h(null),2e3)}else h("error")}catch(C){console.error("ActionButton error:",C),h("error")}finally{f(!1)}}};let E=Ve.buttonPrimary;return k==="danger"?E="px-4 py-2 rounded-lg font-medium bg-red-600 text-white hover:bg-red-700 transition-colors disabled:opacity-50":k==="ghost"?E=Ve.buttonGhost:k==="link"&&(E="text-black hover:text-zinc-600 underline text-sm font-bold disabled:opacity-50"),x.jsxs("div",{className:"mb-4",children:[x.jsx("button",{type:"button",onClick:M,disabled:c,className:E,children:c?"Processing...":b}),d==="success"&&x.jsx("span",{className:"ml-3 text-green-600 text-sm",children:" Done"}),d==="error"&&x.jsx("span",{className:"ml-3 text-red-600 text-sm",children:" Failed"})]})};var fE=_1();const dE=ip(fE);var Fd={exports:{}},Xd={};var eb;function hE(){if(eb)return Xd;eb=1;var n=Ro();function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,l=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function f(y,b){var v=b(),k=s({inst:{value:v,getSnapshot:b}}),M=k[0].inst,E=k[1];return o(function(){M.value=v,M.getSnapshot=b,d(M)&&E({inst:M})},[y,v,b]),l(function(){return d(M)&&E({inst:M}),y(function(){d(M)&&E({inst:M})})},[y]),c(v),v}function d(y){var b=y.getSnapshot;y=y.value;try{var v=b();return!t(y,v)}catch{return!0}}function h(y,b){return b()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:f;return Xd.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,Xd}var tb;function U1(){return tb||(tb=1,Fd.exports=hE()),Fd.exports}var I1=U1();function Ut(n){this.content=n}Ut.prototype={constructor:Ut,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var s=t&&t!=n?this.remove(t):this,l=s.find(n),o=s.content.slice();return l==-1?o.push(t||n,e):(o[l+1]=e,t&&(o[l]=t)),new Ut(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Ut(t)},addToStart:function(n,e){return new Ut([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Ut(t)},addBefore:function(n,e,t){var s=this.remove(e),l=s.content.slice(),o=s.find(n);return l.splice(o==-1?l.length:o,0,e,t),new Ut(l)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Ut.from(n),n.size?new Ut(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Ut.from(n),n.size?new Ut(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Ut.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Ut.from=function(n){if(n instanceof Ut)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Ut(e)};function V1(n,e,t){for(let s=0;;s++){if(s==n.childCount||s==e.childCount)return n.childCount==e.childCount?null:t;let l=n.child(s),o=e.child(s);if(l==o){t+=l.nodeSize;continue}if(!l.sameMarkup(o))return t;if(l.isText&&l.text!=o.text){for(let c=0;l.text[c]==o.text[c];c++)t++;return t}if(l.content.size||o.content.size){let c=V1(l.content,o.content,t+1);if(c!=null)return c}t+=l.nodeSize}}function q1(n,e,t,s){for(let l=n.childCount,o=e.childCount;;){if(l==0||o==0)return l==o?null:{a:t,b:s};let c=n.child(--l),f=e.child(--o),d=c.nodeSize;if(c==f){t-=d,s-=d;continue}if(!c.sameMarkup(f))return{a:t,b:s};if(c.isText&&c.text!=f.text){let h=0,m=Math.min(c.text.length,f.text.length);for(;h<m&&c.text[c.text.length-h-1]==f.text[f.text.length-h-1];)h++,t--,s--;return{a:t,b:s}}if(c.content.size||f.content.size){let h=q1(c.content,f.content,t-1,s-1);if(h)return h}t-=d,s-=d}}class W{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let s=0;s<e.length;s++)this.size+=e[s].nodeSize}nodesBetween(e,t,s,l=0,o){for(let c=0,f=0;f<t;c++){let d=this.content[c],h=f+d.nodeSize;if(h>e&&s(d,l+f,o||null,c)!==!1&&d.content.size){let m=f+1;d.nodesBetween(Math.max(0,e-m),Math.min(d.content.size,t-m),s,l+m)}f=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,s,l){let o="",c=!0;return this.nodesBetween(e,t,(f,d)=>{let h=f.isText?f.text.slice(Math.max(e,d)-d,t-d):f.isLeaf?l?typeof l=="function"?l(f):l:f.type.spec.leafText?f.type.spec.leafText(f):"":"";f.isBlock&&(f.isLeaf&&h||f.isTextblock)&&s&&(c?c=!1:o+=s),o+=h},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,s=e.firstChild,l=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(s)&&(l[l.length-1]=t.withText(t.text+s.text),o=1);o<e.content.length;o++)l.push(e.content[o]);return new W(l,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let s=[],l=0;if(t>e)for(let o=0,c=0;c<t;o++){let f=this.content[o],d=c+f.nodeSize;d>e&&((c<e||d>t)&&(f.isText?f=f.cut(Math.max(0,e-c),Math.min(f.text.length,t-c)):f=f.cut(Math.max(0,e-c-1),Math.min(f.content.size,t-c-1))),s.push(f),l+=f.nodeSize),c=d}return new W(s,l)}cutByIndex(e,t){return e==t?W.empty:e==0&&t==this.content.length?this:new W(this.content.slice(e,t))}replaceChild(e,t){let s=this.content[e];if(s==t)return this;let l=this.content.slice(),o=this.size+t.nodeSize-s.nodeSize;return l[e]=t,new W(l,o)}addToStart(e){return new W([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new W(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,s=0;t<this.content.length;t++){let l=this.content[t];e(l,s,t),s+=l.nodeSize}}findDiffStart(e,t=0){return V1(this,e,t)}findDiffEnd(e,t=this.size,s=e.size){return q1(this,e,t,s)}findIndex(e){if(e==0)return tc(0,e);if(e==this.size)return tc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,s=0;;t++){let l=this.child(t),o=s+l.nodeSize;if(o>=e)return o==e?tc(t+1,o):tc(t,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return W.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new W(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return W.empty;let t,s=0;for(let l=0;l<e.length;l++){let o=e[l];s+=o.nodeSize,l&&o.isText&&e[l-1].sameMarkup(o)?(t||(t=e.slice(0,l)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new W(t||e,s)}static from(e){if(!e)return W.empty;if(e instanceof W)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new W([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}W.empty=new W([],0);const Qd={index:0,offset:0};function tc(n,e){return Qd.index=n,Qd.offset=e,Qd}function vc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let s=0;s<n.length;s++)if(!vc(n[s],e[s]))return!1}else{for(let s in n)if(!(s in e)||!vc(n[s],e[s]))return!1;for(let s in e)if(!(s in n))return!1}return!0}let et=class wh{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,s=!1;for(let l=0;l<e.length;l++){let o=e[l];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,l));else{if(o.type.excludes(this.type))return e;!s&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,l)),t.push(this),s=!0),t&&t.push(o)}}return t||(t=e.slice()),s||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&vc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let s=e.marks[t.type];if(!s)throw new RangeError(`There is no mark type ${t.type} in this schema`);let l=s.create(t.attrs);return s.checkAttrs(l.attrs),l}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++)if(!e[s].eq(t[s]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return wh.none;if(e instanceof wh)return[e];let t=e.slice();return t.sort((s,l)=>s.type.rank-l.type.rank),t}};et.none=[];class Sc extends Error{}class ae{constructor(e,t,s){this.content=e,this.openStart=t,this.openEnd=s}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let s=G1(this.content,e+this.openStart,t);return s&&new ae(s,this.openStart,this.openEnd)}removeBetween(e,t){return new ae($1(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ae.empty;let s=t.openStart||0,l=t.openEnd||0;if(typeof s!="number"||typeof l!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ae(W.fromJSON(e,t.content),s,l)}static maxOpen(e,t=!0){let s=0,l=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)s++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)l++;return new ae(e,s,l)}}ae.empty=new ae(W.empty,0,0);function $1(n,e,t){let{index:s,offset:l}=n.findIndex(e),o=n.maybeChild(s),{index:c,offset:f}=n.findIndex(t);if(l==e||o.isText){if(f!=t&&!n.child(c).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(s!=c)throw new RangeError("Removing non-flat range");return n.replaceChild(s,o.copy($1(o.content,e-l-1,t-l-1)))}function G1(n,e,t,s){let{index:l,offset:o}=n.findIndex(e),c=n.maybeChild(l);if(o==e||c.isText)return s&&!s.canReplace(l,l,t)?null:n.cut(0,e).append(t).append(n.cut(e));let f=G1(c.content,e-o-1,t,c);return f&&n.replaceChild(l,c.copy(f))}function pE(n,e,t){if(t.openStart>n.depth)throw new Sc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Sc("Inconsistent open depths");return Y1(n,e,t,0)}function Y1(n,e,t,s){let l=n.index(s),o=n.node(s);if(l==e.index(s)&&s<n.depth-t.openStart){let c=Y1(n,e,t,s+1);return o.copy(o.content.replaceChild(l,c))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==s&&e.depth==s){let c=n.parent,f=c.content;return Ps(c,f.cut(0,n.parentOffset).append(t.content).append(f.cut(e.parentOffset)))}else{let{start:c,end:f}=mE(t,n);return Ps(o,P1(n,c,f,e,s))}else return Ps(o,kc(n,e,s))}function K1(n,e){if(!e.type.compatibleContent(n.type))throw new Sc("Cannot join "+e.type.name+" onto "+n.type.name)}function Nh(n,e,t){let s=n.node(t);return K1(s,e.node(t)),s}function Ks(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function fo(n,e,t,s){let l=(e||n).node(t),o=0,c=e?e.index(t):l.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(Ks(n.nodeAfter,s),o++));for(let f=o;f<c;f++)Ks(l.child(f),s);e&&e.depth==t&&e.textOffset&&Ks(e.nodeBefore,s)}function Ps(n,e){return n.type.checkContent(e),n.copy(e)}function P1(n,e,t,s,l){let o=n.depth>l&&Nh(n,e,l+1),c=s.depth>l&&Nh(t,s,l+1),f=[];return fo(null,n,l,f),o&&c&&e.index(l)==t.index(l)?(K1(o,c),Ks(Ps(o,P1(n,e,t,s,l+1)),f)):(o&&Ks(Ps(o,kc(n,e,l+1)),f),fo(e,t,l,f),c&&Ks(Ps(c,kc(t,s,l+1)),f)),fo(s,null,l,f),new W(f)}function kc(n,e,t){let s=[];if(fo(null,n,t,s),n.depth>t){let l=Nh(n,e,t+1);Ks(Ps(l,kc(n,e,t+1)),s)}return fo(e,null,t,s),new W(s)}function mE(n,e){let t=e.depth-n.openStart,l=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)l=e.node(o).copy(W.from(l));return{start:l.resolveNoCache(n.openStart+t),end:l.resolveNoCache(l.content.size-n.openEnd-t)}}class ko{constructor(e,t,s){this.pos=e,this.path=t,this.parentOffset=s,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let s=this.pos-this.path[this.path.length-1],l=e.child(t);return s?e.child(t).cut(s):l}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let s=this.path[t*3],l=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)l+=s.child(o).nodeSize;return l}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return et.none;if(this.textOffset)return e.child(t).marks;let s=e.maybeChild(t-1),l=e.maybeChild(t);if(!s){let f=s;s=l,l=f}let o=s.marks;for(var c=0;c<o.length;c++)o[c].type.spec.inclusive===!1&&(!l||!o[c].isInSet(l.marks))&&(o=o[c--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let s=t.marks,l=e.parent.maybeChild(e.index());for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!l||!s[o].isInSet(l.marks))&&(s=s[o--].removeFromSet(s));return s}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let s=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);s>=0;s--)if(e.pos<=this.end(s)&&(!t||t(this.node(s))))return new Tc(this,e,s);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let s=[],l=0,o=t;for(let c=e;;){let{index:f,offset:d}=c.content.findIndex(o),h=o-d;if(s.push(c,f,l+d),!h||(c=c.child(f),c.isText))break;o=h-1,l+=d+1}return new ko(t,s,o)}static resolveCached(e,t){let s=nb.get(e);if(s)for(let o=0;o<s.elts.length;o++){let c=s.elts[o];if(c.pos==t)return c}else nb.set(e,s=new gE);let l=s.elts[s.i]=ko.resolve(e,t);return s.i=(s.i+1)%yE,l}}class gE{constructor(){this.elts=[],this.i=0}}const yE=12,nb=new WeakMap;class Tc{constructor(e,t,s){this.$from=e,this.$to=t,this.depth=s}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const bE=Object.create(null);let fs=class Ah{constructor(e,t,s,l=et.none){this.type=e,this.attrs=t,this.marks=l,this.content=s||W.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,s,l=0){this.content.nodesBetween(e,t,s,l,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,s,l){return this.content.textBetween(e,t,s,l)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,s){return this.type==e&&vc(this.attrs,t||e.defaultAttrs||bE)&&et.sameSet(this.marks,s||et.none)}copy(e=null){return e==this.content?this:new Ah(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Ah(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,s=!1){if(e==t)return ae.empty;let l=this.resolve(e),o=this.resolve(t),c=s?0:l.sharedDepth(t),f=l.start(c),h=l.node(c).content.cut(l.pos-f,o.pos-f);return new ae(h,l.depth-c,o.depth-c)}replace(e,t,s){return pE(this.resolve(e),this.resolve(t),s)}nodeAt(e){for(let t=this;;){let{index:s,offset:l}=t.content.findIndex(e);if(t=t.maybeChild(s),!t)return null;if(l==e||t.isText)return t;e-=l+1}}childAfter(e){let{index:t,offset:s}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:s}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:s}=this.content.findIndex(e);if(s<e)return{node:this.content.child(t),index:t,offset:s};let l=this.content.child(t-1);return{node:l,index:t-1,offset:s-l.nodeSize}}resolve(e){return ko.resolveCached(this,e)}resolveNoCache(e){return ko.resolve(this,e)}rangeHasMark(e,t,s){let l=!1;return t>e&&this.nodesBetween(e,t,o=>(s.isInSet(o.marks)&&(l=!0),!l)),l}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),J1(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,s=W.empty,l=0,o=s.childCount){let c=this.contentMatchAt(e).matchFragment(s,l,o),f=c&&c.matchFragment(this.content,t);if(!f||!f.validEnd)return!1;for(let d=l;d<o;d++)if(!this.type.allowsMarks(s.child(d).marks))return!1;return!0}canReplaceWith(e,t,s,l){if(l&&!this.type.allowsMarks(l))return!1;let o=this.contentMatchAt(e).matchType(s),c=o&&o.matchFragment(this.content,t);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=et.none;for(let t=0;t<this.marks.length;t++){let s=this.marks[t];s.type.checkAttrs(s.attrs),e=s.addToSet(e)}if(!et.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let s;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");s=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,s)}let l=W.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,l,s);return o.type.checkAttrs(o.attrs),o}};fs.prototype.text=void 0;class Ec extends fs{constructor(e,t,s,l){if(super(e,t,null,l),!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):J1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ec(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ec(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function J1(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Qs{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let s=new xE(e,t);if(s.next==null)return Qs.empty;let l=F1(s);s.next&&s.err("Unexpected trailing text");let o=CE(ME(l));return wE(o,s),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,s=e.childCount){let l=this;for(let o=t;l&&o<s;o++)l=l.matchType(e.child(o).type);return l}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let s=0;s<e.next.length;s++)if(this.next[t].type==e.next[s].type)return!0;return!1}fillBefore(e,t=!1,s=0){let l=[this];function o(c,f){let d=c.matchFragment(e,s);if(d&&(!t||d.validEnd))return W.from(f.map(h=>h.createAndFill()));for(let h=0;h<c.next.length;h++){let{type:m,next:y}=c.next[h];if(!(m.isText||m.hasRequiredAttrs())&&l.indexOf(y)==-1){l.push(y);let b=o(y,f.concat(m));if(b)return b}}return null}return o(this,[])}findWrapping(e){for(let s=0;s<this.wrapCache.length;s+=2)if(this.wrapCache[s]==e)return this.wrapCache[s+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),s=[{match:this,type:null,via:null}];for(;s.length;){let l=s.shift(),o=l.match;if(o.matchType(e)){let c=[];for(let f=l;f.type;f=f.via)c.push(f.type);return c.reverse()}for(let c=0;c<o.next.length;c++){let{type:f,next:d}=o.next[c];!f.isLeaf&&!f.hasRequiredAttrs()&&!(f.name in t)&&(!l.type||d.validEnd)&&(s.push({match:f.contentMatch,type:f,via:l}),t[f.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(s){e.push(s);for(let l=0;l<s.next.length;l++)e.indexOf(s.next[l].next)==-1&&t(s.next[l].next)}return t(this),e.map((s,l)=>{let o=l+(s.validEnd?"*":" ")+" ";for(let c=0;c<s.next.length;c++)o+=(c?", ":"")+s.next[c].type.name+"->"+e.indexOf(s.next[c].next);return o}).join(`
`)}}Qs.empty=new Qs(!0);class xE{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function F1(n){let e=[];do e.push(vE(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function vE(n){let e=[];do e.push(SE(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function SE(n){let e=EE(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=kE(n,e);else break;return e}function rb(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function kE(n,e){let t=rb(n),s=t;return n.eat(",")&&(n.next!="}"?s=rb(n):s=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:s,expr:e}}function TE(n,e){let t=n.nodeTypes,s=t[e];if(s)return[s];let l=[];for(let o in t){let c=t[o];c.isInGroup(e)&&l.push(c)}return l.length==0&&n.err("No node type or group '"+e+"' found"),l}function EE(n){if(n.eat("(")){let e=F1(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=TE(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function ME(n){let e=[[]];return l(o(n,0),t()),e;function t(){return e.push([])-1}function s(c,f,d){let h={term:d,to:f};return e[c].push(h),h}function l(c,f){c.forEach(d=>d.to=f)}function o(c,f){if(c.type=="choice")return c.exprs.reduce((d,h)=>d.concat(o(h,f)),[]);if(c.type=="seq")for(let d=0;;d++){let h=o(c.exprs[d],f);if(d==c.exprs.length-1)return h;l(h,f=t())}else if(c.type=="star"){let d=t();return s(f,d),l(o(c.expr,d),d),[s(d)]}else if(c.type=="plus"){let d=t();return l(o(c.expr,f),d),l(o(c.expr,d),d),[s(d)]}else{if(c.type=="opt")return[s(f)].concat(o(c.expr,f));if(c.type=="range"){let d=f;for(let h=0;h<c.min;h++){let m=t();l(o(c.expr,d),m),d=m}if(c.max==-1)l(o(c.expr,d),d);else for(let h=c.min;h<c.max;h++){let m=t();s(d,m),l(o(c.expr,d),m),d=m}return[s(d)]}else{if(c.type=="name")return[s(f,void 0,c.value)];throw new Error("Unknown expr type")}}}}function X1(n,e){return e-n}function sb(n,e){let t=[];return s(e),t.sort(X1);function s(l){let o=n[l];if(o.length==1&&!o[0].term)return s(o[0].to);t.push(l);for(let c=0;c<o.length;c++){let{term:f,to:d}=o[c];!f&&t.indexOf(d)==-1&&s(d)}}}function CE(n){let e=Object.create(null);return t(sb(n,0));function t(s){let l=[];s.forEach(c=>{n[c].forEach(({term:f,to:d})=>{if(!f)return;let h;for(let m=0;m<l.length;m++)l[m][0]==f&&(h=l[m][1]);sb(n,d).forEach(m=>{h||l.push([f,h=[]]),h.indexOf(m)==-1&&h.push(m)})})});let o=e[s.join(",")]=new Qs(s.indexOf(n.length-1)>-1);for(let c=0;c<l.length;c++){let f=l[c][1].sort(X1);o.next.push({type:l[c][0],next:e[f.join(",")]||t(f)})}return o}}function wE(n,e){for(let t=0,s=[n];t<s.length;t++){let l=s[t],o=!l.validEnd,c=[];for(let f=0;f<l.next.length;f++){let{type:d,next:h}=l.next[f];c.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),s.indexOf(h)==-1&&s.push(h)}o&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Q1(n){let e=Object.create(null);for(let t in n){let s=n[t];if(!s.hasDefault)return null;e[t]=s.default}return e}function Z1(n,e){let t=Object.create(null);for(let s in n){let l=e&&e[s];if(l===void 0){let o=n[s];if(o.hasDefault)l=o.default;else throw new RangeError("No value supplied for attribute "+s)}t[s]=l}return t}function W1(n,e,t,s){for(let l in e)if(!(l in n))throw new RangeError(`Unsupported attribute ${l} for ${t} of type ${l}`);for(let l in n){let o=n[l];o.validate&&o.validate(e[l])}}function ex(n,e){let t=Object.create(null);if(e)for(let s in e)t[s]=new AE(n,s,e[s]);return t}let ib=class tx{constructor(e,t,s){this.name=e,this.schema=t,this.spec=s,this.markSet=null,this.groups=s.group?s.group.split(" "):[],this.attrs=ex(e,s.attrs),this.defaultAttrs=Q1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(s.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Qs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Z1(this.attrs,e)}create(e=null,t,s){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new fs(this,this.computeAttrs(e),W.from(t),et.setFrom(s))}createChecked(e=null,t,s){return t=W.from(t),this.checkContent(t),new fs(this,this.computeAttrs(e),t,et.setFrom(s))}createAndFill(e=null,t,s){if(e=this.computeAttrs(e),t=W.from(t),t.size){let c=this.contentMatch.fillBefore(t);if(!c)return null;t=c.append(t)}let l=this.contentMatch.matchFragment(t),o=l&&l.fillBefore(W.empty,!0);return o?new fs(this,e,t.append(o),et.setFrom(s)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let s=0;s<e.childCount;s++)if(!this.allowsMarks(e.child(s).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){W1(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let s=0;s<e.length;s++)this.allowsMarkType(e[s].type)?t&&t.push(e[s]):t||(t=e.slice(0,s));return t?t.length?t:et.none:e}static compile(e,t){let s=Object.create(null);e.forEach((o,c)=>s[o]=new tx(o,t,c));let l=t.spec.topNode||"doc";if(!s[l])throw new RangeError("Schema is missing its top node type ('"+l+"')");if(!s.text)throw new RangeError("Every schema needs a 'text' type");for(let o in s.text.attrs)throw new RangeError("The text node type should not have attributes");return s}};function NE(n,e,t){let s=t.split("|");return l=>{let o=l===null?"null":typeof l;if(s.indexOf(o)<0)throw new RangeError(`Expected value of type ${s} for attribute ${e} on type ${n}, got ${o}`)}}class AE{constructor(e,t,s){this.hasDefault=Object.prototype.hasOwnProperty.call(s,"default"),this.default=s.default,this.validate=typeof s.validate=="string"?NE(e,t,s.validate):s.validate}get isRequired(){return!this.hasDefault}}class uu{constructor(e,t,s,l){this.name=e,this.rank=t,this.schema=s,this.spec=l,this.attrs=ex(e,l.attrs),this.excluded=null;let o=Q1(this.attrs);this.instance=o?new et(this,o):null}create(e=null){return!e&&this.instance?this.instance:new et(this,Z1(this.attrs,e))}static compile(e,t){let s=Object.create(null),l=0;return e.forEach((o,c)=>s[o]=new uu(o,l++,t,c)),s}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){W1(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class nx{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let l in e)t[l]=e[l];t.nodes=Ut.from(e.nodes),t.marks=Ut.from(e.marks||{}),this.nodes=ib.compile(this.spec.nodes,this),this.marks=uu.compile(this.spec.marks,this);let s=Object.create(null);for(let l in this.nodes){if(l in this.marks)throw new RangeError(l+" can not be both a node and a mark");let o=this.nodes[l],c=o.spec.content||"",f=o.spec.marks;if(o.contentMatch=s[c]||(s[c]=Qs.parse(c,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=f=="_"?null:f?lb(this,f.split(" ")):f==""||!o.inlineContent?[]:null}for(let l in this.marks){let o=this.marks[l],c=o.spec.excludes;o.excluded=c==null?[o]:c==""?[]:lb(this,c.split(" "))}this.nodeFromJSON=l=>fs.fromJSON(this,l),this.markFromJSON=l=>et.fromJSON(this,l),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,s,l){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof ib){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,s,l)}text(e,t){let s=this.nodes.text;return new Ec(s,s.defaultAttrs,e,et.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function lb(n,e){let t=[];for(let s=0;s<e.length;s++){let l=e[s],o=n.marks[l],c=o;if(o)t.push(o);else for(let f in n.marks){let d=n.marks[f];(l=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(l)>-1)&&t.push(c=d)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[s]+"'")}return t}function OE(n){return n.tag!=null}function DE(n){return n.style!=null}class ds{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let s=this.matchedStyles=[];t.forEach(l=>{if(OE(l))this.tags.push(l);else if(DE(l)){let o=/[^=]*/.exec(l.style)[0];s.indexOf(o)<0&&s.push(o),this.styles.push(l)}}),this.normalizeLists=!this.tags.some(l=>{if(!/^(ul|ol)\b/.test(l.tag)||!l.node)return!1;let o=e.nodes[l.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let s=new ab(this,t,!1);return s.addAll(e,et.none,t.from,t.to),s.finish()}parseSlice(e,t={}){let s=new ab(this,t,!0);return s.addAll(e,et.none,t.from,t.to),ae.maxOpen(s.finish())}matchTag(e,t,s){for(let l=s?this.tags.indexOf(s)+1:0;l<this.tags.length;l++){let o=this.tags[l];if(zE(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let c=o.getAttrs(e);if(c===!1)continue;o.attrs=c||void 0}return o}}}matchStyle(e,t,s,l){for(let o=l?this.styles.indexOf(l)+1:0;o<this.styles.length;o++){let c=this.styles[o],f=c.style;if(!(f.indexOf(e)!=0||c.context&&!s.matchesContext(c.context)||f.length>e.length&&(f.charCodeAt(e.length)!=61||f.slice(e.length+1)!=t))){if(c.getAttrs){let d=c.getAttrs(t);if(d===!1)continue;c.attrs=d||void 0}return c}}}static schemaRules(e){let t=[];function s(l){let o=l.priority==null?50:l.priority,c=0;for(;c<t.length;c++){let f=t[c];if((f.priority==null?50:f.priority)<o)break}t.splice(c,0,l)}for(let l in e.marks){let o=e.marks[l].spec.parseDOM;o&&o.forEach(c=>{s(c=cb(c)),c.mark||c.ignore||c.clearMark||(c.mark=l)})}for(let l in e.nodes){let o=e.nodes[l].spec.parseDOM;o&&o.forEach(c=>{s(c=cb(c)),c.node||c.ignore||c.mark||(c.node=l)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ds(e,ds.schemaRules(e)))}}const rx={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},jE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},sx={ol:!0,ul:!0},To=1,Oh=2,ho=4;function ob(n,e,t){return e!=null?(e?To:0)|(e==="full"?Oh:0):n&&n.whitespace=="pre"?To|Oh:t&~ho}class nc{constructor(e,t,s,l,o,c){this.type=e,this.attrs=t,this.marks=s,this.solid=l,this.options=c,this.content=[],this.activeMarks=et.none,this.match=o||(c&ho?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(W.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let s=this.type.contentMatch,l;return(l=s.findWrapping(e.type))?(this.match=s,l):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&To)){let s=this.content[this.content.length-1],l;if(s&&s.isText&&(l=/[ \t\r\n\u000c]+$/.exec(s.text))){let o=s;s.text.length==l[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-l[0].length))}}let t=W.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(W.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!rx.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ab{constructor(e,t,s){this.parser=e,this.options=t,this.isOpen=s,this.open=0,this.localPreserveWS=!1;let l=t.topNode,o,c=ob(null,t.preserveWhitespace,0)|(s?ho:0);l?o=new nc(l.type,l.attrs,et.none,!0,t.topMatch||l.type.contentMatch,c):s?o=new nc(null,null,et.none,!0,null,c):o=new nc(e.schema.topNodeType,null,et.none,!0,null,c),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let s=e.nodeValue,l=this.top,o=l.options&Oh?"full":this.localPreserveWS||(l.options&To)>0,{schema:c}=this.parser;if(o==="full"||l.inlineContext(e)||/[^ \t\r\n\u000c]/.test(s)){if(o)if(o==="full")s=s.replace(/\r\n?/g,`
`);else if(c.linebreakReplacement&&/[\r\n]/.test(s)&&this.top.findWrapping(c.linebreakReplacement.create())){let f=s.split(/\r?\n|\r/);for(let d=0;d<f.length;d++)d&&this.insertNode(c.linebreakReplacement.create(),t,!0),f[d]&&this.insertNode(c.text(f[d]),t,!/\S/.test(f[d]));s=""}else s=s.replace(/\r?\n|\r/g," ");else if(s=s.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(s)&&this.open==this.nodes.length-1){let f=l.content[l.content.length-1],d=e.previousSibling;(!f||d&&d.nodeName=="BR"||f.isText&&/[ \t\r\n\u000c]$/.test(f.text))&&(s=s.slice(1))}s&&this.insertNode(c.text(s),t,!/\S/.test(s)),this.findInText(e)}else this.findInside(e)}addElement(e,t,s){let l=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),f;sx.hasOwnProperty(c)&&this.parser.normalizeLists&&RE(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(f=this.parser.matchTag(e,this,s));e:if(d?d.ignore:jE.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let h,m=this.needsBlock;if(rx.hasOwnProperty(c))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=d&&d.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),h&&this.sync(o),this.needsBlock=m}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,d,h,d.consuming===!1?f:void 0)}this.localPreserveWS=l}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let s=e.style;if(s&&s.length)for(let l=0;l<this.parser.matchedStyles.length;l++){let o=this.parser.matchedStyles[l],c=s.getPropertyValue(o);if(c)for(let f=void 0;;){let d=this.parser.matchStyle(o,c,this,f);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(h=>!d.clearMark(h)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)f=d;else break}}return t}addElementByRule(e,t,s,l){let o,c;if(t.node)if(c=this.parser.schema.nodes[t.node],c.isLeaf)this.insertNode(c.create(t.attrs),s,e.nodeName=="BR")||this.leafFallback(e,s);else{let d=this.enter(c,t.attrs||null,s,t.preserveWhitespace);d&&(o=!0,s=d)}else{let d=this.parser.schema.marks[t.mark];s=s.concat(d.create(t.attrs))}let f=this.top;if(c&&c.isLeaf)this.findInside(e);else if(l)this.addElement(e,s,l);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,s,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,s),this.findAround(e,d,!1)}o&&this.sync(f)&&this.open--}addAll(e,t,s,l){let o=s||0;for(let c=s?e.childNodes[s]:e.firstChild,f=l==null?null:e.childNodes[l];c!=f;c=c.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(c,t);this.findAtPoint(e,o)}findPlace(e,t,s){let l,o;for(let c=this.open,f=0;c>=0;c--){let d=this.nodes[c],h=d.findWrapping(e);if(h&&(!l||l.length>h.length+f)&&(l=h,o=d,!h.length))break;if(d.solid){if(s)break;f+=2}}if(!l)return null;this.sync(o);for(let c=0;c<l.length;c++)t=this.enterInner(l[c],null,t,!1);return t}insertNode(e,t,s){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let l=this.findPlace(e,t,s);if(l){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let c=et.none;for(let f of l.concat(e.marks))(o.type?o.type.allowsMarkType(f.type):ub(f.type,e.type))&&(c=f.addToSet(c));return o.content.push(e.mark(c)),!0}return!1}enter(e,t,s,l){let o=this.findPlace(e.create(t),s,!1);return o&&(o=this.enterInner(e,t,s,!0,l)),o}enterInner(e,t,s,l=!1,o){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let f=ob(e,o,c.options);c.options&ho&&c.content.length==0&&(f|=ho);let d=et.none;return s=s.filter(h=>(c.type?c.type.allowsMarkType(h.type):ub(h.type,e))?(d=h.addToSet(d),!1):!0),this.nodes.push(new nc(e,t,d,l,null,f)),this.open++,s}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=To)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let s=this.nodes[t].content;for(let l=s.length-1;l>=0;l--)e+=s[l].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==e&&this.find[s].offset==t&&(this.find[s].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,s){if(e!=t&&this.find)for(let l=0;l<this.find.length;l++)this.find[l].pos==null&&e.nodeType==1&&e.contains(this.find[l].node)&&t.compareDocumentPosition(this.find[l].node)&(s?2:4)&&(this.find[l].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),s=this.options.context,l=!this.isOpen&&(!s||s.parent.type==this.nodes[0].type),o=-(s?s.depth+1:0)+(l?0:1),c=(f,d)=>{for(;f>=0;f--){let h=t[f];if(h==""){if(f==t.length-1||f==0)continue;for(;d>=o;d--)if(c(f-1,d))return!0;return!1}else{let m=d>0||d==0&&l?this.nodes[d].type:s&&d>=o?s.node(d-o).type:null;if(!m||m.name!=h&&!m.isInGroup(h))return!1;d--}}return!0};return c(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(s&&s.isTextblock&&s.defaultAttrs)return s}for(let t in this.parser.schema.nodes){let s=this.parser.schema.nodes[t];if(s.isTextblock&&s.defaultAttrs)return s}}}function RE(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let s=e.nodeType==1?e.nodeName.toLowerCase():null;s&&sx.hasOwnProperty(s)&&t?(t.appendChild(e),e=t):s=="li"?t=e:s&&(t=null)}}function zE(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function cb(n){let e={};for(let t in n)e[t]=n[t];return e}function ub(n,e){let t=e.schema.nodes;for(let s in t){let l=t[s];if(!l.allowsMarkType(n))continue;let o=[],c=f=>{o.push(f);for(let d=0;d<f.edgeCount;d++){let{type:h,next:m}=f.edge(d);if(h==e||o.indexOf(m)<0&&c(m))return!0}};if(c(l.contentMatch))return!0}}class ni{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},s){s||(s=Zd(t).createDocumentFragment());let l=s,o=[];return e.forEach(c=>{if(o.length||c.marks.length){let f=0,d=0;for(;f<o.length&&d<c.marks.length;){let h=c.marks[d];if(!this.marks[h.type.name]){d++;continue}if(!h.eq(o[f][0])||h.type.spec.spanning===!1)break;f++,d++}for(;f<o.length;)l=o.pop()[1];for(;d<c.marks.length;){let h=c.marks[d++],m=this.serializeMark(h,c.isInline,t);m&&(o.push([h,l]),l.appendChild(m.dom),l=m.contentDOM||m.dom)}}l.appendChild(this.serializeNodeInner(c,t))}),s}serializeNodeInner(e,t){let{dom:s,contentDOM:l}=pc(Zd(t),this.nodes[e.type.name](e),null,e.attrs);if(l){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,l)}return s}serializeNode(e,t={}){let s=this.serializeNodeInner(e,t);for(let l=e.marks.length-1;l>=0;l--){let o=this.serializeMark(e.marks[l],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(s),s=o.dom)}return s}serializeMark(e,t,s={}){let l=this.marks[e.type.name];return l&&pc(Zd(s),l(e,t),null,e.attrs)}static renderSpec(e,t,s=null,l){return pc(e,t,s,l)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ni(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=fb(e.nodes);return t.text||(t.text=s=>s.text),t}static marksFromSchema(e){return fb(e.marks)}}function fb(n){let e={};for(let t in n){let s=n[t].spec.toDOM;s&&(e[t]=s)}return e}function Zd(n){return n.document||window.document}const db=new WeakMap;function LE(n){let e=db.get(n);return e===void 0&&db.set(n,e=_E(n)),e}function _E(n){let e=null;function t(s){if(s&&typeof s=="object")if(Array.isArray(s))if(typeof s[0]=="string")e||(e=[]),e.push(s);else for(let l=0;l<s.length;l++)t(s[l]);else for(let l in s)t(s[l])}return t(n),e}function pc(n,e,t,s){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let l=e[0],o;if(typeof l!="string")throw new RangeError("Invalid array passed to renderSpec");if(s&&(o=LE(s))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=l.indexOf(" ");c>0&&(t=l.slice(0,c),l=l.slice(c+1));let f,d=t?n.createElementNS(t,l):n.createElement(l),h=e[1],m=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){m=2;for(let y in h)if(h[y]!=null){let b=y.indexOf(" ");b>0?d.setAttributeNS(y.slice(0,b),y.slice(b+1),h[y]):y=="style"&&d.style?d.style.cssText=h[y]:d.setAttribute(y,h[y])}}for(let y=m;y<e.length;y++){let b=e[y];if(b===0){if(y<e.length-1||y>m)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:v,contentDOM:k}=pc(n,b,t,s);if(d.appendChild(v),k){if(f)throw new RangeError("Multiple content holes");f=k}}}return{dom:d,contentDOM:f}}const ix=65535,lx=Math.pow(2,16);function BE(n,e){return n+e*lx}function hb(n){return n&ix}function HE(n){return(n-(n&ix))/lx}const ox=1,ax=2,mc=4,cx=8;class Dh{constructor(e,t,s){this.pos=e,this.delInfo=t,this.recover=s}get deleted(){return(this.delInfo&cx)>0}get deletedBefore(){return(this.delInfo&(ox|mc))>0}get deletedAfter(){return(this.delInfo&(ax|mc))>0}get deletedAcross(){return(this.delInfo&mc)>0}}class xn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&xn.empty)return xn.empty}recover(e){let t=0,s=hb(e);if(!this.inverted)for(let l=0;l<s;l++)t+=this.ranges[l*3+2]-this.ranges[l*3+1];return this.ranges[s*3]+t+HE(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,s){let l=0,o=this.inverted?2:1,c=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?l:0);if(d>e)break;let h=this.ranges[f+o],m=this.ranges[f+c],y=d+h;if(e<=y){let b=h?e==d?-1:e==y?1:t:t,v=d+l+(b<0?0:m);if(s)return v;let k=e==(t<0?d:y)?null:BE(f/3,e-d),M=e==d?ax:e==y?ox:mc;return(t<0?e!=d:e!=y)&&(M|=cx),new Dh(v,M,k)}l+=m-h}return s?e+l:new Dh(e+l,0,null)}touches(e,t){let s=0,l=hb(t),o=this.inverted?2:1,c=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?s:0);if(d>e)break;let h=this.ranges[f+o],m=d+h;if(e<=m&&f==l*3)return!0;s+=this.ranges[f+c]-h}return!1}forEach(e){let t=this.inverted?2:1,s=this.inverted?1:2;for(let l=0,o=0;l<this.ranges.length;l+=3){let c=this.ranges[l],f=c-(this.inverted?o:0),d=c+(this.inverted?0:o),h=this.ranges[l+t],m=this.ranges[l+s];e(f,f+h,d,d+m),o+=m-h}}invert(){return new xn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?xn.empty:new xn(e<0?[0,-e,0]:[0,0,e])}}xn.empty=new xn([]);class Eo{constructor(e,t,s=0,l=e?e.length:0){this.mirror=t,this.from=s,this.to=l,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Eo(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,s=this._maps.length;t<e._maps.length;t++){let l=e.getMirror(t);this.appendMap(e._maps[t],l!=null&&l<t?s+l:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,s=this._maps.length+e._maps.length;t>=0;t--){let l=e.getMirror(t);this.appendMap(e._maps[t].invert(),l!=null&&l>t?s-l-1:void 0)}}invert(){let e=new Eo;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let s=this.from;s<this.to;s++)e=this._maps[s].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,s){let l=0;for(let o=this.from;o<this.to;o++){let c=this._maps[o],f=c.mapResult(e,t);if(f.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,e=this._maps[d].recover(f.recover);continue}}l|=f.delInfo,e=f.pos}return s?e:new Dh(e,l,null)}}const Wd=Object.create(null);class Pt{getMap(){return xn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let s=Wd[t.stepType];if(!s)throw new RangeError(`No step type ${t.stepType} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in Wd)throw new RangeError("Duplicate use of step JSON ID "+e);return Wd[e]=t,t.prototype.jsonID=e,t}}class Tt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Tt(e,null)}static fail(e){return new Tt(null,e)}static fromReplace(e,t,s,l){try{return Tt.ok(e.replace(t,s,l))}catch(o){if(o instanceof Sc)return Tt.fail(o.message);throw o}}}function op(n,e,t){let s=[];for(let l=0;l<n.childCount;l++){let o=n.child(l);o.content.size&&(o=o.copy(op(o.content,e,o))),o.isInline&&(o=e(o,t,l)),s.push(o)}return W.fromArray(s)}class as extends Pt{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=e.resolve(this.from),l=s.node(s.sharedDepth(this.to)),o=new ae(op(t.content,(c,f)=>!c.isAtom||!f.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),l),t.openStart,t.openEnd);return Tt.fromReplace(e,this.from,this.to,o)}invert(){return new qn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new as(t.pos,s.pos,this.mark)}merge(e){return e instanceof as&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new as(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new as(t.from,t.to,e.markFromJSON(t.mark))}}Pt.jsonID("addMark",as);class qn extends Pt{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=new ae(op(t.content,l=>l.mark(this.mark.removeFromSet(l.marks)),e),t.openStart,t.openEnd);return Tt.fromReplace(e,this.from,this.to,s)}invert(){return new as(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new qn(t.pos,s.pos,this.mark)}merge(e){return e instanceof qn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new qn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new qn(t.from,t.to,e.markFromJSON(t.mark))}}Pt.jsonID("removeMark",qn);class cs extends Pt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Tt.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Tt.fromReplace(e,this.pos,this.pos+1,new ae(W.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let s=this.mark.addToSet(t.marks);if(s.length==t.marks.length){for(let l=0;l<t.marks.length;l++)if(!t.marks[l].isInSet(s))return new cs(this.pos,t.marks[l]);return new cs(this.pos,this.mark)}}return new Zs(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new cs(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new cs(t.pos,e.markFromJSON(t.mark))}}Pt.jsonID("addNodeMark",cs);class Zs extends Pt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Tt.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Tt.fromReplace(e,this.pos,this.pos+1,new ae(W.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new cs(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Zs(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Zs(t.pos,e.markFromJSON(t.mark))}}Pt.jsonID("removeNodeMark",Zs);class Dt extends Pt{constructor(e,t,s,l=!1){super(),this.from=e,this.to=t,this.slice=s,this.structure=l}apply(e){return this.structure&&jh(e,this.from,this.to)?Tt.fail("Structure replace would overwrite content"):Tt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new xn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Dt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deletedAcross&&s.deletedAcross?null:new Dt(t.pos,Math.max(t.pos,s.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Dt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?ae.empty:new ae(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Dt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?ae.empty:new ae(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Dt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Dt(t.from,t.to,ae.fromJSON(e,t.slice),!!t.structure)}}Pt.jsonID("replace",Dt);class jt extends Pt{constructor(e,t,s,l,o,c,f=!1){super(),this.from=e,this.to=t,this.gapFrom=s,this.gapTo=l,this.slice=o,this.insert=c,this.structure=f}apply(e){if(this.structure&&(jh(e,this.from,this.gapFrom)||jh(e,this.gapTo,this.to)))return Tt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Tt.fail("Gap is not a flat range");let s=this.slice.insertAt(this.insert,t.content);return s?Tt.fromReplace(e,this.from,this.to,s):Tt.fail("Content does not fit in gap")}getMap(){return new xn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new jt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1),l=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?s.pos:e.map(this.gapTo,1);return t.deletedAcross&&s.deletedAcross||l<t.pos||o>s.pos?null:new jt(t.pos,s.pos,l,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new jt(t.from,t.to,t.gapFrom,t.gapTo,ae.fromJSON(e,t.slice),t.insert,!!t.structure)}}Pt.jsonID("replaceAround",jt);function jh(n,e,t){let s=n.resolve(e),l=t-e,o=s.depth;for(;l>0&&o>0&&s.indexAfter(o)==s.node(o).childCount;)o--,l--;if(l>0){let c=s.node(o).maybeChild(s.indexAfter(o));for(;l>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,l--}}return!1}function UE(n,e,t,s){let l=[],o=[],c,f;n.doc.nodesBetween(e,t,(d,h,m)=>{if(!d.isInline)return;let y=d.marks;if(!s.isInSet(y)&&m.type.allowsMarkType(s.type)){let b=Math.max(h,e),v=Math.min(h+d.nodeSize,t),k=s.addToSet(y);for(let M=0;M<y.length;M++)y[M].isInSet(k)||(c&&c.to==b&&c.mark.eq(y[M])?c.to=v:l.push(c=new qn(b,v,y[M])));f&&f.to==b?f.to=v:o.push(f=new as(b,v,s))}}),l.forEach(d=>n.step(d)),o.forEach(d=>n.step(d))}function IE(n,e,t,s){let l=[],o=0;n.doc.nodesBetween(e,t,(c,f)=>{if(!c.isInline)return;o++;let d=null;if(s instanceof uu){let h=c.marks,m;for(;m=s.isInSet(h);)(d||(d=[])).push(m),h=m.removeFromSet(h)}else s?s.isInSet(c.marks)&&(d=[s]):d=c.marks;if(d&&d.length){let h=Math.min(f+c.nodeSize,t);for(let m=0;m<d.length;m++){let y=d[m],b;for(let v=0;v<l.length;v++){let k=l[v];k.step==o-1&&y.eq(l[v].style)&&(b=k)}b?(b.to=h,b.step=o):l.push({style:y,from:Math.max(f,e),to:h,step:o})}}}),l.forEach(c=>n.step(new qn(c.from,c.to,c.style)))}function ap(n,e,t,s=t.contentMatch,l=!0){let o=n.doc.nodeAt(e),c=[],f=e+1;for(let d=0;d<o.childCount;d++){let h=o.child(d),m=f+h.nodeSize,y=s.matchType(h.type);if(!y)c.push(new Dt(f,m,ae.empty));else{s=y;for(let b=0;b<h.marks.length;b++)t.allowsMarkType(h.marks[b].type)||n.step(new qn(f,m,h.marks[b]));if(l&&h.isText&&t.whitespace!="pre"){let b,v=/\r?\n|\r/g,k;for(;b=v.exec(h.text);)k||(k=new ae(W.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),c.push(new Dt(f+b.index,f+b.index+b[0].length,k))}}f=m}if(!s.validEnd){let d=s.fillBefore(W.empty,!0);n.replace(f,f,new ae(d,0,0))}for(let d=c.length-1;d>=0;d--)n.step(c[d])}function VE(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function al(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let s=n.depth,l=0,o=0;;--s){let c=n.$from.node(s),f=n.$from.index(s)+l,d=n.$to.indexAfter(s)-o;if(s<n.depth&&c.canReplace(f,d,t))return s;if(s==0||c.type.spec.isolating||!VE(c,f,d))break;f&&(l=1),d<c.childCount&&(o=1)}return null}function qE(n,e,t){let{$from:s,$to:l,depth:o}=e,c=s.before(o+1),f=l.after(o+1),d=c,h=f,m=W.empty,y=0;for(let k=o,M=!1;k>t;k--)M||s.index(k)>0?(M=!0,m=W.from(s.node(k).copy(m)),y++):d--;let b=W.empty,v=0;for(let k=o,M=!1;k>t;k--)M||l.after(k+1)<l.end(k)?(M=!0,b=W.from(l.node(k).copy(b)),v++):h++;n.step(new jt(d,h,c,f,new ae(m.append(b),y,v),m.size-y,!0))}function cp(n,e,t=null,s=n){let l=$E(n,e),o=l&&GE(s,e);return o?l.map(pb).concat({type:e,attrs:t}).concat(o.map(pb)):null}function pb(n){return{type:n,attrs:null}}function $E(n,e){let{parent:t,startIndex:s,endIndex:l}=n,o=t.contentMatchAt(s).findWrapping(e);if(!o)return null;let c=o.length?o[0]:e;return t.canReplaceWith(s,l,c)?o:null}function GE(n,e){let{parent:t,startIndex:s,endIndex:l}=n,o=t.child(s),c=e.contentMatch.findWrapping(o.type);if(!c)return null;let d=(c.length?c[c.length-1]:e).contentMatch;for(let h=s;d&&h<l;h++)d=d.matchType(t.child(h).type);return!d||!d.validEnd?null:c}function YE(n,e,t){let s=W.empty;for(let c=t.length-1;c>=0;c--){if(s.size){let f=t[c].type.contentMatch.matchFragment(s);if(!f||!f.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}s=W.from(t[c].type.create(t[c].attrs,s))}let l=e.start,o=e.end;n.step(new jt(l,o,l,o,new ae(s,0,0),t.length,!0))}function KE(n,e,t,s,l){if(!s.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(c,f)=>{let d=typeof l=="function"?l(c):l;if(c.isTextblock&&!c.hasMarkup(s,d)&&PE(n.doc,n.mapping.slice(o).map(f),s)){let h=null;if(s.schema.linebreakReplacement){let v=s.whitespace=="pre",k=!!s.contentMatch.matchType(s.schema.linebreakReplacement);v&&!k?h=!1:!v&&k&&(h=!0)}h===!1&&fx(n,c,f,o),ap(n,n.mapping.slice(o).map(f,1),s,void 0,h===null);let m=n.mapping.slice(o),y=m.map(f,1),b=m.map(f+c.nodeSize,1);return n.step(new jt(y,b,y+1,b-1,new ae(W.from(s.create(d,null,c.marks)),0,0),1,!0)),h===!0&&ux(n,c,f,o),!1}})}function ux(n,e,t,s){e.forEach((l,o)=>{if(l.isText){let c,f=/\r?\n|\r/g;for(;c=f.exec(l.text);){let d=n.mapping.slice(s).map(t+1+o+c.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function fx(n,e,t,s){e.forEach((l,o)=>{if(l.type==l.type.schema.linebreakReplacement){let c=n.mapping.slice(s).map(t+1+o);n.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function PE(n,e,t){let s=n.resolve(e),l=s.index();return s.parent.canReplaceWith(l,l+1,t)}function JE(n,e,t,s,l){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let c=t.create(s,null,l||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,c);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new jt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new ae(W.from(c),0,0),1,!0))}function Tr(n,e,t=1,s){let l=n.resolve(e),o=l.depth-t,c=s&&s[s.length-1]||l.parent;if(o<0||l.parent.type.spec.isolating||!l.parent.canReplace(l.index(),l.parent.childCount)||!c.type.validContent(l.parent.content.cutByIndex(l.index(),l.parent.childCount)))return!1;for(let h=l.depth-1,m=t-2;h>o;h--,m--){let y=l.node(h),b=l.index(h);if(y.type.spec.isolating)return!1;let v=y.content.cutByIndex(b,y.childCount),k=s&&s[m+1];k&&(v=v.replaceChild(0,k.type.create(k.attrs)));let M=s&&s[m]||y;if(!y.canReplace(b+1,y.childCount)||!M.type.validContent(v))return!1}let f=l.indexAfter(o),d=s&&s[0];return l.node(o).canReplaceWith(f,f,d?d.type:l.node(o+1).type)}function FE(n,e,t=1,s){let l=n.doc.resolve(e),o=W.empty,c=W.empty;for(let f=l.depth,d=l.depth-t,h=t-1;f>d;f--,h--){o=W.from(l.node(f).copy(o));let m=s&&s[h];c=W.from(m?m.type.create(m.attrs,c):l.node(f).copy(c))}n.step(new Dt(e,e,new ae(o.append(c),t,t),!0))}function bs(n,e){let t=n.resolve(e),s=t.index();return dx(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(s,s+1)}function XE(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:s}=n.type.schema;for(let l=0;l<e.childCount;l++){let o=e.child(l),c=o.type==s?n.type.schema.nodes.text:o.type;if(t=t.matchType(c),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function dx(n,e){return!!(n&&e&&!n.isLeaf&&XE(n,e))}function fu(n,e,t=-1){let s=n.resolve(e);for(let l=s.depth;;l--){let o,c,f=s.index(l);if(l==s.depth?(o=s.nodeBefore,c=s.nodeAfter):t>0?(o=s.node(l+1),f++,c=s.node(l).maybeChild(f)):(o=s.node(l).maybeChild(f-1),c=s.node(l+1)),o&&!o.isTextblock&&dx(o,c)&&s.node(l).canReplace(f,f+1))return e;if(l==0)break;e=t<0?s.before(l):s.after(l)}}function QE(n,e,t){let s=null,{linebreakReplacement:l}=n.doc.type.schema,o=n.doc.resolve(e-t),c=o.node().type;if(l&&c.inlineContent){let m=c.whitespace=="pre",y=!!c.contentMatch.matchType(l);m&&!y?s=!1:!m&&y&&(s=!0)}let f=n.steps.length;if(s===!1){let m=n.doc.resolve(e+t);fx(n,m.node(),m.before(),f)}c.inlineContent&&ap(n,e+t-1,c,o.node().contentMatchAt(o.index()),s==null);let d=n.mapping.slice(f),h=d.map(e-t);if(n.step(new Dt(h,d.map(e+t,-1),ae.empty,!0)),s===!0){let m=n.doc.resolve(h);ux(n,m.node(),m.before(),n.steps.length)}return n}function ZE(n,e,t){let s=n.resolve(e);if(s.parent.canReplaceWith(s.index(),s.index(),t))return e;if(s.parentOffset==0)for(let l=s.depth-1;l>=0;l--){let o=s.index(l);if(s.node(l).canReplaceWith(o,o,t))return s.before(l+1);if(o>0)return null}if(s.parentOffset==s.parent.content.size)for(let l=s.depth-1;l>=0;l--){let o=s.indexAfter(l);if(s.node(l).canReplaceWith(o,o,t))return s.after(l+1);if(o<s.node(l).childCount)return null}return null}function hx(n,e,t){let s=n.resolve(e);if(!t.content.size)return e;let l=t.content;for(let o=0;o<t.openStart;o++)l=l.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let c=s.depth;c>=0;c--){let f=c==s.depth?0:s.pos<=(s.start(c+1)+s.end(c+1))/2?-1:1,d=s.index(c)+(f>0?1:0),h=s.node(c),m=!1;if(o==1)m=h.canReplace(d,d,l);else{let y=h.contentMatchAt(d).findWrapping(l.firstChild.type);m=y&&h.canReplaceWith(d,d,y[0])}if(m)return f==0?s.pos:f<0?s.before(c+1):s.after(c+1)}return null}function du(n,e,t=e,s=ae.empty){if(e==t&&!s.size)return null;let l=n.resolve(e),o=n.resolve(t);return px(l,o,s)?new Dt(e,t,s):new WE(l,o,s).fit()}function px(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class WE{constructor(e,t,s){this.$from=e,this.$to=t,this.unplaced=s,this.frontier=[],this.placed=W.empty;for(let l=0;l<=e.depth;l++){let o=e.node(l);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(l))})}for(let l=e.depth;l>0;l--)this.placed=W.from(e.node(l).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,s=this.$from,l=this.close(e<0?this.$to:s.doc.resolve(e));if(!l)return null;let o=this.placed,c=s.depth,f=l.depth;for(;c&&f&&o.childCount==1;)o=o.firstChild.content,c--,f--;let d=new ae(o,c,f);return e>-1?new jt(s.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||s.pos!=this.$to.pos?new Dt(s.pos,l.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,s=0,l=this.unplaced.openEnd;s<e;s++){let o=t.firstChild;if(t.childCount>1&&(l=0),o.type.spec.isolating&&l<=s){e=s;break}t=o.content}for(let t=1;t<=2;t++)for(let s=t==1?e:this.unplaced.openStart;s>=0;s--){let l,o=null;s?(o=eh(this.unplaced.content,s-1).firstChild,l=o.content):l=this.unplaced.content;let c=l.firstChild;for(let f=this.depth;f>=0;f--){let{type:d,match:h}=this.frontier[f],m,y=null;if(t==1&&(c?h.matchType(c.type)||(y=h.fillBefore(W.from(c),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:s,frontierDepth:f,parent:o,inject:y};if(t==2&&c&&(m=h.findWrapping(c.type)))return{sliceDepth:s,frontierDepth:f,parent:o,wrap:m};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:s}=this.unplaced,l=eh(e,t);return!l.childCount||l.firstChild.isLeaf?!1:(this.unplaced=new ae(e,t+1,Math.max(s,l.size+t>=e.size-s?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:s}=this.unplaced,l=eh(e,t);if(l.childCount<=1&&t>0){let o=e.size-t<=t+l.size;this.unplaced=new ae(lo(e,t-1,1),t-1,o?t-1:s)}else this.unplaced=new ae(lo(e,t,1),t,s)}placeNodes({sliceDepth:e,frontierDepth:t,parent:s,inject:l,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let M=0;M<o.length;M++)this.openFrontierNode(o[M]);let c=this.unplaced,f=s?s.content:c.content,d=c.openStart-e,h=0,m=[],{match:y,type:b}=this.frontier[t];if(l){for(let M=0;M<l.childCount;M++)m.push(l.child(M));y=y.matchFragment(l)}let v=f.size+e-(c.content.size-c.openEnd);for(;h<f.childCount;){let M=f.child(h),E=y.matchType(M.type);if(!E)break;h++,(h>1||d==0||M.content.size)&&(y=E,m.push(mx(M.mark(b.allowedMarks(M.marks)),h==1?d:0,h==f.childCount?v:-1)))}let k=h==f.childCount;k||(v=-1),this.placed=oo(this.placed,t,W.from(m)),this.frontier[t].match=y,k&&v<0&&s&&s.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let M=0,E=f;M<v;M++){let C=E.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),E=C.content}this.unplaced=k?e==0?ae.empty:new ae(lo(c.content,e-1,1),e-1,v<0?c.openEnd:e-1):new ae(lo(c.content,e,h),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!th(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:s}=this.$to,l=this.$to.after(s);for(;s>1&&l==this.$to.end(--s);)++l;return l}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:s,type:l}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),c=th(e,t,l,s,o);if(c){for(let f=t-1;f>=0;f--){let{match:d,type:h}=this.frontier[f],m=th(e,f,h,d,!0);if(!m||m.childCount)continue e}return{depth:t,fit:c,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=oo(this.placed,t.depth,t.fit)),e=t.move;for(let s=t.depth+1;s<=e.depth;s++){let l=e.node(s),o=l.type.contentMatch.fillBefore(l.content,!0,e.index(s));this.openFrontierNode(l.type,l.attrs,o)}return e}openFrontierNode(e,t=null,s){let l=this.frontier[this.depth];l.match=l.match.matchType(e),this.placed=oo(this.placed,this.depth,W.from(e.create(t,s))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(W.empty,!0);t.childCount&&(this.placed=oo(this.placed,this.frontier.length,t))}}function lo(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(lo(n.firstChild.content,e-1,t)))}function oo(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(oo(n.lastChild.content,e-1,t)))}function eh(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function mx(n,e,t){if(e<=0)return n;let s=n.content;return e>1&&(s=s.replaceChild(0,mx(s.firstChild,e-1,s.childCount==1?t-1:0))),e>0&&(s=n.type.contentMatch.fillBefore(s).append(s),t<=0&&(s=s.append(n.type.contentMatch.matchFragment(s).fillBefore(W.empty,!0)))),n.copy(s)}function th(n,e,t,s,l){let o=n.node(e),c=l?n.indexAfter(e):n.index(e);if(c==o.childCount&&!t.compatibleContent(o.type))return null;let f=s.fillBefore(o.content,!0,c);return f&&!eM(t,o.content,c)?f:null}function eM(n,e,t){for(let s=t;s<e.childCount;s++)if(!n.allowsMarks(e.child(s).marks))return!0;return!1}function tM(n){return n.spec.defining||n.spec.definingForContent}function nM(n,e,t,s){if(!s.size)return n.deleteRange(e,t);let l=n.doc.resolve(e),o=n.doc.resolve(t);if(px(l,o,s))return n.step(new Dt(e,t,s));let c=yx(l,o);c[c.length-1]==0&&c.pop();let f=-(l.depth+1);c.unshift(f);for(let b=l.depth,v=l.pos-1;b>0;b--,v--){let k=l.node(b).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;c.indexOf(b)>-1?f=b:l.before(b)==v&&c.splice(1,0,-b)}let d=c.indexOf(f),h=[],m=s.openStart;for(let b=s.content,v=0;;v++){let k=b.firstChild;if(h.push(k),v==s.openStart)break;b=k.content}for(let b=m-1;b>=0;b--){let v=h[b],k=tM(v.type);if(k&&!v.sameMarkup(l.node(Math.abs(f)-1)))m=b;else if(k||!v.type.isTextblock)break}for(let b=s.openStart;b>=0;b--){let v=(b+m+1)%(s.openStart+1),k=h[v];if(k)for(let M=0;M<c.length;M++){let E=c[(M+d)%c.length],C=!0;E<0&&(C=!1,E=-E);let z=l.node(E-1),B=l.index(E-1);if(z.canReplaceWith(B,B,k.type,k.marks))return n.replace(l.before(E),C?o.after(E):t,new ae(gx(s.content,0,s.openStart,v),v,s.openEnd))}}let y=n.steps.length;for(let b=c.length-1;b>=0&&(n.replace(e,t,s),!(n.steps.length>y));b--){let v=c[b];v<0||(e=l.before(v),t=o.after(v))}}function gx(n,e,t,s,l){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(gx(o.content,e+1,t,s,o)))}if(e>s){let o=l.contentMatchAt(0),c=o.fillBefore(n).append(n);n=c.append(o.matchFragment(c).fillBefore(W.empty,!0))}return n}function rM(n,e,t,s){if(!s.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let l=ZE(n.doc,e,s.type);l!=null&&(e=t=l)}n.replaceRange(e,t,new ae(W.from(s),0,0))}function sM(n,e,t){let s=n.doc.resolve(e),l=n.doc.resolve(t),o=yx(s,l);for(let c=0;c<o.length;c++){let f=o[c],d=c==o.length-1;if(d&&f==0||s.node(f).type.contentMatch.validEnd)return n.delete(s.start(f),l.end(f));if(f>0&&(d||s.node(f-1).canReplace(s.index(f-1),l.indexAfter(f-1))))return n.delete(s.before(f),l.after(f))}for(let c=1;c<=s.depth&&c<=l.depth;c++)if(e-s.start(c)==s.depth-c&&t>s.end(c)&&l.end(c)-t!=l.depth-c&&s.start(c-1)==l.start(c-1)&&s.node(c-1).canReplace(s.index(c-1),l.index(c-1)))return n.delete(s.before(c),t);n.delete(e,t)}function yx(n,e){let t=[],s=Math.min(n.depth,e.depth);for(let l=s;l>=0;l--){let o=n.start(l);if(o<n.pos-(n.depth-l)||e.end(l)>e.pos+(e.depth-l)||n.node(l).type.spec.isolating||e.node(l).type.spec.isolating)break;(o==e.start(l)||l==n.depth&&l==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&l&&e.start(l-1)==o-1)&&t.push(l)}return t}class Wi extends Pt{constructor(e,t,s){super(),this.pos=e,this.attr=t,this.value=s}apply(e){let t=e.nodeAt(this.pos);if(!t)return Tt.fail("No node at attribute step's position");let s=Object.create(null);for(let o in t.attrs)s[o]=t.attrs[o];s[this.attr]=this.value;let l=t.type.create(s,null,t.marks);return Tt.fromReplace(e,this.pos,this.pos+1,new ae(W.from(l),0,t.isLeaf?0:1))}getMap(){return xn.empty}invert(e){return new Wi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Wi(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Wi(t.pos,t.attr,t.value)}}Pt.jsonID("attr",Wi);class Mo extends Pt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let l in e.attrs)t[l]=e.attrs[l];t[this.attr]=this.value;let s=e.type.create(t,e.content,e.marks);return Tt.ok(s)}getMap(){return xn.empty}invert(e){return new Mo(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Mo(t.attr,t.value)}}Pt.jsonID("docAttr",Mo);let tl=class extends Error{};tl=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};tl.prototype=Object.create(Error.prototype);tl.prototype.constructor=tl;tl.prototype.name="TransformError";class bx{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Eo}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new tl(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,t=-1e9;for(let s=0;s<this.mapping.maps.length;s++){let l=this.mapping.maps[s];s&&(e=l.map(e,1),t=l.map(t,-1)),l.forEach((o,c,f,d)=>{e=Math.min(e,f),t=Math.max(t,d)})}return e==1e9?null:{from:e,to:t}}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,s=ae.empty){let l=du(this.doc,e,t,s);return l&&this.step(l),this}replaceWith(e,t,s){return this.replace(e,t,new ae(W.from(s),0,0))}delete(e,t){return this.replace(e,t,ae.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,s){return nM(this,e,t,s),this}replaceRangeWith(e,t,s){return rM(this,e,t,s),this}deleteRange(e,t){return sM(this,e,t),this}lift(e,t){return qE(this,e,t),this}join(e,t=1){return QE(this,e,t),this}wrap(e,t){return YE(this,e,t),this}setBlockType(e,t=e,s,l=null){return KE(this,e,t,s,l),this}setNodeMarkup(e,t,s=null,l){return JE(this,e,t,s,l),this}setNodeAttribute(e,t,s){return this.step(new Wi(e,t,s)),this}setDocAttribute(e,t){return this.step(new Mo(e,t)),this}addNodeMark(e,t){return this.step(new cs(e,t)),this}removeNodeMark(e,t){let s=this.doc.nodeAt(e);if(!s)throw new RangeError("No node at position "+e);if(t instanceof et)t.isInSet(s.marks)&&this.step(new Zs(e,t));else{let l=s.marks,o,c=[];for(;o=t.isInSet(l);)c.push(new Zs(e,o)),l=o.removeFromSet(l);for(let f=c.length-1;f>=0;f--)this.step(c[f])}return this}split(e,t=1,s){return FE(this,e,t,s),this}addMark(e,t,s){return UE(this,e,t,s),this}removeMark(e,t,s){return IE(this,e,t,s),this}clearIncompatible(e,t,s){return ap(this,e,t,s),this}}const nh=Object.create(null);class Oe{constructor(e,t,s){this.$anchor=e,this.$head=t,this.ranges=s||[new iM(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=ae.empty){let s=t.content.lastChild,l=null;for(let f=0;f<t.openEnd;f++)l=s,s=s.lastChild;let o=e.steps.length,c=this.ranges;for(let f=0;f<c.length;f++){let{$from:d,$to:h}=c[f],m=e.mapping.slice(o);e.replaceRange(m.map(d.pos),m.map(h.pos),f?ae.empty:t),f==0&&yb(e,o,(s?s.isInline:l&&l.isTextblock)?-1:1)}}replaceWith(e,t){let s=e.steps.length,l=this.ranges;for(let o=0;o<l.length;o++){let{$from:c,$to:f}=l[o],d=e.mapping.slice(s),h=d.map(c.pos),m=d.map(f.pos);o?e.deleteRange(h,m):(e.replaceRangeWith(h,m,t),yb(e,s,t.isInline?-1:1))}}static findFrom(e,t,s=!1){let l=e.parent.inlineContent?new Se(e):Pi(e.node(0),e.parent,e.pos,e.index(),t,s);if(l)return l;for(let o=e.depth-1;o>=0;o--){let c=t<0?Pi(e.node(0),e.node(o),e.before(o+1),e.index(o),t,s):Pi(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,s);if(c)return c}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new vn(e.node(0))}static atStart(e){return Pi(e,e,0,0,1)||new vn(e)}static atEnd(e){return Pi(e,e,e.content.size,e.childCount,-1)||new vn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let s=nh[t.type];if(!s)throw new RangeError(`No selection type ${t.type} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in nh)throw new RangeError("Duplicate use of selection JSON ID "+e);return nh[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Se.between(this.$anchor,this.$head).getBookmark()}}Oe.prototype.visible=!0;class iM{constructor(e,t){this.$from=e,this.$to=t}}let mb=!1;function gb(n){!mb&&!n.parent.inlineContent&&(mb=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Se extends Oe{constructor(e,t=e){gb(e),gb(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let s=e.resolve(t.map(this.head));if(!s.parent.inlineContent)return Oe.near(s);let l=e.resolve(t.map(this.anchor));return new Se(l.parent.inlineContent?l:s,s)}replace(e,t=ae.empty){if(super.replace(e,t),t==ae.empty){let s=this.$from.marksAcross(this.$to);s&&e.ensureMarks(s)}}eq(e){return e instanceof Se&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new hu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Se(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,s=t){let l=e.resolve(t);return new this(l,s==t?l:e.resolve(s))}static between(e,t,s){let l=e.pos-t.pos;if((!s||l)&&(s=l>=0?1:-1),!t.parent.inlineContent){let o=Oe.findFrom(t,s,!0)||Oe.findFrom(t,-s,!0);if(o)t=o.$head;else return Oe.near(t,s)}return e.parent.inlineContent||(l==0?e=t:(e=(Oe.findFrom(e,-s,!0)||Oe.findFrom(e,s,!0)).$anchor,e.pos<t.pos!=l<0&&(e=t))),new Se(e,t)}}Oe.jsonID("text",Se);class hu{constructor(e,t){this.anchor=e,this.head=t}map(e){return new hu(e.map(this.anchor),e.map(this.head))}resolve(e){return Se.between(e.resolve(this.anchor),e.resolve(this.head))}}class ge extends Oe{constructor(e){let t=e.nodeAfter,s=e.node(0).resolve(e.pos+t.nodeSize);super(e,s),this.node=t}map(e,t){let{deleted:s,pos:l}=t.mapResult(this.anchor),o=e.resolve(l);return s?Oe.near(o):new ge(o)}content(){return new ae(W.from(this.node),0,0)}eq(e){return e instanceof ge&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new up(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ge(e.resolve(t.anchor))}static create(e,t){return new ge(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ge.prototype.visible=!1;Oe.jsonID("node",ge);class up{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:s}=e.mapResult(this.anchor);return t?new hu(s,s):new up(s)}resolve(e){let t=e.resolve(this.anchor),s=t.nodeAfter;return s&&ge.isSelectable(s)?new ge(t):Oe.near(t)}}class vn extends Oe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=ae.empty){if(t==ae.empty){e.delete(0,e.doc.content.size);let s=Oe.atStart(e.doc);s.eq(e.selection)||e.setSelection(s)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new vn(e)}map(e){return new vn(e)}eq(e){return e instanceof vn}getBookmark(){return lM}}Oe.jsonID("all",vn);const lM={map(){return this},resolve(n){return new vn(n)}};function Pi(n,e,t,s,l,o=!1){if(e.inlineContent)return Se.create(n,t);for(let c=s-(l>0?0:1);l>0?c<e.childCount:c>=0;c+=l){let f=e.child(c);if(f.isAtom){if(!o&&ge.isSelectable(f))return ge.create(n,t-(l<0?f.nodeSize:0))}else{let d=Pi(n,f,t+l,l<0?f.childCount:0,l,o);if(d)return d}t+=f.nodeSize*l}return null}function yb(n,e,t){let s=n.steps.length-1;if(s<e)return;let l=n.steps[s];if(!(l instanceof Dt||l instanceof jt))return;let o=n.mapping.maps[s],c;o.forEach((f,d,h,m)=>{c==null&&(c=m)}),n.setSelection(Oe.near(n.doc.resolve(c),t))}const bb=1,rc=2,xb=4;class oM extends bx{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|bb)&~rc,this.storedMarks=null,this}get selectionSet(){return(this.updated&bb)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=rc,this}ensureMarks(e){return et.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&rc)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~rc,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let s=this.selection;return t&&(e=e.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||et.none))),s.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,s){let l=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(l.text(e),!0):this.deleteSelection();{if(s==null&&(s=t),!e)return this.deleteRange(t,s);let o=this.storedMarks;if(!o){let c=this.doc.resolve(t);o=s==t?c.marks():c.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(t,s,l.text(e,o)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(Oe.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=xb,this}get scrolledIntoView(){return(this.updated&xb)>0}}function vb(n,e){return!e||!n?n:n.bind(e)}class ao{constructor(e,t,s){this.name=e,this.init=vb(t.init,s),this.apply=vb(t.apply,s)}}const aM=[new ao("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new ao("selection",{init(n,e){return n.selection||Oe.atStart(e.doc)},apply(n){return n.selection}}),new ao("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,s){return s.selection.$cursor?n.storedMarks:null}}),new ao("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class rh{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=aM.slice(),t&&t.forEach(s=>{if(this.pluginsByKey[s.key])throw new RangeError("Adding different instances of a keyed plugin ("+s.key+")");this.plugins.push(s),this.pluginsByKey[s.key]=s,s.spec.state&&this.fields.push(new ao(s.key,s.spec.state,s))})}}class Qi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let s=0;s<this.config.plugins.length;s++)if(s!=t){let l=this.config.plugins[s];if(l.spec.filterTransaction&&!l.spec.filterTransaction.call(l,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],s=this.applyInner(e),l=null;for(;;){let o=!1;for(let c=0;c<this.config.plugins.length;c++){let f=this.config.plugins[c];if(f.spec.appendTransaction){let d=l?l[c].n:0,h=l?l[c].state:this,m=d<t.length&&f.spec.appendTransaction.call(f,d?t.slice(d):t,h,s);if(m&&s.filterTransaction(m,c)){if(m.setMeta("appendedTransaction",e),!l){l=[];for(let y=0;y<this.config.plugins.length;y++)l.push(y<c?{state:s,n:t.length}:{state:this,n:0})}t.push(m),s=s.applyInner(m),o=!0}l&&(l[c]={state:s,n:t.length})}}if(!o)return{state:s,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Qi(this.config),s=this.config.fields;for(let l=0;l<s.length;l++){let o=s[l];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new oM(this)}static create(e){let t=new rh(e.doc?e.doc.type.schema:e.schema,e.plugins),s=new Qi(t);for(let l=0;l<t.fields.length;l++)s[t.fields[l].name]=t.fields[l].init(e,s);return s}reconfigure(e){let t=new rh(this.schema,e.plugins),s=t.fields,l=new Qi(t);for(let o=0;o<s.length;o++){let c=s[o].name;l[c]=this.hasOwnProperty(c)?this[c]:s[o].init(e,l)}return l}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(s=>s.toJSON())),e&&typeof e=="object")for(let s in e){if(s=="doc"||s=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let l=e[s],o=l.spec.state;o&&o.toJSON&&(t[s]=o.toJSON.call(l,this[l.key]))}return t}static fromJSON(e,t,s){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let l=new rh(e.schema,e.plugins),o=new Qi(l);return l.fields.forEach(c=>{if(c.name=="doc")o.doc=fs.fromJSON(e.schema,t.doc);else if(c.name=="selection")o.selection=Oe.fromJSON(o.doc,t.selection);else if(c.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(s)for(let f in s){let d=s[f],h=d.spec.state;if(d.key==c.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,f)){o[c.name]=h.fromJSON.call(d,e,t[f],o);return}}o[c.name]=c.init(e,o)}}),o}}function xx(n,e,t){for(let s in n){let l=n[s];l instanceof Function?l=l.bind(e):s=="handleDOMEvents"&&(l=xx(l,e,{})),t[s]=l}return t}class ft{constructor(e){this.spec=e,this.props={},e.props&&xx(e.props,this,this.props),this.key=e.key?e.key.key:vx("plugin")}getState(e){return e[this.key]}}const sh=Object.create(null);function vx(n){return n in sh?n+"$"+ ++sh[n]:(sh[n]=0,n+"$")}class wt{constructor(e="key"){this.key=vx(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const fp=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Sx(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const kx=(n,e,t)=>{let s=Sx(n,t);if(!s)return!1;let l=dp(s);if(!l){let c=s.blockRange(),f=c&&al(c);return f==null?!1:(e&&e(n.tr.lift(c,f).scrollIntoView()),!0)}let o=l.nodeBefore;if(Dx(n,l,e,-1))return!0;if(s.parent.content.size==0&&(nl(o,"end")||ge.isSelectable(o)))for(let c=s.depth;;c--){let f=du(n.doc,s.before(c),s.after(c),ae.empty);if(f&&f.slice.size<f.to-f.from){if(e){let d=n.tr.step(f);d.setSelection(nl(o,"end")?Oe.findFrom(d.doc.resolve(d.mapping.map(l.pos,-1)),-1):ge.create(d.doc,l.pos-o.nodeSize)),e(d.scrollIntoView())}return!0}if(c==1||s.node(c-1).childCount>1)break}return o.isAtom&&l.depth==s.depth-1?(e&&e(n.tr.delete(l.pos-o.nodeSize,l.pos).scrollIntoView()),!0):!1},cM=(n,e,t)=>{let s=Sx(n,t);if(!s)return!1;let l=dp(s);return l?Tx(n,l,e):!1},uM=(n,e,t)=>{let s=Mx(n,t);if(!s)return!1;let l=hp(s);return l?Tx(n,l,e):!1};function Tx(n,e,t){let s=e.nodeBefore,l=s,o=e.pos-1;for(;!l.isTextblock;o--){if(l.type.spec.isolating)return!1;let m=l.lastChild;if(!m)return!1;l=m}let c=e.nodeAfter,f=c,d=e.pos+1;for(;!f.isTextblock;d++){if(f.type.spec.isolating)return!1;let m=f.firstChild;if(!m)return!1;f=m}let h=du(n.doc,o,d,ae.empty);if(!h||h.from!=o||h instanceof Dt&&h.slice.size>=d-o)return!1;if(t){let m=n.tr.step(h);m.setSelection(Se.create(m.doc,o)),t(m.scrollIntoView())}return!0}function nl(n,e,t=!1){for(let s=n;s;s=e=="start"?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(t&&s.childCount!=1)return!1}return!1}const Ex=(n,e,t)=>{let{$head:s,empty:l}=n.selection,o=s;if(!l)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):s.parentOffset>0)return!1;o=dp(s)}let c=o&&o.nodeBefore;return!c||!ge.isSelectable(c)?!1:(e&&e(n.tr.setSelection(ge.create(n.doc,o.pos-c.nodeSize)).scrollIntoView()),!0)};function dp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Mx(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Cx=(n,e,t)=>{let s=Mx(n,t);if(!s)return!1;let l=hp(s);if(!l)return!1;let o=l.nodeAfter;if(Dx(n,l,e,1))return!0;if(s.parent.content.size==0&&(nl(o,"start")||ge.isSelectable(o))){let c=du(n.doc,s.before(),s.after(),ae.empty);if(c&&c.slice.size<c.to-c.from){if(e){let f=n.tr.step(c);f.setSelection(nl(o,"start")?Oe.findFrom(f.doc.resolve(f.mapping.map(l.pos)),1):ge.create(f.doc,f.mapping.map(l.pos))),e(f.scrollIntoView())}return!0}}return o.isAtom&&l.depth==s.depth-1?(e&&e(n.tr.delete(l.pos,l.pos+o.nodeSize).scrollIntoView()),!0):!1},wx=(n,e,t)=>{let{$head:s,empty:l}=n.selection,o=s;if(!l)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):s.parentOffset<s.parent.content.size)return!1;o=hp(s)}let c=o&&o.nodeAfter;return!c||!ge.isSelectable(c)?!1:(e&&e(n.tr.setSelection(ge.create(n.doc,o.pos)).scrollIntoView()),!0)};function hp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const fM=(n,e)=>{let t=n.selection,s=t instanceof ge,l;if(s){if(t.node.isTextblock||!bs(n.doc,t.from))return!1;l=t.from}else if(l=fu(n.doc,t.from,-1),l==null)return!1;if(e){let o=n.tr.join(l);s&&o.setSelection(ge.create(o.doc,l-n.doc.resolve(l).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},dM=(n,e)=>{let t=n.selection,s;if(t instanceof ge){if(t.node.isTextblock||!bs(n.doc,t.to))return!1;s=t.to}else if(s=fu(n.doc,t.to,1),s==null)return!1;return e&&e(n.tr.join(s).scrollIntoView()),!0},hM=(n,e)=>{let{$from:t,$to:s}=n.selection,l=t.blockRange(s),o=l&&al(l);return o==null?!1:(e&&e(n.tr.lift(l,o).scrollIntoView()),!0)},Nx=(n,e)=>{let{$head:t,$anchor:s}=n.selection;return!t.parent.type.spec.code||!t.sameParent(s)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function pp(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const pM=(n,e)=>{let{$head:t,$anchor:s}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(s))return!1;let l=t.node(-1),o=t.indexAfter(-1),c=pp(l.contentMatchAt(o));if(!c||!l.canReplaceWith(o,o,c))return!1;if(e){let f=t.after(),d=n.tr.replaceWith(f,f,c.createAndFill());d.setSelection(Oe.near(d.doc.resolve(f),1)),e(d.scrollIntoView())}return!0},Ax=(n,e)=>{let t=n.selection,{$from:s,$to:l}=t;if(t instanceof vn||s.parent.inlineContent||l.parent.inlineContent)return!1;let o=pp(l.parent.contentMatchAt(l.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let c=(!s.parentOffset&&l.index()<l.parent.childCount?s:l).pos,f=n.tr.insert(c,o.createAndFill());f.setSelection(Se.create(f.doc,c+1)),e(f.scrollIntoView())}return!0},Ox=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(Tr(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let s=t.blockRange(),l=s&&al(s);return l==null?!1:(e&&e(n.tr.lift(s,l).scrollIntoView()),!0)};function mM(n){return(e,t)=>{let{$from:s,$to:l}=e.selection;if(e.selection instanceof ge&&e.selection.node.isBlock)return!s.parentOffset||!Tr(e.doc,s.pos)?!1:(t&&t(e.tr.split(s.pos).scrollIntoView()),!0);if(!s.depth)return!1;let o=[],c,f,d=!1,h=!1;for(let v=s.depth;;v--)if(s.node(v).isBlock){d=s.end(v)==s.pos+(s.depth-v),h=s.start(v)==s.pos-(s.depth-v),f=pp(s.node(v-1).contentMatchAt(s.indexAfter(v-1))),o.unshift(d&&f?{type:f}:null),c=v;break}else{if(v==1)return!1;o.unshift(null)}let m=e.tr;(e.selection instanceof Se||e.selection instanceof vn)&&m.deleteSelection();let y=m.mapping.map(s.pos),b=Tr(m.doc,y,o.length,o);if(b||(o[0]=f?{type:f}:null,b=Tr(m.doc,y,o.length,o)),!b)return!1;if(m.split(y,o.length,o),!d&&h&&s.node(c).type!=f){let v=m.mapping.map(s.before(c)),k=m.doc.resolve(v);f&&s.node(c-1).canReplaceWith(k.index(),k.index()+1,f)&&m.setNodeMarkup(m.mapping.map(s.before(c)),f)}return t&&t(m.scrollIntoView()),!0}}const gM=mM(),yM=(n,e)=>{let{$from:t,to:s}=n.selection,l,o=t.sharedDepth(s);return o==0?!1:(l=t.before(o),e&&e(n.tr.setSelection(ge.create(n.doc,l))),!0)};function bM(n,e,t){let s=e.nodeBefore,l=e.nodeAfter,o=e.index();return!s||!l||!s.type.compatibleContent(l.type)?!1:!s.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-s.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(l.isTextblock||bs(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function Dx(n,e,t,s){let l=e.nodeBefore,o=e.nodeAfter,c,f,d=l.type.spec.isolating||o.type.spec.isolating;if(!d&&bM(n,e,t))return!0;let h=!d&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(c=(f=l.contentMatchAt(l.childCount)).findWrapping(o.type))&&f.matchType(c[0]||o.type).validEnd){if(t){let v=e.pos+o.nodeSize,k=W.empty;for(let C=c.length-1;C>=0;C--)k=W.from(c[C].create(null,k));k=W.from(l.copy(k));let M=n.tr.step(new jt(e.pos-1,v,e.pos,v,new ae(k,1,0),c.length,!0)),E=M.doc.resolve(v+2*c.length);E.nodeAfter&&E.nodeAfter.type==l.type&&bs(M.doc,E.pos)&&M.join(E.pos),t(M.scrollIntoView())}return!0}let m=o.type.spec.isolating||s>0&&d?null:Oe.findFrom(e,1),y=m&&m.$from.blockRange(m.$to),b=y&&al(y);if(b!=null&&b>=e.depth)return t&&t(n.tr.lift(y,b).scrollIntoView()),!0;if(h&&nl(o,"start",!0)&&nl(l,"end")){let v=l,k=[];for(;k.push(v),!v.isTextblock;)v=v.lastChild;let M=o,E=1;for(;!M.isTextblock;M=M.firstChild)E++;if(v.canReplace(v.childCount,v.childCount,M.content)){if(t){let C=W.empty;for(let B=k.length-1;B>=0;B--)C=W.from(k[B].copy(C));let z=n.tr.step(new jt(e.pos-k.length,e.pos+o.nodeSize,e.pos+E,e.pos+o.nodeSize-E,new ae(C,k.length,0),0,!0));t(z.scrollIntoView())}return!0}}return!1}function jx(n){return function(e,t){let s=e.selection,l=n<0?s.$from:s.$to,o=l.depth;for(;l.node(o).isInline;){if(!o)return!1;o--}return l.node(o).isTextblock?(t&&t(e.tr.setSelection(Se.create(e.doc,n<0?l.start(o):l.end(o)))),!0):!1}}const xM=jx(-1),vM=jx(1);function SM(n,e=null){return function(t,s){let{$from:l,$to:o}=t.selection,c=l.blockRange(o),f=c&&cp(c,n,e);return f?(s&&s(t.tr.wrap(c,f).scrollIntoView()),!0):!1}}function Sb(n,e=null){return function(t,s){let l=!1;for(let o=0;o<t.selection.ranges.length&&!l;o++){let{$from:{pos:c},$to:{pos:f}}=t.selection.ranges[o];t.doc.nodesBetween(c,f,(d,h)=>{if(l)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)l=!0;else{let m=t.doc.resolve(h),y=m.index();l=m.parent.canReplaceWith(y,y+1,n)}})}if(!l)return!1;if(s){let o=t.tr;for(let c=0;c<t.selection.ranges.length;c++){let{$from:{pos:f},$to:{pos:d}}=t.selection.ranges[c];o.setBlockType(f,d,n,e)}s(o.scrollIntoView())}return!0}}function mp(...n){return function(e,t,s){for(let l=0;l<n.length;l++)if(n[l](e,t,s))return!0;return!1}}mp(fp,kx,Ex);mp(fp,Cx,wx);mp(Nx,Ax,Ox,gM);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function kM(n,e=null){return function(t,s){let{$from:l,$to:o}=t.selection,c=l.blockRange(o);if(!c)return!1;let f=s?t.tr:null;return TM(f,c,n,e)?(s&&s(f.scrollIntoView()),!0):!1}}function TM(n,e,t,s=null){let l=!1,o=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=c.resolve(e.start-2);o=new Tc(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Tc(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),l=!0}let f=cp(o,t,s,e);return f?(n&&EM(n,e,f,l,t),!0):!1}function EM(n,e,t,s,l){let o=W.empty;for(let m=t.length-1;m>=0;m--)o=W.from(t[m].type.create(t[m].attrs,o));n.step(new jt(e.start-(s?2:0),e.end,e.start,e.end,new ae(o,0,0),t.length,!0));let c=0;for(let m=0;m<t.length;m++)t[m].type==l&&(c=m+1);let f=t.length-c,d=e.start+t.length-(s?2:0),h=e.parent;for(let m=e.startIndex,y=e.endIndex,b=!0;m<y;m++,b=!1)!b&&Tr(n.doc,d,f)&&(n.split(d,f),d+=2*f),d+=h.child(m).nodeSize;return n}function MM(n){return function(e,t){let{$from:s,$to:l}=e.selection,o=s.blockRange(l,c=>c.childCount>0&&c.firstChild.type==n);return o?t?s.node(o.depth-1).type==n?CM(e,t,n,o):wM(e,t,o):!0:!1}}function CM(n,e,t,s){let l=n.tr,o=s.end,c=s.$to.end(s.depth);o<c&&(l.step(new jt(o-1,c,o,c,new ae(W.from(t.create(null,s.parent.copy())),1,0),1,!0)),s=new Tc(l.doc.resolve(s.$from.pos),l.doc.resolve(c),s.depth));const f=al(s);if(f==null)return!1;l.lift(s,f);let d=l.doc.resolve(l.mapping.map(o,-1)-1);return bs(l.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&l.join(d.pos),e(l.scrollIntoView()),!0}function wM(n,e,t){let s=n.tr,l=t.parent;for(let v=t.end,k=t.endIndex-1,M=t.startIndex;k>M;k--)v-=l.child(k).nodeSize,s.delete(v-1,v+1);let o=s.doc.resolve(t.start),c=o.nodeAfter;if(s.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let f=t.startIndex==0,d=t.endIndex==l.childCount,h=o.node(-1),m=o.index(-1);if(!h.canReplace(m+(f?0:1),m+1,c.content.append(d?W.empty:W.from(l))))return!1;let y=o.pos,b=y+c.nodeSize;return s.step(new jt(y-(f?1:0),b+(d?1:0),y+1,b-1,new ae((f?W.empty:W.from(l.copy(W.empty))).append(d?W.empty:W.from(l.copy(W.empty))),f?0:1,d?0:1),f?0:1)),e(s.scrollIntoView()),!0}function NM(n){return function(e,t){let{$from:s,$to:l}=e.selection,o=s.blockRange(l,h=>h.childCount>0&&h.firstChild.type==n);if(!o)return!1;let c=o.startIndex;if(c==0)return!1;let f=o.parent,d=f.child(c-1);if(d.type!=n)return!1;if(t){let h=d.lastChild&&d.lastChild.type==f.type,m=W.from(h?n.create():null),y=new ae(W.from(n.create(null,W.from(f.type.create(null,m)))),h?3:1,0),b=o.start,v=o.end;t(e.tr.step(new jt(b-(h?3:1),v,b,v,y,1,!0)).scrollIntoView())}return!0}}const It=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},rl=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Rh=null;const Sr=function(n,e,t){let s=Rh||(Rh=document.createRange());return s.setEnd(n,t??n.nodeValue.length),s.setStart(n,e||0),s},AM=function(){Rh=null},Ws=function(n,e,t,s){return t&&(kb(n,e,t,s,-1)||kb(n,e,t,s,1))},OM=/^(img|br|input|textarea|hr)$/i;function kb(n,e,t,s,l){for(var o;;){if(n==t&&e==s)return!0;if(e==(l<0?0:Ln(n))){let c=n.parentNode;if(!c||c.nodeType!=1||Lo(n)||OM.test(n.nodeName)||n.contentEditable=="false")return!1;e=It(n)+(l<0?0:1),n=c}else if(n.nodeType==1){let c=n.childNodes[e+(l<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((o=c.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=l;else return!1;else n=c,e=l<0?Ln(n):0}else return!1}}function Ln(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function DM(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Ln(n)}else if(n.parentNode&&!Lo(n))e=It(n),n=n.parentNode;else return null}}function jM(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Lo(n))e=It(n)+1,n=n.parentNode;else return null}}function RM(n,e,t){for(let s=e==0,l=e==Ln(n);s||l;){if(n==t)return!0;let o=It(n);if(n=n.parentNode,!n)return!1;s=s&&o==0,l=l&&o==Ln(n)}}function Lo(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const pu=function(n){return n.focusNode&&Ws(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Vs(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function zM(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function LM(n,e,t){if(n.caretPositionFromPoint)try{let s=n.caretPositionFromPoint(e,t);if(s)return{node:s.offsetNode,offset:Math.min(Ln(s.offsetNode),s.offset)}}catch{}if(n.caretRangeFromPoint){let s=n.caretRangeFromPoint(e,t);if(s)return{node:s.startContainer,offset:Math.min(Ln(s.startContainer),s.startOffset)}}}const Qn=typeof navigator<"u"?navigator:null,Tb=typeof document<"u"?document:null,xs=Qn&&Qn.userAgent||"",zh=/Edge\/(\d+)/.exec(xs),Rx=/MSIE \d/.exec(xs),Lh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(xs),an=!!(Rx||Lh||zh),hs=Rx?document.documentMode:Lh?+Lh[1]:zh?+zh[1]:0,_n=!an&&/gecko\/(\d+)/i.test(xs);_n&&+(/Firefox\/(\d+)/.exec(xs)||[0,0])[1];const _h=!an&&/Chrome\/(\d+)/.exec(xs),qt=!!_h,zx=_h?+_h[1]:0,Kt=!an&&!!Qn&&/Apple Computer/.test(Qn.vendor),sl=Kt&&(/Mobile\/\w+/.test(xs)||!!Qn&&Qn.maxTouchPoints>2),zn=sl||(Qn?/Mac/.test(Qn.platform):!1),Lx=Qn?/Win/.test(Qn.platform):!1,kr=/Android \d/.test(xs),_o=!!Tb&&"webkitFontSmoothing"in Tb.documentElement.style,_M=_o?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function BM(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function yr(n,e){return typeof n=="number"?n:n[e]}function HM(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,s=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*s}}function Eb(n,e,t){let s=n.someProp("scrollThreshold")||0,l=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let c=t||n.dom;c;){if(c.nodeType!=1){c=rl(c);continue}let f=c,d=f==o.body,h=d?BM(o):HM(f),m=0,y=0;if(e.top<h.top+yr(s,"top")?y=-(h.top-e.top+yr(l,"top")):e.bottom>h.bottom-yr(s,"bottom")&&(y=e.bottom-e.top>h.bottom-h.top?e.top+yr(l,"top")-h.top:e.bottom-h.bottom+yr(l,"bottom")),e.left<h.left+yr(s,"left")?m=-(h.left-e.left+yr(l,"left")):e.right>h.right-yr(s,"right")&&(m=e.right-h.right+yr(l,"right")),m||y)if(d)o.defaultView.scrollBy(m,y);else{let v=f.scrollLeft,k=f.scrollTop;y&&(f.scrollTop+=y),m&&(f.scrollLeft+=m);let M=f.scrollLeft-v,E=f.scrollTop-k;e={left:e.left-M,top:e.top-E,right:e.right-M,bottom:e.bottom-E}}let b=d?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(b))break;c=b=="absolute"?c.offsetParent:rl(c)}}function UM(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),s,l;for(let o=(e.left+e.right)/2,c=t+1;c<Math.min(innerHeight,e.bottom);c+=5){let f=n.root.elementFromPoint(o,c);if(!f||f==n.dom||!n.dom.contains(f))continue;let d=f.getBoundingClientRect();if(d.top>=t-20){s=f,l=d.top;break}}return{refDOM:s,refTop:l,stack:_x(n.dom)}}function _x(n){let e=[],t=n.ownerDocument;for(let s=n;s&&(e.push({dom:s,top:s.scrollTop,left:s.scrollLeft}),n!=t);s=rl(s));return e}function IM({refDOM:n,refTop:e,stack:t}){let s=n?n.getBoundingClientRect().top:0;Bx(t,s==0?0:s-e)}function Bx(n,e){for(let t=0;t<n.length;t++){let{dom:s,top:l,left:o}=n[t];s.scrollTop!=l+e&&(s.scrollTop=l+e),s.scrollLeft!=o&&(s.scrollLeft=o)}}let Gi=null;function VM(n){if(n.setActive)return n.setActive();if(Gi)return n.focus(Gi);let e=_x(n);n.focus(Gi==null?{get preventScroll(){return Gi={preventScroll:!0},!0}}:void 0),Gi||(Gi=!1,Bx(e,0))}function Hx(n,e){let t,s=2e8,l,o=0,c=e.top,f=e.top,d,h;for(let m=n.firstChild,y=0;m;m=m.nextSibling,y++){let b;if(m.nodeType==1)b=m.getClientRects();else if(m.nodeType==3)b=Sr(m).getClientRects();else continue;for(let v=0;v<b.length;v++){let k=b[v];if(k.top<=c&&k.bottom>=f){c=Math.max(k.bottom,c),f=Math.min(k.top,f);let M=k.left>e.left?k.left-e.left:k.right<e.left?e.left-k.right:0;if(M<s){t=m,s=M,l=M&&t.nodeType==3?{left:k.right<e.left?k.right:k.left,top:e.top}:e,m.nodeType==1&&M&&(o=y+(e.left>=(k.left+k.right)/2?1:0));continue}}else k.top>e.top&&!d&&k.left<=e.left&&k.right>=e.left&&(d=m,h={left:Math.max(k.left,Math.min(k.right,e.left)),top:k.top});!t&&(e.left>=k.right&&e.top>=k.top||e.left>=k.left&&e.top>=k.bottom)&&(o=y+1)}}return!t&&d&&(t=d,l=h,s=0),t&&t.nodeType==3?qM(t,l):!t||s&&t.nodeType==1?{node:n,offset:o}:Hx(t,l)}function qM(n,e){let t=n.nodeValue.length,s=document.createRange(),l;for(let o=0;o<t;o++){s.setEnd(n,o+1),s.setStart(n,o);let c=ts(s,1);if(c.top!=c.bottom&&gp(e,c)){l={node:n,offset:o+(e.left>=(c.left+c.right)/2?1:0)};break}}return s.detach(),l||{node:n,offset:0}}function gp(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function $M(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function GM(n,e,t){let{node:s,offset:l}=Hx(e,t),o=-1;if(s.nodeType==1&&!s.firstChild){let c=s.getBoundingClientRect();o=c.left!=c.right&&t.left>(c.left+c.right)/2?1:-1}return n.docView.posFromDOM(s,l,o)}function YM(n,e,t,s){let l=-1;for(let o=e,c=!1;o!=n.dom;){let f=n.docView.nearestDesc(o,!0),d;if(!f)return null;if(f.dom.nodeType==1&&(f.node.isBlock&&f.parent||!f.contentDOM)&&((d=f.dom.getBoundingClientRect()).width||d.height)&&(f.node.isBlock&&f.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(f.dom.nodeName)&&(!c&&d.left>s.left||d.top>s.top?l=f.posBefore:(!c&&d.right<s.left||d.bottom<s.top)&&(l=f.posAfter),c=!0),!f.contentDOM&&l<0&&!f.node.isText))return(f.node.isBlock?s.top<(d.top+d.bottom)/2:s.left<(d.left+d.right)/2)?f.posBefore:f.posAfter;o=f.dom.parentNode}return l>-1?l:n.docView.posFromDOM(e,t,-1)}function Ux(n,e,t){let s=n.childNodes.length;if(s&&t.top<t.bottom)for(let l=Math.max(0,Math.min(s-1,Math.floor(s*(e.top-t.top)/(t.bottom-t.top))-2)),o=l;;){let c=n.childNodes[o];if(c.nodeType==1){let f=c.getClientRects();for(let d=0;d<f.length;d++){let h=f[d];if(gp(e,h))return Ux(c,e,h)}}if((o=(o+1)%s)==l)break}return n}function KM(n,e){let t=n.dom.ownerDocument,s,l=0,o=LM(t,e.left,e.top);o&&({node:s,offset:l}=o);let c=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),f;if(!c||!n.dom.contains(c.nodeType!=1?c.parentNode:c)){let h=n.dom.getBoundingClientRect();if(!gp(e,h)||(c=Ux(n.dom,e,h),!c))return null}if(Kt)for(let h=c;s&&h;h=rl(h))h.draggable&&(s=void 0);if(c=$M(c,e),s){if(_n&&s.nodeType==1&&(l=Math.min(l,s.childNodes.length),l<s.childNodes.length)){let m=s.childNodes[l],y;m.nodeName=="IMG"&&(y=m.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&l++}let h;_o&&l&&s.nodeType==1&&(h=s.childNodes[l-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&l--,s==n.dom&&l==s.childNodes.length-1&&s.lastChild.nodeType==1&&e.top>s.lastChild.getBoundingClientRect().bottom?f=n.state.doc.content.size:(l==0||s.nodeType!=1||s.childNodes[l-1].nodeName!="BR")&&(f=YM(n,s,l,e))}f==null&&(f=GM(n,c,e));let d=n.docView.nearestDesc(c,!0);return{pos:f,inside:d?d.posAtStart-d.border:-1}}function Mb(n){return n.top<n.bottom||n.left<n.right}function ts(n,e){let t=n.getClientRects();if(t.length){let s=t[e<0?0:t.length-1];if(Mb(s))return s}return Array.prototype.find.call(t,Mb)||n.getBoundingClientRect()}const PM=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ix(n,e,t){let{node:s,offset:l,atom:o}=n.docView.domFromPos(e,t<0?-1:1),c=_o||_n;if(s.nodeType==3)if(c&&(PM.test(s.nodeValue)||(t<0?!l:l==s.nodeValue.length))){let d=ts(Sr(s,l,l),t);if(_n&&l&&/\s/.test(s.nodeValue[l-1])&&l<s.nodeValue.length){let h=ts(Sr(s,l-1,l-1),-1);if(h.top==d.top){let m=ts(Sr(s,l,l+1),-1);if(m.top!=d.top)return ro(m,m.left<h.left)}}return d}else{let d=l,h=l,m=t<0?1:-1;return t<0&&!l?(h++,m=-1):t>=0&&l==s.nodeValue.length?(d--,m=1):t<0?d--:h++,ro(ts(Sr(s,d,h),m),m<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&l&&(t<0||l==Ln(s))){let d=s.childNodes[l-1];if(d.nodeType==1)return ih(d.getBoundingClientRect(),!1)}if(o==null&&l<Ln(s)){let d=s.childNodes[l];if(d.nodeType==1)return ih(d.getBoundingClientRect(),!0)}return ih(s.getBoundingClientRect(),t>=0)}if(o==null&&l&&(t<0||l==Ln(s))){let d=s.childNodes[l-1],h=d.nodeType==3?Sr(d,Ln(d)-(c?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(h)return ro(ts(h,1),!1)}if(o==null&&l<Ln(s)){let d=s.childNodes[l];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let h=d?d.nodeType==3?Sr(d,0,c?0:1):d.nodeType==1?d:null:null;if(h)return ro(ts(h,-1),!0)}return ro(ts(s.nodeType==3?Sr(s):s,-t),t>=0)}function ro(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function ih(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Vx(n,e,t){let s=n.state,l=n.root.activeElement;s!=e&&n.updateState(e),l!=n.dom&&n.focus();try{return t()}finally{s!=e&&n.updateState(s),l!=n.dom&&l&&l.focus()}}function JM(n,e,t){let s=e.selection,l=t=="up"?s.$from:s.$to;return Vx(n,e,()=>{let{node:o}=n.docView.domFromPos(l.pos,t=="up"?-1:1);for(;;){let f=n.docView.nearestDesc(o,!0);if(!f)break;if(f.node.isBlock){o=f.contentDOM||f.dom;break}o=f.dom.parentNode}let c=Ix(n,l.pos,1);for(let f=o.firstChild;f;f=f.nextSibling){let d;if(f.nodeType==1)d=f.getClientRects();else if(f.nodeType==3)d=Sr(f,0,f.nodeValue.length).getClientRects();else continue;for(let h=0;h<d.length;h++){let m=d[h];if(m.bottom>m.top+1&&(t=="up"?c.top-m.top>(m.bottom-c.top)*2:m.bottom-c.bottom>(c.bottom-m.top)*2))return!1}}return!0})}const FM=/[\u0590-\u08ac]/;function XM(n,e,t){let{$head:s}=e.selection;if(!s.parent.isTextblock)return!1;let l=s.parentOffset,o=!l,c=l==s.parent.content.size,f=n.domSelection();return f?!FM.test(s.parent.textContent)||!f.modify?t=="left"||t=="backward"?o:c:Vx(n,e,()=>{let{focusNode:d,focusOffset:h,anchorNode:m,anchorOffset:y}=n.domSelectionRange(),b=f.caretBidiLevel;f.modify("move",t,"character");let v=s.depth?n.docView.domAfterPos(s.before()):n.dom,{focusNode:k,focusOffset:M}=n.domSelectionRange(),E=k&&!v.contains(k.nodeType==1?k:k.parentNode)||d==k&&h==M;try{f.collapse(m,y),d&&(d!=m||h!=y)&&f.extend&&f.extend(d,h)}catch{}return b!=null&&(f.caretBidiLevel=b),E}):s.pos==s.start()||s.pos==s.end()}let Cb=null,wb=null,Nb=!1;function QM(n,e,t){return Cb==e&&wb==t?Nb:(Cb=e,wb=t,Nb=t=="up"||t=="down"?JM(n,e,t):XM(n,e,t))}const Bn=0,Ab=1,qs=2,Zn=3;class Bo{constructor(e,t,s,l){this.parent=e,this.children=t,this.dom=s,this.contentDOM=l,this.dirty=Bn,s.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,s){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,s=this.posAtStart;;t++){let l=this.children[t];if(l==e)return s;s+=l.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,s){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(s<0){let o,c;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((c=o.pmViewDesc)&&c.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(c)+c.size:this.posAtStart}else{let o,c;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((c=o.pmViewDesc)&&c.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(c):this.posAtEnd}let l;if(e==this.dom&&this.contentDOM)l=t>It(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))l=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){l=!1;break}if(o.previousSibling)break}if(l==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){l=!0;break}if(o.nextSibling)break}}return l??s>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let s=!0,l=e;l;l=l.parentNode){let o=this.getDesc(l),c;if(o&&(!t||o.node))if(s&&(c=o.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))s=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let s=t;s;s=s.parent)if(s==this)return t}posFromDOM(e,t,s){for(let l=e;l;l=l.parentNode){let o=this.getDesc(l);if(o)return o.localPosFromDOM(e,t,s)}return-1}descAt(e){for(let t=0,s=0;t<this.children.length;t++){let l=this.children[t],o=s+l.size;if(s==e&&o!=s){for(;!l.border&&l.children.length;)for(let c=0;c<l.children.length;c++){let f=l.children[c];if(f.size){l=f;break}}return l}if(e<o)return l.descAt(e-s-l.border);s=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let s=0,l=0;for(let o=0;s<this.children.length;s++){let c=this.children[s],f=o+c.size;if(f>e||c instanceof $x){l=e-o;break}o=f}if(l)return this.children[s].domFromPos(l-this.children[s].border,t);for(let o;s&&!(o=this.children[s-1]).size&&o instanceof qx&&o.side>=0;s--);if(t<=0){let o,c=!0;for(;o=s?this.children[s-1]:null,!(!o||o.dom.parentNode==this.contentDOM);s--,c=!1);return o&&t&&c&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?It(o.dom)+1:0}}else{let o,c=!0;for(;o=s<this.children.length?this.children[s]:null,!(!o||o.dom.parentNode==this.contentDOM);s++,c=!1);return o&&c&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?It(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,s=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let l=-1,o=-1;for(let c=s,f=0;;f++){let d=this.children[f],h=c+d.size;if(l==-1&&e<=h){let m=c+d.border;if(e>=m&&t<=h-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,m);e=c;for(let y=f;y>0;y--){let b=this.children[y-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){l=It(b.dom)+1;break}e-=b.size}l==-1&&(l=0)}if(l>-1&&(h>t||f==this.children.length-1)){t=h;for(let m=f+1;m<this.children.length;m++){let y=this.children[m];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){o=It(y.dom);break}t+=y.size}o==-1&&(o=this.contentDOM.childNodes.length);break}c=h}return{node:this.contentDOM,from:e,to:t,fromOffset:l,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:s}=this.domFromPos(e,0);if(t.nodeType!=1||s==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[s]}setSelection(e,t,s,l=!1){let o=Math.min(e,t),c=Math.max(e,t);for(let v=0,k=0;v<this.children.length;v++){let M=this.children[v],E=k+M.size;if(o>k&&c<E)return M.setSelection(e-k-M.border,t-k-M.border,s,l);k=E}let f=this.domFromPos(e,e?-1:1),d=t==e?f:this.domFromPos(t,t?-1:1),h=s.root.getSelection(),m=s.domSelectionRange(),y=!1;if((_n||Kt)&&e==t){let{node:v,offset:k}=f;if(v.nodeType==3){if(y=!!(k&&v.nodeValue[k-1]==`
`),y&&k==v.nodeValue.length)for(let M=v,E;M;M=M.parentNode){if(E=M.nextSibling){E.nodeName=="BR"&&(f=d={node:E.parentNode,offset:It(E)+1});break}let C=M.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let M=v.childNodes[k-1];y=M&&(M.nodeName=="BR"||M.contentEditable=="false")}}if(_n&&m.focusNode&&m.focusNode!=d.node&&m.focusNode.nodeType==1){let v=m.focusNode.childNodes[m.focusOffset];v&&v.contentEditable=="false"&&(l=!0)}if(!(l||y&&Kt)&&Ws(f.node,f.offset,m.anchorNode,m.anchorOffset)&&Ws(d.node,d.offset,m.focusNode,m.focusOffset))return;let b=!1;if((h.extend||e==t)&&!(y&&_n)){h.collapse(f.node,f.offset);try{e!=t&&h.extend(d.node,d.offset),b=!0}catch{}}if(!b){if(e>t){let k=f;f=d,d=k}let v=document.createRange();v.setEnd(d.node,d.offset),v.setStart(f.node,f.offset),h.removeAllRanges(),h.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let s=0,l=0;l<this.children.length;l++){let o=this.children[l],c=s+o.size;if(s==c?e<=c&&t>=s:e<c&&t>s){let f=s+o.border,d=c-o.border;if(e>=f&&t<=d){this.dirty=e==s||t==c?qs:Ab,e==f&&t==d&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Zn:o.markDirty(e-f,t-f);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?qs:Zn}s=c}this.dirty=qs}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let s=e==1?qs:Ab;t.dirty<s&&(t.dirty=s)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class qx extends Bo{constructor(e,t,s,l){let o,c=t.type.toDOM;if(typeof c=="function"&&(c=c(s,()=>{if(!o)return l;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(c.nodeType!=1){let f=document.createElement("span");f.appendChild(c),c=f}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==Bn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class ZM extends Bo{constructor(e,t,s,l){super(e,[],t,null),this.textDOM=s,this.text=l}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ei extends Bo{constructor(e,t,s,l,o){super(e,[],s,l),this.mark=t,this.spec=o}static create(e,t,s,l){let o=l.nodeViews[t.type.name],c=o&&o(t,l,s);return(!c||!c.dom)&&(c=ni.renderSpec(document,t.type.spec.toDOM(t,s),null,t.attrs)),new ei(e,t,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&Zn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Zn&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Bn){let s=this.parent;for(;!s.node;)s=s.parent;s.dirty<this.dirty&&(s.dirty=this.dirty),this.dirty=Bn}}slice(e,t,s){let l=ei.create(this.parent,this.mark,!0,s),o=this.children,c=this.size;t<c&&(o=Hh(o,t,c,s)),e>0&&(o=Hh(o,0,e,s));for(let f=0;f<o.length;f++)o[f].parent=l;return l.children=o,l}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ps extends Bo{constructor(e,t,s,l,o,c,f,d,h){super(e,[],o,c),this.node=t,this.outerDeco=s,this.innerDeco=l,this.nodeDOM=f}static create(e,t,s,l,o,c){let f=o.nodeViews[t.type.name],d,h=f&&f(t,o,()=>{if(!d)return c;if(d.parent)return d.parent.posBeforeChild(d)},s,l),m=h&&h.dom,y=h&&h.contentDOM;if(t.isText){if(!m)m=document.createTextNode(t.text);else if(m.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else m||({dom:m,contentDOM:y}=ni.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&m.nodeName!="BR"&&(m.hasAttribute("contenteditable")||(m.contentEditable="false"),t.type.spec.draggable&&(m.draggable=!0));let b=m;return m=Kx(m,s,t),h?d=new WM(e,t,s,l,m,y||null,b,h,o,c+1):t.isText?new mu(e,t,s,l,m,b,o):new ps(e,t,s,l,m,y||null,b,o,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let s=this.children[t];if(this.dom.contains(s.dom.parentNode)){e.contentElement=s.dom.parentNode;break}}e.contentElement||(e.getContent=()=>W.empty)}return e}matchesNode(e,t,s){return this.dirty==Bn&&e.eq(this.node)&&Mc(t,this.outerDeco)&&s.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let s=this.node.inlineContent,l=t,o=e.composing?this.localCompositionInfo(e,t):null,c=o&&o.pos>-1?o:null,f=o&&o.pos<0,d=new tC(this,c&&c.node,e);sC(this.node,this.innerDeco,(h,m,y)=>{h.spec.marks?d.syncToMarks(h.spec.marks,s,e,m):h.type.side>=0&&!y&&d.syncToMarks(m==this.node.childCount?et.none:this.node.child(m).marks,s,e,m),d.placeWidget(h,e,l)},(h,m,y,b)=>{d.syncToMarks(h.marks,s,e,b);let v;d.findNodeMatch(h,m,y,b)||f&&e.state.selection.from>l&&e.state.selection.to<l+h.nodeSize&&(v=d.findIndexWithChild(o.node))>-1&&d.updateNodeAt(h,m,y,v,e)||d.updateNextNode(h,m,y,e,b,l)||d.addNode(h,m,y,e,l),l+=h.nodeSize}),d.syncToMarks([],s,e,0),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==qs)&&(c&&this.protectLocalComposition(e,c),Gx(this.contentDOM,this.children,e),sl&&iC(this.dom))}localCompositionInfo(e,t){let{from:s,to:l}=e.state.selection;if(!(e.state.selection instanceof Se)||s<t||l>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let c=o.nodeValue,f=lC(this.node.content,c,s-t,l-t);return f<0?null:{node:o,pos:f,text:c}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:s,text:l}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let c=new ZM(this,o,t,l);e.input.compositionNodes.push(c),this.children=Hh(this.children,s,s+l.length,e,c)}update(e,t,s,l){return this.dirty==Zn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,s,l),!0)}updateInner(e,t,s,l){this.updateOuterDeco(t),this.node=e,this.innerDeco=s,this.contentDOM&&this.updateChildren(l,this.posAtStart),this.dirty=Bn}updateOuterDeco(e){if(Mc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,s=this.dom;this.dom=Yx(this.dom,this.nodeDOM,Bh(this.outerDeco,this.node,t),Bh(e,this.node,t)),this.dom!=s&&(s.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Ob(n,e,t,s,l){Kx(s,e,n);let o=new ps(void 0,n,e,t,s,s,s,l,0);return o.contentDOM&&o.updateChildren(l,0),o}class mu extends ps{constructor(e,t,s,l,o,c,f){super(e,t,s,l,o,null,c,f,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,s,l){return this.dirty==Zn||this.dirty!=Bn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Bn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,l.trackWrites==this.nodeDOM&&(l.trackWrites=null)),this.node=e,this.dirty=Bn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,s){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,s)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,s){let l=this.node.cut(e,t),o=document.createTextNode(l.text);return new mu(this.parent,l,this.outerDeco,this.innerDeco,o,o,s)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Zn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class $x extends Bo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Bn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class WM extends ps{constructor(e,t,s,l,o,c,f,d,h,m){super(e,t,s,l,o,c,f,h,m),this.spec=d}update(e,t,s,l){if(this.dirty==Zn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,s);return o&&this.updateInner(e,t,s,l),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,s,l)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,s,l){this.spec.setSelection?this.spec.setSelection(e,t,s.root):super.setSelection(e,t,s,l)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Gx(n,e,t){let s=n.firstChild,l=!1;for(let o=0;o<e.length;o++){let c=e[o],f=c.dom;if(f.parentNode==n){for(;f!=s;)s=Db(s),l=!0;s=s.nextSibling}else l=!0,n.insertBefore(f,s);if(c instanceof ei){let d=s?s.previousSibling:n.lastChild;Gx(c.contentDOM,c.children,t),s=d?d.nextSibling:n.firstChild}}for(;s;)s=Db(s),l=!0;l&&t.trackWrites==n&&(t.trackWrites=null)}const po=function(n){n&&(this.nodeName=n)};po.prototype=Object.create(null);const $s=[new po];function Bh(n,e,t){if(n.length==0)return $s;let s=t?$s[0]:new po,l=[s];for(let o=0;o<n.length;o++){let c=n[o].type.attrs;if(c){c.nodeName&&l.push(s=new po(c.nodeName));for(let f in c){let d=c[f];d!=null&&(t&&l.length==1&&l.push(s=new po(e.isInline?"span":"div")),f=="class"?s.class=(s.class?s.class+" ":"")+d:f=="style"?s.style=(s.style?s.style+";":"")+d:f!="nodeName"&&(s[f]=d))}}}return l}function Yx(n,e,t,s){if(t==$s&&s==$s)return e;let l=e;for(let o=0;o<s.length;o++){let c=s[o],f=t[o];if(o){let d;f&&f.nodeName==c.nodeName&&l!=n&&(d=l.parentNode)&&d.nodeName.toLowerCase()==c.nodeName||(d=document.createElement(c.nodeName),d.pmIsDeco=!0,d.appendChild(l),f=$s[0]),l=d}eC(l,f||$s[0],c)}return l}function eC(n,e,t){for(let s in e)s!="class"&&s!="style"&&s!="nodeName"&&!(s in t)&&n.removeAttribute(s);for(let s in t)s!="class"&&s!="style"&&s!="nodeName"&&t[s]!=e[s]&&n.setAttribute(s,t[s]);if(e.class!=t.class){let s=e.class?e.class.split(" ").filter(Boolean):[],l=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<s.length;o++)l.indexOf(s[o])==-1&&n.classList.remove(s[o]);for(let o=0;o<l.length;o++)s.indexOf(l[o])==-1&&n.classList.add(l[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let s=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,l;for(;l=s.exec(e.style);)n.style.removeProperty(l[1])}t.style&&(n.style.cssText+=t.style)}}function Kx(n,e,t){return Yx(n,n,$s,Bh(e,t,n.nodeType!=1))}function Mc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Db(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class tC{constructor(e,t,s){this.lock=t,this.view=s,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=nC(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let s=e;s<t;s++)this.top.children[s].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,s,l){let o=0,c=this.stack.length>>1,f=Math.min(c,e.length);for(;o<f&&(o==c-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<c;)this.destroyRest(),this.top.dirty=Bn,this.index=this.stack.pop(),this.top=this.stack.pop(),c--;for(;c<e.length;){this.stack.push(this.top,this.index+1);let d=-1,h=this.top.children.length;l<this.preMatch.index&&(h=Math.min(this.index+3,h));for(let m=this.index;m<h;m++){let y=this.top.children[m];if(y.matchesMark(e[c])&&!this.isLocked(y.dom)){d=m;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let m=ei.create(this.top,e[c],t,s);this.top.children.splice(this.index,0,m),this.top=m,this.changed=!0}this.index=0,c++}}findNodeMatch(e,t,s,l){let o=-1,c;if(l>=this.preMatch.index&&(c=this.preMatch.matches[l-this.preMatch.index]).parent==this.top&&c.matchesNode(e,t,s))o=this.top.children.indexOf(c,this.index);else for(let f=this.index,d=Math.min(this.top.children.length,f+5);f<d;f++){let h=this.top.children[f];if(h.matchesNode(e,t,s)&&!this.preMatch.matched.has(h)){o=f;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,s,l,o){let c=this.top.children[l];return c.dirty==Zn&&c.dom==c.contentDOM&&(c.dirty=qs),c.update(e,t,s,o)?(this.destroyBetween(this.index,l),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let s=e.pmViewDesc;if(s){for(let l=this.index;l<this.top.children.length;l++)if(this.top.children[l]==s)return l}return-1}e=t}}updateNextNode(e,t,s,l,o,c){for(let f=this.index;f<this.top.children.length;f++){let d=this.top.children[f];if(d instanceof ps){let h=this.preMatch.matched.get(d);if(h!=null&&h!=o)return!1;let m=d.dom,y,b=this.isLocked(m)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Zn&&Mc(t,d.outerDeco));if(!b&&d.update(e,t,s,l))return this.destroyBetween(this.index,f),d.dom!=m&&(this.changed=!0),this.index++,!0;if(!b&&(y=this.recreateWrapper(d,e,t,s,l,c)))return this.destroyBetween(this.index,f),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=qs,y.updateChildren(l,c+1),y.dirty=Bn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,s,l,o,c){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Mc(s,e.outerDeco)||!l.eq(e.innerDeco))return null;let f=ps.create(this.top,t,s,l,o,c);if(f.contentDOM){f.children=e.children,e.children=[];for(let d of f.children)d.parent=f}return e.destroy(),f}addNode(e,t,s,l,o){let c=ps.create(this.top,e,t,s,l,o);c.contentDOM&&c.updateChildren(l,o+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,t,s){let l=this.index<this.top.children.length?this.top.children[this.index]:null;if(l&&l.matchesWidget(e)&&(e==l.widget||!l.widget.type.toDOM.parentNode))this.index++;else{let o=new qx(this.top,e,t,s);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ei;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof mu)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Kt||qt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let s=document.createElement(e);e=="IMG"&&(s.className="ProseMirror-separator",s.alt=""),e=="BR"&&(s.className="ProseMirror-trailingBreak");let l=new $x(this.top,[],s,null);t!=this.top?t.children.push(l):t.children.splice(this.index++,0,l),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function nC(n,e){let t=e,s=t.children.length,l=n.childCount,o=new Map,c=[];e:for(;l>0;){let f;for(;;)if(s){let h=t.children[s-1];if(h instanceof ei)t=h,s=h.children.length;else{f=h,s--;break}}else{if(t==e)break e;s=t.parent.children.indexOf(t),t=t.parent}let d=f.node;if(d){if(d!=n.child(l-1))break;--l,o.set(f,l),c.push(f)}}return{index:l,matched:o,matches:c.reverse()}}function rC(n,e){return n.type.side-e.type.side}function sC(n,e,t,s){let l=e.locals(n),o=0;if(l.length==0){for(let h=0;h<n.childCount;h++){let m=n.child(h);s(m,l,e.forChild(o,m),h),o+=m.nodeSize}return}let c=0,f=[],d=null;for(let h=0;;){let m,y;for(;c<l.length&&l[c].to==o;){let E=l[c++];E.widget&&(m?(y||(y=[m])).push(E):m=E)}if(m)if(y){y.sort(rC);for(let E=0;E<y.length;E++)t(y[E],h,!!d)}else t(m,h,!!d);let b,v;if(d)v=-1,b=d,d=null;else if(h<n.childCount)v=h,b=n.child(h++);else break;for(let E=0;E<f.length;E++)f[E].to<=o&&f.splice(E--,1);for(;c<l.length&&l[c].from<=o&&l[c].to>o;)f.push(l[c++]);let k=o+b.nodeSize;if(b.isText){let E=k;c<l.length&&l[c].from<E&&(E=l[c].from);for(let C=0;C<f.length;C++)f[C].to<E&&(E=f[C].to);E<k&&(d=b.cut(E-o),b=b.cut(0,E-o),k=E,v=-1)}else for(;c<l.length&&l[c].to<k;)c++;let M=b.isInline&&!b.isLeaf?f.filter(E=>!E.inline):f.slice();s(b,M,e.forChild(o,b),v),o=k}}function iC(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function lC(n,e,t,s){for(let l=0,o=0;l<n.childCount&&o<=s;){let c=n.child(l++),f=o;if(o+=c.nodeSize,!c.isText)continue;let d=c.text;for(;l<n.childCount;){let h=n.child(l++);if(o+=h.nodeSize,!h.isText)break;d+=h.text}if(o>=t){if(o>=s&&d.slice(s-e.length-f,s-f)==e)return s-e.length;let h=f<s?d.lastIndexOf(e,s-f-1):-1;if(h>=0&&h+e.length+f>=t)return f+h;if(t==s&&d.length>=s+e.length-f&&d.slice(s-f,s-f+e.length)==e)return s}}return-1}function Hh(n,e,t,s,l){let o=[];for(let c=0,f=0;c<n.length;c++){let d=n[c],h=f,m=f+=d.size;h>=t||m<=e?o.push(d):(h<e&&o.push(d.slice(0,e-h,s)),l&&(o.push(l),l=void 0),m>t&&o.push(d.slice(t-h,d.size,s)))}return o}function yp(n,e=null){let t=n.domSelectionRange(),s=n.state.doc;if(!t.focusNode)return null;let l=n.docView.nearestDesc(t.focusNode),o=l&&l.size==0,c=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(c<0)return null;let f=s.resolve(c),d,h;if(pu(t)){for(d=c;l&&!l.node;)l=l.parent;let y=l.node;if(l&&y.isAtom&&ge.isSelectable(y)&&l.parent&&!(y.isInline&&RM(t.focusNode,t.focusOffset,l.dom))){let b=l.posBefore;h=new ge(c==b?f:s.resolve(b))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=c,b=c;for(let v=0;v<t.rangeCount;v++){let k=t.getRangeAt(v);y=Math.min(y,n.docView.posFromDOM(k.startContainer,k.startOffset,1)),b=Math.max(b,n.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(y<0)return null;[d,c]=b==n.state.selection.anchor?[b,y]:[y,b],f=s.resolve(c)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let m=s.resolve(d);if(!h){let y=e=="pointer"||n.state.selection.head<f.pos&&!o?1:-1;h=bp(n,m,f,y)}return h}function Px(n){return n.editable?n.hasFocus():Fx(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Er(n,e=!1){let t=n.state.selection;if(Jx(n,t),!!Px(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&qt){let s=n.domSelectionRange(),l=n.domObserver.currentSelection;if(s.anchorNode&&l.anchorNode&&Ws(s.anchorNode,s.anchorOffset,l.anchorNode,l.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)aC(n);else{let{anchor:s,head:l}=t,o,c;jb&&!(t instanceof Se)&&(t.$from.parent.inlineContent||(o=Rb(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(c=Rb(n,t.to))),n.docView.setSelection(s,l,n,e),jb&&(o&&zb(o),c&&zb(c)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&oC(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const jb=Kt||qt&&zx<63;function Rb(n,e){let{node:t,offset:s}=n.docView.domFromPos(e,0),l=s<t.childNodes.length?t.childNodes[s]:null,o=s?t.childNodes[s-1]:null;if(Kt&&l&&l.contentEditable=="false")return lh(l);if((!l||l.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(l)return lh(l);if(o)return lh(o)}}function lh(n){return n.contentEditable="true",Kt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function zb(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function oC(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),s=t.anchorNode,l=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=s||t.anchorOffset!=l)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Px(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function aC(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,s=t.nodeName=="IMG";s?e.collapse(t.parentNode,It(t)+1):e.collapse(t,0),!s&&!n.state.selection.visible&&an&&hs<=11&&(t.disabled=!0,t.disabled=!1)}function Jx(n,e){if(e instanceof ge){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Lb(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Lb(n)}function Lb(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function bp(n,e,t,s){return n.someProp("createSelectionBetween",l=>l(n,e,t))||Se.between(e,t,s)}function _b(n){return n.editable&&!n.hasFocus()?!1:Fx(n)}function Fx(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function cC(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Ws(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Uh(n,e){let{$anchor:t,$head:s}=n.selection,l=e>0?t.max(s):t.min(s),o=l.parent.inlineContent?l.depth?n.doc.resolve(e>0?l.after():l.before()):null:l;return o&&Oe.findFrom(o,e)}function ns(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Bb(n,e,t){let s=n.state.selection;if(s instanceof Se)if(t.indexOf("s")>-1){let{$head:l}=s,o=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let c=n.state.doc.resolve(l.pos+o.nodeSize*(e<0?-1:1));return ns(n,new Se(s.$anchor,c))}else if(s.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let l=Uh(n.state,e);return l&&l instanceof ge?ns(n,l):!1}else if(!(zn&&t.indexOf("m")>-1)){let l=s.$head,o=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter,c;if(!o||o.isText)return!1;let f=e<0?l.pos-o.nodeSize:l.pos;return o.isAtom||(c=n.docView.descAt(f))&&!c.contentDOM?ge.isSelectable(o)?ns(n,new ge(e<0?n.state.doc.resolve(l.pos-o.nodeSize):l)):_o?ns(n,new Se(n.state.doc.resolve(e<0?f:f+o.nodeSize))):!1:!1}}else return!1;else{if(s instanceof ge&&s.node.isInline)return ns(n,new Se(e>0?s.$to:s.$from));{let l=Uh(n.state,e);return l?ns(n,l):!1}}}function Cc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function mo(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Yi(n,e){return e<0?uC(n):fC(n)}function uC(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let l,o,c=!1;for(_n&&t.nodeType==1&&s<Cc(t)&&mo(t.childNodes[s],-1)&&(c=!0);;)if(s>0){if(t.nodeType!=1)break;{let f=t.childNodes[s-1];if(mo(f,-1))l=t,o=--s;else if(f.nodeType==3)t=f,s=t.nodeValue.length;else break}}else{if(Xx(t))break;{let f=t.previousSibling;for(;f&&mo(f,-1);)l=t.parentNode,o=It(f),f=f.previousSibling;if(f)t=f,s=Cc(t);else{if(t=t.parentNode,t==n.dom)break;s=0}}}c?Ih(n,t,s):l&&Ih(n,l,o)}function fC(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let l=Cc(t),o,c;for(;;)if(s<l){if(t.nodeType!=1)break;let f=t.childNodes[s];if(mo(f,1))o=t,c=++s;else break}else{if(Xx(t))break;{let f=t.nextSibling;for(;f&&mo(f,1);)o=f.parentNode,c=It(f)+1,f=f.nextSibling;if(f)t=f,s=0,l=Cc(t);else{if(t=t.parentNode,t==n.dom)break;s=l=0}}}o&&Ih(n,o,c)}function Xx(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function dC(n,e){for(;n&&e==n.childNodes.length&&!Lo(n);)e=It(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function hC(n,e){for(;n&&!e&&!Lo(n);)e=It(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Ih(n,e,t){if(e.nodeType!=3){let o,c;(c=dC(e,t))?(e=c,t=0):(o=hC(e,t))&&(e=o,t=o.nodeValue.length)}let s=n.domSelection();if(!s)return;if(pu(s)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),s.removeAllRanges(),s.addRange(o)}else s.extend&&s.extend(e,t);n.domObserver.setCurSelection();let{state:l}=n;setTimeout(()=>{n.state==l&&Er(n)},50)}function Hb(n,e){let t=n.state.doc.resolve(e);if(!(qt||Lx)&&t.parent.inlineContent){let l=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),c=(o.top+o.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(o.left-l.left)>1)return o.left<l.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),c=(o.top+o.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(o.left-l.left)>1)return o.left>l.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Ub(n,e,t){let s=n.state.selection;if(s instanceof Se&&!s.empty||t.indexOf("s")>-1||zn&&t.indexOf("m")>-1)return!1;let{$from:l,$to:o}=s;if(!l.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let c=Uh(n.state,e);if(c&&c instanceof ge)return ns(n,c)}if(!l.parent.inlineContent){let c=e<0?l:o,f=s instanceof vn?Oe.near(c,e):Oe.findFrom(c,e);return f?ns(n,f):!1}return!1}function Ib(n,e){if(!(n.state.selection instanceof Se))return!0;let{$head:t,$anchor:s,empty:l}=n.state.selection;if(!t.sameParent(s))return!0;if(!l)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let c=n.state.tr;return e<0?c.delete(t.pos-o.nodeSize,t.pos):c.delete(t.pos,t.pos+o.nodeSize),n.dispatch(c),!0}return!1}function Vb(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function pC(n){if(!Kt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let s=e.firstChild;Vb(n,s,"true"),setTimeout(()=>Vb(n,s,"false"),20)}return!1}function mC(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function gC(n,e){let t=e.keyCode,s=mC(e);if(t==8||zn&&t==72&&s=="c")return Ib(n,-1)||Yi(n,-1);if(t==46&&!e.shiftKey||zn&&t==68&&s=="c")return Ib(n,1)||Yi(n,1);if(t==13||t==27)return!0;if(t==37||zn&&t==66&&s=="c"){let l=t==37?Hb(n,n.state.selection.from)=="ltr"?-1:1:-1;return Bb(n,l,s)||Yi(n,l)}else if(t==39||zn&&t==70&&s=="c"){let l=t==39?Hb(n,n.state.selection.from)=="ltr"?1:-1:1;return Bb(n,l,s)||Yi(n,l)}else{if(t==38||zn&&t==80&&s=="c")return Ub(n,-1,s)||Yi(n,-1);if(t==40||zn&&t==78&&s=="c")return pC(n)||Ub(n,1,s)||Yi(n,1);if(s==(zn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function xp(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:s,openStart:l,openEnd:o}=e;for(;l>1&&o>1&&s.childCount==1&&s.firstChild.childCount==1;){l--,o--;let v=s.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),s=v.content}let c=n.someProp("clipboardSerializer")||ni.fromSchema(n.state.schema),f=nv(),d=f.createElement("div");d.appendChild(c.serializeFragment(s,{document:f}));let h=d.firstChild,m,y=0;for(;h&&h.nodeType==1&&(m=tv[h.nodeName.toLowerCase()]);){for(let v=m.length-1;v>=0;v--){let k=f.createElement(m[v]);for(;d.firstChild;)k.appendChild(d.firstChild);d.appendChild(k),y++}h=d.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${l} ${o}${y?` -${y}`:""} ${JSON.stringify(t)}`);let b=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:b,slice:e}}function Qx(n,e,t,s,l){let o=l.parent.type.spec.code,c,f;if(!t&&!e)return null;let d=!!e&&(s||o||!t);if(d){if(n.someProp("transformPastedText",b=>{e=b(e,o||s,n)}),o)return f=new ae(W.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",b=>{f=b(f,n,!0)}),f;let y=n.someProp("clipboardTextParser",b=>b(e,l,s,n));if(y)f=y;else{let b=l.marks(),{schema:v}=n.state,k=ni.fromSchema(v);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(M=>{let E=c.appendChild(document.createElement("p"));M&&E.appendChild(k.serializeNode(v.text(M,b)))})}}else n.someProp("transformPastedHTML",y=>{t=y(t,n)}),c=vC(t),_o&&SC(c);let h=c&&c.querySelector("[data-pm-slice]"),m=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(m&&m[3])for(let y=+m[3];y>0;y--){let b=c.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;c=b}if(f||(f=(n.someProp("clipboardParser")||n.someProp("domParser")||ds.fromSchema(n.state.schema)).parseSlice(c,{preserveWhitespace:!!(d||m),context:l,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!yC.test(b.parentNode.nodeName)?{ignore:!0}:null}})),m)f=kC(qb(f,+m[1],+m[2]),m[4]);else if(f=ae.maxOpen(bC(f.content,l),!0),f.openStart||f.openEnd){let y=0,b=0;for(let v=f.content.firstChild;y<f.openStart&&!v.type.spec.isolating;y++,v=v.firstChild);for(let v=f.content.lastChild;b<f.openEnd&&!v.type.spec.isolating;b++,v=v.lastChild);f=qb(f,y,b)}return n.someProp("transformPasted",y=>{f=y(f,n,d)}),f}const yC=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function bC(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let l=e.node(t).contentMatchAt(e.index(t)),o,c=[];if(n.forEach(f=>{if(!c)return;let d=l.findWrapping(f.type),h;if(!d)return c=null;if(h=c.length&&o.length&&Wx(d,o,f,c[c.length-1],0))c[c.length-1]=h;else{c.length&&(c[c.length-1]=ev(c[c.length-1],o.length));let m=Zx(f,d);c.push(m),l=l.matchType(m.type),o=d}}),c)return W.from(c)}return n}function Zx(n,e,t=0){for(let s=e.length-1;s>=t;s--)n=e[s].create(null,W.from(n));return n}function Wx(n,e,t,s,l){if(l<n.length&&l<e.length&&n[l]==e[l]){let o=Wx(n,e,t,s.lastChild,l+1);if(o)return s.copy(s.content.replaceChild(s.childCount-1,o));if(s.contentMatchAt(s.childCount).matchType(l==n.length-1?t.type:n[l+1]))return s.copy(s.content.append(W.from(Zx(t,n,l+1))))}}function ev(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,ev(n.lastChild,e-1)),s=n.contentMatchAt(n.childCount).fillBefore(W.empty,!0);return n.copy(t.append(s))}function Vh(n,e,t,s,l,o){let c=e<0?n.firstChild:n.lastChild,f=c.content;return n.childCount>1&&(o=0),l<s-1&&(f=Vh(f,e,t,s,l+1,o)),l>=t&&(f=e<0?c.contentMatchAt(0).fillBefore(f,o<=l).append(f):f.append(c.contentMatchAt(c.childCount).fillBefore(W.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,c.copy(f))}function qb(n,e,t){return e<n.openStart&&(n=new ae(Vh(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new ae(Vh(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const tv={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let $b=null;function nv(){return $b||($b=document.implementation.createHTMLDocument("title"))}let oh=null;function xC(n){let e=window.trustedTypes;return e?(oh||(oh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),oh.createHTML(n)):n}function vC(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=nv().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(n),l;if((l=s&&tv[s[1].toLowerCase()])&&(n=l.map(o=>"<"+o+">").join("")+n+l.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=xC(n),l)for(let o=0;o<l.length;o++)t=t.querySelector(l[o])||t;return t}function SC(n){let e=n.querySelectorAll(qt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let s=e[t];s.childNodes.length==1&&s.textContent==""&&s.parentNode&&s.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),s)}}function kC(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,s;try{s=JSON.parse(e)}catch{return n}let{content:l,openStart:o,openEnd:c}=n;for(let f=s.length-2;f>=0;f-=2){let d=t.nodes[s[f]];if(!d||d.hasRequiredAttrs())break;l=W.from(d.create(s[f+1],l)),o++,c++}return new ae(l,o,c)}const Xt={},Qt={},TC={touchstart:!0,touchmove:!0};class EC{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function MC(n){for(let e in Xt){let t=Xt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=s=>{wC(n,s)&&!vp(n,s)&&(n.editable||!(s.type in Qt))&&t(n,s)},TC[e]?{passive:!0}:void 0)}Kt&&n.dom.addEventListener("input",()=>null),qh(n)}function us(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function CC(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function qh(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=s=>vp(n,s))})}function vp(n,e){return n.someProp("handleDOMEvents",t=>{let s=t[e.type];return s?s(n,e)||e.defaultPrevented:!1})}function wC(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function NC(n,e){!vp(n,e)&&Xt[e.type]&&(n.editable||!(e.type in Qt))&&Xt[e.type](n,e)}Qt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!sv(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(kr&&qt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),sl&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let s=Date.now();n.input.lastIOSEnter=s,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==s&&(n.someProp("handleKeyDown",l=>l(n,Vs(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",s=>s(n,t))||gC(n,t)?t.preventDefault():us(n,"key")};Qt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Qt.keypress=(n,e)=>{let t=e;if(sv(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||zn&&t.metaKey)return;if(n.someProp("handleKeyPress",l=>l(n,t))){t.preventDefault();return}let s=n.state.selection;if(!(s instanceof Se)||!s.$from.sameParent(s.$to)){let l=String.fromCharCode(t.charCode),o=()=>n.state.tr.insertText(l).scrollIntoView();!/[\r\n]/.test(l)&&!n.someProp("handleTextInput",c=>c(n,s.$from.pos,s.$to.pos,l,o))&&n.dispatch(o()),t.preventDefault()}};function gu(n){return{left:n.clientX,top:n.clientY}}function AC(n,e){let t=e.x-n.clientX,s=e.y-n.clientY;return t*t+s*s<100}function Sp(n,e,t,s,l){if(s==-1)return!1;let o=n.state.doc.resolve(s);for(let c=o.depth+1;c>0;c--)if(n.someProp(e,f=>c>o.depth?f(n,t,o.nodeAfter,o.before(c),l,!0):f(n,t,o.node(c),o.before(c),l,!1)))return!0;return!1}function el(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let s=n.state.tr.setSelection(e);s.setMeta("pointer",!0),n.dispatch(s)}function OC(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),s=t.nodeAfter;return s&&s.isAtom&&ge.isSelectable(s)?(el(n,new ge(t)),!0):!1}function DC(n,e){if(e==-1)return!1;let t=n.state.selection,s,l;t instanceof ge&&(s=t.node);let o=n.state.doc.resolve(e);for(let c=o.depth+1;c>0;c--){let f=c>o.depth?o.nodeAfter:o.node(c);if(ge.isSelectable(f)){s&&t.$from.depth>0&&c>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?l=o.before(t.$from.depth):l=o.before(c);break}}return l!=null?(el(n,ge.create(n.state.doc,l)),!0):!1}function jC(n,e,t,s,l){return Sp(n,"handleClickOn",e,t,s)||n.someProp("handleClick",o=>o(n,e,s))||(l?DC(n,t):OC(n,t))}function RC(n,e,t,s){return Sp(n,"handleDoubleClickOn",e,t,s)||n.someProp("handleDoubleClick",l=>l(n,e,s))}function zC(n,e,t,s){return Sp(n,"handleTripleClickOn",e,t,s)||n.someProp("handleTripleClick",l=>l(n,e,s))||LC(n,t,s)}function LC(n,e,t){if(t.button!=0)return!1;let s=n.state.doc;if(e==-1)return s.inlineContent?(el(n,Se.create(s,0,s.content.size)),!0):!1;let l=s.resolve(e);for(let o=l.depth+1;o>0;o--){let c=o>l.depth?l.nodeAfter:l.node(o),f=l.before(o);if(c.inlineContent)el(n,Se.create(s,f+1,f+1+c.content.size));else if(ge.isSelectable(c))el(n,ge.create(s,f));else continue;return!0}}function kp(n){return wc(n)}const rv=zn?"metaKey":"ctrlKey";Xt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let s=kp(n),l=Date.now(),o="singleClick";l-n.input.lastClick.time<500&&AC(t,n.input.lastClick)&&!t[rv]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:l,x:t.clientX,y:t.clientY,type:o,button:t.button};let c=n.posAtCoords(gu(t));c&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new _C(n,c,t,!!s)):(o=="doubleClick"?RC:zC)(n,c.pos,c.inside,t)?t.preventDefault():us(n,"pointer"))};class _C{constructor(e,t,s,l){this.view=e,this.pos=t,this.event=s,this.flushed=l,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!s[rv],this.allowDefault=s.shiftKey;let o,c;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),c=t.inside;else{let m=e.state.doc.resolve(t.pos);o=m.parent,c=m.depth?m.before():0}const f=l?null:s.target,d=f?e.docView.nearestDesc(f,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:h}=e.state;(s.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof ge&&h.from<=c&&h.to>c)&&(this.mightDrag={node:o,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&_n&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),us(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Er(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(gu(e))),this.updateAllowDefault(e),this.allowDefault||!t?us(this.view,"pointer"):jC(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Kt&&this.mightDrag&&!this.mightDrag.node.isAtom||qt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(el(this.view,Oe.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):us(this.view,"pointer")}move(e){this.updateAllowDefault(e),us(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Xt.touchstart=n=>{n.input.lastTouch=Date.now(),kp(n),us(n,"pointer")};Xt.touchmove=n=>{n.input.lastTouch=Date.now(),us(n,"pointer")};Xt.contextmenu=n=>kp(n);function sv(n,e){return n.composing?!0:Kt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const BC=kr?5e3:-1;Qt.compositionstart=Qt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Se&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(s=>s.type.spec.inclusive===!1)||qt&&Lx&&HC(n)))n.markCursor=n.state.storedMarks||t.marks(),wc(n,!0),n.markCursor=null;else if(wc(n,!e.selection.empty),_n&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let s=n.domSelectionRange();for(let l=s.focusNode,o=s.focusOffset;l&&l.nodeType==1&&o!=0;){let c=o<0?l.lastChild:l.childNodes[o-1];if(!c)break;if(c.nodeType==3){let f=n.domSelection();f&&f.collapse(c,c.nodeValue.length);break}else l=c,o=-1}}n.input.composing=!0}iv(n,BC)};function HC(n){let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(!e||e.nodeType!=1||t>=e.childNodes.length)return!1;let s=e.childNodes[t];return s.nodeType==1&&s.contentEditable=="false"}Qt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.badSafariComposition?n.domObserver.forceFlush():n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,iv(n,20))};function iv(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>wc(n),e))}function lv(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=IC());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function UC(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=DM(e.focusNode,e.focusOffset),s=jM(e.focusNode,e.focusOffset);if(t&&s&&t!=s){let l=s.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||s==o)return o;if(!l||!l.isText(s.nodeValue))return s;if(n.input.compositionNode==s){let c=t.pmViewDesc;if(!(!c||!c.isText(t.nodeValue)))return s}}return t||s}function IC(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function wc(n,e=!1){if(!(kr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),lv(n),e||n.docView&&n.docView.dirty){let t=yp(n),s=n.state.selection;return t&&!t.eq(s)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!s.$from.node(s.$from.sharedDepth(s.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function VC(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let s=getSelection(),l=document.createRange();l.selectNodeContents(e),n.dom.blur(),s.removeAllRanges(),s.addRange(l),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Co=an&&hs<15||sl&&_M<604;Xt.copy=Qt.cut=(n,e)=>{let t=e,s=n.state.selection,l=t.type=="cut";if(s.empty)return;let o=Co?null:t.clipboardData,c=s.content(),{dom:f,text:d}=xp(n,c);o?(t.preventDefault(),o.clearData(),o.setData("text/html",f.innerHTML),o.setData("text/plain",d)):VC(n,f),l&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function qC(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function $C(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,s=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(s.contentEditable="true"),s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus();let l=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),s.parentNode&&s.parentNode.removeChild(s),t?wo(n,s.value,null,l,e):wo(n,s.textContent,s.innerHTML,l,e)},50)}function wo(n,e,t,s,l){let o=Qx(n,e,t,s,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,l,o||ae.empty)))return!0;if(!o)return!1;let c=qC(o),f=c?n.state.tr.replaceSelectionWith(c,s):n.state.tr.replaceSelection(o);return n.dispatch(f.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ov(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Qt.paste=(n,e)=>{let t=e;if(n.composing&&!kr)return;let s=Co?null:t.clipboardData,l=n.input.shiftKey&&n.input.lastKeyCode!=45;s&&wo(n,ov(s),s.getData("text/html"),l,t)?t.preventDefault():$C(n,t)};class av{constructor(e,t,s){this.slice=e,this.move=t,this.node=s}}const GC=zn?"altKey":"ctrlKey";function cv(n,e){let t=n.someProp("dragCopies",s=>!s(e));return t??!e[GC]}Xt.dragstart=(n,e)=>{let t=e,s=n.input.mouseDown;if(s&&s.done(),!t.dataTransfer)return;let l=n.state.selection,o=l.empty?null:n.posAtCoords(gu(t)),c;if(!(o&&o.pos>=l.from&&o.pos<=(l instanceof ge?l.to-1:l.to))){if(s&&s.mightDrag)c=ge.create(n.state.doc,s.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=n.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=n.docView&&(c=ge.create(n.state.doc,y.posBefore))}}let f=(c||n.state.selection).content(),{dom:d,text:h,slice:m}=xp(n,f);(!t.dataTransfer.files.length||!qt||zx>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Co?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",Co||t.dataTransfer.setData("text/plain",h),n.dragging=new av(m,cv(n,t),c)};Xt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Qt.dragover=Qt.dragenter=(n,e)=>e.preventDefault();Qt.drop=(n,e)=>{try{YC(n,e,n.dragging)}finally{n.dragging=null}};function YC(n,e,t){if(!e.dataTransfer)return;let s=n.posAtCoords(gu(e));if(!s)return;let l=n.state.doc.resolve(s.pos),o=t&&t.slice;o?n.someProp("transformPasted",v=>{o=v(o,n,!1)}):o=Qx(n,ov(e.dataTransfer),Co?null:e.dataTransfer.getData("text/html"),!1,l);let c=!!(t&&cv(n,e));if(n.someProp("handleDrop",v=>v(n,e,o||ae.empty,c))){e.preventDefault();return}if(!o)return;e.preventDefault();let f=o?hx(n.state.doc,l.pos,o):l.pos;f==null&&(f=l.pos);let d=n.state.tr;if(c){let{node:v}=t;v?v.replace(d):d.deleteSelection()}let h=d.mapping.map(f),m=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,y=d.doc;if(m?d.replaceRangeWith(h,h,o.content.firstChild):d.replaceRange(h,h,o),d.doc.eq(y))return;let b=d.doc.resolve(h);if(m&&ge.isSelectable(o.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new ge(b));else{let v=d.mapping.map(f);d.mapping.maps[d.mapping.maps.length-1].forEach((k,M,E,C)=>v=C),d.setSelection(bp(n,b,d.doc.resolve(v)))}n.focus(),n.dispatch(d.setMeta("uiEvent","drop"))}Xt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Er(n)},20))};Xt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Xt.beforeinput=(n,e)=>{if(qt&&kr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:s}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=s||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,Vs(8,"Backspace")))))return;let{$cursor:l}=n.state.selection;l&&l.pos>0&&n.dispatch(n.state.tr.delete(l.pos-1,l.pos).scrollIntoView())},50)}};for(let n in Qt)Xt[n]=Qt[n];function No(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Nc{constructor(e,t){this.toDOM=e,this.spec=t||Js,this.side=this.spec.side||0}map(e,t,s,l){let{pos:o,deleted:c}=e.mapResult(t.from+l,this.side<0?-1:1);return c?null:new Ft(o-s,o-s,this)}valid(){return!0}eq(e){return this==e||e instanceof Nc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&No(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ms{constructor(e,t){this.attrs=e,this.spec=t||Js}map(e,t,s,l){let o=e.map(t.from+l,this.spec.inclusiveStart?-1:1)-s,c=e.map(t.to+l,this.spec.inclusiveEnd?1:-1)-s;return o>=c?null:new Ft(o,c,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ms&&No(this.attrs,e.attrs)&&No(this.spec,e.spec)}static is(e){return e.type instanceof ms}destroy(){}}class Tp{constructor(e,t){this.attrs=e,this.spec=t||Js}map(e,t,s,l){let o=e.mapResult(t.from+l,1);if(o.deleted)return null;let c=e.mapResult(t.to+l,-1);return c.deleted||c.pos<=o.pos?null:new Ft(o.pos-s,c.pos-s,this)}valid(e,t){let{index:s,offset:l}=e.content.findIndex(t.from),o;return l==t.from&&!(o=e.child(s)).isText&&l+o.nodeSize==t.to}eq(e){return this==e||e instanceof Tp&&No(this.attrs,e.attrs)&&No(this.spec,e.spec)}destroy(){}}class Ft{constructor(e,t,s){this.from=e,this.to=t,this.type=s}copy(e,t){return new Ft(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,s){return this.type.map(e,this,t,s)}static widget(e,t,s){return new Ft(e,e,new Nc(t,s))}static inline(e,t,s,l){return new Ft(e,t,new ms(s,l))}static node(e,t,s,l){return new Ft(e,t,new Tp(s,l))}get spec(){return this.type.spec}get inline(){return this.type instanceof ms}get widget(){return this.type instanceof Nc}}const Ji=[],Js={};class ut{constructor(e,t){this.local=e.length?e:Ji,this.children=t.length?t:Ji}static create(e,t){return t.length?Ac(t,e,0,Js):Yt}find(e,t,s){let l=[];return this.findInner(e??0,t??1e9,l,0,s),l}findInner(e,t,s,l,o){for(let c=0;c<this.local.length;c++){let f=this.local[c];f.from<=t&&f.to>=e&&(!o||o(f.spec))&&s.push(f.copy(f.from+l,f.to+l))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<t&&this.children[c+1]>e){let f=this.children[c]+1;this.children[c+2].findInner(e-f,t-f,s,l+f,o)}}map(e,t,s){return this==Yt||e.maps.length==0?this:this.mapInner(e,t,0,0,s||Js)}mapInner(e,t,s,l,o){let c;for(let f=0;f<this.local.length;f++){let d=this.local[f].map(e,s,l);d&&d.type.valid(t,d)?(c||(c=[])).push(d):o.onRemove&&o.onRemove(this.local[f].spec)}return this.children.length?KC(this.children,c||[],e,t,s,l,o):c?new ut(c.sort(Fs),Ji):Yt}add(e,t){return t.length?this==Yt?ut.create(e,t):this.addInner(e,t,0):this}addInner(e,t,s){let l,o=0;e.forEach((f,d)=>{let h=d+s,m;if(m=fv(t,f,h)){for(l||(l=this.children.slice());o<l.length&&l[o]<d;)o+=3;l[o]==d?l[o+2]=l[o+2].addInner(f,m,h+1):l.splice(o,0,d,d+f.nodeSize,Ac(m,f,h+1,Js)),o+=3}});let c=uv(o?dv(t):t,-s);for(let f=0;f<c.length;f++)c[f].type.valid(e,c[f])||c.splice(f--,1);return new ut(c.length?this.local.concat(c).sort(Fs):this.local,l||this.children)}remove(e){return e.length==0||this==Yt?this:this.removeInner(e,0)}removeInner(e,t){let s=this.children,l=this.local;for(let o=0;o<s.length;o+=3){let c,f=s[o]+t,d=s[o+1]+t;for(let m=0,y;m<e.length;m++)(y=e[m])&&y.from>f&&y.to<d&&(e[m]=null,(c||(c=[])).push(y));if(!c)continue;s==this.children&&(s=this.children.slice());let h=s[o+2].removeInner(c,f+1);h!=Yt?s[o+2]=h:(s.splice(o,3),o-=3)}if(l.length){for(let o=0,c;o<e.length;o++)if(c=e[o])for(let f=0;f<l.length;f++)l[f].eq(c,t)&&(l==this.local&&(l=this.local.slice()),l.splice(f--,1))}return s==this.children&&l==this.local?this:l.length||s.length?new ut(l,s):Yt}forChild(e,t){if(this==Yt)return this;if(t.isLeaf)return ut.empty;let s,l;for(let f=0;f<this.children.length;f+=3)if(this.children[f]>=e){this.children[f]==e&&(s=this.children[f+2]);break}let o=e+1,c=o+t.content.size;for(let f=0;f<this.local.length;f++){let d=this.local[f];if(d.from<c&&d.to>o&&d.type instanceof ms){let h=Math.max(o,d.from)-o,m=Math.min(c,d.to)-o;h<m&&(l||(l=[])).push(d.copy(h,m))}}if(l){let f=new ut(l.sort(Fs),Ji);return s?new is([f,s]):f}return s||Yt}eq(e){if(this==e)return!0;if(!(e instanceof ut)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Ep(this.localsInner(e))}localsInner(e){if(this==Yt)return Ji;if(e.inlineContent||!this.local.some(ms.is))return this.local;let t=[];for(let s=0;s<this.local.length;s++)this.local[s].type instanceof ms||t.push(this.local[s]);return t}forEachSet(e){e(this)}}ut.empty=new ut([],[]);ut.removeOverlap=Ep;const Yt=ut.empty;class is{constructor(e){this.members=e}map(e,t){const s=this.members.map(l=>l.map(e,t,Js));return is.from(s)}forChild(e,t){if(t.isLeaf)return ut.empty;let s=[];for(let l=0;l<this.members.length;l++){let o=this.members[l].forChild(e,t);o!=Yt&&(o instanceof is?s=s.concat(o.members):s.push(o))}return is.from(s)}eq(e){if(!(e instanceof is)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,s=!0;for(let l=0;l<this.members.length;l++){let o=this.members[l].localsInner(e);if(o.length)if(!t)t=o;else{s&&(t=t.slice(),s=!1);for(let c=0;c<o.length;c++)t.push(o[c])}}return t?Ep(s?t:t.sort(Fs)):Ji}static from(e){switch(e.length){case 0:return Yt;case 1:return e[0];default:return new is(e.every(t=>t instanceof ut)?e:e.reduce((t,s)=>t.concat(s instanceof ut?s:s.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function KC(n,e,t,s,l,o,c){let f=n.slice();for(let h=0,m=o;h<t.maps.length;h++){let y=0;t.maps[h].forEach((b,v,k,M)=>{let E=M-k-(v-b);for(let C=0;C<f.length;C+=3){let z=f[C+1];if(z<0||b>z+m-y)continue;let B=f[C]+m-y;v>=B?f[C+1]=b<=B?-2:-1:b>=m&&E&&(f[C]+=E,f[C+1]+=E)}y+=E}),m=t.maps[h].map(m,-1)}let d=!1;for(let h=0;h<f.length;h+=3)if(f[h+1]<0){if(f[h+1]==-2){d=!0,f[h+1]=-1;continue}let m=t.map(n[h]+o),y=m-l;if(y<0||y>=s.content.size){d=!0;continue}let b=t.map(n[h+1]+o,-1),v=b-l,{index:k,offset:M}=s.content.findIndex(y),E=s.maybeChild(k);if(E&&M==y&&M+E.nodeSize==v){let C=f[h+2].mapInner(t,E,m+1,n[h]+o+1,c);C!=Yt?(f[h]=y,f[h+1]=v,f[h+2]=C):(f[h+1]=-2,d=!0)}else d=!0}if(d){let h=PC(f,n,e,t,l,o,c),m=Ac(h,s,0,c);e=m.local;for(let y=0;y<f.length;y+=3)f[y+1]<0&&(f.splice(y,3),y-=3);for(let y=0,b=0;y<m.children.length;y+=3){let v=m.children[y];for(;b<f.length&&f[b]<v;)b+=3;f.splice(b,0,m.children[y],m.children[y+1],m.children[y+2])}}return new ut(e.sort(Fs),f)}function uv(n,e){if(!e||!n.length)return n;let t=[];for(let s=0;s<n.length;s++){let l=n[s];t.push(new Ft(l.from+e,l.to+e,l.type))}return t}function PC(n,e,t,s,l,o,c){function f(d,h){for(let m=0;m<d.local.length;m++){let y=d.local[m].map(s,l,h);y?t.push(y):c.onRemove&&c.onRemove(d.local[m].spec)}for(let m=0;m<d.children.length;m+=3)f(d.children[m+2],d.children[m]+h+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&f(n[d+2],e[d]+o+1);return t}function fv(n,e,t){if(e.isLeaf)return null;let s=t+e.nodeSize,l=null;for(let o=0,c;o<n.length;o++)(c=n[o])&&c.from>t&&c.to<s&&((l||(l=[])).push(c),n[o]=null);return l}function dv(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Ac(n,e,t,s){let l=[],o=!1;e.forEach((f,d)=>{let h=fv(n,f,d+t);if(h){o=!0;let m=Ac(h,f,t+d+1,s);m!=Yt&&l.push(d,d+f.nodeSize,m)}});let c=uv(o?dv(n):n,-t).sort(Fs);for(let f=0;f<c.length;f++)c[f].type.valid(e,c[f])||(s.onRemove&&s.onRemove(c[f].spec),c.splice(f--,1));return c.length||l.length?new ut(c,l):Yt}function Fs(n,e){return n.from-e.from||n.to-e.to}function Ep(n){let e=n;for(let t=0;t<e.length-1;t++){let s=e[t];if(s.from!=s.to)for(let l=t+1;l<e.length;l++){let o=e[l];if(o.from==s.from){o.to!=s.to&&(e==n&&(e=n.slice()),e[l]=o.copy(o.from,s.to),Gb(e,l+1,o.copy(s.to,o.to)));continue}else{o.from<s.to&&(e==n&&(e=n.slice()),e[t]=s.copy(s.from,o.from),Gb(e,l,s.copy(o.from,s.to)));break}}}return e}function Gb(n,e,t){for(;e<n.length&&Fs(t,n[e])>0;)e++;n.splice(e,0,t)}function ah(n){let e=[];return n.someProp("decorations",t=>{let s=t(n.state);s&&s!=Yt&&e.push(s)}),n.cursorWrapper&&e.push(ut.create(n.state.doc,[n.cursorWrapper.deco])),is.from(e)}const JC={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},FC=an&&hs<=11;class XC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class QC{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new XC,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(s=>{for(let l=0;l<s.length;l++)this.queue.push(s[l]);an&&hs<=11&&s.some(l=>l.type=="childList"&&l.removedNodes.length||l.type=="characterData"&&l.oldValue.length>l.target.nodeValue.length)?this.flushSoon():Kt&&e.composing&&s.some(l=>l.type=="childList"&&l.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),FC&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,JC)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(_b(this.view)){if(this.suppressingSelectionUpdates)return Er(this.view);if(an&&hs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ws(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,s;for(let o=e.focusNode;o;o=rl(o))t.add(o);for(let o=e.anchorNode;o;o=rl(o))if(t.has(o)){s=o;break}let l=s&&this.view.docView.nearestDesc(s);if(l&&l.ignoreMutation({type:"selection",target:s.nodeType==3?s.parentNode:s}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let s=e.domSelectionRange(),l=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(s)&&_b(e)&&!this.ignoreSelectionChange(s),o=-1,c=-1,f=!1,d=[];if(e.editable)for(let m=0;m<t.length;m++){let y=this.registerMutation(t[m],d);y&&(o=o<0?y.from:Math.min(y.from,o),c=c<0?y.to:Math.max(y.to,c),y.typeOver&&(f=!0))}if(d.some(m=>m.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let m of d)if(m.nodeName=="BR"&&m.parentNode){let y=m.nextSibling;y&&y.nodeType==1&&y.contentEditable=="false"&&m.parentNode.removeChild(m)}}else if(_n&&d.length){let m=d.filter(y=>y.nodeName=="BR");if(m.length==2){let[y,b]=m;y.parentNode&&y.parentNode.parentNode==b.parentNode?b.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let b of m){let v=b.parentNode;v&&v.nodeName=="LI"&&(!y||e2(e,y)!=v)&&b.remove()}}}let h=null;o<0&&l&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&pu(s)&&(h=yp(e))&&h.eq(Oe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Er(e),this.currentSelection.set(s),e.scrollToSelection()):(o>-1||l)&&(o>-1&&(e.docView.markDirty(o,c),ZC(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,t2(e,d)),this.handleDOMChange(o,c,f,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(s)||Er(e),this.currentSelection.set(s))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let s=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(s==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!s||s.ignoreMutation(e))return null;if(e.type=="childList"){for(let m=0;m<e.addedNodes.length;m++){let y=e.addedNodes[m];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(s.contentDOM&&s.contentDOM!=s.dom&&!s.contentDOM.contains(e.target))return{from:s.posBefore,to:s.posAfter};let l=e.previousSibling,o=e.nextSibling;if(an&&hs<=11&&e.addedNodes.length)for(let m=0;m<e.addedNodes.length;m++){let{previousSibling:y,nextSibling:b}=e.addedNodes[m];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(l=y),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(o=b)}let c=l&&l.parentNode==e.target?It(l)+1:0,f=s.localPosFromDOM(e.target,c,-1),d=o&&o.parentNode==e.target?It(o):e.target.childNodes.length,h=s.localPosFromDOM(e.target,d,1);return{from:f,to:h}}else return e.type=="attributes"?{from:s.posAtStart-s.border,to:s.posAtEnd+s.border}:(this.lastChangedTextNode=e.target,{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Yb=new WeakMap,Kb=!1;function ZC(n){if(!Yb.has(n)&&(Yb.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=_n,Kb)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Kb=!0}}function Pb(n,e){let t=e.startContainer,s=e.startOffset,l=e.endContainer,o=e.endOffset,c=n.domAtPos(n.state.selection.anchor);return Ws(c.node,c.offset,l,o)&&([t,s,l,o]=[l,o,t,s]),{anchorNode:t,anchorOffset:s,focusNode:l,focusOffset:o}}function WC(n,e){if(e.getComposedRanges){let l=e.getComposedRanges(n.root)[0];if(l)return Pb(n,l)}let t;function s(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",s,!0),t?Pb(n,t):null}function e2(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let s=n.docView.nearestDesc(t,!0);if(s&&s.node.isBlock)return t}return null}function t2(n,e){var t;let{focusNode:s,focusOffset:l}=n.domSelectionRange();for(let o of e)if(((t=o.parentNode)===null||t===void 0?void 0:t.nodeName)=="TR"){let c=o.nextSibling;for(;c&&c.nodeName!="TD"&&c.nodeName!="TH";)c=c.nextSibling;if(c){let f=c;for(;;){let d=f.firstChild;if(!d||d.nodeType!=1||d.contentEditable=="false"||/^(BR|IMG)$/.test(d.nodeName))break;f=d}f.insertBefore(o,f.firstChild),s==o&&n.domSelection().collapse(o,l)}else o.parentNode.removeChild(o)}}function n2(n,e,t){let{node:s,fromOffset:l,toOffset:o,from:c,to:f}=n.docView.parseRange(e,t),d=n.domSelectionRange(),h,m=d.anchorNode;if(m&&n.dom.contains(m.nodeType==1?m:m.parentNode)&&(h=[{node:m,offset:d.anchorOffset}],pu(d)||h.push({node:d.focusNode,offset:d.focusOffset})),qt&&n.input.lastKeyCode===8)for(let E=o;E>l;E--){let C=s.childNodes[E-1],z=C.pmViewDesc;if(C.nodeName=="BR"&&!z){o=E;break}if(!z||z.size)break}let y=n.state.doc,b=n.someProp("domParser")||ds.fromSchema(n.state.schema),v=y.resolve(c),k=null,M=b.parse(s,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:l,to:o,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:r2,context:v});if(h&&h[0].pos!=null){let E=h[0].pos,C=h[1]&&h[1].pos;C==null&&(C=E),k={anchor:E+c,head:C+c}}return{doc:M,sel:k,from:c,to:f}}function r2(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Kt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Kt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const s2=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function i2(n,e,t,s,l){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let q=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,se=yp(n,q);if(se&&!n.state.selection.eq(se)){if(qt&&kr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Me=>Me(n,Vs(13,"Enter"))))return;let fe=n.state.tr.setSelection(se);q=="pointer"?fe.setMeta("pointer",!0):q=="key"&&fe.scrollIntoView(),o&&fe.setMeta("composition",o),n.dispatch(fe)}return}let c=n.state.doc.resolve(e),f=c.sharedDepth(t);e=c.before(f+1),t=n.state.doc.resolve(t).after(f+1);let d=n.state.selection,h=n2(n,e,t),m=n.state.doc,y=m.slice(h.from,h.to),b,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(b=n.state.selection.to,v="end"):(b=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let k=a2(y.content,h.doc.content,h.from,b,v);if(k&&n.input.domChangeCount++,(sl&&n.input.lastIOSEnter>Date.now()-225||kr)&&l.some(q=>q.nodeType==1&&!s2.test(q.nodeName))&&(!k||k.endA>=k.endB)&&n.someProp("handleKeyDown",q=>q(n,Vs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!k)if(s&&d instanceof Se&&!d.empty&&d.$head.sameParent(d.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))k={start:d.from,endA:d.to,endB:d.to};else{if(h.sel){let q=Jb(n,n.state.doc,h.sel);if(q&&!q.eq(n.state.selection)){let se=n.state.tr.setSelection(q);o&&se.setMeta("composition",o),n.dispatch(se)}}return}n.state.selection.from<n.state.selection.to&&k.start==k.endB&&n.state.selection instanceof Se&&(k.start>n.state.selection.from&&k.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?k.start=n.state.selection.from:k.endA<n.state.selection.to&&k.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(k.endB+=n.state.selection.to-k.endA,k.endA=n.state.selection.to)),an&&hs<=11&&k.endB==k.start+1&&k.endA==k.start&&k.start>h.from&&h.doc.textBetween(k.start-h.from-1,k.start-h.from+1)==" "&&(k.start--,k.endA--,k.endB--);let M=h.doc.resolveNoCache(k.start-h.from),E=h.doc.resolveNoCache(k.endB-h.from),C=m.resolve(k.start),z=M.sameParent(E)&&M.parent.inlineContent&&C.end()>=k.endA;if((sl&&n.input.lastIOSEnter>Date.now()-225&&(!z||l.some(q=>q.nodeName=="DIV"||q.nodeName=="P"))||!z&&M.pos<h.doc.content.size&&(!M.sameParent(E)||!M.parent.inlineContent)&&M.pos<E.pos&&!/\S/.test(h.doc.textBetween(M.pos,E.pos,"","")))&&n.someProp("handleKeyDown",q=>q(n,Vs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>k.start&&o2(m,k.start,k.endA,M,E)&&n.someProp("handleKeyDown",q=>q(n,Vs(8,"Backspace")))){kr&&qt&&n.domObserver.suppressSelectionUpdates();return}qt&&k.endB==k.start&&(n.input.lastChromeDelete=Date.now()),kr&&!z&&M.start()!=E.start()&&E.parentOffset==0&&M.depth==E.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==k.endA&&(k.endB-=2,E=h.doc.resolveNoCache(k.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(q){return q(n,Vs(13,"Enter"))})},20));let B=k.start,ee=k.endA,G=q=>{let se=q||n.state.tr.replace(B,ee,h.doc.slice(k.start-h.from,k.endB-h.from));if(h.sel){let fe=Jb(n,se.doc,h.sel);fe&&!(qt&&n.composing&&fe.empty&&(k.start!=k.endB||n.input.lastChromeDelete<Date.now()-100)&&(fe.head==B||fe.head==se.mapping.map(ee)-1)||an&&fe.empty&&fe.head==B)&&se.setSelection(fe)}return o&&se.setMeta("composition",o),se.scrollIntoView()},F;if(z)if(M.pos==E.pos){an&&hs<=11&&M.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Er(n),20));let q=G(n.state.tr.delete(B,ee)),se=m.resolve(k.start).marksAcross(m.resolve(k.endA));se&&q.ensureMarks(se),n.dispatch(q)}else if(k.endA==k.endB&&(F=l2(M.parent.content.cut(M.parentOffset,E.parentOffset),C.parent.content.cut(C.parentOffset,k.endA-C.start())))){let q=G(n.state.tr);F.type=="add"?q.addMark(B,ee,F.mark):q.removeMark(B,ee,F.mark),n.dispatch(q)}else if(M.parent.child(M.index()).isText&&M.index()==E.index()-(E.textOffset?0:1)){let q=M.parent.textBetween(M.parentOffset,E.parentOffset),se=()=>G(n.state.tr.insertText(q,B,ee));n.someProp("handleTextInput",fe=>fe(n,B,ee,q,se))||n.dispatch(se())}else n.dispatch(G());else n.dispatch(G())}function Jb(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:bp(n,e.resolve(t.anchor),e.resolve(t.head))}function l2(n,e){let t=n.firstChild.marks,s=e.firstChild.marks,l=t,o=s,c,f,d;for(let m=0;m<s.length;m++)l=s[m].removeFromSet(l);for(let m=0;m<t.length;m++)o=t[m].removeFromSet(o);if(l.length==1&&o.length==0)f=l[0],c="add",d=m=>m.mark(f.addToSet(m.marks));else if(l.length==0&&o.length==1)f=o[0],c="remove",d=m=>m.mark(f.removeFromSet(m.marks));else return null;let h=[];for(let m=0;m<e.childCount;m++)h.push(d(e.child(m)));if(W.from(h).eq(n))return{mark:f,type:c}}function o2(n,e,t,s,l){if(t-e<=l.pos-s.pos||ch(s,!0,!1)<l.pos)return!1;let o=n.resolve(e);if(!s.parent.isTextblock){let f=o.nodeAfter;return f!=null&&t==e+f.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let c=n.resolve(ch(o,!0,!0));return!c.parent.isTextblock||c.pos>t||ch(c,!0,!1)<t?!1:s.parent.content.cut(s.parentOffset).eq(c.parent.content)}function ch(n,e,t){let s=n.depth,l=e?n.end():n.pos;for(;s>0&&(e||n.indexAfter(s)==n.node(s).childCount);)s--,l++,e=!1;if(t){let o=n.node(s).maybeChild(n.indexAfter(s));for(;o&&!o.isLeaf;)o=o.firstChild,l++}return l}function a2(n,e,t,s,l){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:c,b:f}=n.findDiffEnd(e,t+n.size,t+e.size);if(l=="end"){let d=Math.max(0,o-Math.min(c,f));s-=c+d-o}if(c<o&&n.size<e.size){let d=s<=o&&s>=c?o-s:0;o-=d,o&&o<e.size&&Fb(e.textBetween(o-1,o+1))&&(o+=d?1:-1),f=o+(f-c),c=o}else if(f<o){let d=s<=o&&s>=f?o-s:0;o-=d,o&&o<n.size&&Fb(n.textBetween(o-1,o+1))&&(o+=d?1:-1),c=o+(c-f),f=o}return{start:o,endA:c,endB:f}}function Fb(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class hv{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new EC,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(e1),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Zb(this),Qb(this),this.nodeViews=Wb(this),this.docView=Ob(this.state.doc,Xb(this),ah(this),this.dom,this),this.domObserver=new QC(this,(s,l,o,c)=>i2(this,s,l,o,c)),this.domObserver.start(),MC(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&qh(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(e1),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let s in this._props)t[s]=this._props[s];t.state=this.state;for(let s in e)t[s]=e[s];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var s;let l=this.state,o=!1,c=!1;e.storedMarks&&this.composing&&(lv(this),c=!0),this.state=e;let f=l.plugins!=e.plugins||this._props.plugins!=t.plugins;if(f||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=Wb(this);u2(v,this.nodeViews)&&(this.nodeViews=v,o=!0)}(f||t.handleDOMEvents!=this._props.handleDOMEvents)&&qh(this),this.editable=Zb(this),Qb(this);let d=ah(this),h=Xb(this),m=l.plugins!=e.plugins&&!l.doc.eq(e.doc)?"reset":e.scrollToSelection>l.scrollToSelection?"to selection":"preserve",y=o||!this.docView.matchesNode(e.doc,h,d);(y||!e.selection.eq(l.selection))&&(c=!0);let b=m=="preserve"&&c&&this.dom.style.overflowAnchor==null&&UM(this);if(c){this.domObserver.stop();let v=y&&(an||qt)&&!this.composing&&!l.selection.empty&&!e.selection.empty&&c2(l.selection,e.selection);if(y){let k=qt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=UC(this)),(o||!this.docView.update(e.doc,h,d,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=Ob(e.doc,h,d,this.dom,this)),k&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&cC(this))?Er(this,v):(Jx(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(l),!((s=this.dragging)===null||s===void 0)&&s.node&&!l.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,l),m=="reset"?this.dom.scrollTop=0:m=="to selection"?this.scrollToSelection():b&&IM(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof ge){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Eb(this,t.getBoundingClientRect(),e)}else Eb(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let s=this.directPlugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let s=this.state.plugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let s=this.pluginViews[t];s.update&&s.update(this,e)}}updateDraggedNode(e,t){let s=e.node,l=-1;if(this.state.doc.nodeAt(s.from)==s.node)l=s.from;else{let o=s.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==s.node&&(l=o)}this.dragging=new av(e.slice,e.move,l<0?void 0:ge.create(this.state.doc,l))}someProp(e,t){let s=this._props&&this._props[e],l;if(s!=null&&(l=t?t(s):s))return l;for(let c=0;c<this.directPlugins.length;c++){let f=this.directPlugins[c].props[e];if(f!=null&&(l=t?t(f):f))return l}let o=this.state.plugins;if(o)for(let c=0;c<o.length;c++){let f=o[c].props[e];if(f!=null&&(l=t?t(f):f))return l}}hasFocus(){if(an){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&VM(this.dom),Er(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return KM(this,e)}coordsAtPos(e,t=1){return Ix(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,s=-1){let l=this.docView.posFromDOM(e,t,s);if(l==null)throw new RangeError("DOM position not inside the editor");return l}endOfTextblock(e,t){return QM(this,t||this.state,e)}pasteHTML(e,t){return wo(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return wo(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return xp(this,e)}destroy(){this.docView&&(CC(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ah(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,AM())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return NC(this,e)}domSelectionRange(){let e=this.domSelection();return e?Kt&&this.root.nodeType===11&&zM(this.dom.ownerDocument)==this.dom&&WC(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}hv.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function Xb(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let s in t)s=="class"?e.class+=" "+t[s]:s=="style"?e.style=(e.style?e.style+";":"")+t[s]:!e[s]&&s!="contenteditable"&&s!="nodeName"&&(e[s]=String(t[s]))}),e.translate||(e.translate="no"),[Ft.node(0,n.state.doc.content.size,e)]}function Qb(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Ft.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Zb(n){return!n.someProp("editable",e=>e(n.state)===!1)}function c2(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Wb(n){let e=Object.create(null);function t(s){for(let l in s)Object.prototype.hasOwnProperty.call(e,l)||(e[l]=s[l])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function u2(n,e){let t=0,s=0;for(let l in n){if(n[l]!=e[l])return!0;t++}for(let l in e)s++;return t!=s}function e1(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var gs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Oc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},f2=typeof navigator<"u"&&/Mac/.test(navigator.platform),d2=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Vt=0;Vt<10;Vt++)gs[48+Vt]=gs[96+Vt]=String(Vt);for(var Vt=1;Vt<=24;Vt++)gs[Vt+111]="F"+Vt;for(var Vt=65;Vt<=90;Vt++)gs[Vt]=String.fromCharCode(Vt+32),Oc[Vt]=String.fromCharCode(Vt);for(var uh in gs)Oc.hasOwnProperty(uh)||(Oc[uh]=gs[uh]);function h2(n){var e=f2&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||d2&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Oc:gs)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const p2=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),m2=typeof navigator<"u"&&/Win/.test(navigator.platform);function g2(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let s,l,o,c;for(let f=0;f<e.length-1;f++){let d=e[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))p2?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(t="Alt-"+t),l&&(t="Ctrl-"+t),c&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function y2(n){let e=Object.create(null);for(let t in n)e[g2(t)]=n[t];return e}function fh(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function b2(n){return new ft({props:{handleKeyDown:pv(n)}})}function pv(n){let e=y2(n);return function(t,s){let l=h2(s),o,c=e[fh(l,s)];if(c&&c(t.state,t.dispatch,t))return!0;if(l.length==1&&l!=" "){if(s.shiftKey){let f=e[fh(l,s,!1)];if(f&&f(t.state,t.dispatch,t))return!0}if((s.altKey||s.metaKey||s.ctrlKey)&&!(m2&&s.ctrlKey&&s.altKey)&&(o=gs[s.keyCode])&&o!=l){let f=e[fh(o,s)];if(f&&f(t.state,t.dispatch,t))return!0}}return!1}}var x2=Object.defineProperty,Mp=(n,e)=>{for(var t in e)x2(n,t,{get:e[t],enumerable:!0})};function yu(n){const{state:e,transaction:t}=n;let{selection:s}=t,{doc:l}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return s},get doc(){return l},get tr(){return s=t.selection,l=t.doc,o=t.storedMarks,t}}}var bu=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:e,state:t}=this,{view:s}=e,{tr:l}=t,o=this.buildProps(l);return Object.fromEntries(Object.entries(n).map(([c,f])=>[c,(...h)=>{const m=f(...h)(o);return!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,e=!0){const{rawCommands:t,editor:s,state:l}=this,{view:o}=s,c=[],f=!!n,d=n||l.tr,h=()=>(!f&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(d),c.every(y=>y===!0)),m={...Object.fromEntries(Object.entries(t).map(([y,b])=>[y,(...k)=>{const M=this.buildProps(d,e),E=b(...k)(M);return c.push(E),m}])),run:h};return m}createCan(n){const{rawCommands:e,state:t}=this,s=!1,l=n||t.tr,o=this.buildProps(l,s);return{...Object.fromEntries(Object.entries(e).map(([f,d])=>[f,(...h)=>d(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(l,s)}}buildProps(n,e=!0){const{rawCommands:t,editor:s,state:l}=this,{view:o}=s,c={tr:n,editor:s,view:o,state:yu({state:l,transaction:n}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(n,e),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,(...h)=>d(...h)(c)]))}};return c}},mv={};Mp(mv,{blur:()=>v2,clearContent:()=>S2,clearNodes:()=>k2,command:()=>T2,createParagraphNear:()=>E2,cut:()=>M2,deleteCurrentNode:()=>C2,deleteNode:()=>w2,deleteRange:()=>N2,deleteSelection:()=>A2,enter:()=>O2,exitCode:()=>D2,extendMarkRange:()=>j2,first:()=>R2,focus:()=>L2,forEach:()=>_2,insertContent:()=>B2,insertContentAt:()=>I2,joinBackward:()=>$2,joinDown:()=>q2,joinForward:()=>G2,joinItemBackward:()=>Y2,joinItemForward:()=>K2,joinTextblockBackward:()=>P2,joinTextblockForward:()=>J2,joinUp:()=>V2,keyboardShortcut:()=>X2,lift:()=>Q2,liftEmptyBlock:()=>Z2,liftListItem:()=>W2,newlineInCode:()=>ew,resetAttributes:()=>tw,scrollIntoView:()=>nw,selectAll:()=>rw,selectNodeBackward:()=>sw,selectNodeForward:()=>iw,selectParentNode:()=>lw,selectTextblockEnd:()=>ow,selectTextblockStart:()=>aw,setContent:()=>cw,setMark:()=>Aw,setMeta:()=>Ow,setNode:()=>Dw,setNodeSelection:()=>jw,setTextDirection:()=>Rw,setTextSelection:()=>zw,sinkListItem:()=>Lw,splitBlock:()=>_w,splitListItem:()=>Bw,toggleList:()=>Hw,toggleMark:()=>Uw,toggleNode:()=>Iw,toggleWrap:()=>Vw,undoInputRule:()=>qw,unsetAllMarks:()=>$w,unsetMark:()=>Gw,unsetTextDirection:()=>Yw,updateAttributes:()=>Kw,wrapIn:()=>Pw,wrapInList:()=>Jw});var v2=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window?.getSelection())==null||t.removeAllRanges())}),!0),S2=(n=!0)=>({commands:e})=>e.setContent("",{emitUpdate:n}),k2=()=>({state:n,tr:e,dispatch:t})=>{const{selection:s}=e,{ranges:l}=s;return t&&l.forEach(({$from:o,$to:c})=>{n.doc.nodesBetween(o.pos,c.pos,(f,d)=>{if(f.type.isText)return;const{doc:h,mapping:m}=e,y=h.resolve(m.map(d)),b=h.resolve(m.map(d+f.nodeSize)),v=y.blockRange(b);if(!v)return;const k=al(v);if(f.type.isTextblock){const{defaultType:M}=y.parent.contentMatchAt(y.index());e.setNodeMarkup(v.start,M)}(k||k===0)&&e.lift(v,k)})}),!0},T2=n=>e=>n(e),E2=()=>({state:n,dispatch:e})=>Ax(n,e),M2=(n,e)=>({editor:t,tr:s})=>{const{state:l}=t,o=l.doc.slice(n.from,n.to);s.deleteRange(n.from,n.to);const c=s.mapping.map(e);return s.insert(c,o.content),s.setSelection(new Se(s.doc.resolve(Math.max(c-1,0)))),!0},C2=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,s=t.$anchor.node();if(s.content.size>0)return!1;const l=n.selection.$anchor;for(let o=l.depth;o>0;o-=1)if(l.node(o).type===s.type){if(e){const f=l.before(o),d=l.after(o);n.delete(f,d).scrollIntoView()}return!0}return!1};function Et(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}var w2=n=>({tr:e,state:t,dispatch:s})=>{const l=Et(n,t.schema),o=e.selection.$anchor;for(let c=o.depth;c>0;c-=1)if(o.node(c).type===l){if(s){const d=o.before(c),h=o.after(c);e.delete(d,h).scrollIntoView()}return!0}return!1},N2=n=>({tr:e,dispatch:t})=>{const{from:s,to:l}=n;return t&&e.delete(s,l),!0},A2=()=>({state:n,dispatch:e})=>fp(n,e),O2=()=>({commands:n})=>n.keyboardShortcut("Enter"),D2=()=>({state:n,dispatch:e})=>pM(n,e);function Cp(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function Dc(n,e,t={strict:!0}){const s=Object.keys(e);return s.length?s.every(l=>t.strict?e[l]===n[l]:Cp(e[l])?e[l].test(n[l]):e[l]===n[l]):!0}function gv(n,e,t={}){return n.find(s=>s.type===e&&Dc(Object.fromEntries(Object.keys(t).map(l=>[l,s.attrs[l]])),t))}function t1(n,e,t={}){return!!gv(n,e,t)}function wp(n,e,t){var s;if(!n||!e)return;let l=n.parent.childAfter(n.parentOffset);if((!l.node||!l.node.marks.some(m=>m.type===e))&&(l=n.parent.childBefore(n.parentOffset)),!l.node||!l.node.marks.some(m=>m.type===e)||(t=t||((s=l.node.marks[0])==null?void 0:s.attrs),!gv([...l.node.marks],e,t)))return;let c=l.index,f=n.start()+l.offset,d=c+1,h=f+l.node.nodeSize;for(;c>0&&t1([...n.parent.child(c-1).marks],e,t);)c-=1,f-=n.parent.child(c).nodeSize;for(;d<n.parent.childCount&&t1([...n.parent.child(d).marks],e,t);)h+=n.parent.child(d).nodeSize,d+=1;return{from:f,to:h}}function Cr(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}var j2=(n,e={})=>({tr:t,state:s,dispatch:l})=>{const o=Cr(n,s.schema),{doc:c,selection:f}=t,{$from:d,from:h,to:m}=f;if(l){const y=wp(d,o,e);if(y&&y.from<=h&&y.to>=m){const b=Se.create(c,y.from,y.to);t.setSelection(b)}}return!0},R2=n=>e=>{const t=typeof n=="function"?n(e):n;for(let s=0;s<t.length;s+=1)if(t[s](e))return!0;return!1};function yv(n){return n instanceof Se}function Gs(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function bv(n,e=null){if(!e)return null;const t=Oe.atStart(n),s=Oe.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return s;const l=t.from,o=s.to;return e==="all"?Se.create(n,Gs(0,l,o),Gs(n.content.size,l,o)):Se.create(n,Gs(e,l,o),Gs(e,l,o))}function n1(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function jc(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function z2(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var L2=(n=null,e={})=>({editor:t,view:s,tr:l,dispatch:o})=>{e={scrollIntoView:!0,...e};const c=()=>{(jc()||n1())&&s.dom.focus(),z2()&&!jc()&&!n1()&&s.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{t.isDestroyed||(s.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};try{if(s.hasFocus()&&n===null||n===!1)return!0}catch{return!1}if(o&&n===null&&!yv(t.state.selection))return c(),!0;const f=bv(l.doc,n)||t.state.selection,d=t.state.selection.eq(f);return o&&(d||l.setSelection(f),d&&l.storedMarks&&l.setStoredMarks(l.storedMarks),c()),!0},_2=(n,e)=>t=>n.every((s,l)=>e(s,{...t,index:l})),B2=(n,e)=>({tr:t,commands:s})=>s.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),xv=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const s=e[t];s.nodeType===3&&s.nodeValue&&/^(\n\s\s|\n)$/.test(s.nodeValue)?n.removeChild(s):s.nodeType===1&&xv(s)}return n};function sc(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return xv(t)}function Ao(n,e,t){if(n instanceof fs||n instanceof W)return n;t={slice:!0,parseOptions:{},...t};const s=typeof n=="object"&&n!==null,l=typeof n=="string";if(s)try{if(Array.isArray(n)&&n.length>0)return W.fromArray(n.map(f=>e.nodeFromJSON(f)));const c=e.nodeFromJSON(n);return t.errorOnInvalidContent&&c.check(),c}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),Ao("",e,t)}if(l){if(t.errorOnInvalidContent){let c=!1,f="";const d=new nx({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(c=!0,f=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?ds.fromSchema(d).parseSlice(sc(n),t.parseOptions):ds.fromSchema(d).parse(sc(n),t.parseOptions),t.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${f}`)})}const o=ds.fromSchema(e);return t.slice?o.parseSlice(sc(n),t.parseOptions).content:o.parse(sc(n),t.parseOptions)}return Ao("",e,t)}function H2(n,e,t){const s=n.steps.length-1;if(s<e)return;const l=n.steps[s];if(!(l instanceof Dt||l instanceof jt))return;const o=n.mapping.maps[s];let c=0;o.forEach((f,d,h,m)=>{c===0&&(c=m)}),n.setSelection(Oe.near(n.doc.resolve(c),t))}var U2=n=>!("type"in n),I2=(n,e,t)=>({tr:s,dispatch:l,editor:o})=>{var c;if(l){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let f;const d=E=>{o.emit("contentError",{editor:o,error:E,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Ao(e,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(E){d(E)}try{f=Ao(e,o.schema,{parseOptions:h,errorOnInvalidContent:(c=t.errorOnInvalidContent)!=null?c:o.options.enableContentCheck})}catch(E){return d(E),!1}let{from:m,to:y}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},b=!0,v=!0;if((U2(f)?f:[f]).forEach(E=>{E.check(),b=b?E.isText&&E.marks.length===0:!1,v=v?E.isBlock:!1}),m===y&&v){const{parent:E}=s.doc.resolve(m);E.isTextblock&&!E.type.spec.code&&!E.childCount&&(m-=1,y+=1)}let M;if(b){if(Array.isArray(e))M=e.map(E=>E.text||"").join("");else if(e instanceof W){let E="";e.forEach(C=>{C.text&&(E+=C.text)}),M=E}else typeof e=="object"&&e&&e.text?M=e.text:M=e;s.insertText(M,m,y)}else{M=f;const E=s.doc.resolve(m),C=E.node(),z=E.parentOffset===0,B=C.isText||C.isTextblock,ee=C.content.size>0;z&&B&&ee&&(m=Math.max(0,m-1)),s.replaceWith(m,y,M)}t.updateSelection&&H2(s,s.steps.length-1,-1),t.applyInputRules&&s.setMeta("applyInputRules",{from:m,text:M}),t.applyPasteRules&&s.setMeta("applyPasteRules",{from:m,text:M})}return!0},V2=()=>({state:n,dispatch:e})=>fM(n,e),q2=()=>({state:n,dispatch:e})=>dM(n,e),$2=()=>({state:n,dispatch:e})=>kx(n,e),G2=()=>({state:n,dispatch:e})=>Cx(n,e),Y2=()=>({state:n,dispatch:e,tr:t})=>{try{const s=fu(n.doc,n.selection.$from.pos,-1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},K2=()=>({state:n,dispatch:e,tr:t})=>{try{const s=fu(n.doc,n.selection.$from.pos,1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},P2=()=>({state:n,dispatch:e})=>cM(n,e),J2=()=>({state:n,dispatch:e})=>uM(n,e);function vv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function F2(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let s,l,o,c;for(let f=0;f<e.length-1;f+=1){const d=e[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))jc()||vv()?c=!0:l=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return s&&(t=`Alt-${t}`),l&&(t=`Ctrl-${t}`),c&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}var X2=n=>({editor:e,view:t,tr:s,dispatch:l})=>{const o=F2(n).split(/-(?!$)/),c=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),f=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,f))});return d?.steps.forEach(h=>{const m=h.map(s.mapping);m&&l&&s.maybeStep(m)}),!0};function ys(n,e,t={}){const{from:s,to:l,empty:o}=n.selection,c=e?Et(e,n.schema):null,f=[];n.doc.nodesBetween(s,l,(y,b)=>{if(y.isText)return;const v=Math.max(s,b),k=Math.min(l,b+y.nodeSize);f.push({node:y,from:v,to:k})});const d=l-s,h=f.filter(y=>c?c.name===y.node.type.name:!0).filter(y=>Dc(y.node.attrs,t,{strict:!1}));return o?!!h.length:h.reduce((y,b)=>y+b.to-b.from,0)>=d}var Q2=(n,e={})=>({state:t,dispatch:s})=>{const l=Et(n,t.schema);return ys(t,l,e)?hM(t,s):!1},Z2=()=>({state:n,dispatch:e})=>Ox(n,e),W2=n=>({state:e,dispatch:t})=>{const s=Et(n,e.schema);return MM(s)(e,t)},ew=()=>({state:n,dispatch:e})=>Nx(n,e);function xu(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function r1(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((s,l)=>(t.includes(l)||(s[l]=n[l]),s),{})}var tw=(n,e)=>({tr:t,state:s,dispatch:l})=>{let o=null,c=null;const f=xu(typeof n=="string"?n:n.name,s.schema);if(!f)return!1;f==="node"&&(o=Et(n,s.schema)),f==="mark"&&(c=Cr(n,s.schema));let d=!1;return t.selection.ranges.forEach(h=>{s.doc.nodesBetween(h.$from.pos,h.$to.pos,(m,y)=>{o&&o===m.type&&(d=!0,l&&t.setNodeMarkup(y,void 0,r1(m.attrs,e))),c&&m.marks.length&&m.marks.forEach(b=>{c===b.type&&(d=!0,l&&t.addMark(y,y+m.nodeSize,c.create(r1(b.attrs,e))))})})}),d},nw=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),rw=()=>({tr:n,dispatch:e})=>{if(e){const t=new vn(n.doc);n.setSelection(t)}return!0},sw=()=>({state:n,dispatch:e})=>Ex(n,e),iw=()=>({state:n,dispatch:e})=>wx(n,e),lw=()=>({state:n,dispatch:e})=>yM(n,e),ow=()=>({state:n,dispatch:e})=>vM(n,e),aw=()=>({state:n,dispatch:e})=>xM(n,e);function $h(n,e,t={},s={}){return Ao(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:s.errorOnInvalidContent})}var cw=(n,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:s={}}={})=>({editor:l,tr:o,dispatch:c,commands:f})=>{const{doc:d}=o;if(s.preserveWhitespace!=="full"){const h=$h(n,l.schema,s,{errorOnInvalidContent:e??l.options.enableContentCheck});return c&&o.replaceWith(0,d.content.size,h).setMeta("preventUpdate",!t),!0}return c&&o.setMeta("preventUpdate",!t),f.insertContentAt({from:0,to:d.content.size},n,{parseOptions:s,errorOnInvalidContent:e??l.options.enableContentCheck})};function Sv(n,e){const t=Cr(e,n.schema),{from:s,to:l,empty:o}=n.selection,c=[];o?(n.storedMarks&&c.push(...n.storedMarks),c.push(...n.selection.$head.marks())):n.doc.nodesBetween(s,l,d=>{c.push(...d.marks)});const f=c.find(d=>d.type.name===t.name);return f?{...f.attrs}:{}}function kv(n,e){const t=new bx(n);return e.forEach(s=>{s.steps.forEach(l=>{t.step(l)})}),t}function uw(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function fw(n,e,t){const s=[];return n.nodesBetween(e.from,e.to,(l,o)=>{t(l)&&s.push({node:l,pos:o})}),s}function dw(n,e){for(let t=n.depth;t>0;t-=1){const s=n.node(t);if(e(s))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:s}}}function vu(n){return e=>dw(e.$from,n)}function pe(n,e,t){return n.config[e]===void 0&&n.parent?pe(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?pe(n.parent,e,t):null}):n.config[e]}function Np(n){return n.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},s=pe(e,"addExtensions",t);return s?[e,...Np(s())]:e}).flat(10)}function Ap(n,e){const t=ni.fromSchema(e).serializeFragment(n),l=document.implementation.createHTMLDocument().createElement("div");return l.appendChild(t),l.innerHTML}function Tv(n){return typeof n=="function"}function Je(n,e=void 0,...t){return Tv(n)?e?n.bind(e)(...t):n(...t):n}function hw(n={}){return Object.keys(n).length===0&&n.constructor===Object}function il(n){const e=n.filter(l=>l.type==="extension"),t=n.filter(l=>l.type==="node"),s=n.filter(l=>l.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:s}}function Ev(n){const e=[],{nodeExtensions:t,markExtensions:s}=il(n),l=[...t,...s],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(c=>{const f={name:c.name,options:c.options,storage:c.storage,extensions:l},d=pe(c,"addGlobalAttributes",f);if(!d)return;d().forEach(m=>{m.types.forEach(y=>{Object.entries(m.attributes).forEach(([b,v])=>{e.push({type:y,name:b,attribute:{...o,...v}})})})})}),l.forEach(c=>{const f={name:c.name,options:c.options,storage:c.storage},d=pe(c,"addAttributes",f);if(!d)return;const h=d();Object.entries(h).forEach(([m,y])=>{const b={...o,...y};typeof b?.default=="function"&&(b.default=b.default()),b?.isRequired&&b?.default===void 0&&delete b.default,e.push({type:c.name,name:m,attribute:b})})}),e}function Mt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const s={...e};return Object.entries(t).forEach(([l,o])=>{if(!s[l]){s[l]=o;return}if(l==="class"){const f=o?String(o).split(" "):[],d=s[l]?s[l].split(" "):[],h=f.filter(m=>!d.includes(m));s[l]=[...d,...h].join(" ")}else if(l==="style"){const f=o?o.split(";").map(m=>m.trim()).filter(Boolean):[],d=s[l]?s[l].split(";").map(m=>m.trim()).filter(Boolean):[],h=new Map;d.forEach(m=>{const[y,b]=m.split(":").map(v=>v.trim());h.set(y,b)}),f.forEach(m=>{const[y,b]=m.split(":").map(v=>v.trim());h.set(y,b)}),s[l]=Array.from(h.entries()).map(([m,y])=>`${m}: ${y}`).join("; ")}else s[l]=o}),s},{})}function Oo(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,s)=>Mt(t,s),{})}function pw(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function s1(n,e){return"style"in n?n:{...n,getAttrs:t=>{const s=n.getAttrs?n.getAttrs(t):n.attrs;if(s===!1)return!1;const l=e.reduce((o,c)=>{const f=c.attribute.parseHTML?c.attribute.parseHTML(t):pw(t.getAttribute(c.name));return f==null?o:{...o,[c.name]:f}},{});return{...s,...l}}}}function i1(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&hw(t)?!1:t!=null))}function l1(n){var e,t;const s={};return!((e=n?.attribute)!=null&&e.isRequired)&&"default"in(n?.attribute||{})&&(s.default=n.attribute.default),((t=n?.attribute)==null?void 0:t.validate)!==void 0&&(s.validate=n.attribute.validate),[n.name,s]}function mw(n,e){var t;const s=Ev(n),{nodeExtensions:l,markExtensions:o}=il(n),c=(t=l.find(h=>pe(h,"topNode")))==null?void 0:t.name,f=Object.fromEntries(l.map(h=>{const m=s.filter(C=>C.type===h.name),y={name:h.name,options:h.options,storage:h.storage,editor:e},b=n.reduce((C,z)=>{const B=pe(z,"extendNodeSchema",y);return{...C,...B?B(h):{}}},{}),v=i1({...b,content:Je(pe(h,"content",y)),marks:Je(pe(h,"marks",y)),group:Je(pe(h,"group",y)),inline:Je(pe(h,"inline",y)),atom:Je(pe(h,"atom",y)),selectable:Je(pe(h,"selectable",y)),draggable:Je(pe(h,"draggable",y)),code:Je(pe(h,"code",y)),whitespace:Je(pe(h,"whitespace",y)),linebreakReplacement:Je(pe(h,"linebreakReplacement",y)),defining:Je(pe(h,"defining",y)),isolating:Je(pe(h,"isolating",y)),attrs:Object.fromEntries(m.map(l1))}),k=Je(pe(h,"parseHTML",y));k&&(v.parseDOM=k.map(C=>s1(C,m)));const M=pe(h,"renderHTML",y);M&&(v.toDOM=C=>M({node:C,HTMLAttributes:Oo(C,m)}));const E=pe(h,"renderText",y);return E&&(v.toText=E),[h.name,v]})),d=Object.fromEntries(o.map(h=>{const m=s.filter(E=>E.type===h.name),y={name:h.name,options:h.options,storage:h.storage,editor:e},b=n.reduce((E,C)=>{const z=pe(C,"extendMarkSchema",y);return{...E,...z?z(h):{}}},{}),v=i1({...b,inclusive:Je(pe(h,"inclusive",y)),excludes:Je(pe(h,"excludes",y)),group:Je(pe(h,"group",y)),spanning:Je(pe(h,"spanning",y)),code:Je(pe(h,"code",y)),attrs:Object.fromEntries(m.map(l1))}),k=Je(pe(h,"parseHTML",y));k&&(v.parseDOM=k.map(E=>s1(E,m)));const M=pe(h,"renderHTML",y);return M&&(v.toDOM=E=>M({mark:E,HTMLAttributes:Oo(E,m)})),[h.name,v]}));return new nx({topNode:c,nodes:f,marks:d})}function gw(n){const e=n.filter((t,s)=>n.indexOf(t)!==s);return Array.from(new Set(e))}function Rc(n){return n.sort((t,s)=>{const l=pe(t,"priority")||100,o=pe(s,"priority")||100;return l>o?-1:l<o?1:0})}function Mv(n){const e=Rc(Np(n)),t=gw(e.map(s=>s.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),e}function Cv(n,e,t){const{from:s,to:l}=e,{blockSeparator:o=`

`,textSerializers:c={}}=t||{};let f="";return n.nodesBetween(s,l,(d,h,m,y)=>{var b;d.isBlock&&h>s&&(f+=o);const v=c?.[d.type.name];if(v)return m&&(f+=v({node:d,pos:h,parent:m,index:y,range:e})),!1;d.isText&&(f+=(b=d?.text)==null?void 0:b.slice(Math.max(s,h)-h,l-h))}),f}function yw(n,e){const t={from:0,to:n.content.size};return Cv(n,t,e)}function wv(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function bw(n,e){const t=Et(e,n.schema),{from:s,to:l}=n.selection,o=[];n.doc.nodesBetween(s,l,f=>{o.push(f)});const c=o.reverse().find(f=>f.type.name===t.name);return c?{...c.attrs}:{}}function Nv(n,e){const t=xu(typeof e=="string"?e:e.name,n.schema);return t==="node"?bw(n,e):t==="mark"?Sv(n,e):{}}function xw(n,e=JSON.stringify){const t={};return n.filter(s=>{const l=e(s);return Object.prototype.hasOwnProperty.call(t,l)?!1:t[l]=!0})}function vw(n){const e=xw(n);return e.length===1?e:e.filter((t,s)=>!e.filter((o,c)=>c!==s).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function Av(n){const{mapping:e,steps:t}=n,s=[];return e.maps.forEach((l,o)=>{const c=[];if(l.ranges.length)l.forEach((f,d)=>{c.push({from:f,to:d})});else{const{from:f,to:d}=t[o];if(f===void 0||d===void 0)return;c.push({from:f,to:d})}c.forEach(({from:f,to:d})=>{const h=e.slice(o).map(f,-1),m=e.slice(o).map(d),y=e.invert().map(h,-1),b=e.invert().map(m);s.push({oldRange:{from:y,to:b},newRange:{from:h,to:m}})})}),vw(s)}function Op(n,e,t){const s=[];return n===e?t.resolve(n).marks().forEach(l=>{const o=t.resolve(n),c=wp(o,l.type);c&&s.push({mark:l,...c})}):t.nodesBetween(n,e,(l,o)=>{!l||l?.nodeSize===void 0||s.push(...l.marks.map(c=>({from:o,to:o+l.nodeSize,mark:c})))}),s}var Sw=(n,e,t,s=20)=>{const l=n.doc.resolve(t);let o=s,c=null;for(;o>0&&c===null;){const f=l.node(o);f?.type.name===e?c=f:o-=1}return[c,o]};function ic(n,e){return e.nodes[n]||e.marks[n]||null}function gc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([s])=>{const l=n.find(o=>o.type===e&&o.name===s);return l?l.attribute.keepOnSplit:!1}))}var kw=(n,e=500)=>{let t="";const s=n.parentOffset;return n.parent.nodesBetween(Math.max(0,s-e),s,(l,o,c,f)=>{var d,h;const m=((h=(d=l.type.spec).toText)==null?void 0:h.call(d,{node:l,pos:o,parent:c,index:f}))||l.textContent||"%leaf%";t+=l.isAtom&&!l.isText?m:m.slice(0,Math.max(0,s-o))}),t};function Gh(n,e,t={}){const{empty:s,ranges:l}=n.selection,o=e?Cr(e,n.schema):null;if(s)return!!(n.storedMarks||n.selection.$from.marks()).filter(y=>o?o.name===y.type.name:!0).find(y=>Dc(y.attrs,t,{strict:!1}));let c=0;const f=[];if(l.forEach(({$from:y,$to:b})=>{const v=y.pos,k=b.pos;n.doc.nodesBetween(v,k,(M,E)=>{if(!M.isText&&!M.marks.length)return;const C=Math.max(v,E),z=Math.min(k,E+M.nodeSize),B=z-C;c+=B,f.push(...M.marks.map(ee=>({mark:ee,from:C,to:z})))})}),c===0)return!1;const d=f.filter(y=>o?o.name===y.mark.type.name:!0).filter(y=>Dc(y.mark.attrs,t,{strict:!1})).reduce((y,b)=>y+b.to-b.from,0),h=f.filter(y=>o?y.mark.type!==o&&y.mark.type.excludes(o):!0).reduce((y,b)=>y+b.to-b.from,0);return(d>0?d+h:d)>=c}function Tw(n,e,t={}){if(!e)return ys(n,null,t)||Gh(n,null,t);const s=xu(e,n.schema);return s==="node"?ys(n,e,t):s==="mark"?Gh(n,e,t):!1}var Ew=(n,e)=>{const{$from:t,$to:s,$anchor:l}=n.selection;if(e){const o=vu(f=>f.type.name===e)(n.selection);if(!o)return!1;const c=n.doc.resolve(o.pos+1);return l.pos+1===c.end()}return!(s.parentOffset<s.parent.nodeSize-2||t.pos!==s.pos)},Mw=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function o1(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function a1(n,e){const{nodeExtensions:t}=il(e),s=t.find(c=>c.name===n);if(!s)return!1;const l={name:s.name,options:s.options,storage:s.storage},o=Je(pe(s,"group",l));return typeof o!="string"?!1:o.split(" ").includes("list")}function Su(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var s;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((s=n.text)!=null?s:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let l=!0;return n.content.forEach(o=>{l!==!1&&(Su(o,{ignoreWhitespace:t,checkChildren:e})||(l=!1))}),l}return!1}function Ov(n){return n instanceof ge}var Dv=class jv{constructor(e){this.position=e}static fromJSON(e){return new jv(e.position)}toJSON(){return{position:this.position}}};function Cw(n,e){const t=e.mapping.mapResult(n.position);return{position:new Dv(t.pos),mapResult:t}}function ww(n){return new Dv(n)}function Nw(n,e,t){var s;const{selection:l}=e;let o=null;if(yv(l)&&(o=l.$cursor),o){const f=(s=n.storedMarks)!=null?s:o.marks();return o.parent.type.allowsMarkType(t)&&(!!t.isInSet(f)||!f.some(h=>h.type.excludes(t)))}const{ranges:c}=l;return c.some(({$from:f,$to:d})=>{let h=f.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(f.pos,d.pos,(m,y,b)=>{if(h)return!1;if(m.isInline){const v=!b||b.type.allowsMarkType(t),k=!!t.isInSet(m.marks)||!m.marks.some(M=>M.type.excludes(t));h=v&&k}return!h}),h})}var Aw=(n,e={})=>({tr:t,state:s,dispatch:l})=>{const{selection:o}=t,{empty:c,ranges:f}=o,d=Cr(n,s.schema);if(l)if(c){const h=Sv(s,d);t.addStoredMark(d.create({...h,...e}))}else f.forEach(h=>{const m=h.$from.pos,y=h.$to.pos;s.doc.nodesBetween(m,y,(b,v)=>{const k=Math.max(v,m),M=Math.min(v+b.nodeSize,y);b.marks.find(C=>C.type===d)?b.marks.forEach(C=>{d===C.type&&t.addMark(k,M,d.create({...C.attrs,...e}))}):t.addMark(k,M,d.create(e))})});return Nw(s,t,d)},Ow=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Dw=(n,e={})=>({state:t,dispatch:s,chain:l})=>{const o=Et(n,t.schema);let c;return t.selection.$anchor.sameParent(t.selection.$head)&&(c=t.selection.$anchor.parent.attrs),o.isTextblock?l().command(({commands:f})=>Sb(o,{...c,...e})(t)?!0:f.clearNodes()).command(({state:f})=>Sb(o,{...c,...e})(f,s)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},jw=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,l=Gs(n,0,s.content.size),o=ge.create(s,l);e.setSelection(o)}return!0},Rw=(n,e)=>({tr:t,state:s,dispatch:l})=>{const{selection:o}=s;let c,f;return typeof e=="number"?(c=e,f=e):e&&"from"in e&&"to"in e?(c=e.from,f=e.to):(c=o.from,f=o.to),l&&t.doc.nodesBetween(c,f,(d,h)=>{d.isText||t.setNodeMarkup(h,void 0,{...d.attrs,dir:n})}),!0},zw=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,{from:l,to:o}=typeof n=="number"?{from:n,to:n}:n,c=Se.atStart(s).from,f=Se.atEnd(s).to,d=Gs(l,c,f),h=Gs(o,c,f),m=Se.create(s,d,h);e.setSelection(m)}return!0},Lw=n=>({state:e,dispatch:t})=>{const s=Et(n,e.schema);return NM(s)(e,t)};function c1(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const s=t.filter(l=>e?.includes(l.type.name));n.tr.ensureMarks(s)}}var _w=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:s,editor:l})=>{const{selection:o,doc:c}=e,{$from:f,$to:d}=o,h=l.extensionManager.attributes,m=gc(h,f.node().type.name,f.node().attrs);if(o instanceof ge&&o.node.isBlock)return!f.parentOffset||!Tr(c,f.pos)?!1:(s&&(n&&c1(t,l.extensionManager.splittableMarks),e.split(f.pos).scrollIntoView()),!0);if(!f.parent.isBlock)return!1;const y=d.parentOffset===d.parent.content.size,b=f.depth===0?void 0:uw(f.node(-1).contentMatchAt(f.indexAfter(-1)));let v=y&&b?[{type:b,attrs:m}]:void 0,k=Tr(e.doc,e.mapping.map(f.pos),1,v);if(!v&&!k&&Tr(e.doc,e.mapping.map(f.pos),1,b?[{type:b}]:void 0)&&(k=!0,v=b?[{type:b,attrs:m}]:void 0),s){if(k&&(o instanceof Se&&e.deleteSelection(),e.split(e.mapping.map(f.pos),1,v),b&&!y&&!f.parentOffset&&f.parent.type!==b)){const M=e.mapping.map(f.before()),E=e.doc.resolve(M);f.node(-1).canReplaceWith(E.index(),E.index()+1,b)&&e.setNodeMarkup(e.mapping.map(f.before()),b)}n&&c1(t,l.extensionManager.splittableMarks),e.scrollIntoView()}return k},Bw=(n,e={})=>({tr:t,state:s,dispatch:l,editor:o})=>{var c;const f=Et(n,s.schema),{$from:d,$to:h}=s.selection,m=s.selection.node;if(m&&m.isBlock||d.depth<2||!d.sameParent(h))return!1;const y=d.node(-1);if(y.type!==f)return!1;const b=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==f||d.index(-2)!==d.node(-2).childCount-1)return!1;if(l){let C=W.empty;const z=d.index(-1)?1:d.index(-2)?2:3;for(let se=d.depth-z;se>=d.depth-3;se-=1)C=W.from(d.node(se).copy(C));const B=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,ee={...gc(b,d.node().type.name,d.node().attrs),...e},G=((c=f.contentMatch.defaultType)==null?void 0:c.createAndFill(ee))||void 0;C=C.append(W.from(f.createAndFill(null,G)||void 0));const F=d.before(d.depth-(z-1));t.replace(F,d.after(-B),new ae(C,4-z,0));let q=-1;t.doc.nodesBetween(F,t.doc.content.size,(se,fe)=>{if(q>-1)return!1;se.isTextblock&&se.content.size===0&&(q=fe+1)}),q>-1&&t.setSelection(Se.near(t.doc.resolve(q))),t.scrollIntoView()}return!0}const v=h.pos===d.end()?y.contentMatchAt(0).defaultType:null,k={...gc(b,y.type.name,y.attrs),...e},M={...gc(b,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,h.pos);const E=v?[{type:f,attrs:k},{type:v,attrs:M}]:[{type:f,attrs:k}];if(!Tr(t.doc,d.pos,2))return!1;if(l){const{selection:C,storedMarks:z}=s,{splittableMarks:B}=o.extensionManager,ee=z||C.$to.parentOffset&&C.$from.marks();if(t.split(d.pos,2,E).scrollIntoView(),!ee||!l)return!0;const G=ee.filter(F=>B.includes(F.type.name));t.ensureMarks(G)}return!0},dh=(n,e)=>{const t=vu(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(s===void 0)return!0;const l=n.doc.nodeAt(s);return t.node.type===l?.type&&bs(n.doc,t.pos)&&n.join(t.pos),!0},hh=(n,e)=>{const t=vu(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(t.start).after(t.depth);if(s===void 0)return!0;const l=n.doc.nodeAt(s);return t.node.type===l?.type&&bs(n.doc,s)&&n.join(s),!0},Hw=(n,e,t,s={})=>({editor:l,tr:o,state:c,dispatch:f,chain:d,commands:h,can:m})=>{const{extensions:y,splittableMarks:b}=l.extensionManager,v=Et(n,c.schema),k=Et(e,c.schema),{selection:M,storedMarks:E}=c,{$from:C,$to:z}=M,B=C.blockRange(z),ee=E||M.$to.parentOffset&&M.$from.marks();if(!B)return!1;const G=vu(F=>a1(F.type.name,y))(M);if(B.depth>=1&&G&&B.depth-G.depth<=1){if(G.node.type===v)return h.liftListItem(k);if(a1(G.node.type.name,y)&&v.validContent(G.node.content)&&f)return d().command(()=>(o.setNodeMarkup(G.pos,v),!0)).command(()=>dh(o,v)).command(()=>hh(o,v)).run()}return!t||!ee||!f?d().command(()=>m().wrapInList(v,s)?!0:h.clearNodes()).wrapInList(v,s).command(()=>dh(o,v)).command(()=>hh(o,v)).run():d().command(()=>{const F=m().wrapInList(v,s),q=ee.filter(se=>b.includes(se.type.name));return o.ensureMarks(q),F?!0:h.clearNodes()}).wrapInList(v,s).command(()=>dh(o,v)).command(()=>hh(o,v)).run()},Uw=(n,e={},t={})=>({state:s,commands:l})=>{const{extendEmptyMarkRange:o=!1}=t,c=Cr(n,s.schema);return Gh(s,c,e)?l.unsetMark(c,{extendEmptyMarkRange:o}):l.setMark(c,e)},Iw=(n,e,t={})=>({state:s,commands:l})=>{const o=Et(n,s.schema),c=Et(e,s.schema),f=ys(s,o,t);let d;return s.selection.$anchor.sameParent(s.selection.$head)&&(d=s.selection.$anchor.parent.attrs),f?l.setNode(c,d):l.setNode(o,{...d,...t})},Vw=(n,e={})=>({state:t,commands:s})=>{const l=Et(n,t.schema);return ys(t,l,e)?s.lift(l):s.wrapIn(l,e)},qw=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let s=0;s<t.length;s+=1){const l=t[s];let o;if(l.spec.isInputRules&&(o=l.getState(n))){if(e){const c=n.tr,f=o.transform;for(let d=f.steps.length-1;d>=0;d-=1)c.step(f.steps[d].invert(f.docs[d]));if(o.text){const d=c.doc.resolve(o.from).marks();c.replaceWith(o.from,o.to,n.schema.text(o.text,d))}else c.delete(o.from,o.to)}return!0}}return!1},$w=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:s,ranges:l}=t;return s||e&&l.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},Gw=(n,e={})=>({tr:t,state:s,dispatch:l})=>{var o;const{extendEmptyMarkRange:c=!1}=e,{selection:f}=t,d=Cr(n,s.schema),{$from:h,empty:m,ranges:y}=f;if(!l)return!0;if(m&&c){let{from:b,to:v}=f;const k=(o=h.marks().find(E=>E.type===d))==null?void 0:o.attrs,M=wp(h,d,k);M&&(b=M.from,v=M.to),t.removeMark(b,v,d)}else y.forEach(b=>{t.removeMark(b.$from.pos,b.$to.pos,d)});return t.removeStoredMark(d),!0},Yw=n=>({tr:e,state:t,dispatch:s})=>{const{selection:l}=t;let o,c;return typeof n=="number"?(o=n,c=n):n&&"from"in n&&"to"in n?(o=n.from,c=n.to):(o=l.from,c=l.to),s&&e.doc.nodesBetween(o,c,(f,d)=>{if(f.isText)return;const h={...f.attrs};delete h.dir,e.setNodeMarkup(d,void 0,h)}),!0},Kw=(n,e={})=>({tr:t,state:s,dispatch:l})=>{let o=null,c=null;const f=xu(typeof n=="string"?n:n.name,s.schema);if(!f)return!1;f==="node"&&(o=Et(n,s.schema)),f==="mark"&&(c=Cr(n,s.schema));let d=!1;return t.selection.ranges.forEach(h=>{const m=h.$from.pos,y=h.$to.pos;let b,v,k,M;t.selection.empty?s.doc.nodesBetween(m,y,(E,C)=>{o&&o===E.type&&(d=!0,k=Math.max(C,m),M=Math.min(C+E.nodeSize,y),b=C,v=E)}):s.doc.nodesBetween(m,y,(E,C)=>{C<m&&o&&o===E.type&&(d=!0,k=Math.max(C,m),M=Math.min(C+E.nodeSize,y),b=C,v=E),C>=m&&C<=y&&(o&&o===E.type&&(d=!0,l&&t.setNodeMarkup(C,void 0,{...E.attrs,...e})),c&&E.marks.length&&E.marks.forEach(z=>{if(c===z.type&&(d=!0,l)){const B=Math.max(C,m),ee=Math.min(C+E.nodeSize,y);t.addMark(B,ee,c.create({...z.attrs,...e}))}}))}),v&&(b!==void 0&&l&&t.setNodeMarkup(b,void 0,{...v.attrs,...e}),c&&v.marks.length&&v.marks.forEach(E=>{c===E.type&&l&&t.addMark(k,M,c.create({...E.attrs,...e}))}))}),d},Pw=(n,e={})=>({state:t,dispatch:s})=>{const l=Et(n,t.schema);return SM(l,e)(t,s)},Jw=(n,e={})=>({state:t,dispatch:s})=>{const l=Et(n,t.schema);return kM(l,e)(t,s)},Fw=class{constructor(){this.callbacks={}}on(n,e){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(e),this}emit(n,...e){const t=this.callbacks[n];return t&&t.forEach(s=>s.apply(this,e)),this}off(n,e){const t=this.callbacks[n];return t&&(e?this.callbacks[n]=t.filter(s=>s!==e):delete this.callbacks[n]),this}once(n,e){const t=(...s)=>{this.off(n,t),e.apply(this,s)};return this.on(n,t)}removeAllListeners(){this.callbacks={}}},ku=class{constructor(n){var e;this.find=n.find,this.handler=n.handler,this.undoable=(e=n.undoable)!=null?e:!0}},Xw=(n,e)=>{if(Cp(e))return e.exec(n);const t=e(n);if(!t)return null;const s=[t.text];return s.index=t.index,s.input=n,s.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),s.push(t.replaceWith)),s};function lc(n){var e;const{editor:t,from:s,to:l,text:o,rules:c,plugin:f}=n,{view:d}=t;if(d.composing)return!1;const h=d.state.doc.resolve(s);if(h.parent.type.spec.code||(e=h.nodeBefore||h.nodeAfter)!=null&&e.marks.find(b=>b.type.spec.code))return!1;let m=!1;const y=kw(h)+o;return c.forEach(b=>{if(m)return;const v=Xw(y,b.find);if(!v)return;const k=d.state.tr,M=yu({state:d.state,transaction:k}),E={from:s-(v[0].length-o.length),to:l},{commands:C,chain:z,can:B}=new bu({editor:t,state:M});b.handler({state:M,range:E,match:v,commands:C,chain:z,can:B})===null||!k.steps.length||(b.undoable&&k.setMeta(f,{transform:k,from:s,to:l,text:o}),d.dispatch(k),m=!0)}),m}function Qw(n){const{editor:e,rules:t}=n,s=new ft({state:{init(){return null},apply(l,o,c){const f=l.getMeta(s);if(f)return f;const d=l.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:m}=d;typeof m=="string"?m=m:m=Ap(W.from(m),c.schema);const{from:y}=d,b=y+m.length;lc({editor:e,from:y,to:b,text:m,rules:t,plugin:s})}),l.selectionSet||l.docChanged?null:o}},props:{handleTextInput(l,o,c,f){return lc({editor:e,from:o,to:c,text:f,rules:t,plugin:s})},handleDOMEvents:{compositionend:l=>(setTimeout(()=>{const{$cursor:o}=l.state.selection;o&&lc({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:s})}),!1)},handleKeyDown(l,o){if(o.key!=="Enter")return!1;const{$cursor:c}=l.state.selection;return c?lc({editor:e,from:c.pos,to:c.pos,text:`
`,rules:t,plugin:s}):!1}},isInputRules:!0});return s}function Zw(n){return Object.prototype.toString.call(n).slice(8,-1)}function oc(n){return Zw(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Rv(n,e){const t={...n};return oc(n)&&oc(e)&&Object.keys(e).forEach(s=>{oc(e[s])&&oc(n[s])?t[s]=Rv(n[s],e[s]):t[s]=e[s]}),t}var Dp=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...Je(pe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Je(pe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const e=this.extend({...this.config,addOptions:()=>Rv(this.options,n)});return e.name=this.name,e.parent=this.parent,e}extend(n={}){const e=new this.constructor({...this.config,...n});return e.parent=this,this.child=e,e.name="name"in n?n.name:e.parent.name,e}},ri=class zv extends Dp{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new zv(t)}static handleExit({editor:e,mark:t}){const{tr:s}=e.state,l=e.state.selection.$from;if(l.pos===l.end()){const c=l.marks();if(!!!c.find(h=>h?.type.name===t.name))return!1;const d=c.find(h=>h?.type.name===t.name);return d&&s.removeStoredMark(d),s.insertText(" ",l.pos),e.view.dispatch(s),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function Ww(n){return typeof n=="number"}var eN=class{constructor(n){this.find=n.find,this.handler=n.handler}},tN=(n,e,t)=>{if(Cp(e))return[...n.matchAll(e)];const s=e(n,t);return s?s.map(l=>{const o=[l.text];return o.index=l.index,o.input=n,o.data=l.data,l.replaceWith&&(l.text.includes(l.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(l.replaceWith)),o}):[]};function nN(n){const{editor:e,state:t,from:s,to:l,rule:o,pasteEvent:c,dropEvent:f}=n,{commands:d,chain:h,can:m}=new bu({editor:e,state:t}),y=[];return t.doc.nodesBetween(s,l,(v,k)=>{var M,E,C,z,B;if((E=(M=v.type)==null?void 0:M.spec)!=null&&E.code||!(v.isText||v.isTextblock||v.isInline))return;const ee=(B=(z=(C=v.content)==null?void 0:C.size)!=null?z:v.nodeSize)!=null?B:0,G=Math.max(s,k),F=Math.min(l,k+ee);if(G>=F)return;const q=v.isText?v.text||"":v.textBetween(G-k,F-k,void 0,"");tN(q,o.find,c).forEach(fe=>{if(fe.index===void 0)return;const Me=G+fe.index+1,Ce=Me+fe[0].length,Re={from:t.tr.mapping.map(Me),to:t.tr.mapping.map(Ce)},nt=o.handler({state:t,range:Re,match:fe,commands:d,chain:h,can:m,pasteEvent:c,dropEvent:f});y.push(nt)})}),y.every(v=>v!==null)}var ac=null,rN=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",n),t};function sN(n){const{editor:e,rules:t}=n;let s=null,l=!1,o=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,f;try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}const d=({state:m,from:y,to:b,rule:v,pasteEvt:k})=>{const M=m.tr,E=yu({state:m,transaction:M});if(!(!nN({editor:e,state:E,from:Math.max(y-1,0),to:b.b-1,rule:v,pasteEvent:k,dropEvent:f})||!M.steps.length)){try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,M}};return t.map(m=>new ft({view(y){const b=k=>{var M;s=(M=y.dom.parentElement)!=null&&M.contains(k.target)?y.dom.parentElement:null,s&&(ac=e)},v=()=>{ac&&(ac=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(y,b)=>{if(o=s===y.dom.parentElement,f=b,!o){const v=ac;v?.isEditable&&setTimeout(()=>{const k=v.state.selection;k&&v.commands.deleteRange({from:k.from,to:k.to})},10)}return!1},paste:(y,b)=>{var v;const k=(v=b.clipboardData)==null?void 0:v.getData("text/html");return c=b,l=!!k?.includes("data-pm-slice"),!1}}},appendTransaction:(y,b,v)=>{const k=y[0],M=k.getMeta("uiEvent")==="paste"&&!l,E=k.getMeta("uiEvent")==="drop"&&!o,C=k.getMeta("applyPasteRules"),z=!!C;if(!M&&!E&&!z)return;if(z){let{text:G}=C;typeof G=="string"?G=G:G=Ap(W.from(G),v.schema);const{from:F}=C,q=F+G.length,se=rN(G);return d({rule:m,state:v,from:F,to:{b:q},pasteEvt:se})}const B=b.doc.content.findDiffStart(v.doc.content),ee=b.doc.content.findDiffEnd(v.doc.content);if(!(!Ww(B)||!ee||B===ee.b))return d({rule:m,state:v,from:B,to:ee,pasteEvt:c})}}))}var Tu=class{constructor(n,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=n,this.extensions=Mv(n),this.schema=mw(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((n,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ic(e.name,this.schema)},s=pe(e,"addCommands",t);return s?{...n,...s()}:n},{})}get plugins(){const{editor:n}=this;return Rc([...this.extensions].reverse()).flatMap(s=>{const l={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:n,type:ic(s.name,this.schema)},o=[],c=pe(s,"addKeyboardShortcuts",l);let f={};if(s.type==="mark"&&pe(s,"exitable",l)&&(f.ArrowRight=()=>ri.handleExit({editor:n,mark:s})),c){const b=Object.fromEntries(Object.entries(c()).map(([v,k])=>[v,()=>k({editor:n})]));f={...f,...b}}const d=b2(f);o.push(d);const h=pe(s,"addInputRules",l);if(o1(s,n.options.enableInputRules)&&h){const b=h();if(b&&b.length){const v=Qw({editor:n,rules:b}),k=Array.isArray(v)?v:[v];o.push(...k)}}const m=pe(s,"addPasteRules",l);if(o1(s,n.options.enablePasteRules)&&m){const b=m();if(b&&b.length){const v=sN({editor:n,rules:b});o.push(...v)}}const y=pe(s,"addProseMirrorPlugins",l);if(y){const b=y();o.push(...b)}return o})}get attributes(){return Ev(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:e}=il(this.extensions);return Object.fromEntries(e.filter(t=>!!pe(t,"addNodeView")).map(t=>{const s=this.attributes.filter(d=>d.type===t.name),l={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:Et(t.name,this.schema)},o=pe(t,"addNodeView",l);if(!o)return[];const c=o();if(!c)return[];const f=(d,h,m,y,b)=>{const v=Oo(d,s);return c({node:d,view:h,getPos:m,decorations:y,innerDecorations:b,editor:n,extension:t,HTMLAttributes:v})};return[t.name,f]}))}dispatchTransaction(n){const{editor:e}=this;return Rc([...this.extensions].reverse()).reduceRight((s,l)=>{const o={name:l.name,options:l.options,storage:this.editor.extensionStorage[l.name],editor:e,type:ic(l.name,this.schema)},c=pe(l,"dispatchTransaction",o);return c?f=>{c.call(o,{transaction:f,next:s})}:s},n)}get markViews(){const{editor:n}=this,{markExtensions:e}=il(this.extensions);return Object.fromEntries(e.filter(t=>!!pe(t,"addMarkView")).map(t=>{const s=this.attributes.filter(f=>f.type===t.name),l={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:Cr(t.name,this.schema)},o=pe(t,"addMarkView",l);if(!o)return[];const c=(f,d,h)=>{const m=Oo(f,s);return o()({mark:f,view:d,inline:h,editor:n,extension:t,HTMLAttributes:m,updateAttributes:y=>{bN(f,n,y)}})};return[t.name,c]}))}setupExtensions(){const n=this.extensions;this.editor.extensionStorage=Object.fromEntries(n.map(e=>[e.name,e.storage])),n.forEach(e=>{var t;const s={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ic(e.name,this.schema)};e.type==="mark"&&((t=Je(pe(e,"keepOnSplit",s)))==null||t)&&this.splittableMarks.push(e.name);const l=pe(e,"onBeforeCreate",s),o=pe(e,"onCreate",s),c=pe(e,"onUpdate",s),f=pe(e,"onSelectionUpdate",s),d=pe(e,"onTransaction",s),h=pe(e,"onFocus",s),m=pe(e,"onBlur",s),y=pe(e,"onDestroy",s);l&&this.editor.on("beforeCreate",l),o&&this.editor.on("create",o),c&&this.editor.on("update",c),f&&this.editor.on("selectionUpdate",f),d&&this.editor.on("transaction",d),h&&this.editor.on("focus",h),m&&this.editor.on("blur",m),y&&this.editor.on("destroy",y)})}};Tu.resolve=Mv;Tu.sort=Rc;Tu.flatten=Np;var iN={};Mp(iN,{ClipboardTextSerializer:()=>_v,Commands:()=>Bv,Delete:()=>Hv,Drop:()=>Uv,Editable:()=>Iv,FocusEvents:()=>qv,Keymap:()=>$v,Paste:()=>Gv,Tabindex:()=>Yv,TextDirection:()=>Kv,focusEventsPluginKey:()=>Vv});var bt=class Lv extends Dp{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new Lv(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},_v=bt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ft({key:new wt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:s,selection:l}=e,{ranges:o}=l,c=Math.min(...o.map(m=>m.$from.pos)),f=Math.max(...o.map(m=>m.$to.pos)),d=wv(t);return Cv(s,{from:c,to:f},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),Bv=bt.create({name:"commands",addCommands(){return{...mv}}}),Hv=bt.create({name:"delete",onUpdate({transaction:n,appendedTransactions:e}){var t,s,l;const o=()=>{var c,f,d,h;if((h=(d=(f=(c=this.editor.options.coreExtensionOptions)==null?void 0:c.delete)==null?void 0:f.filterTransaction)==null?void 0:d.call(f,n))!=null?h:n.getMeta("y-sync$"))return;const m=kv(n.before,[n,...e]);Av(m).forEach(v=>{m.mapping.mapResult(v.oldRange.from).deletedAfter&&m.mapping.mapResult(v.oldRange.to).deletedBefore&&m.before.nodesBetween(v.oldRange.from,v.oldRange.to,(k,M)=>{const E=M+k.nodeSize-2,C=v.oldRange.from<=M&&E<=v.oldRange.to;this.editor.emit("delete",{type:"node",node:k,from:M,to:E,newFrom:m.mapping.map(M),newTo:m.mapping.map(E),deletedRange:v.oldRange,newRange:v.newRange,partial:!C,editor:this.editor,transaction:n,combinedTransform:m})})});const b=m.mapping;m.steps.forEach((v,k)=>{var M,E;if(v instanceof qn){const C=b.slice(k).map(v.from,-1),z=b.slice(k).map(v.to),B=b.invert().map(C,-1),ee=b.invert().map(z),G=(M=m.doc.nodeAt(C-1))==null?void 0:M.marks.some(q=>q.eq(v.mark)),F=(E=m.doc.nodeAt(z))==null?void 0:E.marks.some(q=>q.eq(v.mark));this.editor.emit("delete",{type:"mark",mark:v.mark,from:v.from,to:v.to,deletedRange:{from:B,to:ee},newRange:{from:C,to:z},partial:!!(F||G),editor:this.editor,transaction:n,combinedTransform:m})}})};(l=(s=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:s.async)==null||l?setTimeout(o,0):o()}}),Uv=bt.create({name:"drop",addProseMirrorPlugins(){return[new ft({key:new wt("tiptapDrop"),props:{handleDrop:(n,e,t,s)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:s})}}})]}}),Iv=bt.create({name:"editable",addProseMirrorPlugins(){return[new ft({key:new wt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Vv=new wt("focusEvents"),qv=bt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new ft({key:Vv,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const s=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1},blur:(e,t)=>{n.isFocused=!1;const s=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1}}}})]}}),$v=bt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:f})=>{const{selection:d,doc:h}=f,{empty:m,$anchor:y}=d,{pos:b,parent:v}=y,k=y.parent.isTextblock&&b>0?f.doc.resolve(b-1):y,M=k.parent.type.spec.isolating,E=y.pos-y.parentOffset,C=M&&k.parent.childCount===1?E===y.pos:Oe.atStart(h).from===b;return!m||!v.type.isTextblock||v.textContent.length||!C||C&&y.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),s={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},l={...s},o={...s,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return jc()||vv()?o:l},addProseMirrorPlugins(){return[new ft({key:new wt("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(M=>M.getMeta("composition")))return;const s=n.some(M=>M.docChanged)&&!e.doc.eq(t.doc),l=n.some(M=>M.getMeta("preventClearDocument"));if(!s||l)return;const{empty:o,from:c,to:f}=e.selection,d=Oe.atStart(e.doc).from,h=Oe.atEnd(e.doc).to;if(o||!(c===d&&f===h)||!Su(t.doc))return;const b=t.tr,v=yu({state:t,transaction:b}),{commands:k}=new bu({editor:this.editor,state:v});if(k.clearNodes(),!!b.steps.length)return b}})]}}),Gv=bt.create({name:"paste",addProseMirrorPlugins(){return[new ft({key:new wt("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),Yv=bt.create({name:"tabindex",addProseMirrorPlugins(){return[new ft({key:new wt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Kv=bt.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:n}=il(this.extensions);return[{types:n.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const t=e.getAttribute("dir");return t&&(t==="ltr"||t==="rtl"||t==="auto")?t:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new ft({key:new wt("textDirection"),props:{attributes:()=>{const n=this.options.direction;return n?{dir:n}:{}}}})]}}),lN=class co{constructor(e,t,s=!1,l=null){this.currentNode=null,this.actualDepth=null,this.isBlock=s,this.resolvedPos=e,this.editor=t,this.currentNode=l}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,s=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,s=this.to-1}this.editor.commands.insertContentAt({from:t,to:s},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new co(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new co(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new co(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,s)=>{const l=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,c=t.isInline,f=this.pos+s+(o?0:1);if(f<0||f>this.resolvedPos.doc.nodeSize-2)return;const d=this.resolvedPos.doc.resolve(f);if(!l&&!c&&d.depth<=this.depth)return;const h=new co(d,this.editor,l,l||c?t:null);l&&(h.actualDepth=this.depth+1),e.push(h)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let s=null,l=this.parent;for(;l&&!s;){if(l.node.type.name===e)if(Object.keys(t).length>0){const o=l.node.attrs,c=Object.keys(t);for(let f=0;f<c.length;f+=1){const d=c[f];if(o[d]!==t[d])break}}else s=l;l=l.parent}return s}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},s=!1){let l=[];if(!this.children||this.children.length===0)return l;const o=Object.keys(t);return this.children.forEach(c=>{s&&l.length>0||(c.node.type.name===e&&o.every(d=>t[d]===c.node.attrs[d])&&l.push(c),!(s&&l.length>0)&&(l=l.concat(c.querySelectorAll(e,t,s))))}),l}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},oN=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function aN(n,e,t){const s=document.querySelector("style[data-tiptap-style]");if(s!==null)return s;const l=document.createElement("style");return e&&l.setAttribute("nonce",e),l.setAttribute("data-tiptap-style",""),l.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(l),l}var cN=class extends Fw{constructor(n={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:s})=>{throw s},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:Cw,createMappablePosition:ww},this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:s,slice:l,moved:o})=>this.options.onDrop(s,l,o)),this.on("paste",({event:s,slice:l})=>this.options.onPaste(s,l)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=bv(e,this.options.autofocus);this.editorState=Qi.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n?.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=aN(oN,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,e=!0){this.setOptions({editable:n}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.dispatchTransaction(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in n)return Reflect.get(n,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,e){const t=Tv(e)?e(n,[...this.state.plugins]):[...this.state.plugins,n],s=this.state.reconfigure({plugins:t});return this.view.updateState(s),s}unregisterPlugin(n){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(n).forEach(l=>{const o=typeof l=="string"?`${l}$`:l.key;t=t.filter(c=>!c.key.startsWith(o))}),e.length===t.length)return;const s=this.state.reconfigure({plugins:t});return this.view.updateState(s),s}createExtensionManager(){var n,e;const s=[...this.options.enableCoreExtensions?[Iv,_v.configure({blockSeparator:(e=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Bv,qv,$v,Yv,Uv,Gv,Hv,Kv.configure({direction:this.options.textDirection})].filter(l=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[l.name]!==!1:!0):[],...this.options.extensions].filter(l=>["extension","node","mark"].includes(l?.type));this.extensionManager=new Tu(s,this)}createCommandManager(){this.commandManager=new bu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=$h(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),n=$h(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){const{editorProps:e,enableExtensionDispatchTransaction:t}=this.options,s=e.dispatchTransaction||this.dispatchTransaction.bind(this),l=t?this.extensionManager.dispatchTransaction(s):s;this.editorView=new hv(n,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:l,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.prependClass(),this.injectCSS();const c=this.view.dom;c.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(h=>{var m;return(m=this.capturedTransaction)==null?void 0:m.step(h)});return}const{state:e,transactions:t}=this.state.applyTransaction(n),s=!this.state.selection.eq(e.selection),l=t.includes(n),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:e}),!l)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:t.slice(1)}),s&&this.emit("selectionUpdate",{editor:this,transaction:n});const c=t.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),f=c?.getMeta("focus"),d=c?.getMeta("blur");f&&this.emit("focus",{editor:this,event:f.event,transaction:c}),d&&this.emit("blur",{editor:this,event:d.event,transaction:c}),!(n.getMeta("preventUpdate")||!t.some(h=>h.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:t.slice(1)})}getAttributes(n){return Nv(this.state,n)}isActive(n,e){const t=typeof n=="string"?n:null,s=typeof n=="string"?e:n;return Tw(this.state,t,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Ap(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:e=`

`,textSerializers:t={}}=n||{};return yw(this.state.doc,{blockSeparator:e,textSerializers:{...wv(this.schema),...t}})}get isEmpty(){return Su(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,e;return(e=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?e:!0}$node(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(n,e))||null}$nodes(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(n,e))||null}$pos(n){const e=this.state.doc.resolve(n);return new lN(e,this)}get $doc(){return this.$pos(0)}};function ll(n){return new ku({find:n.find,handler:({state:e,range:t,match:s})=>{const l=Je(n.getAttributes,void 0,s);if(l===!1||l===null)return null;const{tr:o}=e,c=s[s.length-1],f=s[0];if(c){const d=f.search(/\S/),h=t.from+f.indexOf(c),m=h+c.length;if(Op(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(M=>M===n.type&&M!==v.mark.type)).filter(v=>v.to>h).length)return null;m<t.to&&o.delete(m,t.to),h>t.from&&o.delete(t.from+d,h);const b=t.from+d+c.length;o.addMark(t.from+d,b,n.type.create(l||{})),o.removeStoredMark(n.type)}},undoable:n.undoable})}function uN(n){return new ku({find:n.find,handler:({state:e,range:t,match:s})=>{const l=Je(n.getAttributes,void 0,s)||{},{tr:o}=e,c=t.from;let f=t.to;const d=n.type.create(l);if(s[1]){const h=s[0].lastIndexOf(s[1]);let m=c+h;m>f?m=f:f=m+s[1].length;const y=s[0][s[0].length-1];o.insertText(y,c+s[0].length-1),o.replaceWith(m,f,d)}else if(s[0]){const h=n.type.isInline?c:c-1;o.insert(h,n.type.create(l)).delete(o.mapping.map(c),o.mapping.map(f))}o.scrollIntoView()},undoable:n.undoable})}function Yh(n){return new ku({find:n.find,handler:({state:e,range:t,match:s})=>{const l=e.doc.resolve(t.from),o=Je(n.getAttributes,void 0,s)||{};if(!l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)},undoable:n.undoable})}function ol(n){return new ku({find:n.find,handler:({state:e,range:t,match:s,chain:l})=>{const o=Je(n.getAttributes,void 0,s)||{},c=e.tr.delete(t.from,t.to),d=c.doc.resolve(t.from).blockRange(),h=d&&cp(d,n.type,o);if(!h)return null;if(c.wrap(d,h),n.keepMarks&&n.editor){const{selection:y,storedMarks:b}=e,{splittableMarks:v}=n.editor.extensionManager,k=b||y.$to.parentOffset&&y.$from.marks();if(k){const M=k.filter(E=>v.includes(E.type.name));c.ensureMarks(M)}}if(n.keepAttributes){const y=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";l().updateAttributes(y,o).run()}const m=c.doc.resolve(t.from-1).nodeBefore;m&&m.type===n.type&&bs(c.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(s,m))&&c.join(t.from-1)},undoable:n.undoable})}function fN(n,e){const{selection:t}=n,{$from:s}=t;if(t instanceof ge){const o=s.index();return s.parent.canReplaceWith(o,o+1,e)}let l=s.depth;for(;l>=0;){const o=s.index(l);if(s.node(l).contentMatchAt(o).matchType(e))return!0;l-=1}return!1}var dN={};Mp(dN,{createAtomBlockMarkdownSpec:()=>hN,createBlockMarkdownSpec:()=>pN,createInlineMarkdownSpec:()=>yN,parseAttributes:()=>jp,parseIndentedBlocks:()=>Kh,renderNestedMarkdownContent:()=>zp,serializeAttributes:()=>Rp});function jp(n){if(!n?.trim())return{};const e={},t=[],s=n.replace(/["']([^"']*)["']/g,h=>(t.push(h),`__QUOTED_${t.length-1}__`)),l=s.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(l){const h=l.map(m=>m.trim().slice(1));e.class=h.join(" ")}const o=s.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const c=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(s.matchAll(c)).forEach(([,h,m])=>{var y;const b=parseInt(((y=m.match(/__QUOTED_(\d+)__/))==null?void 0:y[1])||"0",10),v=t[b];v&&(e[h]=v.slice(1,-1))});const d=s.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(m=>{m.match(/^[a-zA-Z][\w-]*$/)&&(e[m]=!0)}),e}function Rp(n){if(!n||Object.keys(n).length===0)return"";const e=[];return n.class&&String(n.class).split(/\s+/).filter(Boolean).forEach(s=>e.push(`.${s}`)),n.id&&e.push(`#${n.id}`),Object.entries(n).forEach(([t,s])=>{t==="class"||t==="id"||(s===!0?e.push(t):s!==!1&&s!=null&&e.push(`${t}="${String(s)}"`))}),e.join(" ")}function hN(n){const{nodeName:e,name:t,parseAttributes:s=jp,serializeAttributes:l=Rp,defaultAttributes:o={},requiredAttributes:c=[],allowedAttributes:f}=n,d=t||e,h=m=>{if(!f)return m;const y={};return f.forEach(b=>{b in m&&(y[b]=m[b])}),y};return{parseMarkdown:(m,y)=>{const b={...o,...m.attributes};return y.createNode(e,b,[])},markdownTokenizer:{name:e,level:"block",start(m){var y;const b=new RegExp(`^:::${d}(?:\\s|$)`,"m"),v=(y=m.match(b))==null?void 0:y.index;return v!==void 0?v:-1},tokenize(m,y,b){const v=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),k=m.match(v);if(!k)return;const M=k[1]||"",E=s(M);if(!c.find(z=>!(z in E)))return{type:e,raw:k[0],attributes:E}}},renderMarkdown:m=>{const y=h(m.attrs||{}),b=l(y),v=b?` {${b}}`:"";return`:::${d}${v} :::`}}}function pN(n){const{nodeName:e,name:t,getContent:s,parseAttributes:l=jp,serializeAttributes:o=Rp,defaultAttributes:c={},content:f="block",allowedAttributes:d}=n,h=t||e,m=y=>{if(!d)return y;const b={};return d.forEach(v=>{v in y&&(b[v]=y[v])}),b};return{parseMarkdown:(y,b)=>{let v;if(s){const M=s(y);v=typeof M=="string"?[{type:"text",text:M}]:M}else f==="block"?v=b.parseChildren(y.tokens||[]):v=b.parseInline(y.tokens||[]);const k={...c,...y.attributes};return b.createNode(e,k,v)},markdownTokenizer:{name:e,level:"block",start(y){var b;const v=new RegExp(`^:::${h}`,"m"),k=(b=y.match(v))==null?void 0:b.index;return k!==void 0?k:-1},tokenize(y,b,v){var k;const M=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),E=y.match(M);if(!E)return;const[C,z=""]=E,B=l(z);let ee=1;const G=C.length;let F="";const q=/^:::([\w-]*)(\s.*)?/gm,se=y.slice(G);for(q.lastIndex=0;;){const fe=q.exec(se);if(fe===null)break;const Me=fe.index,Ce=fe[1];if(!((k=fe[2])!=null&&k.endsWith(":::"))){if(Ce)ee+=1;else if(ee-=1,ee===0){const Re=se.slice(0,Me);F=Re.trim();const nt=y.slice(0,G+Me+fe[0].length);let _e=[];if(F)if(f==="block")for(_e=v.blockTokens(Re),_e.forEach(Ie=>{Ie.text&&(!Ie.tokens||Ie.tokens.length===0)&&(Ie.tokens=v.inlineTokens(Ie.text))});_e.length>0;){const Ie=_e[_e.length-1];if(Ie.type==="paragraph"&&(!Ie.text||Ie.text.trim()===""))_e.pop();else break}else _e=v.inlineTokens(F);return{type:e,raw:nt,attributes:B,content:F,tokens:_e}}}}}},renderMarkdown:(y,b)=>{const v=m(y.attrs||{}),k=o(v),M=k?` {${k}}`:"",E=b.renderChildren(y.content||[],`

`);return`:::${h}${M}

${E}

:::`}}}function mN(n){if(!n.trim())return{};const e={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let s=t.exec(n);for(;s!==null;){const[,l,o,c]=s;e[l]=o||c,s=t.exec(n)}return e}function gN(n){return Object.entries(n).filter(([,e])=>e!=null).map(([e,t])=>`${e}="${t}"`).join(" ")}function yN(n){const{nodeName:e,name:t,getContent:s,parseAttributes:l=mN,serializeAttributes:o=gN,defaultAttributes:c={},selfClosing:f=!1,allowedAttributes:d}=n,h=t||e,m=b=>{if(!d)return b;const v={};return d.forEach(k=>{const M=typeof k=="string"?k:k.name,E=typeof k=="string"?void 0:k.skipIfDefault;if(M in b){const C=b[M];if(E!==void 0&&C===E)return;v[M]=C}}),v},y=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(b,v)=>{const k={...c,...b.attributes};if(f)return v.createNode(e,k);const M=s?s(b):b.content||"";return M?v.createNode(e,k,[v.createTextNode(M)]):v.createNode(e,k,[])},markdownTokenizer:{name:e,level:"inline",start(b){const v=f?new RegExp(`\\[${y}\\s*[^\\]]*\\]`):new RegExp(`\\[${y}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${y}\\]`),k=b.match(v),M=k?.index;return M!==void 0?M:-1},tokenize(b,v,k){const M=f?new RegExp(`^\\[${y}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${y}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${y}\\]`),E=b.match(M);if(!E)return;let C="",z="";if(f){const[,ee]=E;z=ee}else{const[,ee,G]=E;z=ee,C=G||""}const B=l(z.trim());return{type:e,raw:E[0],content:C.trim(),attributes:B}}},renderMarkdown:b=>{let v="";s?v=s(b):b.content&&b.content.length>0&&(v=b.content.filter(C=>C.type==="text").map(C=>C.text).join(""));const k=m(b.attrs||{}),M=o(k),E=M?` ${M}`:"";return f?`[${h}${E}]`:`[${h}${E}]${v}[/${h}]`}}}function Kh(n,e,t){var s,l,o,c;const f=n.split(`
`),d=[];let h="",m=0;const y=e.baseIndentSize||2;for(;m<f.length;){const b=f[m],v=b.match(e.itemPattern);if(!v){if(d.length>0)break;if(b.trim()===""){m+=1,h=`${h}${b}
`;continue}else return}const k=e.extractItemData(v),{indentLevel:M,mainContent:E}=k;h=`${h}${b}
`;const C=[E];for(m+=1;m<f.length;){const G=f[m];if(G.trim()===""){const q=f.slice(m+1).findIndex(Me=>Me.trim()!=="");if(q===-1)break;if((((l=(s=f[m+1+q].match(/^(\s*)/))==null?void 0:s[1])==null?void 0:l.length)||0)>M){C.push(G),h=`${h}${G}
`,m+=1;continue}else break}if((((c=(o=G.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:c.length)||0)>M)C.push(G),h=`${h}${G}
`,m+=1;else break}let z;const B=C.slice(1);if(B.length>0){const G=B.map(F=>F.slice(M+y)).join(`
`);G.trim()&&(e.customNestedParser?z=e.customNestedParser(G):z=t.blockTokens(G))}const ee=e.createToken(k,z);d.push(ee)}if(d.length!==0)return{items:d,raw:h}}function zp(n,e,t,s){if(!n||!Array.isArray(n.content))return"";const l=typeof t=="function"?t(s):t,[o,...c]=n.content,f=e.renderChildren([o]),d=[`${l}${f}`];return c&&c.length>0&&c.forEach(h=>{const m=e.renderChildren([h]);if(m){const y=m.split(`
`).map(b=>b?e.indent(b):"").join(`
`);d.push(y)}}),d.join(`
`)}function bN(n,e,t={}){const{state:s}=e,{doc:l,tr:o}=s,c=n;l.descendants((f,d)=>{const h=o.mapping.map(d),m=o.mapping.map(d)+f.nodeSize;let y=null;if(f.marks.forEach(v=>{if(v!==c)return!1;y=v}),!y)return;let b=!1;if(Object.keys(t).forEach(v=>{t[v]!==y.attrs[v]&&(b=!0)}),b){const v=n.type.create({...n.attrs,...t});o.removeMark(h,m,n.type),o.addMark(h,m,v)}}),o.docChanged&&e.view.dispatch(o)}var Sn=class Pv extends Dp{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new Pv(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function ti(n){return new eN({find:n.find,handler:({state:e,range:t,match:s,pasteEvent:l})=>{const o=Je(n.getAttributes,void 0,s,l);if(o===!1||o===null)return null;const{tr:c}=e,f=s[s.length-1],d=s[0];let h=t.to;if(f){const m=d.search(/\S/),y=t.from+d.indexOf(f),b=y+f.length;if(Op(t.from,t.to,e.doc).filter(k=>k.mark.type.excluded.find(E=>E===n.type&&E!==k.mark.type)).filter(k=>k.to>y).length)return null;b<t.to&&c.delete(b,t.to),y>t.from&&c.delete(t.from+m,y),h=t.from+m+f.length,c.addMark(t.from+m,h,n.type.create(o||{})),c.removeStoredMark(n.type)}}})}const{getOwnPropertyNames:xN,getOwnPropertySymbols:vN}=Object,{hasOwnProperty:SN}=Object.prototype;function ph(n,e){return function(s,l,o){return n(s,l,o)&&e(s,l,o)}}function cc(n){return function(t,s,l){if(!t||!s||typeof t!="object"||typeof s!="object")return n(t,s,l);const{cache:o}=l,c=o.get(t),f=o.get(s);if(c&&f)return c===s&&f===t;o.set(t,s),o.set(s,t);const d=n(t,s,l);return o.delete(t),o.delete(s),d}}function kN(n){return n?.[Symbol.toStringTag]}function u1(n){return xN(n).concat(vN(n))}const TN=Object.hasOwn||((n,e)=>SN.call(n,e));function si(n,e){return n===e||!n&&!e&&n!==n&&e!==e}const EN="__v",MN="__o",CN="_owner",{getOwnPropertyDescriptor:f1,keys:d1}=Object;function wN(n,e){return n.byteLength===e.byteLength&&zc(new Uint8Array(n),new Uint8Array(e))}function NN(n,e,t){let s=n.length;if(e.length!==s)return!1;for(;s-- >0;)if(!t.equals(n[s],e[s],s,s,n,e,t))return!1;return!0}function AN(n,e){return n.byteLength===e.byteLength&&zc(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function ON(n,e){return si(n.getTime(),e.getTime())}function DN(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function jN(n,e){return n===e}function h1(n,e,t){const s=n.size;if(s!==e.size)return!1;if(!s)return!0;const l=new Array(s),o=n.entries();let c,f,d=0;for(;(c=o.next())&&!c.done;){const h=e.entries();let m=!1,y=0;for(;(f=h.next())&&!f.done;){if(l[y]){y++;continue}const b=c.value,v=f.value;if(t.equals(b[0],v[0],d,y,n,e,t)&&t.equals(b[1],v[1],b[0],v[0],n,e,t)){m=l[y]=!0;break}y++}if(!m)return!1;d++}return!0}const RN=si;function zN(n,e,t){const s=d1(n);let l=s.length;if(d1(e).length!==l)return!1;for(;l-- >0;)if(!Jv(n,e,t,s[l]))return!1;return!0}function so(n,e,t){const s=u1(n);let l=s.length;if(u1(e).length!==l)return!1;let o,c,f;for(;l-- >0;)if(o=s[l],!Jv(n,e,t,o)||(c=f1(n,o),f=f1(e,o),(c||f)&&(!c||!f||c.configurable!==f.configurable||c.enumerable!==f.enumerable||c.writable!==f.writable)))return!1;return!0}function LN(n,e){return si(n.valueOf(),e.valueOf())}function _N(n,e){return n.source===e.source&&n.flags===e.flags}function p1(n,e,t){const s=n.size;if(s!==e.size)return!1;if(!s)return!0;const l=new Array(s),o=n.values();let c,f;for(;(c=o.next())&&!c.done;){const d=e.values();let h=!1,m=0;for(;(f=d.next())&&!f.done;){if(!l[m]&&t.equals(c.value,f.value,c.value,f.value,n,e,t)){h=l[m]=!0;break}m++}if(!h)return!1}return!0}function zc(n,e){let t=n.byteLength;if(e.byteLength!==t||n.byteOffset!==e.byteOffset)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function BN(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function Jv(n,e,t,s){return(s===CN||s===MN||s===EN)&&(n.$$typeof||e.$$typeof)?!0:TN(e,s)&&t.equals(n[s],e[s],s,s,n,e,t)}const HN="[object ArrayBuffer]",UN="[object Arguments]",IN="[object Boolean]",VN="[object DataView]",qN="[object Date]",$N="[object Error]",GN="[object Map]",YN="[object Number]",KN="[object Object]",PN="[object RegExp]",JN="[object Set]",FN="[object String]",XN={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},QN="[object URL]",ZN=Object.prototype.toString;function WN({areArrayBuffersEqual:n,areArraysEqual:e,areDataViewsEqual:t,areDatesEqual:s,areErrorsEqual:l,areFunctionsEqual:o,areMapsEqual:c,areNumbersEqual:f,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:m,areSetsEqual:y,areTypedArraysEqual:b,areUrlsEqual:v,unknownTagComparators:k}){return function(E,C,z){if(E===C)return!0;if(E==null||C==null)return!1;const B=typeof E;if(B!==typeof C)return!1;if(B!=="object")return B==="number"?f(E,C,z):B==="function"?o(E,C,z):!1;const ee=E.constructor;if(ee!==C.constructor)return!1;if(ee===Object)return d(E,C,z);if(Array.isArray(E))return e(E,C,z);if(ee===Date)return s(E,C,z);if(ee===RegExp)return m(E,C,z);if(ee===Map)return c(E,C,z);if(ee===Set)return y(E,C,z);const G=ZN.call(E);if(G===qN)return s(E,C,z);if(G===PN)return m(E,C,z);if(G===GN)return c(E,C,z);if(G===JN)return y(E,C,z);if(G===KN)return typeof E.then!="function"&&typeof C.then!="function"&&d(E,C,z);if(G===QN)return v(E,C,z);if(G===$N)return l(E,C,z);if(G===UN)return d(E,C,z);if(XN[G])return b(E,C,z);if(G===HN)return n(E,C,z);if(G===VN)return t(E,C,z);if(G===IN||G===YN||G===FN)return h(E,C,z);if(k){let F=k[G];if(!F){const q=kN(E);q&&(F=k[q])}if(F)return F(E,C,z)}return!1}}function eA({circular:n,createCustomConfig:e,strict:t}){let s={areArrayBuffersEqual:wN,areArraysEqual:t?so:NN,areDataViewsEqual:AN,areDatesEqual:ON,areErrorsEqual:DN,areFunctionsEqual:jN,areMapsEqual:t?ph(h1,so):h1,areNumbersEqual:RN,areObjectsEqual:t?so:zN,arePrimitiveWrappersEqual:LN,areRegExpsEqual:_N,areSetsEqual:t?ph(p1,so):p1,areTypedArraysEqual:t?ph(zc,so):zc,areUrlsEqual:BN,unknownTagComparators:void 0};if(e&&(s=Object.assign({},s,e(s))),n){const l=cc(s.areArraysEqual),o=cc(s.areMapsEqual),c=cc(s.areObjectsEqual),f=cc(s.areSetsEqual);s=Object.assign({},s,{areArraysEqual:l,areMapsEqual:o,areObjectsEqual:c,areSetsEqual:f})}return s}function tA(n){return function(e,t,s,l,o,c,f){return n(e,t,f)}}function nA({circular:n,comparator:e,createState:t,equals:s,strict:l}){if(t)return function(f,d){const{cache:h=n?new WeakMap:void 0,meta:m}=t();return e(f,d,{cache:h,equals:s,meta:m,strict:l})};if(n)return function(f,d){return e(f,d,{cache:new WeakMap,equals:s,meta:void 0,strict:l})};const o={cache:void 0,equals:s,meta:void 0,strict:l};return function(f,d){return e(f,d,o)}}const rA=vs();vs({strict:!0});vs({circular:!0});vs({circular:!0,strict:!0});vs({createInternalComparator:()=>si});vs({strict:!0,createInternalComparator:()=>si});vs({circular:!0,createInternalComparator:()=>si});vs({circular:!0,createInternalComparator:()=>si,strict:!0});function vs(n={}){const{circular:e=!1,createInternalComparator:t,createState:s,strict:l=!1}=n,o=eA(n),c=WN(o),f=t?t(c):tA(c);return nA({circular:e,comparator:c,createState:s,equals:f,strict:l})}var mh={exports:{}},gh={};var m1;function sA(){if(m1)return gh;m1=1;var n=Ro(),e=U1();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var s=typeof Object.is=="function"?Object.is:t,l=e.useSyncExternalStore,o=n.useRef,c=n.useEffect,f=n.useMemo,d=n.useDebugValue;return gh.useSyncExternalStoreWithSelector=function(h,m,y,b,v){var k=o(null);if(k.current===null){var M={hasValue:!1,value:null};k.current=M}else M=k.current;k=f(function(){function C(F){if(!z){if(z=!0,B=F,F=b(F),v!==void 0&&M.hasValue){var q=M.value;if(v(q,F))return ee=q}return ee=F}if(q=ee,s(B,F))return q;var se=b(F);return v!==void 0&&v(q,se)?(B=F,q):(B=F,ee=se)}var z=!1,B,ee,G=y===void 0?null:y;return[function(){return C(m())},G===null?void 0:function(){return C(G())}]},[m,y,b,v]);var E=l(h,k[0],k[1]);return c(function(){M.hasValue=!0,M.value=E},[E]),d(E),E},gh}var g1;function iA(){return g1||(g1=1,mh.exports=sA()),mh.exports}var lA=iA(),oA=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},aA=({contentComponent:n})=>{const e=I1.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return x.jsx(x.Fragment,{children:Object.values(e)})};function cA(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,s){e={...e,[t]:dE.createPortal(s.reactElement,s.element,t)},n.forEach(l=>l())},removeRenderer(t){const s={...e};delete s[t],e=s,n.forEach(l=>l())}}}var uA=class extends Mr.Component{constructor(n){var e;super(n),this.editorContentRef=Mr.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=n.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var n;const e=this.props.editor;if(e&&!e.isDestroyed&&((n=e.view.dom)!=null&&n.parentNode)){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t}),e.contentComponent=cA(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(s=>s.hasContentComponentInitialized?s:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((n=e.view.dom)!=null&&n.parentNode))return;const t=document.createElement("div");t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t})}catch{}}}render(){const{editor:n,innerRef:e,...t}=this.props;return x.jsxs(x.Fragment,{children:[x.jsx("div",{ref:oA(e,this.editorContentRef),...t}),n?.contentComponent&&x.jsx(aA,{contentComponent:n.contentComponent})]})}},fA=Q.forwardRef((n,e)=>{const t=Mr.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Mr.createElement(uA,{key:t,innerRef:e,...n})}),Fv=Mr.memo(fA),dA=typeof window<"u"?Q.useLayoutEffect:Q.useEffect,hA=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function pA(n){var e;const[t]=Q.useState(()=>new hA(n.editor)),s=lA.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!=null?e:rA);return dA(()=>t.watch(n.editor),[n.editor,t]),Q.useDebugValue(s),s}var mA=!1,Ph=typeof window>"u",gA=Ph||!!(typeof window<"u"&&window.next),yA=class Xv{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Ph||gA?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...s)=>{var l,o;return(o=(l=this.options.current).onBeforeCreate)==null?void 0:o.call(l,...s)},onBlur:(...s)=>{var l,o;return(o=(l=this.options.current).onBlur)==null?void 0:o.call(l,...s)},onCreate:(...s)=>{var l,o;return(o=(l=this.options.current).onCreate)==null?void 0:o.call(l,...s)},onDestroy:(...s)=>{var l,o;return(o=(l=this.options.current).onDestroy)==null?void 0:o.call(l,...s)},onFocus:(...s)=>{var l,o;return(o=(l=this.options.current).onFocus)==null?void 0:o.call(l,...s)},onSelectionUpdate:(...s)=>{var l,o;return(o=(l=this.options.current).onSelectionUpdate)==null?void 0:o.call(l,...s)},onTransaction:(...s)=>{var l,o;return(o=(l=this.options.current).onTransaction)==null?void 0:o.call(l,...s)},onUpdate:(...s)=>{var l,o;return(o=(l=this.options.current).onUpdate)==null?void 0:o.call(l,...s)},onContentError:(...s)=>{var l,o;return(o=(l=this.options.current).onContentError)==null?void 0:o.call(l,...s)},onDrop:(...s)=>{var l,o;return(o=(l=this.options.current).onDrop)==null?void 0:o.call(l,...s)},onPaste:(...s)=>{var l,o;return(o=(l=this.options.current).onPaste)==null?void 0:o.call(l,...s)},onDelete:(...s)=>{var l,o;return(o=(l=this.options.current).onDelete)==null?void 0:o.call(l,...s)}};return new cN(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(s=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(s)?!0:s==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((l,o)=>{var c;return l===((c=t.extensions)==null?void 0:c[o])}):e[s]===t[s])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Xv.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((s,l)=>s===e[l]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function bA(n={},e=[]){const t=Q.useRef(n);t.current=n;const[s]=Q.useState(()=>new yA(t)),l=I1.useSyncExternalStore(s.subscribe,s.getEditor,s.getServerSnapshot);return Q.useDebugValue(l),Q.useEffect(s.onRender(e)),pA({editor:l,selector:({transactionNumber:o})=>n.shouldRerenderOnTransaction===!1||n.shouldRerenderOnTransaction===void 0?null:n.immediatelyRender&&o===0?0:o+1}),l}var Qv=Q.createContext({editor:null});Qv.Consumer;var xA=Q.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),vA=()=>Q.useContext(xA);Mr.forwardRef((n,e)=>{const{onDragStart:t}=vA(),s=n.as||"div";return x.jsx(s,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});Mr.createContext({markViewContentRef:()=>{}});var Lp=Q.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});Lp.displayName="TiptapContext";var SA=()=>Q.useContext(Lp);function Zv({editor:n,instance:e,children:t}){const s=n??e;if(!s)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const l=Q.useMemo(()=>({editor:s}),[s]),o=Q.useMemo(()=>({editor:s}),[s]);return x.jsx(Qv.Provider,{value:o,children:x.jsx(Lp.Provider,{value:l,children:t})})}Zv.displayName="Tiptap";function Wv({...n}){const{editor:e}=SA();return x.jsx(Fv,{editor:e,...n})}Wv.displayName="Tiptap.Content";Object.assign(Zv,{Content:Wv});var Lc=(n,e)=>{if(n==="slot")return 0;if(n instanceof Function)return n(e);const{children:t,...s}=e??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,s,t]},kA=/^\s*>\s$/,TA=Sn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return Lc("blockquote",{...Mt(this.options.HTMLAttributes,n),children:Lc("slot",{})})},parseMarkdown:(n,e)=>e.createNode("blockquote",void 0,e.parseChildren(n.tokens||[])),renderMarkdown:(n,e)=>{if(!n.content)return"";const t=">",s=[];return n.content.forEach(l=>{const f=e.renderChildren([l]).split(`
`).map(d=>d.trim()===""?t:`${t} ${d}`);s.push(f.join(`
`))}),s.join(`
${t}
`)},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ol({find:kA,type:this.type})]}}),EA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,MA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,CA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,wA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,NA=ri.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return Lc("strong",{...Mt(this.options.HTMLAttributes,n),children:Lc("slot",{})})},markdownTokenName:"strong",parseMarkdown:(n,e)=>e.applyMark("bold",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`**${e.renderChildren(n)}**`,addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ll({find:EA,type:this.type}),ll({find:CA,type:this.type})]},addPasteRules(){return[ti({find:MA,type:this.type}),ti({find:wA,type:this.type})]}}),AA=/(^|[^`])`([^`]+)`(?!`)$/,OA=/(^|[^`])`([^`]+)`(?!`)/g,DA=ri.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Mt(this.options.HTMLAttributes,n),0]},markdownTokenName:"codespan",parseMarkdown:(n,e)=>e.applyMark("code",[{type:"text",text:n.text||""}]),renderMarkdown:(n,e)=>n.content?`\`${e.renderChildren(n.content)}\``:"",addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ll({find:AA,type:this.type})]},addPasteRules(){return[ti({find:OA,type:this.type})]}}),yh=4,jA=/^```([a-z]+)?[\s\n]$/,RA=/^~~~([a-z]+)?[\s\n]$/,zA=Sn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:yh,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options;if(!t)return null;const o=[...((e=n.firstElementChild)==null?void 0:e.classList)||[]].filter(c=>c.startsWith(t)).map(c=>c.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Mt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(n,e)=>{var t;return((t=n.raw)==null?void 0:t.startsWith("```"))===!1&&n.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:n.lang||null},n.text?[e.createTextNode(n.text)]:[])},renderMarkdown:(n,e)=>{var t;let s="";const l=((t=n.attrs)==null?void 0:t.language)||"";return n.content?s=[`\`\`\`${l}`,e.renderChildren(n.content),"```"].join(`
`):s=`\`\`\`${l}

\`\`\``,s},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:yh,{state:s}=n,{selection:l}=s,{$from:o,empty:c}=l;if(o.parent.type!==this.type)return!1;const f=" ".repeat(t);return c?n.commands.insertContent(f):n.commands.command(({tr:d})=>{const{from:h,to:m}=l,v=s.doc.textBetween(h,m,`
`,`
`).split(`
`).map(k=>f+k).join(`
`);return d.replaceWith(h,m,s.schema.text(v)),!0})},"Shift-Tab":({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:yh,{state:s}=n,{selection:l}=s,{$from:o,empty:c}=l;return o.parent.type!==this.type?!1:c?n.commands.command(({tr:f})=>{var d;const{pos:h}=o,m=o.start(),y=o.end(),v=s.doc.textBetween(m,y,`
`,`
`).split(`
`);let k=0,M=0;const E=h-m;for(let F=0;F<v.length;F+=1){if(M+v[F].length>=E){k=F;break}M+=v[F].length+1}const z=((d=v[k].match(/^ */))==null?void 0:d[0])||"",B=Math.min(z.length,t);if(B===0)return!0;let ee=m;for(let F=0;F<k;F+=1)ee+=v[F].length+1;return f.delete(ee,ee+B),h-ee<=B&&f.setSelection(Se.create(f.doc,ee)),!0}):n.commands.command(({tr:f})=>{const{from:d,to:h}=l,b=s.doc.textBetween(d,h,`
`,`
`).split(`
`).map(v=>{var k;const M=((k=v.match(/^ */))==null?void 0:k[0])||"",E=Math.min(M.length,t);return v.slice(E)}).join(`
`);return f.replaceWith(d,h,s.schema.text(b)),!0})},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:s,empty:l}=t;if(!l||s.parent.type!==this.type)return!1;const o=s.parentOffset===s.parent.nodeSize-2,c=s.parent.textContent.endsWith(`

`);return!o||!c?!1:n.chain().command(({tr:f})=>(f.delete(s.pos-2,s.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:s}=e,{$from:l,empty:o}=t;if(!o||l.parent.type!==this.type||!(l.parentOffset===l.parent.nodeSize-2))return!1;const f=l.after();return f===void 0?!1:s.nodeAt(f)?n.commands.command(({tr:h})=>(h.setSelection(Oe.near(s.resolve(f))),!0)):n.commands.exitCode()}}},addInputRules(){return[Yh({find:jA,type:this.type,getAttributes:n=>({language:n[1]})}),Yh({find:RA,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new ft({key:new wt("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),s=e.clipboardData.getData("vscode-editor-data"),l=s?JSON.parse(s):void 0,o=l?.mode;if(!t||!o)return!1;const{tr:c,schema:f}=n.state,d=f.text(t.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:o},d)),c.selection.$from.parent.type!==this.type&&c.setSelection(Se.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),n.dispatch(c),!0}}})]}}),LA=Sn.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`

`):""}),_A=Sn.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Mt(this.options.HTMLAttributes,n)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:s})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:l,storedMarks:o}=t;if(l.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:f}=s.extensionManager,d=o||l.$to.parentOffset&&l.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:m})=>{if(m&&d&&c){const y=d.filter(b=>f.includes(b.type.name));h.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),BA=Sn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Mt(this.options.HTMLAttributes,e),0]},parseMarkdown:(n,e)=>e.createNode("heading",{level:n.depth||1},e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>{var t;const s=(t=n.attrs)!=null&&t.level?parseInt(n.attrs.level,10):1,l="#".repeat(s);return n.content?`${l} ${e.renderChildren(n.content)}`:""},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Yh({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),HA=Sn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Mt(this.options.HTMLAttributes,n)]},markdownTokenName:"hr",parseMarkdown:(n,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!fN(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:s}=t,l=n();return Ov(t)?l.insertContentAt(s.pos,{type:this.name}):l.insertContent({type:this.name}),l.command(({state:o,tr:c,dispatch:f})=>{if(f){const{$to:d}=c.selection,h=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?c.setSelection(Se.create(c.doc,d.pos+1)):d.nodeAfter.isBlock?c.setSelection(ge.create(c.doc,d.pos)):c.setSelection(Se.create(c.doc,d.pos));else{const m=o.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,y=m?.create();y&&(c.insert(h,y),c.setSelection(Se.create(c.doc,h+1)))}c.scrollIntoView()}return!0}).run()}}},addInputRules(){return[uN({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),UA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,IA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,VA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,qA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,$A=ri.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Mt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(n,e)=>e.applyMark("italic",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`*${e.renderChildren(n)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ll({find:UA,type:this.type}),ll({find:VA,type:this.type})]},addPasteRules(){return[ti({find:IA,type:this.type}),ti({find:qA,type:this.type})]}});const GA="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",YA="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Jh="numeric",Fh="ascii",Xh="alpha",go="asciinumeric",uo="alphanumeric",Qh="domain",eS="emoji",KA="scheme",PA="slashscheme",bh="whitespace";function JA(n,e){return n in e||(e[n]=[]),e[n]}function Ys(n,e,t){e[Jh]&&(e[go]=!0,e[uo]=!0),e[Fh]&&(e[go]=!0,e[Xh]=!0),e[go]&&(e[uo]=!0),e[Xh]&&(e[uo]=!0),e[uo]&&(e[Qh]=!0),e[eS]&&(e[Qh]=!0);for(const s in e){const l=JA(s,t);l.indexOf(n)<0&&l.push(n)}}function FA(n,e){const t={};for(const s in e)e[s].indexOf(n)>=0&&(t[s]=!0);return t}function on(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}on.groups={};on.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let s=0;s<e.jr.length;s++){const l=e.jr[s][0],o=e.jr[s][1];if(o&&l.test(n))return o}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,s){for(let l=0;l<n.length;l++)this.tt(n[l],e,t,s)},tr(n,e,t,s){s=s||on.groups;let l;return e&&e.j?l=e:(l=new on(e),t&&s&&Ys(e,t,s)),this.jr.push([n,l]),l},ts(n,e,t,s){let l=this;const o=n.length;if(!o)return l;for(let c=0;c<o-1;c++)l=l.tt(n[c]);return l.tt(n[o-1],e,t,s)},tt(n,e,t,s){s=s||on.groups;const l=this;if(e&&e.j)return l.j[n]=e,e;const o=e;let c,f=l.go(n);if(f?(c=new on,Object.assign(c.j,f.j),c.jr.push.apply(c.jr,f.jr),c.jd=f.jd,c.t=f.t):c=new on,o){if(s)if(c.t&&typeof c.t=="string"){const d=Object.assign(FA(c.t,s),t);Ys(o,d,s)}else t&&Ys(o,t,s);c.t=o}return l.j[n]=c,c}};const Ae=(n,e,t,s,l)=>n.ta(e,t,s,l),pt=(n,e,t,s,l)=>n.tr(e,t,s,l),y1=(n,e,t,s,l)=>n.ts(e,t,s,l),ne=(n,e,t,s,l)=>n.tt(e,t,s,l),vr="WORD",Zh="UWORD",tS="ASCIINUMERICAL",nS="ALPHANUMERICAL",Do="LOCALHOST",Wh="TLD",ep="UTLD",yc="SCHEME",Fi="SLASH_SCHEME",_p="NUM",tp="WS",Bp="NL",yo="OPENBRACE",bo="CLOSEBRACE",_c="OPENBRACKET",Bc="CLOSEBRACKET",Hc="OPENPAREN",Uc="CLOSEPAREN",Ic="OPENANGLEBRACKET",Vc="CLOSEANGLEBRACKET",qc="FULLWIDTHLEFTPAREN",$c="FULLWIDTHRIGHTPAREN",Gc="LEFTCORNERBRACKET",Yc="RIGHTCORNERBRACKET",Kc="LEFTWHITECORNERBRACKET",Pc="RIGHTWHITECORNERBRACKET",Jc="FULLWIDTHLESSTHAN",Fc="FULLWIDTHGREATERTHAN",Xc="AMPERSAND",Qc="APOSTROPHE",Zc="ASTERISK",rs="AT",Wc="BACKSLASH",eu="BACKTICK",tu="CARET",ls="COLON",Hp="COMMA",nu="DOLLAR",Jn="DOT",ru="EQUALS",Up="EXCLAMATION",Rn="HYPHEN",xo="PERCENT",su="PIPE",iu="PLUS",lu="POUND",vo="QUERY",Ip="QUOTE",rS="FULLWIDTHMIDDLEDOT",Vp="SEMI",Fn="SLASH",So="TILDE",ou="UNDERSCORE",sS="EMOJI",au="SYM";var iS=Object.freeze({__proto__:null,ALPHANUMERICAL:nS,AMPERSAND:Xc,APOSTROPHE:Qc,ASCIINUMERICAL:tS,ASTERISK:Zc,AT:rs,BACKSLASH:Wc,BACKTICK:eu,CARET:tu,CLOSEANGLEBRACKET:Vc,CLOSEBRACE:bo,CLOSEBRACKET:Bc,CLOSEPAREN:Uc,COLON:ls,COMMA:Hp,DOLLAR:nu,DOT:Jn,EMOJI:sS,EQUALS:ru,EXCLAMATION:Up,FULLWIDTHGREATERTHAN:Fc,FULLWIDTHLEFTPAREN:qc,FULLWIDTHLESSTHAN:Jc,FULLWIDTHMIDDLEDOT:rS,FULLWIDTHRIGHTPAREN:$c,HYPHEN:Rn,LEFTCORNERBRACKET:Gc,LEFTWHITECORNERBRACKET:Kc,LOCALHOST:Do,NL:Bp,NUM:_p,OPENANGLEBRACKET:Ic,OPENBRACE:yo,OPENBRACKET:_c,OPENPAREN:Hc,PERCENT:xo,PIPE:su,PLUS:iu,POUND:lu,QUERY:vo,QUOTE:Ip,RIGHTCORNERBRACKET:Yc,RIGHTWHITECORNERBRACKET:Pc,SCHEME:yc,SEMI:Vp,SLASH:Fn,SLASH_SCHEME:Fi,SYM:au,TILDE:So,TLD:Wh,UNDERSCORE:ou,UTLD:ep,UWORD:Zh,WORD:vr,WS:tp});const br=/[a-z]/,io=new RegExp("\\p{L}","u"),xh=new RegExp("\\p{Emoji}","u"),xr=/\d/,vh=/\s/,b1="\r",Sh=`
`,XA="",QA="",kh="";let uc=null,fc=null;function ZA(n=[]){const e={};on.groups=e;const t=new on;uc==null&&(uc=x1(GA)),fc==null&&(fc=x1(YA)),ne(t,"'",Qc),ne(t,"{",yo),ne(t,"}",bo),ne(t,"[",_c),ne(t,"]",Bc),ne(t,"(",Hc),ne(t,")",Uc),ne(t,"<",Ic),ne(t,">",Vc),ne(t,"",qc),ne(t,"",$c),ne(t,"",Gc),ne(t,"",Yc),ne(t,"",Kc),ne(t,"",Pc),ne(t,"",Jc),ne(t,"",Fc),ne(t,"&",Xc),ne(t,"*",Zc),ne(t,"@",rs),ne(t,"`",eu),ne(t,"^",tu),ne(t,":",ls),ne(t,",",Hp),ne(t,"$",nu),ne(t,".",Jn),ne(t,"=",ru),ne(t,"!",Up),ne(t,"-",Rn),ne(t,"%",xo),ne(t,"|",su),ne(t,"+",iu),ne(t,"#",lu),ne(t,"?",vo),ne(t,'"',Ip),ne(t,"/",Fn),ne(t,";",Vp),ne(t,"~",So),ne(t,"_",ou),ne(t,"\\",Wc),ne(t,"",rS);const s=pt(t,xr,_p,{[Jh]:!0});pt(s,xr,s);const l=pt(s,br,tS,{[go]:!0}),o=pt(s,io,nS,{[uo]:!0}),c=pt(t,br,vr,{[Fh]:!0});pt(c,xr,l),pt(c,br,c),pt(l,xr,l),pt(l,br,l);const f=pt(t,io,Zh,{[Xh]:!0});pt(f,br),pt(f,xr,o),pt(f,io,f),pt(o,xr,o),pt(o,br),pt(o,io,o);const d=ne(t,Sh,Bp,{[bh]:!0}),h=ne(t,b1,tp,{[bh]:!0}),m=pt(t,vh,tp,{[bh]:!0});ne(t,kh,m),ne(h,Sh,d),ne(h,kh,m),pt(h,vh,m),ne(m,b1),ne(m,Sh),pt(m,vh,m),ne(m,kh,m);const y=pt(t,xh,sS,{[eS]:!0});ne(y,"#"),pt(y,xh,y),ne(y,XA,y);const b=ne(y,QA);ne(b,"#"),pt(b,xh,y);const v=[[br,c],[xr,l]],k=[[br,null],[io,f],[xr,o]];for(let M=0;M<uc.length;M++)es(t,uc[M],Wh,vr,v);for(let M=0;M<fc.length;M++)es(t,fc[M],ep,Zh,k);Ys(Wh,{tld:!0,ascii:!0},e),Ys(ep,{utld:!0,alpha:!0},e),es(t,"file",yc,vr,v),es(t,"mailto",yc,vr,v),es(t,"http",Fi,vr,v),es(t,"https",Fi,vr,v),es(t,"ftp",Fi,vr,v),es(t,"ftps",Fi,vr,v),Ys(yc,{scheme:!0,ascii:!0},e),Ys(Fi,{slashscheme:!0,ascii:!0},e),n=n.sort((M,E)=>M[0]>E[0]?1:-1);for(let M=0;M<n.length;M++){const E=n[M][0],z=n[M][1]?{[KA]:!0}:{[PA]:!0};E.indexOf("-")>=0?z[Qh]=!0:br.test(E)?xr.test(E)?z[go]=!0:z[Fh]=!0:z[Jh]=!0,y1(t,E,E,z)}return y1(t,"localhost",Do,{ascii:!0}),t.jd=new on(au),{start:t,tokens:Object.assign({groups:e},iS)}}function lS(n,e){const t=WA(e.replace(/[A-Z]/g,f=>f.toLowerCase())),s=t.length,l=[];let o=0,c=0;for(;c<s;){let f=n,d=null,h=0,m=null,y=-1,b=-1;for(;c<s&&(d=f.go(t[c]));)f=d,f.accepts()?(y=0,b=0,m=f):y>=0&&(y+=t[c].length,b++),h+=t[c].length,o+=t[c].length,c++;o-=y,c-=b,h-=y,l.push({t:m.t,v:e.slice(o-h,o),s:o-h,e:o})}return l}function WA(n){const e=[],t=n.length;let s=0;for(;s<t;){let l=n.charCodeAt(s),o,c=l<55296||l>56319||s+1===t||(o=n.charCodeAt(s+1))<56320||o>57343?n[s]:n.slice(s,s+2);e.push(c),s+=c.length}return e}function es(n,e,t,s,l){let o;const c=e.length;for(let f=0;f<c-1;f++){const d=e[f];n.j[d]?o=n.j[d]:(o=new on(s),o.jr=l.slice(),n.j[d]=o),n=o}return o=new on(t),o.jr=l.slice(),n.j[e[c-1]]=o,o}function x1(n){const e=[],t=[];let s=0,l="0123456789";for(;s<n.length;){let o=0;for(;l.indexOf(n[s+o])>=0;)o++;if(o>0){e.push(t.join(""));for(let c=parseInt(n.substring(s,s+o),10);c>0;c--)t.pop();s+=o}else t.push(n[s]),s++}return e}const jo={defaultProtocol:"http",events:null,format:v1,formatHref:v1,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function qp(n,e=null){let t=Object.assign({},jo);n&&(t=Object.assign(t,n instanceof qp?n.o:n));const s=t.ignoreTags,l=[];for(let o=0;o<s.length;o++)l.push(s[o].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=l}qp.prototype={o:jo,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const s=e!=null;let l=this.o[n];return l&&(typeof l=="object"?(l=t.t in l?l[t.t]:jo[n],typeof l=="function"&&s&&(l=l(e,t))):typeof l=="function"&&s&&(l=l(e,t.t,t)),l)},getObj(n,e,t){let s=this.o[n];return typeof s=="function"&&e!=null&&(s=s(e,t.t,t)),s},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function v1(n){return n}function oS(n,e){this.t="token",this.v=n,this.tk=e}oS.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),s=n.get("format",e,this);return t&&s.length>t?s.substring(0,t)+"":s},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=jo.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),s=n.get("formatHref",t,this),l=n.get("tagName",t,e),o=this.toFormattedString(n),c={},f=n.get("className",t,e),d=n.get("target",t,e),h=n.get("rel",t,e),m=n.getObj("attributes",t,e),y=n.getObj("events",t,e);return c.href=s,f&&(c.class=f),d&&(c.target=d),h&&(c.rel=h),m&&Object.assign(c,m),{tagName:l,attributes:c,content:o,eventListeners:y}}};function Eu(n,e){class t extends oS{constructor(l,o){super(l,o),this.t=n}}for(const s in e)t.prototype[s]=e[s];return t.t=n,t}const S1=Eu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),k1=Eu("text"),eO=Eu("nl"),dc=Eu("url",{isLink:!0,toHref(n=jo.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Do&&n[1].t===ls}}),jn=n=>new on(n);function tO({groups:n}){const e=n.domain.concat([Xc,Zc,rs,Wc,eu,tu,nu,ru,Rn,_p,xo,su,iu,lu,Fn,au,So,ou]),t=[Qc,ls,Hp,Jn,Up,xo,vo,Ip,Vp,Ic,Vc,yo,bo,Bc,_c,Hc,Uc,qc,$c,Gc,Yc,Kc,Pc,Jc,Fc],s=[Xc,Qc,Zc,Wc,eu,tu,nu,ru,Rn,yo,bo,xo,su,iu,lu,vo,Fn,au,So,ou],l=jn(),o=ne(l,So);Ae(o,s,o),Ae(o,n.domain,o);const c=jn(),f=jn(),d=jn();Ae(l,n.domain,c),Ae(l,n.scheme,f),Ae(l,n.slashscheme,d),Ae(c,s,o),Ae(c,n.domain,c);const h=ne(c,rs);ne(o,rs,h),ne(f,rs,h),ne(d,rs,h);const m=ne(o,Jn);Ae(m,s,o),Ae(m,n.domain,o);const y=jn();Ae(h,n.domain,y),Ae(y,n.domain,y);const b=ne(y,Jn);Ae(b,n.domain,y);const v=jn(S1);Ae(b,n.tld,v),Ae(b,n.utld,v),ne(h,Do,v);const k=ne(y,Rn);ne(k,Rn,k),Ae(k,n.domain,y),Ae(v,n.domain,y),ne(v,Jn,b),ne(v,Rn,k);const M=ne(v,ls);Ae(M,n.numeric,S1);const E=ne(c,Rn),C=ne(c,Jn);ne(E,Rn,E),Ae(E,n.domain,c),Ae(C,s,o),Ae(C,n.domain,c);const z=jn(dc);Ae(C,n.tld,z),Ae(C,n.utld,z),Ae(z,n.domain,c),Ae(z,s,o),ne(z,Jn,C),ne(z,Rn,E),ne(z,rs,h);const B=ne(z,ls),ee=jn(dc);Ae(B,n.numeric,ee);const G=jn(dc),F=jn();Ae(G,e,G),Ae(G,t,F),Ae(F,e,G),Ae(F,t,F),ne(z,Fn,G),ne(ee,Fn,G);const q=ne(f,ls),se=ne(d,ls),fe=ne(se,Fn),Me=ne(fe,Fn);Ae(f,n.domain,c),ne(f,Jn,C),ne(f,Rn,E),Ae(d,n.domain,c),ne(d,Jn,C),ne(d,Rn,E),Ae(q,n.domain,G),ne(q,Fn,G),ne(q,vo,G),Ae(Me,n.domain,G),Ae(Me,e,G),ne(Me,Fn,G);const Ce=[[yo,bo],[_c,Bc],[Hc,Uc],[Ic,Vc],[qc,$c],[Gc,Yc],[Kc,Pc],[Jc,Fc]];for(let Re=0;Re<Ce.length;Re++){const[nt,_e]=Ce[Re],Ie=ne(G,nt);ne(F,nt,Ie),ne(Ie,_e,G);const I=jn(dc);Ae(Ie,e,I);const te=jn();Ae(Ie,t),Ae(I,e,I),Ae(I,t,te),Ae(te,e,I),Ae(te,t,te),ne(I,_e,G),ne(te,_e,G)}return ne(l,Do,z),ne(l,Bp,eO),{start:l,tokens:iS}}function nO(n,e,t){let s=t.length,l=0,o=[],c=[];for(;l<s;){let f=n,d=null,h=null,m=0,y=null,b=-1;for(;l<s&&!(d=f.go(t[l].t));)c.push(t[l++]);for(;l<s&&(h=d||f.go(t[l].t));)d=null,f=h,f.accepts()?(b=0,y=f):b>=0&&b++,l++,m++;if(b<0)l-=m,l<s&&(c.push(t[l]),l++);else{c.length>0&&(o.push(Th(k1,e,c)),c=[]),l-=b,m-=b;const v=y.t,k=t.slice(l-m,l);o.push(Th(v,e,k))}}return c.length>0&&o.push(Th(k1,e,c)),o}function Th(n,e,t){const s=t[0].s,l=t[t.length-1].e,o=e.slice(s,l);return new n(o,t)}const rO=typeof console<"u"&&console&&console.warn||(()=>{}),sO="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",it={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function iO(){return on.groups={},it.scanner=null,it.parser=null,it.tokenQueue=[],it.pluginQueue=[],it.customSchemes=[],it.initialized=!1,it}function T1(n,e=!1){if(it.initialized&&rO(`linkifyjs: already initialized - will not register custom scheme "${n}" ${sO}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);it.customSchemes.push([n,e])}function lO(){it.scanner=ZA(it.customSchemes);for(let n=0;n<it.tokenQueue.length;n++)it.tokenQueue[n][1]({scanner:it.scanner});it.parser=tO(it.scanner.tokens);for(let n=0;n<it.pluginQueue.length;n++)it.pluginQueue[n][1]({scanner:it.scanner,parser:it.parser});return it.initialized=!0,it}function $p(n){return it.initialized||lO(),nO(it.parser.start,n,lS(it.scanner.start,n))}$p.scan=lS;function aS(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const s=new qp(t),l=$p(n),o=[];for(let c=0;c<l.length;c++){const f=l[c];f.isLink&&(!e||f.t===e)&&s.check(f)&&o.push(f.toFormattedObject(s))}return o}var Gp="[\0- -\u2029]",oO=new RegExp(Gp),aO=new RegExp(`${Gp}$`),cO=new RegExp(Gp,"g");function uO(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function fO(n){return new ft({key:new wt("autolink"),appendTransaction:(e,t,s)=>{const l=e.some(h=>h.docChanged)&&!t.doc.eq(s.doc),o=e.some(h=>h.getMeta("preventAutolink"));if(!l||o)return;const{tr:c}=s,f=kv(t.doc,[...e]);if(Av(f).forEach(({newRange:h})=>{const m=fw(s.doc,h,v=>v.isTextblock);let y,b;if(m.length>1)y=m[0],b=s.doc.textBetween(y.pos,y.pos+y.node.nodeSize,void 0," ");else if(m.length){const v=s.doc.textBetween(h.from,h.to," "," ");if(!aO.test(v))return;y=m[0],b=s.doc.textBetween(y.pos,h.to,void 0," ")}if(y&&b){const v=b.split(oO).filter(Boolean);if(v.length<=0)return!1;const k=v[v.length-1],M=y.pos+b.lastIndexOf(k);if(!k)return!1;const E=$p(k).map(C=>C.toObject(n.defaultProtocol));if(!uO(E))return!1;E.filter(C=>C.isLink).map(C=>({...C,from:M+C.start+1,to:M+C.end+1})).filter(C=>s.schema.marks.code?!s.doc.rangeHasMark(C.from,C.to,s.schema.marks.code):!0).filter(C=>n.validate(C.value)).filter(C=>n.shouldAutoLink(C.value)).forEach(C=>{Op(C.from,C.to,s.doc).some(z=>z.mark.type===n.type)||c.addMark(C.from,C.to,n.type.create({href:C.href}))})}}),!!c.steps.length)return c}})}function dO(n){return new ft({key:new wt("handleClickLink"),props:{handleClick:(e,t,s)=>{var l,o;if(s.button!==0||!e.editable)return!1;let c=null;if(s.target instanceof HTMLAnchorElement)c=s.target;else{const d=s.target;if(!d)return!1;const h=n.editor.view.dom;c=d.closest("a"),c&&!h.contains(c)&&(c=null)}if(!c)return!1;let f=!1;if(n.enableClickSelection&&(f=n.editor.commands.extendMarkRange(n.type.name)),n.openOnClick){const d=Nv(e.state,n.type.name),h=(l=c.href)!=null?l:d.href,m=(o=c.target)!=null?o:d.target;h&&(window.open(h,m),f=!0)}return f}}})}function hO(n){return new ft({key:new wt("handlePasteLink"),props:{handlePaste:(e,t,s)=>{const{shouldAutoLink:l}=n,{state:o}=e,{selection:c}=o,{empty:f}=c;if(f)return!1;let d="";s.content.forEach(m=>{d+=m.textContent});const h=aS(d,{defaultProtocol:n.defaultProtocol}).find(m=>m.isLink&&m.value===d);return!d||!h||l!==void 0&&!l(h.value)?!1:n.editor.commands.setMark(n.type,{href:h.href})}}})}function Is(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(s=>{const l=typeof s=="string"?s:s.scheme;l&&t.push(l)}),!n||n.replace(cO,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var pO=ri.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){T1(n);return}T1(n.scheme,n.optionalSlashes)})},onDestroy(){iO()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Is(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(n),t=/^[a-z][a-z0-9+.-]*:/i.test(n);if(e||t&&!n.includes("@"))return!0;const l=(n.includes("@")?n.split("@").pop():n).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(l)||!/\./.test(l))}}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Is(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Is(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Mt(this.options.HTMLAttributes,n),0]:["a",Mt(this.options.HTMLAttributes,{...n,href:""}),0]},markdownTokenName:"link",parseMarkdown:(n,e)=>e.applyMark("link",e.parseInline(n.tokens||[]),{href:n.href,title:n.title||null}),renderMarkdown:(n,e)=>{var t,s,l,o;const c=(s=(t=n.attrs)==null?void 0:t.href)!=null?s:"",f=(o=(l=n.attrs)==null?void 0:l.title)!=null?o:"",d=e.renderChildren(n);return f?`[${d}](${c} "${f}")`:`[${d}](${c})`},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:s=>!!Is(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:s=>!!Is(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ti({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:s}=this.options,l=aS(n).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:c=>!!Is(c,t),protocols:t,defaultProtocol:s}));l.length&&l.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(fO({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:s=>this.options.isAllowedUri(s,{defaultValidate:l=>!!Is(l,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),n.push(dO({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(hO({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),n}}),mO=Object.defineProperty,gO=(n,e)=>{for(var t in e)mO(n,t,{get:e[t],enumerable:!0})},yO="listItem",E1="textStyle",M1=/^\s*([-+*])\s$/,cS=Sn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Mt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>n.type!=="list"||n.ordered?[]:{type:"bulletList",content:n.items?e.parseChildren(n.items):[]},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(yO,this.editor.getAttributes(E1)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=ol({find:M1,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ol({find:M1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(E1),editor:this.editor})),[n]}}),uS=Sn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Mt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list_item",parseMarkdown:(n,e)=>{if(n.type!=="list_item")return[];let t=[];if(n.tokens&&n.tokens.length>0)if(n.tokens.some(l=>l.type==="paragraph"))t=e.parseChildren(n.tokens);else{const l=n.tokens[0];if(l&&l.type==="text"&&l.tokens&&l.tokens.length>0){if(t=[{type:"paragraph",content:e.parseInline(l.tokens)}],n.tokens.length>1){const c=n.tokens.slice(1),f=e.parseChildren(c);t.push(...f)}}else t=e.parseChildren(n.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(n,e,t)=>zp(n,e,s=>{var l,o;return s.parentType==="bulletList"?"- ":s.parentType==="orderedList"?`${(((o=(l=s.meta)==null?void 0:l.parentAttrs)==null?void 0:o.start)||1)+s.index}. `:"- "},t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),bO={};gO(bO,{findListItemPos:()=>Ho,getNextListDepth:()=>Yp,handleBackspace:()=>np,handleDelete:()=>rp,hasListBefore:()=>fS,hasListItemAfter:()=>xO,hasListItemBefore:()=>dS,listItemHasSubList:()=>hS,nextListIsDeeper:()=>pS,nextListIsHigher:()=>mS});var Ho=(n,e)=>{const{$from:t}=e.selection,s=Et(n,e.schema);let l=null,o=t.depth,c=t.pos,f=null;for(;o>0&&f===null;)l=t.node(o),l.type===s?f=o:(o-=1,c-=1);return f===null?null:{$pos:e.doc.resolve(c),depth:f}},Yp=(n,e)=>{const t=Ho(n,e);if(!t)return!1;const[,s]=Sw(e,n,t.$pos.pos+4);return s},fS=(n,e,t)=>{const{$anchor:s}=n.selection,l=Math.max(0,s.pos-2),o=n.doc.resolve(l).node();return!(!o||!t.includes(o.type.name))},dS=(n,e)=>{var t;const{$anchor:s}=e.selection,l=e.doc.resolve(s.pos-2);return!(l.index()===0||((t=l.nodeBefore)==null?void 0:t.type.name)!==n)},hS=(n,e,t)=>{if(!t)return!1;const s=Et(n,e.schema);let l=!1;return t.descendants(o=>{o.type===s&&(l=!0)}),l},np=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!ys(n.state,e)&&fS(n.state,e,t)){const{$anchor:f}=n.state.selection,d=n.state.doc.resolve(f.before()-1),h=[];d.node().descendants((b,v)=>{b.type.name===e&&h.push({node:b,pos:v})});const m=h.at(-1);if(!m)return!1;const y=n.state.doc.resolve(d.start()+m.pos+1);return n.chain().cut({from:f.start()-1,to:f.end()+1},y.end()).joinForward().run()}if(!ys(n.state,e)||!Mw(n.state))return!1;const s=Ho(e,n.state);if(!s)return!1;const o=n.state.doc.resolve(s.$pos.pos-2).node(s.depth),c=hS(e,n.state,o);return dS(e,n.state)&&!c?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},pS=(n,e)=>{const t=Yp(n,e),s=Ho(n,e);return!s||!t?!1:t>s.depth},mS=(n,e)=>{const t=Yp(n,e),s=Ho(n,e);return!s||!t?!1:t<s.depth},rp=(n,e)=>{if(!ys(n.state,e)||!Ew(n.state,e))return!1;const{selection:t}=n.state,{$from:s,$to:l}=t;return!t.empty&&s.sameParent(l)?!1:pS(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():mS(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},xO=(n,e)=>{var t;const{$anchor:s}=e.selection,l=e.doc.resolve(s.pos-s.parentOffset-2);return!(l.index()===l.parent.childCount-1||((t=l.nodeAfter)==null?void 0:t.type.name)!==n)},gS=bt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&rp(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&rp(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:s})=>{n.state.schema.nodes[t]!==void 0&&np(n,t,s)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:s})=>{n.state.schema.nodes[t]!==void 0&&np(n,t,s)&&(e=!0)}),e}}}}),C1=/^(\s*)(\d+)\.\s+(.*)$/,vO=/^\s/;function SO(n){const e=[];let t=0,s=0;for(;t<n.length;){const l=n[t],o=l.match(C1);if(!o)break;const[,c,f,d]=o,h=c.length;let m=d,y=t+1;const b=[l];for(;y<n.length;){const v=n[y];if(v.match(C1))break;if(v.trim()==="")b.push(v),m+=`
`,y+=1;else if(v.match(vO))b.push(v),m+=`
${v.slice(h+2)}`,y+=1;else break}e.push({indent:h,number:parseInt(f,10),content:m.trim(),raw:b.join(`
`)}),s=y,t=y}return[e,s]}function yS(n,e,t){var s;const l=[];let o=0;for(;o<n.length;){const c=n[o];if(c.indent===e){const f=c.content.split(`
`),d=((s=f[0])==null?void 0:s.trim())||"",h=[];d&&h.push({type:"paragraph",raw:d,tokens:t.inlineTokens(d)});const m=f.slice(1).join(`
`).trim();if(m){const v=t.blockTokens(m);h.push(...v)}let y=o+1;const b=[];for(;y<n.length&&n[y].indent>e;)b.push(n[y]),y+=1;if(b.length>0){const v=Math.min(...b.map(M=>M.indent)),k=yS(b,v,t);h.push({type:"list",ordered:!0,start:b[0].number,items:k,raw:b.map(M=>M.raw).join(`
`)})}l.push({type:"list_item",raw:c.raw,tokens:h}),o=y}else o+=1}return l}function kO(n,e){return n.map(t=>{if(t.type!=="list_item")return e.parseChildren([t])[0];const s=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(l=>{if(l.type==="paragraph"||l.type==="list"||l.type==="blockquote"||l.type==="code")s.push(...e.parseChildren([l]));else if(l.type==="text"&&l.tokens){const o=e.parseChildren([l]);s.push({type:"paragraph",content:o})}else{const o=e.parseChildren([l]);o.length>0&&s.push(...o)}}),{type:"listItem",content:s}})}var TO="listItem",w1="textStyle",N1=/^(\d+)\.\s$/,bS=Sn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Mt(this.options.HTMLAttributes,t),0]:["ol",Mt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>{if(n.type!=="list"||!n.ordered)return[];const t=n.start||1,s=n.items?kO(n.items,e):[];return t!==1?{type:"orderedList",attrs:{start:t},content:s}:{type:"orderedList",content:s}},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:n=>{const e=n.match(/^(\s*)(\d+)\.\s+/),t=e?.index;return t!==void 0?t:-1},tokenize:(n,e,t)=>{var s;const l=n.split(`
`),[o,c]=SO(l);if(o.length===0)return;const f=yS(o,0,t);return f.length===0?void 0:{type:"list",ordered:!0,start:((s=o[0])==null?void 0:s.number)||1,items:f,raw:l.slice(0,c).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(TO,this.editor.getAttributes(w1)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=ol({find:N1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ol({find:N1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(w1)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),EO=/^\s*(\[([( |x])?\])\s$/,MO=Sn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",Mt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(n,e)=>{const t=[];if(n.tokens&&n.tokens.length>0?t.push(e.createNode("paragraph",{},e.parseInline(n.tokens))):n.text?t.push(e.createNode("paragraph",{},[e.createNode("text",{text:n.text})])):t.push(e.createNode("paragraph",{},[])),n.nestedTokens&&n.nestedTokens.length>0){const s=e.parseChildren(n.nestedTokens);t.push(...s)}return e.createNode("taskItem",{checked:n.checked||!1},t)},renderMarkdown:(n,e)=>{var t;const l=`- [${(t=n.attrs)!=null&&t.checked?"x":" "}] `;return zp(n,e,l)},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:s})=>{const l=document.createElement("li"),o=document.createElement("label"),c=document.createElement("span"),f=document.createElement("input"),d=document.createElement("div"),h=y=>{var b,v;f.ariaLabel=((v=(b=this.options.a11y)==null?void 0:b.checkboxLabel)==null?void 0:v.call(b,y,f.checked))||`Task item checkbox for ${y.textContent||"empty task item"}`};h(n),o.contentEditable="false",f.type="checkbox",f.addEventListener("mousedown",y=>y.preventDefault()),f.addEventListener("change",y=>{if(!s.isEditable&&!this.options.onReadOnlyChecked){f.checked=!f.checked;return}const{checked:b}=y.target;s.isEditable&&typeof t=="function"&&s.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:v})=>{const k=t();if(typeof k!="number")return!1;const M=v.doc.nodeAt(k);return v.setNodeMarkup(k,void 0,{...M?.attrs,checked:b}),!0}).run(),!s.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,b)||(f.checked=!f.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([y,b])=>{l.setAttribute(y,b)}),l.dataset.checked=n.attrs.checked,f.checked=n.attrs.checked,o.append(f,c),l.append(o,d),Object.entries(e).forEach(([y,b])=>{l.setAttribute(y,b)});let m=new Set(Object.keys(e));return{dom:l,contentDOM:d,update:y=>{if(y.type!==this.type)return!1;l.dataset.checked=y.attrs.checked,f.checked=y.attrs.checked,h(y);const b=s.extensionManager.attributes,v=Oo(y,b),k=new Set(Object.keys(v)),M=this.options.HTMLAttributes;return m.forEach(E=>{k.has(E)||(E in M?l.setAttribute(E,M[E]):l.removeAttribute(E))}),Object.entries(v).forEach(([E,C])=>{C==null?E in M?l.setAttribute(E,M[E]):l.removeAttribute(E):l.setAttribute(E,C)}),m=k,!0}}}},addInputRules(){return[ol({find:EO,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),CO=Sn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",Mt(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},parseMarkdown:(n,e)=>e.createNode("taskList",{},e.parseChildren(n.items||[])),renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(n){var e;const t=(e=n.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return t!==void 0?t:-1},tokenize(n,e,t){const s=o=>{const c=Kh(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:f=>({indentLevel:f[1].length,mainContent:f[4],checked:f[3].toLowerCase()==="x"}),createToken:(f,d)=>({type:"taskItem",raw:"",mainContent:f.mainContent,indentLevel:f.indentLevel,checked:f.checked,text:f.mainContent,tokens:t.inlineTokens(f.mainContent),nestedTokens:d}),customNestedParser:s},t);return c?[{type:"taskList",raw:c.raw,items:c.items}]:t.blockTokens(o)},l=Kh(n,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,c)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:t.inlineTokens(o.mainContent),nestedTokens:c}),customNestedParser:s},t);if(l)return{type:"taskList",raw:l.raw,items:l.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});bt.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(cS.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push(uS.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(gS.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(bS.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(MO.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(CO.configure(this.options.taskList)),n}});var A1="&nbsp;",wO="",NO=Sn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Mt(this.options.HTMLAttributes,n),0]},parseMarkdown:(n,e)=>{const t=n.tokens||[];if(t.length===1&&t[0].type==="image")return e.parseChildren([t[0]]);const s=e.parseInline(t);return s.length===1&&s[0].type==="text"&&(s[0].text===A1||s[0].text===wO)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,s)},renderMarkdown:(n,e)=>{if(!n)return"";const t=Array.isArray(n.content)?n.content:[];return t.length===0?A1:e.renderChildren(t)},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),AO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,OO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,DO=ri.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Mt(this.options.HTMLAttributes,n),0]},markdownTokenName:"del",parseMarkdown:(n,e)=>e.applyMark("strike",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`~~${e.renderChildren(n)}~~`,addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ll({find:AO,type:this.type})]},addPasteRules(){return[ti({find:OO,type:this.type})]}}),jO=Sn.create({name:"text",group:"inline",parseMarkdown:n=>({type:"text",text:n.text||""}),renderMarkdown:n=>n.text||""}),RO=ri.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",Mt(this.options.HTMLAttributes,n),0]},parseMarkdown(n,e){return e.applyMark(this.name||"underline",e.parseInline(n.tokens||[]))},renderMarkdown(n,e){return`++${e.renderChildren(n)}++`},markdownTokenizer:{name:"underline",level:"inline",start(n){return n.indexOf("++")},tokenize(n,e,t){const l=/^(\+\+)([\s\S]+?)(\+\+)/.exec(n);if(!l)return;const o=l[2].trim();return{type:"underline",raw:l[0],text:o,tokens:t.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function zO(n={}){return new ft({view(e){return new LO(e,n)}})}class LO{constructor(e,t){var s;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(s=t.width)!==null&&s!==void 0?s:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(l=>{let o=c=>{this[l](c)};return e.dom.addEventListener(l,o),{name:l,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,s,l=this.editorView.dom,o=l.getBoundingClientRect(),c=o.width/l.offsetWidth,f=o.height/l.offsetHeight;if(t){let y=e.nodeBefore,b=e.nodeAfter;if(y||b){let v=this.editorView.nodeDOM(this.cursorPos-(y?y.nodeSize:0));if(v){let k=v.getBoundingClientRect(),M=y?k.bottom:k.top;y&&b&&(M=(M+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let E=this.width/2*f;s={left:k.left,right:k.right,top:M-E,bottom:M+E}}}}if(!s){let y=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*c;s={left:y.left-b,right:y.left+b,top:y.top,bottom:y.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,m;if(!d||d==document.body&&getComputedStyle(d).position=="static")h=-pageXOffset,m=-pageYOffset;else{let y=d.getBoundingClientRect(),b=y.width/d.offsetWidth,v=y.height/d.offsetHeight;h=y.left-d.scrollLeft*b,m=y.top-d.scrollTop*v}this.element.style.left=(s.left-h)/c+"px",this.element.style.top=(s.top-m)/f+"px",this.element.style.width=(s.right-s.left)/c+"px",this.element.style.height=(s.bottom-s.top)/f+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),s=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),l=s&&s.type.spec.disableDropCursor,o=typeof l=="function"?l(this.editorView,t,e):l;if(t&&!o){let c=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let f=hx(this.editorView.state.doc,c,this.editorView.dragging.slice);f!=null&&(c=f)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class mt extends Oe{constructor(e){super(e,e)}map(e,t){let s=e.resolve(t.map(this.head));return mt.valid(s)?new mt(s):Oe.near(s)}content(){return ae.empty}eq(e){return e instanceof mt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new mt(e.resolve(t.pos))}getBookmark(){return new Kp(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!_O(e)||!BO(e))return!1;let s=t.type.spec.allowGapCursor;if(s!=null)return s;let l=t.contentMatchAt(e.index()).defaultType;return l&&l.isTextblock}static findGapCursorFrom(e,t,s=!1){e:for(;;){if(!s&&mt.valid(e))return e;let l=e.pos,o=null;for(let c=e.depth;;c--){let f=e.node(c);if(t>0?e.indexAfter(c)<f.childCount:e.index(c)>0){o=f.child(t>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;l+=t;let d=e.doc.resolve(l);if(mt.valid(d))return d}for(;;){let c=t>0?o.firstChild:o.lastChild;if(!c){if(o.isAtom&&!o.isText&&!ge.isSelectable(o)){e=e.doc.resolve(l+o.nodeSize*t),s=!1;continue e}break}o=c,l+=t;let f=e.doc.resolve(l);if(mt.valid(f))return f}return null}}}mt.prototype.visible=!1;mt.findFrom=mt.findGapCursorFrom;Oe.jsonID("gapcursor",mt);class Kp{constructor(e){this.pos=e}map(e){return new Kp(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return mt.valid(t)?new mt(t):Oe.near(t)}}function xS(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function _O(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),s=n.node(e);if(t==0){if(s.type.spec.isolating)return!0;continue}for(let l=s.child(t-1);;l=l.lastChild){if(l.childCount==0&&!l.inlineContent||xS(l.type))return!0;if(l.inlineContent)return!1}}return!0}function BO(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),s=n.node(e);if(t==s.childCount){if(s.type.spec.isolating)return!0;continue}for(let l=s.child(t);;l=l.firstChild){if(l.childCount==0&&!l.inlineContent||xS(l.type))return!0;if(l.inlineContent)return!1}}return!0}function HO(){return new ft({props:{decorations:qO,createSelectionBetween(n,e,t){return e.pos==t.pos&&mt.valid(t)?new mt(t):null},handleClick:IO,handleKeyDown:UO,handleDOMEvents:{beforeinput:VO}}})}const UO=pv({ArrowLeft:hc("horiz",-1),ArrowRight:hc("horiz",1),ArrowUp:hc("vert",-1),ArrowDown:hc("vert",1)});function hc(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(s,l,o){let c=s.selection,f=e>0?c.$to:c.$from,d=c.empty;if(c instanceof Se){if(!o.endOfTextblock(t)||f.depth==0)return!1;d=!1,f=s.doc.resolve(e>0?f.after():f.before())}let h=mt.findGapCursorFrom(f,e,d);return h?(l&&l(s.tr.setSelection(new mt(h))),!0):!1}}function IO(n,e,t){if(!n||!n.editable)return!1;let s=n.state.doc.resolve(e);if(!mt.valid(s))return!1;let l=n.posAtCoords({left:t.clientX,top:t.clientY});return l&&l.inside>-1&&ge.isSelectable(n.state.doc.nodeAt(l.inside))?!1:(n.dispatch(n.state.tr.setSelection(new mt(s))),!0)}function VO(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof mt))return!1;let{$from:t}=n.state.selection,s=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!s)return!1;let l=W.empty;for(let c=s.length-1;c>=0;c--)l=W.from(s[c].createAndFill(null,l));let o=n.state.tr.replace(t.pos,t.pos,new ae(l,0,0));return o.setSelection(Se.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function qO(n){if(!(n.selection instanceof mt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ut.create(n.doc,[Ft.widget(n.selection.head,e,{key:"gapcursor"})])}var cu=200,Rt=function(){};Rt.prototype.append=function(e){return e.length?(e=Rt.from(e),!this.length&&e||e.length<cu&&this.leafAppend(e)||this.length<cu&&e.leafPrepend(this)||this.appendInner(e)):this};Rt.prototype.prepend=function(e){return e.length?Rt.from(e).append(this):this};Rt.prototype.appendInner=function(e){return new $O(this,e)};Rt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Rt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Rt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Rt.prototype.forEach=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length),t<=s?this.forEachInner(e,t,s,0):this.forEachInvertedInner(e,t,s,0)};Rt.prototype.map=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length);var l=[];return this.forEach(function(o,c){return l.push(e(o,c))},t,s),l};Rt.from=function(e){return e instanceof Rt?e:e&&e.length?new vS(e):Rt.empty};var vS=(function(n){function e(s){n.call(this),this.values=s}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(l,o){return l==0&&o==this.length?this:new e(this.values.slice(l,o))},e.prototype.getInner=function(l){return this.values[l]},e.prototype.forEachInner=function(l,o,c,f){for(var d=o;d<c;d++)if(l(this.values[d],f+d)===!1)return!1},e.prototype.forEachInvertedInner=function(l,o,c,f){for(var d=o-1;d>=c;d--)if(l(this.values[d],f+d)===!1)return!1},e.prototype.leafAppend=function(l){if(this.length+l.length<=cu)return new e(this.values.concat(l.flatten()))},e.prototype.leafPrepend=function(l){if(this.length+l.length<=cu)return new e(l.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e})(Rt);Rt.empty=new vS([]);var $O=(function(n){function e(t,s){n.call(this),this.left=t,this.right=s,this.length=t.length+s.length,this.depth=Math.max(t.depth,s.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(s){return s<this.left.length?this.left.get(s):this.right.get(s-this.left.length)},e.prototype.forEachInner=function(s,l,o,c){var f=this.left.length;if(l<f&&this.left.forEachInner(s,l,Math.min(o,f),c)===!1||o>f&&this.right.forEachInner(s,Math.max(l-f,0),Math.min(this.length,o)-f,c+f)===!1)return!1},e.prototype.forEachInvertedInner=function(s,l,o,c){var f=this.left.length;if(l>f&&this.right.forEachInvertedInner(s,l-f,Math.max(o,f)-f,c+f)===!1||o<f&&this.left.forEachInvertedInner(s,Math.min(l,f),o,c)===!1)return!1},e.prototype.sliceInner=function(s,l){if(s==0&&l==this.length)return this;var o=this.left.length;return l<=o?this.left.slice(s,l):s>=o?this.right.slice(s-o,l-o):this.left.slice(s,o).append(this.right.slice(0,l-o))},e.prototype.leafAppend=function(s){var l=this.right.leafAppend(s);if(l)return new e(this.left,l)},e.prototype.leafPrepend=function(s){var l=this.left.leafPrepend(s);if(l)return new e(l,this.right)},e.prototype.appendInner=function(s){return this.left.depth>=Math.max(this.right.depth,s.depth)+1?new e(this.left,new e(this.right,s)):new e(this,s)},e})(Rt);const GO=500;class Vn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}let l,o;t&&(l=this.remapping(s,this.items.length),o=l.maps.length);let c=e.tr,f,d,h=[],m=[];return this.items.forEach((y,b)=>{if(!y.step){l||(l=this.remapping(s,b+1),o=l.maps.length),o--,m.push(y);return}if(l){m.push(new Xn(y.map));let v=y.step.map(l.slice(o)),k;v&&c.maybeStep(v).doc&&(k=c.mapping.maps[c.mapping.maps.length-1],h.push(new Xn(k,void 0,void 0,h.length+m.length))),o--,k&&l.appendMap(k,o)}else c.maybeStep(y.step);if(y.selection)return f=l?y.selection.map(l.slice(o)):y.selection,d=new Vn(this.items.slice(0,s).append(m.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:c,selection:f}}addTransform(e,t,s,l){let o=[],c=this.eventCount,f=this.items,d=!l&&f.length?f.get(f.length-1):null;for(let m=0;m<e.steps.length;m++){let y=e.steps[m].invert(e.docs[m]),b=new Xn(e.mapping.maps[m],y,t),v;(v=d&&d.merge(b))&&(b=v,m?o.pop():f=f.slice(0,f.length-1)),o.push(b),t&&(c++,t=void 0),l||(d=b)}let h=c-s.depth;return h>KO&&(f=YO(f,h),c-=h),new Vn(f.append(o),c)}remapping(e,t){let s=new Eo;return this.items.forEach((l,o)=>{let c=l.mirrorOffset!=null&&o-l.mirrorOffset>=e?s.maps.length-l.mirrorOffset:void 0;s.appendMap(l.map,c)},e,t),s}addMaps(e){return this.eventCount==0?this:new Vn(this.items.append(e.map(t=>new Xn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let s=[],l=Math.max(0,this.items.length-t),o=e.mapping,c=e.steps.length,f=this.eventCount;this.items.forEach(b=>{b.selection&&f--},l);let d=t;this.items.forEach(b=>{let v=o.getMirror(--d);if(v==null)return;c=Math.min(c,v);let k=o.maps[v];if(b.step){let M=e.steps[v].invert(e.docs[v]),E=b.selection&&b.selection.map(o.slice(d+1,v));E&&f++,s.push(new Xn(k,M,E))}else s.push(new Xn(k))},l);let h=[];for(let b=t;b<c;b++)h.push(new Xn(o.maps[b]));let m=this.items.slice(0,l).append(h).append(s),y=new Vn(m,f);return y.emptyItemCount()>GO&&(y=y.compress(this.items.length-s.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),s=t.maps.length,l=[],o=0;return this.items.forEach((c,f)=>{if(f>=e)l.push(c),c.selection&&o++;else if(c.step){let d=c.step.map(t.slice(s)),h=d&&d.getMap();if(s--,h&&t.appendMap(h,s),d){let m=c.selection&&c.selection.map(t.slice(s));m&&o++;let y=new Xn(h.invert(),d,m),b,v=l.length-1;(b=l.length&&l[v].merge(y))?l[v]=b:l.push(y)}}else c.map&&s--},this.items.length,0),new Vn(Rt.from(l.reverse()),o)}}Vn.empty=new Vn(Rt.empty,0);function YO(n,e){let t;return n.forEach((s,l)=>{if(s.selection&&e--==0)return t=l,!1}),n.slice(t)}class Xn{constructor(e,t,s,l){this.map=e,this.step=t,this.selection=s,this.mirrorOffset=l}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Xn(t.getMap().invert(),t,this.selection)}}}class ss{constructor(e,t,s,l,o){this.done=e,this.undone=t,this.prevRanges=s,this.prevTime=l,this.prevComposition=o}}const KO=20;function PO(n,e,t,s){let l=t.getMeta(Xs),o;if(l)return l.historyState;t.getMeta(XO)&&(n=new ss(n.done,n.undone,null,0,-1));let c=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(c&&c.getMeta(Xs))return c.getMeta(Xs).redo?new ss(n.done.addTransform(t,void 0,s,bc(e)),n.undone,O1(t.mapping.maps),n.prevTime,n.prevComposition):new ss(n.done,n.undone.addTransform(t,void 0,s,bc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let f=t.getMeta("composition"),d=n.prevTime==0||!c&&n.prevComposition!=f&&(n.prevTime<(t.time||0)-s.newGroupDelay||!JO(t,n.prevRanges)),h=c?Eh(n.prevRanges,t.mapping):O1(t.mapping.maps);return new ss(n.done.addTransform(t,d?e.selection.getBookmark():void 0,s,bc(e)),Vn.empty,h,t.time,f??n.prevComposition)}else return(o=t.getMeta("rebased"))?new ss(n.done.rebased(t,o),n.undone.rebased(t,o),Eh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new ss(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Eh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function JO(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((s,l)=>{for(let o=0;o<e.length;o+=2)s<=e[o+1]&&l>=e[o]&&(t=!0)}),t}function O1(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((s,l,o,c)=>e.push(o,c));return e}function Eh(n,e){if(!n)return null;let t=[];for(let s=0;s<n.length;s+=2){let l=e.map(n[s],1),o=e.map(n[s+1],-1);l<=o&&t.push(l,o)}return t}function FO(n,e,t){let s=bc(e),l=Xs.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,s);if(!o)return null;let c=o.selection.resolve(o.transform.doc),f=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),l,s),d=new ss(t?f:o.remaining,t?o.remaining:f,null,0,-1);return o.transform.setSelection(c).setMeta(Xs,{redo:t,historyState:d})}let Mh=!1,D1=null;function bc(n){let e=n.plugins;if(D1!=e){Mh=!1,D1=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Mh=!0;break}}return Mh}const Xs=new wt("history"),XO=new wt("closeHistory");function QO(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new ft({key:Xs,state:{init(){return new ss(Vn.empty,Vn.empty,null,0,-1)},apply(e,t,s){return PO(t,s,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let s=t.inputType,l=s=="historyUndo"?kS:s=="historyRedo"?TS:null;return!l||!e.editable?!1:(t.preventDefault(),l(e.state,e.dispatch))}}}})}function SS(n,e){return(t,s)=>{let l=Xs.getState(t);if(!l||(n?l.undone:l.done).eventCount==0)return!1;if(s){let o=FO(l,t,n);o&&s(e?o.scrollIntoView():o)}return!0}}const kS=SS(!1,!0),TS=SS(!0,!0);bt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=n?.node||this.editor.state.doc;if((n?.mode||this.options.mode)==="textSize"){const s=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(s)}return e.nodeSize},this.storage.words=n=>{const e=n?.node||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new ft({key:new wt("characterCount"),appendTransaction:(e,t,s)=>{if(n)return;const l=this.options.limit;if(l==null||l===0){n=!0;return}const o=this.storage.characters({node:s.doc});if(o>l){const c=o-l,f=0,d=c;console.warn(`[CharacterCount] Initial content exceeded limit of ${l} characters. Content was automatically trimmed.`);const h=s.tr.deleteRange(f,d);return n=!0,h}n=!0},filterTransaction:(e,t)=>{const s=this.options.limit;if(!e.docChanged||s===0||s===null||s===void 0)return!0;const l=this.storage.characters({node:t.doc}),o=this.storage.characters({node:e.doc});if(o<=s||l>s&&o>s&&o<=l)return!0;if(l>s&&o>s&&o>l||!e.getMeta("paste"))return!1;const f=e.selection.$head.pos,d=o-s,h=f-d,m=f;return e.deleteRange(h,m),!(this.storage.characters({node:e.doc})>s)}})]}});var ZO=bt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[zO(this.options)]}});bt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new ft({key:new wt("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:s}=this.editor,{anchor:l}=e,o=[];if(!t||!s)return ut.create(n,[]);let c=0;this.options.mode==="deepest"&&n.descendants((d,h)=>{if(d.isText)return;if(!(l>=h&&l<=h+d.nodeSize-1))return!1;c+=1});let f=0;return n.descendants((d,h)=>{if(d.isText||!(l>=h&&l<=h+d.nodeSize-1))return!1;if(f+=1,this.options.mode==="deepest"&&c-f>0||this.options.mode==="shallowest"&&f>1)return this.options.mode==="deepest";o.push(Ft.node(h,h+d.nodeSize,{class:this.options.className}))}),ut.create(n,o)}}})]}});var WO=bt.create({name:"gapCursor",addProseMirrorPlugins(){return[HO()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Je(pe(n,"allowGapCursor",t)))!=null?e:null}}}),j1="placeholder";function e3(n){return n.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}bt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:j1,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const n=this.options.dataAttribute?`data-${e3(this.options.dataAttribute)}`:`data-${j1}`;return[new ft({key:new wt("placeholder"),props:{decorations:({doc:e,selection:t})=>{const s=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:l}=t,o=[];if(!s)return null;const c=this.editor.isEmpty;return e.descendants((f,d)=>{const h=l>=d&&l<=d+f.nodeSize,m=!f.isLeaf&&Su(f);if((h||!this.options.showOnlyCurrent)&&m){const y=[this.options.emptyNodeClass];c&&y.push(this.options.emptyEditorClass);const b=Ft.node(d,d+f.nodeSize,{class:y.join(" "),[n]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:f,pos:d,hasAnchor:h}):this.options.placeholder});o.push(b)}return this.options.includeChildren}),ut.create(e,o)}}})]}});bt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:e}=this;return[new ft({key:new wt("selection"),props:{decorations(t){return t.selection.empty||n.isFocused||!n.isEditable||Ov(t.selection)||n.view.dragging?null:ut.create(t.doc,[Ft.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function R1({types:n,node:e}){return e&&Array.isArray(n)&&n.includes(e.type)||e?.type===n}var t3=bt.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var n;const e=new wt(this.name),t=this.options.node||((n=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:n.name)||"paragraph",s=Object.entries(this.editor.schema.nodes).map(([,l])=>l).filter(l=>(this.options.notAfter||[]).concat(t).includes(l.name));return[new ft({key:e,appendTransaction:(l,o,c)=>{const{doc:f,tr:d,schema:h}=c,m=e.getState(c),y=f.content.size,b=h.nodes[t];if(m)return d.insert(y,b.create())},state:{init:(l,o)=>{const c=o.tr.doc.lastChild;return!R1({node:c,types:s})},apply:(l,o)=>{if(!l.docChanged||l.getMeta("__uniqueIDTransaction"))return o;const c=l.doc.lastChild;return!R1({node:c,types:s})}}})]}}),n3=bt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>kS(n,e),redo:()=>({state:n,dispatch:e})=>TS(n,e)}},addProseMirrorPlugins(){return[QO(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),r3=bt.create({name:"starterKit",addExtensions(){var n,e,t,s;const l=[];return this.options.bold!==!1&&l.push(NA.configure(this.options.bold)),this.options.blockquote!==!1&&l.push(TA.configure(this.options.blockquote)),this.options.bulletList!==!1&&l.push(cS.configure(this.options.bulletList)),this.options.code!==!1&&l.push(DA.configure(this.options.code)),this.options.codeBlock!==!1&&l.push(zA.configure(this.options.codeBlock)),this.options.document!==!1&&l.push(LA.configure(this.options.document)),this.options.dropcursor!==!1&&l.push(ZO.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&l.push(WO.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&l.push(_A.configure(this.options.hardBreak)),this.options.heading!==!1&&l.push(BA.configure(this.options.heading)),this.options.undoRedo!==!1&&l.push(n3.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&l.push(HA.configure(this.options.horizontalRule)),this.options.italic!==!1&&l.push($A.configure(this.options.italic)),this.options.listItem!==!1&&l.push(uS.configure(this.options.listItem)),this.options.listKeymap!==!1&&l.push(gS.configure((n=this.options)==null?void 0:n.listKeymap)),this.options.link!==!1&&l.push(pO.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&l.push(bS.configure(this.options.orderedList)),this.options.paragraph!==!1&&l.push(NO.configure(this.options.paragraph)),this.options.strike!==!1&&l.push(DO.configure(this.options.strike)),this.options.text!==!1&&l.push(jO.configure(this.options.text)),this.options.underline!==!1&&l.push(RO.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&l.push(t3.configure((s=this.options)==null?void 0:s.trailingNode)),l}}),s3=r3;const Ki=({onClick:n,active:e,title:t,children:s})=>x.jsx("button",{type:"button",onClick:n,title:t,className:`
      w-8 h-8 flex items-center justify-center rounded
      text-sm font-bold transition-colors cursor-pointer
      ${e?"bg-[var(--color-border-main)] text-[var(--color-bg-card)]":"text-[var(--color-text-muted)] hover:text-[var(--color-text-main)] hover:bg-[var(--color-bg-white)]"}
    `,children:s}),i3=({editor:n})=>n?x.jsxs("div",{className:"flex gap-1 p-2 border-b border-[var(--color-border-gray-300)] bg-[var(--color-bg-gray-50)]",children:[x.jsx(Ki,{onClick:()=>n.chain().focus().toggleHeading({level:1}).run(),active:n.isActive("heading",{level:1}),title:"Heading (Ctrl+Alt+1)",children:"H"}),x.jsx(Ki,{onClick:()=>n.chain().focus().toggleBold().run(),active:n.isActive("bold"),title:"Bold (Ctrl+B)",children:"B"}),x.jsx(Ki,{onClick:()=>n.chain().focus().toggleItalic().run(),active:n.isActive("italic"),title:"Italic (Ctrl+I)",children:x.jsx("span",{className:"italic",children:"I"})}),x.jsx("div",{className:"w-px bg-[var(--color-border-gray-300)] mx-1"}),x.jsx(Ki,{onClick:()=>n.chain().focus().toggleBulletList().run(),active:n.isActive("bulletList"),title:"Bullet List",children:""}),x.jsx(Ki,{onClick:()=>n.chain().focus().toggleOrderedList().run(),active:n.isActive("orderedList"),title:"Numbered List",children:"1."}),x.jsx("div",{className:"w-px bg-[var(--color-border-gray-300)] mx-1"}),x.jsx(Ki,{onClick:()=>n.chain().focus().setHorizontalRule().run(),active:!1,title:"Horizontal Rule",children:""})]}):null,l3=({value:n,onChange:e})=>{const t=bA({extensions:[s3.configure({heading:{levels:[1]},codeBlock:!1,code:!1,blockquote:!1,strike:!1})],content:n?z1(n):"",onUpdate:({editor:s})=>{const l=L1(s.getHTML());e(l)},editorProps:{attributes:{class:"prose prose-sm max-w-none p-3 min-h-[120px] focus:outline-none font-mono text-sm"}}});return Mr.useEffect(()=>{t&&n!==void 0&&L1(t.getHTML())!==n&&t.commands.setContent(z1(n))},[n,t]),x.jsxs("div",{className:"border-2 border-[var(--color-border-gray-300)] rounded-lg overflow-hidden bg-[var(--color-bg-input)] focus-within:border-[var(--color-border-main)] transition-colors",children:[x.jsx(i3,{editor:t}),x.jsx(Fv,{editor:t}),x.jsx("style",{children:`
        .ProseMirror {
          min-height: 120px;
          font-family: 'IBM Plex Mono', monospace;
          font-size: 14px;
          color: var(--color-text-main);
        }
        .ProseMirror:focus {
          outline: none;
        }
        .ProseMirror p {
          margin: 0.5em 0;
        }
        .ProseMirror h1 {
          font-size: 1.25em;
          font-weight: 700;
          margin: 0.75em 0 0.5em;
        }
        .ProseMirror strong {
          font-weight: 700;
        }
        .ProseMirror em {
          font-style: italic;
        }
        .ProseMirror ul, .ProseMirror ol {
          padding-left: 1.5em;
          margin: 0.5em 0;
        }
        .ProseMirror li {
          margin: 0.25em 0;
        }
        .ProseMirror hr {
          border: none;
          border-top: 2px dashed var(--color-border-gray-400);
          margin: 1em 0;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          color: var(--color-text-muted);
          pointer-events: none;
          float: left;
          height: 0;
        }
      `})]})};function z1(n){return n?n.replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(new RegExp("(?<!\\*)\\*([^*]+)\\*(?!\\*)","g"),"<em>$1</em>").replace(/_(.+?)_/g,"<em>$1</em>").replace(/^---$/gm,"<hr>").replace(/^[*-] (.+)$/gm,"<li>$1</li>").replace(/^\d+\. (.+)$/gm,"<oli>$1</oli>").replace(/(<li>.*<\/li>\n?)+/g,"<ul>$&</ul>").replace(/(<oli>.*<\/oli>\n?)+/g,"<ol>$&</ol>").replace(/<\/?oli>/g,t=>t.replace("oli","li")).split(`
`).map(t=>t.match(/^<(h1|ul|ol|hr|li)/)?t:t.trim()===""?"":t.match(/^<[a-z]/)?t:`<p>${t}</p>`).join(`
`):""}function L1(n){if(!n)return"";const e=document.createElement("div");e.innerHTML=n;let t="";const s=l=>{if(l.nodeType===Node.TEXT_NODE)return l.textContent;if(l.nodeType!==Node.ELEMENT_NODE)return"";const o=Array.from(l.childNodes).map(s).join("");switch(l.tagName.toLowerCase()){case"h1":return`# ${o}
`;case"p":return`${o}
`;case"strong":return`**${o}**`;case"em":return`*${o}*`;case"ul":return o;case"ol":return o;case"li":const c=l.parentElement;return c.tagName.toLowerCase()==="ol"?`${Array.from(c.children).indexOf(l)+1}. ${o}
`:`- ${o}
`;case"hr":return`---
`;case"br":return`
`;default:return o}};return t=Array.from(e.childNodes).map(s).join(""),t.replace(/\n{3,}/g,`

`).trim()}const o3=({schema:n,uiSchema:e={},formData:t={},onChange:s,moduleId:l,onActionComplete:o})=>n?x.jsx("div",{className:"space-y-4",children:x.jsx(sp,{schema:n,uiSchema:e,value:t,onChange:c=>s(c),path:[],rootValue:t,onRootChange:s,moduleId:l,onActionComplete:o})}):null,sp=({schema:n,uiSchema:e,value:t,onChange:s,path:l,label:o,required:c,compact:f,rootValue:d,onRootChange:h,moduleId:m,onActionComplete:y})=>{const b=n.type,v=n.title||o,k=n.description,M=e?.["ui:options"]||{},E=e?.["ui:widget"];if(E==="location-search")return x.jsxs("div",{className:"mb-4",children:[v&&x.jsx("label",{className:Ve.label,children:v}),x.jsx(H1,{value:t,onChange:s}),k&&x.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});if(E==="key-value-list")return x.jsxs("div",{className:"mb-4",children:[v&&x.jsx("label",{className:Ve.label,children:v}),x.jsx(sE,{value:t,onChange:s}),k&&x.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});if(E==="preset-select"){const C=M.presets||{};return x.jsxs("div",{className:"mb-4",children:[v&&x.jsx("label",{className:Ve.label,children:v}),x.jsx(lE,{value:t,onChange:s,presets:C,onPresetSelect:z=>{h&&d&&h({...d,...z})}}),k&&x.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]})}if(E==="webhook-test")return x.jsx("div",{className:"mb-4",children:x.jsx(cE,{formData:d})});if(E==="action-button")return x.jsx(uE,{schema:n,uiSchema:e,moduleId:m,onActionComplete:y});if(E==="richtext")return x.jsxs("div",{className:"mb-4",children:[v&&x.jsx("label",{className:Ve.label,children:v}),x.jsx(l3,{value:t,onChange:s}),k&&x.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});if(b==="object"){const C=M.layout==="inline"||M.layout==="compact";return x.jsxs("div",{className:C?"flex flex-wrap gap-x-4 gap-y-2 items-end":"space-y-3",children:[v&&!C&&x.jsx("h3",{className:"font-bold text-sm text-zinc-700 uppercase tracking-wider",children:v}),k&&!C&&x.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:k}),Object.entries(n.properties||{}).map(([z,B])=>{const ee=e?.[z]||{},G=t?.[z],F=C||ee["ui:options"]?.compact,q=ee["ui:showWhen"];return q&&t?.[q.field]!==q.value?null:x.jsx("div",{className:C?"flex-1 min-w-[120px]":"",children:x.jsx(sp,{schema:B,uiSchema:ee,value:G,onChange:se=>{const fe={...t,[z]:se};s(fe)},path:[...l,z],label:B.title||z,required:n.required&&n.required.includes(z),compact:F,rootValue:d,onRootChange:h,moduleId:m,onActionComplete:y})},z)})]})}if(b==="array"){const C=t||[],z=n.items,B=e?.items||{};if(E==="checklist")return x.jsxs("div",{className:"space-y-2",children:[v&&x.jsx("label",{className:Ve.label,children:v}),x.jsx(iE,{value:C,onChange:s}),k&&x.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});const ee=()=>{const q=ES(z);s([...C,q])},G=q=>{const se=[...C];se.splice(q,1),s(se)},F=(q,se)=>{const fe=[...C];fe[q]=se,s(fe)};return x.jsxs("div",{className:"space-y-2",children:[x.jsx("div",{className:"flex justify-between items-center",children:v&&x.jsx("label",{className:Ve.label,children:v})}),k&&x.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:k}),x.jsx("div",{className:"space-y-2",children:C.map((q,se)=>x.jsxs("div",{className:"flex gap-2 items-center p-3 border border-zinc-200 rounded-lg bg-white relative group",children:[x.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-zinc-100 flex items-center justify-center text-xs font-mono font-bold text-zinc-500",children:se+1}),x.jsx("div",{className:"flex-1",children:x.jsx(sp,{schema:z,uiSchema:B,value:q,onChange:fe=>F(se,fe),path:[...l,se],moduleId:m})}),x.jsx("button",{type:"button",onClick:()=>G(se),className:"text-gray-400 hover:text-red-500 transition-colors p-1",title:"Remove Item",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 256 256",children:x.jsx("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"})})})]},se))}),(!n.maxItems||C.length<n.maxItems)&&x.jsxs("button",{type:"button",onClick:ee,className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs font-bold tracking-wider cursor-pointer",children:["+ ",e?.["ui:addLabel"]||"Add Item"]}),n.maxItems&&C.length>=n.maxItems&&x.jsxs("div",{className:"text-center text-xs text-zinc-400 py-2",children:["Maximum limit of ",n.maxItems," reached"]})]})}return b==="boolean"?x.jsxs("div",{className:`flex items-center gap-2 ${f?"py-0":"py-1"}`,children:[x.jsx("input",{type:"checkbox",checked:t||!1,onChange:C=>s(C.target.checked),className:"w-4 h-4 text-black rounded border-2 border-zinc-300 focus:ring-0 focus:ring-offset-0",style:{accentColor:"black"}}),x.jsx("label",{className:`text-sm text-black select-none cursor-pointer ${f?"font-medium":""}`,onClick:()=>s(!t),children:v})]}):x.jsxs("div",{className:f?"mb-0":"mb-2",children:[v&&x.jsxs("div",{className:"flex justify-between items-center mb-1",children:[x.jsxs("label",{className:f?Ve.labelSmall:Ve.label,children:[v," ",c&&x.jsx("span",{className:"text-red-500 ml-1",title:"Required",children:"*"})]}),e?.["ui:randomExample"]&&x.jsx("button",{type:"button",onClick:()=>{const C=e["ui:randomExample"];if(Array.isArray(C)&&C.length>0){const z=C.filter(B=>B!==t);if(z.length===0){const B=C[Math.floor(Math.random()*C.length)];s(B)}else{const B=z[Math.floor(Math.random()*z.length)];s(B)}}},className:"text-xs text-zinc-400 hover:text-black hover:underline cursor-pointer transition-colors",title:"Insert random example",children:"Generate Example"})]}),n.enum?x.jsxs("select",{value:t??"",onChange:C=>s(C.target.value),className:f?Ve.inputSmall:Ve.input,children:[!c&&x.jsx("option",{value:"",children:"Select..."}),n.enum.map(C=>x.jsx("option",{value:C,children:C},C))]}):E==="textarea"?x.jsx("textarea",{value:t||"",onChange:C=>s(C.target.value),className:`${f?Ve.inputSmall:Ve.input} min-h-[100px] text-sm`,placeholder:e?.["ui:placeholder"],rows:M.rows||3}):x.jsx("input",{type:E==="password"?"password":b==="number"||b==="integer"?"number":"text",value:t??"",onChange:C=>{const z=C.target.value;s(b==="number"||b==="integer"?z===""?void 0:parseFloat(z):z)},className:f?Ve.inputSmall:Ve.input,placeholder:e?.["ui:placeholder"]}),k&&!f&&x.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]})},ES=n=>{if(n.default!==void 0)return n.default;switch(n.type){case"string":return"";case"number":case"integer":return 0;case"boolean":return!1;case"array":return[];case"object":const e={};return n.properties&&Object.keys(n.properties).forEach(t=>{e[t]=ES(n.properties[t])}),e;default:return null}},a3=({value:n,onChange:e,onBlur:t,className:s})=>{const[l,o]=Q.useState(JSON.stringify(n||{},null,2)),[c,f]=Q.useState(!0),d=Q.useRef(null),h=Q.useRef(!1);Q.useEffect(()=>{h.current||o(JSON.stringify(n||{},null,2))},[n]);const m=v=>{const k=v.trim();return k===""?{}:JSON.parse(k)},y=v=>{const k=v.target.value;o(k);try{const M=m(k);f(!0),e(M)}catch{f(!1)}},b=v=>{h.current=!1;try{const k=m(l);f(!0),l.trim()===""&&o("{}"),t(k)}catch{o(JSON.stringify(n||{},null,2)),f(!0)}};return x.jsx("textarea",{ref:d,value:l,onChange:y,onFocus:()=>h.current=!0,onBlur:b,className:`${s} ${c?"":"border-red-500"}`})},c3=({module:n,updateConfig:e,onRefresh:t})=>{const{moduleTypes:s,loading:l}=zo(),o=n.config||{},c=s.find(h=>h.id===n.type),f=c?.configSchema,d=c?.uiSchema;if(f){const h=m=>{Object.keys(m).forEach(y=>{m[y]!==o[y]&&e(y,m[y])})};return x.jsx(o3,{schema:f,uiSchema:d,formData:o,onChange:h,moduleId:n.id,onActionComplete:t})}return l?x.jsx("div",{className:"p-4 text-center text-gray-500 italic",children:"Loading configuration schema..."}):x.jsxs("div",{className:"space-y-3",children:[x.jsx("p",{className:`${Ve.textSubtle} mb-2`,children:"This module does not have a configuration schema. You can edit the raw JSON configuration below."}),x.jsx(a3,{config:o,updateConfig:(h,m)=>e(h,m)})]})},u3=({className:n,title:e="delete",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsxs("g",{fill:"currentColor",children:[x.jsx("path",{d:"M2.5,5.5V14c0,.828,.672,1.5,1.5,1.5H12c.828,0,1.5-.672,1.5-1.5V5.5",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:".5",x2:"15.5",y1:"3.5",y2:"3.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"8",x2:"8",y1:"7.5",y2:"12.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"10.5",x2:"10.5",y1:"7.5",y2:"12.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"5.5",x2:"5.5",y1:"7.5",y2:"12.5"}),x.jsx("polyline",{fill:"none",points:"5.5 3.5 5.5 .5 10.5 .5 10.5 3.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),f3=({moduleId:n,module:e,setModule:t,onClose:s,onSave:l,onDelete:o})=>{const c=Q.useRef(null),{moduleTypes:f}=zo();return n===null||!e?null:x.jsx("div",{className:Ve.modalBackdrop,onMouseDown:d=>{d.target===d.currentTarget&&(c.current="backdrop")},onClick:d=>{d.target===d.currentTarget&&c.current==="backdrop"&&(l(n,e,!0),s()),c.current=null},children:x.jsxs("div",{className:Ve.modalContent,onClick:d=>d.stopPropagation(),children:[x.jsxs("div",{className:"flex justify-between items-start mb-6",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-black mb-1 ",children:"Edit Module"}),x.jsx("div",{className:"text-gray-600 text-sm ",children:x.jsxs("span",{className:"font-mono",children:["Type: ",f.find(d=>d.id===e?.type)?.label]})})]}),x.jsx(lp,{onClick:()=>{l(n,e,!0),s()}})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("label",{className:Ve.label,children:"Module Name"}),x.jsx("input",{type:"text",value:e?.name||"",onChange:d=>{t(h=>h&&{...h,name:d.target.value})},className:Ve.input})]}),e&&x.jsx(c3,{module:e,updateConfig:(d,h)=>{t(m=>m&&{...m,config:{...m.config,[d]:h}})},onRefresh:async()=>{try{const m=(await(await fetch("/api/settings")).json()).modules?.[n];m&&t(m)}catch(d){console.error("Failed to refresh module:",d)}}}),x.jsxs("div",{className:"mt-8 pt-6 border-t-2 border-gray-300 flex justify-end gap-3",children:[x.jsxs("button",{type:"button",onClick:()=>o(n),className:"px-4 py-2 bg-transparent border-0 rounded-lg transition-all cursor-pointer flex items-center gap-2",style:{color:"var(--color-error-light)"},onMouseEnter:d=>{d.currentTarget.style.color="var(--color-error)"},onMouseLeave:d=>{d.currentTarget.style.color="var(--color-error-light)"},children:[x.jsx(u3,{className:"w-4 h-4"}),"Delete Module"]}),x.jsx(Xi,{onClick:()=>{l(n,e,!0),s()},children:"Save"})]})]})})},d3=({position:n,channel:e,onClose:t,onUpdate:s,timeFormat:l})=>{const o=Q.useRef(null);return n===null?null:x.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onMouseDown:c=>{c.target===c.currentTarget&&(o.current="backdrop")},onClick:c=>{c.target===c.currentTarget&&o.current==="backdrop"&&t(),o.current=null},children:x.jsxs("div",{className:"border-4 rounded-xl p-4 sm:p-6 max-w-md w-full shadow-lg",style:{backgroundColor:"var(--color-bg-card)",borderColor:"var(--color-border-main)"},onClick:c=>c.stopPropagation(),children:[x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsxs("h3",{className:"text-xl font-bold text-black ",children:["Schedule Channel ",n]}),x.jsx(lp,{onClick:t})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx("div",{className:"text-sm text-gray-600 mb-4 ",children:"Add times when this channel should automatically print."}),x.jsxs("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:[(e?.schedule||[]).map((c,f)=>x.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border-2 border-gray-300 hover:border-black",style:{backgroundColor:"var(--color-bg-card)"},children:[x.jsx("span",{className:"text-black  text-lg",children:Ch(c,l)}),x.jsx("button",{onClick:()=>{const d=[...e?.schedule||[]];d.splice(f,1),s(d)},className:"text-red-600 hover:text-red-700 px-2  font-bold cursor-pointer hover-shimmer",children:""})]},f)),(!e?.schedule||e.schedule.length===0)&&x.jsx("div",{className:"text-gray-500 text-center py-4 italic ",children:"No scheduled times."})]}),x.jsx("div",{className:"pt-4 border-t-2 border-gray-300",children:x.jsxs("form",{onSubmit:c=>{c.preventDefault();const f=c.target.elements.timeInput,d=f.value;if(d){const h=e?.schedule||[];if(!h.includes(d)){const m=[...h,d].sort();s(m),f.value=""}}},className:"flex gap-2",children:[x.jsx("input",{name:"timeInput",type:"time",required:!0,className:"flex-1 border-2 border-gray-300 rounded-lg px-3 py-2 text-black focus:outline-none focus:border-black ",style:{backgroundColor:"var(--color-bg-card)"}}),x.jsx(Xi,{type:"submit",children:"Add"})]})})]})]})})},h3=({show:n})=>n?x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white border-4 border-black rounded-xl p-4 sm:p-6 md:p-8 max-w-md w-full text-center shadow-lg",children:[x.jsx("div",{className:"text-6xl mb-4",children:""}),x.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:"Setup Mode Activating..."}),x.jsxs("div",{className:"text-left space-y-4 bg-gray-50 p-4 rounded-lg border-2 border-gray-300 mb-6",children:[x.jsxs("div",{className:"flex gap-3",children:[x.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"1"}),x.jsx("p",{className:"text-black text-sm",children:"Wait for the printer to print setup instructions."})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"2"}),x.jsxs("p",{className:"text-black text-sm",children:["Connect your device to the ",x.jsx("span",{className:"text-black bg-gray-200 px-1 rounded border border-gray-300",children:"PC-1-Setup-XXXX"})," ","WiFi network."]})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"3"}),x.jsxs("p",{className:"text-black text-sm",children:["Navigate to ",x.jsx("span",{className:"text-black bg-gray-200 px-1 rounded border border-gray-300",children:"http://10.42.0.1"})," to configure WiFi."]})]})]}),x.jsx("p",{className:"text-yellow-600 text-xs italic",children:"Note: This page will stop responding as the device switches networks."})]})}):null,p3=({status:n})=>n.message?x.jsx("div",{className:`fixed bottom-8 left-1/2 -translate-x-1/2 z-50 px-6 py-3 rounded-full shadow-xl text-sm font-medium transition-all transform duration-300 ${n.type==="success"?"text-gray-200 shadow-black/50":"text-red-400 shadow-black/50"}`,style:{backgroundColor:"var(--color-bg-dark)"},children:n.message}):null,m3=({setSettings:n,setModules:e,setStatus:t})=>{const s=async()=>{if(confirm("Are you sure you want to reset ALL settings to default? This cannot be undone."))try{const o=await(await fetch("/api/settings/reset",{method:"POST"})).json();n(o.config),e({}),t({type:"success",message:"Settings reset to defaults."})}catch(l){console.error(l),t({type:"error",message:"Failed to reset settings."})}};return x.jsx("button",{onClick:s,className:"text-xs text-red-400 hover:text-red-300 border border-red-800/40 hover:border-red-700/60 rounded px-3 py-1.5 bg-transparent transition-colors cursor-pointer",children:"Reset All Settings to Default"})},g3=({className:n="w-4 h-4"})=>x.jsx("svg",{className:n,fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:x.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),y3=({className:n,title:e="border width",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsxs("g",{fill:"currentColor",children:[x.jsx("rect",{height:"3",width:"15",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:".5",y:"2.5"}),x.jsx("rect",{height:"2",width:"15",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:".5",y:"8.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:".5",x2:"15.5",y1:"13.5",y2:"13.5"})]})]}),b3=({className:n,title:e="preferences",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsxs("g",{fill:"currentColor",children:[x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"12.5",x2:"15.5",y1:"12.5",y2:"12.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"0.5",x2:"3.5",y1:"3.5",y2:"3.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"9.5",x2:"15.5",y1:"3.5",y2:"3.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"0.5",x2:"6.5",y1:"12.5",y2:"12.5"}),x.jsx("rect",{height:"6",width:"3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"3.5",y:"0.5"}),x.jsx("rect",{height:"6",width:"3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"9.5",y:"9.5"})]})]});function x3(){const[n,e]=Q.useState(null),[t,s]=Q.useState(null),{moduleTypes:l}=zo(),[o,c]=Q.useState({timezone:"",latitude:0,longitude:0,city_name:"",time_format:"12h",modules:{},channels:{}}),[f,d]=Q.useState({}),[h,m]=Q.useState({type:"",message:""}),[y,b]=Q.useState(!0),[v,k]=Q.useState(""),[M,E]=Q.useState([]),[C,z]=Q.useState(!1),[B,ee]=Q.useState("channels"),[G,F]=Q.useState(null),[q,se]=Q.useState(!1),[fe,Me]=Q.useState(null),[Ce,Re]=Q.useState(null),[nt,_e]=Q.useState(null),[Ie,I]=Q.useState(!1),te=Q.useRef(null);Q.useEffect(()=>{let O=!0;const L=async()=>{try{const le=await(await fetch("/api/wifi/status")).json();if(s(le),e(le.mode),le.mode==="ap"){O&&b(!1);return}if(O){try{const[re,X]=await Promise.all([fetch("/api/settings").then(de=>de.json()),fetch("/api/modules").then(de=>de.json())]);c(re),d(X.modules||{}),b(!1)}catch(re){console.error("Error fetching data:",re),m({type:"error",message:"Failed to load settings. Is the backend running?"}),b(!1)}O=!1}}catch(V){console.error("Error fetching WiFi status:",V),O&&b(!1)}};L();const Z=setInterval(L,1e4);return()=>{clearInterval(Z),te.current&&clearTimeout(te.current)}},[]);const he=async O=>{if(k(O),O.length<2){E([]),z(!1),te.current&&(clearTimeout(te.current),te.current=null);return}te.current&&clearTimeout(te.current),z(!0),te.current=setTimeout(async()=>{try{console.log("Searching for:",O);const L=new AbortController,Z=setTimeout(()=>L.abort(),15e3),V=await fetch(`/api/location/search?q=${encodeURIComponent(O)}&limit=20&use_api=false`,{signal:L.signal});if(clearTimeout(Z),!V.ok)throw new Error(`HTTP error! status: ${V.status}`);const le=await V.json();console.log("Search results:",le.results?.length||0),le.results?E(le.results):E([])}catch(L){L.name==="AbortError"?console.warn("Location search timed out"):(console.error("Error fetching locations:",L),E([]))}finally{z(!1),te.current=null}},500)},De=async(O,L)=>{try{const Z=await fetch(`/api/channels/${O}/schedule`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!Z.ok)throw new Error("Failed to update schedule");const V=await Z.json();c(le=>({...le,channels:{...le.channels,[O]:V.channel}})),m({type:"success",message:"Schedule updated!"}),setTimeout(()=>m({type:"",message:""}),3e3)}catch(Z){console.error("Error updating schedule:",Z),m({type:"error",message:"Failed to update schedule"})}},ke=async O=>{try{if(!(await fetch(`/action/print-channel/${O}`,{method:"POST"})).ok)throw new Error("Failed to trigger print");m({type:"success",message:`Printing Channel ${O}...`}),setTimeout(()=>m({type:"",message:""}),3e3)}catch(L){console.error("Error triggering print:",L),m({type:"error",message:"Failed to trigger print"})}},N=async O=>{try{const L=await fetch(`/debug/print-module/${O}`,{method:"POST"});if(!L.ok){const V=await L.json().catch(()=>({detail:"Failed to trigger print"}));throw new Error(V.detail||"Failed to trigger print")}const Z=await L.json();m({type:"success",message:Z.message||"Printing module..."}),setTimeout(()=>m({type:"",message:""}),3e3)}catch(L){console.error("Error triggering module print:",L),m({type:"error",message:L.message||"Failed to trigger print"}),setTimeout(()=>m({type:"",message:""}),3e3)}},Y=async O=>{c(L=>({...L,...O}));try{const L={...o,channels:o.channels||{},modules:f,...O};if(console.log("Auto-saving settings:",O),!(await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).ok)throw new Error("Failed to save settings")}catch(L){console.error("Error auto-saving settings:",L),m({type:"error",message:"Failed to save settings automatically."})}},ie=O=>{const Z={city_name:O.city||O.name,state:O.state,latitude:O.latitude,longitude:O.longitude,timezone:O.timezone};k(""),E([]),Y(Z)},oe=O=>({news:{news_api_key:""},rss:{rss_feeds:[]},weather:{},email:{email_host:"imap.gmail.com",email_user:"",email_password:"",polling_interval:60},games:{difficulty:"medium"},astronomy:{},calendar:{ical_sources:[],days_to_show:2},webhook:{url:"",method:"GET",headers:{},json_path:""},text:{content:""}})[O]||{},be=async(O,L="")=>{try{const Z=await fetch("/api/modules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:O,name:L||`${l.find(le=>le.id===O)?.label||O}`,config:oe(O)})});if(!Z.ok)throw new Error("Failed to create module");const V=await Z.json();return d(le=>({...le,[V.module.id]:V.module})),m({type:"success",message:"Module created successfully!"}),setTimeout(()=>m({type:"",message:""}),3e3),V.module}catch(Z){return console.error("Error creating module:",Z),m({type:"error",message:"Failed to create module"}),null}},ve=async(O,L)=>{try{const Z=f[O];if(!Z){console.error(`[UPDATE] Module ${O} not found`);return}if(L.type&&L.type!==Z.type){console.error(`[UPDATE] Type mismatch! Target module is ${Z.type}, but update has type ${L.type}. Rejecting update.`);return}if(L.id&&L.id!==O){console.error(`[UPDATE] ID mismatch! Target module ID is ${O}, but update has ID ${L.id}. Rejecting update.`);return}if(L.config){const X={...L.config};Z.type==="news"?(X.rss_feeds&&delete X.rss_feeds,delete X.enable_newsapi):Z.type==="rss"&&(X.news_api_key&&delete X.news_api_key,delete X.enable_newsapi),L.config=X}d(X=>{const de=X[O];return de?{...X,[O]:{...de,...L}}:X});const V={...Z,...L};V.id=O;const le=await fetch(`/api/modules/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!le.ok)throw new Error("Failed to update module");const re=await le.json();d(X=>({...X,[O]:re.module})),m({type:"success",message:"Module updated successfully!"}),setTimeout(()=>m({type:"",message:""}),3e3)}catch(Z){console.error("Error updating module:",Z),m({type:"error",message:"Failed to update module"});const V=await fetch(`/api/modules/${O}`);if(V.ok){const le=await V.json();d(re=>({...re,[O]:le.module}))}}},Te=async O=>{if(confirm("Are you sure you want to delete this module?"))try{const L=[];for(const[V,le]of Object.entries(o.channels))le.modules&&le.modules.some(re=>re.module_id===O)&&L.push(V);for(const V of L)await fetch(`/api/channels/${V}/modules/${O}`,{method:"DELETE"});const Z=await fetch(`/api/modules/${O}`,{method:"DELETE"});if(!Z.ok){const V=await Z.json();throw new Error(V.detail||"Failed to delete module")}d(V=>{const le={...V};return delete le[O],le}),c(V=>{const le={...V.channels};for(const re in le)le[re].modules&&(le[re].modules=le[re].modules.filter(X=>X.module_id!==O));return{...V,channels:le}}),m({type:"success",message:"Module deleted successfully!"}),setTimeout(()=>m({type:"",message:""}),3e3),fe===O&&(Me(null),Re(null))}catch(L){console.error("Error deleting module:",L),m({type:"error",message:L.message||"Failed to delete module"})}},Fe=async(O,L,Z=null,V={})=>{try{V?.optimistic&&c(X=>{const de={...X.channels||{}},je=de[O]?{...de[O]}:{modules:[]},ye=(je.modules||[]).filter($t=>$t.module_id!==L).sort(($t,cn)=>$t.order-cn.order),ct=Z===null?ye.length:Math.max(0,Math.min(Z,ye.length)),lt=[...ye];return lt.splice(ct,0,{module_id:L,order:ct}),je.modules=lt.map(($t,cn)=>({...$t,order:cn})),de[O]=je,{...X,channels:de}});const le=await fetch(`/api/channels/${O}/modules?module_id=${L}${Z!==null?`&order=${Z}`:""}`,{method:"POST"});if(!le.ok)throw new Error("Failed to assign module");const re=await le.json();return c(X=>({...X,channels:{...X.channels,[O]:re.channel}})),V?.silent||(m({type:"success",message:"Module assigned to channel!"}),setTimeout(()=>m({type:"",message:""}),3e3)),re.channel}catch(le){return console.error("Error assigning module:",le),m({type:"error",message:le.message||"Failed to assign module"}),null}},Ge=async(O,L,Z={})=>{try{Z?.optimistic&&c(re=>{const X=re.channels?.[O];if(!X||!X.modules)return re;const de=X.modules.filter(je=>je.module_id!==L).sort((je,ye)=>je.order-ye.order).map((je,ye)=>({...je,order:ye}));return{...re,channels:{...re.channels,[O]:{...X,modules:de}}}});const V=await fetch(`/api/channels/${O}/modules/${L}`,{method:"DELETE"});if(!V.ok)throw new Error("Failed to remove module");const le=await V.json();return c(re=>({...re,channels:{...re.channels,[O]:le.channel}})),Z?.silent||(m({type:"success",message:"Module removed from channel!"}),setTimeout(()=>m({type:"",message:""}),3e3)),le.channel}catch(V){return console.error("Error removing module:",V),m({type:"error",message:V.message||"Failed to remove module"}),null}},Zt=async(O,L,Z={})=>{try{Z?.optimistic&&c(re=>{const X=re.channels?.[O];if(!X||!X.modules)return re;const de=X.modules.map(Nt=>Nt.module_id),je=new Set(de),ye=L||{},ct=Object.entries(ye).sort((Nt,ii)=>Nt[1]-ii[1]).map(([Nt])=>Nt).filter(Nt=>je.has(Nt)),lt=de.filter(Nt=>!Object.prototype.hasOwnProperty.call(ye,Nt)),cn=[...ct,...lt].map((Nt,ii)=>({module_id:Nt,order:ii}));return{...re,channels:{...re.channels,[O]:{...X,modules:cn}}}});const V=await fetch(`/api/channels/${O}/modules/reorder`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!V.ok)throw new Error("Failed to reorder modules");const le=await V.json();return c(re=>({...re,channels:{...re.channels,[O]:le.channel}})),le.channel}catch(V){return console.error("Error reordering modules:",V),m({type:"error",message:"Failed to reorder modules"}),null}},tt=(O,L,Z)=>{const V=o.channels[O];if(!V||!V.modules)return;const le=[...V.modules].sort((ye,ct)=>ye.order-ct.order),re=le.findIndex(ye=>ye.module_id===L);if(re===-1)return;const X=Z==="up"?re-1:re+1;if(X<0||X>=le.length)return;const de=le[re].order;le[re].order=le[X].order,le[X].order=de;const je={};le.forEach(ye=>{je[ye.module_id]=ye.order}),Zt(O,je,{optimistic:!0})},$n=(O,L)=>{const Z=o.channels[O],V=o.channels[L],le={...o.channels,[O]:V||{modules:[]},[L]:Z||{modules:[]}};Y({channels:le})},P=()=>{e("client"),window.location.reload()},H=async()=>{try{await fetch("/api/wifi/ap-mode",{method:"POST"}),m({type:"success",message:"AP mode activating..."}),I(!0)}catch{m({type:"error",message:"Failed to activate AP mode"})}};return y?x.jsx("div",{className:"max-w-[800px] w-full p-8 text-center",children:"Loading settings..."}):n==="ap"?x.jsx(WT,{onComplete:P}):x.jsxs("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 min-h-screen",style:{backgroundColor:"var(--color-bg-base)",color:"var(--color-text-main)"},children:[x.jsx("div",{className:"mb-8 pt-4 pb-2",children:x.jsx("h1",{className:"text-3xl sm:text-4xl leading-none font-bold tracking-tighter",style:{color:"var(--color-text-main)"},children:"PC-1 SETTINGS"})}),x.jsxs("div",{className:"flex gap-2 mb-8 border-b-2 border-dashed",style:{borderColor:"var(--color-border-main)"},children:[x.jsxs("button",{type:"button",onClick:()=>ee("general"),className:`px-6 py-2 font-bold tracking-wider transition-all text-sm flex items-center gap-2 ${B==="general"?"border-b-2 translate-y-[2px]":"border-b-2 border-transparent"}`,style:B==="general"?{borderColor:"var(--color-border-main)",color:"var(--color-text-main)"}:{color:"var(--color-text-muted)"},onMouseEnter:O=>{B!=="general"&&(O.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:O=>{B!=="general"&&(O.currentTarget.style.color="var(--color-text-muted)")},children:[x.jsx(b3,{className:"w-4 h-4"}),"GENERAL"]}),x.jsxs("button",{type:"button",onClick:()=>ee("channels"),className:`px-6 py-2 font-bold tracking-wider transition-all text-sm flex items-center gap-2 ${B==="channels"?"border-b-2 translate-y-[2px]":"border-b-2 border-transparent"}`,style:B==="channels"?{borderColor:"var(--color-border-main)",color:"var(--color-text-main)"}:{color:"var(--color-text-muted)"},onMouseEnter:O=>{B!=="channels"&&(O.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:O=>{B!=="channels"&&(O.currentTarget.style.color="var(--color-text-muted)")},children:[x.jsx(y3,{className:"w-4 h-4"}),"CHANNELS"]})]}),x.jsxs("div",{className:"contents",children:[B==="general"&&x.jsxs(x.Fragment,{children:[x.jsx(eE,{searchTerm:v,searchResults:M,isSearching:C,handleSearch:he,selectLocation:ie,settings:o,saveGlobalSettings:Y,triggerAPMode:H,wifiStatus:t}),x.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[x.jsxs("a",{href:"https://github.com/travmiller/paper-console",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-gray-600 hover:text-black transition-colors",children:[x.jsx(g3,{className:"w-5 h-5"}),x.jsx("span",{className:"text-sm font-mono",children:"paper-console"})]}),x.jsx(m3,{setSettings:c,setModules:d,setStatus:m})]})]}),B==="channels"&&x.jsx(rE,{settings:o,modules:f,triggerChannelPrint:ke,triggerModulePrint:N,setShowScheduleModal:_e,swapChannels:$n,setShowEditModuleModal:Me,setEditingModule:Re,moveModuleInChannel:tt,assignModuleToChannel:Fe,reorderChannelModules:Zt,removeModuleFromChannel:Ge,setShowAddModuleModal:F,setShowCreateUnassignedModal:se,wifiStatus:t}),x.jsx(W0,{channelPosition:G,onClose:()=>F(null),onCreateModule:be,onAssignModule:Fe,onOpenEdit:(O,L)=>{Me(O),Re(L)}}),q&&x.jsx(W0,{channelPosition:null,isUnassigned:!0,onClose:()=>se(!1),onCreateModule:async O=>{const L=await be(O);return L&&(se(!1),Me(L.id),Re(JSON.parse(JSON.stringify(L)))),L},onAssignModule:async()=>{},onOpenEdit:(O,L)=>{Me(O),Re(L)}}),x.jsx(f3,{moduleId:fe,module:Ce,setModule:Re,onClose:()=>{Me(null),Re(null)},onSave:ve,onDelete:Te}),x.jsx(d3,{position:nt,channel:o.channels[nt]||{},onClose:()=>_e(null),onUpdate:O=>De(nt,O),timeFormat:o.time_format}),x.jsx(h3,{show:Ie}),x.jsx(p3,{status:h})]})]})}ZT.createRoot(document.getElementById("root")).render(x.jsx(Mr.StrictMode,{children:x.jsx(x3,{})}));
