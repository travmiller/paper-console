(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=t(l);fetch(l.href,o)}})();function lp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hd={exports:{}},to={};var Y0;function KT(){if(Y0)return to;Y0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,o){var c=null;if(o!==void 0&&(c=""+o),l.key!==void 0&&(c=""+l.key),"key"in l){o={};for(var f in l)f!=="key"&&(o[f]=l[f])}else o=l;return l=o.ref,{$$typeof:n,type:s,key:c,ref:l!==void 0?l:null,props:o}}return to.Fragment=e,to.jsx=t,to.jsxs=t,to}var K0;function PT(){return K0||(K0=1,Hd.exports=KT()),Hd.exports}var x=PT(),Ud={exports:{}},Ee={};var P0;function JT(){if(P0)return Ee;P0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function v(A){return A===null||typeof A!="object"?null:(A=b&&A[b]||A["@@iterator"],typeof A=="function"?A:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function M(A,U,re){this.props=A,this.context=U,this.refs=C,this.updater=re||k}M.prototype.isReactComponent={},M.prototype.setState=function(A,U){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,U,"setState")},M.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function L(){}L.prototype=M.prototype;function V(A,U,re){this.props=A,this.context=U,this.refs=C,this.updater=re||k}var W=V.prototype=new L;W.constructor=V,E(W,M.prototype),W.isPureReactComponent=!0;var $=Array.isArray;function Y(){}var I={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function ue(A,U,re){var le=re.ref;return{$$typeof:n,type:A,key:U,ref:le!==void 0?le:null,props:re}}function je(A,U){return ue(A.type,U,A.props)}function st(A){return typeof A=="object"&&A!==null&&A.$$typeof===n}function Le(A){var U={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(re){return U[re]})}var ft=/\/+/g;function Ve(A,U){return typeof A=="object"&&A!==null&&A.key!=null?Le(""+A.key):U.toString(36)}function Te(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(Y,Y):(A.status="pending",A.then(function(U){A.status==="pending"&&(A.status="fulfilled",A.value=U)},function(U){A.status==="pending"&&(A.status="rejected",A.reason=U)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function H(A,U,re,le,ge){var be=typeof A;(be==="undefined"||be==="boolean")&&(A=null);var Me=!1;if(A===null)Me=!0;else switch(be){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(A.$$typeof){case n:case e:Me=!0;break;case g:return Me=A._init,H(Me(A._payload),U,re,le,ge)}}if(Me)return ge=ge(A),Me=le===""?"."+Ve(A,0):le,$(ge)?(re="",Me!=null&&(re=Me.replace(ft,"$&/")+"/"),H(ge,U,re,"",function(ae){return ae})):ge!=null&&(st(ge)&&(ge=je(ge,re+(ge.key==null||A&&A.key===ge.key?"":(""+ge.key).replace(ft,"$&/")+"/")+Me)),U.push(ge)),1;Me=0;var at=le===""?".":le+":";if($(A))for(var qe=0;qe<A.length;qe++)le=A[qe],be=at+Ve(le,qe),Me+=H(le,U,re,be,ge);else if(qe=v(A),typeof qe=="function")for(A=qe.call(A),qe=0;!(le=A.next()).done;)le=le.value,be=at+Ve(le,qe++),Me+=H(le,U,re,be,ge);else if(be==="object"){if(typeof A.then=="function")return H(Te(A),U,re,le,ge);throw U=String(A),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return Me}function Z(A,U,re){if(A==null)return A;var le=[],ge=0;return H(A,le,"","",function(be){return U.call(re,be,ge++)}),le}function pe(A){if(A._status===-1){var U=A._result;U=U(),U.then(function(re){(A._status===0||A._status===-1)&&(A._status=1,A._result=re)},function(re){(A._status===0||A._status===-1)&&(A._status=2,A._result=re)}),A._status===-1&&(A._status=0,A._result=U)}if(A._status===1)return A._result.default;throw A._result}var Ae=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},ze={map:Z,forEach:function(A,U,re){Z(A,function(){U.apply(this,arguments)},re)},count:function(A){var U=0;return Z(A,function(){U++}),U},toArray:function(A){return Z(A,function(U){return U})||[]},only:function(A){if(!st(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return Ee.Activity=y,Ee.Children=ze,Ee.Component=M,Ee.Fragment=t,Ee.Profiler=l,Ee.PureComponent=V,Ee.StrictMode=s,Ee.Suspense=d,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(A){return I.H.useMemoCache(A)}},Ee.cache=function(A){return function(){return A.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(A,U,re){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var le=E({},A.props),ge=A.key;if(U!=null)for(be in U.key!==void 0&&(ge=""+U.key),U)!se.call(U,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&U.ref===void 0||(le[be]=U[be]);var be=arguments.length-2;if(be===1)le.children=re;else if(1<be){for(var Me=Array(be),at=0;at<be;at++)Me[at]=arguments[at+2];le.children=Me}return ue(A.type,ge,le)},Ee.createContext=function(A){return A={$$typeof:c,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:o,_context:A},A},Ee.createElement=function(A,U,re){var le,ge={},be=null;if(U!=null)for(le in U.key!==void 0&&(be=""+U.key),U)se.call(U,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ge[le]=U[le]);var Me=arguments.length-2;if(Me===1)ge.children=re;else if(1<Me){for(var at=Array(Me),qe=0;qe<Me;qe++)at[qe]=arguments[qe+2];ge.children=at}if(A&&A.defaultProps)for(le in Me=A.defaultProps,Me)ge[le]===void 0&&(ge[le]=Me[le]);return ue(A,be,ge)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(A){return{$$typeof:f,render:A}},Ee.isValidElement=st,Ee.lazy=function(A){return{$$typeof:g,_payload:{_status:-1,_result:A},_init:pe}},Ee.memo=function(A,U){return{$$typeof:p,type:A,compare:U===void 0?null:U}},Ee.startTransition=function(A){var U=I.T,re={};I.T=re;try{var le=A(),ge=I.S;ge!==null&&ge(re,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Y,Ae)}catch(be){Ae(be)}finally{U!==null&&re.types!==null&&(U.types=re.types),I.T=U}},Ee.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ee.use=function(A){return I.H.use(A)},Ee.useActionState=function(A,U,re){return I.H.useActionState(A,U,re)},Ee.useCallback=function(A,U){return I.H.useCallback(A,U)},Ee.useContext=function(A){return I.H.useContext(A)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(A,U){return I.H.useDeferredValue(A,U)},Ee.useEffect=function(A,U){return I.H.useEffect(A,U)},Ee.useEffectEvent=function(A){return I.H.useEffectEvent(A)},Ee.useId=function(){return I.H.useId()},Ee.useImperativeHandle=function(A,U,re){return I.H.useImperativeHandle(A,U,re)},Ee.useInsertionEffect=function(A,U){return I.H.useInsertionEffect(A,U)},Ee.useLayoutEffect=function(A,U){return I.H.useLayoutEffect(A,U)},Ee.useMemo=function(A,U){return I.H.useMemo(A,U)},Ee.useOptimistic=function(A,U){return I.H.useOptimistic(A,U)},Ee.useReducer=function(A,U,re){return I.H.useReducer(A,U,re)},Ee.useRef=function(A){return I.H.useRef(A)},Ee.useState=function(A){return I.H.useState(A)},Ee.useSyncExternalStore=function(A,U,re){return I.H.useSyncExternalStore(A,U,re)},Ee.useTransition=function(){return I.H.useTransition()},Ee.version="19.2.1",Ee}var J0;function Ro(){return J0||(J0=1,Ud.exports=JT()),Ud.exports}var Q=Ro();const Zn=lp(Q);var Id={exports:{}},no={},Vd={exports:{}},qd={};var F0;function FT(){return F0||(F0=1,(function(n){function e(H,Z){var pe=H.length;H.push(Z);e:for(;0<pe;){var Ae=pe-1>>>1,ze=H[Ae];if(0<l(ze,Z))H[Ae]=Z,H[pe]=ze,pe=Ae;else break e}}function t(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var Z=H[0],pe=H.pop();if(pe!==Z){H[0]=pe;e:for(var Ae=0,ze=H.length,A=ze>>>1;Ae<A;){var U=2*(Ae+1)-1,re=H[U],le=U+1,ge=H[le];if(0>l(re,pe))le<ze&&0>l(ge,re)?(H[Ae]=ge,H[le]=pe,Ae=le):(H[Ae]=re,H[U]=pe,Ae=U);else if(le<ze&&0>l(ge,pe))H[Ae]=ge,H[le]=pe,Ae=le;else break e}}return Z}function l(H,Z){var pe=H.sortIndex-Z.sortIndex;return pe!==0?pe:H.id-Z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var d=[],p=[],g=1,y=null,b=3,v=!1,k=!1,E=!1,C=!1,M=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function W(H){for(var Z=t(p);Z!==null;){if(Z.callback===null)s(p);else if(Z.startTime<=H)s(p),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=t(p)}}function $(H){if(E=!1,W(H),!k)if(t(d)!==null)k=!0,Y||(Y=!0,Le());else{var Z=t(p);Z!==null&&Te($,Z.startTime-H)}}var Y=!1,I=-1,se=5,ue=-1;function je(){return C?!0:!(n.unstable_now()-ue<se)}function st(){if(C=!1,Y){var H=n.unstable_now();ue=H;var Z=!0;try{e:{k=!1,E&&(E=!1,L(I),I=-1),v=!0;var pe=b;try{t:{for(W(H),y=t(d);y!==null&&!(y.expirationTime>H&&je());){var Ae=y.callback;if(typeof Ae=="function"){y.callback=null,b=y.priorityLevel;var ze=Ae(y.expirationTime<=H);if(H=n.unstable_now(),typeof ze=="function"){y.callback=ze,W(H),Z=!0;break t}y===t(d)&&s(d),W(H)}else s(d);y=t(d)}if(y!==null)Z=!0;else{var A=t(p);A!==null&&Te($,A.startTime-H),Z=!1}}break e}finally{y=null,b=pe,v=!1}Z=void 0}}finally{Z?Le():Y=!1}}}var Le;if(typeof V=="function")Le=function(){V(st)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,Ve=ft.port2;ft.port1.onmessage=st,Le=function(){Ve.postMessage(null)}}else Le=function(){M(st,0)};function Te(H,Z){I=M(function(){H(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(H){switch(b){case 1:case 2:case 3:var Z=3;break;default:Z=b}var pe=b;b=Z;try{return H()}finally{b=pe}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var pe=b;b=H;try{return Z()}finally{b=pe}},n.unstable_scheduleCallback=function(H,Z,pe){var Ae=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Ae+pe:Ae):pe=Ae,H){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=pe+ze,H={id:g++,callback:Z,priorityLevel:H,startTime:pe,expirationTime:ze,sortIndex:-1},pe>Ae?(H.sortIndex=pe,e(p,H),t(d)===null&&H===t(p)&&(E?(L(I),I=-1):E=!0,Te($,pe-Ae))):(H.sortIndex=ze,e(d,H),k||v||(k=!0,Y||(Y=!0,Le()))),H},n.unstable_shouldYield=je,n.unstable_wrapCallback=function(H){var Z=b;return function(){var pe=b;b=Z;try{return H.apply(this,arguments)}finally{b=pe}}}})(qd)),qd}var X0;function XT(){return X0||(X0=1,Vd.exports=FT()),Vd.exports}var $d={exports:{}},Kt={};var Q0;function QT(){if(Q0)return Kt;Q0=1;var n=Ro();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Kt.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(d,p,null,g)},Kt.flushSync=function(d){var p=c.T,g=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=p,s.p=g,s.d.f()}},Kt.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(d,p))},Kt.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Kt.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=f(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,v=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:v}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:v,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Kt.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=f(p.as,p.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(d)},Kt.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=f(g,p.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Kt.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=f(p.as,p.crossOrigin);s.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(d)},Kt.requestFormReset=function(d){s.d.r(d)},Kt.unstable_batchedUpdates=function(d,p){return d(p)},Kt.useFormState=function(d,p,g){return c.H.useFormState(d,p,g)},Kt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Kt.version="19.2.1",Kt}var Z0;function Bx(){if(Z0)return $d.exports;Z0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$d.exports=QT(),$d.exports}var W0;function ZT(){if(W0)return no;W0=1;var n=XT(),e=Ro(),t=Bx();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function f(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(s(188))}function p(r){var i=r.alternate;if(!i){if(i=o(r),i===null)throw Error(s(188));return i!==r?null:r}for(var a=r,u=i;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(u=h.return,u!==null){a=u;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return d(h),r;if(m===u)return d(h),i;m=m.sibling}throw Error(s(188))}if(a.return!==u.return)a=h,u=m;else{for(var S=!1,T=h.child;T;){if(T===a){S=!0,a=h,u=m;break}if(T===u){S=!0,u=h,a=m;break}T=T.sibling}if(!S){for(T=m.child;T;){if(T===a){S=!0,a=m,u=h;break}if(T===u){S=!0,u=m,a=h;break}T=T.sibling}if(!S)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?r:i}function g(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=g(r),i!==null)return i;r=r.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),V=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),je=Symbol.for("react.memo_cache_sentinel"),st=Symbol.iterator;function Le(r){return r===null||typeof r!="object"?null:(r=st&&r[st]||r["@@iterator"],typeof r=="function"?r:null)}var ft=Symbol.for("react.client.reference");function Ve(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ft?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case E:return"Fragment";case M:return"Profiler";case C:return"StrictMode";case $:return"Suspense";case Y:return"SuspenseList";case ue:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case V:return r.displayName||"Context";case L:return(r._context.displayName||"Context")+".Consumer";case W:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return i=r.displayName||null,i!==null?i:Ve(r.type)||"Memo";case se:i=r._payload,r=r._init;try{return Ve(r(i))}catch{}}return null}var Te=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Ae=[],ze=-1;function A(r){return{current:r}}function U(r){0>ze||(r.current=Ae[ze],Ae[ze]=null,ze--)}function re(r,i){ze++,Ae[ze]=r.current,r.current=i}var le=A(null),ge=A(null),be=A(null),Me=A(null);function at(r,i){switch(re(be,i),re(ge,r),re(le,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?p0(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=p0(i),r=m0(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}U(le),re(le,r)}function qe(){U(le),U(ge),U(be)}function ae(r){r.memoizedState!==null&&re(Me,r);var i=le.current,a=m0(i,r.type);i!==a&&(re(ge,r),re(le,a))}function Se(r){ge.current===r&&(U(le),U(ge)),Me.current===r&&(U(Me),Ql._currentValue=pe)}var Re,$e;function w(r){if(Re===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Re=i&&i[1]||"",$e=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Re+r+$e}var j=!1;function P(r,i){if(!r||j)return"";j=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(B){var _=B}Reflect.construct(r,[],K)}else{try{K.call()}catch(B){_=B}r.call(K.prototype)}}else{try{throw Error()}catch(B){_=B}(K=r())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(B){if(B&&_&&typeof B.stack=="string")return[B.stack,_.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),S=m[0],T=m[1];if(S&&T){var N=S.split(`
`),z=T.split(`
`);for(h=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(u===N.length||h===z.length)for(u=N.length-1,h=z.length-1;1<=u&&0<=h&&N[u]!==z[h];)h--;for(;1<=u&&0<=h;u--,h--)if(N[u]!==z[h]){if(u!==1||h!==1)do if(u--,h--,0>h||N[u]!==z[h]){var q=`
`+N[u].replace(" at new "," at ");return r.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",r.displayName)),q}while(1<=u&&0<=h);break}}}finally{j=!1,Error.prepareStackTrace=a}return(a=r?r.displayName||r.name:"")?w(a):""}function J(r,i){switch(r.tag){case 26:case 27:case 5:return w(r.type);case 16:return w("Lazy");case 13:return r.child!==i&&i!==null?w("Suspense Fallback"):w("Suspense");case 19:return w("SuspenseList");case 0:case 15:return P(r.type,!1);case 11:return P(r.type.render,!1);case 1:return P(r.type,!0);case 31:return w("Activity");default:return""}}function ne(r){try{var i="",a=null;do i+=J(r,a),a=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var F=Object.prototype.hasOwnProperty,fe=n.unstable_scheduleCallback,ce=n.unstable_cancelCallback,te=n.unstable_shouldYield,he=n.unstable_requestPaint,we=n.unstable_now,Je=n.unstable_getCurrentPriorityLevel,bt=n.unstable_ImmediatePriority,Xt=n.unstable_UserBlockingPriority,Dt=n.unstable_NormalPriority,al=n.unstable_LowPriority,Jp=n.unstable_IdlePriority,NS=n.log,AS=n.unstable_setDisableYieldValue,cl=null,fn=null;function Nr(r){if(typeof NS=="function"&&AS(r),fn&&typeof fn.setStrictMode=="function")try{fn.setStrictMode(cl,r)}catch{}}var dn=Math.clz32?Math.clz32:jS,OS=Math.log,DS=Math.LN2;function jS(r){return r>>>=0,r===0?32:31-(OS(r)/DS|0)|0}var Uo=256,Io=262144,Vo=4194304;function Ss(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function qo(r,i,a){var u=r.pendingLanes;if(u===0)return 0;var h=0,m=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var T=u&134217727;return T!==0?(u=T&~m,u!==0?h=Ss(u):(S&=T,S!==0?h=Ss(S):a||(a=T&~r,a!==0&&(h=Ss(a))))):(T=u&~m,T!==0?h=Ss(T):S!==0?h=Ss(S):a||(a=u&~r,a!==0&&(h=Ss(a)))),h===0?0:i!==0&&i!==h&&(i&m)===0&&(m=h&-h,a=i&-i,m>=a||m===32&&(a&4194048)!==0)?i:h}function ul(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function RS(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fp(){var r=Vo;return Vo<<=1,(Vo&62914560)===0&&(Vo=4194304),r}function Cu(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function fl(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function zS(r,i,a,u,h,m){var S=r.pendingLanes;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=a,r.entangledLanes&=a,r.errorRecoveryDisabledLanes&=a,r.shellSuspendCounter=0;var T=r.entanglements,N=r.expirationTimes,z=r.hiddenUpdates;for(a=S&~a;0<a;){var q=31-dn(a),K=1<<q;T[q]=0,N[q]=-1;var _=z[q];if(_!==null)for(z[q]=null,q=0;q<_.length;q++){var B=_[q];B!==null&&(B.lane&=-536870913)}a&=~K}u!==0&&Xp(r,u,0),m!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=m&~(S&~i))}function Xp(r,i,a){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-dn(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|a&261930}function Qp(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var u=31-dn(a),h=1<<u;h&i|r[u]&i&&(r[u]|=i),a&=~h}}function Zp(r,i){var a=i&-i;return a=(a&42)!==0?1:Mu(a),(a&(r.suspendedLanes|i))!==0?0:a}function Mu(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function wu(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Wp(){var r=Z.p;return r!==0?r:(r=window.event,r===void 0?32:H0(r.type))}function em(r,i){var a=Z.p;try{return Z.p=r,i()}finally{Z.p=a}}var Ar=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Ar,tn="__reactProps$"+Ar,li="__reactContainer$"+Ar,Nu="__reactEvents$"+Ar,LS="__reactListeners$"+Ar,_S="__reactHandles$"+Ar,tm="__reactResources$"+Ar,dl="__reactMarker$"+Ar;function Au(r){delete r[Bt],delete r[tn],delete r[Nu],delete r[LS],delete r[_S]}function oi(r){var i=r[Bt];if(i)return i;for(var a=r.parentNode;a;){if(i=a[li]||a[Bt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=k0(r);r!==null;){if(a=r[Bt])return a;r=k0(r)}return i}r=a,a=r.parentNode}return null}function ai(r){if(r=r[Bt]||r[li]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function hl(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function ci(r){var i=r[tm];return i||(i=r[tm]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function jt(r){r[dl]=!0}var nm=new Set,rm={};function ks(r,i){ui(r,i),ui(r+"Capture",i)}function ui(r,i){for(rm[r]=i,r=0;r<i.length;r++)nm.add(i[r])}var BS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sm={},im={};function HS(r){return F.call(im,r)?!0:F.call(sm,r)?!1:BS.test(r)?im[r]=!0:(sm[r]=!0,!1)}function $o(r,i,a){if(HS(i))if(a===null)r.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+a)}}function Go(r,i,a){if(a===null)r.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+a)}}function tr(r,i,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttributeNS(i,a,""+u)}}function Tn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function lm(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function US(r,i,a){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var h=u.get,m=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return h.call(this)},set:function(S){a=""+S,m.call(this,S)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Ou(r){if(!r._valueTracker){var i=lm(r)?"checked":"value";r._valueTracker=US(r,i,""+r[i])}}function om(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return r&&(u=lm(r)?r.checked?"true":"false":r.value),r=u,r!==a?(i.setValue(r),!0):!1}function Yo(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var IS=/[\n"\\]/g;function En(r){return r.replace(IS,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Du(r,i,a,u,h,m,S,T){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),i!=null?S==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Tn(i)):r.value!==""+Tn(i)&&(r.value=""+Tn(i)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),i!=null?ju(r,S,Tn(i)):a!=null?ju(r,S,Tn(a)):u!=null&&r.removeAttribute("value"),h==null&&m!=null&&(r.defaultChecked=!!m),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.name=""+Tn(T):r.removeAttribute("name")}function am(r,i,a,u,h,m,S,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){Ou(r);return}a=a!=null?""+Tn(a):"",i=i!=null?""+Tn(i):a,T||i===r.value||(r.value=i),r.defaultValue=i}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=T?r.checked:!!u,r.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S),Ou(r)}function ju(r,i,a){i==="number"&&Yo(r.ownerDocument)===r||r.defaultValue===""+a||(r.defaultValue=""+a)}function fi(r,i,a,u){if(r=r.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<r.length;a++)h=i.hasOwnProperty("$"+r[a].value),r[a].selected!==h&&(r[a].selected=h),h&&u&&(r[a].defaultSelected=!0)}else{for(a=""+Tn(a),i=null,h=0;h<r.length;h++){if(r[h].value===a){r[h].selected=!0,u&&(r[h].defaultSelected=!0);return}i!==null||r[h].disabled||(i=r[h])}i!==null&&(i.selected=!0)}}function cm(r,i,a){if(i!=null&&(i=""+Tn(i),i!==r.value&&(r.value=i),a==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=a!=null?""+Tn(a):""}function um(r,i,a,u){if(i==null){if(u!=null){if(a!=null)throw Error(s(92));if(Te(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),i=a}a=Tn(i),r.defaultValue=a,u=r.textContent,u===a&&u!==""&&u!==null&&(r.value=u),Ou(r)}function di(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var VS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fm(r,i,a){var u=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,a):typeof a!="number"||a===0||VS.has(i)?i==="float"?r.cssFloat=a:r[i]=(""+a).trim():r[i]=a+"px"}function dm(r,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var h in i)u=i[h],i.hasOwnProperty(h)&&a[h]!==u&&fm(r,h,u)}else for(var m in i)i.hasOwnProperty(m)&&fm(r,m,i[m])}function Ru(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$S=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(r){return $S.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function nr(){}var zu=null;function Lu(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var hi=null,pi=null;function hm(r){var i=ai(r);if(i&&(r=i.stateNode)){var a=r[tn]||null;e:switch(r=i.stateNode,i.type){case"input":if(Du(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+En(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==r&&u.form===r.form){var h=u[tn]||null;if(!h)throw Error(s(90));Du(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)u=a[i],u.form===r.form&&om(u)}break e;case"textarea":cm(r,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&fi(r,!!a.multiple,i,!1)}}}var _u=!1;function pm(r,i,a){if(_u)return r(i,a);_u=!0;try{var u=r(i);return u}finally{if(_u=!1,(hi!==null||pi!==null)&&(Ra(),hi&&(i=hi,r=pi,pi=hi=null,hm(i),r)))for(i=0;i<r.length;i++)hm(r[i])}}function pl(r,i){var a=r.stateNode;if(a===null)return null;var u=a[tn]||null;if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bu=!1;if(rr)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){Bu=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{Bu=!1}var Or=null,Hu=null,Po=null;function mm(){if(Po)return Po;var r,i=Hu,a=i.length,u,h="value"in Or?Or.value:Or.textContent,m=h.length;for(r=0;r<a&&i[r]===h[r];r++);var S=a-r;for(u=1;u<=S&&i[a-u]===h[m-u];u++);return Po=h.slice(r,1<u?1-u:void 0)}function Jo(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Fo(){return!0}function gm(){return!1}function nn(r){function i(a,u,h,m,S){this._reactName=a,this._targetInst=h,this.type=u,this.nativeEvent=m,this.target=S,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(a=r[T],this[T]=a?a(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Fo:gm,this.isPropagationStopped=gm,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),i}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xo=nn(Ts),gl=y({},Ts,{view:0,detail:0}),GS=nn(gl),Uu,Iu,yl,Qo=y({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==yl&&(yl&&r.type==="mousemove"?(Uu=r.screenX-yl.screenX,Iu=r.screenY-yl.screenY):Iu=Uu=0,yl=r),Uu)},movementY:function(r){return"movementY"in r?r.movementY:Iu}}),ym=nn(Qo),YS=y({},Qo,{dataTransfer:0}),KS=nn(YS),PS=y({},gl,{relatedTarget:0}),Vu=nn(PS),JS=y({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),FS=nn(JS),XS=y({},Ts,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),QS=nn(XS),ZS=y({},Ts,{data:0}),bm=nn(ZS),WS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ek={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nk(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=tk[r])?!!i[r]:!1}function qu(){return nk}var rk=y({},gl,{key:function(r){if(r.key){var i=WS[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Jo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ek[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qu,charCode:function(r){return r.type==="keypress"?Jo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Jo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),sk=nn(rk),ik=y({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xm=nn(ik),lk=y({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qu}),ok=nn(lk),ak=y({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),ck=nn(ak),uk=y({},Qo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),fk=nn(uk),dk=y({},Ts,{newState:0,oldState:0}),hk=nn(dk),pk=[9,13,27,32],$u=rr&&"CompositionEvent"in window,bl=null;rr&&"documentMode"in document&&(bl=document.documentMode);var mk=rr&&"TextEvent"in window&&!bl,vm=rr&&(!$u||bl&&8<bl&&11>=bl),Sm=" ",km=!1;function Tm(r,i){switch(r){case"keyup":return pk.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Em(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var mi=!1;function gk(r,i){switch(r){case"compositionend":return Em(i);case"keypress":return i.which!==32?null:(km=!0,Sm);case"textInput":return r=i.data,r===Sm&&km?null:r;default:return null}}function yk(r,i){if(mi)return r==="compositionend"||!$u&&Tm(r,i)?(r=mm(),Po=Hu=Or=null,mi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return vm&&i.locale!=="ko"?null:i.data;default:return null}}var bk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cm(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!bk[r.type]:i==="textarea"}function Mm(r,i,a,u){hi?pi?pi.push(u):pi=[u]:hi=u,i=Ia(i,"onChange"),0<i.length&&(a=new Xo("onChange","change",null,a,u),r.push({event:a,listeners:i}))}var xl=null,vl=null;function xk(r){a0(r,0)}function Zo(r){var i=hl(r);if(om(i))return r}function wm(r,i){if(r==="change")return i}var Nm=!1;if(rr){var Gu;if(rr){var Yu="oninput"in document;if(!Yu){var Am=document.createElement("div");Am.setAttribute("oninput","return;"),Yu=typeof Am.oninput=="function"}Gu=Yu}else Gu=!1;Nm=Gu&&(!document.documentMode||9<document.documentMode)}function Om(){xl&&(xl.detachEvent("onpropertychange",Dm),vl=xl=null)}function Dm(r){if(r.propertyName==="value"&&Zo(vl)){var i=[];Mm(i,vl,r,Lu(r)),pm(xk,i)}}function vk(r,i,a){r==="focusin"?(Om(),xl=i,vl=a,xl.attachEvent("onpropertychange",Dm)):r==="focusout"&&Om()}function Sk(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Zo(vl)}function kk(r,i){if(r==="click")return Zo(i)}function Tk(r,i){if(r==="input"||r==="change")return Zo(i)}function Ek(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var hn=typeof Object.is=="function"?Object.is:Ek;function Sl(r,i){if(hn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var h=a[u];if(!F.call(i,h)||!hn(r[h],i[h]))return!1}return!0}function jm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Rm(r,i){var a=jm(r);r=0;for(var u;a;){if(a.nodeType===3){if(u=r+a.textContent.length,r<=i&&u>=i)return{node:a,offset:i-r};r=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jm(a)}}function zm(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?zm(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Lm(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Yo(r.document);i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=Yo(r.document)}return i}function Ku(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var Ck=rr&&"documentMode"in document&&11>=document.documentMode,gi=null,Pu=null,kl=null,Ju=!1;function _m(r,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ju||gi==null||gi!==Yo(u)||(u=gi,"selectionStart"in u&&Ku(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),kl&&Sl(kl,u)||(kl=u,u=Ia(Pu,"onSelect"),0<u.length&&(i=new Xo("onSelect","select",null,i,a),r.push({event:i,listeners:u}),i.target=gi)))}function Es(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var yi={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionrun:Es("Transition","TransitionRun"),transitionstart:Es("Transition","TransitionStart"),transitioncancel:Es("Transition","TransitionCancel"),transitionend:Es("Transition","TransitionEnd")},Fu={},Bm={};rr&&(Bm=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);function Cs(r){if(Fu[r])return Fu[r];if(!yi[r])return r;var i=yi[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in Bm)return Fu[r]=i[a];return r}var Hm=Cs("animationend"),Um=Cs("animationiteration"),Im=Cs("animationstart"),Mk=Cs("transitionrun"),wk=Cs("transitionstart"),Nk=Cs("transitioncancel"),Vm=Cs("transitionend"),qm=new Map,Xu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xu.push("scrollEnd");function Un(r,i){qm.set(r,i),ks(i,[r])}var Wo=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Cn=[],bi=0,Qu=0;function ea(){for(var r=bi,i=Qu=bi=0;i<r;){var a=Cn[i];Cn[i++]=null;var u=Cn[i];Cn[i++]=null;var h=Cn[i];Cn[i++]=null;var m=Cn[i];if(Cn[i++]=null,u!==null&&h!==null){var S=u.pending;S===null?h.next=h:(h.next=S.next,S.next=h),u.pending=h}m!==0&&$m(a,h,m)}}function ta(r,i,a,u){Cn[bi++]=r,Cn[bi++]=i,Cn[bi++]=a,Cn[bi++]=u,Qu|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Zu(r,i,a,u){return ta(r,i,a,u),na(r)}function Ms(r,i){return ta(r,null,null,i),na(r)}function $m(r,i,a){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a);for(var h=!1,m=r.return;m!==null;)m.childLanes|=a,u=m.alternate,u!==null&&(u.childLanes|=a),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(h=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,h&&i!==null&&(h=31-dn(a),r=m.hiddenUpdates,u=r[h],u===null?r[h]=[i]:u.push(i),i.lane=a|536870912),m):null}function na(r){if(50<Gl)throw Gl=0,ad=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var xi={};function Ak(r,i,a,u){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(r,i,a,u){return new Ak(r,i,a,u)}function Wu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function sr(r,i){var a=r.alternate;return a===null?(a=pn(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&65011712,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a.refCleanup=r.refCleanup,a}function Gm(r,i){r.flags&=65011714;var a=r.alternate;return a===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,i=a.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function ra(r,i,a,u,h,m){var S=0;if(u=r,typeof r=="function")Wu(r)&&(S=1);else if(typeof r=="string")S=zT(r,a,le.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case ue:return r=pn(31,a,i,h),r.elementType=ue,r.lanes=m,r;case E:return ws(a.children,h,m,i);case C:S=8,h|=24;break;case M:return r=pn(12,a,i,h|2),r.elementType=M,r.lanes=m,r;case $:return r=pn(13,a,i,h),r.elementType=$,r.lanes=m,r;case Y:return r=pn(19,a,i,h),r.elementType=Y,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case V:S=10;break e;case L:S=9;break e;case W:S=11;break e;case I:S=14;break e;case se:S=16,u=null;break e}S=29,a=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=pn(S,a,i,h),i.elementType=r,i.type=u,i.lanes=m,i}function ws(r,i,a,u){return r=pn(7,r,u,i),r.lanes=a,r}function ef(r,i,a){return r=pn(6,r,null,i),r.lanes=a,r}function Ym(r){var i=pn(18,null,null,0);return i.stateNode=r,i}function tf(r,i,a){return i=pn(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Km=new WeakMap;function Mn(r,i){if(typeof r=="object"&&r!==null){var a=Km.get(r);return a!==void 0?a:(i={value:r,source:i,stack:ne(i)},Km.set(r,i),i)}return{value:r,source:i,stack:ne(i)}}var vi=[],Si=0,sa=null,Tl=0,wn=[],Nn=0,Dr=null,Yn=1,Kn="";function ir(r,i){vi[Si++]=Tl,vi[Si++]=sa,sa=r,Tl=i}function Pm(r,i,a){wn[Nn++]=Yn,wn[Nn++]=Kn,wn[Nn++]=Dr,Dr=r;var u=Yn;r=Kn;var h=32-dn(u)-1;u&=~(1<<h),a+=1;var m=32-dn(i)+h;if(30<m){var S=h-h%5;m=(u&(1<<S)-1).toString(32),u>>=S,h-=S,Yn=1<<32-dn(i)+h|a<<h|u,Kn=m+r}else Yn=1<<m|a<<h|u,Kn=r}function nf(r){r.return!==null&&(ir(r,1),Pm(r,1,0))}function rf(r){for(;r===sa;)sa=vi[--Si],vi[Si]=null,Tl=vi[--Si],vi[Si]=null;for(;r===Dr;)Dr=wn[--Nn],wn[Nn]=null,Kn=wn[--Nn],wn[Nn]=null,Yn=wn[--Nn],wn[Nn]=null}function Jm(r,i){wn[Nn++]=Yn,wn[Nn++]=Kn,wn[Nn++]=Dr,Yn=i.id,Kn=i.overflow,Dr=r}var Ht=null,it=null,Ie=!1,jr=null,An=!1,sf=Error(s(519));function Rr(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw El(Mn(i,r)),sf}function Fm(r){var i=r.stateNode,a=r.type,u=r.memoizedProps;switch(i[Bt]=r,i[tn]=u,a){case"dialog":Be("cancel",i),Be("close",i);break;case"iframe":case"object":case"embed":Be("load",i);break;case"video":case"audio":for(a=0;a<Kl.length;a++)Be(Kl[a],i);break;case"source":Be("error",i);break;case"img":case"image":case"link":Be("error",i),Be("load",i);break;case"details":Be("toggle",i);break;case"input":Be("invalid",i),am(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Be("invalid",i);break;case"textarea":Be("invalid",i),um(i,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||u.suppressHydrationWarning===!0||d0(i.textContent,a)?(u.popover!=null&&(Be("beforetoggle",i),Be("toggle",i)),u.onScroll!=null&&Be("scroll",i),u.onScrollEnd!=null&&Be("scrollend",i),u.onClick!=null&&(i.onclick=nr),i=!0):i=!1,i||Rr(r,!0)}function Xm(r){for(Ht=r.return;Ht;)switch(Ht.tag){case 5:case 31:case 13:An=!1;return;case 27:case 3:An=!0;return;default:Ht=Ht.return}}function ki(r){if(r!==Ht)return!1;if(!Ie)return Xm(r),Ie=!0,!1;var i=r.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=r.type,a=!(a!=="form"&&a!=="button")||Td(r.type,r.memoizedProps)),a=!a),a&&it&&Rr(r),Xm(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));it=S0(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));it=S0(r)}else i===27?(i=it,Pr(r.type)?(r=Nd,Nd=null,it=r):it=i):it=Ht?Dn(r.stateNode.nextSibling):null;return!0}function Ns(){it=Ht=null,Ie=!1}function lf(){var r=jr;return r!==null&&(on===null?on=r:on.push.apply(on,r),jr=null),r}function El(r){jr===null?jr=[r]:jr.push(r)}var of=A(null),As=null,lr=null;function zr(r,i,a){re(of,i._currentValue),i._currentValue=a}function or(r){r._currentValue=of.current,U(of)}function af(r,i,a){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===a)break;r=r.return}}function cf(r,i,a,u){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var m=h.dependencies;if(m!==null){var S=h.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=h;for(var N=0;N<i.length;N++)if(T.context===i[N]){m.lanes|=a,T=m.alternate,T!==null&&(T.lanes|=a),af(m.return,a,r),u||(S=null);break e}m=T.next}}else if(h.tag===18){if(S=h.return,S===null)throw Error(s(341));S.lanes|=a,m=S.alternate,m!==null&&(m.lanes|=a),af(S,a,r),S=null}else S=h.child;if(S!==null)S.return=h;else for(S=h;S!==null;){if(S===r){S=null;break}if(h=S.sibling,h!==null){h.return=S.return,S=h;break}S=S.return}h=S}}function Ti(r,i,a,u){r=null;for(var h=i,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var S=h.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var T=h.type;hn(h.pendingProps.value,S.value)||(r!==null?r.push(T):r=[T])}}else if(h===Me.current){if(S=h.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(Ql):r=[Ql])}h=h.return}r!==null&&cf(i,r,a,u),i.flags|=262144}function ia(r){for(r=r.firstContext;r!==null;){if(!hn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Os(r){As=r,lr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Ut(r){return Qm(As,r)}function la(r,i){return As===null&&Os(r),Qm(r,i)}function Qm(r,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},lr===null){if(r===null)throw Error(s(308));lr=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else lr=lr.next=i;return a}var Ok=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(a,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(a){return a()})}},Dk=n.unstable_scheduleCallback,jk=n.unstable_NormalPriority,kt={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uf(){return{controller:new Ok,data:new Map,refCount:0}}function Cl(r){r.refCount--,r.refCount===0&&Dk(jk,function(){r.controller.abort()})}var Ml=null,ff=0,Ei=0,Ci=null;function Rk(r,i){if(Ml===null){var a=Ml=[];ff=0,Ei=pd(),Ci={status:"pending",value:void 0,then:function(u){a.push(u)}}}return ff++,i.then(Zm,Zm),i}function Zm(){if(--ff===0&&Ml!==null){Ci!==null&&(Ci.status="fulfilled");var r=Ml;Ml=null,Ei=0,Ci=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function zk(r,i){var a=[],u={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(u.status="rejected",u.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),u}var Wm=H.S;H.S=function(r,i){_y=we(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Rk(r,i),Wm!==null&&Wm(r,i)};var Ds=A(null);function df(){var r=Ds.current;return r!==null?r:tt.pooledCache}function oa(r,i){i===null?re(Ds,Ds.current):re(Ds,i.pool)}function eg(){var r=df();return r===null?null:{parent:kt._currentValue,pool:r}}var Mi=Error(s(460)),hf=Error(s(474)),aa=Error(s(542)),ca={then:function(){}};function tg(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ng(r,i,a){switch(a=r[a],a===void 0?r.push(i):a!==i&&(i.then(nr,nr),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,sg(r),r;default:if(typeof i.status=="string")i.then(nr,nr);else{if(r=tt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=u}},function(u){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,sg(r),r}throw Rs=i,Mi}}function js(r){try{var i=r._init;return i(r._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Rs=a,Mi):a}}var Rs=null;function rg(){if(Rs===null)throw Error(s(459));var r=Rs;return Rs=null,r}function sg(r){if(r===Mi||r===aa)throw Error(s(483))}var wi=null,wl=0;function ua(r){var i=wl;return wl+=1,wi===null&&(wi=[]),ng(wi,r,i)}function Nl(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function fa(r,i){throw i.$$typeof===b?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function ig(r){function i(D,O){if(r){var R=D.deletions;R===null?(D.deletions=[O],D.flags|=16):R.push(O)}}function a(D,O){if(!r)return null;for(;O!==null;)i(D,O),O=O.sibling;return null}function u(D){for(var O=new Map;D!==null;)D.key!==null?O.set(D.key,D):O.set(D.index,D),D=D.sibling;return O}function h(D,O){return D=sr(D,O),D.index=0,D.sibling=null,D}function m(D,O,R){return D.index=R,r?(R=D.alternate,R!==null?(R=R.index,R<O?(D.flags|=67108866,O):R):(D.flags|=67108866,O)):(D.flags|=1048576,O)}function S(D){return r&&D.alternate===null&&(D.flags|=67108866),D}function T(D,O,R,G){return O===null||O.tag!==6?(O=ef(R,D.mode,G),O.return=D,O):(O=h(O,R),O.return=D,O)}function N(D,O,R,G){var ye=R.type;return ye===E?q(D,O,R.props.children,G,R.key):O!==null&&(O.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===se&&js(ye)===O.type)?(O=h(O,R.props),Nl(O,R),O.return=D,O):(O=ra(R.type,R.key,R.props,null,D.mode,G),Nl(O,R),O.return=D,O)}function z(D,O,R,G){return O===null||O.tag!==4||O.stateNode.containerInfo!==R.containerInfo||O.stateNode.implementation!==R.implementation?(O=tf(R,D.mode,G),O.return=D,O):(O=h(O,R.children||[]),O.return=D,O)}function q(D,O,R,G,ye){return O===null||O.tag!==7?(O=ws(R,D.mode,G,ye),O.return=D,O):(O=h(O,R),O.return=D,O)}function K(D,O,R){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=ef(""+O,D.mode,R),O.return=D,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case v:return R=ra(O.type,O.key,O.props,null,D.mode,R),Nl(R,O),R.return=D,R;case k:return O=tf(O,D.mode,R),O.return=D,O;case se:return O=js(O),K(D,O,R)}if(Te(O)||Le(O))return O=ws(O,D.mode,R,null),O.return=D,O;if(typeof O.then=="function")return K(D,ua(O),R);if(O.$$typeof===V)return K(D,la(D,O),R);fa(D,O)}return null}function _(D,O,R,G){var ye=O!==null?O.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return ye!==null?null:T(D,O,""+R,G);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case v:return R.key===ye?N(D,O,R,G):null;case k:return R.key===ye?z(D,O,R,G):null;case se:return R=js(R),_(D,O,R,G)}if(Te(R)||Le(R))return ye!==null?null:q(D,O,R,G,null);if(typeof R.then=="function")return _(D,O,ua(R),G);if(R.$$typeof===V)return _(D,O,la(D,R),G);fa(D,R)}return null}function B(D,O,R,G,ye){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return D=D.get(R)||null,T(O,D,""+G,ye);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case v:return D=D.get(G.key===null?R:G.key)||null,N(O,D,G,ye);case k:return D=D.get(G.key===null?R:G.key)||null,z(O,D,G,ye);case se:return G=js(G),B(D,O,R,G,ye)}if(Te(G)||Le(G))return D=D.get(R)||null,q(O,D,G,ye,null);if(typeof G.then=="function")return B(D,O,R,ua(G),ye);if(G.$$typeof===V)return B(D,O,R,la(O,G),ye);fa(O,G)}return null}function oe(D,O,R,G){for(var ye=null,Ge=null,de=O,Ne=O=0,Ue=null;de!==null&&Ne<R.length;Ne++){de.index>Ne?(Ue=de,de=null):Ue=de.sibling;var Ye=_(D,de,R[Ne],G);if(Ye===null){de===null&&(de=Ue);break}r&&de&&Ye.alternate===null&&i(D,de),O=m(Ye,O,Ne),Ge===null?ye=Ye:Ge.sibling=Ye,Ge=Ye,de=Ue}if(Ne===R.length)return a(D,de),Ie&&ir(D,Ne),ye;if(de===null){for(;Ne<R.length;Ne++)de=K(D,R[Ne],G),de!==null&&(O=m(de,O,Ne),Ge===null?ye=de:Ge.sibling=de,Ge=de);return Ie&&ir(D,Ne),ye}for(de=u(de);Ne<R.length;Ne++)Ue=B(de,D,Ne,R[Ne],G),Ue!==null&&(r&&Ue.alternate!==null&&de.delete(Ue.key===null?Ne:Ue.key),O=m(Ue,O,Ne),Ge===null?ye=Ue:Ge.sibling=Ue,Ge=Ue);return r&&de.forEach(function(Zr){return i(D,Zr)}),Ie&&ir(D,Ne),ye}function ve(D,O,R,G){if(R==null)throw Error(s(151));for(var ye=null,Ge=null,de=O,Ne=O=0,Ue=null,Ye=R.next();de!==null&&!Ye.done;Ne++,Ye=R.next()){de.index>Ne?(Ue=de,de=null):Ue=de.sibling;var Zr=_(D,de,Ye.value,G);if(Zr===null){de===null&&(de=Ue);break}r&&de&&Zr.alternate===null&&i(D,de),O=m(Zr,O,Ne),Ge===null?ye=Zr:Ge.sibling=Zr,Ge=Zr,de=Ue}if(Ye.done)return a(D,de),Ie&&ir(D,Ne),ye;if(de===null){for(;!Ye.done;Ne++,Ye=R.next())Ye=K(D,Ye.value,G),Ye!==null&&(O=m(Ye,O,Ne),Ge===null?ye=Ye:Ge.sibling=Ye,Ge=Ye);return Ie&&ir(D,Ne),ye}for(de=u(de);!Ye.done;Ne++,Ye=R.next())Ye=B(de,D,Ne,Ye.value,G),Ye!==null&&(r&&Ye.alternate!==null&&de.delete(Ye.key===null?Ne:Ye.key),O=m(Ye,O,Ne),Ge===null?ye=Ye:Ge.sibling=Ye,Ge=Ye);return r&&de.forEach(function(YT){return i(D,YT)}),Ie&&ir(D,Ne),ye}function et(D,O,R,G){if(typeof R=="object"&&R!==null&&R.type===E&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case v:e:{for(var ye=R.key;O!==null;){if(O.key===ye){if(ye=R.type,ye===E){if(O.tag===7){a(D,O.sibling),G=h(O,R.props.children),G.return=D,D=G;break e}}else if(O.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===se&&js(ye)===O.type){a(D,O.sibling),G=h(O,R.props),Nl(G,R),G.return=D,D=G;break e}a(D,O);break}else i(D,O);O=O.sibling}R.type===E?(G=ws(R.props.children,D.mode,G,R.key),G.return=D,D=G):(G=ra(R.type,R.key,R.props,null,D.mode,G),Nl(G,R),G.return=D,D=G)}return S(D);case k:e:{for(ye=R.key;O!==null;){if(O.key===ye)if(O.tag===4&&O.stateNode.containerInfo===R.containerInfo&&O.stateNode.implementation===R.implementation){a(D,O.sibling),G=h(O,R.children||[]),G.return=D,D=G;break e}else{a(D,O);break}else i(D,O);O=O.sibling}G=tf(R,D.mode,G),G.return=D,D=G}return S(D);case se:return R=js(R),et(D,O,R,G)}if(Te(R))return oe(D,O,R,G);if(Le(R)){if(ye=Le(R),typeof ye!="function")throw Error(s(150));return R=ye.call(R),ve(D,O,R,G)}if(typeof R.then=="function")return et(D,O,ua(R),G);if(R.$$typeof===V)return et(D,O,la(D,R),G);fa(D,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,O!==null&&O.tag===6?(a(D,O.sibling),G=h(O,R),G.return=D,D=G):(a(D,O),G=ef(R,D.mode,G),G.return=D,D=G),S(D)):a(D,O)}return function(D,O,R,G){try{wl=0;var ye=et(D,O,R,G);return wi=null,ye}catch(de){if(de===Mi||de===aa)throw de;var Ge=pn(29,de,null,D.mode);return Ge.lanes=G,Ge.return=D,Ge}finally{}}}var zs=ig(!0),lg=ig(!1),Lr=!1;function pf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mf(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function _r(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Br(r,i,a){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Pe&2)!==0){var h=u.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),u.pending=i,i=na(r),$m(r,null,a),i}return ta(r,u,i,a),na(r)}function Al(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,a|=u,i.lanes=a,Qp(r,a)}}function gf(r,i){var a=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=S:m=m.next=S,a=a.next}while(a!==null);m===null?h=m=i:m=m.next=i}else h=m=i;a={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}var yf=!1;function Ol(){if(yf){var r=Ci;if(r!==null)throw r}}function Dl(r,i,a,u){yf=!1;var h=r.updateQueue;Lr=!1;var m=h.firstBaseUpdate,S=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var N=T,z=N.next;N.next=null,S===null?m=z:S.next=z,S=N;var q=r.alternate;q!==null&&(q=q.updateQueue,T=q.lastBaseUpdate,T!==S&&(T===null?q.firstBaseUpdate=z:T.next=z,q.lastBaseUpdate=N))}if(m!==null){var K=h.baseState;S=0,q=z=N=null,T=m;do{var _=T.lane&-536870913,B=_!==T.lane;if(B?(He&_)===_:(u&_)===_){_!==0&&_===Ei&&(yf=!0),q!==null&&(q=q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var oe=r,ve=T;_=i;var et=a;switch(ve.tag){case 1:if(oe=ve.payload,typeof oe=="function"){K=oe.call(et,K,_);break e}K=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ve.payload,_=typeof oe=="function"?oe.call(et,K,_):oe,_==null)break e;K=y({},K,_);break e;case 2:Lr=!0}}_=T.callback,_!==null&&(r.flags|=64,B&&(r.flags|=8192),B=h.callbacks,B===null?h.callbacks=[_]:B.push(_))}else B={lane:_,tag:T.tag,payload:T.payload,callback:T.callback,next:null},q===null?(z=q=B,N=K):q=q.next=B,S|=_;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;B=T,T=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);q===null&&(N=K),h.baseState=N,h.firstBaseUpdate=z,h.lastBaseUpdate=q,m===null&&(h.shared.lanes=0),qr|=S,r.lanes=S,r.memoizedState=K}}function og(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function ag(r,i){var a=r.callbacks;if(a!==null)for(r.callbacks=null,r=0;r<a.length;r++)og(a[r],i)}var Ni=A(null),da=A(0);function cg(r,i){r=gr,re(da,r),re(Ni,i),gr=r|i.baseLanes}function bf(){re(da,gr),re(Ni,Ni.current)}function xf(){gr=da.current,U(Ni),U(da)}var mn=A(null),On=null;function Hr(r){var i=r.alternate;re(xt,xt.current&1),re(mn,r),On===null&&(i===null||Ni.current!==null||i.memoizedState!==null)&&(On=r)}function vf(r){re(xt,xt.current),re(mn,r),On===null&&(On=r)}function ug(r){r.tag===22?(re(xt,xt.current),re(mn,r),On===null&&(On=r)):Ur()}function Ur(){re(xt,xt.current),re(mn,mn.current)}function gn(r){U(mn),On===r&&(On=null),U(xt)}var xt=A(0);function ha(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Md(a)||wd(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ar=0,Ce=null,Ze=null,Tt=null,pa=!1,Ai=!1,Ls=!1,ma=0,jl=0,Oi=null,Lk=0;function pt(){throw Error(s(321))}function Sf(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!hn(r[a],i[a]))return!1;return!0}function kf(r,i,a,u,h,m){return ar=m,Ce=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=r===null||r.memoizedState===null?Pg:Bf,Ls=!1,m=a(u,h),Ls=!1,Ai&&(m=dg(i,a,u,h)),fg(r),m}function fg(r){H.H=Ll;var i=Ze!==null&&Ze.next!==null;if(ar=0,Tt=Ze=Ce=null,pa=!1,jl=0,Oi=null,i)throw Error(s(300));r===null||Et||(r=r.dependencies,r!==null&&ia(r)&&(Et=!0))}function dg(r,i,a,u){Ce=r;var h=0;do{if(Ai&&(Oi=null),jl=0,Ai=!1,25<=h)throw Error(s(301));if(h+=1,Tt=Ze=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}H.H=Jg,m=i(a,u)}while(Ai);return m}function _k(){var r=H.H,i=r.useState()[0];return i=typeof i.then=="function"?Rl(i):i,r=r.useState()[0],(Ze!==null?Ze.memoizedState:null)!==r&&(Ce.flags|=1024),i}function Tf(){var r=ma!==0;return ma=0,r}function Ef(r,i,a){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~a}function Cf(r){if(pa){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pa=!1}ar=0,Tt=Ze=Ce=null,Ai=!1,jl=ma=0,Oi=null}function Qt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Ce.memoizedState=Tt=r:Tt=Tt.next=r,Tt}function vt(){if(Ze===null){var r=Ce.alternate;r=r!==null?r.memoizedState:null}else r=Ze.next;var i=Tt===null?Ce.memoizedState:Tt.next;if(i!==null)Tt=i,Ze=r;else{if(r===null)throw Ce.alternate===null?Error(s(467)):Error(s(310));Ze=r,r={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Tt===null?Ce.memoizedState=Tt=r:Tt=Tt.next=r}return Tt}function ga(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(r){var i=jl;return jl+=1,Oi===null&&(Oi=[]),r=ng(Oi,r,i),i=Ce,(Tt===null?i.memoizedState:Tt.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?Pg:Bf),r}function ya(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Rl(r);if(r.$$typeof===V)return Ut(r)}throw Error(s(438,String(r)))}function Mf(r){var i=null,a=Ce.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var u=Ce.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=ga(),Ce.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(r),u=0;u<r;u++)a[u]=je;return i.index++,a}function cr(r,i){return typeof i=="function"?i(r):i}function ba(r){var i=vt();return wf(i,Ze,r)}function wf(r,i,a){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var h=r.baseQueue,m=u.pending;if(m!==null){if(h!==null){var S=h.next;h.next=m.next,m.next=S}i.baseQueue=h=m,u.pending=null}if(m=r.baseState,h===null)r.memoizedState=m;else{i=h.next;var T=S=null,N=null,z=i,q=!1;do{var K=z.lane&-536870913;if(K!==z.lane?(He&K)===K:(ar&K)===K){var _=z.revertLane;if(_===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),K===Ei&&(q=!0);else if((ar&_)===_){z=z.next,_===Ei&&(q=!0);continue}else K={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(T=N=K,S=m):N=N.next=K,Ce.lanes|=_,qr|=_;K=z.action,Ls&&a(m,K),m=z.hasEagerState?z.eagerState:a(m,K)}else _={lane:K,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(T=N=_,S=m):N=N.next=_,Ce.lanes|=K,qr|=K;z=z.next}while(z!==null&&z!==i);if(N===null?S=m:N.next=T,!hn(m,r.memoizedState)&&(Et=!0,q&&(a=Ci,a!==null)))throw a;r.memoizedState=m,r.baseState=S,r.baseQueue=N,u.lastRenderedState=m}return h===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Nf(r){var i=vt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var u=a.dispatch,h=a.pending,m=i.memoizedState;if(h!==null){a.pending=null;var S=h=h.next;do m=r(m,S.action),S=S.next;while(S!==h);hn(m,i.memoizedState)||(Et=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,u]}function hg(r,i,a){var u=Ce,h=vt(),m=Ie;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=i();var S=!hn((Ze||h).memoizedState,a);if(S&&(h.memoizedState=a,Et=!0),h=h.queue,Df(gg.bind(null,u,h,r),[r]),h.getSnapshot!==i||S||Tt!==null&&Tt.memoizedState.tag&1){if(u.flags|=2048,Di(9,{destroy:void 0},mg.bind(null,u,h,a,i),null),tt===null)throw Error(s(349));m||(ar&127)!==0||pg(u,i,a)}return a}function pg(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=Ce.updateQueue,i===null?(i=ga(),Ce.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function mg(r,i,a,u){i.value=a,i.getSnapshot=u,yg(i)&&bg(r)}function gg(r,i,a){return a(function(){yg(i)&&bg(r)})}function yg(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!hn(r,a)}catch{return!0}}function bg(r){var i=Ms(r,2);i!==null&&an(i,r,2)}function Af(r){var i=Qt();if(typeof r=="function"){var a=r;if(r=a(),Ls){Nr(!0);try{a()}finally{Nr(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:r},i}function xg(r,i,a,u){return r.baseState=a,wf(r,Ze,typeof u=="function"?u:cr)}function Bk(r,i,a,u,h){if(Sa(r))throw Error(s(485));if(r=i.action,r!==null){var m={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){m.listeners.push(S)}};H.T!==null?a(!0):m.isTransition=!1,u(m),a=i.pending,a===null?(m.next=i.pending=m,vg(i,m)):(m.next=a.next,i.pending=a.next=m)}}function vg(r,i){var a=i.action,u=i.payload,h=r.state;if(i.isTransition){var m=H.T,S={};H.T=S;try{var T=a(h,u),N=H.S;N!==null&&N(S,T),Sg(r,i,T)}catch(z){Of(r,i,z)}finally{m!==null&&S.types!==null&&(m.types=S.types),H.T=m}}else try{m=a(h,u),Sg(r,i,m)}catch(z){Of(r,i,z)}}function Sg(r,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){kg(r,i,u)},function(u){return Of(r,i,u)}):kg(r,i,a)}function kg(r,i,a){i.status="fulfilled",i.value=a,Tg(i),r.state=a,i=r.pending,i!==null&&(a=i.next,a===i?r.pending=null:(a=a.next,i.next=a,vg(r,a)))}function Of(r,i,a){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=a,Tg(i),i=i.next;while(i!==u)}r.action=null}function Tg(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function Eg(r,i){return i}function Cg(r,i){if(Ie){var a=tt.formState;if(a!==null){e:{var u=Ce;if(Ie){if(it){t:{for(var h=it,m=An;h.nodeType!==8;){if(!m){h=null;break t}if(h=Dn(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){it=Dn(h.nextSibling),u=h.data==="F!";break e}}Rr(u)}u=!1}u&&(i=a[0])}}return a=Qt(),a.memoizedState=a.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eg,lastRenderedState:i},a.queue=u,a=Gg.bind(null,Ce,u),u.dispatch=a,u=Af(!1),m=_f.bind(null,Ce,!1,u.queue),u=Qt(),h={state:i,dispatch:null,action:r,pending:null},u.queue=h,a=Bk.bind(null,Ce,h,m,a),h.dispatch=a,u.memoizedState=r,[i,a,!1]}function Mg(r){var i=vt();return wg(i,Ze,r)}function wg(r,i,a){if(i=wf(r,i,Eg)[0],r=ba(cr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Rl(i)}catch(S){throw S===Mi?aa:S}else u=i;i=vt();var h=i.queue,m=h.dispatch;return a!==i.memoizedState&&(Ce.flags|=2048,Di(9,{destroy:void 0},Hk.bind(null,h,a),null)),[u,m,r]}function Hk(r,i){r.action=i}function Ng(r){var i=vt(),a=Ze;if(a!==null)return wg(i,a,r);vt(),i=i.memoizedState,a=vt();var u=a.queue.dispatch;return a.memoizedState=r,[i,u,!1]}function Di(r,i,a,u){return r={tag:r,create:a,deps:u,inst:i,next:null},i=Ce.updateQueue,i===null&&(i=ga(),Ce.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=r.next=r:(u=a.next,a.next=r,r.next=u,i.lastEffect=r),r}function Ag(){return vt().memoizedState}function xa(r,i,a,u){var h=Qt();Ce.flags|=r,h.memoizedState=Di(1|i,{destroy:void 0},a,u===void 0?null:u)}function va(r,i,a,u){var h=vt();u=u===void 0?null:u;var m=h.memoizedState.inst;Ze!==null&&u!==null&&Sf(u,Ze.memoizedState.deps)?h.memoizedState=Di(i,m,a,u):(Ce.flags|=r,h.memoizedState=Di(1|i,m,a,u))}function Og(r,i){xa(8390656,8,r,i)}function Df(r,i){va(2048,8,r,i)}function Uk(r){Ce.flags|=4;var i=Ce.updateQueue;if(i===null)i=ga(),Ce.updateQueue=i,i.events=[r];else{var a=i.events;a===null?i.events=[r]:a.push(r)}}function Dg(r){var i=vt().memoizedState;return Uk({ref:i,nextImpl:r}),function(){if((Pe&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function jg(r,i){return va(4,2,r,i)}function Rg(r,i){return va(4,4,r,i)}function zg(r,i){if(typeof i=="function"){r=r();var a=i(r);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Lg(r,i,a){a=a!=null?a.concat([r]):null,va(4,4,zg.bind(null,i,r),a)}function jf(){}function _g(r,i){var a=vt();i=i===void 0?null:i;var u=a.memoizedState;return i!==null&&Sf(i,u[1])?u[0]:(a.memoizedState=[r,i],r)}function Bg(r,i){var a=vt();i=i===void 0?null:i;var u=a.memoizedState;if(i!==null&&Sf(i,u[1]))return u[0];if(u=r(),Ls){Nr(!0);try{r()}finally{Nr(!1)}}return a.memoizedState=[u,i],u}function Rf(r,i,a){return a===void 0||(ar&1073741824)!==0&&(He&261930)===0?r.memoizedState=i:(r.memoizedState=a,r=Hy(),Ce.lanes|=r,qr|=r,a)}function Hg(r,i,a,u){return hn(a,i)?a:Ni.current!==null?(r=Rf(r,a,u),hn(r,i)||(Et=!0),r):(ar&42)===0||(ar&1073741824)!==0&&(He&261930)===0?(Et=!0,r.memoizedState=a):(r=Hy(),Ce.lanes|=r,qr|=r,i)}function Ug(r,i,a,u,h){var m=Z.p;Z.p=m!==0&&8>m?m:8;var S=H.T,T={};H.T=T,_f(r,!1,i,a);try{var N=h(),z=H.S;if(z!==null&&z(T,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var q=zk(N,u);zl(r,i,q,xn(r))}else zl(r,i,u,xn(r))}catch(K){zl(r,i,{then:function(){},status:"rejected",reason:K},xn())}finally{Z.p=m,S!==null&&T.types!==null&&(S.types=T.types),H.T=S}}function Ik(){}function zf(r,i,a,u){if(r.tag!==5)throw Error(s(476));var h=Ig(r).queue;Ug(r,h,i,pe,a===null?Ik:function(){return Vg(r),a(u)})}function Ig(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:pe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:a},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Vg(r){var i=Ig(r);i.next===null&&(i=r.alternate.memoizedState),zl(r,i.next.queue,{},xn())}function Lf(){return Ut(Ql)}function qg(){return vt().memoizedState}function $g(){return vt().memoizedState}function Vk(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var a=xn();r=_r(a);var u=Br(i,r,a);u!==null&&(an(u,i,a),Al(u,i,a)),i={cache:uf()},r.payload=i;return}i=i.return}}function qk(r,i,a){var u=xn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Sa(r)?Yg(i,a):(a=Zu(r,i,a,u),a!==null&&(an(a,r,u),Kg(a,i,u)))}function Gg(r,i,a){var u=xn();zl(r,i,a,u)}function zl(r,i,a,u){var h={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Sa(r))Yg(i,h);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var S=i.lastRenderedState,T=m(S,a);if(h.hasEagerState=!0,h.eagerState=T,hn(T,S))return ta(r,i,h,0),tt===null&&ea(),!1}catch{}finally{}if(a=Zu(r,i,h,u),a!==null)return an(a,r,u),Kg(a,i,u),!0}return!1}function _f(r,i,a,u){if(u={lane:2,revertLane:pd(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Sa(r)){if(i)throw Error(s(479))}else i=Zu(r,a,u,2),i!==null&&an(i,r,2)}function Sa(r){var i=r.alternate;return r===Ce||i!==null&&i===Ce}function Yg(r,i){Ai=pa=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function Kg(r,i,a){if((a&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,a|=u,i.lanes=a,Qp(r,a)}}var Ll={readContext:Ut,use:ya,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};Ll.useEffectEvent=pt;var Pg={readContext:Ut,use:ya,useCallback:function(r,i){return Qt().memoizedState=[r,i===void 0?null:i],r},useContext:Ut,useEffect:Og,useImperativeHandle:function(r,i,a){a=a!=null?a.concat([r]):null,xa(4194308,4,zg.bind(null,i,r),a)},useLayoutEffect:function(r,i){return xa(4194308,4,r,i)},useInsertionEffect:function(r,i){xa(4,2,r,i)},useMemo:function(r,i){var a=Qt();i=i===void 0?null:i;var u=r();if(Ls){Nr(!0);try{r()}finally{Nr(!1)}}return a.memoizedState=[u,i],u},useReducer:function(r,i,a){var u=Qt();if(a!==void 0){var h=a(i);if(Ls){Nr(!0);try{a(i)}finally{Nr(!1)}}}else h=i;return u.memoizedState=u.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},u.queue=r,r=r.dispatch=qk.bind(null,Ce,r),[u.memoizedState,r]},useRef:function(r){var i=Qt();return r={current:r},i.memoizedState=r},useState:function(r){r=Af(r);var i=r.queue,a=Gg.bind(null,Ce,i);return i.dispatch=a,[r.memoizedState,a]},useDebugValue:jf,useDeferredValue:function(r,i){var a=Qt();return Rf(a,r,i)},useTransition:function(){var r=Af(!1);return r=Ug.bind(null,Ce,r.queue,!0,!1),Qt().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,a){var u=Ce,h=Qt();if(Ie){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),tt===null)throw Error(s(349));(He&127)!==0||pg(u,i,a)}h.memoizedState=a;var m={value:a,getSnapshot:i};return h.queue=m,Og(gg.bind(null,u,m,r),[r]),u.flags|=2048,Di(9,{destroy:void 0},mg.bind(null,u,m,a,i),null),a},useId:function(){var r=Qt(),i=tt.identifierPrefix;if(Ie){var a=Kn,u=Yn;a=(u&~(1<<32-dn(u)-1)).toString(32)+a,i="_"+i+"R_"+a,a=ma++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Lk++,i="_"+i+"r_"+a.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Lf,useFormState:Cg,useActionState:Cg,useOptimistic:function(r){var i=Qt();i.memoizedState=i.baseState=r;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=_f.bind(null,Ce,!0,a),a.dispatch=i,[r,i]},useMemoCache:Mf,useCacheRefresh:function(){return Qt().memoizedState=Vk.bind(null,Ce)},useEffectEvent:function(r){var i=Qt(),a={impl:r};return i.memoizedState=a,function(){if((Pe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Bf={readContext:Ut,use:ya,useCallback:_g,useContext:Ut,useEffect:Df,useImperativeHandle:Lg,useInsertionEffect:jg,useLayoutEffect:Rg,useMemo:Bg,useReducer:ba,useRef:Ag,useState:function(){return ba(cr)},useDebugValue:jf,useDeferredValue:function(r,i){var a=vt();return Hg(a,Ze.memoizedState,r,i)},useTransition:function(){var r=ba(cr)[0],i=vt().memoizedState;return[typeof r=="boolean"?r:Rl(r),i]},useSyncExternalStore:hg,useId:qg,useHostTransitionStatus:Lf,useFormState:Mg,useActionState:Mg,useOptimistic:function(r,i){var a=vt();return xg(a,Ze,r,i)},useMemoCache:Mf,useCacheRefresh:$g};Bf.useEffectEvent=Dg;var Jg={readContext:Ut,use:ya,useCallback:_g,useContext:Ut,useEffect:Df,useImperativeHandle:Lg,useInsertionEffect:jg,useLayoutEffect:Rg,useMemo:Bg,useReducer:Nf,useRef:Ag,useState:function(){return Nf(cr)},useDebugValue:jf,useDeferredValue:function(r,i){var a=vt();return Ze===null?Rf(a,r,i):Hg(a,Ze.memoizedState,r,i)},useTransition:function(){var r=Nf(cr)[0],i=vt().memoizedState;return[typeof r=="boolean"?r:Rl(r),i]},useSyncExternalStore:hg,useId:qg,useHostTransitionStatus:Lf,useFormState:Ng,useActionState:Ng,useOptimistic:function(r,i){var a=vt();return Ze!==null?xg(a,Ze,r,i):(a.baseState=r,[r,a.queue.dispatch])},useMemoCache:Mf,useCacheRefresh:$g};Jg.useEffectEvent=Dg;function Hf(r,i,a,u){i=r.memoizedState,a=a(u,i),a=a==null?i:y({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Uf={enqueueSetState:function(r,i,a){r=r._reactInternals;var u=xn(),h=_r(u);h.payload=i,a!=null&&(h.callback=a),i=Br(r,h,u),i!==null&&(an(i,r,u),Al(i,r,u))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var u=xn(),h=_r(u);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Br(r,h,u),i!==null&&(an(i,r,u),Al(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=xn(),u=_r(a);u.tag=2,i!=null&&(u.callback=i),i=Br(r,u,a),i!==null&&(an(i,r,a),Al(i,r,a))}};function Fg(r,i,a,u,h,m,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,S):i.prototype&&i.prototype.isPureReactComponent?!Sl(a,u)||!Sl(h,m):!0}function Xg(r,i,a,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==r&&Uf.enqueueReplaceState(i,i.state,null)}function _s(r,i){var a=i;if("ref"in i){a={};for(var u in i)u!=="ref"&&(a[u]=i[u])}if(r=r.defaultProps){a===i&&(a=y({},a));for(var h in r)a[h]===void 0&&(a[h]=r[h])}return a}function Qg(r){Wo(r)}function Zg(r){console.error(r)}function Wg(r){Wo(r)}function ka(r,i){try{var a=r.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function ey(r,i,a){try{var u=r.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function If(r,i,a){return a=_r(a),a.tag=3,a.payload={element:null},a.callback=function(){ka(r,i)},a}function ty(r){return r=_r(r),r.tag=3,r}function ny(r,i,a,u){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=u.value;r.payload=function(){return h(m)},r.callback=function(){ey(i,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){ey(i,a,u),typeof h!="function"&&($r===null?$r=new Set([this]):$r.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function $k(r,i,a,u,h){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=a.alternate,i!==null&&Ti(i,a,h,!0),a=mn.current,a!==null){switch(a.tag){case 31:case 13:return On===null?za():a.alternate===null&&mt===0&&(mt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,u===ca?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([u]):i.add(u),fd(r,u,h)),!1;case 22:return a.flags|=65536,u===ca?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([u]):a.add(u)),fd(r,u,h)),!1}throw Error(s(435,a.tag))}return fd(r,u,h),za(),!1}if(Ie)return i=mn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,u!==sf&&(r=Error(s(422),{cause:u}),El(Mn(r,a)))):(u!==sf&&(i=Error(s(423),{cause:u}),El(Mn(i,a))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,u=Mn(u,a),h=If(r.stateNode,u,h),gf(r,h),mt!==4&&(mt=2)),!1;var m=Error(s(520),{cause:u});if(m=Mn(m,a),$l===null?$l=[m]:$l.push(m),mt!==4&&(mt=2),i===null)return!0;u=Mn(u,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,r=h&-h,a.lanes|=r,r=If(a.stateNode,u,r),gf(a,r),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&($r===null||!$r.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=ty(h),ny(h,r,a,u),gf(a,h),!1}a=a.return}while(a!==null);return!1}var Vf=Error(s(461)),Et=!1;function It(r,i,a,u){i.child=r===null?lg(i,null,a,u):zs(i,r.child,a,u)}function ry(r,i,a,u,h){a=a.render;var m=i.ref;if("ref"in u){var S={};for(var T in u)T!=="ref"&&(S[T]=u[T])}else S=u;return Os(i),u=kf(r,i,a,S,m,h),T=Tf(),r!==null&&!Et?(Ef(r,i,h),ur(r,i,h)):(Ie&&T&&nf(i),i.flags|=1,It(r,i,u,h),i.child)}function sy(r,i,a,u,h){if(r===null){var m=a.type;return typeof m=="function"&&!Wu(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,iy(r,i,m,u,h)):(r=ra(a.type,null,u,i,i.mode,h),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!Ff(r,h)){var S=m.memoizedProps;if(a=a.compare,a=a!==null?a:Sl,a(S,u)&&r.ref===i.ref)return ur(r,i,h)}return i.flags|=1,r=sr(m,u),r.ref=i.ref,r.return=i,i.child=r}function iy(r,i,a,u,h){if(r!==null){var m=r.memoizedProps;if(Sl(m,u)&&r.ref===i.ref)if(Et=!1,i.pendingProps=u=m,Ff(r,h))(r.flags&131072)!==0&&(Et=!0);else return i.lanes=r.lanes,ur(r,i,h)}return qf(r,i,a,u,h)}function ly(r,i,a,u){var h=u.children,m=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,r!==null){for(u=i.child=r.child,h=0;u!==null;)h=h|u.lanes|u.childLanes,u=u.sibling;u=h&~m}else u=0,i.child=null;return oy(r,i,m,a,u)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&oa(i,m!==null?m.cachePool:null),m!==null?cg(i,m):bf(),ug(i);else return u=i.lanes=536870912,oy(r,i,m!==null?m.baseLanes|a:a,a,u)}else m!==null?(oa(i,m.cachePool),cg(i,m),Ur(),i.memoizedState=null):(r!==null&&oa(i,null),bf(),Ur());return It(r,i,h,a),i.child}function _l(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function oy(r,i,a,u,h){var m=df();return m=m===null?null:{parent:kt._currentValue,pool:m},i.memoizedState={baseLanes:a,cachePool:m},r!==null&&oa(i,null),bf(),ug(i),r!==null&&Ti(r,i,u,!0),i.childLanes=h,null}function Ta(r,i){return i=Ca({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function ay(r,i,a){return zs(i,r.child,null,a),r=Ta(i,i.pendingProps),r.flags|=2,gn(i),i.memoizedState=null,r}function Gk(r,i,a){var u=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(Ie){if(u.mode==="hidden")return r=Ta(i,u),i.lanes=536870912,_l(null,r);if(vf(i),(r=it)?(r=v0(r,An),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Dr!==null?{id:Yn,overflow:Kn}:null,retryLane:536870912,hydrationErrors:null},a=Ym(r),a.return=i,i.child=a,Ht=i,it=null)):r=null,r===null)throw Rr(i);return i.lanes=536870912,null}return Ta(i,u)}var m=r.memoizedState;if(m!==null){var S=m.dehydrated;if(vf(i),h)if(i.flags&256)i.flags&=-257,i=ay(r,i,a);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(Et||Ti(r,i,a,!1),h=(a&r.childLanes)!==0,Et||h){if(u=tt,u!==null&&(S=Zp(u,a),S!==0&&S!==m.retryLane))throw m.retryLane=S,Ms(r,S),an(u,r,S),Vf;za(),i=ay(r,i,a)}else r=m.treeContext,it=Dn(S.nextSibling),Ht=i,Ie=!0,jr=null,An=!1,r!==null&&Jm(i,r),i=Ta(i,u),i.flags|=4096;return i}return r=sr(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Ea(r,i){var a=i.ref;if(a===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(r===null||r.ref!==a)&&(i.flags|=4194816)}}function qf(r,i,a,u,h){return Os(i),a=kf(r,i,a,u,void 0,h),u=Tf(),r!==null&&!Et?(Ef(r,i,h),ur(r,i,h)):(Ie&&u&&nf(i),i.flags|=1,It(r,i,a,h),i.child)}function cy(r,i,a,u,h,m){return Os(i),i.updateQueue=null,a=dg(i,u,a,h),fg(r),u=Tf(),r!==null&&!Et?(Ef(r,i,m),ur(r,i,m)):(Ie&&u&&nf(i),i.flags|=1,It(r,i,a,m),i.child)}function uy(r,i,a,u,h){if(Os(i),i.stateNode===null){var m=xi,S=a.contextType;typeof S=="object"&&S!==null&&(m=Ut(S)),m=new a(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Uf,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},pf(i),S=a.contextType,m.context=typeof S=="object"&&S!==null?Ut(S):xi,m.state=i.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Hf(i,a,S,u),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(S=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),S!==m.state&&Uf.enqueueReplaceState(m,m.state,null),Dl(i,u,m,h),Ol(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){m=i.stateNode;var T=i.memoizedProps,N=_s(a,T);m.props=N;var z=m.context,q=a.contextType;S=xi,typeof q=="object"&&q!==null&&(S=Ut(q));var K=a.getDerivedStateFromProps;q=typeof K=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,q||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||z!==S)&&Xg(i,m,u,S),Lr=!1;var _=i.memoizedState;m.state=_,Dl(i,u,m,h),Ol(),z=i.memoizedState,T||_!==z||Lr?(typeof K=="function"&&(Hf(i,a,K,u),z=i.memoizedState),(N=Lr||Fg(i,a,N,u,_,z,S))?(q||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=z),m.props=u,m.state=z,m.context=S,u=N):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,mf(r,i),S=i.memoizedProps,q=_s(a,S),m.props=q,K=i.pendingProps,_=m.context,z=a.contextType,N=xi,typeof z=="object"&&z!==null&&(N=Ut(z)),T=a.getDerivedStateFromProps,(z=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==K||_!==N)&&Xg(i,m,u,N),Lr=!1,_=i.memoizedState,m.state=_,Dl(i,u,m,h),Ol();var B=i.memoizedState;S!==K||_!==B||Lr||r!==null&&r.dependencies!==null&&ia(r.dependencies)?(typeof T=="function"&&(Hf(i,a,T,u),B=i.memoizedState),(q=Lr||Fg(i,a,q,u,_,B,N)||r!==null&&r.dependencies!==null&&ia(r.dependencies))?(z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,B,N),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,B,N)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||S===r.memoizedProps&&_===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&_===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=B),m.props=u,m.state=B,m.context=N,u=q):(typeof m.componentDidUpdate!="function"||S===r.memoizedProps&&_===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&_===r.memoizedState||(i.flags|=1024),u=!1)}return m=u,Ea(r,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&u?(i.child=zs(i,r.child,null,h),i.child=zs(i,null,a,h)):It(r,i,a,h),i.memoizedState=m.state,r=i.child):r=ur(r,i,h),r}function fy(r,i,a,u){return Ns(),i.flags|=256,It(r,i,a,u),i.child}var $f={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gf(r){return{baseLanes:r,cachePool:eg()}}function Yf(r,i,a){return r=r!==null?r.childLanes&~a:0,i&&(r|=bn),r}function dy(r,i,a){var u=i.pendingProps,h=!1,m=(i.flags&128)!==0,S;if((S=m)||(S=r!==null&&r.memoizedState===null?!1:(xt.current&2)!==0),S&&(h=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,r===null){if(Ie){if(h?Hr(i):Ur(),(r=it)?(r=v0(r,An),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Dr!==null?{id:Yn,overflow:Kn}:null,retryLane:536870912,hydrationErrors:null},a=Ym(r),a.return=i,i.child=a,Ht=i,it=null)):r=null,r===null)throw Rr(i);return wd(r)?i.lanes=32:i.lanes=536870912,null}var T=u.children;return u=u.fallback,h?(Ur(),h=i.mode,T=Ca({mode:"hidden",children:T},h),u=ws(u,h,a,null),T.return=i,u.return=i,T.sibling=u,i.child=T,u=i.child,u.memoizedState=Gf(a),u.childLanes=Yf(r,S,a),i.memoizedState=$f,_l(null,u)):(Hr(i),Kf(i,T))}var N=r.memoizedState;if(N!==null&&(T=N.dehydrated,T!==null)){if(m)i.flags&256?(Hr(i),i.flags&=-257,i=Pf(r,i,a)):i.memoizedState!==null?(Ur(),i.child=r.child,i.flags|=128,i=null):(Ur(),T=u.fallback,h=i.mode,u=Ca({mode:"visible",children:u.children},h),T=ws(T,h,a,null),T.flags|=2,u.return=i,T.return=i,u.sibling=T,i.child=u,zs(i,r.child,null,a),u=i.child,u.memoizedState=Gf(a),u.childLanes=Yf(r,S,a),i.memoizedState=$f,i=_l(null,u));else if(Hr(i),wd(T)){if(S=T.nextSibling&&T.nextSibling.dataset,S)var z=S.dgst;S=z,u=Error(s(419)),u.stack="",u.digest=S,El({value:u,source:null,stack:null}),i=Pf(r,i,a)}else if(Et||Ti(r,i,a,!1),S=(a&r.childLanes)!==0,Et||S){if(S=tt,S!==null&&(u=Zp(S,a),u!==0&&u!==N.retryLane))throw N.retryLane=u,Ms(r,u),an(S,r,u),Vf;Md(T)||za(),i=Pf(r,i,a)}else Md(T)?(i.flags|=192,i.child=r.child,i=null):(r=N.treeContext,it=Dn(T.nextSibling),Ht=i,Ie=!0,jr=null,An=!1,r!==null&&Jm(i,r),i=Kf(i,u.children),i.flags|=4096);return i}return h?(Ur(),T=u.fallback,h=i.mode,N=r.child,z=N.sibling,u=sr(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,z!==null?T=sr(z,T):(T=ws(T,h,a,null),T.flags|=2),T.return=i,u.return=i,u.sibling=T,i.child=u,_l(null,u),u=i.child,T=r.child.memoizedState,T===null?T=Gf(a):(h=T.cachePool,h!==null?(N=kt._currentValue,h=h.parent!==N?{parent:N,pool:N}:h):h=eg(),T={baseLanes:T.baseLanes|a,cachePool:h}),u.memoizedState=T,u.childLanes=Yf(r,S,a),i.memoizedState=$f,_l(r.child,u)):(Hr(i),a=r.child,r=a.sibling,a=sr(a,{mode:"visible",children:u.children}),a.return=i,a.sibling=null,r!==null&&(S=i.deletions,S===null?(i.deletions=[r],i.flags|=16):S.push(r)),i.child=a,i.memoizedState=null,a)}function Kf(r,i){return i=Ca({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Ca(r,i){return r=pn(22,r,null,i),r.lanes=0,r}function Pf(r,i,a){return zs(i,r.child,null,a),r=Kf(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function hy(r,i,a){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),af(r.return,i,a)}function Jf(r,i,a,u,h,m){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:h,treeForkCount:m}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=h,S.treeForkCount=m)}function py(r,i,a){var u=i.pendingProps,h=u.revealOrder,m=u.tail;u=u.children;var S=xt.current,T=(S&2)!==0;if(T?(S=S&1|2,i.flags|=128):S&=1,re(xt,S),It(r,i,u,a),u=Ie?Tl:0,!T&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&hy(r,a,i);else if(r.tag===19)hy(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)r=a.alternate,r!==null&&ha(r)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Jf(i,!1,h,a,m,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(r=h.alternate,r!==null&&ha(r)===null){i.child=h;break}r=h.sibling,h.sibling=a,a=h,h=r}Jf(i,!0,a,null,m,u);break;case"together":Jf(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function ur(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),qr|=i.lanes,(a&i.childLanes)===0)if(r!==null){if(Ti(r,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,a=sr(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=sr(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function Ff(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&ia(r)))}function Yk(r,i,a){switch(i.tag){case 3:at(i,i.stateNode.containerInfo),zr(i,kt,r.memoizedState.cache),Ns();break;case 27:case 5:ae(i);break;case 4:at(i,i.stateNode.containerInfo);break;case 10:zr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,vf(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Hr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?dy(r,i,a):(Hr(i),r=ur(r,i,a),r!==null?r.sibling:null);Hr(i);break;case 19:var h=(r.flags&128)!==0;if(u=(a&i.childLanes)!==0,u||(Ti(r,i,a,!1),u=(a&i.childLanes)!==0),h){if(u)return py(r,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(xt,xt.current),u)break;return null;case 22:return i.lanes=0,ly(r,i,a,i.pendingProps);case 24:zr(i,kt,r.memoizedState.cache)}return ur(r,i,a)}function my(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps)Et=!0;else{if(!Ff(r,a)&&(i.flags&128)===0)return Et=!1,Yk(r,i,a);Et=(r.flags&131072)!==0}else Et=!1,Ie&&(i.flags&1048576)!==0&&Pm(i,Tl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=js(i.elementType),i.type=r,typeof r=="function")Wu(r)?(u=_s(r,u),i.tag=1,i=uy(null,i,r,u,a)):(i.tag=0,i=qf(null,i,r,u,a));else{if(r!=null){var h=r.$$typeof;if(h===W){i.tag=11,i=ry(null,i,r,u,a);break e}else if(h===I){i.tag=14,i=sy(null,i,r,u,a);break e}}throw i=Ve(r)||r,Error(s(306,i,""))}}return i;case 0:return qf(r,i,i.type,i.pendingProps,a);case 1:return u=i.type,h=_s(u,i.pendingProps),uy(r,i,u,h,a);case 3:e:{if(at(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var m=i.memoizedState;h=m.element,mf(r,i),Dl(i,u,null,a);var S=i.memoizedState;if(u=S.cache,zr(i,kt,u),u!==m.cache&&cf(i,[kt],a,!0),Ol(),u=S.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=fy(r,i,u,a);break e}else if(u!==h){h=Mn(Error(s(424)),i),El(h),i=fy(r,i,u,a);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(it=Dn(r.firstChild),Ht=i,Ie=!0,jr=null,An=!0,a=lg(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ns(),u===h){i=ur(r,i,a);break e}It(r,i,u,a)}i=i.child}return i;case 26:return Ea(r,i),r===null?(a=M0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ie||(a=i.type,r=i.pendingProps,u=Va(be.current).createElement(a),u[Bt]=i,u[tn]=r,Vt(u,a,r),jt(u),i.stateNode=u):i.memoizedState=M0(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return ae(i),r===null&&Ie&&(u=i.stateNode=T0(i.type,i.pendingProps,be.current),Ht=i,An=!0,h=it,Pr(i.type)?(Nd=h,it=Dn(u.firstChild)):it=h),It(r,i,i.pendingProps.children,a),Ea(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&Ie&&((h=u=it)&&(u=ST(u,i.type,i.pendingProps,An),u!==null?(i.stateNode=u,Ht=i,it=Dn(u.firstChild),An=!1,h=!0):h=!1),h||Rr(i)),ae(i),h=i.type,m=i.pendingProps,S=r!==null?r.memoizedProps:null,u=m.children,Td(h,m)?u=null:S!==null&&Td(h,S)&&(i.flags|=32),i.memoizedState!==null&&(h=kf(r,i,_k,null,null,a),Ql._currentValue=h),Ea(r,i),It(r,i,u,a),i.child;case 6:return r===null&&Ie&&((r=a=it)&&(a=kT(a,i.pendingProps,An),a!==null?(i.stateNode=a,Ht=i,it=null,r=!0):r=!1),r||Rr(i)),null;case 13:return dy(r,i,a);case 4:return at(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=zs(i,null,u,a):It(r,i,u,a),i.child;case 11:return ry(r,i,i.type,i.pendingProps,a);case 7:return It(r,i,i.pendingProps,a),i.child;case 8:return It(r,i,i.pendingProps.children,a),i.child;case 12:return It(r,i,i.pendingProps.children,a),i.child;case 10:return u=i.pendingProps,zr(i,i.type,u.value),It(r,i,u.children,a),i.child;case 9:return h=i.type._context,u=i.pendingProps.children,Os(i),h=Ut(h),u=u(h),i.flags|=1,It(r,i,u,a),i.child;case 14:return sy(r,i,i.type,i.pendingProps,a);case 15:return iy(r,i,i.type,i.pendingProps,a);case 19:return py(r,i,a);case 31:return Gk(r,i,a);case 22:return ly(r,i,a,i.pendingProps);case 24:return Os(i),u=Ut(kt),r===null?(h=df(),h===null&&(h=tt,m=uf(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),i.memoizedState={parent:u,cache:h},pf(i),zr(i,kt,h)):((r.lanes&a)!==0&&(mf(r,i),Dl(i,null,null,a),Ol()),h=r.memoizedState,m=i.memoizedState,h.parent!==u?(h={parent:u,cache:u},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),zr(i,kt,u)):(u=m.cache,zr(i,kt,u),u!==h.cache&&cf(i,[kt],a,!0))),It(r,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function fr(r){r.flags|=4}function Xf(r,i,a,u,h){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(h&335544128)===h)if(r.stateNode.complete)r.flags|=8192;else if(qy())r.flags|=8192;else throw Rs=ca,hf}else r.flags&=-16777217}function gy(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!D0(i))if(qy())r.flags|=8192;else throw Rs=ca,hf}function Ma(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Fp():536870912,r.lanes|=i,Li|=i)}function Bl(r,i){if(!Ie)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function lt(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,u=0;if(i)for(var h=r.child;h!==null;)a|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)a|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=u,r.childLanes=a,i}function Kk(r,i,a){var u=i.pendingProps;switch(rf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return lt(i),null;case 3:return a=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),or(kt),qe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(r===null||r.child===null)&&(ki(i)?fr(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,lf())),lt(i),null;case 26:var h=i.type,m=i.memoizedState;return r===null?(fr(i),m!==null?(lt(i),gy(i,m)):(lt(i),Xf(i,h,null,u,a))):m?m!==r.memoizedState?(fr(i),lt(i),gy(i,m)):(lt(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&fr(i),lt(i),Xf(i,h,r,u,a)),null;case 27:if(Se(i),a=be.current,h=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&fr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return lt(i),null}r=le.current,ki(i)?Fm(i):(r=T0(h,u,a),i.stateNode=r,fr(i))}return lt(i),null;case 5:if(Se(i),h=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&fr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return lt(i),null}if(m=le.current,ki(i))Fm(i);else{var S=Va(be.current);switch(m){case 1:m=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=S.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?S.createElement(h,{is:u.is}):S.createElement(h)}}m[Bt]=i,m[tn]=u;e:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)m.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break e;for(;S.sibling===null;){if(S.return===null||S.return===i)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=m;e:switch(Vt(m,h,u),h){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&fr(i)}}return lt(i),Xf(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,a),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&fr(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=be.current,ki(i)){if(r=i.stateNode,a=i.memoizedProps,u=null,h=Ht,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}r[Bt]=i,r=!!(r.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||d0(r.nodeValue,a)),r||Rr(i,!0)}else r=Va(r).createTextNode(u),r[Bt]=i,i.stateNode=r}return lt(i),null;case 31:if(a=i.memoizedState,r===null||r.memoizedState!==null){if(u=ki(i),a!==null){if(r===null){if(!u)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[Bt]=i}else Ns(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),r=!1}else a=lf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=a),r=!0;if(!r)return i.flags&256?(gn(i),i):(gn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return lt(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=ki(i),u!==null&&u.dehydrated!==null){if(r===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Bt]=i}else Ns(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),h=!1}else h=lf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(gn(i),i):(gn(i),null)}return gn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=u!==null,r=r!==null&&r.memoizedState!==null,a&&(u=i.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048)),a!==r&&a&&(i.child.flags|=8192),Ma(i,i.updateQueue),lt(i),null);case 4:return qe(),r===null&&bd(i.stateNode.containerInfo),lt(i),null;case 10:return or(i.type),lt(i),null;case 19:if(U(xt),u=i.memoizedState,u===null)return lt(i),null;if(h=(i.flags&128)!==0,m=u.rendering,m===null)if(h)Bl(u,!1);else{if(mt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=ha(r),m!==null){for(i.flags|=128,Bl(u,!1),r=m.updateQueue,i.updateQueue=r,Ma(i,r),i.subtreeFlags=0,r=a,a=i.child;a!==null;)Gm(a,r),a=a.sibling;return re(xt,xt.current&1|2),Ie&&ir(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&we()>Da&&(i.flags|=128,h=!0,Bl(u,!1),i.lanes=4194304)}else{if(!h)if(r=ha(m),r!==null){if(i.flags|=128,h=!0,r=r.updateQueue,i.updateQueue=r,Ma(i,r),Bl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Ie)return lt(i),null}else 2*we()-u.renderingStartTime>Da&&a!==536870912&&(i.flags|=128,h=!0,Bl(u,!1),i.lanes=4194304);u.isBackwards?(m.sibling=i.child,i.child=m):(r=u.last,r!==null?r.sibling=m:i.child=m,u.last=m)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=we(),r.sibling=null,a=xt.current,re(xt,h?a&1|2:a&1),Ie&&ir(i,u.treeForkCount),r):(lt(i),null);case 22:case 23:return gn(i),xf(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(a&536870912)!==0&&(i.flags&128)===0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),a=i.updateQueue,a!==null&&Ma(i,a.retryQueue),a=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==a&&(i.flags|=2048),r!==null&&U(Ds),null;case 24:return a=null,r!==null&&(a=r.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),or(kt),lt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Pk(r,i){switch(rf(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return or(kt),qe(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Se(i),null;case 31:if(i.memoizedState!==null){if(gn(i),i.alternate===null)throw Error(s(340));Ns()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(gn(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ns()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return U(xt),null;case 4:return qe(),null;case 10:return or(i.type),null;case 22:case 23:return gn(i),xf(),r!==null&&U(Ds),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return or(kt),null;case 25:return null;default:return null}}function yy(r,i){switch(rf(i),i.tag){case 3:or(kt),qe();break;case 26:case 27:case 5:Se(i);break;case 4:qe();break;case 31:i.memoizedState!==null&&gn(i);break;case 13:gn(i);break;case 19:U(xt);break;case 10:or(i.type);break;case 22:case 23:gn(i),xf(),r!==null&&U(Ds);break;case 24:or(kt)}}function Hl(r,i){try{var a=i.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var h=u.next;a=h;do{if((a.tag&r)===r){u=void 0;var m=a.create,S=a.inst;u=m(),S.destroy=u}a=a.next}while(a!==h)}}catch(T){Xe(i,i.return,T)}}function Ir(r,i,a){try{var u=i.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var m=h.next;u=m;do{if((u.tag&r)===r){var S=u.inst,T=S.destroy;if(T!==void 0){S.destroy=void 0,h=i;var N=a,z=T;try{z()}catch(q){Xe(h,N,q)}}}u=u.next}while(u!==m)}}catch(q){Xe(i,i.return,q)}}function by(r){var i=r.updateQueue;if(i!==null){var a=r.stateNode;try{ag(i,a)}catch(u){Xe(r,r.return,u)}}}function xy(r,i,a){a.props=_s(r.type,r.memoizedProps),a.state=r.memoizedState;try{a.componentWillUnmount()}catch(u){Xe(r,i,u)}}function Ul(r,i){try{var a=r.ref;if(a!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof a=="function"?r.refCleanup=a(u):a.current=u}}catch(h){Xe(r,i,h)}}function Pn(r,i){var a=r.ref,u=r.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(h){Xe(r,i,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Xe(r,i,h)}else a.current=null}function vy(r){var i=r.type,a=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(h){Xe(r,r.return,h)}}function Qf(r,i,a){try{var u=r.stateNode;mT(u,r.type,a,i),u[tn]=i}catch(h){Xe(r,r.return,h)}}function Sy(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Pr(r.type)||r.tag===4}function Zf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Sy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Pr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Wf(r,i,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(r,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(r),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=nr));else if(u!==4&&(u===27&&Pr(r.type)&&(a=r.stateNode,i=null),r=r.child,r!==null))for(Wf(r,i,a),r=r.sibling;r!==null;)Wf(r,i,a),r=r.sibling}function wa(r,i,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(u!==4&&(u===27&&Pr(r.type)&&(a=r.stateNode),r=r.child,r!==null))for(wa(r,i,a),r=r.sibling;r!==null;)wa(r,i,a),r=r.sibling}function ky(r){var i=r.stateNode,a=r.memoizedProps;try{for(var u=r.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Vt(i,u,a),i[Bt]=r,i[tn]=a}catch(m){Xe(r,r.return,m)}}var dr=!1,Ct=!1,ed=!1,Ty=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function Jk(r,i){if(r=r.containerInfo,Sd=Ja,r=Lm(r),Ku(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var h=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var S=0,T=-1,N=-1,z=0,q=0,K=r,_=null;t:for(;;){for(var B;K!==a||h!==0&&K.nodeType!==3||(T=S+h),K!==m||u!==0&&K.nodeType!==3||(N=S+u),K.nodeType===3&&(S+=K.nodeValue.length),(B=K.firstChild)!==null;)_=K,K=B;for(;;){if(K===r)break t;if(_===a&&++z===h&&(T=S),_===m&&++q===u&&(N=S),(B=K.nextSibling)!==null)break;K=_,_=K.parentNode}K=B}a=T===-1||N===-1?null:{start:T,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(kd={focusedElem:r,selectionRange:a},Ja=!1,Rt=i;Rt!==null;)if(i=Rt,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Rt=r;else for(;Rt!==null;){switch(i=Rt,m=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(a=0;a<r.length;a++)h=r[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,a=i,h=m.memoizedProps,m=m.memoizedState,u=a.stateNode;try{var oe=_s(a.type,h);r=u.getSnapshotBeforeUpdate(oe,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(ve){Xe(a,a.return,ve)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,a=r.nodeType,a===9)Cd(r);else if(a===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Cd(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Rt=r;break}Rt=i.return}}function Ey(r,i,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:pr(r,a),u&4&&Hl(5,a);break;case 1:if(pr(r,a),u&4)if(r=a.stateNode,i===null)try{r.componentDidMount()}catch(S){Xe(a,a.return,S)}else{var h=_s(a.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(h,i,r.__reactInternalSnapshotBeforeUpdate)}catch(S){Xe(a,a.return,S)}}u&64&&by(a),u&512&&Ul(a,a.return);break;case 3:if(pr(r,a),u&64&&(r=a.updateQueue,r!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{ag(r,i)}catch(S){Xe(a,a.return,S)}}break;case 27:i===null&&u&4&&ky(a);case 26:case 5:pr(r,a),i===null&&u&4&&vy(a),u&512&&Ul(a,a.return);break;case 12:pr(r,a);break;case 31:pr(r,a),u&4&&wy(r,a);break;case 13:pr(r,a),u&4&&Ny(r,a),u&64&&(r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(a=rT.bind(null,a),TT(r,a))));break;case 22:if(u=a.memoizedState!==null||dr,!u){i=i!==null&&i.memoizedState!==null||Ct,h=dr;var m=Ct;dr=u,(Ct=i)&&!m?mr(r,a,(a.subtreeFlags&8772)!==0):pr(r,a),dr=h,Ct=m}break;case 30:break;default:pr(r,a)}}function Cy(r){var i=r.alternate;i!==null&&(r.alternate=null,Cy(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Au(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ct=null,rn=!1;function hr(r,i,a){for(a=a.child;a!==null;)My(r,i,a),a=a.sibling}function My(r,i,a){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(cl,a)}catch{}switch(a.tag){case 26:Ct||Pn(a,i),hr(r,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ct||Pn(a,i);var u=ct,h=rn;Pr(a.type)&&(ct=a.stateNode,rn=!1),hr(r,i,a),Jl(a.stateNode),ct=u,rn=h;break;case 5:Ct||Pn(a,i);case 6:if(u=ct,h=rn,ct=null,hr(r,i,a),ct=u,rn=h,ct!==null)if(rn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(m){Xe(a,i,m)}else try{ct.removeChild(a.stateNode)}catch(m){Xe(a,i,m)}break;case 18:ct!==null&&(rn?(r=ct,b0(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.stateNode),$i(r)):b0(ct,a.stateNode));break;case 4:u=ct,h=rn,ct=a.stateNode.containerInfo,rn=!0,hr(r,i,a),ct=u,rn=h;break;case 0:case 11:case 14:case 15:Ir(2,a,i),Ct||Ir(4,a,i),hr(r,i,a);break;case 1:Ct||(Pn(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"&&xy(a,i,u)),hr(r,i,a);break;case 21:hr(r,i,a);break;case 22:Ct=(u=Ct)||a.memoizedState!==null,hr(r,i,a),Ct=u;break;default:hr(r,i,a)}}function wy(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{$i(r)}catch(a){Xe(i,i.return,a)}}}function Ny(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{$i(r)}catch(a){Xe(i,i.return,a)}}function Fk(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Ty),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Ty),i;default:throw Error(s(435,r.tag))}}function Na(r,i){var a=Fk(r);i.forEach(function(u){if(!a.has(u)){a.add(u);var h=sT.bind(null,r,u);u.then(h,h)}})}function sn(r,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var h=a[u],m=r,S=i,T=S;e:for(;T!==null;){switch(T.tag){case 27:if(Pr(T.type)){ct=T.stateNode,rn=!1;break e}break;case 5:ct=T.stateNode,rn=!1;break e;case 3:case 4:ct=T.stateNode.containerInfo,rn=!0;break e}T=T.return}if(ct===null)throw Error(s(160));My(m,S,h),ct=null,rn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Ay(i,r),i=i.sibling}var In=null;function Ay(r,i){var a=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:sn(i,r),ln(r),u&4&&(Ir(3,r,r.return),Hl(3,r),Ir(5,r,r.return));break;case 1:sn(i,r),ln(r),u&512&&(Ct||a===null||Pn(a,a.return)),u&64&&dr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(a=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var h=In;if(sn(i,r),ln(r),u&512&&(Ct||a===null||Pn(a,a.return)),u&4){var m=a!==null?a.memoizedState:null;if(u=r.memoizedState,a===null)if(u===null)if(r.stateNode===null){e:{u=r.type,a=r.memoizedProps,h=h.ownerDocument||h;t:switch(u){case"title":m=h.getElementsByTagName("title")[0],(!m||m[dl]||m[Bt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(u),h.head.insertBefore(m,h.querySelector("head > title"))),Vt(m,u,a),m[Bt]=r,jt(m),u=m;break e;case"link":var S=A0("link","href",h).get(u+(a.href||""));if(S){for(var T=0;T<S.length;T++)if(m=S[T],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(T,1);break t}}m=h.createElement(u),Vt(m,u,a),h.head.appendChild(m);break;case"meta":if(S=A0("meta","content",h).get(u+(a.content||""))){for(T=0;T<S.length;T++)if(m=S[T],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(T,1);break t}}m=h.createElement(u),Vt(m,u,a),h.head.appendChild(m);break;default:throw Error(s(468,u))}m[Bt]=r,jt(m),u=m}r.stateNode=u}else O0(h,r.type,r.stateNode);else r.stateNode=N0(h,u,r.memoizedProps);else m!==u?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,u===null?O0(h,r.type,r.stateNode):N0(h,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Qf(r,r.memoizedProps,a.memoizedProps)}break;case 27:sn(i,r),ln(r),u&512&&(Ct||a===null||Pn(a,a.return)),a!==null&&u&4&&Qf(r,r.memoizedProps,a.memoizedProps);break;case 5:if(sn(i,r),ln(r),u&512&&(Ct||a===null||Pn(a,a.return)),r.flags&32){h=r.stateNode;try{di(h,"")}catch(oe){Xe(r,r.return,oe)}}u&4&&r.stateNode!=null&&(h=r.memoizedProps,Qf(r,h,a!==null?a.memoizedProps:h)),u&1024&&(ed=!0);break;case 6:if(sn(i,r),ln(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,a=r.stateNode;try{a.nodeValue=u}catch(oe){Xe(r,r.return,oe)}}break;case 3:if(Ga=null,h=In,In=qa(i.containerInfo),sn(i,r),In=h,ln(r),u&4&&a!==null&&a.memoizedState.isDehydrated)try{$i(i.containerInfo)}catch(oe){Xe(r,r.return,oe)}ed&&(ed=!1,Oy(r));break;case 4:u=In,In=qa(r.stateNode.containerInfo),sn(i,r),ln(r),In=u;break;case 12:sn(i,r),ln(r);break;case 31:sn(i,r),ln(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Na(r,u)));break;case 13:sn(i,r),ln(r),r.child.flags&8192&&r.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Oa=we()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Na(r,u)));break;case 22:h=r.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,z=dr,q=Ct;if(dr=z||h,Ct=q||N,sn(i,r),Ct=q,dr=z,ln(r),u&8192)e:for(i=r.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||N||dr||Ct||Bs(r)),a=null,i=r;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(m=N.stateNode,h)S=m.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{T=N.stateNode;var K=N.memoizedProps.style,_=K!=null&&K.hasOwnProperty("display")?K.display:null;T.style.display=_==null||typeof _=="boolean"?"":(""+_).trim()}}catch(oe){Xe(N,N.return,oe)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(oe){Xe(N,N.return,oe)}}}else if(i.tag===18){if(a===null){N=i;try{var B=N.stateNode;h?x0(B,!0):x0(N.stateNode,!1)}catch(oe){Xe(N,N.return,oe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Na(r,a))));break;case 19:sn(i,r),ln(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Na(r,u)));break;case 30:break;case 21:break;default:sn(i,r),ln(r)}}function ln(r){var i=r.flags;if(i&2){try{for(var a,u=r.return;u!==null;){if(Sy(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,m=Zf(r);wa(r,m,h);break;case 5:var S=a.stateNode;a.flags&32&&(di(S,""),a.flags&=-33);var T=Zf(r);wa(r,T,S);break;case 3:case 4:var N=a.stateNode.containerInfo,z=Zf(r);Wf(r,z,N);break;default:throw Error(s(161))}}catch(q){Xe(r,r.return,q)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Oy(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;Oy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function pr(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ey(r,i.alternate,i),i=i.sibling}function Bs(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ir(4,i,i.return),Bs(i);break;case 1:Pn(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&xy(i,i.return,a),Bs(i);break;case 27:Jl(i.stateNode);case 26:case 5:Pn(i,i.return),Bs(i);break;case 22:i.memoizedState===null&&Bs(i);break;case 30:Bs(i);break;default:Bs(i)}r=r.sibling}}function mr(r,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,h=r,m=i,S=m.flags;switch(m.tag){case 0:case 11:case 15:mr(h,m,a),Hl(4,m);break;case 1:if(mr(h,m,a),u=m,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){Xe(u,u.return,z)}if(u=m,h=u.updateQueue,h!==null){var T=u.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)og(N[h],T)}catch(z){Xe(u,u.return,z)}}a&&S&64&&by(m),Ul(m,m.return);break;case 27:ky(m);case 26:case 5:mr(h,m,a),a&&u===null&&S&4&&vy(m),Ul(m,m.return);break;case 12:mr(h,m,a);break;case 31:mr(h,m,a),a&&S&4&&wy(h,m);break;case 13:mr(h,m,a),a&&S&4&&Ny(h,m);break;case 22:m.memoizedState===null&&mr(h,m,a),Ul(m,m.return);break;case 30:break;default:mr(h,m,a)}i=i.sibling}}function td(r,i){var a=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==a&&(r!=null&&r.refCount++,a!=null&&Cl(a))}function nd(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Cl(r))}function Vn(r,i,a,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Dy(r,i,a,u),i=i.sibling}function Dy(r,i,a,u){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Vn(r,i,a,u),h&2048&&Hl(9,i);break;case 1:Vn(r,i,a,u);break;case 3:Vn(r,i,a,u),h&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Cl(r)));break;case 12:if(h&2048){Vn(r,i,a,u),r=i.stateNode;try{var m=i.memoizedProps,S=m.id,T=m.onPostCommit;typeof T=="function"&&T(S,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(N){Xe(i,i.return,N)}}else Vn(r,i,a,u);break;case 31:Vn(r,i,a,u);break;case 13:Vn(r,i,a,u);break;case 23:break;case 22:m=i.stateNode,S=i.alternate,i.memoizedState!==null?m._visibility&2?Vn(r,i,a,u):Il(r,i):m._visibility&2?Vn(r,i,a,u):(m._visibility|=2,ji(r,i,a,u,(i.subtreeFlags&10256)!==0||!1)),h&2048&&td(S,i);break;case 24:Vn(r,i,a,u),h&2048&&nd(i.alternate,i);break;default:Vn(r,i,a,u)}}function ji(r,i,a,u,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=r,S=i,T=a,N=u,z=S.flags;switch(S.tag){case 0:case 11:case 15:ji(m,S,T,N,h),Hl(8,S);break;case 23:break;case 22:var q=S.stateNode;S.memoizedState!==null?q._visibility&2?ji(m,S,T,N,h):Il(m,S):(q._visibility|=2,ji(m,S,T,N,h)),h&&z&2048&&td(S.alternate,S);break;case 24:ji(m,S,T,N,h),h&&z&2048&&nd(S.alternate,S);break;default:ji(m,S,T,N,h)}i=i.sibling}}function Il(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=r,u=i,h=u.flags;switch(u.tag){case 22:Il(a,u),h&2048&&td(u.alternate,u);break;case 24:Il(a,u),h&2048&&nd(u.alternate,u);break;default:Il(a,u)}i=i.sibling}}var Vl=8192;function Ri(r,i,a){if(r.subtreeFlags&Vl)for(r=r.child;r!==null;)jy(r,i,a),r=r.sibling}function jy(r,i,a){switch(r.tag){case 26:Ri(r,i,a),r.flags&Vl&&r.memoizedState!==null&&LT(a,In,r.memoizedState,r.memoizedProps);break;case 5:Ri(r,i,a);break;case 3:case 4:var u=In;In=qa(r.stateNode.containerInfo),Ri(r,i,a),In=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Vl,Vl=16777216,Ri(r,i,a),Vl=u):Ri(r,i,a));break;default:Ri(r,i,a)}}function Ry(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function ql(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];Rt=u,Ly(u,r)}Ry(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zy(r),r=r.sibling}function zy(r){switch(r.tag){case 0:case 11:case 15:ql(r),r.flags&2048&&Ir(9,r,r.return);break;case 3:ql(r);break;case 12:ql(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Aa(r)):ql(r);break;default:ql(r)}}function Aa(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];Rt=u,Ly(u,r)}Ry(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ir(8,i,i.return),Aa(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Aa(i));break;default:Aa(i)}r=r.sibling}}function Ly(r,i){for(;Rt!==null;){var a=Rt;switch(a.tag){case 0:case 11:case 15:Ir(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Cl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Rt=u;else e:for(a=r;Rt!==null;){u=Rt;var h=u.sibling,m=u.return;if(Cy(u),u===a){Rt=null;break e}if(h!==null){h.return=m,Rt=h;break e}Rt=m}}}var Xk={getCacheForType:function(r){var i=Ut(kt),a=i.data.get(r);return a===void 0&&(a=r(),i.data.set(r,a)),a},cacheSignal:function(){return Ut(kt).controller.signal}},Qk=typeof WeakMap=="function"?WeakMap:Map,Pe=0,tt=null,_e=null,He=0,Fe=0,yn=null,Vr=!1,zi=!1,rd=!1,gr=0,mt=0,qr=0,Hs=0,sd=0,bn=0,Li=0,$l=null,on=null,id=!1,Oa=0,_y=0,Da=1/0,ja=null,$r=null,At=0,Gr=null,_i=null,yr=0,ld=0,od=null,By=null,Gl=0,ad=null;function xn(){return(Pe&2)!==0&&He!==0?He&-He:H.T!==null?pd():Wp()}function Hy(){if(bn===0)if((He&536870912)===0||Ie){var r=Io;Io<<=1,(Io&3932160)===0&&(Io=262144),bn=r}else bn=536870912;return r=mn.current,r!==null&&(r.flags|=32),bn}function an(r,i,a){(r===tt&&(Fe===2||Fe===9)||r.cancelPendingCommit!==null)&&(Bi(r,0),Yr(r,He,bn,!1)),fl(r,a),((Pe&2)===0||r!==tt)&&(r===tt&&((Pe&2)===0&&(Hs|=a),mt===4&&Yr(r,He,bn,!1)),Jn(r))}function Uy(r,i,a){if((Pe&6)!==0)throw Error(s(327));var u=!a&&(i&127)===0&&(i&r.expiredLanes)===0||ul(r,i),h=u?eT(r,i):ud(r,i,!0),m=u;do{if(h===0){zi&&!u&&Yr(r,i,0,!1);break}else{if(a=r.current.alternate,m&&!Zk(a)){h=ud(r,i,!1),m=!1;continue}if(h===2){if(m=i,r.errorRecoveryDisabledLanes&m)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var T=r;h=$l;var N=T.current.memoizedState.isDehydrated;if(N&&(Bi(T,S).flags|=256),S=ud(T,S,!1),S!==2){if(rd&&!N){T.errorRecoveryDisabledLanes|=m,Hs|=m,h=4;break e}m=on,on=h,m!==null&&(on===null?on=m:on.push.apply(on,m))}h=S}if(m=!1,h!==2)continue}}if(h===1){Bi(r,0),Yr(r,i,0,!0);break}e:{switch(u=r,m=h,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Yr(u,i,bn,!Vr);break e;case 2:on=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Oa+300-we(),10<h)){if(Yr(u,i,bn,!Vr),qo(u,0,!0)!==0)break e;yr=i,u.timeoutHandle=g0(Iy.bind(null,u,a,on,ja,id,i,bn,Hs,Li,Vr,m,"Throttled",-0,0),h);break e}Iy(u,a,on,ja,id,i,bn,Hs,Li,Vr,m,null,-0,0)}}break}while(!0);Jn(r)}function Iy(r,i,a,u,h,m,S,T,N,z,q,K,_,B){if(r.timeoutHandle=-1,K=i.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:nr},jy(i,m,K);var oe=(m&62914560)===m?Oa-we():(m&4194048)===m?_y-we():0;if(oe=_T(K,oe),oe!==null){yr=m,r.cancelPendingCommit=oe(Jy.bind(null,r,i,m,a,u,h,S,T,N,q,K,null,_,B)),Yr(r,m,S,!z);return}}Jy(r,i,m,a,u,h,S,T,N)}function Zk(r){for(var i=r;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var h=a[u],m=h.getSnapshot;h=h.value;try{if(!hn(m(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Yr(r,i,a,u){i&=~sd,i&=~Hs,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var h=i;0<h;){var m=31-dn(h),S=1<<m;u[m]=-1,h&=~S}a!==0&&Xp(r,a,i)}function Ra(){return(Pe&6)===0?(Yl(0),!1):!0}function cd(){if(_e!==null){if(Fe===0)var r=_e.return;else r=_e,lr=As=null,Cf(r),wi=null,wl=0,r=_e;for(;r!==null;)yy(r.alternate,r),r=r.return;_e=null}}function Bi(r,i){var a=r.timeoutHandle;a!==-1&&(r.timeoutHandle=-1,bT(a)),a=r.cancelPendingCommit,a!==null&&(r.cancelPendingCommit=null,a()),yr=0,cd(),tt=r,_e=a=sr(r.current,null),He=i,Fe=0,yn=null,Vr=!1,zi=ul(r,i),rd=!1,Li=bn=sd=Hs=qr=mt=0,on=$l=null,id=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var h=31-dn(u),m=1<<h;i|=r[h],u&=~m}return gr=i,ea(),a}function Vy(r,i){Ce=null,H.H=Ll,i===Mi||i===aa?(i=rg(),Fe=3):i===hf?(i=rg(),Fe=4):Fe=i===Vf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,yn=i,_e===null&&(mt=1,ka(r,Mn(i,r.current)))}function qy(){var r=mn.current;return r===null?!0:(He&4194048)===He?On===null:(He&62914560)===He||(He&536870912)!==0?r===On:!1}function $y(){var r=H.H;return H.H=Ll,r===null?Ll:r}function Gy(){var r=H.A;return H.A=Xk,r}function za(){mt=4,Vr||(He&4194048)!==He&&mn.current!==null||(zi=!0),(qr&134217727)===0&&(Hs&134217727)===0||tt===null||Yr(tt,He,bn,!1)}function ud(r,i,a){var u=Pe;Pe|=2;var h=$y(),m=Gy();(tt!==r||He!==i)&&(ja=null,Bi(r,i)),i=!1;var S=mt;e:do try{if(Fe!==0&&_e!==null){var T=_e,N=yn;switch(Fe){case 8:cd(),S=6;break e;case 3:case 2:case 9:case 6:mn.current===null&&(i=!0);var z=Fe;if(Fe=0,yn=null,Hi(r,T,N,z),a&&zi){S=0;break e}break;default:z=Fe,Fe=0,yn=null,Hi(r,T,N,z)}}Wk(),S=mt;break}catch(q){Vy(r,q)}while(!0);return i&&r.shellSuspendCounter++,lr=As=null,Pe=u,H.H=h,H.A=m,_e===null&&(tt=null,He=0,ea()),S}function Wk(){for(;_e!==null;)Yy(_e)}function eT(r,i){var a=Pe;Pe|=2;var u=$y(),h=Gy();tt!==r||He!==i?(ja=null,Da=we()+500,Bi(r,i)):zi=ul(r,i);e:do try{if(Fe!==0&&_e!==null){i=_e;var m=yn;t:switch(Fe){case 1:Fe=0,yn=null,Hi(r,i,m,1);break;case 2:case 9:if(tg(m)){Fe=0,yn=null,Ky(i);break}i=function(){Fe!==2&&Fe!==9||tt!==r||(Fe=7),Jn(r)},m.then(i,i);break e;case 3:Fe=7;break e;case 4:Fe=5;break e;case 7:tg(m)?(Fe=0,yn=null,Ky(i)):(Fe=0,yn=null,Hi(r,i,m,7));break;case 5:var S=null;switch(_e.tag){case 26:S=_e.memoizedState;case 5:case 27:var T=_e;if(S?D0(S):T.stateNode.complete){Fe=0,yn=null;var N=T.sibling;if(N!==null)_e=N;else{var z=T.return;z!==null?(_e=z,La(z)):_e=null}break t}}Fe=0,yn=null,Hi(r,i,m,5);break;case 6:Fe=0,yn=null,Hi(r,i,m,6);break;case 8:cd(),mt=6;break e;default:throw Error(s(462))}}tT();break}catch(q){Vy(r,q)}while(!0);return lr=As=null,H.H=u,H.A=h,Pe=a,_e!==null?0:(tt=null,He=0,ea(),mt)}function tT(){for(;_e!==null&&!te();)Yy(_e)}function Yy(r){var i=my(r.alternate,r,gr);r.memoizedProps=r.pendingProps,i===null?La(r):_e=i}function Ky(r){var i=r,a=i.alternate;switch(i.tag){case 15:case 0:i=cy(a,i,i.pendingProps,i.type,void 0,He);break;case 11:i=cy(a,i,i.pendingProps,i.type.render,i.ref,He);break;case 5:Cf(i);default:yy(a,i),i=_e=Gm(i,gr),i=my(a,i,gr)}r.memoizedProps=r.pendingProps,i===null?La(r):_e=i}function Hi(r,i,a,u){lr=As=null,Cf(i),wi=null,wl=0;var h=i.return;try{if($k(r,h,i,a,He)){mt=1,ka(r,Mn(a,r.current)),_e=null;return}}catch(m){if(h!==null)throw _e=h,m;mt=1,ka(r,Mn(a,r.current)),_e=null;return}i.flags&32768?(Ie||u===1?r=!0:zi||(He&536870912)!==0?r=!1:(Vr=r=!0,(u===2||u===9||u===3||u===6)&&(u=mn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Py(i,r)):La(i)}function La(r){var i=r;do{if((i.flags&32768)!==0){Py(i,Vr);return}r=i.return;var a=Kk(i.alternate,i,gr);if(a!==null){_e=a;return}if(i=i.sibling,i!==null){_e=i;return}_e=i=r}while(i!==null);mt===0&&(mt=5)}function Py(r,i){do{var a=Pk(r.alternate,r);if(a!==null){a.flags&=32767,_e=a;return}if(a=r.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(r=r.sibling,r!==null)){_e=r;return}_e=r=a}while(r!==null);mt=6,_e=null}function Jy(r,i,a,u,h,m,S,T,N){r.cancelPendingCommit=null;do _a();while(At!==0);if((Pe&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=Qu,zS(r,a,m,S,T,N),r===tt&&(_e=tt=null,He=0),_i=i,Gr=r,yr=a,ld=m,od=h,By=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,iT(Dt,function(){return Wy(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,h=Z.p,Z.p=2,S=Pe,Pe|=4;try{Jk(r,i,a)}finally{Pe=S,Z.p=h,H.T=u}}At=1,Fy(),Xy(),Qy()}}function Fy(){if(At===1){At=0;var r=Gr,i=_i,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var u=Z.p;Z.p=2;var h=Pe;Pe|=4;try{Ay(i,r);var m=kd,S=Lm(r.containerInfo),T=m.focusedElem,N=m.selectionRange;if(S!==T&&T&&T.ownerDocument&&zm(T.ownerDocument.documentElement,T)){if(N!==null&&Ku(T)){var z=N.start,q=N.end;if(q===void 0&&(q=z),"selectionStart"in T)T.selectionStart=z,T.selectionEnd=Math.min(q,T.value.length);else{var K=T.ownerDocument||document,_=K&&K.defaultView||window;if(_.getSelection){var B=_.getSelection(),oe=T.textContent.length,ve=Math.min(N.start,oe),et=N.end===void 0?ve:Math.min(N.end,oe);!B.extend&&ve>et&&(S=et,et=ve,ve=S);var D=Rm(T,ve),O=Rm(T,et);if(D&&O&&(B.rangeCount!==1||B.anchorNode!==D.node||B.anchorOffset!==D.offset||B.focusNode!==O.node||B.focusOffset!==O.offset)){var R=K.createRange();R.setStart(D.node,D.offset),B.removeAllRanges(),ve>et?(B.addRange(R),B.extend(O.node,O.offset)):(R.setEnd(O.node,O.offset),B.addRange(R))}}}}for(K=[],B=T;B=B.parentNode;)B.nodeType===1&&K.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<K.length;T++){var G=K[T];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}Ja=!!Sd,kd=Sd=null}finally{Pe=h,Z.p=u,H.T=a}}r.current=i,At=2}}function Xy(){if(At===2){At=0;var r=Gr,i=_i,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var u=Z.p;Z.p=2;var h=Pe;Pe|=4;try{Ey(r,i.alternate,i)}finally{Pe=h,Z.p=u,H.T=a}}At=3}}function Qy(){if(At===4||At===3){At=0,he();var r=Gr,i=_i,a=yr,u=By;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?At=5:(At=0,_i=Gr=null,Zy(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&($r=null),wu(a),i=i.stateNode,fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(cl,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=H.T,h=Z.p,Z.p=2,H.T=null;try{for(var m=r.onRecoverableError,S=0;S<u.length;S++){var T=u[S];m(T.value,{componentStack:T.stack})}}finally{H.T=i,Z.p=h}}(yr&3)!==0&&_a(),Jn(r),h=r.pendingLanes,(a&261930)!==0&&(h&42)!==0?r===ad?Gl++:(Gl=0,ad=r):Gl=0,Yl(0)}}function Zy(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Cl(i)))}function _a(){return Fy(),Xy(),Qy(),Wy()}function Wy(){if(At!==5)return!1;var r=Gr,i=ld;ld=0;var a=wu(yr),u=H.T,h=Z.p;try{Z.p=32>a?32:a,H.T=null,a=od,od=null;var m=Gr,S=yr;if(At=0,_i=Gr=null,yr=0,(Pe&6)!==0)throw Error(s(331));var T=Pe;if(Pe|=4,zy(m.current),Dy(m,m.current,S,a),Pe=T,Yl(0,!1),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(cl,m)}catch{}return!0}finally{Z.p=h,H.T=u,Zy(r,i)}}function e0(r,i,a){i=Mn(a,i),i=If(r.stateNode,i,2),r=Br(r,i,2),r!==null&&(fl(r,2),Jn(r))}function Xe(r,i,a){if(r.tag===3)e0(r,r,a);else for(;i!==null;){if(i.tag===3){e0(i,r,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&($r===null||!$r.has(u))){r=Mn(a,r),a=ty(2),u=Br(i,a,2),u!==null&&(ny(a,u,i,r),fl(u,2),Jn(u));break}}i=i.return}}function fd(r,i,a){var u=r.pingCache;if(u===null){u=r.pingCache=new Qk;var h=new Set;u.set(i,h)}else h=u.get(i),h===void 0&&(h=new Set,u.set(i,h));h.has(a)||(rd=!0,h.add(a),r=nT.bind(null,r,i,a),i.then(r,r))}function nT(r,i,a){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&a,r.warmLanes&=~a,tt===r&&(He&a)===a&&(mt===4||mt===3&&(He&62914560)===He&&300>we()-Oa?(Pe&2)===0&&Bi(r,0):sd|=a,Li===He&&(Li=0)),Jn(r)}function t0(r,i){i===0&&(i=Fp()),r=Ms(r,i),r!==null&&(fl(r,i),Jn(r))}function rT(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),t0(r,a)}function sT(r,i){var a=0;switch(r.tag){case 31:case 13:var u=r.stateNode,h=r.memoizedState;h!==null&&(a=h.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),t0(r,a)}function iT(r,i){return fe(r,i)}var Ba=null,Ui=null,dd=!1,Ha=!1,hd=!1,Kr=0;function Jn(r){r!==Ui&&r.next===null&&(Ui===null?Ba=Ui=r:Ui=Ui.next=r),Ha=!0,dd||(dd=!0,oT())}function Yl(r,i){if(!hd&&Ha){hd=!0;do for(var a=!1,u=Ba;u!==null;){if(r!==0){var h=u.pendingLanes;if(h===0)var m=0;else{var S=u.suspendedLanes,T=u.pingedLanes;m=(1<<31-dn(42|r)+1)-1,m&=h&~(S&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,i0(u,m))}else m=He,m=qo(u,u===tt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ul(u,m)||(a=!0,i0(u,m));u=u.next}while(a);hd=!1}}function lT(){n0()}function n0(){Ha=dd=!1;var r=0;Kr!==0&&yT()&&(r=Kr);for(var i=we(),a=null,u=Ba;u!==null;){var h=u.next,m=r0(u,i);m===0?(u.next=null,a===null?Ba=h:a.next=h,h===null&&(Ui=a)):(a=u,(r!==0||(m&3)!==0)&&(Ha=!0)),u=h}At!==0&&At!==5||Yl(r),Kr!==0&&(Kr=0)}function r0(r,i){for(var a=r.suspendedLanes,u=r.pingedLanes,h=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var S=31-dn(m),T=1<<S,N=h[S];N===-1?((T&a)===0||(T&u)!==0)&&(h[S]=RS(T,i)):N<=i&&(r.expiredLanes|=T),m&=~T}if(i=tt,a=He,a=qo(r,r===i?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,a===0||r===i&&(Fe===2||Fe===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&ce(u),r.callbackNode=null,r.callbackPriority=0;if((a&3)===0||ul(r,a)){if(i=a&-a,i===r.callbackPriority)return i;switch(u!==null&&ce(u),wu(a)){case 2:case 8:a=Xt;break;case 32:a=Dt;break;case 268435456:a=Jp;break;default:a=Dt}return u=s0.bind(null,r),a=fe(a,u),r.callbackPriority=i,r.callbackNode=a,i}return u!==null&&u!==null&&ce(u),r.callbackPriority=2,r.callbackNode=null,2}function s0(r,i){if(At!==0&&At!==5)return r.callbackNode=null,r.callbackPriority=0,null;var a=r.callbackNode;if(_a()&&r.callbackNode!==a)return null;var u=He;return u=qo(r,r===tt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(Uy(r,u,i),r0(r,we()),r.callbackNode!=null&&r.callbackNode===a?s0.bind(null,r):null)}function i0(r,i){if(_a())return null;Uy(r,i,!0)}function oT(){xT(function(){(Pe&6)!==0?fe(bt,lT):n0()})}function pd(){if(Kr===0){var r=Ei;r===0&&(r=Uo,Uo<<=1,(Uo&261888)===0&&(Uo=256)),Kr=r}return Kr}function l0(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ko(""+r)}function o0(r,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,r.id&&a.setAttribute("form",r.id),i.parentNode.insertBefore(a,i),r=new FormData(r),a.parentNode.removeChild(a),r}function aT(r,i,a,u,h){if(i==="submit"&&a&&a.stateNode===h){var m=l0((h[tn]||null).action),S=u.submitter;S&&(i=(i=S[tn]||null)?l0(i.formAction):S.getAttribute("formAction"),i!==null&&(m=i,S=null));var T=new Xo("action","action",null,u,h);r.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Kr!==0){var N=S?o0(h,S):new FormData(h);zf(a,{pending:!0,data:N,method:h.method,action:m},null,N)}}else typeof m=="function"&&(T.preventDefault(),N=S?o0(h,S):new FormData(h),zf(a,{pending:!0,data:N,method:h.method,action:m},m,N))},currentTarget:h}]})}}for(var md=0;md<Xu.length;md++){var gd=Xu[md],cT=gd.toLowerCase(),uT=gd[0].toUpperCase()+gd.slice(1);Un(cT,"on"+uT)}Un(Hm,"onAnimationEnd"),Un(Um,"onAnimationIteration"),Un(Im,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(Mk,"onTransitionRun"),Un(wk,"onTransitionStart"),Un(Nk,"onTransitionCancel"),Un(Vm,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ks("onBeforeInput",["compositionend","keypress","textInput","paste"]),ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kl));function a0(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var u=r[a],h=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var S=u.length-1;0<=S;S--){var T=u[S],N=T.instance,z=T.currentTarget;if(T=T.listener,N!==m&&h.isPropagationStopped())break e;m=T,h.currentTarget=z;try{m(h)}catch(q){Wo(q)}h.currentTarget=null,m=N}else for(S=0;S<u.length;S++){if(T=u[S],N=T.instance,z=T.currentTarget,T=T.listener,N!==m&&h.isPropagationStopped())break e;m=T,h.currentTarget=z;try{m(h)}catch(q){Wo(q)}h.currentTarget=null,m=N}}}}function Be(r,i){var a=i[Nu];a===void 0&&(a=i[Nu]=new Set);var u=r+"__bubble";a.has(u)||(c0(i,r,2,!1),a.add(u))}function yd(r,i,a){var u=0;i&&(u|=4),c0(a,r,u,i)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function bd(r){if(!r[Ua]){r[Ua]=!0,nm.forEach(function(a){a!=="selectionchange"&&(fT.has(a)||yd(a,!1,r),yd(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Ua]||(i[Ua]=!0,yd("selectionchange",!1,i))}}function c0(r,i,a,u){switch(H0(i)){case 2:var h=UT;break;case 8:h=IT;break;default:h=Rd}a=h.bind(null,i,a,r),h=void 0,!Bu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),u?h!==void 0?r.addEventListener(i,a,{capture:!0,passive:h}):r.addEventListener(i,a,!0):h!==void 0?r.addEventListener(i,a,{passive:h}):r.addEventListener(i,a,!1)}function xd(r,i,a,u,h){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var T=u.stateNode.containerInfo;if(T===h)break;if(S===4)for(S=u.return;S!==null;){var N=S.tag;if((N===3||N===4)&&S.stateNode.containerInfo===h)return;S=S.return}for(;T!==null;){if(S=oi(T),S===null)return;if(N=S.tag,N===5||N===6||N===26||N===27){u=m=S;continue e}T=T.parentNode}}u=u.return}pm(function(){var z=m,q=Lu(a),K=[];e:{var _=qm.get(r);if(_!==void 0){var B=Xo,oe=r;switch(r){case"keypress":if(Jo(a)===0)break e;case"keydown":case"keyup":B=sk;break;case"focusin":oe="focus",B=Vu;break;case"focusout":oe="blur",B=Vu;break;case"beforeblur":case"afterblur":B=Vu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=ym;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=KS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=ok;break;case Hm:case Um:case Im:B=FS;break;case Vm:B=ck;break;case"scroll":case"scrollend":B=GS;break;case"wheel":B=fk;break;case"copy":case"cut":case"paste":B=QS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=xm;break;case"toggle":case"beforetoggle":B=hk}var ve=(i&4)!==0,et=!ve&&(r==="scroll"||r==="scrollend"),D=ve?_!==null?_+"Capture":null:_;ve=[];for(var O=z,R;O!==null;){var G=O;if(R=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||R===null||D===null||(G=pl(O,D),G!=null&&ve.push(Pl(O,G,R))),et)break;O=O.return}0<ve.length&&(_=new B(_,oe,null,a,q),K.push({event:_,listeners:ve}))}}if((i&7)===0){e:{if(_=r==="mouseover"||r==="pointerover",B=r==="mouseout"||r==="pointerout",_&&a!==zu&&(oe=a.relatedTarget||a.fromElement)&&(oi(oe)||oe[li]))break e;if((B||_)&&(_=q.window===q?q:(_=q.ownerDocument)?_.defaultView||_.parentWindow:window,B?(oe=a.relatedTarget||a.toElement,B=z,oe=oe?oi(oe):null,oe!==null&&(et=o(oe),ve=oe.tag,oe!==et||ve!==5&&ve!==27&&ve!==6)&&(oe=null)):(B=null,oe=z),B!==oe)){if(ve=ym,G="onMouseLeave",D="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(ve=xm,G="onPointerLeave",D="onPointerEnter",O="pointer"),et=B==null?_:hl(B),R=oe==null?_:hl(oe),_=new ve(G,O+"leave",B,a,q),_.target=et,_.relatedTarget=R,G=null,oi(q)===z&&(ve=new ve(D,O+"enter",oe,a,q),ve.target=R,ve.relatedTarget=et,G=ve),et=G,B&&oe)t:{for(ve=dT,D=B,O=oe,R=0,G=D;G;G=ve(G))R++;G=0;for(var ye=O;ye;ye=ve(ye))G++;for(;0<R-G;)D=ve(D),R--;for(;0<G-R;)O=ve(O),G--;for(;R--;){if(D===O||O!==null&&D===O.alternate){ve=D;break t}D=ve(D),O=ve(O)}ve=null}else ve=null;B!==null&&u0(K,_,B,ve,!1),oe!==null&&et!==null&&u0(K,et,oe,ve,!0)}}e:{if(_=z?hl(z):window,B=_.nodeName&&_.nodeName.toLowerCase(),B==="select"||B==="input"&&_.type==="file")var Ge=wm;else if(Cm(_))if(Nm)Ge=Tk;else{Ge=Sk;var de=vk}else B=_.nodeName,!B||B.toLowerCase()!=="input"||_.type!=="checkbox"&&_.type!=="radio"?z&&Ru(z.elementType)&&(Ge=wm):Ge=kk;if(Ge&&(Ge=Ge(r,z))){Mm(K,Ge,a,q);break e}de&&de(r,_,z),r==="focusout"&&z&&_.type==="number"&&z.memoizedProps.value!=null&&ju(_,"number",_.value)}switch(de=z?hl(z):window,r){case"focusin":(Cm(de)||de.contentEditable==="true")&&(gi=de,Pu=z,kl=null);break;case"focusout":kl=Pu=gi=null;break;case"mousedown":Ju=!0;break;case"contextmenu":case"mouseup":case"dragend":Ju=!1,_m(K,a,q);break;case"selectionchange":if(Ck)break;case"keydown":case"keyup":_m(K,a,q)}var Ne;if($u)e:{switch(r){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else mi?Tm(r,a)&&(Ue="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ue="onCompositionStart");Ue&&(vm&&a.locale!=="ko"&&(mi||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&mi&&(Ne=mm()):(Or=q,Hu="value"in Or?Or.value:Or.textContent,mi=!0)),de=Ia(z,Ue),0<de.length&&(Ue=new bm(Ue,r,null,a,q),K.push({event:Ue,listeners:de}),Ne?Ue.data=Ne:(Ne=Em(a),Ne!==null&&(Ue.data=Ne)))),(Ne=mk?gk(r,a):yk(r,a))&&(Ue=Ia(z,"onBeforeInput"),0<Ue.length&&(de=new bm("onBeforeInput","beforeinput",null,a,q),K.push({event:de,listeners:Ue}),de.data=Ne)),aT(K,r,z,a,q)}a0(K,i)})}function Pl(r,i,a){return{instance:r,listener:i,currentTarget:a}}function Ia(r,i){for(var a=i+"Capture",u=[];r!==null;){var h=r,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=pl(r,a),h!=null&&u.unshift(Pl(r,h,m)),h=pl(r,i),h!=null&&u.push(Pl(r,h,m))),r.tag===3)return u;r=r.return}return[]}function dT(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function u0(r,i,a,u,h){for(var m=i._reactName,S=[];a!==null&&a!==u;){var T=a,N=T.alternate,z=T.stateNode;if(T=T.tag,N!==null&&N===u)break;T!==5&&T!==26&&T!==27||z===null||(N=z,h?(z=pl(a,m),z!=null&&S.unshift(Pl(a,z,N))):h||(z=pl(a,m),z!=null&&S.push(Pl(a,z,N)))),a=a.return}S.length!==0&&r.push({event:i,listeners:S})}var hT=/\r\n?/g,pT=/\u0000|\uFFFD/g;function f0(r){return(typeof r=="string"?r:""+r).replace(hT,`
`).replace(pT,"")}function d0(r,i){return i=f0(i),f0(r)===i}function We(r,i,a,u,h,m){switch(a){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||di(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&di(r,""+u);break;case"className":Go(r,"class",u);break;case"tabIndex":Go(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Go(r,a,u);break;case"style":dm(r,u,m);break;case"data":if(i!=="object"){Go(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||a!=="href")){r.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=Ko(""+u),r.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&We(r,i,"name",h.name,h,null),We(r,i,"formEncType",h.formEncType,h,null),We(r,i,"formMethod",h.formMethod,h,null),We(r,i,"formTarget",h.formTarget,h,null)):(We(r,i,"encType",h.encType,h,null),We(r,i,"method",h.method,h,null),We(r,i,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=Ko(""+u),r.setAttribute(a,u);break;case"onClick":u!=null&&(r.onclick=nr);break;case"onScroll":u!=null&&Be("scroll",r);break;case"onScrollEnd":u!=null&&Be("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(h.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}a=Ko(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""+u):r.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""):r.removeAttribute(a);break;case"capture":case"download":u===!0?r.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,u):r.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(a,u):r.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(a):r.setAttribute(a,u);break;case"popover":Be("beforetoggle",r),Be("toggle",r),$o(r,"popover",u);break;case"xlinkActuate":tr(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":tr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":tr(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":tr(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":tr(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":tr(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":tr(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":tr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":tr(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":$o(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=qS.get(a)||a,$o(r,a,u))}}function vd(r,i,a,u,h,m){switch(a){case"style":dm(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(h.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"children":typeof u=="string"?di(r,u):(typeof u=="number"||typeof u=="bigint")&&di(r,""+u);break;case"onScroll":u!=null&&Be("scroll",r);break;case"onScrollEnd":u!=null&&Be("scrollend",r);break;case"onClick":u!=null&&(r.onclick=nr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rm.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),m=r[tn]||null,m=m!=null?m[a]:null,typeof m=="function"&&r.removeEventListener(i,m,h),typeof u=="function")){typeof m!="function"&&m!==null&&(a in r?r[a]=null:r.hasAttribute(a)&&r.removeAttribute(a)),r.addEventListener(i,u,h);break e}a in r?r[a]=u:u===!0?r.setAttribute(a,""):$o(r,a,u)}}}function Vt(r,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",r),Be("load",r);var u=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var S=a[m];if(S!=null)switch(m){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:We(r,i,m,S,a,null)}}h&&We(r,i,"srcSet",a.srcSet,a,null),u&&We(r,i,"src",a.src,a,null);return;case"input":Be("invalid",r);var T=m=S=h=null,N=null,z=null;for(u in a)if(a.hasOwnProperty(u)){var q=a[u];if(q!=null)switch(u){case"name":h=q;break;case"type":S=q;break;case"checked":N=q;break;case"defaultChecked":z=q;break;case"value":m=q;break;case"defaultValue":T=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:We(r,i,u,q,a,null)}}am(r,m,T,N,z,S,h,!1);return;case"select":Be("invalid",r),u=S=m=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":m=T;break;case"defaultValue":S=T;break;case"multiple":u=T;default:We(r,i,h,T,a,null)}i=m,a=S,r.multiple=!!u,i!=null?fi(r,!!u,i,!1):a!=null&&fi(r,!!u,a,!0);return;case"textarea":Be("invalid",r),m=h=u=null;for(S in a)if(a.hasOwnProperty(S)&&(T=a[S],T!=null))switch(S){case"value":u=T;break;case"defaultValue":h=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:We(r,i,S,T,a,null)}um(r,u,h,m);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(u=a[N],u!=null))switch(N){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:We(r,i,N,u,a,null)}return;case"dialog":Be("beforetoggle",r),Be("toggle",r),Be("cancel",r),Be("close",r);break;case"iframe":case"object":Be("load",r);break;case"video":case"audio":for(u=0;u<Kl.length;u++)Be(Kl[u],r);break;case"image":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"embed":case"source":case"link":Be("error",r),Be("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(u=a[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:We(r,i,z,u,a,null)}return;default:if(Ru(i)){for(q in a)a.hasOwnProperty(q)&&(u=a[q],u!==void 0&&vd(r,i,q,u,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(u=a[T],u!=null&&We(r,i,T,u,a,null))}function mT(r,i,a,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,S=null,T=null,N=null,z=null,q=null;for(B in a){var K=a[B];if(a.hasOwnProperty(B)&&K!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":N=K;default:u.hasOwnProperty(B)||We(r,i,B,null,u,K)}}for(var _ in u){var B=u[_];if(K=a[_],u.hasOwnProperty(_)&&(B!=null||K!=null))switch(_){case"type":m=B;break;case"name":h=B;break;case"checked":z=B;break;case"defaultChecked":q=B;break;case"value":S=B;break;case"defaultValue":T=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:B!==K&&We(r,i,_,B,u,K)}}Du(r,S,T,N,z,q,m,h);return;case"select":B=S=T=_=null;for(m in a)if(N=a[m],a.hasOwnProperty(m)&&N!=null)switch(m){case"value":break;case"multiple":B=N;default:u.hasOwnProperty(m)||We(r,i,m,null,u,N)}for(h in u)if(m=u[h],N=a[h],u.hasOwnProperty(h)&&(m!=null||N!=null))switch(h){case"value":_=m;break;case"defaultValue":T=m;break;case"multiple":S=m;default:m!==N&&We(r,i,h,m,u,N)}i=T,a=S,u=B,_!=null?fi(r,!!a,_,!1):!!u!=!!a&&(i!=null?fi(r,!!a,i,!0):fi(r,!!a,a?[]:"",!1));return;case"textarea":B=_=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:We(r,i,T,null,u,h)}for(S in u)if(h=u[S],m=a[S],u.hasOwnProperty(S)&&(h!=null||m!=null))switch(S){case"value":_=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==m&&We(r,i,S,h,u,m)}cm(r,_,B);return;case"option":for(var oe in a)if(_=a[oe],a.hasOwnProperty(oe)&&_!=null&&!u.hasOwnProperty(oe))switch(oe){case"selected":r.selected=!1;break;default:We(r,i,oe,null,u,_)}for(N in u)if(_=u[N],B=a[N],u.hasOwnProperty(N)&&_!==B&&(_!=null||B!=null))switch(N){case"selected":r.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:We(r,i,N,_,u,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)_=a[ve],a.hasOwnProperty(ve)&&_!=null&&!u.hasOwnProperty(ve)&&We(r,i,ve,null,u,_);for(z in u)if(_=u[z],B=a[z],u.hasOwnProperty(z)&&_!==B&&(_!=null||B!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(137,i));break;default:We(r,i,z,_,u,B)}return;default:if(Ru(i)){for(var et in a)_=a[et],a.hasOwnProperty(et)&&_!==void 0&&!u.hasOwnProperty(et)&&vd(r,i,et,void 0,u,_);for(q in u)_=u[q],B=a[q],!u.hasOwnProperty(q)||_===B||_===void 0&&B===void 0||vd(r,i,q,_,u,B);return}}for(var D in a)_=a[D],a.hasOwnProperty(D)&&_!=null&&!u.hasOwnProperty(D)&&We(r,i,D,null,u,_);for(K in u)_=u[K],B=a[K],!u.hasOwnProperty(K)||_===B||_==null&&B==null||We(r,i,K,_,u,B)}function h0(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function gT(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var h=a[u],m=h.transferSize,S=h.initiatorType,T=h.duration;if(m&&T&&h0(S)){for(S=0,T=h.responseEnd,u+=1;u<a.length;u++){var N=a[u],z=N.startTime;if(z>T)break;var q=N.transferSize,K=N.initiatorType;q&&h0(K)&&(N=N.responseEnd,S+=q*(N<T?1:(T-z)/(N-z)))}if(--u,i+=8*(m+S)/(h.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Sd=null,kd=null;function Va(r){return r.nodeType===9?r:r.ownerDocument}function p0(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m0(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Td(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ed=null;function yT(){var r=window.event;return r&&r.type==="popstate"?r===Ed?!1:(Ed=r,!0):(Ed=null,!1)}var g0=typeof setTimeout=="function"?setTimeout:void 0,bT=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,xT=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(r){return y0.resolve(null).then(r).catch(vT)}:g0;function vT(r){setTimeout(function(){throw r})}function Pr(r){return r==="head"}function b0(r,i){var a=i,u=0;do{var h=a.nextSibling;if(r.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(u===0){r.removeChild(h),$i(i);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Jl(r.ownerDocument.documentElement);else if(a==="head"){a=r.ownerDocument.head,Jl(a);for(var m=a.firstChild;m;){var S=m.nextSibling,T=m.nodeName;m[dl]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=S}}else a==="body"&&Jl(r.ownerDocument.body);a=h}while(a);$i(i)}function x0(r,i){var a=r;r=0;do{var u=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(r===0)break;r--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||r++;a=u}while(a)}function Cd(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Cd(a),Au(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}r.removeChild(a)}}function ST(r,i,a,u){for(;r.nodeType===1;){var h=a;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[dl])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Dn(r.nextSibling),r===null)break}return null}function kT(r,i,a){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Dn(r.nextSibling),r===null))return null;return r}function v0(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Dn(r.nextSibling),r===null))return null;return r}function Md(r){return r.data==="$?"||r.data==="$~"}function wd(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function TT(r,i){var a=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||a.readyState!=="loading")i();else{var u=function(){i(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Dn(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Nd=null;function S0(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"||a==="/&"){if(i===0)return Dn(r.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}r=r.nextSibling}return null}function k0(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return r;i--}else a!=="/$"&&a!=="/&"||i++}r=r.previousSibling}return null}function T0(r,i,a){switch(i=Va(a),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Jl(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Au(r)}var jn=new Map,E0=new Set;function qa(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var br=Z.d;Z.d={f:ET,r:CT,D:MT,C:wT,L:NT,m:AT,X:DT,S:OT,M:jT};function ET(){var r=br.f(),i=Ra();return r||i}function CT(r){var i=ai(r);i!==null&&i.tag===5&&i.type==="form"?Vg(i):br.r(r)}var Ii=typeof document>"u"?null:document;function C0(r,i,a){var u=Ii;if(u&&typeof i=="string"&&i){var h=En(i);h='link[rel="'+r+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),E0.has(h)||(E0.add(h),r={rel:r,crossOrigin:a,href:i},u.querySelector(h)===null&&(i=u.createElement("link"),Vt(i,"link",r),jt(i),u.head.appendChild(i)))}}function MT(r){br.D(r),C0("dns-prefetch",r,null)}function wT(r,i){br.C(r,i),C0("preconnect",r,i)}function NT(r,i,a){br.L(r,i,a);var u=Ii;if(u&&r&&i){var h='link[rel="preload"][as="'+En(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+En(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+En(a.imageSizes)+'"]')):h+='[href="'+En(r)+'"]';var m=h;switch(i){case"style":m=Vi(r);break;case"script":m=qi(r)}jn.has(m)||(r=y({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:r,as:i},a),jn.set(m,r),u.querySelector(h)!==null||i==="style"&&u.querySelector(Fl(m))||i==="script"&&u.querySelector(Xl(m))||(i=u.createElement("link"),Vt(i,"link",r),jt(i),u.head.appendChild(i)))}}function AT(r,i){br.m(r,i);var a=Ii;if(a&&r){var u=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+En(u)+'"][href="'+En(r)+'"]',m=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=qi(r)}if(!jn.has(m)&&(r=y({rel:"modulepreload",href:r},i),jn.set(m,r),a.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Xl(m)))return}u=a.createElement("link"),Vt(u,"link",r),jt(u),a.head.appendChild(u)}}}function OT(r,i,a){br.S(r,i,a);var u=Ii;if(u&&r){var h=ci(u).hoistableStyles,m=Vi(r);i=i||"default";var S=h.get(m);if(!S){var T={loading:0,preload:null};if(S=u.querySelector(Fl(m)))T.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":i},a),(a=jn.get(m))&&Ad(r,a);var N=S=u.createElement("link");jt(N),Vt(N,"link",r),N._p=new Promise(function(z,q){N.onload=z,N.onerror=q}),N.addEventListener("load",function(){T.loading|=1}),N.addEventListener("error",function(){T.loading|=2}),T.loading|=4,$a(S,i,u)}S={type:"stylesheet",instance:S,count:1,state:T},h.set(m,S)}}}function DT(r,i){br.X(r,i);var a=Ii;if(a&&r){var u=ci(a).hoistableScripts,h=qi(r),m=u.get(h);m||(m=a.querySelector(Xl(h)),m||(r=y({src:r,async:!0},i),(i=jn.get(h))&&Od(r,i),m=a.createElement("script"),jt(m),Vt(m,"link",r),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function jT(r,i){br.M(r,i);var a=Ii;if(a&&r){var u=ci(a).hoistableScripts,h=qi(r),m=u.get(h);m||(m=a.querySelector(Xl(h)),m||(r=y({src:r,async:!0,type:"module"},i),(i=jn.get(h))&&Od(r,i),m=a.createElement("script"),jt(m),Vt(m,"link",r),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function M0(r,i,a,u){var h=(h=be.current)?qa(h):null;if(!h)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Vi(a.href),a=ci(h).hoistableStyles,u=a.get(i),u||(u={type:"style",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){r=Vi(a.href);var m=ci(h).hoistableStyles,S=m.get(r);if(S||(h=h.ownerDocument||h,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,S),(m=h.querySelector(Fl(r)))&&!m._p&&(S.instance=m,S.state.loading=5),jn.has(r)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},jn.set(r,a),m||RT(h,r,a,S.state))),i&&u===null)throw Error(s(528,""));return S}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=qi(a),a=ci(h).hoistableScripts,u=a.get(i),u||(u={type:"script",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Vi(r){return'href="'+En(r)+'"'}function Fl(r){return'link[rel="stylesheet"]['+r+"]"}function w0(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function RT(r,i,a,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Vt(i,"link",a),jt(i),r.head.appendChild(i))}function qi(r){return'[src="'+En(r)+'"]'}function Xl(r){return"script[async]"+r}function N0(r,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+En(a.href)+'"]');if(u)return i.instance=u,jt(u),u;var h=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),jt(u),Vt(u,"style",h),$a(u,a.precedence,r),i.instance=u;case"stylesheet":h=Vi(a.href);var m=r.querySelector(Fl(h));if(m)return i.state.loading|=4,i.instance=m,jt(m),m;u=w0(a),(h=jn.get(h))&&Ad(u,h),m=(r.ownerDocument||r).createElement("link"),jt(m);var S=m;return S._p=new Promise(function(T,N){S.onload=T,S.onerror=N}),Vt(m,"link",u),i.state.loading|=4,$a(m,a.precedence,r),i.instance=m;case"script":return m=qi(a.src),(h=r.querySelector(Xl(m)))?(i.instance=h,jt(h),h):(u=a,(h=jn.get(m))&&(u=y({},a),Od(u,h)),r=r.ownerDocument||r,h=r.createElement("script"),jt(h),Vt(h,"link",u),r.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,$a(u,a.precedence,r));return i.instance}function $a(r,i,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,m=h,S=0;S<u.length;S++){var T=u[S];if(T.dataset.precedence===i)m=T;else if(m!==h)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(r,i.firstChild))}function Ad(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Od(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Ga=null;function A0(r,i,a){if(Ga===null){var u=new Map,h=Ga=new Map;h.set(a,u)}else h=Ga,u=h.get(a),u||(u=new Map,h.set(a,u));if(u.has(r))return u;for(u.set(r,null),a=a.getElementsByTagName(r),h=0;h<a.length;h++){var m=a[h];if(!(m[dl]||m[Bt]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var S=m.getAttribute(i)||"";S=r+S;var T=u.get(S);T?T.push(m):u.set(S,[m])}}return u}function O0(r,i,a){r=r.ownerDocument||r,r.head.insertBefore(a,i==="title"?r.querySelector("head > title"):null)}function zT(r,i,a){if(a===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function D0(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function LT(r,i,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Vi(u.href),m=i.querySelector(Fl(h));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Ya.bind(r),i.then(r,r)),a.state.loading|=4,a.instance=m,jt(m);return}m=i.ownerDocument||i,u=w0(u),(h=jn.get(h))&&Ad(u,h),m=m.createElement("link"),jt(m);var S=m;S._p=new Promise(function(T,N){S.onload=T,S.onerror=N}),Vt(m,"link",u),a.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(r.count++,a=Ya.bind(r),i.addEventListener("load",a),i.addEventListener("error",a))}}var Dd=0;function _T(r,i){return r.stylesheets&&r.count===0&&Pa(r,r.stylesheets),0<r.count||0<r.imgCount?function(a){var u=setTimeout(function(){if(r.stylesheets&&Pa(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4+i);0<r.imgBytes&&Dd===0&&(Dd=62500*gT());var h=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Pa(r,r.stylesheets),r.unsuspend)){var m=r.unsuspend;r.unsuspend=null,m()}},(r.imgBytes>Dd?50:800)+i);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(h)}}:null}function Ya(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pa(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ka=null;function Pa(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ka=new Map,i.forEach(BT,r),Ka=null,Ya.call(r))}function BT(r,i){if(!(i.state.loading&4)){var a=Ka.get(r);if(a)var u=a.get(null);else{a=new Map,Ka.set(r,a);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var S=h[m];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}h=i.instance,S=h.getAttribute("data-precedence"),m=a.get(S)||u,m===u&&a.set(null,h),a.set(S,h),this.count++,u=Ya.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),m?m.parentNode.insertBefore(h,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),i.state.loading|=4}}var Ql={$$typeof:V,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function HT(r,i,a,u,h,m,S,T,N){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cu(0),this.hiddenUpdates=Cu(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function j0(r,i,a,u,h,m,S,T,N,z,q,K){return r=new HT(r,i,a,S,N,z,q,K,T),i=1,m===!0&&(i|=24),m=pn(3,null,null,i),r.current=m,m.stateNode=r,i=uf(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:a,cache:i},pf(m),r}function R0(r){return r?(r=xi,r):xi}function z0(r,i,a,u,h,m){h=R0(h),u.context===null?u.context=h:u.pendingContext=h,u=_r(i),u.payload={element:a},m=m===void 0?null:m,m!==null&&(u.callback=m),a=Br(r,u,i),a!==null&&(an(a,r,i),Al(a,r,i))}function L0(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function jd(r,i){L0(r,i),(r=r.alternate)&&L0(r,i)}function _0(r){if(r.tag===13||r.tag===31){var i=Ms(r,67108864);i!==null&&an(i,r,67108864),jd(r,67108864)}}function B0(r){if(r.tag===13||r.tag===31){var i=xn();i=Mu(i);var a=Ms(r,i);a!==null&&an(a,r,i),jd(r,i)}}var Ja=!0;function UT(r,i,a,u){var h=H.T;H.T=null;var m=Z.p;try{Z.p=2,Rd(r,i,a,u)}finally{Z.p=m,H.T=h}}function IT(r,i,a,u){var h=H.T;H.T=null;var m=Z.p;try{Z.p=8,Rd(r,i,a,u)}finally{Z.p=m,H.T=h}}function Rd(r,i,a,u){if(Ja){var h=zd(u);if(h===null)xd(r,i,u,Fa,a),U0(r,u);else if(qT(h,r,i,a,u))u.stopPropagation();else if(U0(r,u),i&4&&-1<VT.indexOf(r)){for(;h!==null;){var m=ai(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var S=Ss(m.pendingLanes);if(S!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;S;){var N=1<<31-dn(S);T.entanglements[1]|=N,S&=~N}Jn(m),(Pe&6)===0&&(Da=we()+500,Yl(0))}}break;case 31:case 13:T=Ms(m,2),T!==null&&an(T,m,2),Ra(),jd(m,2)}if(m=zd(u),m===null&&xd(r,i,u,Fa,a),m===h)break;h=m}h!==null&&u.stopPropagation()}else xd(r,i,u,null,a)}}function zd(r){return r=Lu(r),Ld(r)}var Fa=null;function Ld(r){if(Fa=null,r=oi(r),r!==null){var i=o(r);if(i===null)r=null;else{var a=i.tag;if(a===13){if(r=c(i),r!==null)return r;r=null}else if(a===31){if(r=f(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Fa=r,null}function H0(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Je()){case bt:return 2;case Xt:return 8;case Dt:case al:return 32;case Jp:return 268435456;default:return 32}default:return 32}}var _d=!1,Jr=null,Fr=null,Xr=null,Zl=new Map,Wl=new Map,Qr=[],VT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U0(r,i){switch(r){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Zl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wl.delete(i.pointerId)}}function eo(r,i,a,u,h,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:m,targetContainers:[h]},i!==null&&(i=ai(i),i!==null&&_0(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),r)}function qT(r,i,a,u,h){switch(i){case"focusin":return Jr=eo(Jr,r,i,a,u,h),!0;case"dragenter":return Fr=eo(Fr,r,i,a,u,h),!0;case"mouseover":return Xr=eo(Xr,r,i,a,u,h),!0;case"pointerover":var m=h.pointerId;return Zl.set(m,eo(Zl.get(m)||null,r,i,a,u,h)),!0;case"gotpointercapture":return m=h.pointerId,Wl.set(m,eo(Wl.get(m)||null,r,i,a,u,h)),!0}return!1}function I0(r){var i=oi(r.target);if(i!==null){var a=o(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){r.blockedOn=i,em(r.priority,function(){B0(a)});return}}else if(i===31){if(i=f(a),i!==null){r.blockedOn=i,em(r.priority,function(){B0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Xa(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=zd(r.nativeEvent);if(a===null){a=r.nativeEvent;var u=new a.constructor(a.type,a);zu=u,a.target.dispatchEvent(u),zu=null}else return i=ai(a),i!==null&&_0(i),r.blockedOn=a,!1;i.shift()}return!0}function V0(r,i,a){Xa(r)&&a.delete(i)}function $T(){_d=!1,Jr!==null&&Xa(Jr)&&(Jr=null),Fr!==null&&Xa(Fr)&&(Fr=null),Xr!==null&&Xa(Xr)&&(Xr=null),Zl.forEach(V0),Wl.forEach(V0)}function Qa(r,i){r.blockedOn===i&&(r.blockedOn=null,_d||(_d=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$T)))}var Za=null;function q0(r){Za!==r&&(Za=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Za===r&&(Za=null);for(var i=0;i<r.length;i+=3){var a=r[i],u=r[i+1],h=r[i+2];if(typeof u!="function"){if(Ld(u||a)===null)continue;break}var m=ai(a);m!==null&&(r.splice(i,3),i-=3,zf(m,{pending:!0,data:h,method:a.method,action:u},u,h))}}))}function $i(r){function i(N){return Qa(N,r)}Jr!==null&&Qa(Jr,r),Fr!==null&&Qa(Fr,r),Xr!==null&&Qa(Xr,r),Zl.forEach(i),Wl.forEach(i);for(var a=0;a<Qr.length;a++){var u=Qr[a];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Qr.length&&(a=Qr[0],a.blockedOn===null);)I0(a),a.blockedOn===null&&Qr.shift();if(a=(r.ownerDocument||r).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var h=a[u],m=a[u+1],S=h[tn]||null;if(typeof m=="function")S||q0(a);else if(S){var T=null;if(m&&m.hasAttribute("formAction")){if(h=m,S=m[tn]||null)T=S.formAction;else if(Ld(h)!==null)continue}else T=S.action;typeof T=="function"?a[u+1]=T:(a.splice(u,3),u-=3),q0(a)}}}function $0(){function r(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(S){return h=S})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,h=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Bd(r){this._internalRoot=r}Wa.prototype.render=Bd.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,u=xn();z0(a,u,r,i,null,null)},Wa.prototype.unmount=Bd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;z0(r.current,2,null,r,null,null),Ra(),i[li]=null}};function Wa(r){this._internalRoot=r}Wa.prototype.unstable_scheduleHydration=function(r){if(r){var i=Wp();r={blockedOn:null,target:r,priority:i};for(var a=0;a<Qr.length&&i!==0&&i<Qr[a].priority;a++);Qr.splice(a,0,r),a===0&&I0(r)}};var G0=e.version;if(G0!=="19.2.1")throw Error(s(527,G0,"19.2.1"));Z.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=p(i),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var GT={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{cl=ec.inject(GT),fn=ec}catch{}}return no.createRoot=function(r,i){if(!l(r))throw Error(s(299));var a=!1,u="",h=Qg,m=Zg,S=Wg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=j0(r,1,!1,null,null,a,u,null,h,m,S,$0),r[li]=i.current,bd(r),new Bd(i)},no.hydrateRoot=function(r,i,a){if(!l(r))throw Error(s(299));var u=!1,h="",m=Qg,S=Zg,T=Wg,N=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=j0(r,1,!0,i,a??null,u,h,N,m,S,T,$0),i.context=R0(null),a=i.current,u=xn(),u=Mu(u),h=_r(u),h.callback=null,Br(a,h,u),a=u,i.current.lanes=a,fl(i,a),Jn(i),r[li]=i.current,bd(r),new Wa(i)},no.version="19.2.1",no}var eb;function WT(){if(eb)return Id.exports;eb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Id.exports=ZT(),Id.exports}var eE=WT();const tE=lp(eE),wh="pc1_admin_token",nE="X-PC1-Auth-Required",rE="X-PC1-Admin-Token";function sE(){return window.localStorage.getItem(wh)||""}function iE(n){const e=(n||"").trim();if(!e){window.localStorage.removeItem(wh);return}window.localStorage.setItem(wh,e)}function tb(n={},e=""){return e?{...n,[rE]:e}:n}async function nt(n,e={}){const t=sE(),s=tb(e.headers||{},t);let l=await fetch(n,{...e,headers:s});const o=l.headers.get(nE)==="true";if(l.status!==401||!o)return l;const c=window.prompt("Enter PC-1 admin token");if(!c)return l;const f=c.trim();if(!f)return l;iE(f);const d=tb(e.headers||{},f);return l=await fetch(n,{...e,headers:d}),l}function lE({wifiStatus:n}){const[e,t]=Q.useState([]),[s,l]=Q.useState(""),[o,c]=Q.useState(""),[f,d]=Q.useState(!1),[p,g]=Q.useState(!1),[y,b]=Q.useState(!1),[v,k]=Q.useState(""),[E,C]=Q.useState(!1);Q.useEffect(()=>{M()},[]);const M=async()=>{d(!0),k("");try{const Y=await(await fetch("/api/wifi/networks")).json();t(Y.networks||[])}catch($){k("Failed to scan networks"),console.error($)}finally{d(!1)}},L=async $=>{if($.preventDefault(),!s){k("Please select a network");return}g(!0),k("");try{const Y=await nt("/api/wifi/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ssid:s,password:o||null})});if(Y.ok)b(!0),g(!1);else{const I=await Y.json();k(I.detail||"Failed to connect"),g(!1)}}catch{b(!0),g(!1)}},V="w-full p-3 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border",W="w-full py-3 px-4 rounded-lg font-bold transition-all";return y?x.jsx("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 bg-white min-h-screen",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-6xl mb-6",children:""}),x.jsx("h1",{className:"text-3xl mb-4 font-bold text-black",children:"Connecting to WiFi..."}),x.jsxs("p",{className:"text-gray-600 mb-6",children:["Your PC-1 is now connecting to ",x.jsx("strong",{className:"text-black",children:s})]}),x.jsxs("div",{className:"bg-bg-card border-4 border-black rounded-xl p-6 text-left mb-6 shadow-lg",children:[x.jsx("h2",{className:"font-bold text-black mb-4",children:"Next Steps:"}),x.jsxs("ol",{className:"space-y-3 text-black",children:[x.jsxs("li",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"1"}),x.jsxs("span",{children:["Disconnect from ",x.jsx("strong",{children:n?.ap_ssid||"PC-1 Setup network"})," on your phone"]})]}),x.jsxs("li",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"2"}),x.jsxs("span",{children:["Connect your phone to ",x.jsx("strong",{children:s})]})]}),x.jsxs("li",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"3"}),x.jsx("span",{children:"Wait about 30 seconds for the device to connect"})]}),x.jsxs("li",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"4"}),x.jsxs("span",{children:["Visit ",x.jsx("strong",{className:"text-black",children:"http://pc-1.local"})," to access settings"]})]})]})]}),x.jsx("p",{className:"text-sm text-gray-600",children:"If the connection fails, the PC-1 will re-create the setup network automatically."})]})}):x.jsxs("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 bg-white min-h-screen",children:[x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("h1",{className:"text-3xl sm:text-4xl mb-4 font-bold text-black",children:"WiFi Setup"}),x.jsx("p",{className:"text-gray-600",children:"Connect your PC-1 to your home WiFi network"})]}),v&&x.jsxs("div",{className:"bg-white border-2 border-red-500 text-red-600 p-4 rounded-lg mb-6",children:[x.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),v]}),x.jsx("div",{className:"bg-bg-card border-4 border-black rounded-xl p-4 flex flex-col shadow-lg mb-6",children:x.jsxs("form",{onSubmit:L,className:"space-y-6",children:[E?x.jsxs(x.Fragment,{children:[x.jsxs("div",{children:[x.jsx("label",{className:"block mb-2 font-bold text-black",children:"Network Name (SSID)"}),x.jsx("input",{type:"text",value:s,onChange:$=>l($.target.value),className:V,placeholder:"Enter WiFi network name",required:!0,disabled:p})]}),x.jsx("button",{type:"button",onClick:()=>{C(!1),l("")},className:"text-sm text-gray-600 hover:text-black underline cursor-pointer",children:" Back to network list"})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsx("label",{className:"block font-bold text-black",children:"Available Networks"}),x.jsx("button",{type:"button",onClick:M,disabled:f,className:"text-sm px-3 py-1 bg-transparent border-2 border-gray-300 hover:border-black rounded-lg text-black transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:f?"Scanning...":"Refresh"})]}),x.jsxs("select",{value:s,onChange:$=>l($.target.value),className:V,required:!0,disabled:p,children:[x.jsx("option",{value:"",children:"-- Select a network --"}),e.map($=>x.jsxs("option",{value:$.ssid,children:[$.ssid," (",$.signal,"%) ",$.secure?"":""]},$.ssid))]})]}),x.jsx("button",{type:"button",onClick:()=>C(!0),className:"text-sm text-gray-600 hover:text-black underline cursor-pointer",children:"Enter network name manually"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block mb-2 font-bold text-black",children:"Password"}),x.jsx("input",{type:"password",value:o,onChange:$=>c($.target.value),className:V,placeholder:"Enter WiFi password (leave blank if open network)",disabled:p})]}),x.jsx("button",{type:"submit",disabled:p||!s,className:`${W} bg-transparent border-2 border-black text-black hover:bg-black hover:text-white disabled:opacity-50 disabled:cursor-not-allowed disabled:border-gray-300 disabled:text-gray-400 cursor-pointer`,children:p?"Connecting...":"Connect to WiFi"})]})}),x.jsxs("div",{className:"mt-8 p-4 bg-bg-card border-4 border-black rounded-xl shadow-lg",children:[x.jsxs("p",{className:"text-sm text-black mb-2",children:[x.jsx("strong",{children:"Note:"})," After clicking Connect, this device will disconnect from the setup network and join your home WiFi."]}),x.jsx("p",{className:"text-sm text-gray-600",children:"You'll need to reconnect your phone to your home WiFi to access the settings page."})]})]})}const Nh=(n,e="12h")=>{if(!n)return"";if(e==="24h")return n;const[t,s]=n.split(":"),l=parseInt(t,10),o=l>=12?"PM":"AM";return`${l%12||12}:${s} ${o}`},ut="#000000",Wr="#3a3a3a",Us="#4a4a4a",Gd="#525252",Hx=[`radial-gradient(circle at 20% 30%, ${ut} 0%, ${Wr} 25%, ${ut} 50%, ${Us} 75%, ${ut} 100%)`,`radial-gradient(circle at 80% 70%, ${ut} 0%, ${Us} 20%, ${ut} 40%, ${Wr} 60%, ${ut} 80%, ${Gd} 100%)`,`radial-gradient(ellipse at 50% 20%, ${ut} 0%, ${Wr} 30%, ${ut} 60%, ${Us} 90%, ${ut} 100%)`,`radial-gradient(circle at 70% 50%, ${ut} 0%, ${Gd} 15%, ${ut} 35%, ${Wr} 55%, ${ut} 75%, ${Us} 100%)`,`radial-gradient(ellipse at 30% 80%, ${ut} 0%, ${Us} 25%, ${ut} 50%, ${Wr} 75%, ${ut} 100%)`,`radial-gradient(circle at 60% 40%, ${ut} 0%, ${Wr} 20%, ${ut} 45%, ${Gd} 70%, ${ut} 100%)`,`radial-gradient(ellipse at 40% 60%, ${ut} 0%, ${Us} 30%, ${ut} 60%, ${Wr} 90%, ${ut} 100%)`,`radial-gradient(circle at 50% 50%, ${ut} 0%, ${Wr} 25%, ${ut} 50%, ${Us} 75%, ${ut} 100%)`],Fi=({children:n,onClick:e,disabled:t=!1,className:s="",type:l="button",loading:o=!1,...c})=>{const d={className:`px-6 py-2 bg-transparent border-2 rounded-lg font-bold transition-all cursor-pointer flex items-center gap-2 ${s}`,style:{borderColor:"var(--color-text-muted)",color:"var(--color-text-muted)"},onMouseEnter:p=>{!t&&!o&&(p.currentTarget.style.backgroundColor="var(--color-bg-white)",p.currentTarget.style.borderColor="var(--color-border-main)",p.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:p=>{!t&&!o&&(p.currentTarget.style.backgroundColor="transparent",p.currentTarget.style.borderColor="var(--color-text-muted)",p.currentTarget.style.color="var(--color-text-muted)")}};return x.jsx("button",{type:l,onClick:e,disabled:t||o,className:d.className,style:d.style,onMouseEnter:d.onMouseEnter,onMouseLeave:d.onMouseLeave,...c,children:o?"Loading...":n})},Qi=({className:n})=>x.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:[x.jsx("title",{children:"wifi"}),x.jsxs("g",{fill:"currentColor",children:[x.jsx("circle",{fill:"currentColor",cx:"8",cy:"12.5",r:"1.5"}),x.jsx("path",{fill:"currentColor",d:"M11.5,10C10.6,9,9.3,8.5,8,8.5S5.4,9,4.5,10L3.1,8.6C4.4,7.2,6.1,6.5,8,6.5s3.6,0.7,4.9,2.1 L11.5,10z"}),x.jsx("path",{fill:"currentColor",d:"M8,2C5,2,2.2,3.1,0,5.2l1.4,1.4C3.2,4.9,5.5,4,8,4s4.8,0.9,6.6,2.7L16,5.2C13.8,3.1,11,2,8,2z"})]})]}),xc=({className:n,style:e,...t})=>x.jsxs("svg",{className:n,style:e,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",...t,children:[x.jsx("title",{children:"wifi-off"}),x.jsxs("g",{fill:"currentColor",children:[x.jsx("path",{fill:"currentColor",d:"M8.142,7.507C8.094,7.506,8.048,7.5,8,7.5c-1.9,0-3.6,0.7-4.9,2.1L4.5,11 c0.798-0.886,1.912-1.357,3.06-1.457L8.142,7.507z"}),x.jsx("path",{fill:"currentColor",d:"M10.13,7.827L9.573,9.776c0.724,0.242,1.398,0.636,1.927,1.224l1.4-1.4 C12.11,8.749,11.171,8.161,10.13,7.827z"}),x.jsx("path",{fill:"currentColor",d:"M8.848,5.039l0.557-1.946C8.942,3.037,8.475,3,8,3C5,3,2.2,4.1,0,6.2l1.4,1.4C3.2,5.9,5.5,5,8,5 C8.286,5,8.568,5.015,8.848,5.039z"}),x.jsx("path",{fill:"currentColor",d:"M11.368,3.493l-0.55,1.924c1.4,0.428,2.684,1.186,3.781,2.283L16,6.2 C14.651,4.913,13.076,4.005,11.368,3.493z"}),x.jsx("path",{fill:"currentColor",d:"M6.001,16c-0.092,0-0.184-0.013-0.275-0.039c-0.531-0.152-0.839-0.705-0.688-1.236l4-14 c0.152-0.532,0.711-0.839,1.236-0.687c0.531,0.152,0.839,0.705,0.688,1.236l-4,14C6.836,15.714,6.436,16,6.001,16z"})]})]}),Ke={input:"w-full p-3 text-base bg-white border-2 border-zinc-300 rounded-lg text-black focus:border-black focus:outline-none ",inputSmall:"w-full p-2 text-sm bg-white border-2 border-zinc-300 rounded-lg text-black focus:border-black focus:outline-none ",label:"block mb-2 text-sm text-black  font-bold",labelSmall:"block mb-1 text-xs text-black  font-bold",buttonPrimary:"px-6 py-2 bg-transparent border-2 border-black text-black  font-bold rounded-lg hover:bg-black hover:text-white transition-all cursor-pointer",buttonDanger:"px-4 py-2 text-xs bg-transparent border-2 border-red-500 text-red-600 rounded-lg hover:bg-red-600 hover:text-white  font-bold transition-colors cursor-pointer",buttonGhost:"text-xs px-2 py-0.5 rounded border-2 bg-transparent text-zinc-500 border-zinc-400 hover:text-black hover:border-black  transition-colors cursor-pointer hover-shimmer",modalBackdrop:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",modalContent:"bg-white border-4 border-black rounded-xl p-4 sm:p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-lg",textSubtle:"text-xs text-zinc-500 "},Ux=({value:n={},onChange:e,placeholder:t="Type city name (e.g. Boston, London, Tokyo)"})=>{const[s,l]=Q.useState(""),[o,c]=Q.useState([]),[f,d]=Q.useState(!1),p=Q.useRef(null),g=Q.useRef(null);Q.useEffect(()=>{const k=E=>{p.current&&!p.current.contains(E.target)&&c([])};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const y=async k=>{if(l(k),g.current&&clearTimeout(g.current),k.length<2){c([]),d(!1);return}g.current=setTimeout(async()=>{d(!0);try{const E=new AbortController,C=setTimeout(()=>E.abort(),15e3),M=await fetch(`/api/location/search?q=${encodeURIComponent(k)}&limit=20&use_api=false`,{signal:E.signal});clearTimeout(C);const L=await M.json();L.results?c(L.results):c([])}catch(E){E.name==="AbortError"?console.warn("Location search timed out"):(console.error("Error fetching locations:",E),c([]))}finally{d(!1)}},500)},b=k=>{const C={city_name:k.city||k.name,latitude:k.latitude,longitude:k.longitude,timezone:k.timezone,state:k.state,zipcode:k.zipcode};e(C),l(""),c([])},v=n&&n.city_name;return x.jsxs("div",{className:"space-y-3",ref:p,children:[x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"text",value:s,onChange:k=>y(k.target.value),placeholder:t,className:Ke.input,autoComplete:"off"}),f&&x.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:x.jsx("div",{className:"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin"})}),o.length>0&&x.jsx("ul",{className:"absolute w-full z-10 max-h-[300px] overflow-y-auto bg-white border-2 border-gray-300 border-t-0 rounded-b-lg shadow-lg list-none p-0 m-0",children:o.map(k=>x.jsx("li",{onClick:()=>b(k),className:"p-3 cursor-pointer border-b-2 border-gray-200 last:border-0 hover:bg-gray-50 transition-colors group",children:x.jsx("div",{className:"flex items-start justify-between",children:x.jsx("div",{className:"flex-1 min-w-0",children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("strong",{className:"text-black transition-colors",children:k.name}),k.state&&x.jsx("span",{className:"text-gray-500 text-xs",children:k.state}),k.zipcode&&x.jsxs("span",{className:"text-gray-500 text-xs",children:["(",k.zipcode,")"]}),k.population&&k.population>0&&x.jsx("span",{className:"text-xs text-gray-600",children:k.population>=1e6?`${(k.population/1e6).toFixed(1)}M`:k.population>=1e3?`${(k.population/1e3).toFixed(0)}K`:k.population}),k.country_code&&k.country_code!=="US"&&x.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-gray-100 text-gray-700 rounded border border-gray-300",children:k.country_code})]})})})},k.id))})]}),v?x.jsxs("div",{className:"bg-gray-50 border-2 border-gray-300 rounded-lg p-3 space-y-2",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:Ke.textSubtle,children:"City"}),x.jsxs("span",{className:"text-sm font-medium",children:[n.city_name,n.state&&`, ${n.state}`]})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:Ke.textSubtle,children:"Timezone"}),x.jsx("span",{className:"text-sm",children:n.timezone||"Not set"})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:Ke.textSubtle,children:"Coordinates"}),x.jsxs("span",{className:"text-sm",children:[n.latitude?.toFixed(4),", ",n.longitude?.toFixed(4)]})]})]}):x.jsx("p",{className:`${Ke.textSubtle} mt-1`,children:"Unless set, uses global location."})]})},oE=({settings:n,saveGlobalSettings:e,triggerAPMode:t,wifiStatus:s})=>{const l="w-full p-3 text-base border-2 border-gray-300 rounded-lg focus:outline-none box-border",o="block mb-2 font-bold",c=Hx,[f,d]=Q.useState(null),[p,g]=Q.useState(""),[y,b]=Q.useState(""),[v,k]=Q.useState({type:"",message:""}),[E,C]=Q.useState(!1),[M,L]=Q.useState(null),[V,W]=Q.useState(!1),[$,Y]=Q.useState({type:"",message:""}),[I,se]=Q.useState(!1),[ue,je]=Q.useState(""),[st,Le]=Q.useState(""),[ft,Ve]=Q.useState(!1),[Te,H]=Q.useState(null),[Z,pe]=Q.useState(!1),[Ae,ze]=Q.useState(!1),[A,U]=Q.useState({type:"",message:""}),[re,le]=Q.useState(null),[ge,be]=Q.useState({stage:"",progress:0});Q.useEffect(()=>{const ae=async()=>{try{const $e=await(await fetch("/api/system/time")).json();$e.datetime&&(d($e),g(w=>w||$e.date),b(w=>w||$e.time.substring(0,5)))}catch(Re){console.error("Error fetching system time:",Re)}};ae();const Se=setInterval(ae,3e4);return()=>clearInterval(Se)},[]),Q.useEffect(()=>{if(n&&(n.timezone||n.city_name||n.time_sync_mode!==void 0)){const ae=n.time_sync_mode||"manual";console.log("[TimeSync] Loading preference:",{syncMode:ae,time_sync_mode:n.time_sync_mode}),C(ae==="automatic")}},[n]),Q.useEffect(()=>{const ae=async()=>{try{const $e=await(await fetch("/api/system/ssh/status")).json();L($e)}catch(Re){console.error("Error fetching SSH status:",Re)}};ae();const Se=setInterval(ae,3e4);return()=>clearInterval(Se)},[]),Q.useEffect(()=>{(async()=>{try{const Re=await(await fetch("/api/system/version")).json();Re.version&&le(Re.version)}catch(Se){console.error("Error fetching current version:",Se)}})()},[]);const Me=(ae,Se)=>ae?.detail||ae?.message||ae?.error||Se,at=async()=>{if(!s?.connected){k({type:"error",message:"Internet connection required for automatic time sync"}),setTimeout(()=>k({type:"",message:""}),5e3);return}k({type:"",message:""});try{const Se=await(await nt("/api/system/time/sync",{method:"POST"})).json();if(Se.success){k({type:"success",message:Se.message||"Time synchronized successfully"});const $e=await(await fetch("/api/system/time")).json();$e.datetime&&(d($e),g($e.date),b($e.time.substring(0,5)))}else k({type:"error",message:Me(Se,"Failed to sync time")})}catch(ae){k({type:"error",message:"Error syncing time: "+ae.message})}setTimeout(()=>k({type:"",message:""}),5e3)},qe=async()=>{if(!p||!y){k({type:"error",message:"Please enter both date and time"}),setTimeout(()=>k({type:"",message:""}),5e3);return}const ae=p.trim();if(!/^\d{4}-\d{2}-\d{2}$/.test(ae)){k({type:"error",message:"Invalid date format. Please use YYYY-MM-DD format."}),setTimeout(()=>k({type:"",message:""}),5e3);return}let Re=String(y||"").trim();if(!Re||Re.length===0){k({type:"error",message:"Please enter a valid time"}),setTimeout(()=>k({type:"",message:""}),5e3);return}const $e=/^(\d{1,2}):(\d{2})(:(\d{2}))?$/,w=Re.match($e);if(!w){console.error("Time validation failed:",{normalizedTime:Re,original:y,type:typeof y,length:Re.length,charCodes:Re.split("").map(te=>`${te}(${te.charCodeAt(0)})`)}),k({type:"error",message:`Invalid time format: "${Re}". Please use HH:MM format (e.g., 14:30).`}),setTimeout(()=>k({type:"",message:""}),5e3);return}const j=w[1].padStart(2,"0"),P=w[2],J=w[4]||"00",ne=parseInt(j,10),F=parseInt(P,10),fe=parseInt(J,10);if(isNaN(ne)||ne<0||ne>23){k({type:"error",message:`Invalid hours: ${j}. Must be between 00 and 23.`}),setTimeout(()=>k({type:"",message:""}),5e3);return}if(isNaN(F)||F<0||F>59){k({type:"error",message:`Invalid minutes: ${P}. Must be between 00 and 59.`}),setTimeout(()=>k({type:"",message:""}),5e3);return}if(isNaN(fe)||fe<0||fe>59){k({type:"error",message:`Invalid seconds: ${J}. Must be between 00 and 59.`}),setTimeout(()=>k({type:"",message:""}),5e3);return}const ce=`${j}:${P}:${J}`;k({type:"",message:""});try{console.log("Setting time:",{date:ae,time:ce});const te=await nt("/api/system/time",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:ae,time:ce})});if(!te.ok)throw new Error(`HTTP error! status: ${te.status}`);const he=await te.json();he.success?(k({type:"success",message:he.message||"System time set successfully"}),C(!1),setTimeout(async()=>{try{const Je=await(await fetch("/api/system/time")).json();Je.datetime&&(d(Je),g(Je.date),b(Je.time.substring(0,5)))}catch(we){console.error("Error refreshing time:",we)}},1e3)):k({type:"error",message:Me(he,"Failed to set system time. The application may need sudo privileges.")})}catch(te){console.error("Error setting system time:",te),k({type:"error",message:`Error setting system time: ${te.message}. Make sure the backend is running and has proper permissions.`})}setTimeout(()=>k({type:"",message:""}),5e3)};return x.jsxs("div",{className:"space-y-4",children:[x.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[5]||c[0]},children:x.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[x.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Updates"}),x.jsx("p",{className:"text-sm text-gray-600 mb-4 ",children:"Check for software updates and keep your PC-1 running the latest version."}),re&&x.jsxs("div",{className:"mb-4 text-sm",children:[x.jsx("span",{className:"text-gray-600 font-bold",children:"Current Version: "}),x.jsx("span",{className:"font-mono font-bold text-black",children:re})]}),Te&&!Ae&&x.jsxs("div",{className:`mb-4 p-3 rounded-lg text-sm ${Te.up_to_date?"bg-gray-100 text-black":"bg-white text-black border-2 border-gray-300 border-dashed"}`,children:[x.jsx("div",{className:"font-bold mb-1",children:Te.message}),x.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Te.up_to_date?x.jsxs(x.Fragment,{children:["Current version: ",x.jsx("span",{className:"font-mono",children:Te.current_version||"unknown"})]}):x.jsxs(x.Fragment,{children:["Current: ",x.jsx("span",{className:"font-mono",children:Te.current_version||"unknown"}),"  Latest: ",x.jsx("span",{className:"font-mono",children:Te.latest_version||"unknown"}),Te.commits_behind>0&&x.jsxs(x.Fragment,{children:[" (",Te.commits_behind," ",Te.commits_behind===1?"update":"updates",")"]})]})})]}),A.message&&!Ae&&A.type==="error"&&x.jsxs("div",{className:"mb-4 p-3 rounded-lg text-sm border-2 bg-white text-black border-black border-dashed",children:[x.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),A.message]}),Ae&&x.jsxs("div",{className:"mb-4 p-4 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("span",{className:"text-sm font-bold text-black",children:ge.stage||"Installing update..."}),x.jsxs("span",{className:"text-xs text-gray-600 font-mono",children:[ge.progress,"%"]})]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:x.jsx("div",{className:"bg-black h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:`${ge.progress}%`}})})]}),!Ae&&x.jsxs("div",{className:"flex gap-3",children:[x.jsx(Fi,{onClick:async()=>{pe(!0),U({type:"",message:""});try{const Se=await(await fetch("/api/system/updates/check")).json();H(Se),Se.error&&(U({type:"error",message:Se.error}),setTimeout(()=>U({type:"",message:""}),5e3))}catch{U({type:"error",message:"Could not check for updates. Check your internet connection."}),setTimeout(()=>U({type:"",message:""}),5e3)}finally{pe(!1)}},disabled:Z,loading:Z,className:"flex-1",children:"Check for Updates"}),Te&&Te.available&&!Ae&&x.jsx(Fi,{onClick:async()=>{if(!confirm("Install the update now? The device will restart automatically. The page will refresh automatically once the update is complete."))return;ze(!0),U({type:"",message:""}),be({stage:"Installing update...",progress:10});try{const Se=setInterval(()=>{be(w=>w.progress<50?{...w,progress:Math.min(w.progress+2,50)}:w)},500),Re=await nt("/api/system/updates/install",{method:"POST"});clearInterval(Se),be({stage:"Update installed! Restarting service...",progress:60});const $e=await Re.json();if($e.success)be({stage:"Service restarting...",progress:70}),H(null);else{be({stage:"",progress:0}),U({type:"error",message:Me($e,"Update failed. Please try again.")}),ze(!1);return}}catch{be({stage:"Service restarting...",progress:70}),H(null)}const ae=setTimeout(()=>{window.location.reload()},45e3);setTimeout(()=>{be({stage:"Waiting for service to restart...",progress:75});let Se=0;const Re=30,$e=async()=>{Se++;const w=Math.min(75+Math.floor(Se/Re*20),95);be({stage:"Waiting for service to restart...",progress:w});const j=new AbortController,P=setTimeout(()=>j.abort(),2e3);try{const J=await fetch("/api/health",{method:"GET",signal:j.signal});if(clearTimeout(P),J.ok){be({stage:"Service ready! Reloading page...",progress:100}),clearTimeout(ae),setTimeout(()=>window.location.reload(),500);return}else Se<Re?setTimeout($e,1e3):(be({stage:"Reloading page...",progress:100}),clearTimeout(ae),setTimeout(()=>window.location.reload(),500))}catch{clearTimeout(P),Se<Re?setTimeout($e,1e3):(be({stage:"Reloading page...",progress:100}),clearTimeout(ae),setTimeout(()=>window.location.reload(),500))}};$e()},5e3)},disabled:Ae,className:"flex-1",children:"Install Update"})]})]})}),s&&x.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[0]},children:x.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[x.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Network"}),x.jsx("div",{className:"flex items-center justify-between",children:x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[s.connected?x.jsx(Qi,{className:"w-4 h-4",style:{color:"var(--color-text-muted)"}}):x.jsx(xc,{className:"w-4 h-4",style:{color:"var(--color-error)"}}),x.jsx("span",{className:"font-bold text-black ",children:s.connected&&s.ssid?s.ssid:s.mode==="ap"?"Setup Mode (AP)":"Not Connected"}),x.jsx("button",{type:"button",onClick:t,className:"text-xs underline ml-2 cursor-pointer font-bold",style:{color:"var(--color-brass)"},onMouseEnter:ae=>ae.currentTarget.style.color="var(--color-text-main)",onMouseLeave:ae=>ae.currentTarget.style.color="var(--color-brass)",children:"Reset WiFi"})]}),s.connected&&s.ip&&x.jsxs("div",{className:"text-xs text-gray-600 mt-1 ",children:["IP: ",s.ip]})]})})]})}),x.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[1]},children:x.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[x.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Time Settings"}),x.jsxs("div",{className:"mb-4",children:[x.jsx("label",{className:"block mb-2 text-sm text-gray-600  font-bold",children:"Time Format"}),x.jsxs("select",{value:n.time_format||"12h",onChange:ae=>e({time_format:ae.target.value}),className:l,children:[x.jsx("option",{value:"12h",children:"12-hour (3:45 PM)"}),x.jsx("option",{value:"24h",children:"24-hour (15:45)"})]}),x.jsx("p",{className:"text-xs text-gray-600 mt-1 ",children:"Choose how times are displayed across all modules"})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("label",{className:"block mb-3 text-sm font-medium text-black  font-bold",children:"Set Time"}),x.jsxs("div",{className:"flex gap-0 mb-0",children:[x.jsxs("label",{className:`relative flex flex-col items-center px-4 py-2 border-t-2 border-l-2 border-r-2 cursor-pointer transition-all rounded-tl-lg ${E?"border-gray-300 border-b-2 border-b-black bg-white hover:border-black z-0":"border-black border-b-0 bg-white z-10"}`,children:[x.jsx("input",{type:"radio",name:"timeMode",checked:!E,onChange:async()=>{console.log("[TimeSync] Switching to manual mode"),C(!1),e({time_sync_mode:"manual"});try{await nt("/api/system/time/sync/disable",{method:"POST"}).catch(()=>{})}catch{}f&&(!p&&f.date&&g(f.date),!y&&f.time&&b(f.time.substring(0,5)))},className:"sr-only"}),x.jsx("span",{className:`text-sm font-medium  ${E?"text-gray-600":"text-black font-bold"}`,children:"Manual"})]}),x.jsxs("label",{className:`relative flex flex-col items-center px-4 py-2 border-t-2 border-l-2 border-r-2 cursor-pointer transition-all rounded-tr-lg ${E?"border-black border-b-0 bg-white z-10":"border-gray-300 border-b-2 border-b-black bg-white hover:border-black z-0"}`,children:[x.jsx("input",{type:"radio",name:"timeMode",checked:E,onChange:()=>{console.log("[TimeSync] Switching to automatic mode"),C(!0),e({time_sync_mode:"automatic"}),s?.connected&&at()},className:"sr-only"}),x.jsxs("div",{className:"flex items-baseline justify-center gap-1.5",children:[x.jsx(Qi,{className:`w-3 h-3 flex-shrink-0 ${E?"text-black":"text-gray-600"}`,style:{transform:"translateY(0.125rem)"}}),x.jsx("span",{className:`text-sm font-medium  ${E?"text-black font-bold":"text-gray-600"}`,children:"Automatic"})]})]})]}),E&&x.jsx("div",{className:"p-4 border-2 border-black rounded-b-lg -mt-[2px]",children:s?.connected?x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-bold text-black mb-2 ",children:"Time Set Automatically"}),f&&x.jsxs("div",{className:"p-3 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[x.jsx("div",{className:"text-xs text-gray-600 mb-1 uppercase font-bold",children:"Current Time"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("div",{className:"text-lg font-bold text-black",children:[f.date," ",Nh(f.time,n.time_format||"12h")]}),x.jsx(Qi,{className:"w-3.5 h-3.5",style:{color:"var(--color-text-muted)"}})]})]})]}):x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-bold text-black mb-2 ",children:"Not Syncing"}),x.jsx("p",{className:"text-sm text-yellow-700 mb-3 ",children:"Internet connection required for automatic time synchronization. Connect to WiFi or use manual mode."}),f&&x.jsxs("div",{className:"p-3 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[x.jsx("div",{className:"text-xs text-gray-600 mb-1 uppercase font-bold",children:"Current Time"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("div",{className:"text-lg font-bold text-black",children:[f.date," ",Nh(f.time,n.time_format||"12h")]}),x.jsx(xc,{className:"w-3.5 h-3.5",style:{color:"var(--color-error)"}})]})]})]})}),!E&&x.jsxs("div",{className:"p-4 border-2 border-black rounded-b-lg -mt-[2px]",children:[x.jsxs("div",{className:"grid grid-cols-1 min-[340px]:grid-cols-2 gap-3 mb-3",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Date"}),x.jsx("input",{type:"date",value:p,onChange:ae=>g(ae.target.value),className:"w-full py-3 px-2 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border "})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Time"}),x.jsx("input",{type:"time",value:y||"",onChange:ae=>{const Se=ae.target.value;b(Se),console.log("Time input changed:",Se,"Type:",typeof Se)},className:"w-full py-3 px-2 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border ",step:"1",required:!0})]})]}),x.jsx(Fi,{onClick:qe,className:"w-full",children:"Set System Time"}),x.jsx("p",{className:"text-xs text-gray-600 mt-2 text-center ",children:"Use this when offline or to set a specific time"})]}),v.message&&x.jsxs("div",{className:`mt-4 p-3 rounded-lg text-sm  border-2 ${v.type==="success"?"bg-gray-100 text-black border-black":"bg-white text-black border-black border-dashed"}`,children:[v.type==="error"&&x.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),v.message]})]})]})}),x.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[2]},children:x.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[x.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Location"}),x.jsxs("div",{className:"mb-4",children:[x.jsx("label",{className:"block mb-2 text-sm text-gray-600 font-bold",children:"Set Location"}),x.jsx(Ux,{value:n,onChange:ae=>e(ae)})]})]})}),x.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[3]},children:x.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[x.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Printer Settings"}),x.jsxs("div",{children:[x.jsx("label",{className:o,children:"Maximum Print Lines"}),x.jsx("input",{type:"number",min:"0",max:"1000",value:n.max_print_lines??200,onChange:ae=>e({max_print_lines:parseInt(ae.target.value)||0}),className:l}),x.jsx("p",{className:"text-xs text-gray-600 mt-1 ",children:"Maximum lines per print job to prevent endless prints. Set to 0 for no limit (default: 200)"})]})]})}),x.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[4]},children:x.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[x.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"SSH Access"}),x.jsx("p",{className:"text-sm text-gray-600 mb-4 ",children:"Manage SSH (Secure Shell) access to your PC-1 device. SSH allows advanced users to access the device via command line."}),M&&M.available?x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("span",{className:"text-sm font-medium text-black  font-bold",children:"SSH Service"}),x.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium  border-2 ${M.enabled&&M.active?"bg-white text-black border-black":M.enabled?"bg-gray-200 text-black border-gray-400":"bg-white text-gray-500 border-gray-300"}`,children:M.enabled&&M.active?"Enabled & Active":M.enabled?"Enabled":M.active?"Active":"Disabled"})]}),M.username&&x.jsxs("p",{className:"text-xs text-gray-600 mt-1 ",children:["Username: ",x.jsx("span",{className:"text-black ",children:M.username})]}),M.enabled&&x.jsxs("p",{className:"text-xs text-gray-600 mt-1 ",children:["Connect via: ",x.jsxs("span",{className:"text-black ",children:["ssh ",M.username||"admin","@pc-1.local"]})]})]}),x.jsxs("div",{className:"flex gap-3",children:[M.enabled?x.jsx("button",{type:"button",onClick:async()=>{if(confirm("Are you sure you want to disable SSH? You may lose remote access to the device.")){W(!0),Y({type:"",message:""});try{const Se=await(await nt("/api/system/ssh/disable",{method:"POST"})).json();if(Se.success){Y({type:"success",message:Se.message});const $e=await(await fetch("/api/system/ssh/status")).json();L($e)}else Y({type:"error",message:Me(Se,"Failed to disable SSH")})}catch{Y({type:"error",message:"Error disabling SSH"})}finally{W(!1),setTimeout(()=>Y({type:"",message:""}),5e3)}}},disabled:V,className:"flex-1 py-2.5 px-4 bg-transparent border-0 rounded-lg transition-all cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed font-bold",style:{color:"var(--color-error-light)"},onMouseEnter:ae=>{V||(ae.currentTarget.style.color="var(--color-error)")},onMouseLeave:ae=>{V||(ae.currentTarget.style.color="var(--color-error-light)")},children:V?"Disabling...":"Disable SSH"}):x.jsx("button",{type:"button",onClick:async()=>{W(!0),Y({type:"",message:""});try{const Se=await(await nt("/api/system/ssh/enable",{method:"POST"})).json();if(Se.success){Y({type:"success",message:Se.message});const $e=await(await fetch("/api/system/ssh/status")).json();L($e)}else Y({type:"error",message:Me(Se,"Failed to enable SSH")})}catch{Y({type:"error",message:"Error enabling SSH"})}finally{W(!1),setTimeout(()=>Y({type:"",message:""}),5e3)}},disabled:V,className:"flex-1 py-2.5 px-4 bg-transparent border-2 border-black text-black disabled:border-gray-300 disabled:text-gray-400 disabled:cursor-not-allowed rounded-lg  font-bold hover:bg-black hover:text-white transition-all cursor-pointer",children:V?"Enabling...":"Enable SSH"}),M.enabled&&x.jsx("button",{type:"button",onClick:()=>se(!I),className:"flex-1 py-2.5 px-4 bg-transparent border-2 border-gray-400 text-black rounded-lg  font-bold hover:border-black hover:bg-white transition-all cursor-pointer",children:I?"Cancel":"Change Password"})]}),I&&M.enabled&&x.jsxs("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:[x.jsx("h4",{className:"text-sm font-medium text-black mb-3  font-bold",children:"Change SSH Password"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"New Password"}),x.jsx("input",{type:"password",value:ue,onChange:ae=>je(ae.target.value),placeholder:"Minimum 8 characters",className:l,minLength:8})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Confirm Password"}),x.jsx("input",{type:"password",value:st,onChange:ae=>Le(ae.target.value),placeholder:"Re-enter password",className:l,minLength:8})]}),x.jsx(Fi,{onClick:async()=>{if(!ue||ue.length<8){Y({type:"error",message:"Password must be at least 8 characters"}),setTimeout(()=>Y({type:"",message:""}),5e3);return}if(ue!==st){Y({type:"error",message:"Passwords do not match"}),setTimeout(()=>Y({type:"",message:""}),5e3);return}Ve(!0),Y({type:"",message:""});try{const Se=await(await nt("/api/system/ssh/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({new_password:ue})})).json();Se.success?(Y({type:"success",message:Se.message}),je(""),Le(""),se(!1)):Y({type:"error",message:Me(Se,"Failed to change password")})}catch{Y({type:"error",message:"Error changing password"})}finally{Ve(!1),setTimeout(()=>Y({type:"",message:""}),5e3)}},disabled:ft||!ue||!st,loading:ft,className:"w-full",children:"Change Password"})]})]}),$.message&&x.jsxs("div",{className:`p-3 rounded-lg text-sm  border-2 ${$.type==="success"?"bg-gray-100 text-black border-black":"bg-white text-black border-black border-dashed"}`,children:[$.type==="error"&&x.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),$.message]})]}):x.jsx("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:x.jsx("p",{className:"text-sm text-gray-500 ",children:"SSH isn't available in testing mode"})})]})})]})},aE=[{id:"news",label:"News API",offline:!1,icon:"newspaper"},{id:"weather",label:"Weather",offline:!1,icon:"cloud-sun"}];let Is=null,Yd=null;function zo(){const[n,e]=Q.useState(Is||[]),[t,s]=Q.useState(!Is);return Q.useEffect(()=>{Is||(Yd||(Yd=fetch("/api/module-types").then(l=>{if(!l.ok)throw new Error("Failed to load module types");return l.json()}).then(l=>(Is=l.moduleTypes||[],Is)).catch(l=>(console.error("Error loading module types:",l),Is=aE,Is))),Yd.then(l=>{e(l),s(!1)}))},[]),{moduleTypes:n,loading:t}}const Kd=({className:n,title:e="print",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsxs("g",{fill:"currentColor",children:[x.jsx("polyline",{fill:"none",points:"3.5 3.5 3.5 0.5 12.5 0.5 12.5 3.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),x.jsx("path",{d:"M3.5,12.5H.5v-4a3,3,0,0,1,3-3h9a3,3,0,0,1,3,3v4h-3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),x.jsx("rect",{height:"6",width:"9",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"3.5",y:"9.5"})]})]}),cE=({className:n,title:e="schedule",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsxs("g",{fill:"currentColor",children:[x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"11.5",x2:"15.5",y1:"0.5",y2:"4.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"7",x2:"7",y1:"5.5",y2:"8.5"}),x.jsx("circle",{cx:"7",cy:"9",fill:"none",r:"6.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),Pd=({className:n,title:e="arrow up",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsx("g",{fill:"currentColor",children:x.jsx("polyline",{fill:"none",points:"15.5,10.5 8,5.5 0.5,10.5 ",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),Jd=({className:n,title:e="arrow down",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsx("g",{fill:"currentColor",children:x.jsx("polyline",{fill:"none",points:"15.5,5.5 8,10.5 0.5,5.5 ",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),uE=({settings:n,modules:e,triggerChannelPrint:t,triggerModulePrint:s,setShowScheduleModal:l,swapChannels:o,setShowEditModuleModal:c,setEditingModule:f,moveModuleInChannel:d,assignModuleToChannel:p,reorderChannelModules:g,removeModuleFromChannel:y,setShowAddModuleModal:b,setShowCreateUnassignedModal:v,wifiStatus:k})=>{const{moduleTypes:E}=zo(),C=Q.useRef({}),M=Q.useRef(null),L=Q.useRef(!1),V=Q.useRef(null),[W,$]=Q.useState(null),[Y,I]=Q.useState(null),se=Q.useRef(null),ue=Q.useRef(new Map),je=w=>typeof w=="string"&&w.trim().length>0,st=w=>!w||typeof w!="object"?!1:w.type==="horizontalRule"?!0:w.type==="text"?typeof w.text=="string"&&w.text.trim().length>0:Array.isArray(w.content)?w.content.some(j=>st(j)):!1,Le=w=>{const j=w?.config||{};switch(w?.type){case"news":return je(j.news_api_key);case"rss":return Array.isArray(j.rss_feeds)&&j.rss_feeds.some(P=>je(String(P||"")));case"email":return je(j.email_user)&&je(j.email_password);case"calendar":return Array.isArray(j.ical_sources)&&j.ical_sources.some(P=>je(P?.url));case"webhook":return je(j.url);case"text":return st(j.content_doc);case"weather":return je(j.city_name)||je(n?.city_name);default:return!0}},ft=w=>`channel:${w}`,Ve=w=>{if(w==="unassigned")return{type:"unassigned"};if(w?.startsWith("channel:")){const j=Number(w.split(":")[1]);if(Number.isFinite(j))return{type:"channel",position:j}}return null},Te=w=>{const j={};return w.forEach((P,J)=>{j[P]=J}),j},H=(w,j,P)=>{const J=[...w],[ne]=J.splice(j,1);return J.splice(P,0,ne),J},Z=w=>{I(j=>w?j&&j.listId===w.listId&&j.index===w.index&&Math.abs(j.top-w.top)<1?j:w:j&&null),se.current=w,w?.listId&&ue.current.set(w.listId,w)},pe=(w,j)=>{const P=C.current[w];if(!P)return null;const J=Array.from(P.querySelectorAll('[data-dnd-item="true"]')),ne=P.getBoundingClientRect();if(J.length===0)return{listId:w,index:0,top:Math.max(8,Math.floor(ne.height/2))};let F=J.length;for(let te=0;te<J.length;te+=1){const he=J[te].getBoundingClientRect(),we=he.top+he.height/2;if(j<we){F=te;break}}let fe;if(F===0){const te=J[0].getBoundingClientRect(),he=Math.max(0,te.top-ne.top);fe=te.top-ne.top-he/2}else if(F>=J.length){const te=J[J.length-1].getBoundingClientRect(),he=Math.max(0,ne.bottom-te.bottom);fe=te.bottom-ne.top+he/2-1}else{const te=J[F-1].getBoundingClientRect(),he=J[F].getBoundingClientRect(),we=Math.max(0,he.top-te.bottom);fe=te.bottom-ne.top+we/2-1}const ce=Math.max(6,Math.min(fe,ne.height-6));return{listId:w,index:F,top:ce}},Ae=(w,j)=>{if(w.target.closest('[data-no-drag="true"]')){w.preventDefault();return}const P=w.currentTarget?.getBoundingClientRect?.();j.itemHeight=P?.height||44,L.current=!0,w.dataTransfer.effectAllowed="move",w.dataTransfer.setData("text/plain",j.moduleId),M.current=j,$(j)},ze=(w,j)=>{if(!M.current||(w.preventDefault(),V.current))return;const P=w.clientY;V.current=requestAnimationFrame(()=>{V.current=null;const J=pe(j,P);Z(J)})},A=w=>{w.currentTarget.contains(w.relatedTarget)},U=()=>{V.current&&(cancelAnimationFrame(V.current),V.current=null),I(null),$(null),M.current=null,se.current=null,ue.current.clear(),setTimeout(()=>{L.current=!1},0)},re=w=>{const j=Ve(w);return j?j.type==="unassigned"?Re.map(P=>P.id):(be[j.position]||[]).map(P=>P.module_id):[]},le=(w,j)=>{L.current||(c(w),f(JSON.parse(JSON.stringify(j))))},ge=(w,j)=>{w.preventDefault();const P=M.current;if(!P)return;const ne=ue.current.get(j)||pe(j,w.clientY)||Y,F=ne?ne.index:0,fe=P.listId,ce=Ve(fe),te=Ve(j);if(!ce||!te){U();return}if(fe===j){const he=re(fe),we=he.indexOf(P.moduleId);if(we===-1){U();return}let Je=F;if(Je>we&&(Je-=1),Je===we){U();return}const bt=H(he,we,Je);ce.type==="unassigned"?qe(bt):g(ce.position,Te(bt),{optimistic:!0}),U();return}if(ce.type==="unassigned"&&te.type==="channel"){const he=re(j),we=Math.max(0,Math.min(F,he.length)),Je=[...he];Je.splice(we,0,P.moduleId),qe(bt=>bt.filter(Xt=>Xt!==P.moduleId)),U(),(async()=>await p(te.position,P.moduleId,we,{silent:!0,optimistic:!0})&&await g(te.position,Te(Je),{optimistic:!0}))();return}if(ce.type==="channel"&&te.type==="unassigned"){const he=Math.max(0,Math.min(F,Re.length));qe(we=>{const Je=we.filter(bt=>bt!==P.moduleId);return Je.splice(he,0,P.moduleId),Je}),y(ce.position,P.moduleId,{silent:!0,optimistic:!0}),U();return}if(ce.type==="channel"&&te.type==="channel"){const he=re(j),we=Math.max(0,Math.min(F,he.length)),Je=[...he];Je.splice(we,0,P.moduleId),U(),(async()=>!await y(ce.position,P.moduleId,{silent:!0,optimistic:!0})||!await p(te.position,P.moduleId,we,{silent:!0,optimistic:!0})||await g(te.position,Te(Je),{optimistic:!0}))();return}U()},be=(()=>{const w={};for(let j=1;j<=8;j+=1){const J=((n.channels?.[j]||{modules:[]}).modules||[]).map(ne=>({...ne,module:e[ne.module_id]})).filter(ne=>ne.module).sort((ne,F)=>ne.order-F.order);w[j]=J}return w})(),Me=(()=>{const w=new Set;return Object.values(n.channels||{}).forEach(j=>{(j.modules||[]).forEach(P=>{w.add(P.module_id)})}),Object.values(e||{}).filter(j=>!w.has(j.id))})(),[at,qe]=Q.useState([]),ae=Me.map(w=>w.id),Se=new Set(ae);Q.useEffect(()=>{qe(w=>{const j=new Set(ae),P=w.filter(F=>j.has(F)),J=new Set(P),ne=ae.filter(F=>!J.has(F));return ne.length===0&&P.length===w.length?w:[...P,...ne]})},[ae]);const Re=at.filter(w=>Se.has(w)).map(w=>e[w]).filter(Boolean),$e=(w,j)=>{const P=at.findIndex(ne=>ne===w);if(P===-1)return;const J=[...at];j==="up"&&P>0?([J[P],J[P-1]]=[J[P-1],J[P]],qe(J)):j==="down"&&P<J.length-1&&([J[P],J[P+1]]=[J[P+1],J[P]],qe(J))};return x.jsxs("div",{className:"space-y-4",children:[x.jsx("div",{className:"space-y-4",children:[1,2,3,4,5,6,7,8].map(w=>{const j=n.channels?.[w]||{},P=be[w]||[],J=ft(w),ne=Hx;return x.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:ne[w-1]},children:x.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col h-full",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3 gap-4",children:[x.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto",children:[x.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight",children:w}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{type:"button",onClick:()=>t(w),className:"group flex items-center justify-center px-2 py-1 rounded border-2 bg-transparent border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer",title:"Print Channel",children:x.jsx(Kd,{className:"w-3.5 h-3.5 text-gray-400 group-hover:text-black transition-all"})}),x.jsxs("button",{type:"button",onClick:()=>l(w),className:`group flex items-center gap-1 px-2 py-1 rounded border-2 transition-all cursor-pointer ${j.schedule&&j.schedule.length>0?"bg-transparent shadow-sm":"bg-transparent border-gray-300 hover:border-black hover:bg-white"}`,style:j.schedule&&j.schedule.length>0?{color:"var(--color-brass)",borderColor:"var(--color-brass)"}:{},onMouseEnter:F=>{j.schedule&&j.schedule.length>0&&(F.currentTarget.style.backgroundColor="var(--color-brass-10)")},onMouseLeave:F=>{j.schedule&&j.schedule.length>0&&(F.currentTarget.style.backgroundColor="transparent")},title:"Configure Schedule",children:[x.jsx(cE,{className:`w-3.5 h-3.5 transition-all ${j.schedule?.length>0?"":"text-gray-400 group-hover:text-black"}`,style:j.schedule?.length>0?{color:"var(--color-brass)"}:{}}),x.jsx("span",{className:`text-xs font-bold ${j.schedule?.length>0?"":"text-gray-400 group-hover:text-black"}`,style:j.schedule?.length>0?{color:"var(--color-brass)"}:{},children:j.schedule?.length||0})]})]})]}),x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{type:"button",onClick:F=>{F.preventDefault(),o(w,w-1)},disabled:w===1,className:"px-2 py-1 text-xs  border-2 border-gray-300 hover:border-black rounded text-gray-600 hover:text-black transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer hover:bg-white",title:"Move channel up",children:x.jsx(Pd,{className:"w-3 h-3"})}),x.jsx("button",{type:"button",onClick:F=>{F.preventDefault(),o(w,w+1)},disabled:w===8,className:"px-2 py-1 text-xs  border-2 border-gray-300 hover:border-black rounded text-gray-600 hover:text-black transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer hover:bg-white",title:"Move channel down",children:x.jsx(Jd,{className:"w-3 h-3"})})]})]}),x.jsxs("div",{ref:F=>{C.current[J]=F},onDragOver:F=>ze(F,J),onDragLeave:A,onDrop:F=>ge(F,J),"data-drop-active":Y?.listId===J,className:"space-y-2 mb-2 flex-grow min-h-[36px] dnd-list",role:"list",children:[P.map((F,fe)=>x.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border-2 border-gray-600 hover:border-black group transition-all dnd-item cursor-pointer",style:{backgroundColor:"var(--color-bg-card)"},onMouseEnter:ce=>ce.currentTarget.style.setProperty("background-color","var(--color-bg-white)","important"),onMouseLeave:ce=>ce.currentTarget.style.setProperty("background-color","var(--color-bg-card)","important"),onClick:()=>le(F.module_id,e[F.module_id]),onDragOver:ce=>ze(ce,J),onDrop:ce=>ge(ce,J),draggable:!0,"data-dnd-item":"true","data-dragging":W?.moduleId===F.module_id?"true":"false",onDragStart:ce=>Ae(ce,{moduleId:F.module_id,listId:J,index:fe}),onDragEnd:U,role:"listitem",children:[x.jsx("div",{className:"flex-1 min-w-0 mr-2",children:(()=>{const ce=E.find(Dt=>Dt.id===F.module.type),te=ce?!ce.offline:!1,he=Le(F.module),Je=te&&!he,bt=k?.connected;let Xt="var(--color-text-muted)";return bt?Je&&(Xt="var(--color-brass)"):Xt="var(--color-error)",x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"text-sm font-bold text-gray-700 group-hover:text-black  truncate transition-colors",children:F.module.name}),x.jsxs("div",{className:`text-[10px]  truncate flex items-baseline gap-1 ${Je?"":"text-gray-700"}`,style:Je?{color:"var(--color-brass)"}:{},children:[te&&(bt?x.jsx(Qi,{className:"w-2.5 h-2.5 flex-shrink-0 group-hover:text-black transition-colors",style:{transform:"translateY(0.125rem)",color:Xt}}):x.jsx(xc,{className:"w-2.5 h-2.5 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-error)"}})),x.jsx("span",{className:"truncate font-mono group-hover:text-black transition-colors",style:{color:"var(--color-text-muted)"},children:ce?.label?.toUpperCase()})]})]})})()}),x.jsxs("div",{className:"flex gap-2 items-center",onClick:ce=>ce.stopPropagation(),"data-no-drag":"true",children:[x.jsx("button",{type:"button",onClick:()=>s(F.module_id),className:"px-1.5 py-1 rounded border border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer",title:"Print this module",children:x.jsx(Kd,{className:"w-3 h-3 text-gray-400 hover:text-black transition-colors"})}),x.jsxs("div",{className:"flex flex-col gap-0.5",children:[x.jsx("button",{type:"button",onClick:()=>d(w,F.module_id,"up"),disabled:fe===0,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:ce=>{const te=ce.currentTarget.querySelector("svg");te&&(te.style.color="var(--color-text-main)")},onMouseLeave:ce=>{const te=ce.currentTarget.querySelector("svg");te&&(te.style.color="var(--color-text-muted)")},children:x.jsx(Pd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})}),x.jsx("button",{type:"button",onClick:()=>d(w,F.module_id,"down"),disabled:fe===P.length-1,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:ce=>{const te=ce.currentTarget.querySelector("svg");te&&(te.style.color="var(--color-text-main)")},onMouseLeave:ce=>{const te=ce.currentTarget.querySelector("svg");te&&(te.style.color="var(--color-text-muted)")},children:x.jsx(Jd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})})]})]})]},F.module_id)),Y?.listId===J&&x.jsx("div",{className:"dnd-indicator",style:{top:Y.top}})]}),x.jsx("div",{className:"mt-auto",children:x.jsx("button",{type:"button",onClick:()=>b(w),onDragOver:F=>ze(F,J),onDrop:F=>ge(F,J),className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs  font-bold tracking-wider cursor-pointer",style:{backgroundColor:"transparent"},onMouseEnter:F=>F.currentTarget.style.backgroundColor="var(--color-bg-white)",onMouseLeave:F=>F.currentTarget.style.backgroundColor="transparent",title:"Add a module to this channel",children:"+ ADD MODULE"})})]})},w)})}),x.jsxs("div",{className:"mt-8",children:[x.jsx("h3",{className:"text-lg font-bold text-black mb-4 tracking-tight border-b-2 border-dashed border-gray-300 pb-2",children:"UNASSIGNED MODULES"}),x.jsxs("div",{ref:w=>{C.current.unassigned=w},onDragOver:w=>ze(w,"unassigned"),onDragLeave:A,onDrop:w=>ge(w,"unassigned"),"data-drop-active":Y?.listId==="unassigned",className:"space-y-2 min-h-[36px] dnd-list",role:"list",children:[Re.length===0?x.jsx("div",{className:"text-sm text-gray-500 italic py-4",children:"No unassigned modules. Create a module below or assign existing modules to channels."}):Re.map((w,j)=>{const P=E.find(te=>te.id===w.type),J=P?!P.offline:!1,ne=Le(w),F=J&&!ne,fe=k?.connected;let ce="var(--color-text-muted)";return fe?F&&(ce="var(--color-brass)"):ce="var(--color-error)",x.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border-2 border-gray-300 hover:border-black group transition-all dnd-item cursor-pointer",style:{backgroundColor:"var(--color-bg-card)"},onMouseEnter:te=>te.currentTarget.style.setProperty("background-color","var(--color-bg-white)","important"),onMouseLeave:te=>te.currentTarget.style.setProperty("background-color","var(--color-bg-card)","important"),onClick:()=>le(w.id,w),onDragOver:te=>ze(te,"unassigned"),onDrop:te=>ge(te,"unassigned"),draggable:!0,"data-dnd-item":"true","data-dragging":W?.moduleId===w.id?"true":"false",onDragStart:te=>Ae(te,{moduleId:w.id,listId:"unassigned",index:j}),onDragEnd:U,role:"listitem",children:[x.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[x.jsx("div",{className:"text-sm font-bold text-gray-700 group-hover:text-black truncate transition-colors",children:w.name}),x.jsxs("div",{className:`text-[10px] truncate flex items-baseline gap-1 ${F?"":"text-gray-700"}`,style:F?{color:"var(--color-brass)"}:{},children:[J&&(fe?x.jsx(Qi,{className:"w-2.5 h-2.5 flex-shrink-0 group-hover:text-black transition-colors",style:{transform:"translateY(0.125rem)",color:ce}}):x.jsx(xc,{className:"w-2.5 h-2.5 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-error)"}})),x.jsx("span",{className:"truncate font-mono group-hover:text-black transition-colors",style:{color:"var(--color-text-muted)"},children:P?.label?.toUpperCase()})]})]}),x.jsxs("div",{className:"flex gap-2 items-center",onClick:te=>te.stopPropagation(),"data-no-drag":"true",children:[x.jsx("button",{type:"button",onClick:()=>s(w.id),className:"px-1.5 py-1 rounded border border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer",title:"Print this module",children:x.jsx(Kd,{className:"w-3 h-3 text-gray-400 hover:text-black transition-colors"})}),x.jsxs("div",{className:"flex flex-col gap-0.5",children:[x.jsx("button",{type:"button",onClick:()=>$e(w.id,"up"),disabled:Re.findIndex(te=>te.id===w.id)===0,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:te=>{const he=te.currentTarget.querySelector("svg");he&&(he.style.color="var(--color-text-main)")},onMouseLeave:te=>{const he=te.currentTarget.querySelector("svg");he&&(he.style.color="var(--color-text-muted)")},children:x.jsx(Pd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})}),x.jsx("button",{type:"button",onClick:()=>$e(w.id,"down"),disabled:Re.findIndex(te=>te.id===w.id)===Re.length-1,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:te=>{const he=te.currentTarget.querySelector("svg");he&&(he.style.color="var(--color-text-main)")},onMouseLeave:te=>{const he=te.currentTarget.querySelector("svg");he&&(he.style.color="var(--color-text-muted)")},children:x.jsx(Jd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})})]})]})]},w.id)}),Y?.listId==="unassigned"&&x.jsx("div",{className:"dnd-indicator",style:{top:Y.top}})]}),x.jsx("div",{className:"mt-4",children:x.jsx("button",{type:"button",onClick:()=>{v&&v(!0)},className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs font-bold tracking-wider cursor-pointer",style:{backgroundColor:"transparent"},onMouseEnter:w=>w.currentTarget.style.backgroundColor="var(--color-bg-white)",onMouseLeave:w=>w.currentTarget.style.backgroundColor="transparent",title:"Add a new unassigned module",children:"+ ADD MODULE"})})]})]})},op=({onClick:n,className:e="",...t})=>x.jsx("button",{onClick:n,className:`text-gray-500 hover:text-black text-2xl cursor-pointer hover-shimmer ${e}`,type:"button",...t,children:""}),nb=({channelPosition:n,onClose:e,onCreateModule:t,onAssignModule:s,onOpenEdit:l,isUnassigned:o=!1})=>{const c=Q.useRef(null),{moduleTypes:f}=zo();return n===null&&!o?null:x.jsx("div",{className:Ke.modalBackdrop,onMouseDown:d=>{d.target===d.currentTarget&&(c.current="backdrop")},onClick:d=>{d.target===d.currentTarget&&c.current==="backdrop"&&e(),c.current=null},children:x.jsxs("div",{className:Ke.modalContent,onClick:d=>d.stopPropagation(),children:[x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsx("h3",{className:"text-xl font-bold text-black ",children:n?`Add Module to Channel ${n}`:"Create Module"}),x.jsx(op,{onClick:e})]}),x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[...f].sort((d,p)=>d.offline&&!p.offline?-1:!d.offline&&p.offline?1:d.label.localeCompare(p.label)).map(d=>x.jsx("button",{type:"button",onClick:async()=>{const p=await t(d.id);p&&(n&&await s(n,p.id),e(),l(p.id,p))},className:"flex flex-col items-center p-4 bg-white border-2 border-gray-300 hover:border-black rounded-lg transition-colors text-center group cursor-pointer hover-shimmer",children:x.jsxs("div",{className:"flex items-baseline justify-center gap-1.5",children:[!d.offline&&x.jsx(Qi,{className:"w-3 h-3 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-text-muted)"}}),x.jsx("span",{className:"font-bold text-black group-hover:text-black ",children:d.label})]})},d.id))})]})})},fE=({value:n={},onChange:e})=>{const[t,s]=Q.useState(()=>Object.entries(n||{}).map(([d,p])=>({key:d,value:p}))),l=d=>{const p={};d.forEach(g=>{g.key.trim()&&(p[g.key.trim()]=g.value)}),e(p)},o=(d,p,g)=>{const y=[...t];y[d]={...y[d],[p]:g},s(y),l(y)},c=()=>{s([...t,{key:"",value:""}])},f=d=>{const p=t.filter((g,y)=>y!==d);s(p),l(p)};return x.jsxs("div",{className:"space-y-2",children:[t.map((d,p)=>x.jsxs("div",{className:"flex gap-2 items-center",children:[x.jsx("input",{type:"text",value:d.key,onChange:g=>o(p,"key",g.target.value),placeholder:"Key",className:`${Ke.inputSmall} flex-1`}),x.jsx("input",{type:"text",value:d.value,onChange:g=>o(p,"value",g.target.value),placeholder:"Value",className:`${Ke.inputSmall} flex-1`}),x.jsx("button",{type:"button",onClick:()=>f(p),className:`${Ke.buttonDanger} flex-shrink-0 px-2`,children:""})]},p)),x.jsx("button",{type:"button",onClick:c,className:`${Ke.buttonGhost} text-xs w-full border-dashed border-2 border-gray-200 py-1`,children:"+ Add Entry"})]})},dE=({value:n,onChange:e,presets:t={},onPresetSelect:s})=>{const l=o=>{const c=o.target.value;if(e(c),c&&t[c]&&s){const f=t[c];let d={};if(f.values)d=f.values;else{const{label:p,...g}=f;d=g}s(d)}};return x.jsx("select",{value:n||"custom",onChange:l,className:Ke.input,children:Object.entries(t).map(([o,c])=>x.jsx("option",{value:o,children:c.label||o},o))})},hE=({className:n,title:e="check",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsx("g",{fill:"currentColor",children:x.jsx("path",{d:"M0.5,7l4,4.5 c0,0,2.5-5.5,11-8.5",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),pE=({className:n,title:e="warning",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsx("path",{fill:"currentColor",d:"M236.8,188.09,149.35,36.22h0a24.76,24.76,0,0,0-42.7,0L19.2,188.09a23.51,23.51,0,0,0,0,23.72A24.35,24.35,0,0,0,40.55,224h174.9a24.35,24.35,0,0,0,21.33-12.19A23.51,23.51,0,0,0,236.8,188.09ZM120,104a8,8,0,0,1,16,0v40a8,8,0,0,1-16,0Zm8,88a12,12,0,1,1,12-12A12,12,0,0,1,128,192Z"})]}),mE=({formData:n={}})=>{const[e,t]=Q.useState(!1),[s,l]=Q.useState(null),o=async()=>{t(!0),l(null);try{const f=await(await nt("/api/webhook/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();l(f)}catch(c){l({success:!1,error:c.message})}finally{t(!1)}};return x.jsxs("div",{className:"space-y-3",children:[x.jsx("button",{type:"button",onClick:o,disabled:e||!n.url,className:"text-sm px-3 py-1.5 border-2 border-gray-300 rounded-lg hover:border-black disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e?x.jsxs("span",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"w-3 h-3 border-2 border-black border-t-transparent rounded-full animate-spin"}),"Testing..."]}):"Test Webhook"}),s&&x.jsx("div",{className:`p-3 rounded-lg text-sm border-2 ${s.success?"bg-gray-50 border-gray-300":"bg-white border-black border-dashed"}`,children:s.success?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex items-center gap-2 text-black font-bold mb-2",children:[x.jsx(hE,{className:"w-4 h-4"}),x.jsx("span",{children:"Success"}),s.status_code&&x.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["(HTTP ",s.status_code,")"]})]}),s.json_path&&x.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Extracted from: ",x.jsx("code",{className:"bg-gray-200 px-1 rounded",children:s.json_path})]}),x.jsx("div",{className:"bg-white border border-gray-200 rounded p-2 font-mono text-xs whitespace-pre-wrap break-words max-h-32 overflow-y-auto",children:s.content})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex items-center gap-2 text-black font-bold mb-2",children:[x.jsx(pE,{className:"w-4 h-4"}),x.jsx("span",{children:"Error"})]}),x.jsx("div",{className:"text-gray-600 text-xs",children:s.error}),s.raw_response&&x.jsxs("details",{className:"mt-2",children:[x.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"Show raw response"}),x.jsx("div",{className:"bg-gray-100 border border-gray-200 rounded p-2 font-mono text-xs whitespace-pre-wrap break-words max-h-32 overflow-y-auto mt-1",children:s.raw_response})]})]})})]})},gE=({schema:n,uiSchema:e={},moduleId:t,onActionComplete:s})=>{const[l,o]=Q.useState(!1),[c,f]=Q.useState(null),d=e["ui:options"]||{},p=d.action||"default",g=d.label||n?.title||"Action",y=d.confirmMessage,b=d.style||"primary",v=async()=>{if(!(y&&!window.confirm(y))){if(!t){console.error("ActionButton: moduleId is required"),f("error");return}o(!0),f(null);try{const E=await nt(`/api/modules/${t}/actions/${p}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(E.ok){const C=await E.json();f("success"),C.reload&&s?setTimeout(()=>s(),300):setTimeout(()=>f(null),2e3)}else f("error")}catch(E){console.error("ActionButton error:",E),f("error")}finally{o(!1)}}};let k=Ke.buttonPrimary;return b==="danger"?k="px-4 py-2 rounded-lg font-medium bg-red-600 text-white hover:bg-red-700 transition-colors disabled:opacity-50":b==="ghost"?k=Ke.buttonGhost:b==="link"&&(k="text-black hover:text-zinc-600 underline text-sm font-bold disabled:opacity-50"),x.jsxs("div",{className:"mb-4",children:[x.jsx("button",{type:"button",onClick:v,disabled:l,className:k,children:l?"Processing...":g}),c==="success"&&x.jsx("span",{className:"ml-3 text-green-600 text-sm",children:" Done"}),c==="error"&&x.jsx("span",{className:"ml-3 text-red-600 text-sm",children:" Failed"})]})};var yE=Bx();const bE=lp(yE);var Fd={exports:{}},Xd={};var rb;function xE(){if(rb)return Xd;rb=1;var n=Ro();function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,l=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function f(y,b){var v=b(),k=s({inst:{value:v,getSnapshot:b}}),E=k[0].inst,C=k[1];return o(function(){E.value=v,E.getSnapshot=b,d(E)&&C({inst:E})},[y,v,b]),l(function(){return d(E)&&C({inst:E}),y(function(){d(E)&&C({inst:E})})},[y]),c(v),v}function d(y){var b=y.getSnapshot;y=y.value;try{var v=b();return!t(y,v)}catch{return!0}}function p(y,b){return b()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return Xd.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,Xd}var sb;function Ix(){return sb||(sb=1,Fd.exports=xE()),Fd.exports}var Vx=Ix();function qt(n){this.content=n}qt.prototype={constructor:qt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var s=t&&t!=n?this.remove(t):this,l=s.find(n),o=s.content.slice();return l==-1?o.push(t||n,e):(o[l+1]=e,t&&(o[l]=t)),new qt(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new qt(t)},addToStart:function(n,e){return new qt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new qt(t)},addBefore:function(n,e,t){var s=this.remove(e),l=s.content.slice(),o=s.find(n);return l.splice(o==-1?l.length:o,0,e,t),new qt(l)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=qt.from(n),n.size?new qt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=qt.from(n),n.size?new qt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=qt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};qt.from=function(n){if(n instanceof qt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new qt(e)};function qx(n,e,t){for(let s=0;;s++){if(s==n.childCount||s==e.childCount)return n.childCount==e.childCount?null:t;let l=n.child(s),o=e.child(s);if(l==o){t+=l.nodeSize;continue}if(!l.sameMarkup(o))return t;if(l.isText&&l.text!=o.text){for(let c=0;l.text[c]==o.text[c];c++)t++;return t}if(l.content.size||o.content.size){let c=qx(l.content,o.content,t+1);if(c!=null)return c}t+=l.nodeSize}}function $x(n,e,t,s){for(let l=n.childCount,o=e.childCount;;){if(l==0||o==0)return l==o?null:{a:t,b:s};let c=n.child(--l),f=e.child(--o),d=c.nodeSize;if(c==f){t-=d,s-=d;continue}if(!c.sameMarkup(f))return{a:t,b:s};if(c.isText&&c.text!=f.text){let p=0,g=Math.min(c.text.length,f.text.length);for(;p<g&&c.text[c.text.length-p-1]==f.text[f.text.length-p-1];)p++,t--,s--;return{a:t,b:s}}if(c.content.size||f.content.size){let p=$x(c.content,f.content,t-1,s-1);if(p)return p}t-=d,s-=d}}class X{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let s=0;s<e.length;s++)this.size+=e[s].nodeSize}nodesBetween(e,t,s,l=0,o){for(let c=0,f=0;f<t;c++){let d=this.content[c],p=f+d.nodeSize;if(p>e&&s(d,l+f,o||null,c)!==!1&&d.content.size){let g=f+1;d.nodesBetween(Math.max(0,e-g),Math.min(d.content.size,t-g),s,l+g)}f=p}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,s,l){let o="",c=!0;return this.nodesBetween(e,t,(f,d)=>{let p=f.isText?f.text.slice(Math.max(e,d)-d,t-d):f.isLeaf?l?typeof l=="function"?l(f):l:f.type.spec.leafText?f.type.spec.leafText(f):"":"";f.isBlock&&(f.isLeaf&&p||f.isTextblock)&&s&&(c?c=!1:o+=s),o+=p},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,s=e.firstChild,l=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(s)&&(l[l.length-1]=t.withText(t.text+s.text),o=1);o<e.content.length;o++)l.push(e.content[o]);return new X(l,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let s=[],l=0;if(t>e)for(let o=0,c=0;c<t;o++){let f=this.content[o],d=c+f.nodeSize;d>e&&((c<e||d>t)&&(f.isText?f=f.cut(Math.max(0,e-c),Math.min(f.text.length,t-c)):f=f.cut(Math.max(0,e-c-1),Math.min(f.content.size,t-c-1))),s.push(f),l+=f.nodeSize),c=d}return new X(s,l)}cutByIndex(e,t){return e==t?X.empty:e==0&&t==this.content.length?this:new X(this.content.slice(e,t))}replaceChild(e,t){let s=this.content[e];if(s==t)return this;let l=this.content.slice(),o=this.size+t.nodeSize-s.nodeSize;return l[e]=t,new X(l,o)}addToStart(e){return new X([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new X(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,s=0;t<this.content.length;t++){let l=this.content[t];e(l,s,t),s+=l.nodeSize}}findDiffStart(e,t=0){return qx(this,e,t)}findDiffEnd(e,t=this.size,s=e.size){return $x(this,e,t,s)}findIndex(e){if(e==0)return tc(0,e);if(e==this.size)return tc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,s=0;;t++){let l=this.child(t),o=s+l.nodeSize;if(o>=e)return o==e?tc(t+1,o):tc(t,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return X.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new X(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return X.empty;let t,s=0;for(let l=0;l<e.length;l++){let o=e[l];s+=o.nodeSize,l&&o.isText&&e[l-1].sameMarkup(o)?(t||(t=e.slice(0,l)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new X(t||e,s)}static from(e){if(!e)return X.empty;if(e instanceof X)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new X([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}X.empty=new X([],0);const Qd={index:0,offset:0};function tc(n,e){return Qd.index=n,Qd.offset=e,Qd}function vc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let s=0;s<n.length;s++)if(!vc(n[s],e[s]))return!1}else{for(let s in n)if(!(s in e)||!vc(n[s],e[s]))return!1;for(let s in e)if(!(s in n))return!1}return!0}let rt=class Ah{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,s=!1;for(let l=0;l<e.length;l++){let o=e[l];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,l));else{if(o.type.excludes(this.type))return e;!s&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,l)),t.push(this),s=!0),t&&t.push(o)}}return t||(t=e.slice()),s||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&vc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let s=e.marks[t.type];if(!s)throw new RangeError(`There is no mark type ${t.type} in this schema`);let l=s.create(t.attrs);return s.checkAttrs(l.attrs),l}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++)if(!e[s].eq(t[s]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ah.none;if(e instanceof Ah)return[e];let t=e.slice();return t.sort((s,l)=>s.type.rank-l.type.rank),t}};rt.none=[];class Sc extends Error{}class ie{constructor(e,t,s){this.content=e,this.openStart=t,this.openEnd=s}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let s=Yx(this.content,e+this.openStart,t);return s&&new ie(s,this.openStart,this.openEnd)}removeBetween(e,t){return new ie(Gx(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ie.empty;let s=t.openStart||0,l=t.openEnd||0;if(typeof s!="number"||typeof l!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ie(X.fromJSON(e,t.content),s,l)}static maxOpen(e,t=!0){let s=0,l=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)s++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)l++;return new ie(e,s,l)}}ie.empty=new ie(X.empty,0,0);function Gx(n,e,t){let{index:s,offset:l}=n.findIndex(e),o=n.maybeChild(s),{index:c,offset:f}=n.findIndex(t);if(l==e||o.isText){if(f!=t&&!n.child(c).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(s!=c)throw new RangeError("Removing non-flat range");return n.replaceChild(s,o.copy(Gx(o.content,e-l-1,t-l-1)))}function Yx(n,e,t,s){let{index:l,offset:o}=n.findIndex(e),c=n.maybeChild(l);if(o==e||c.isText)return s&&!s.canReplace(l,l,t)?null:n.cut(0,e).append(t).append(n.cut(e));let f=Yx(c.content,e-o-1,t,c);return f&&n.replaceChild(l,c.copy(f))}function vE(n,e,t){if(t.openStart>n.depth)throw new Sc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Sc("Inconsistent open depths");return Kx(n,e,t,0)}function Kx(n,e,t,s){let l=n.index(s),o=n.node(s);if(l==e.index(s)&&s<n.depth-t.openStart){let c=Kx(n,e,t,s+1);return o.copy(o.content.replaceChild(l,c))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==s&&e.depth==s){let c=n.parent,f=c.content;return Js(c,f.cut(0,n.parentOffset).append(t.content).append(f.cut(e.parentOffset)))}else{let{start:c,end:f}=SE(t,n);return Js(o,Jx(n,c,f,e,s))}else return Js(o,kc(n,e,s))}function Px(n,e){if(!e.type.compatibleContent(n.type))throw new Sc("Cannot join "+e.type.name+" onto "+n.type.name)}function Oh(n,e,t){let s=n.node(t);return Px(s,e.node(t)),s}function Ps(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function fo(n,e,t,s){let l=(e||n).node(t),o=0,c=e?e.index(t):l.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(Ps(n.nodeAfter,s),o++));for(let f=o;f<c;f++)Ps(l.child(f),s);e&&e.depth==t&&e.textOffset&&Ps(e.nodeBefore,s)}function Js(n,e){return n.type.checkContent(e),n.copy(e)}function Jx(n,e,t,s,l){let o=n.depth>l&&Oh(n,e,l+1),c=s.depth>l&&Oh(t,s,l+1),f=[];return fo(null,n,l,f),o&&c&&e.index(l)==t.index(l)?(Px(o,c),Ps(Js(o,Jx(n,e,t,s,l+1)),f)):(o&&Ps(Js(o,kc(n,e,l+1)),f),fo(e,t,l,f),c&&Ps(Js(c,kc(t,s,l+1)),f)),fo(s,null,l,f),new X(f)}function kc(n,e,t){let s=[];if(fo(null,n,t,s),n.depth>t){let l=Oh(n,e,t+1);Ps(Js(l,kc(n,e,t+1)),s)}return fo(e,null,t,s),new X(s)}function SE(n,e){let t=e.depth-n.openStart,l=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)l=e.node(o).copy(X.from(l));return{start:l.resolveNoCache(n.openStart+t),end:l.resolveNoCache(l.content.size-n.openEnd-t)}}class ko{constructor(e,t,s){this.pos=e,this.path=t,this.parentOffset=s,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let s=this.pos-this.path[this.path.length-1],l=e.child(t);return s?e.child(t).cut(s):l}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let s=this.path[t*3],l=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)l+=s.child(o).nodeSize;return l}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return rt.none;if(this.textOffset)return e.child(t).marks;let s=e.maybeChild(t-1),l=e.maybeChild(t);if(!s){let f=s;s=l,l=f}let o=s.marks;for(var c=0;c<o.length;c++)o[c].type.spec.inclusive===!1&&(!l||!o[c].isInSet(l.marks))&&(o=o[c--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let s=t.marks,l=e.parent.maybeChild(e.index());for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!l||!s[o].isInSet(l.marks))&&(s=s[o--].removeFromSet(s));return s}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let s=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);s>=0;s--)if(e.pos<=this.end(s)&&(!t||t(this.node(s))))return new Tc(this,e,s);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let s=[],l=0,o=t;for(let c=e;;){let{index:f,offset:d}=c.content.findIndex(o),p=o-d;if(s.push(c,f,l+d),!p||(c=c.child(f),c.isText))break;o=p-1,l+=d+1}return new ko(t,s,o)}static resolveCached(e,t){let s=ib.get(e);if(s)for(let o=0;o<s.elts.length;o++){let c=s.elts[o];if(c.pos==t)return c}else ib.set(e,s=new kE);let l=s.elts[s.i]=ko.resolve(e,t);return s.i=(s.i+1)%TE,l}}class kE{constructor(){this.elts=[],this.i=0}}const TE=12,ib=new WeakMap;class Tc{constructor(e,t,s){this.$from=e,this.$to=t,this.depth=s}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const EE=Object.create(null);class Gn{constructor(e,t,s,l=rt.none){this.type=e,this.attrs=t,this.marks=l,this.content=s||X.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,s,l=0){this.content.nodesBetween(e,t,s,l,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,s,l){return this.content.textBetween(e,t,s,l)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,s){return this.type==e&&vc(this.attrs,t||e.defaultAttrs||EE)&&rt.sameSet(this.marks,s||rt.none)}copy(e=null){return e==this.content?this:new Gn(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Gn(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,s=!1){if(e==t)return ie.empty;let l=this.resolve(e),o=this.resolve(t),c=s?0:l.sharedDepth(t),f=l.start(c),p=l.node(c).content.cut(l.pos-f,o.pos-f);return new ie(p,l.depth-c,o.depth-c)}replace(e,t,s){return vE(this.resolve(e),this.resolve(t),s)}nodeAt(e){for(let t=this;;){let{index:s,offset:l}=t.content.findIndex(e);if(t=t.maybeChild(s),!t)return null;if(l==e||t.isText)return t;e-=l+1}}childAfter(e){let{index:t,offset:s}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:s}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:s}=this.content.findIndex(e);if(s<e)return{node:this.content.child(t),index:t,offset:s};let l=this.content.child(t-1);return{node:l,index:t-1,offset:s-l.nodeSize}}resolve(e){return ko.resolveCached(this,e)}resolveNoCache(e){return ko.resolve(this,e)}rangeHasMark(e,t,s){let l=!1;return t>e&&this.nodesBetween(e,t,o=>(s.isInSet(o.marks)&&(l=!0),!l)),l}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Fx(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,s=X.empty,l=0,o=s.childCount){let c=this.contentMatchAt(e).matchFragment(s,l,o),f=c&&c.matchFragment(this.content,t);if(!f||!f.validEnd)return!1;for(let d=l;d<o;d++)if(!this.type.allowsMarks(s.child(d).marks))return!1;return!0}canReplaceWith(e,t,s,l){if(l&&!this.type.allowsMarks(l))return!1;let o=this.contentMatchAt(e).matchType(s),c=o&&o.matchFragment(this.content,t);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=rt.none;for(let t=0;t<this.marks.length;t++){let s=this.marks[t];s.type.checkAttrs(s.attrs),e=s.addToSet(e)}if(!rt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let s;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");s=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,s)}let l=X.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,l,s);return o.type.checkAttrs(o.attrs),o}}Gn.prototype.text=void 0;class Ec extends Gn{constructor(e,t,s,l){if(super(e,t,null,l),!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Fx(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ec(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ec(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Fx(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Zs{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let s=new CE(e,t);if(s.next==null)return Zs.empty;let l=Xx(s);s.next&&s.err("Unexpected trailing text");let o=jE(DE(l));return RE(o,s),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,s=e.childCount){let l=this;for(let o=t;l&&o<s;o++)l=l.matchType(e.child(o).type);return l}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let s=0;s<e.next.length;s++)if(this.next[t].type==e.next[s].type)return!0;return!1}fillBefore(e,t=!1,s=0){let l=[this];function o(c,f){let d=c.matchFragment(e,s);if(d&&(!t||d.validEnd))return X.from(f.map(p=>p.createAndFill()));for(let p=0;p<c.next.length;p++){let{type:g,next:y}=c.next[p];if(!(g.isText||g.hasRequiredAttrs())&&l.indexOf(y)==-1){l.push(y);let b=o(y,f.concat(g));if(b)return b}}return null}return o(this,[])}findWrapping(e){for(let s=0;s<this.wrapCache.length;s+=2)if(this.wrapCache[s]==e)return this.wrapCache[s+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),s=[{match:this,type:null,via:null}];for(;s.length;){let l=s.shift(),o=l.match;if(o.matchType(e)){let c=[];for(let f=l;f.type;f=f.via)c.push(f.type);return c.reverse()}for(let c=0;c<o.next.length;c++){let{type:f,next:d}=o.next[c];!f.isLeaf&&!f.hasRequiredAttrs()&&!(f.name in t)&&(!l.type||d.validEnd)&&(s.push({match:f.contentMatch,type:f,via:l}),t[f.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(s){e.push(s);for(let l=0;l<s.next.length;l++)e.indexOf(s.next[l].next)==-1&&t(s.next[l].next)}return t(this),e.map((s,l)=>{let o=l+(s.validEnd?"*":" ")+" ";for(let c=0;c<s.next.length;c++)o+=(c?", ":"")+s.next[c].type.name+"->"+e.indexOf(s.next[c].next);return o}).join(`
`)}}Zs.empty=new Zs(!0);class CE{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Xx(n){let e=[];do e.push(ME(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function ME(n){let e=[];do e.push(wE(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function wE(n){let e=OE(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=NE(n,e);else break;return e}function lb(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function NE(n,e){let t=lb(n),s=t;return n.eat(",")&&(n.next!="}"?s=lb(n):s=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:s,expr:e}}function AE(n,e){let t=n.nodeTypes,s=t[e];if(s)return[s];let l=[];for(let o in t){let c=t[o];c.isInGroup(e)&&l.push(c)}return l.length==0&&n.err("No node type or group '"+e+"' found"),l}function OE(n){if(n.eat("(")){let e=Xx(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=AE(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function DE(n){let e=[[]];return l(o(n,0),t()),e;function t(){return e.push([])-1}function s(c,f,d){let p={term:d,to:f};return e[c].push(p),p}function l(c,f){c.forEach(d=>d.to=f)}function o(c,f){if(c.type=="choice")return c.exprs.reduce((d,p)=>d.concat(o(p,f)),[]);if(c.type=="seq")for(let d=0;;d++){let p=o(c.exprs[d],f);if(d==c.exprs.length-1)return p;l(p,f=t())}else if(c.type=="star"){let d=t();return s(f,d),l(o(c.expr,d),d),[s(d)]}else if(c.type=="plus"){let d=t();return l(o(c.expr,f),d),l(o(c.expr,d),d),[s(d)]}else{if(c.type=="opt")return[s(f)].concat(o(c.expr,f));if(c.type=="range"){let d=f;for(let p=0;p<c.min;p++){let g=t();l(o(c.expr,d),g),d=g}if(c.max==-1)l(o(c.expr,d),d);else for(let p=c.min;p<c.max;p++){let g=t();s(d,g),l(o(c.expr,d),g),d=g}return[s(d)]}else{if(c.type=="name")return[s(f,void 0,c.value)];throw new Error("Unknown expr type")}}}}function Qx(n,e){return e-n}function ob(n,e){let t=[];return s(e),t.sort(Qx);function s(l){let o=n[l];if(o.length==1&&!o[0].term)return s(o[0].to);t.push(l);for(let c=0;c<o.length;c++){let{term:f,to:d}=o[c];!f&&t.indexOf(d)==-1&&s(d)}}}function jE(n){let e=Object.create(null);return t(ob(n,0));function t(s){let l=[];s.forEach(c=>{n[c].forEach(({term:f,to:d})=>{if(!f)return;let p;for(let g=0;g<l.length;g++)l[g][0]==f&&(p=l[g][1]);ob(n,d).forEach(g=>{p||l.push([f,p=[]]),p.indexOf(g)==-1&&p.push(g)})})});let o=e[s.join(",")]=new Zs(s.indexOf(n.length-1)>-1);for(let c=0;c<l.length;c++){let f=l[c][1].sort(Qx);o.next.push({type:l[c][0],next:e[f.join(",")]||t(f)})}return o}}function RE(n,e){for(let t=0,s=[n];t<s.length;t++){let l=s[t],o=!l.validEnd,c=[];for(let f=0;f<l.next.length;f++){let{type:d,next:p}=l.next[f];c.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),s.indexOf(p)==-1&&s.push(p)}o&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Zx(n){let e=Object.create(null);for(let t in n){let s=n[t];if(!s.hasDefault)return null;e[t]=s.default}return e}function Wx(n,e){let t=Object.create(null);for(let s in n){let l=e&&e[s];if(l===void 0){let o=n[s];if(o.hasDefault)l=o.default;else throw new RangeError("No value supplied for attribute "+s)}t[s]=l}return t}function e1(n,e,t,s){for(let l in e)if(!(l in n))throw new RangeError(`Unsupported attribute ${l} for ${t} of type ${l}`);for(let l in n){let o=n[l];o.validate&&o.validate(e[l])}}function t1(n,e){let t=Object.create(null);if(e)for(let s in e)t[s]=new LE(n,s,e[s]);return t}let ab=class n1{constructor(e,t,s){this.name=e,this.schema=t,this.spec=s,this.markSet=null,this.groups=s.group?s.group.split(" "):[],this.attrs=t1(e,s.attrs),this.defaultAttrs=Zx(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(s.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Zs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Wx(this.attrs,e)}create(e=null,t,s){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Gn(this,this.computeAttrs(e),X.from(t),rt.setFrom(s))}createChecked(e=null,t,s){return t=X.from(t),this.checkContent(t),new Gn(this,this.computeAttrs(e),t,rt.setFrom(s))}createAndFill(e=null,t,s){if(e=this.computeAttrs(e),t=X.from(t),t.size){let c=this.contentMatch.fillBefore(t);if(!c)return null;t=c.append(t)}let l=this.contentMatch.matchFragment(t),o=l&&l.fillBefore(X.empty,!0);return o?new Gn(this,e,t.append(o),rt.setFrom(s)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let s=0;s<e.childCount;s++)if(!this.allowsMarks(e.child(s).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){e1(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let s=0;s<e.length;s++)this.allowsMarkType(e[s].type)?t&&t.push(e[s]):t||(t=e.slice(0,s));return t?t.length?t:rt.none:e}static compile(e,t){let s=Object.create(null);e.forEach((o,c)=>s[o]=new n1(o,t,c));let l=t.spec.topNode||"doc";if(!s[l])throw new RangeError("Schema is missing its top node type ('"+l+"')");if(!s.text)throw new RangeError("Every schema needs a 'text' type");for(let o in s.text.attrs)throw new RangeError("The text node type should not have attributes");return s}};function zE(n,e,t){let s=t.split("|");return l=>{let o=l===null?"null":typeof l;if(s.indexOf(o)<0)throw new RangeError(`Expected value of type ${s} for attribute ${e} on type ${n}, got ${o}`)}}class LE{constructor(e,t,s){this.hasDefault=Object.prototype.hasOwnProperty.call(s,"default"),this.default=s.default,this.validate=typeof s.validate=="string"?zE(e,t,s.validate):s.validate}get isRequired(){return!this.hasDefault}}class uu{constructor(e,t,s,l){this.name=e,this.rank=t,this.schema=s,this.spec=l,this.attrs=t1(e,l.attrs),this.excluded=null;let o=Zx(this.attrs);this.instance=o?new rt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new rt(this,Wx(this.attrs,e))}static compile(e,t){let s=Object.create(null),l=0;return e.forEach((o,c)=>s[o]=new uu(o,l++,t,c)),s}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){e1(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class r1{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let l in e)t[l]=e[l];t.nodes=qt.from(e.nodes),t.marks=qt.from(e.marks||{}),this.nodes=ab.compile(this.spec.nodes,this),this.marks=uu.compile(this.spec.marks,this);let s=Object.create(null);for(let l in this.nodes){if(l in this.marks)throw new RangeError(l+" can not be both a node and a mark");let o=this.nodes[l],c=o.spec.content||"",f=o.spec.marks;if(o.contentMatch=s[c]||(s[c]=Zs.parse(c,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=f=="_"?null:f?cb(this,f.split(" ")):f==""||!o.inlineContent?[]:null}for(let l in this.marks){let o=this.marks[l],c=o.spec.excludes;o.excluded=c==null?[o]:c==""?[]:cb(this,c.split(" "))}this.nodeFromJSON=l=>Gn.fromJSON(this,l),this.markFromJSON=l=>rt.fromJSON(this,l),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,s,l){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof ab){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,s,l)}text(e,t){let s=this.nodes.text;return new Ec(s,s.defaultAttrs,e,rt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function cb(n,e){let t=[];for(let s=0;s<e.length;s++){let l=e[s],o=n.marks[l],c=o;if(o)t.push(o);else for(let f in n.marks){let d=n.marks[f];(l=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(l)>-1)&&t.push(c=d)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[s]+"'")}return t}function _E(n){return n.tag!=null}function BE(n){return n.style!=null}class ds{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let s=this.matchedStyles=[];t.forEach(l=>{if(_E(l))this.tags.push(l);else if(BE(l)){let o=/[^=]*/.exec(l.style)[0];s.indexOf(o)<0&&s.push(o),this.styles.push(l)}}),this.normalizeLists=!this.tags.some(l=>{if(!/^(ul|ol)\b/.test(l.tag)||!l.node)return!1;let o=e.nodes[l.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let s=new fb(this,t,!1);return s.addAll(e,rt.none,t.from,t.to),s.finish()}parseSlice(e,t={}){let s=new fb(this,t,!0);return s.addAll(e,rt.none,t.from,t.to),ie.maxOpen(s.finish())}matchTag(e,t,s){for(let l=s?this.tags.indexOf(s)+1:0;l<this.tags.length;l++){let o=this.tags[l];if(IE(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let c=o.getAttrs(e);if(c===!1)continue;o.attrs=c||void 0}return o}}}matchStyle(e,t,s,l){for(let o=l?this.styles.indexOf(l)+1:0;o<this.styles.length;o++){let c=this.styles[o],f=c.style;if(!(f.indexOf(e)!=0||c.context&&!s.matchesContext(c.context)||f.length>e.length&&(f.charCodeAt(e.length)!=61||f.slice(e.length+1)!=t))){if(c.getAttrs){let d=c.getAttrs(t);if(d===!1)continue;c.attrs=d||void 0}return c}}}static schemaRules(e){let t=[];function s(l){let o=l.priority==null?50:l.priority,c=0;for(;c<t.length;c++){let f=t[c];if((f.priority==null?50:f.priority)<o)break}t.splice(c,0,l)}for(let l in e.marks){let o=e.marks[l].spec.parseDOM;o&&o.forEach(c=>{s(c=db(c)),c.mark||c.ignore||c.clearMark||(c.mark=l)})}for(let l in e.nodes){let o=e.nodes[l].spec.parseDOM;o&&o.forEach(c=>{s(c=db(c)),c.node||c.ignore||c.mark||(c.node=l)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ds(e,ds.schemaRules(e)))}}const s1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},HE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},i1={ol:!0,ul:!0},To=1,Dh=2,ho=4;function ub(n,e,t){return e!=null?(e?To:0)|(e==="full"?Dh:0):n&&n.whitespace=="pre"?To|Dh:t&~ho}class nc{constructor(e,t,s,l,o,c){this.type=e,this.attrs=t,this.marks=s,this.solid=l,this.options=c,this.content=[],this.activeMarks=rt.none,this.match=o||(c&ho?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(X.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let s=this.type.contentMatch,l;return(l=s.findWrapping(e.type))?(this.match=s,l):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&To)){let s=this.content[this.content.length-1],l;if(s&&s.isText&&(l=/[ \t\r\n\u000c]+$/.exec(s.text))){let o=s;s.text.length==l[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-l[0].length))}}let t=X.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(X.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!s1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class fb{constructor(e,t,s){this.parser=e,this.options=t,this.isOpen=s,this.open=0,this.localPreserveWS=!1;let l=t.topNode,o,c=ub(null,t.preserveWhitespace,0)|(s?ho:0);l?o=new nc(l.type,l.attrs,rt.none,!0,t.topMatch||l.type.contentMatch,c):s?o=new nc(null,null,rt.none,!0,null,c):o=new nc(e.schema.topNodeType,null,rt.none,!0,null,c),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let s=e.nodeValue,l=this.top,o=l.options&Dh?"full":this.localPreserveWS||(l.options&To)>0,{schema:c}=this.parser;if(o==="full"||l.inlineContext(e)||/[^ \t\r\n\u000c]/.test(s)){if(o)if(o==="full")s=s.replace(/\r\n?/g,`
`);else if(c.linebreakReplacement&&/[\r\n]/.test(s)&&this.top.findWrapping(c.linebreakReplacement.create())){let f=s.split(/\r?\n|\r/);for(let d=0;d<f.length;d++)d&&this.insertNode(c.linebreakReplacement.create(),t,!0),f[d]&&this.insertNode(c.text(f[d]),t,!/\S/.test(f[d]));s=""}else s=s.replace(/\r?\n|\r/g," ");else if(s=s.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(s)&&this.open==this.nodes.length-1){let f=l.content[l.content.length-1],d=e.previousSibling;(!f||d&&d.nodeName=="BR"||f.isText&&/[ \t\r\n\u000c]$/.test(f.text))&&(s=s.slice(1))}s&&this.insertNode(c.text(s),t,!/\S/.test(s)),this.findInText(e)}else this.findInside(e)}addElement(e,t,s){let l=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),f;i1.hasOwnProperty(c)&&this.parser.normalizeLists&&UE(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(f=this.parser.matchTag(e,this,s));e:if(d?d.ignore:HE.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let p,g=this.needsBlock;if(s1.hasOwnProperty(c))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),p=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=d&&d.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),p&&this.sync(o),this.needsBlock=g}else{let p=this.readStyles(e,t);p&&this.addElementByRule(e,d,p,d.consuming===!1?f:void 0)}this.localPreserveWS=l}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let s=e.style;if(s&&s.length)for(let l=0;l<this.parser.matchedStyles.length;l++){let o=this.parser.matchedStyles[l],c=s.getPropertyValue(o);if(c)for(let f=void 0;;){let d=this.parser.matchStyle(o,c,this,f);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(p=>!d.clearMark(p)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)f=d;else break}}return t}addElementByRule(e,t,s,l){let o,c;if(t.node)if(c=this.parser.schema.nodes[t.node],c.isLeaf)this.insertNode(c.create(t.attrs),s,e.nodeName=="BR")||this.leafFallback(e,s);else{let d=this.enter(c,t.attrs||null,s,t.preserveWhitespace);d&&(o=!0,s=d)}else{let d=this.parser.schema.marks[t.mark];s=s.concat(d.create(t.attrs))}let f=this.top;if(c&&c.isLeaf)this.findInside(e);else if(l)this.addElement(e,s,l);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,s,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,s),this.findAround(e,d,!1)}o&&this.sync(f)&&this.open--}addAll(e,t,s,l){let o=s||0;for(let c=s?e.childNodes[s]:e.firstChild,f=l==null?null:e.childNodes[l];c!=f;c=c.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(c,t);this.findAtPoint(e,o)}findPlace(e,t,s){let l,o;for(let c=this.open,f=0;c>=0;c--){let d=this.nodes[c],p=d.findWrapping(e);if(p&&(!l||l.length>p.length+f)&&(l=p,o=d,!p.length))break;if(d.solid){if(s)break;f+=2}}if(!l)return null;this.sync(o);for(let c=0;c<l.length;c++)t=this.enterInner(l[c],null,t,!1);return t}insertNode(e,t,s){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let l=this.findPlace(e,t,s);if(l){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let c=rt.none;for(let f of l.concat(e.marks))(o.type?o.type.allowsMarkType(f.type):hb(f.type,e.type))&&(c=f.addToSet(c));return o.content.push(e.mark(c)),!0}return!1}enter(e,t,s,l){let o=this.findPlace(e.create(t),s,!1);return o&&(o=this.enterInner(e,t,s,!0,l)),o}enterInner(e,t,s,l=!1,o){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let f=ub(e,o,c.options);c.options&ho&&c.content.length==0&&(f|=ho);let d=rt.none;return s=s.filter(p=>(c.type?c.type.allowsMarkType(p.type):hb(p.type,e))?(d=p.addToSet(d),!1):!0),this.nodes.push(new nc(e,t,d,l,null,f)),this.open++,s}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=To)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let s=this.nodes[t].content;for(let l=s.length-1;l>=0;l--)e+=s[l].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==e&&this.find[s].offset==t&&(this.find[s].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,s){if(e!=t&&this.find)for(let l=0;l<this.find.length;l++)this.find[l].pos==null&&e.nodeType==1&&e.contains(this.find[l].node)&&t.compareDocumentPosition(this.find[l].node)&(s?2:4)&&(this.find[l].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),s=this.options.context,l=!this.isOpen&&(!s||s.parent.type==this.nodes[0].type),o=-(s?s.depth+1:0)+(l?0:1),c=(f,d)=>{for(;f>=0;f--){let p=t[f];if(p==""){if(f==t.length-1||f==0)continue;for(;d>=o;d--)if(c(f-1,d))return!0;return!1}else{let g=d>0||d==0&&l?this.nodes[d].type:s&&d>=o?s.node(d-o).type:null;if(!g||g.name!=p&&!g.isInGroup(p))return!1;d--}}return!0};return c(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(s&&s.isTextblock&&s.defaultAttrs)return s}for(let t in this.parser.schema.nodes){let s=this.parser.schema.nodes[t];if(s.isTextblock&&s.defaultAttrs)return s}}}function UE(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let s=e.nodeType==1?e.nodeName.toLowerCase():null;s&&i1.hasOwnProperty(s)&&t?(t.appendChild(e),e=t):s=="li"?t=e:s&&(t=null)}}function IE(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function db(n){let e={};for(let t in n)e[t]=n[t];return e}function hb(n,e){let t=e.schema.nodes;for(let s in t){let l=t[s];if(!l.allowsMarkType(n))continue;let o=[],c=f=>{o.push(f);for(let d=0;d<f.edgeCount;d++){let{type:p,next:g}=f.edge(d);if(p==e||o.indexOf(g)<0&&c(g))return!0}};if(c(l.contentMatch))return!0}}class ri{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},s){s||(s=Zd(t).createDocumentFragment());let l=s,o=[];return e.forEach(c=>{if(o.length||c.marks.length){let f=0,d=0;for(;f<o.length&&d<c.marks.length;){let p=c.marks[d];if(!this.marks[p.type.name]){d++;continue}if(!p.eq(o[f][0])||p.type.spec.spanning===!1)break;f++,d++}for(;f<o.length;)l=o.pop()[1];for(;d<c.marks.length;){let p=c.marks[d++],g=this.serializeMark(p,c.isInline,t);g&&(o.push([p,l]),l.appendChild(g.dom),l=g.contentDOM||g.dom)}}l.appendChild(this.serializeNodeInner(c,t))}),s}serializeNodeInner(e,t){let{dom:s,contentDOM:l}=pc(Zd(t),this.nodes[e.type.name](e),null,e.attrs);if(l){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,l)}return s}serializeNode(e,t={}){let s=this.serializeNodeInner(e,t);for(let l=e.marks.length-1;l>=0;l--){let o=this.serializeMark(e.marks[l],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(s),s=o.dom)}return s}serializeMark(e,t,s={}){let l=this.marks[e.type.name];return l&&pc(Zd(s),l(e,t),null,e.attrs)}static renderSpec(e,t,s=null,l){return pc(e,t,s,l)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ri(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=pb(e.nodes);return t.text||(t.text=s=>s.text),t}static marksFromSchema(e){return pb(e.marks)}}function pb(n){let e={};for(let t in n){let s=n[t].spec.toDOM;s&&(e[t]=s)}return e}function Zd(n){return n.document||window.document}const mb=new WeakMap;function VE(n){let e=mb.get(n);return e===void 0&&mb.set(n,e=qE(n)),e}function qE(n){let e=null;function t(s){if(s&&typeof s=="object")if(Array.isArray(s))if(typeof s[0]=="string")e||(e=[]),e.push(s);else for(let l=0;l<s.length;l++)t(s[l]);else for(let l in s)t(s[l])}return t(n),e}function pc(n,e,t,s){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let l=e[0],o;if(typeof l!="string")throw new RangeError("Invalid array passed to renderSpec");if(s&&(o=VE(s))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=l.indexOf(" ");c>0&&(t=l.slice(0,c),l=l.slice(c+1));let f,d=t?n.createElementNS(t,l):n.createElement(l),p=e[1],g=1;if(p&&typeof p=="object"&&p.nodeType==null&&!Array.isArray(p)){g=2;for(let y in p)if(p[y]!=null){let b=y.indexOf(" ");b>0?d.setAttributeNS(y.slice(0,b),y.slice(b+1),p[y]):y=="style"&&d.style?d.style.cssText=p[y]:d.setAttribute(y,p[y])}}for(let y=g;y<e.length;y++){let b=e[y];if(b===0){if(y<e.length-1||y>g)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:v,contentDOM:k}=pc(n,b,t,s);if(d.appendChild(v),k){if(f)throw new RangeError("Multiple content holes");f=k}}}return{dom:d,contentDOM:f}}const l1=65535,o1=Math.pow(2,16);function $E(n,e){return n+e*o1}function gb(n){return n&l1}function GE(n){return(n-(n&l1))/o1}const a1=1,c1=2,mc=4,u1=8;class jh{constructor(e,t,s){this.pos=e,this.delInfo=t,this.recover=s}get deleted(){return(this.delInfo&u1)>0}get deletedBefore(){return(this.delInfo&(a1|mc))>0}get deletedAfter(){return(this.delInfo&(c1|mc))>0}get deletedAcross(){return(this.delInfo&mc)>0}}class vn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&vn.empty)return vn.empty}recover(e){let t=0,s=gb(e);if(!this.inverted)for(let l=0;l<s;l++)t+=this.ranges[l*3+2]-this.ranges[l*3+1];return this.ranges[s*3]+t+GE(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,s){let l=0,o=this.inverted?2:1,c=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?l:0);if(d>e)break;let p=this.ranges[f+o],g=this.ranges[f+c],y=d+p;if(e<=y){let b=p?e==d?-1:e==y?1:t:t,v=d+l+(b<0?0:g);if(s)return v;let k=e==(t<0?d:y)?null:$E(f/3,e-d),E=e==d?c1:e==y?a1:mc;return(t<0?e!=d:e!=y)&&(E|=u1),new jh(v,E,k)}l+=g-p}return s?e+l:new jh(e+l,0,null)}touches(e,t){let s=0,l=gb(t),o=this.inverted?2:1,c=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?s:0);if(d>e)break;let p=this.ranges[f+o],g=d+p;if(e<=g&&f==l*3)return!0;s+=this.ranges[f+c]-p}return!1}forEach(e){let t=this.inverted?2:1,s=this.inverted?1:2;for(let l=0,o=0;l<this.ranges.length;l+=3){let c=this.ranges[l],f=c-(this.inverted?o:0),d=c+(this.inverted?0:o),p=this.ranges[l+t],g=this.ranges[l+s];e(f,f+p,d,d+g),o+=g-p}}invert(){return new vn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?vn.empty:new vn(e<0?[0,-e,0]:[0,0,e])}}vn.empty=new vn([]);class Eo{constructor(e,t,s=0,l=e?e.length:0){this.mirror=t,this.from=s,this.to=l,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Eo(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,s=this._maps.length;t<e._maps.length;t++){let l=e.getMirror(t);this.appendMap(e._maps[t],l!=null&&l<t?s+l:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,s=this._maps.length+e._maps.length;t>=0;t--){let l=e.getMirror(t);this.appendMap(e._maps[t].invert(),l!=null&&l>t?s-l-1:void 0)}}invert(){let e=new Eo;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let s=this.from;s<this.to;s++)e=this._maps[s].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,s){let l=0;for(let o=this.from;o<this.to;o++){let c=this._maps[o],f=c.mapResult(e,t);if(f.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,e=this._maps[d].recover(f.recover);continue}}l|=f.delInfo,e=f.pos}return s?e:new jh(e,l,null)}}const Wd=Object.create(null);class Ft{getMap(){return vn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let s=Wd[t.stepType];if(!s)throw new RangeError(`No step type ${t.stepType} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in Wd)throw new RangeError("Duplicate use of step JSON ID "+e);return Wd[e]=t,t.prototype.jsonID=e,t}}class Mt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Mt(e,null)}static fail(e){return new Mt(null,e)}static fromReplace(e,t,s,l){try{return Mt.ok(e.replace(t,s,l))}catch(o){if(o instanceof Sc)return Mt.fail(o.message);throw o}}}function ap(n,e,t){let s=[];for(let l=0;l<n.childCount;l++){let o=n.child(l);o.content.size&&(o=o.copy(ap(o.content,e,o))),o.isInline&&(o=e(o,t,l)),s.push(o)}return X.fromArray(s)}class cs extends Ft{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=e.resolve(this.from),l=s.node(s.sharedDepth(this.to)),o=new ie(ap(t.content,(c,f)=>!c.isAtom||!f.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),l),t.openStart,t.openEnd);return Mt.fromReplace(e,this.from,this.to,o)}invert(){return new $n(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new cs(t.pos,s.pos,this.mark)}merge(e){return e instanceof cs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new cs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new cs(t.from,t.to,e.markFromJSON(t.mark))}}Ft.jsonID("addMark",cs);class $n extends Ft{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=new ie(ap(t.content,l=>l.mark(this.mark.removeFromSet(l.marks)),e),t.openStart,t.openEnd);return Mt.fromReplace(e,this.from,this.to,s)}invert(){return new cs(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new $n(t.pos,s.pos,this.mark)}merge(e){return e instanceof $n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new $n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new $n(t.from,t.to,e.markFromJSON(t.mark))}}Ft.jsonID("removeMark",$n);class us extends Ft{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Mt.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Mt.fromReplace(e,this.pos,this.pos+1,new ie(X.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let s=this.mark.addToSet(t.marks);if(s.length==t.marks.length){for(let l=0;l<t.marks.length;l++)if(!t.marks[l].isInSet(s))return new us(this.pos,t.marks[l]);return new us(this.pos,this.mark)}}return new Ws(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new us(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new us(t.pos,e.markFromJSON(t.mark))}}Ft.jsonID("addNodeMark",us);class Ws extends Ft{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Mt.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Mt.fromReplace(e,this.pos,this.pos+1,new ie(X.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new us(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ws(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ws(t.pos,e.markFromJSON(t.mark))}}Ft.jsonID("removeNodeMark",Ws);class zt extends Ft{constructor(e,t,s,l=!1){super(),this.from=e,this.to=t,this.slice=s,this.structure=l}apply(e){return this.structure&&Rh(e,this.from,this.to)?Mt.fail("Structure replace would overwrite content"):Mt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new vn([this.from,this.to-this.from,this.slice.size])}invert(e){return new zt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deletedAcross&&s.deletedAcross?null:new zt(t.pos,Math.max(t.pos,s.pos),this.slice,this.structure)}merge(e){if(!(e instanceof zt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?ie.empty:new ie(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new zt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?ie.empty:new ie(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new zt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new zt(t.from,t.to,ie.fromJSON(e,t.slice),!!t.structure)}}Ft.jsonID("replace",zt);class Lt extends Ft{constructor(e,t,s,l,o,c,f=!1){super(),this.from=e,this.to=t,this.gapFrom=s,this.gapTo=l,this.slice=o,this.insert=c,this.structure=f}apply(e){if(this.structure&&(Rh(e,this.from,this.gapFrom)||Rh(e,this.gapTo,this.to)))return Mt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Mt.fail("Gap is not a flat range");let s=this.slice.insertAt(this.insert,t.content);return s?Mt.fromReplace(e,this.from,this.to,s):Mt.fail("Content does not fit in gap")}getMap(){return new vn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Lt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1),l=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?s.pos:e.map(this.gapTo,1);return t.deletedAcross&&s.deletedAcross||l<t.pos||o>s.pos?null:new Lt(t.pos,s.pos,l,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Lt(t.from,t.to,t.gapFrom,t.gapTo,ie.fromJSON(e,t.slice),t.insert,!!t.structure)}}Ft.jsonID("replaceAround",Lt);function Rh(n,e,t){let s=n.resolve(e),l=t-e,o=s.depth;for(;l>0&&o>0&&s.indexAfter(o)==s.node(o).childCount;)o--,l--;if(l>0){let c=s.node(o).maybeChild(s.indexAfter(o));for(;l>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,l--}}return!1}function YE(n,e,t,s){let l=[],o=[],c,f;n.doc.nodesBetween(e,t,(d,p,g)=>{if(!d.isInline)return;let y=d.marks;if(!s.isInSet(y)&&g.type.allowsMarkType(s.type)){let b=Math.max(p,e),v=Math.min(p+d.nodeSize,t),k=s.addToSet(y);for(let E=0;E<y.length;E++)y[E].isInSet(k)||(c&&c.to==b&&c.mark.eq(y[E])?c.to=v:l.push(c=new $n(b,v,y[E])));f&&f.to==b?f.to=v:o.push(f=new cs(b,v,s))}}),l.forEach(d=>n.step(d)),o.forEach(d=>n.step(d))}function KE(n,e,t,s){let l=[],o=0;n.doc.nodesBetween(e,t,(c,f)=>{if(!c.isInline)return;o++;let d=null;if(s instanceof uu){let p=c.marks,g;for(;g=s.isInSet(p);)(d||(d=[])).push(g),p=g.removeFromSet(p)}else s?s.isInSet(c.marks)&&(d=[s]):d=c.marks;if(d&&d.length){let p=Math.min(f+c.nodeSize,t);for(let g=0;g<d.length;g++){let y=d[g],b;for(let v=0;v<l.length;v++){let k=l[v];k.step==o-1&&y.eq(l[v].style)&&(b=k)}b?(b.to=p,b.step=o):l.push({style:y,from:Math.max(f,e),to:p,step:o})}}}),l.forEach(c=>n.step(new $n(c.from,c.to,c.style)))}function cp(n,e,t,s=t.contentMatch,l=!0){let o=n.doc.nodeAt(e),c=[],f=e+1;for(let d=0;d<o.childCount;d++){let p=o.child(d),g=f+p.nodeSize,y=s.matchType(p.type);if(!y)c.push(new zt(f,g,ie.empty));else{s=y;for(let b=0;b<p.marks.length;b++)t.allowsMarkType(p.marks[b].type)||n.step(new $n(f,g,p.marks[b]));if(l&&p.isText&&t.whitespace!="pre"){let b,v=/\r?\n|\r/g,k;for(;b=v.exec(p.text);)k||(k=new ie(X.from(t.schema.text(" ",t.allowedMarks(p.marks))),0,0)),c.push(new zt(f+b.index,f+b.index+b[0].length,k))}}f=g}if(!s.validEnd){let d=s.fillBefore(X.empty,!0);n.replace(f,f,new ie(d,0,0))}for(let d=c.length-1;d>=0;d--)n.step(c[d])}function PE(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function ol(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let s=n.depth,l=0,o=0;;--s){let c=n.$from.node(s),f=n.$from.index(s)+l,d=n.$to.indexAfter(s)-o;if(s<n.depth&&c.canReplace(f,d,t))return s;if(s==0||c.type.spec.isolating||!PE(c,f,d))break;f&&(l=1),d<c.childCount&&(o=1)}return null}function JE(n,e,t){let{$from:s,$to:l,depth:o}=e,c=s.before(o+1),f=l.after(o+1),d=c,p=f,g=X.empty,y=0;for(let k=o,E=!1;k>t;k--)E||s.index(k)>0?(E=!0,g=X.from(s.node(k).copy(g)),y++):d--;let b=X.empty,v=0;for(let k=o,E=!1;k>t;k--)E||l.after(k+1)<l.end(k)?(E=!0,b=X.from(l.node(k).copy(b)),v++):p++;n.step(new Lt(d,p,c,f,new ie(g.append(b),y,v),g.size-y,!0))}function up(n,e,t=null,s=n){let l=FE(n,e),o=l&&XE(s,e);return o?l.map(yb).concat({type:e,attrs:t}).concat(o.map(yb)):null}function yb(n){return{type:n,attrs:null}}function FE(n,e){let{parent:t,startIndex:s,endIndex:l}=n,o=t.contentMatchAt(s).findWrapping(e);if(!o)return null;let c=o.length?o[0]:e;return t.canReplaceWith(s,l,c)?o:null}function XE(n,e){let{parent:t,startIndex:s,endIndex:l}=n,o=t.child(s),c=e.contentMatch.findWrapping(o.type);if(!c)return null;let d=(c.length?c[c.length-1]:e).contentMatch;for(let p=s;d&&p<l;p++)d=d.matchType(t.child(p).type);return!d||!d.validEnd?null:c}function QE(n,e,t){let s=X.empty;for(let c=t.length-1;c>=0;c--){if(s.size){let f=t[c].type.contentMatch.matchFragment(s);if(!f||!f.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}s=X.from(t[c].type.create(t[c].attrs,s))}let l=e.start,o=e.end;n.step(new Lt(l,o,l,o,new ie(s,0,0),t.length,!0))}function ZE(n,e,t,s,l){if(!s.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(c,f)=>{let d=typeof l=="function"?l(c):l;if(c.isTextblock&&!c.hasMarkup(s,d)&&WE(n.doc,n.mapping.slice(o).map(f),s)){let p=null;if(s.schema.linebreakReplacement){let v=s.whitespace=="pre",k=!!s.contentMatch.matchType(s.schema.linebreakReplacement);v&&!k?p=!1:!v&&k&&(p=!0)}p===!1&&d1(n,c,f,o),cp(n,n.mapping.slice(o).map(f,1),s,void 0,p===null);let g=n.mapping.slice(o),y=g.map(f,1),b=g.map(f+c.nodeSize,1);return n.step(new Lt(y,b,y+1,b-1,new ie(X.from(s.create(d,null,c.marks)),0,0),1,!0)),p===!0&&f1(n,c,f,o),!1}})}function f1(n,e,t,s){e.forEach((l,o)=>{if(l.isText){let c,f=/\r?\n|\r/g;for(;c=f.exec(l.text);){let d=n.mapping.slice(s).map(t+1+o+c.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function d1(n,e,t,s){e.forEach((l,o)=>{if(l.type==l.type.schema.linebreakReplacement){let c=n.mapping.slice(s).map(t+1+o);n.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function WE(n,e,t){let s=n.resolve(e),l=s.index();return s.parent.canReplaceWith(l,l+1,t)}function eC(n,e,t,s,l){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let c=t.create(s,null,l||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,c);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Lt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new ie(X.from(c),0,0),1,!0))}function Cr(n,e,t=1,s){let l=n.resolve(e),o=l.depth-t,c=s&&s[s.length-1]||l.parent;if(o<0||l.parent.type.spec.isolating||!l.parent.canReplace(l.index(),l.parent.childCount)||!c.type.validContent(l.parent.content.cutByIndex(l.index(),l.parent.childCount)))return!1;for(let p=l.depth-1,g=t-2;p>o;p--,g--){let y=l.node(p),b=l.index(p);if(y.type.spec.isolating)return!1;let v=y.content.cutByIndex(b,y.childCount),k=s&&s[g+1];k&&(v=v.replaceChild(0,k.type.create(k.attrs)));let E=s&&s[g]||y;if(!y.canReplace(b+1,y.childCount)||!E.type.validContent(v))return!1}let f=l.indexAfter(o),d=s&&s[0];return l.node(o).canReplaceWith(f,f,d?d.type:l.node(o+1).type)}function tC(n,e,t=1,s){let l=n.doc.resolve(e),o=X.empty,c=X.empty;for(let f=l.depth,d=l.depth-t,p=t-1;f>d;f--,p--){o=X.from(l.node(f).copy(o));let g=s&&s[p];c=X.from(g?g.type.create(g.attrs,c):l.node(f).copy(c))}n.step(new zt(e,e,new ie(o.append(c),t,t),!0))}function bs(n,e){let t=n.resolve(e),s=t.index();return h1(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(s,s+1)}function nC(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:s}=n.type.schema;for(let l=0;l<e.childCount;l++){let o=e.child(l),c=o.type==s?n.type.schema.nodes.text:o.type;if(t=t.matchType(c),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function h1(n,e){return!!(n&&e&&!n.isLeaf&&nC(n,e))}function fu(n,e,t=-1){let s=n.resolve(e);for(let l=s.depth;;l--){let o,c,f=s.index(l);if(l==s.depth?(o=s.nodeBefore,c=s.nodeAfter):t>0?(o=s.node(l+1),f++,c=s.node(l).maybeChild(f)):(o=s.node(l).maybeChild(f-1),c=s.node(l+1)),o&&!o.isTextblock&&h1(o,c)&&s.node(l).canReplace(f,f+1))return e;if(l==0)break;e=t<0?s.before(l):s.after(l)}}function rC(n,e,t){let s=null,{linebreakReplacement:l}=n.doc.type.schema,o=n.doc.resolve(e-t),c=o.node().type;if(l&&c.inlineContent){let g=c.whitespace=="pre",y=!!c.contentMatch.matchType(l);g&&!y?s=!1:!g&&y&&(s=!0)}let f=n.steps.length;if(s===!1){let g=n.doc.resolve(e+t);d1(n,g.node(),g.before(),f)}c.inlineContent&&cp(n,e+t-1,c,o.node().contentMatchAt(o.index()),s==null);let d=n.mapping.slice(f),p=d.map(e-t);if(n.step(new zt(p,d.map(e+t,-1),ie.empty,!0)),s===!0){let g=n.doc.resolve(p);f1(n,g.node(),g.before(),n.steps.length)}return n}function sC(n,e,t){let s=n.resolve(e);if(s.parent.canReplaceWith(s.index(),s.index(),t))return e;if(s.parentOffset==0)for(let l=s.depth-1;l>=0;l--){let o=s.index(l);if(s.node(l).canReplaceWith(o,o,t))return s.before(l+1);if(o>0)return null}if(s.parentOffset==s.parent.content.size)for(let l=s.depth-1;l>=0;l--){let o=s.indexAfter(l);if(s.node(l).canReplaceWith(o,o,t))return s.after(l+1);if(o<s.node(l).childCount)return null}return null}function p1(n,e,t){let s=n.resolve(e);if(!t.content.size)return e;let l=t.content;for(let o=0;o<t.openStart;o++)l=l.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let c=s.depth;c>=0;c--){let f=c==s.depth?0:s.pos<=(s.start(c+1)+s.end(c+1))/2?-1:1,d=s.index(c)+(f>0?1:0),p=s.node(c),g=!1;if(o==1)g=p.canReplace(d,d,l);else{let y=p.contentMatchAt(d).findWrapping(l.firstChild.type);g=y&&p.canReplaceWith(d,d,y[0])}if(g)return f==0?s.pos:f<0?s.before(c+1):s.after(c+1)}return null}function du(n,e,t=e,s=ie.empty){if(e==t&&!s.size)return null;let l=n.resolve(e),o=n.resolve(t);return m1(l,o,s)?new zt(e,t,s):new iC(l,o,s).fit()}function m1(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class iC{constructor(e,t,s){this.$from=e,this.$to=t,this.unplaced=s,this.frontier=[],this.placed=X.empty;for(let l=0;l<=e.depth;l++){let o=e.node(l);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(l))})}for(let l=e.depth;l>0;l--)this.placed=X.from(e.node(l).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let p=this.findFittable();p?this.placeNodes(p):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,s=this.$from,l=this.close(e<0?this.$to:s.doc.resolve(e));if(!l)return null;let o=this.placed,c=s.depth,f=l.depth;for(;c&&f&&o.childCount==1;)o=o.firstChild.content,c--,f--;let d=new ie(o,c,f);return e>-1?new Lt(s.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||s.pos!=this.$to.pos?new zt(s.pos,l.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,s=0,l=this.unplaced.openEnd;s<e;s++){let o=t.firstChild;if(t.childCount>1&&(l=0),o.type.spec.isolating&&l<=s){e=s;break}t=o.content}for(let t=1;t<=2;t++)for(let s=t==1?e:this.unplaced.openStart;s>=0;s--){let l,o=null;s?(o=eh(this.unplaced.content,s-1).firstChild,l=o.content):l=this.unplaced.content;let c=l.firstChild;for(let f=this.depth;f>=0;f--){let{type:d,match:p}=this.frontier[f],g,y=null;if(t==1&&(c?p.matchType(c.type)||(y=p.fillBefore(X.from(c),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:s,frontierDepth:f,parent:o,inject:y};if(t==2&&c&&(g=p.findWrapping(c.type)))return{sliceDepth:s,frontierDepth:f,parent:o,wrap:g};if(o&&p.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:s}=this.unplaced,l=eh(e,t);return!l.childCount||l.firstChild.isLeaf?!1:(this.unplaced=new ie(e,t+1,Math.max(s,l.size+t>=e.size-s?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:s}=this.unplaced,l=eh(e,t);if(l.childCount<=1&&t>0){let o=e.size-t<=t+l.size;this.unplaced=new ie(lo(e,t-1,1),t-1,o?t-1:s)}else this.unplaced=new ie(lo(e,t,1),t,s)}placeNodes({sliceDepth:e,frontierDepth:t,parent:s,inject:l,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let E=0;E<o.length;E++)this.openFrontierNode(o[E]);let c=this.unplaced,f=s?s.content:c.content,d=c.openStart-e,p=0,g=[],{match:y,type:b}=this.frontier[t];if(l){for(let E=0;E<l.childCount;E++)g.push(l.child(E));y=y.matchFragment(l)}let v=f.size+e-(c.content.size-c.openEnd);for(;p<f.childCount;){let E=f.child(p),C=y.matchType(E.type);if(!C)break;p++,(p>1||d==0||E.content.size)&&(y=C,g.push(g1(E.mark(b.allowedMarks(E.marks)),p==1?d:0,p==f.childCount?v:-1)))}let k=p==f.childCount;k||(v=-1),this.placed=oo(this.placed,t,X.from(g)),this.frontier[t].match=y,k&&v<0&&s&&s.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,C=f;E<v;E++){let M=C.lastChild;this.frontier.push({type:M.type,match:M.contentMatchAt(M.childCount)}),C=M.content}this.unplaced=k?e==0?ie.empty:new ie(lo(c.content,e-1,1),e-1,v<0?c.openEnd:e-1):new ie(lo(c.content,e,p),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!th(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:s}=this.$to,l=this.$to.after(s);for(;s>1&&l==this.$to.end(--s);)++l;return l}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:s,type:l}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),c=th(e,t,l,s,o);if(c){for(let f=t-1;f>=0;f--){let{match:d,type:p}=this.frontier[f],g=th(e,f,p,d,!0);if(!g||g.childCount)continue e}return{depth:t,fit:c,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=oo(this.placed,t.depth,t.fit)),e=t.move;for(let s=t.depth+1;s<=e.depth;s++){let l=e.node(s),o=l.type.contentMatch.fillBefore(l.content,!0,e.index(s));this.openFrontierNode(l.type,l.attrs,o)}return e}openFrontierNode(e,t=null,s){let l=this.frontier[this.depth];l.match=l.match.matchType(e),this.placed=oo(this.placed,this.depth,X.from(e.create(t,s))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(X.empty,!0);t.childCount&&(this.placed=oo(this.placed,this.frontier.length,t))}}function lo(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(lo(n.firstChild.content,e-1,t)))}function oo(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(oo(n.lastChild.content,e-1,t)))}function eh(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function g1(n,e,t){if(e<=0)return n;let s=n.content;return e>1&&(s=s.replaceChild(0,g1(s.firstChild,e-1,s.childCount==1?t-1:0))),e>0&&(s=n.type.contentMatch.fillBefore(s).append(s),t<=0&&(s=s.append(n.type.contentMatch.matchFragment(s).fillBefore(X.empty,!0)))),n.copy(s)}function th(n,e,t,s,l){let o=n.node(e),c=l?n.indexAfter(e):n.index(e);if(c==o.childCount&&!t.compatibleContent(o.type))return null;let f=s.fillBefore(o.content,!0,c);return f&&!lC(t,o.content,c)?f:null}function lC(n,e,t){for(let s=t;s<e.childCount;s++)if(!n.allowsMarks(e.child(s).marks))return!0;return!1}function oC(n){return n.spec.defining||n.spec.definingForContent}function aC(n,e,t,s){if(!s.size)return n.deleteRange(e,t);let l=n.doc.resolve(e),o=n.doc.resolve(t);if(m1(l,o,s))return n.step(new zt(e,t,s));let c=b1(l,o);c[c.length-1]==0&&c.pop();let f=-(l.depth+1);c.unshift(f);for(let b=l.depth,v=l.pos-1;b>0;b--,v--){let k=l.node(b).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;c.indexOf(b)>-1?f=b:l.before(b)==v&&c.splice(1,0,-b)}let d=c.indexOf(f),p=[],g=s.openStart;for(let b=s.content,v=0;;v++){let k=b.firstChild;if(p.push(k),v==s.openStart)break;b=k.content}for(let b=g-1;b>=0;b--){let v=p[b],k=oC(v.type);if(k&&!v.sameMarkup(l.node(Math.abs(f)-1)))g=b;else if(k||!v.type.isTextblock)break}for(let b=s.openStart;b>=0;b--){let v=(b+g+1)%(s.openStart+1),k=p[v];if(k)for(let E=0;E<c.length;E++){let C=c[(E+d)%c.length],M=!0;C<0&&(M=!1,C=-C);let L=l.node(C-1),V=l.index(C-1);if(L.canReplaceWith(V,V,k.type,k.marks))return n.replace(l.before(C),M?o.after(C):t,new ie(y1(s.content,0,s.openStart,v),v,s.openEnd))}}let y=n.steps.length;for(let b=c.length-1;b>=0&&(n.replace(e,t,s),!(n.steps.length>y));b--){let v=c[b];v<0||(e=l.before(v),t=o.after(v))}}function y1(n,e,t,s,l){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(y1(o.content,e+1,t,s,o)))}if(e>s){let o=l.contentMatchAt(0),c=o.fillBefore(n).append(n);n=c.append(o.matchFragment(c).fillBefore(X.empty,!0))}return n}function cC(n,e,t,s){if(!s.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let l=sC(n.doc,e,s.type);l!=null&&(e=t=l)}n.replaceRange(e,t,new ie(X.from(s),0,0))}function uC(n,e,t){let s=n.doc.resolve(e),l=n.doc.resolve(t),o=b1(s,l);for(let c=0;c<o.length;c++){let f=o[c],d=c==o.length-1;if(d&&f==0||s.node(f).type.contentMatch.validEnd)return n.delete(s.start(f),l.end(f));if(f>0&&(d||s.node(f-1).canReplace(s.index(f-1),l.indexAfter(f-1))))return n.delete(s.before(f),l.after(f))}for(let c=1;c<=s.depth&&c<=l.depth;c++)if(e-s.start(c)==s.depth-c&&t>s.end(c)&&l.end(c)-t!=l.depth-c&&s.start(c-1)==l.start(c-1)&&s.node(c-1).canReplace(s.index(c-1),l.index(c-1)))return n.delete(s.before(c),t);n.delete(e,t)}function b1(n,e){let t=[],s=Math.min(n.depth,e.depth);for(let l=s;l>=0;l--){let o=n.start(l);if(o<n.pos-(n.depth-l)||e.end(l)>e.pos+(e.depth-l)||n.node(l).type.spec.isolating||e.node(l).type.spec.isolating)break;(o==e.start(l)||l==n.depth&&l==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&l&&e.start(l-1)==o-1)&&t.push(l)}return t}class Zi extends Ft{constructor(e,t,s){super(),this.pos=e,this.attr=t,this.value=s}apply(e){let t=e.nodeAt(this.pos);if(!t)return Mt.fail("No node at attribute step's position");let s=Object.create(null);for(let o in t.attrs)s[o]=t.attrs[o];s[this.attr]=this.value;let l=t.type.create(s,null,t.marks);return Mt.fromReplace(e,this.pos,this.pos+1,new ie(X.from(l),0,t.isLeaf?0:1))}getMap(){return vn.empty}invert(e){return new Zi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Zi(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Zi(t.pos,t.attr,t.value)}}Ft.jsonID("attr",Zi);class Co extends Ft{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let l in e.attrs)t[l]=e.attrs[l];t[this.attr]=this.value;let s=e.type.create(t,e.content,e.marks);return Mt.ok(s)}getMap(){return vn.empty}invert(e){return new Co(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Co(t.attr,t.value)}}Ft.jsonID("docAttr",Co);let el=class extends Error{};el=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};el.prototype=Object.create(Error.prototype);el.prototype.constructor=el;el.prototype.name="TransformError";class x1{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Eo}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new el(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,t=-1e9;for(let s=0;s<this.mapping.maps.length;s++){let l=this.mapping.maps[s];s&&(e=l.map(e,1),t=l.map(t,-1)),l.forEach((o,c,f,d)=>{e=Math.min(e,f),t=Math.max(t,d)})}return e==1e9?null:{from:e,to:t}}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,s=ie.empty){let l=du(this.doc,e,t,s);return l&&this.step(l),this}replaceWith(e,t,s){return this.replace(e,t,new ie(X.from(s),0,0))}delete(e,t){return this.replace(e,t,ie.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,s){return aC(this,e,t,s),this}replaceRangeWith(e,t,s){return cC(this,e,t,s),this}deleteRange(e,t){return uC(this,e,t),this}lift(e,t){return JE(this,e,t),this}join(e,t=1){return rC(this,e,t),this}wrap(e,t){return QE(this,e,t),this}setBlockType(e,t=e,s,l=null){return ZE(this,e,t,s,l),this}setNodeMarkup(e,t,s=null,l){return eC(this,e,t,s,l),this}setNodeAttribute(e,t,s){return this.step(new Zi(e,t,s)),this}setDocAttribute(e,t){return this.step(new Co(e,t)),this}addNodeMark(e,t){return this.step(new us(e,t)),this}removeNodeMark(e,t){let s=this.doc.nodeAt(e);if(!s)throw new RangeError("No node at position "+e);if(t instanceof rt)t.isInSet(s.marks)&&this.step(new Ws(e,t));else{let l=s.marks,o,c=[];for(;o=t.isInSet(l);)c.push(new Ws(e,o)),l=o.removeFromSet(l);for(let f=c.length-1;f>=0;f--)this.step(c[f])}return this}split(e,t=1,s){return tC(this,e,t,s),this}addMark(e,t,s){return YE(this,e,t,s),this}removeMark(e,t,s){return KE(this,e,t,s),this}clearIncompatible(e,t,s){return cp(this,e,t,s),this}}const nh=Object.create(null);class De{constructor(e,t,s){this.$anchor=e,this.$head=t,this.ranges=s||[new fC(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=ie.empty){let s=t.content.lastChild,l=null;for(let f=0;f<t.openEnd;f++)l=s,s=s.lastChild;let o=e.steps.length,c=this.ranges;for(let f=0;f<c.length;f++){let{$from:d,$to:p}=c[f],g=e.mapping.slice(o);e.replaceRange(g.map(d.pos),g.map(p.pos),f?ie.empty:t),f==0&&vb(e,o,(s?s.isInline:l&&l.isTextblock)?-1:1)}}replaceWith(e,t){let s=e.steps.length,l=this.ranges;for(let o=0;o<l.length;o++){let{$from:c,$to:f}=l[o],d=e.mapping.slice(s),p=d.map(c.pos),g=d.map(f.pos);o?e.deleteRange(p,g):(e.replaceRangeWith(p,g,t),vb(e,s,t.isInline?-1:1))}}static findFrom(e,t,s=!1){let l=e.parent.inlineContent?new ke(e):Ki(e.node(0),e.parent,e.pos,e.index(),t,s);if(l)return l;for(let o=e.depth-1;o>=0;o--){let c=t<0?Ki(e.node(0),e.node(o),e.before(o+1),e.index(o),t,s):Ki(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,s);if(c)return c}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Sn(e.node(0))}static atStart(e){return Ki(e,e,0,0,1)||new Sn(e)}static atEnd(e){return Ki(e,e,e.content.size,e.childCount,-1)||new Sn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let s=nh[t.type];if(!s)throw new RangeError(`No selection type ${t.type} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in nh)throw new RangeError("Duplicate use of selection JSON ID "+e);return nh[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ke.between(this.$anchor,this.$head).getBookmark()}}De.prototype.visible=!0;class fC{constructor(e,t){this.$from=e,this.$to=t}}let bb=!1;function xb(n){!bb&&!n.parent.inlineContent&&(bb=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class ke extends De{constructor(e,t=e){xb(e),xb(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let s=e.resolve(t.map(this.head));if(!s.parent.inlineContent)return De.near(s);let l=e.resolve(t.map(this.anchor));return new ke(l.parent.inlineContent?l:s,s)}replace(e,t=ie.empty){if(super.replace(e,t),t==ie.empty){let s=this.$from.marksAcross(this.$to);s&&e.ensureMarks(s)}}eq(e){return e instanceof ke&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new hu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ke(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,s=t){let l=e.resolve(t);return new this(l,s==t?l:e.resolve(s))}static between(e,t,s){let l=e.pos-t.pos;if((!s||l)&&(s=l>=0?1:-1),!t.parent.inlineContent){let o=De.findFrom(t,s,!0)||De.findFrom(t,-s,!0);if(o)t=o.$head;else return De.near(t,s)}return e.parent.inlineContent||(l==0?e=t:(e=(De.findFrom(e,-s,!0)||De.findFrom(e,s,!0)).$anchor,e.pos<t.pos!=l<0&&(e=t))),new ke(e,t)}}De.jsonID("text",ke);class hu{constructor(e,t){this.anchor=e,this.head=t}map(e){return new hu(e.map(this.anchor),e.map(this.head))}resolve(e){return ke.between(e.resolve(this.anchor),e.resolve(this.head))}}class xe extends De{constructor(e){let t=e.nodeAfter,s=e.node(0).resolve(e.pos+t.nodeSize);super(e,s),this.node=t}map(e,t){let{deleted:s,pos:l}=t.mapResult(this.anchor),o=e.resolve(l);return s?De.near(o):new xe(o)}content(){return new ie(X.from(this.node),0,0)}eq(e){return e instanceof xe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new fp(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new xe(e.resolve(t.anchor))}static create(e,t){return new xe(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}xe.prototype.visible=!1;De.jsonID("node",xe);class fp{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:s}=e.mapResult(this.anchor);return t?new hu(s,s):new fp(s)}resolve(e){let t=e.resolve(this.anchor),s=t.nodeAfter;return s&&xe.isSelectable(s)?new xe(t):De.near(t)}}class Sn extends De{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=ie.empty){if(t==ie.empty){e.delete(0,e.doc.content.size);let s=De.atStart(e.doc);s.eq(e.selection)||e.setSelection(s)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Sn(e)}map(e){return new Sn(e)}eq(e){return e instanceof Sn}getBookmark(){return dC}}De.jsonID("all",Sn);const dC={map(){return this},resolve(n){return new Sn(n)}};function Ki(n,e,t,s,l,o=!1){if(e.inlineContent)return ke.create(n,t);for(let c=s-(l>0?0:1);l>0?c<e.childCount:c>=0;c+=l){let f=e.child(c);if(f.isAtom){if(!o&&xe.isSelectable(f))return xe.create(n,t-(l<0?f.nodeSize:0))}else{let d=Ki(n,f,t+l,l<0?f.childCount:0,l,o);if(d)return d}t+=f.nodeSize*l}return null}function vb(n,e,t){let s=n.steps.length-1;if(s<e)return;let l=n.steps[s];if(!(l instanceof zt||l instanceof Lt))return;let o=n.mapping.maps[s],c;o.forEach((f,d,p,g)=>{c==null&&(c=g)}),n.setSelection(De.near(n.doc.resolve(c),t))}const Sb=1,rc=2,kb=4;class hC extends x1{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Sb)&~rc,this.storedMarks=null,this}get selectionSet(){return(this.updated&Sb)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=rc,this}ensureMarks(e){return rt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&rc)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~rc,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let s=this.selection;return t&&(e=e.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||rt.none))),s.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,s){let l=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(l.text(e),!0):this.deleteSelection();{if(s==null&&(s=t),!e)return this.deleteRange(t,s);let o=this.storedMarks;if(!o){let c=this.doc.resolve(t);o=s==t?c.marks():c.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(t,s,l.text(e,o)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(De.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=kb,this}get scrolledIntoView(){return(this.updated&kb)>0}}function Tb(n,e){return!e||!n?n:n.bind(e)}class ao{constructor(e,t,s){this.name=e,this.init=Tb(t.init,s),this.apply=Tb(t.apply,s)}}const pC=[new ao("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new ao("selection",{init(n,e){return n.selection||De.atStart(e.doc)},apply(n){return n.selection}}),new ao("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,s){return s.selection.$cursor?n.storedMarks:null}}),new ao("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class rh{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=pC.slice(),t&&t.forEach(s=>{if(this.pluginsByKey[s.key])throw new RangeError("Adding different instances of a keyed plugin ("+s.key+")");this.plugins.push(s),this.pluginsByKey[s.key]=s,s.spec.state&&this.fields.push(new ao(s.key,s.spec.state,s))})}}class Xi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let s=0;s<this.config.plugins.length;s++)if(s!=t){let l=this.config.plugins[s];if(l.spec.filterTransaction&&!l.spec.filterTransaction.call(l,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],s=this.applyInner(e),l=null;for(;;){let o=!1;for(let c=0;c<this.config.plugins.length;c++){let f=this.config.plugins[c];if(f.spec.appendTransaction){let d=l?l[c].n:0,p=l?l[c].state:this,g=d<t.length&&f.spec.appendTransaction.call(f,d?t.slice(d):t,p,s);if(g&&s.filterTransaction(g,c)){if(g.setMeta("appendedTransaction",e),!l){l=[];for(let y=0;y<this.config.plugins.length;y++)l.push(y<c?{state:s,n:t.length}:{state:this,n:0})}t.push(g),s=s.applyInner(g),o=!0}l&&(l[c]={state:s,n:t.length})}}if(!o)return{state:s,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Xi(this.config),s=this.config.fields;for(let l=0;l<s.length;l++){let o=s[l];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new hC(this)}static create(e){let t=new rh(e.doc?e.doc.type.schema:e.schema,e.plugins),s=new Xi(t);for(let l=0;l<t.fields.length;l++)s[t.fields[l].name]=t.fields[l].init(e,s);return s}reconfigure(e){let t=new rh(this.schema,e.plugins),s=t.fields,l=new Xi(t);for(let o=0;o<s.length;o++){let c=s[o].name;l[c]=this.hasOwnProperty(c)?this[c]:s[o].init(e,l)}return l}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(s=>s.toJSON())),e&&typeof e=="object")for(let s in e){if(s=="doc"||s=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let l=e[s],o=l.spec.state;o&&o.toJSON&&(t[s]=o.toJSON.call(l,this[l.key]))}return t}static fromJSON(e,t,s){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let l=new rh(e.schema,e.plugins),o=new Xi(l);return l.fields.forEach(c=>{if(c.name=="doc")o.doc=Gn.fromJSON(e.schema,t.doc);else if(c.name=="selection")o.selection=De.fromJSON(o.doc,t.selection);else if(c.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(s)for(let f in s){let d=s[f],p=d.spec.state;if(d.key==c.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(t,f)){o[c.name]=p.fromJSON.call(d,e,t[f],o);return}}o[c.name]=c.init(e,o)}}),o}}function v1(n,e,t){for(let s in n){let l=n[s];l instanceof Function?l=l.bind(e):s=="handleDOMEvents"&&(l=v1(l,e,{})),t[s]=l}return t}class ht{constructor(e){this.spec=e,this.props={},e.props&&v1(e.props,this,this.props),this.key=e.key?e.key.key:S1("plugin")}getState(e){return e[this.key]}}const sh=Object.create(null);function S1(n){return n in sh?n+"$"+ ++sh[n]:(sh[n]=0,n+"$")}class Ot{constructor(e="key"){this.key=S1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const dp=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function k1(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const T1=(n,e,t)=>{let s=k1(n,t);if(!s)return!1;let l=hp(s);if(!l){let c=s.blockRange(),f=c&&ol(c);return f==null?!1:(e&&e(n.tr.lift(c,f).scrollIntoView()),!0)}let o=l.nodeBefore;if(j1(n,l,e,-1))return!0;if(s.parent.content.size==0&&(tl(o,"end")||xe.isSelectable(o)))for(let c=s.depth;;c--){let f=du(n.doc,s.before(c),s.after(c),ie.empty);if(f&&f.slice.size<f.to-f.from){if(e){let d=n.tr.step(f);d.setSelection(tl(o,"end")?De.findFrom(d.doc.resolve(d.mapping.map(l.pos,-1)),-1):xe.create(d.doc,l.pos-o.nodeSize)),e(d.scrollIntoView())}return!0}if(c==1||s.node(c-1).childCount>1)break}return o.isAtom&&l.depth==s.depth-1?(e&&e(n.tr.delete(l.pos-o.nodeSize,l.pos).scrollIntoView()),!0):!1},mC=(n,e,t)=>{let s=k1(n,t);if(!s)return!1;let l=hp(s);return l?E1(n,l,e):!1},gC=(n,e,t)=>{let s=M1(n,t);if(!s)return!1;let l=pp(s);return l?E1(n,l,e):!1};function E1(n,e,t){let s=e.nodeBefore,l=s,o=e.pos-1;for(;!l.isTextblock;o--){if(l.type.spec.isolating)return!1;let g=l.lastChild;if(!g)return!1;l=g}let c=e.nodeAfter,f=c,d=e.pos+1;for(;!f.isTextblock;d++){if(f.type.spec.isolating)return!1;let g=f.firstChild;if(!g)return!1;f=g}let p=du(n.doc,o,d,ie.empty);if(!p||p.from!=o||p instanceof zt&&p.slice.size>=d-o)return!1;if(t){let g=n.tr.step(p);g.setSelection(ke.create(g.doc,o)),t(g.scrollIntoView())}return!0}function tl(n,e,t=!1){for(let s=n;s;s=e=="start"?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(t&&s.childCount!=1)return!1}return!1}const C1=(n,e,t)=>{let{$head:s,empty:l}=n.selection,o=s;if(!l)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):s.parentOffset>0)return!1;o=hp(s)}let c=o&&o.nodeBefore;return!c||!xe.isSelectable(c)?!1:(e&&e(n.tr.setSelection(xe.create(n.doc,o.pos-c.nodeSize)).scrollIntoView()),!0)};function hp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function M1(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const w1=(n,e,t)=>{let s=M1(n,t);if(!s)return!1;let l=pp(s);if(!l)return!1;let o=l.nodeAfter;if(j1(n,l,e,1))return!0;if(s.parent.content.size==0&&(tl(o,"start")||xe.isSelectable(o))){let c=du(n.doc,s.before(),s.after(),ie.empty);if(c&&c.slice.size<c.to-c.from){if(e){let f=n.tr.step(c);f.setSelection(tl(o,"start")?De.findFrom(f.doc.resolve(f.mapping.map(l.pos)),1):xe.create(f.doc,f.mapping.map(l.pos))),e(f.scrollIntoView())}return!0}}return o.isAtom&&l.depth==s.depth-1?(e&&e(n.tr.delete(l.pos,l.pos+o.nodeSize).scrollIntoView()),!0):!1},N1=(n,e,t)=>{let{$head:s,empty:l}=n.selection,o=s;if(!l)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):s.parentOffset<s.parent.content.size)return!1;o=pp(s)}let c=o&&o.nodeAfter;return!c||!xe.isSelectable(c)?!1:(e&&e(n.tr.setSelection(xe.create(n.doc,o.pos)).scrollIntoView()),!0)};function pp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const yC=(n,e)=>{let t=n.selection,s=t instanceof xe,l;if(s){if(t.node.isTextblock||!bs(n.doc,t.from))return!1;l=t.from}else if(l=fu(n.doc,t.from,-1),l==null)return!1;if(e){let o=n.tr.join(l);s&&o.setSelection(xe.create(o.doc,l-n.doc.resolve(l).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},bC=(n,e)=>{let t=n.selection,s;if(t instanceof xe){if(t.node.isTextblock||!bs(n.doc,t.to))return!1;s=t.to}else if(s=fu(n.doc,t.to,1),s==null)return!1;return e&&e(n.tr.join(s).scrollIntoView()),!0},xC=(n,e)=>{let{$from:t,$to:s}=n.selection,l=t.blockRange(s),o=l&&ol(l);return o==null?!1:(e&&e(n.tr.lift(l,o).scrollIntoView()),!0)},A1=(n,e)=>{let{$head:t,$anchor:s}=n.selection;return!t.parent.type.spec.code||!t.sameParent(s)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function mp(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const vC=(n,e)=>{let{$head:t,$anchor:s}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(s))return!1;let l=t.node(-1),o=t.indexAfter(-1),c=mp(l.contentMatchAt(o));if(!c||!l.canReplaceWith(o,o,c))return!1;if(e){let f=t.after(),d=n.tr.replaceWith(f,f,c.createAndFill());d.setSelection(De.near(d.doc.resolve(f),1)),e(d.scrollIntoView())}return!0},O1=(n,e)=>{let t=n.selection,{$from:s,$to:l}=t;if(t instanceof Sn||s.parent.inlineContent||l.parent.inlineContent)return!1;let o=mp(l.parent.contentMatchAt(l.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let c=(!s.parentOffset&&l.index()<l.parent.childCount?s:l).pos,f=n.tr.insert(c,o.createAndFill());f.setSelection(ke.create(f.doc,c+1)),e(f.scrollIntoView())}return!0},D1=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(Cr(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let s=t.blockRange(),l=s&&ol(s);return l==null?!1:(e&&e(n.tr.lift(s,l).scrollIntoView()),!0)};function SC(n){return(e,t)=>{let{$from:s,$to:l}=e.selection;if(e.selection instanceof xe&&e.selection.node.isBlock)return!s.parentOffset||!Cr(e.doc,s.pos)?!1:(t&&t(e.tr.split(s.pos).scrollIntoView()),!0);if(!s.depth)return!1;let o=[],c,f,d=!1,p=!1;for(let v=s.depth;;v--)if(s.node(v).isBlock){d=s.end(v)==s.pos+(s.depth-v),p=s.start(v)==s.pos-(s.depth-v),f=mp(s.node(v-1).contentMatchAt(s.indexAfter(v-1))),o.unshift(d&&f?{type:f}:null),c=v;break}else{if(v==1)return!1;o.unshift(null)}let g=e.tr;(e.selection instanceof ke||e.selection instanceof Sn)&&g.deleteSelection();let y=g.mapping.map(s.pos),b=Cr(g.doc,y,o.length,o);if(b||(o[0]=f?{type:f}:null,b=Cr(g.doc,y,o.length,o)),!b)return!1;if(g.split(y,o.length,o),!d&&p&&s.node(c).type!=f){let v=g.mapping.map(s.before(c)),k=g.doc.resolve(v);f&&s.node(c-1).canReplaceWith(k.index(),k.index()+1,f)&&g.setNodeMarkup(g.mapping.map(s.before(c)),f)}return t&&t(g.scrollIntoView()),!0}}const kC=SC(),TC=(n,e)=>{let{$from:t,to:s}=n.selection,l,o=t.sharedDepth(s);return o==0?!1:(l=t.before(o),e&&e(n.tr.setSelection(xe.create(n.doc,l))),!0)};function EC(n,e,t){let s=e.nodeBefore,l=e.nodeAfter,o=e.index();return!s||!l||!s.type.compatibleContent(l.type)?!1:!s.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-s.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(l.isTextblock||bs(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function j1(n,e,t,s){let l=e.nodeBefore,o=e.nodeAfter,c,f,d=l.type.spec.isolating||o.type.spec.isolating;if(!d&&EC(n,e,t))return!0;let p=!d&&e.parent.canReplace(e.index(),e.index()+1);if(p&&(c=(f=l.contentMatchAt(l.childCount)).findWrapping(o.type))&&f.matchType(c[0]||o.type).validEnd){if(t){let v=e.pos+o.nodeSize,k=X.empty;for(let M=c.length-1;M>=0;M--)k=X.from(c[M].create(null,k));k=X.from(l.copy(k));let E=n.tr.step(new Lt(e.pos-1,v,e.pos,v,new ie(k,1,0),c.length,!0)),C=E.doc.resolve(v+2*c.length);C.nodeAfter&&C.nodeAfter.type==l.type&&bs(E.doc,C.pos)&&E.join(C.pos),t(E.scrollIntoView())}return!0}let g=o.type.spec.isolating||s>0&&d?null:De.findFrom(e,1),y=g&&g.$from.blockRange(g.$to),b=y&&ol(y);if(b!=null&&b>=e.depth)return t&&t(n.tr.lift(y,b).scrollIntoView()),!0;if(p&&tl(o,"start",!0)&&tl(l,"end")){let v=l,k=[];for(;k.push(v),!v.isTextblock;)v=v.lastChild;let E=o,C=1;for(;!E.isTextblock;E=E.firstChild)C++;if(v.canReplace(v.childCount,v.childCount,E.content)){if(t){let M=X.empty;for(let V=k.length-1;V>=0;V--)M=X.from(k[V].copy(M));let L=n.tr.step(new Lt(e.pos-k.length,e.pos+o.nodeSize,e.pos+C,e.pos+o.nodeSize-C,new ie(M,k.length,0),0,!0));t(L.scrollIntoView())}return!0}}return!1}function R1(n){return function(e,t){let s=e.selection,l=n<0?s.$from:s.$to,o=l.depth;for(;l.node(o).isInline;){if(!o)return!1;o--}return l.node(o).isTextblock?(t&&t(e.tr.setSelection(ke.create(e.doc,n<0?l.start(o):l.end(o)))),!0):!1}}const CC=R1(-1),MC=R1(1);function wC(n,e=null){return function(t,s){let{$from:l,$to:o}=t.selection,c=l.blockRange(o),f=c&&up(c,n,e);return f?(s&&s(t.tr.wrap(c,f).scrollIntoView()),!0):!1}}function Eb(n,e=null){return function(t,s){let l=!1;for(let o=0;o<t.selection.ranges.length&&!l;o++){let{$from:{pos:c},$to:{pos:f}}=t.selection.ranges[o];t.doc.nodesBetween(c,f,(d,p)=>{if(l)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)l=!0;else{let g=t.doc.resolve(p),y=g.index();l=g.parent.canReplaceWith(y,y+1,n)}})}if(!l)return!1;if(s){let o=t.tr;for(let c=0;c<t.selection.ranges.length;c++){let{$from:{pos:f},$to:{pos:d}}=t.selection.ranges[c];o.setBlockType(f,d,n,e)}s(o.scrollIntoView())}return!0}}function gp(...n){return function(e,t,s){for(let l=0;l<n.length;l++)if(n[l](e,t,s))return!0;return!1}}gp(dp,T1,C1);gp(dp,w1,N1);gp(A1,O1,D1,kC);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function NC(n,e=null){return function(t,s){let{$from:l,$to:o}=t.selection,c=l.blockRange(o);if(!c)return!1;let f=s?t.tr:null;return AC(f,c,n,e)?(s&&s(f.scrollIntoView()),!0):!1}}function AC(n,e,t,s=null){let l=!1,o=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=c.resolve(e.start-2);o=new Tc(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Tc(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),l=!0}let f=up(o,t,s,e);return f?(n&&OC(n,e,f,l,t),!0):!1}function OC(n,e,t,s,l){let o=X.empty;for(let g=t.length-1;g>=0;g--)o=X.from(t[g].type.create(t[g].attrs,o));n.step(new Lt(e.start-(s?2:0),e.end,e.start,e.end,new ie(o,0,0),t.length,!0));let c=0;for(let g=0;g<t.length;g++)t[g].type==l&&(c=g+1);let f=t.length-c,d=e.start+t.length-(s?2:0),p=e.parent;for(let g=e.startIndex,y=e.endIndex,b=!0;g<y;g++,b=!1)!b&&Cr(n.doc,d,f)&&(n.split(d,f),d+=2*f),d+=p.child(g).nodeSize;return n}function DC(n){return function(e,t){let{$from:s,$to:l}=e.selection,o=s.blockRange(l,c=>c.childCount>0&&c.firstChild.type==n);return o?t?s.node(o.depth-1).type==n?jC(e,t,n,o):RC(e,t,o):!0:!1}}function jC(n,e,t,s){let l=n.tr,o=s.end,c=s.$to.end(s.depth);o<c&&(l.step(new Lt(o-1,c,o,c,new ie(X.from(t.create(null,s.parent.copy())),1,0),1,!0)),s=new Tc(l.doc.resolve(s.$from.pos),l.doc.resolve(c),s.depth));const f=ol(s);if(f==null)return!1;l.lift(s,f);let d=l.doc.resolve(l.mapping.map(o,-1)-1);return bs(l.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&l.join(d.pos),e(l.scrollIntoView()),!0}function RC(n,e,t){let s=n.tr,l=t.parent;for(let v=t.end,k=t.endIndex-1,E=t.startIndex;k>E;k--)v-=l.child(k).nodeSize,s.delete(v-1,v+1);let o=s.doc.resolve(t.start),c=o.nodeAfter;if(s.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let f=t.startIndex==0,d=t.endIndex==l.childCount,p=o.node(-1),g=o.index(-1);if(!p.canReplace(g+(f?0:1),g+1,c.content.append(d?X.empty:X.from(l))))return!1;let y=o.pos,b=y+c.nodeSize;return s.step(new Lt(y-(f?1:0),b+(d?1:0),y+1,b-1,new ie((f?X.empty:X.from(l.copy(X.empty))).append(d?X.empty:X.from(l.copy(X.empty))),f?0:1,d?0:1),f?0:1)),e(s.scrollIntoView()),!0}function zC(n){return function(e,t){let{$from:s,$to:l}=e.selection,o=s.blockRange(l,p=>p.childCount>0&&p.firstChild.type==n);if(!o)return!1;let c=o.startIndex;if(c==0)return!1;let f=o.parent,d=f.child(c-1);if(d.type!=n)return!1;if(t){let p=d.lastChild&&d.lastChild.type==f.type,g=X.from(p?n.create():null),y=new ie(X.from(n.create(null,X.from(f.type.create(null,g)))),p?3:1,0),b=o.start,v=o.end;t(e.tr.step(new Lt(b-(p?3:1),v,b,v,y,1,!0)).scrollIntoView())}return!0}}const $t=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},nl=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let zh=null;const Tr=function(n,e,t){let s=zh||(zh=document.createRange());return s.setEnd(n,t??n.nodeValue.length),s.setStart(n,e||0),s},LC=function(){zh=null},ei=function(n,e,t,s){return t&&(Cb(n,e,t,s,-1)||Cb(n,e,t,s,1))},_C=/^(img|br|input|textarea|hr)$/i;function Cb(n,e,t,s,l){for(var o;;){if(n==t&&e==s)return!0;if(e==(l<0?0:_n(n))){let c=n.parentNode;if(!c||c.nodeType!=1||Lo(n)||_C.test(n.nodeName)||n.contentEditable=="false")return!1;e=$t(n)+(l<0?0:1),n=c}else if(n.nodeType==1){let c=n.childNodes[e+(l<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((o=c.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=l;else return!1;else n=c,e=l<0?_n(n):0}else return!1}}function _n(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function BC(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=_n(n)}else if(n.parentNode&&!Lo(n))e=$t(n),n=n.parentNode;else return null}}function HC(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Lo(n))e=$t(n)+1,n=n.parentNode;else return null}}function UC(n,e,t){for(let s=e==0,l=e==_n(n);s||l;){if(n==t)return!0;let o=$t(n);if(n=n.parentNode,!n)return!1;s=s&&o==0,l=l&&o==_n(n)}}function Lo(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const pu=function(n){return n.focusNode&&ei(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function qs(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function IC(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function VC(n,e,t){if(n.caretPositionFromPoint)try{let s=n.caretPositionFromPoint(e,t);if(s)return{node:s.offsetNode,offset:Math.min(_n(s.offsetNode),s.offset)}}catch{}if(n.caretRangeFromPoint){let s=n.caretRangeFromPoint(e,t);if(s)return{node:s.startContainer,offset:Math.min(_n(s.startContainer),s.startOffset)}}}const Wn=typeof navigator<"u"?navigator:null,Mb=typeof document<"u"?document:null,xs=Wn&&Wn.userAgent||"",Lh=/Edge\/(\d+)/.exec(xs),z1=/MSIE \d/.exec(xs),_h=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(xs),un=!!(z1||_h||Lh),hs=z1?document.documentMode:_h?+_h[1]:Lh?+Lh[1]:0,Bn=!un&&/gecko\/(\d+)/i.test(xs);Bn&&+(/Firefox\/(\d+)/.exec(xs)||[0,0])[1];const Bh=!un&&/Chrome\/(\d+)/.exec(xs),Yt=!!Bh,L1=Bh?+Bh[1]:0,Jt=!un&&!!Wn&&/Apple Computer/.test(Wn.vendor),rl=Jt&&(/Mobile\/\w+/.test(xs)||!!Wn&&Wn.maxTouchPoints>2),Ln=rl||(Wn?/Mac/.test(Wn.platform):!1),_1=Wn?/Win/.test(Wn.platform):!1,Er=/Android \d/.test(xs),_o=!!Mb&&"webkitFontSmoothing"in Mb.documentElement.style,qC=_o?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function $C(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function xr(n,e){return typeof n=="number"?n:n[e]}function GC(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,s=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*s}}function wb(n,e,t){let s=n.someProp("scrollThreshold")||0,l=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let c=t||n.dom;c;){if(c.nodeType!=1){c=nl(c);continue}let f=c,d=f==o.body,p=d?$C(o):GC(f),g=0,y=0;if(e.top<p.top+xr(s,"top")?y=-(p.top-e.top+xr(l,"top")):e.bottom>p.bottom-xr(s,"bottom")&&(y=e.bottom-e.top>p.bottom-p.top?e.top+xr(l,"top")-p.top:e.bottom-p.bottom+xr(l,"bottom")),e.left<p.left+xr(s,"left")?g=-(p.left-e.left+xr(l,"left")):e.right>p.right-xr(s,"right")&&(g=e.right-p.right+xr(l,"right")),g||y)if(d)o.defaultView.scrollBy(g,y);else{let v=f.scrollLeft,k=f.scrollTop;y&&(f.scrollTop+=y),g&&(f.scrollLeft+=g);let E=f.scrollLeft-v,C=f.scrollTop-k;e={left:e.left-E,top:e.top-C,right:e.right-E,bottom:e.bottom-C}}let b=d?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(b))break;c=b=="absolute"?c.offsetParent:nl(c)}}function YC(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),s,l;for(let o=(e.left+e.right)/2,c=t+1;c<Math.min(innerHeight,e.bottom);c+=5){let f=n.root.elementFromPoint(o,c);if(!f||f==n.dom||!n.dom.contains(f))continue;let d=f.getBoundingClientRect();if(d.top>=t-20){s=f,l=d.top;break}}return{refDOM:s,refTop:l,stack:B1(n.dom)}}function B1(n){let e=[],t=n.ownerDocument;for(let s=n;s&&(e.push({dom:s,top:s.scrollTop,left:s.scrollLeft}),n!=t);s=nl(s));return e}function KC({refDOM:n,refTop:e,stack:t}){let s=n?n.getBoundingClientRect().top:0;H1(t,s==0?0:s-e)}function H1(n,e){for(let t=0;t<n.length;t++){let{dom:s,top:l,left:o}=n[t];s.scrollTop!=l+e&&(s.scrollTop=l+e),s.scrollLeft!=o&&(s.scrollLeft=o)}}let Gi=null;function PC(n){if(n.setActive)return n.setActive();if(Gi)return n.focus(Gi);let e=B1(n);n.focus(Gi==null?{get preventScroll(){return Gi={preventScroll:!0},!0}}:void 0),Gi||(Gi=!1,H1(e,0))}function U1(n,e){let t,s=2e8,l,o=0,c=e.top,f=e.top,d,p;for(let g=n.firstChild,y=0;g;g=g.nextSibling,y++){let b;if(g.nodeType==1)b=g.getClientRects();else if(g.nodeType==3)b=Tr(g).getClientRects();else continue;for(let v=0;v<b.length;v++){let k=b[v];if(k.top<=c&&k.bottom>=f){c=Math.max(k.bottom,c),f=Math.min(k.top,f);let E=k.left>e.left?k.left-e.left:k.right<e.left?e.left-k.right:0;if(E<s){t=g,s=E,l=E&&t.nodeType==3?{left:k.right<e.left?k.right:k.left,top:e.top}:e,g.nodeType==1&&E&&(o=y+(e.left>=(k.left+k.right)/2?1:0));continue}}else k.top>e.top&&!d&&k.left<=e.left&&k.right>=e.left&&(d=g,p={left:Math.max(k.left,Math.min(k.right,e.left)),top:k.top});!t&&(e.left>=k.right&&e.top>=k.top||e.left>=k.left&&e.top>=k.bottom)&&(o=y+1)}}return!t&&d&&(t=d,l=p,s=0),t&&t.nodeType==3?JC(t,l):!t||s&&t.nodeType==1?{node:n,offset:o}:U1(t,l)}function JC(n,e){let t=n.nodeValue.length,s=document.createRange(),l;for(let o=0;o<t;o++){s.setEnd(n,o+1),s.setStart(n,o);let c=ns(s,1);if(c.top!=c.bottom&&yp(e,c)){l={node:n,offset:o+(e.left>=(c.left+c.right)/2?1:0)};break}}return s.detach(),l||{node:n,offset:0}}function yp(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function FC(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function XC(n,e,t){let{node:s,offset:l}=U1(e,t),o=-1;if(s.nodeType==1&&!s.firstChild){let c=s.getBoundingClientRect();o=c.left!=c.right&&t.left>(c.left+c.right)/2?1:-1}return n.docView.posFromDOM(s,l,o)}function QC(n,e,t,s){let l=-1;for(let o=e,c=!1;o!=n.dom;){let f=n.docView.nearestDesc(o,!0),d;if(!f)return null;if(f.dom.nodeType==1&&(f.node.isBlock&&f.parent||!f.contentDOM)&&((d=f.dom.getBoundingClientRect()).width||d.height)&&(f.node.isBlock&&f.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(f.dom.nodeName)&&(!c&&d.left>s.left||d.top>s.top?l=f.posBefore:(!c&&d.right<s.left||d.bottom<s.top)&&(l=f.posAfter),c=!0),!f.contentDOM&&l<0&&!f.node.isText))return(f.node.isBlock?s.top<(d.top+d.bottom)/2:s.left<(d.left+d.right)/2)?f.posBefore:f.posAfter;o=f.dom.parentNode}return l>-1?l:n.docView.posFromDOM(e,t,-1)}function I1(n,e,t){let s=n.childNodes.length;if(s&&t.top<t.bottom)for(let l=Math.max(0,Math.min(s-1,Math.floor(s*(e.top-t.top)/(t.bottom-t.top))-2)),o=l;;){let c=n.childNodes[o];if(c.nodeType==1){let f=c.getClientRects();for(let d=0;d<f.length;d++){let p=f[d];if(yp(e,p))return I1(c,e,p)}}if((o=(o+1)%s)==l)break}return n}function ZC(n,e){let t=n.dom.ownerDocument,s,l=0,o=VC(t,e.left,e.top);o&&({node:s,offset:l}=o);let c=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),f;if(!c||!n.dom.contains(c.nodeType!=1?c.parentNode:c)){let p=n.dom.getBoundingClientRect();if(!yp(e,p)||(c=I1(n.dom,e,p),!c))return null}if(Jt)for(let p=c;s&&p;p=nl(p))p.draggable&&(s=void 0);if(c=FC(c,e),s){if(Bn&&s.nodeType==1&&(l=Math.min(l,s.childNodes.length),l<s.childNodes.length)){let g=s.childNodes[l],y;g.nodeName=="IMG"&&(y=g.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&l++}let p;_o&&l&&s.nodeType==1&&(p=s.childNodes[l-1]).nodeType==1&&p.contentEditable=="false"&&p.getBoundingClientRect().top>=e.top&&l--,s==n.dom&&l==s.childNodes.length-1&&s.lastChild.nodeType==1&&e.top>s.lastChild.getBoundingClientRect().bottom?f=n.state.doc.content.size:(l==0||s.nodeType!=1||s.childNodes[l-1].nodeName!="BR")&&(f=QC(n,s,l,e))}f==null&&(f=XC(n,c,e));let d=n.docView.nearestDesc(c,!0);return{pos:f,inside:d?d.posAtStart-d.border:-1}}function Nb(n){return n.top<n.bottom||n.left<n.right}function ns(n,e){let t=n.getClientRects();if(t.length){let s=t[e<0?0:t.length-1];if(Nb(s))return s}return Array.prototype.find.call(t,Nb)||n.getBoundingClientRect()}const WC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function V1(n,e,t){let{node:s,offset:l,atom:o}=n.docView.domFromPos(e,t<0?-1:1),c=_o||Bn;if(s.nodeType==3)if(c&&(WC.test(s.nodeValue)||(t<0?!l:l==s.nodeValue.length))){let d=ns(Tr(s,l,l),t);if(Bn&&l&&/\s/.test(s.nodeValue[l-1])&&l<s.nodeValue.length){let p=ns(Tr(s,l-1,l-1),-1);if(p.top==d.top){let g=ns(Tr(s,l,l+1),-1);if(g.top!=d.top)return ro(g,g.left<p.left)}}return d}else{let d=l,p=l,g=t<0?1:-1;return t<0&&!l?(p++,g=-1):t>=0&&l==s.nodeValue.length?(d--,g=1):t<0?d--:p++,ro(ns(Tr(s,d,p),g),g<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&l&&(t<0||l==_n(s))){let d=s.childNodes[l-1];if(d.nodeType==1)return ih(d.getBoundingClientRect(),!1)}if(o==null&&l<_n(s)){let d=s.childNodes[l];if(d.nodeType==1)return ih(d.getBoundingClientRect(),!0)}return ih(s.getBoundingClientRect(),t>=0)}if(o==null&&l&&(t<0||l==_n(s))){let d=s.childNodes[l-1],p=d.nodeType==3?Tr(d,_n(d)-(c?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(p)return ro(ns(p,1),!1)}if(o==null&&l<_n(s)){let d=s.childNodes[l];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let p=d?d.nodeType==3?Tr(d,0,c?0:1):d.nodeType==1?d:null:null;if(p)return ro(ns(p,-1),!0)}return ro(ns(s.nodeType==3?Tr(s):s,-t),t>=0)}function ro(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function ih(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function q1(n,e,t){let s=n.state,l=n.root.activeElement;s!=e&&n.updateState(e),l!=n.dom&&n.focus();try{return t()}finally{s!=e&&n.updateState(s),l!=n.dom&&l&&l.focus()}}function eM(n,e,t){let s=e.selection,l=t=="up"?s.$from:s.$to;return q1(n,e,()=>{let{node:o}=n.docView.domFromPos(l.pos,t=="up"?-1:1);for(;;){let f=n.docView.nearestDesc(o,!0);if(!f)break;if(f.node.isBlock){o=f.contentDOM||f.dom;break}o=f.dom.parentNode}let c=V1(n,l.pos,1);for(let f=o.firstChild;f;f=f.nextSibling){let d;if(f.nodeType==1)d=f.getClientRects();else if(f.nodeType==3)d=Tr(f,0,f.nodeValue.length).getClientRects();else continue;for(let p=0;p<d.length;p++){let g=d[p];if(g.bottom>g.top+1&&(t=="up"?c.top-g.top>(g.bottom-c.top)*2:g.bottom-c.bottom>(c.bottom-g.top)*2))return!1}}return!0})}const tM=/[\u0590-\u08ac]/;function nM(n,e,t){let{$head:s}=e.selection;if(!s.parent.isTextblock)return!1;let l=s.parentOffset,o=!l,c=l==s.parent.content.size,f=n.domSelection();return f?!tM.test(s.parent.textContent)||!f.modify?t=="left"||t=="backward"?o:c:q1(n,e,()=>{let{focusNode:d,focusOffset:p,anchorNode:g,anchorOffset:y}=n.domSelectionRange(),b=f.caretBidiLevel;f.modify("move",t,"character");let v=s.depth?n.docView.domAfterPos(s.before()):n.dom,{focusNode:k,focusOffset:E}=n.domSelectionRange(),C=k&&!v.contains(k.nodeType==1?k:k.parentNode)||d==k&&p==E;try{f.collapse(g,y),d&&(d!=g||p!=y)&&f.extend&&f.extend(d,p)}catch{}return b!=null&&(f.caretBidiLevel=b),C}):s.pos==s.start()||s.pos==s.end()}let Ab=null,Ob=null,Db=!1;function rM(n,e,t){return Ab==e&&Ob==t?Db:(Ab=e,Ob=t,Db=t=="up"||t=="down"?eM(n,e,t):nM(n,e,t))}const Hn=0,jb=1,$s=2,er=3;class Bo{constructor(e,t,s,l){this.parent=e,this.children=t,this.dom=s,this.contentDOM=l,this.dirty=Hn,s.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,s){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,s=this.posAtStart;;t++){let l=this.children[t];if(l==e)return s;s+=l.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,s){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(s<0){let o,c;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((c=o.pmViewDesc)&&c.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(c)+c.size:this.posAtStart}else{let o,c;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((c=o.pmViewDesc)&&c.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(c):this.posAtEnd}let l;if(e==this.dom&&this.contentDOM)l=t>$t(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))l=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){l=!1;break}if(o.previousSibling)break}if(l==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){l=!0;break}if(o.nextSibling)break}}return l??s>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let s=!0,l=e;l;l=l.parentNode){let o=this.getDesc(l),c;if(o&&(!t||o.node))if(s&&(c=o.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))s=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let s=t;s;s=s.parent)if(s==this)return t}posFromDOM(e,t,s){for(let l=e;l;l=l.parentNode){let o=this.getDesc(l);if(o)return o.localPosFromDOM(e,t,s)}return-1}descAt(e){for(let t=0,s=0;t<this.children.length;t++){let l=this.children[t],o=s+l.size;if(s==e&&o!=s){for(;!l.border&&l.children.length;)for(let c=0;c<l.children.length;c++){let f=l.children[c];if(f.size){l=f;break}}return l}if(e<o)return l.descAt(e-s-l.border);s=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let s=0,l=0;for(let o=0;s<this.children.length;s++){let c=this.children[s],f=o+c.size;if(f>e||c instanceof G1){l=e-o;break}o=f}if(l)return this.children[s].domFromPos(l-this.children[s].border,t);for(let o;s&&!(o=this.children[s-1]).size&&o instanceof $1&&o.side>=0;s--);if(t<=0){let o,c=!0;for(;o=s?this.children[s-1]:null,!(!o||o.dom.parentNode==this.contentDOM);s--,c=!1);return o&&t&&c&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?$t(o.dom)+1:0}}else{let o,c=!0;for(;o=s<this.children.length?this.children[s]:null,!(!o||o.dom.parentNode==this.contentDOM);s++,c=!1);return o&&c&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?$t(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,s=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let l=-1,o=-1;for(let c=s,f=0;;f++){let d=this.children[f],p=c+d.size;if(l==-1&&e<=p){let g=c+d.border;if(e>=g&&t<=p-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,g);e=c;for(let y=f;y>0;y--){let b=this.children[y-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){l=$t(b.dom)+1;break}e-=b.size}l==-1&&(l=0)}if(l>-1&&(p>t||f==this.children.length-1)){t=p;for(let g=f+1;g<this.children.length;g++){let y=this.children[g];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){o=$t(y.dom);break}t+=y.size}o==-1&&(o=this.contentDOM.childNodes.length);break}c=p}return{node:this.contentDOM,from:e,to:t,fromOffset:l,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:s}=this.domFromPos(e,0);if(t.nodeType!=1||s==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[s]}setSelection(e,t,s,l=!1){let o=Math.min(e,t),c=Math.max(e,t);for(let v=0,k=0;v<this.children.length;v++){let E=this.children[v],C=k+E.size;if(o>k&&c<C)return E.setSelection(e-k-E.border,t-k-E.border,s,l);k=C}let f=this.domFromPos(e,e?-1:1),d=t==e?f:this.domFromPos(t,t?-1:1),p=s.root.getSelection(),g=s.domSelectionRange(),y=!1;if((Bn||Jt)&&e==t){let{node:v,offset:k}=f;if(v.nodeType==3){if(y=!!(k&&v.nodeValue[k-1]==`
`),y&&k==v.nodeValue.length)for(let E=v,C;E;E=E.parentNode){if(C=E.nextSibling){C.nodeName=="BR"&&(f=d={node:C.parentNode,offset:$t(C)+1});break}let M=E.pmViewDesc;if(M&&M.node&&M.node.isBlock)break}}else{let E=v.childNodes[k-1];y=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(Bn&&g.focusNode&&g.focusNode!=d.node&&g.focusNode.nodeType==1){let v=g.focusNode.childNodes[g.focusOffset];v&&v.contentEditable=="false"&&(l=!0)}if(!(l||y&&Jt)&&ei(f.node,f.offset,g.anchorNode,g.anchorOffset)&&ei(d.node,d.offset,g.focusNode,g.focusOffset))return;let b=!1;if((p.extend||e==t)&&!(y&&Bn)){p.collapse(f.node,f.offset);try{e!=t&&p.extend(d.node,d.offset),b=!0}catch{}}if(!b){if(e>t){let k=f;f=d,d=k}let v=document.createRange();v.setEnd(d.node,d.offset),v.setStart(f.node,f.offset),p.removeAllRanges(),p.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let s=0,l=0;l<this.children.length;l++){let o=this.children[l],c=s+o.size;if(s==c?e<=c&&t>=s:e<c&&t>s){let f=s+o.border,d=c-o.border;if(e>=f&&t<=d){this.dirty=e==s||t==c?$s:jb,e==f&&t==d&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=er:o.markDirty(e-f,t-f);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?$s:er}s=c}this.dirty=$s}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let s=e==1?$s:jb;t.dirty<s&&(t.dirty=s)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class $1 extends Bo{constructor(e,t,s,l){let o,c=t.type.toDOM;if(typeof c=="function"&&(c=c(s,()=>{if(!o)return l;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(c.nodeType!=1){let f=document.createElement("span");f.appendChild(c),c=f}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==Hn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class sM extends Bo{constructor(e,t,s,l){super(e,[],t,null),this.textDOM=s,this.text=l}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ti extends Bo{constructor(e,t,s,l,o){super(e,[],s,l),this.mark=t,this.spec=o}static create(e,t,s,l){let o=l.nodeViews[t.type.name],c=o&&o(t,l,s);return(!c||!c.dom)&&(c=ri.renderSpec(document,t.type.spec.toDOM(t,s),null,t.attrs)),new ti(e,t,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&er||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=er&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Hn){let s=this.parent;for(;!s.node;)s=s.parent;s.dirty<this.dirty&&(s.dirty=this.dirty),this.dirty=Hn}}slice(e,t,s){let l=ti.create(this.parent,this.mark,!0,s),o=this.children,c=this.size;t<c&&(o=Uh(o,t,c,s)),e>0&&(o=Uh(o,0,e,s));for(let f=0;f<o.length;f++)o[f].parent=l;return l.children=o,l}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ps extends Bo{constructor(e,t,s,l,o,c,f,d,p){super(e,[],o,c),this.node=t,this.outerDeco=s,this.innerDeco=l,this.nodeDOM=f}static create(e,t,s,l,o,c){let f=o.nodeViews[t.type.name],d,p=f&&f(t,o,()=>{if(!d)return c;if(d.parent)return d.parent.posBeforeChild(d)},s,l),g=p&&p.dom,y=p&&p.contentDOM;if(t.isText){if(!g)g=document.createTextNode(t.text);else if(g.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else g||({dom:g,contentDOM:y}=ri.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&g.nodeName!="BR"&&(g.hasAttribute("contenteditable")||(g.contentEditable="false"),t.type.spec.draggable&&(g.draggable=!0));let b=g;return g=P1(g,s,t),p?d=new iM(e,t,s,l,g,y||null,b,p,o,c+1):t.isText?new mu(e,t,s,l,g,b,o):new ps(e,t,s,l,g,y||null,b,o,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let s=this.children[t];if(this.dom.contains(s.dom.parentNode)){e.contentElement=s.dom.parentNode;break}}e.contentElement||(e.getContent=()=>X.empty)}return e}matchesNode(e,t,s){return this.dirty==Hn&&e.eq(this.node)&&Cc(t,this.outerDeco)&&s.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let s=this.node.inlineContent,l=t,o=e.composing?this.localCompositionInfo(e,t):null,c=o&&o.pos>-1?o:null,f=o&&o.pos<0,d=new oM(this,c&&c.node,e);uM(this.node,this.innerDeco,(p,g,y)=>{p.spec.marks?d.syncToMarks(p.spec.marks,s,e,g):p.type.side>=0&&!y&&d.syncToMarks(g==this.node.childCount?rt.none:this.node.child(g).marks,s,e,g),d.placeWidget(p,e,l)},(p,g,y,b)=>{d.syncToMarks(p.marks,s,e,b);let v;d.findNodeMatch(p,g,y,b)||f&&e.state.selection.from>l&&e.state.selection.to<l+p.nodeSize&&(v=d.findIndexWithChild(o.node))>-1&&d.updateNodeAt(p,g,y,v,e)||d.updateNextNode(p,g,y,e,b,l)||d.addNode(p,g,y,e,l),l+=p.nodeSize}),d.syncToMarks([],s,e,0),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==$s)&&(c&&this.protectLocalComposition(e,c),Y1(this.contentDOM,this.children,e),rl&&fM(this.dom))}localCompositionInfo(e,t){let{from:s,to:l}=e.state.selection;if(!(e.state.selection instanceof ke)||s<t||l>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let c=o.nodeValue,f=dM(this.node.content,c,s-t,l-t);return f<0?null:{node:o,pos:f,text:c}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:s,text:l}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let c=new sM(this,o,t,l);e.input.compositionNodes.push(c),this.children=Uh(this.children,s,s+l.length,e,c)}update(e,t,s,l){return this.dirty==er||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,s,l),!0)}updateInner(e,t,s,l){this.updateOuterDeco(t),this.node=e,this.innerDeco=s,this.contentDOM&&this.updateChildren(l,this.posAtStart),this.dirty=Hn}updateOuterDeco(e){if(Cc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,s=this.dom;this.dom=K1(this.dom,this.nodeDOM,Hh(this.outerDeco,this.node,t),Hh(e,this.node,t)),this.dom!=s&&(s.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Rb(n,e,t,s,l){P1(s,e,n);let o=new ps(void 0,n,e,t,s,s,s,l,0);return o.contentDOM&&o.updateChildren(l,0),o}class mu extends ps{constructor(e,t,s,l,o,c,f){super(e,t,s,l,o,null,c,f,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,s,l){return this.dirty==er||this.dirty!=Hn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Hn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,l.trackWrites==this.nodeDOM&&(l.trackWrites=null)),this.node=e,this.dirty=Hn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,s){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,s)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,s){let l=this.node.cut(e,t),o=document.createTextNode(l.text);return new mu(this.parent,l,this.outerDeco,this.innerDeco,o,o,s)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=er)}get domAtom(){return!1}isText(e){return this.node.text==e}}class G1 extends Bo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Hn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class iM extends ps{constructor(e,t,s,l,o,c,f,d,p,g){super(e,t,s,l,o,c,f,p,g),this.spec=d}update(e,t,s,l){if(this.dirty==er)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,s);return o&&this.updateInner(e,t,s,l),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,s,l)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,s,l){this.spec.setSelection?this.spec.setSelection(e,t,s.root):super.setSelection(e,t,s,l)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Y1(n,e,t){let s=n.firstChild,l=!1;for(let o=0;o<e.length;o++){let c=e[o],f=c.dom;if(f.parentNode==n){for(;f!=s;)s=zb(s),l=!0;s=s.nextSibling}else l=!0,n.insertBefore(f,s);if(c instanceof ti){let d=s?s.previousSibling:n.lastChild;Y1(c.contentDOM,c.children,t),s=d?d.nextSibling:n.firstChild}}for(;s;)s=zb(s),l=!0;l&&t.trackWrites==n&&(t.trackWrites=null)}const po=function(n){n&&(this.nodeName=n)};po.prototype=Object.create(null);const Gs=[new po];function Hh(n,e,t){if(n.length==0)return Gs;let s=t?Gs[0]:new po,l=[s];for(let o=0;o<n.length;o++){let c=n[o].type.attrs;if(c){c.nodeName&&l.push(s=new po(c.nodeName));for(let f in c){let d=c[f];d!=null&&(t&&l.length==1&&l.push(s=new po(e.isInline?"span":"div")),f=="class"?s.class=(s.class?s.class+" ":"")+d:f=="style"?s.style=(s.style?s.style+";":"")+d:f!="nodeName"&&(s[f]=d))}}}return l}function K1(n,e,t,s){if(t==Gs&&s==Gs)return e;let l=e;for(let o=0;o<s.length;o++){let c=s[o],f=t[o];if(o){let d;f&&f.nodeName==c.nodeName&&l!=n&&(d=l.parentNode)&&d.nodeName.toLowerCase()==c.nodeName||(d=document.createElement(c.nodeName),d.pmIsDeco=!0,d.appendChild(l),f=Gs[0]),l=d}lM(l,f||Gs[0],c)}return l}function lM(n,e,t){for(let s in e)s!="class"&&s!="style"&&s!="nodeName"&&!(s in t)&&n.removeAttribute(s);for(let s in t)s!="class"&&s!="style"&&s!="nodeName"&&t[s]!=e[s]&&n.setAttribute(s,t[s]);if(e.class!=t.class){let s=e.class?e.class.split(" ").filter(Boolean):[],l=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<s.length;o++)l.indexOf(s[o])==-1&&n.classList.remove(s[o]);for(let o=0;o<l.length;o++)s.indexOf(l[o])==-1&&n.classList.add(l[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let s=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,l;for(;l=s.exec(e.style);)n.style.removeProperty(l[1])}t.style&&(n.style.cssText+=t.style)}}function P1(n,e,t){return K1(n,n,Gs,Hh(e,t,n.nodeType!=1))}function Cc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function zb(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class oM{constructor(e,t,s){this.lock=t,this.view=s,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=aM(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let s=e;s<t;s++)this.top.children[s].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,s,l){let o=0,c=this.stack.length>>1,f=Math.min(c,e.length);for(;o<f&&(o==c-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<c;)this.destroyRest(),this.top.dirty=Hn,this.index=this.stack.pop(),this.top=this.stack.pop(),c--;for(;c<e.length;){this.stack.push(this.top,this.index+1);let d=-1,p=this.top.children.length;l<this.preMatch.index&&(p=Math.min(this.index+3,p));for(let g=this.index;g<p;g++){let y=this.top.children[g];if(y.matchesMark(e[c])&&!this.isLocked(y.dom)){d=g;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let g=ti.create(this.top,e[c],t,s);this.top.children.splice(this.index,0,g),this.top=g,this.changed=!0}this.index=0,c++}}findNodeMatch(e,t,s,l){let o=-1,c;if(l>=this.preMatch.index&&(c=this.preMatch.matches[l-this.preMatch.index]).parent==this.top&&c.matchesNode(e,t,s))o=this.top.children.indexOf(c,this.index);else for(let f=this.index,d=Math.min(this.top.children.length,f+5);f<d;f++){let p=this.top.children[f];if(p.matchesNode(e,t,s)&&!this.preMatch.matched.has(p)){o=f;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,s,l,o){let c=this.top.children[l];return c.dirty==er&&c.dom==c.contentDOM&&(c.dirty=$s),c.update(e,t,s,o)?(this.destroyBetween(this.index,l),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let s=e.pmViewDesc;if(s){for(let l=this.index;l<this.top.children.length;l++)if(this.top.children[l]==s)return l}return-1}e=t}}updateNextNode(e,t,s,l,o,c){for(let f=this.index;f<this.top.children.length;f++){let d=this.top.children[f];if(d instanceof ps){let p=this.preMatch.matched.get(d);if(p!=null&&p!=o)return!1;let g=d.dom,y,b=this.isLocked(g)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=er&&Cc(t,d.outerDeco));if(!b&&d.update(e,t,s,l))return this.destroyBetween(this.index,f),d.dom!=g&&(this.changed=!0),this.index++,!0;if(!b&&(y=this.recreateWrapper(d,e,t,s,l,c)))return this.destroyBetween(this.index,f),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=$s,y.updateChildren(l,c+1),y.dirty=Hn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,s,l,o,c){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Cc(s,e.outerDeco)||!l.eq(e.innerDeco))return null;let f=ps.create(this.top,t,s,l,o,c);if(f.contentDOM){f.children=e.children,e.children=[];for(let d of f.children)d.parent=f}return e.destroy(),f}addNode(e,t,s,l,o){let c=ps.create(this.top,e,t,s,l,o);c.contentDOM&&c.updateChildren(l,o+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,t,s){let l=this.index<this.top.children.length?this.top.children[this.index]:null;if(l&&l.matchesWidget(e)&&(e==l.widget||!l.widget.type.toDOM.parentNode))this.index++;else{let o=new $1(this.top,e,t,s);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ti;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof mu)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Jt||Yt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let s=document.createElement(e);e=="IMG"&&(s.className="ProseMirror-separator",s.alt=""),e=="BR"&&(s.className="ProseMirror-trailingBreak");let l=new G1(this.top,[],s,null);t!=this.top?t.children.push(l):t.children.splice(this.index++,0,l),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function aM(n,e){let t=e,s=t.children.length,l=n.childCount,o=new Map,c=[];e:for(;l>0;){let f;for(;;)if(s){let p=t.children[s-1];if(p instanceof ti)t=p,s=p.children.length;else{f=p,s--;break}}else{if(t==e)break e;s=t.parent.children.indexOf(t),t=t.parent}let d=f.node;if(d){if(d!=n.child(l-1))break;--l,o.set(f,l),c.push(f)}}return{index:l,matched:o,matches:c.reverse()}}function cM(n,e){return n.type.side-e.type.side}function uM(n,e,t,s){let l=e.locals(n),o=0;if(l.length==0){for(let p=0;p<n.childCount;p++){let g=n.child(p);s(g,l,e.forChild(o,g),p),o+=g.nodeSize}return}let c=0,f=[],d=null;for(let p=0;;){let g,y;for(;c<l.length&&l[c].to==o;){let C=l[c++];C.widget&&(g?(y||(y=[g])).push(C):g=C)}if(g)if(y){y.sort(cM);for(let C=0;C<y.length;C++)t(y[C],p,!!d)}else t(g,p,!!d);let b,v;if(d)v=-1,b=d,d=null;else if(p<n.childCount)v=p,b=n.child(p++);else break;for(let C=0;C<f.length;C++)f[C].to<=o&&f.splice(C--,1);for(;c<l.length&&l[c].from<=o&&l[c].to>o;)f.push(l[c++]);let k=o+b.nodeSize;if(b.isText){let C=k;c<l.length&&l[c].from<C&&(C=l[c].from);for(let M=0;M<f.length;M++)f[M].to<C&&(C=f[M].to);C<k&&(d=b.cut(C-o),b=b.cut(0,C-o),k=C,v=-1)}else for(;c<l.length&&l[c].to<k;)c++;let E=b.isInline&&!b.isLeaf?f.filter(C=>!C.inline):f.slice();s(b,E,e.forChild(o,b),v),o=k}}function fM(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function dM(n,e,t,s){for(let l=0,o=0;l<n.childCount&&o<=s;){let c=n.child(l++),f=o;if(o+=c.nodeSize,!c.isText)continue;let d=c.text;for(;l<n.childCount;){let p=n.child(l++);if(o+=p.nodeSize,!p.isText)break;d+=p.text}if(o>=t){if(o>=s&&d.slice(s-e.length-f,s-f)==e)return s-e.length;let p=f<s?d.lastIndexOf(e,s-f-1):-1;if(p>=0&&p+e.length+f>=t)return f+p;if(t==s&&d.length>=s+e.length-f&&d.slice(s-f,s-f+e.length)==e)return s}}return-1}function Uh(n,e,t,s,l){let o=[];for(let c=0,f=0;c<n.length;c++){let d=n[c],p=f,g=f+=d.size;p>=t||g<=e?o.push(d):(p<e&&o.push(d.slice(0,e-p,s)),l&&(o.push(l),l=void 0),g>t&&o.push(d.slice(t-p,d.size,s)))}return o}function bp(n,e=null){let t=n.domSelectionRange(),s=n.state.doc;if(!t.focusNode)return null;let l=n.docView.nearestDesc(t.focusNode),o=l&&l.size==0,c=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(c<0)return null;let f=s.resolve(c),d,p;if(pu(t)){for(d=c;l&&!l.node;)l=l.parent;let y=l.node;if(l&&y.isAtom&&xe.isSelectable(y)&&l.parent&&!(y.isInline&&UC(t.focusNode,t.focusOffset,l.dom))){let b=l.posBefore;p=new xe(c==b?f:s.resolve(b))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=c,b=c;for(let v=0;v<t.rangeCount;v++){let k=t.getRangeAt(v);y=Math.min(y,n.docView.posFromDOM(k.startContainer,k.startOffset,1)),b=Math.max(b,n.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(y<0)return null;[d,c]=b==n.state.selection.anchor?[b,y]:[y,b],f=s.resolve(c)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let g=s.resolve(d);if(!p){let y=e=="pointer"||n.state.selection.head<f.pos&&!o?1:-1;p=xp(n,g,f,y)}return p}function J1(n){return n.editable?n.hasFocus():X1(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Mr(n,e=!1){let t=n.state.selection;if(F1(n,t),!!J1(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Yt){let s=n.domSelectionRange(),l=n.domObserver.currentSelection;if(s.anchorNode&&l.anchorNode&&ei(s.anchorNode,s.anchorOffset,l.anchorNode,l.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)pM(n);else{let{anchor:s,head:l}=t,o,c;Lb&&!(t instanceof ke)&&(t.$from.parent.inlineContent||(o=_b(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(c=_b(n,t.to))),n.docView.setSelection(s,l,n,e),Lb&&(o&&Bb(o),c&&Bb(c)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&hM(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Lb=Jt||Yt&&L1<63;function _b(n,e){let{node:t,offset:s}=n.docView.domFromPos(e,0),l=s<t.childNodes.length?t.childNodes[s]:null,o=s?t.childNodes[s-1]:null;if(Jt&&l&&l.contentEditable=="false")return lh(l);if((!l||l.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(l)return lh(l);if(o)return lh(o)}}function lh(n){return n.contentEditable="true",Jt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Bb(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function hM(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),s=t.anchorNode,l=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=s||t.anchorOffset!=l)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!J1(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function pM(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,s=t.nodeName=="IMG";s?e.collapse(t.parentNode,$t(t)+1):e.collapse(t,0),!s&&!n.state.selection.visible&&un&&hs<=11&&(t.disabled=!0,t.disabled=!1)}function F1(n,e){if(e instanceof xe){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Hb(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Hb(n)}function Hb(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function xp(n,e,t,s){return n.someProp("createSelectionBetween",l=>l(n,e,t))||ke.between(e,t,s)}function Ub(n){return n.editable&&!n.hasFocus()?!1:X1(n)}function X1(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function mM(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return ei(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Ih(n,e){let{$anchor:t,$head:s}=n.selection,l=e>0?t.max(s):t.min(s),o=l.parent.inlineContent?l.depth?n.doc.resolve(e>0?l.after():l.before()):null:l;return o&&De.findFrom(o,e)}function rs(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Ib(n,e,t){let s=n.state.selection;if(s instanceof ke)if(t.indexOf("s")>-1){let{$head:l}=s,o=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let c=n.state.doc.resolve(l.pos+o.nodeSize*(e<0?-1:1));return rs(n,new ke(s.$anchor,c))}else if(s.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let l=Ih(n.state,e);return l&&l instanceof xe?rs(n,l):!1}else if(!(Ln&&t.indexOf("m")>-1)){let l=s.$head,o=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter,c;if(!o||o.isText)return!1;let f=e<0?l.pos-o.nodeSize:l.pos;return o.isAtom||(c=n.docView.descAt(f))&&!c.contentDOM?xe.isSelectable(o)?rs(n,new xe(e<0?n.state.doc.resolve(l.pos-o.nodeSize):l)):_o?rs(n,new ke(n.state.doc.resolve(e<0?f:f+o.nodeSize))):!1:!1}}else return!1;else{if(s instanceof xe&&s.node.isInline)return rs(n,new ke(e>0?s.$to:s.$from));{let l=Ih(n.state,e);return l?rs(n,l):!1}}}function Mc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function mo(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Yi(n,e){return e<0?gM(n):yM(n)}function gM(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let l,o,c=!1;for(Bn&&t.nodeType==1&&s<Mc(t)&&mo(t.childNodes[s],-1)&&(c=!0);;)if(s>0){if(t.nodeType!=1)break;{let f=t.childNodes[s-1];if(mo(f,-1))l=t,o=--s;else if(f.nodeType==3)t=f,s=t.nodeValue.length;else break}}else{if(Q1(t))break;{let f=t.previousSibling;for(;f&&mo(f,-1);)l=t.parentNode,o=$t(f),f=f.previousSibling;if(f)t=f,s=Mc(t);else{if(t=t.parentNode,t==n.dom)break;s=0}}}c?Vh(n,t,s):l&&Vh(n,l,o)}function yM(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let l=Mc(t),o,c;for(;;)if(s<l){if(t.nodeType!=1)break;let f=t.childNodes[s];if(mo(f,1))o=t,c=++s;else break}else{if(Q1(t))break;{let f=t.nextSibling;for(;f&&mo(f,1);)o=f.parentNode,c=$t(f)+1,f=f.nextSibling;if(f)t=f,s=0,l=Mc(t);else{if(t=t.parentNode,t==n.dom)break;s=l=0}}}o&&Vh(n,o,c)}function Q1(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function bM(n,e){for(;n&&e==n.childNodes.length&&!Lo(n);)e=$t(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function xM(n,e){for(;n&&!e&&!Lo(n);)e=$t(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Vh(n,e,t){if(e.nodeType!=3){let o,c;(c=bM(e,t))?(e=c,t=0):(o=xM(e,t))&&(e=o,t=o.nodeValue.length)}let s=n.domSelection();if(!s)return;if(pu(s)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),s.removeAllRanges(),s.addRange(o)}else s.extend&&s.extend(e,t);n.domObserver.setCurSelection();let{state:l}=n;setTimeout(()=>{n.state==l&&Mr(n)},50)}function Vb(n,e){let t=n.state.doc.resolve(e);if(!(Yt||_1)&&t.parent.inlineContent){let l=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),c=(o.top+o.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(o.left-l.left)>1)return o.left<l.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),c=(o.top+o.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(o.left-l.left)>1)return o.left>l.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function qb(n,e,t){let s=n.state.selection;if(s instanceof ke&&!s.empty||t.indexOf("s")>-1||Ln&&t.indexOf("m")>-1)return!1;let{$from:l,$to:o}=s;if(!l.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let c=Ih(n.state,e);if(c&&c instanceof xe)return rs(n,c)}if(!l.parent.inlineContent){let c=e<0?l:o,f=s instanceof Sn?De.near(c,e):De.findFrom(c,e);return f?rs(n,f):!1}return!1}function $b(n,e){if(!(n.state.selection instanceof ke))return!0;let{$head:t,$anchor:s,empty:l}=n.state.selection;if(!t.sameParent(s))return!0;if(!l)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let c=n.state.tr;return e<0?c.delete(t.pos-o.nodeSize,t.pos):c.delete(t.pos,t.pos+o.nodeSize),n.dispatch(c),!0}return!1}function Gb(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function vM(n){if(!Jt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let s=e.firstChild;Gb(n,s,"true"),setTimeout(()=>Gb(n,s,"false"),20)}return!1}function SM(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function kM(n,e){let t=e.keyCode,s=SM(e);if(t==8||Ln&&t==72&&s=="c")return $b(n,-1)||Yi(n,-1);if(t==46&&!e.shiftKey||Ln&&t==68&&s=="c")return $b(n,1)||Yi(n,1);if(t==13||t==27)return!0;if(t==37||Ln&&t==66&&s=="c"){let l=t==37?Vb(n,n.state.selection.from)=="ltr"?-1:1:-1;return Ib(n,l,s)||Yi(n,l)}else if(t==39||Ln&&t==70&&s=="c"){let l=t==39?Vb(n,n.state.selection.from)=="ltr"?1:-1:1;return Ib(n,l,s)||Yi(n,l)}else{if(t==38||Ln&&t==80&&s=="c")return qb(n,-1,s)||Yi(n,-1);if(t==40||Ln&&t==78&&s=="c")return vM(n)||qb(n,1,s)||Yi(n,1);if(s==(Ln?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function vp(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:s,openStart:l,openEnd:o}=e;for(;l>1&&o>1&&s.childCount==1&&s.firstChild.childCount==1;){l--,o--;let v=s.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),s=v.content}let c=n.someProp("clipboardSerializer")||ri.fromSchema(n.state.schema),f=rv(),d=f.createElement("div");d.appendChild(c.serializeFragment(s,{document:f}));let p=d.firstChild,g,y=0;for(;p&&p.nodeType==1&&(g=nv[p.nodeName.toLowerCase()]);){for(let v=g.length-1;v>=0;v--){let k=f.createElement(g[v]);for(;d.firstChild;)k.appendChild(d.firstChild);d.appendChild(k),y++}p=d.firstChild}p&&p.nodeType==1&&p.setAttribute("data-pm-slice",`${l} ${o}${y?` -${y}`:""} ${JSON.stringify(t)}`);let b=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:b,slice:e}}function Z1(n,e,t,s,l){let o=l.parent.type.spec.code,c,f;if(!t&&!e)return null;let d=!!e&&(s||o||!t);if(d){if(n.someProp("transformPastedText",b=>{e=b(e,o||s,n)}),o)return f=new ie(X.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",b=>{f=b(f,n,!0)}),f;let y=n.someProp("clipboardTextParser",b=>b(e,l,s,n));if(y)f=y;else{let b=l.marks(),{schema:v}=n.state,k=ri.fromSchema(v);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let C=c.appendChild(document.createElement("p"));E&&C.appendChild(k.serializeNode(v.text(E,b)))})}}else n.someProp("transformPastedHTML",y=>{t=y(t,n)}),c=MM(t),_o&&wM(c);let p=c&&c.querySelector("[data-pm-slice]"),g=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let y=+g[3];y>0;y--){let b=c.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;c=b}if(f||(f=(n.someProp("clipboardParser")||n.someProp("domParser")||ds.fromSchema(n.state.schema)).parseSlice(c,{preserveWhitespace:!!(d||g),context:l,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!TM.test(b.parentNode.nodeName)?{ignore:!0}:null}})),g)f=NM(Yb(f,+g[1],+g[2]),g[4]);else if(f=ie.maxOpen(EM(f.content,l),!0),f.openStart||f.openEnd){let y=0,b=0;for(let v=f.content.firstChild;y<f.openStart&&!v.type.spec.isolating;y++,v=v.firstChild);for(let v=f.content.lastChild;b<f.openEnd&&!v.type.spec.isolating;b++,v=v.lastChild);f=Yb(f,y,b)}return n.someProp("transformPasted",y=>{f=y(f,n,d)}),f}const TM=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function EM(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let l=e.node(t).contentMatchAt(e.index(t)),o,c=[];if(n.forEach(f=>{if(!c)return;let d=l.findWrapping(f.type),p;if(!d)return c=null;if(p=c.length&&o.length&&ev(d,o,f,c[c.length-1],0))c[c.length-1]=p;else{c.length&&(c[c.length-1]=tv(c[c.length-1],o.length));let g=W1(f,d);c.push(g),l=l.matchType(g.type),o=d}}),c)return X.from(c)}return n}function W1(n,e,t=0){for(let s=e.length-1;s>=t;s--)n=e[s].create(null,X.from(n));return n}function ev(n,e,t,s,l){if(l<n.length&&l<e.length&&n[l]==e[l]){let o=ev(n,e,t,s.lastChild,l+1);if(o)return s.copy(s.content.replaceChild(s.childCount-1,o));if(s.contentMatchAt(s.childCount).matchType(l==n.length-1?t.type:n[l+1]))return s.copy(s.content.append(X.from(W1(t,n,l+1))))}}function tv(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,tv(n.lastChild,e-1)),s=n.contentMatchAt(n.childCount).fillBefore(X.empty,!0);return n.copy(t.append(s))}function qh(n,e,t,s,l,o){let c=e<0?n.firstChild:n.lastChild,f=c.content;return n.childCount>1&&(o=0),l<s-1&&(f=qh(f,e,t,s,l+1,o)),l>=t&&(f=e<0?c.contentMatchAt(0).fillBefore(f,o<=l).append(f):f.append(c.contentMatchAt(c.childCount).fillBefore(X.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,c.copy(f))}function Yb(n,e,t){return e<n.openStart&&(n=new ie(qh(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new ie(qh(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const nv={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Kb=null;function rv(){return Kb||(Kb=document.implementation.createHTMLDocument("title"))}let oh=null;function CM(n){let e=window.trustedTypes;return e?(oh||(oh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),oh.createHTML(n)):n}function MM(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=rv().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(n),l;if((l=s&&nv[s[1].toLowerCase()])&&(n=l.map(o=>"<"+o+">").join("")+n+l.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=CM(n),l)for(let o=0;o<l.length;o++)t=t.querySelector(l[o])||t;return t}function wM(n){let e=n.querySelectorAll(Yt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let s=e[t];s.childNodes.length==1&&s.textContent==""&&s.parentNode&&s.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),s)}}function NM(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,s;try{s=JSON.parse(e)}catch{return n}let{content:l,openStart:o,openEnd:c}=n;for(let f=s.length-2;f>=0;f-=2){let d=t.nodes[s[f]];if(!d||d.hasRequiredAttrs())break;l=X.from(d.create(s[f+1],l)),o++,c++}return new ie(l,o,c)}const Wt={},en={},AM={touchstart:!0,touchmove:!0};class OM{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function DM(n){for(let e in Wt){let t=Wt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=s=>{RM(n,s)&&!Sp(n,s)&&(n.editable||!(s.type in en))&&t(n,s)},AM[e]?{passive:!0}:void 0)}Jt&&n.dom.addEventListener("input",()=>null),$h(n)}function fs(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function jM(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function $h(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=s=>Sp(n,s))})}function Sp(n,e){return n.someProp("handleDOMEvents",t=>{let s=t[e.type];return s?s(n,e)||e.defaultPrevented:!1})}function RM(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function zM(n,e){!Sp(n,e)&&Wt[e.type]&&(n.editable||!(e.type in en))&&Wt[e.type](n,e)}en.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!iv(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Er&&Yt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),rl&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let s=Date.now();n.input.lastIOSEnter=s,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==s&&(n.someProp("handleKeyDown",l=>l(n,qs(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",s=>s(n,t))||kM(n,t)?t.preventDefault():fs(n,"key")};en.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};en.keypress=(n,e)=>{let t=e;if(iv(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Ln&&t.metaKey)return;if(n.someProp("handleKeyPress",l=>l(n,t))){t.preventDefault();return}let s=n.state.selection;if(!(s instanceof ke)||!s.$from.sameParent(s.$to)){let l=String.fromCharCode(t.charCode),o=()=>n.state.tr.insertText(l).scrollIntoView();!/[\r\n]/.test(l)&&!n.someProp("handleTextInput",c=>c(n,s.$from.pos,s.$to.pos,l,o))&&n.dispatch(o()),t.preventDefault()}};function gu(n){return{left:n.clientX,top:n.clientY}}function LM(n,e){let t=e.x-n.clientX,s=e.y-n.clientY;return t*t+s*s<100}function kp(n,e,t,s,l){if(s==-1)return!1;let o=n.state.doc.resolve(s);for(let c=o.depth+1;c>0;c--)if(n.someProp(e,f=>c>o.depth?f(n,t,o.nodeAfter,o.before(c),l,!0):f(n,t,o.node(c),o.before(c),l,!1)))return!0;return!1}function Wi(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let s=n.state.tr.setSelection(e);s.setMeta("pointer",!0),n.dispatch(s)}function _M(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),s=t.nodeAfter;return s&&s.isAtom&&xe.isSelectable(s)?(Wi(n,new xe(t)),!0):!1}function BM(n,e){if(e==-1)return!1;let t=n.state.selection,s,l;t instanceof xe&&(s=t.node);let o=n.state.doc.resolve(e);for(let c=o.depth+1;c>0;c--){let f=c>o.depth?o.nodeAfter:o.node(c);if(xe.isSelectable(f)){s&&t.$from.depth>0&&c>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?l=o.before(t.$from.depth):l=o.before(c);break}}return l!=null?(Wi(n,xe.create(n.state.doc,l)),!0):!1}function HM(n,e,t,s,l){return kp(n,"handleClickOn",e,t,s)||n.someProp("handleClick",o=>o(n,e,s))||(l?BM(n,t):_M(n,t))}function UM(n,e,t,s){return kp(n,"handleDoubleClickOn",e,t,s)||n.someProp("handleDoubleClick",l=>l(n,e,s))}function IM(n,e,t,s){return kp(n,"handleTripleClickOn",e,t,s)||n.someProp("handleTripleClick",l=>l(n,e,s))||VM(n,t,s)}function VM(n,e,t){if(t.button!=0)return!1;let s=n.state.doc;if(e==-1)return s.inlineContent?(Wi(n,ke.create(s,0,s.content.size)),!0):!1;let l=s.resolve(e);for(let o=l.depth+1;o>0;o--){let c=o>l.depth?l.nodeAfter:l.node(o),f=l.before(o);if(c.inlineContent)Wi(n,ke.create(s,f+1,f+1+c.content.size));else if(xe.isSelectable(c))Wi(n,xe.create(s,f));else continue;return!0}}function Tp(n){return wc(n)}const sv=Ln?"metaKey":"ctrlKey";Wt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let s=Tp(n),l=Date.now(),o="singleClick";l-n.input.lastClick.time<500&&LM(t,n.input.lastClick)&&!t[sv]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:l,x:t.clientX,y:t.clientY,type:o,button:t.button};let c=n.posAtCoords(gu(t));c&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new qM(n,c,t,!!s)):(o=="doubleClick"?UM:IM)(n,c.pos,c.inside,t)?t.preventDefault():fs(n,"pointer"))};class qM{constructor(e,t,s,l){this.view=e,this.pos=t,this.event=s,this.flushed=l,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!s[sv],this.allowDefault=s.shiftKey;let o,c;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),c=t.inside;else{let g=e.state.doc.resolve(t.pos);o=g.parent,c=g.depth?g.before():0}const f=l?null:s.target,d=f?e.docView.nearestDesc(f,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:p}=e.state;(s.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||p instanceof xe&&p.from<=c&&p.to>c)&&(this.mightDrag={node:o,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Bn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),fs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Mr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(gu(e))),this.updateAllowDefault(e),this.allowDefault||!t?fs(this.view,"pointer"):HM(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Jt&&this.mightDrag&&!this.mightDrag.node.isAtom||Yt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Wi(this.view,De.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):fs(this.view,"pointer")}move(e){this.updateAllowDefault(e),fs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Wt.touchstart=n=>{n.input.lastTouch=Date.now(),Tp(n),fs(n,"pointer")};Wt.touchmove=n=>{n.input.lastTouch=Date.now(),fs(n,"pointer")};Wt.contextmenu=n=>Tp(n);function iv(n,e){return n.composing?!0:Jt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const $M=Er?5e3:-1;en.compositionstart=en.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof ke&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(s=>s.type.spec.inclusive===!1)||Yt&&_1&&GM(n)))n.markCursor=n.state.storedMarks||t.marks(),wc(n,!0),n.markCursor=null;else if(wc(n,!e.selection.empty),Bn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let s=n.domSelectionRange();for(let l=s.focusNode,o=s.focusOffset;l&&l.nodeType==1&&o!=0;){let c=o<0?l.lastChild:l.childNodes[o-1];if(!c)break;if(c.nodeType==3){let f=n.domSelection();f&&f.collapse(c,c.nodeValue.length);break}else l=c,o=-1}}n.input.composing=!0}lv(n,$M)};function GM(n){let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(!e||e.nodeType!=1||t>=e.childNodes.length)return!1;let s=e.childNodes[t];return s.nodeType==1&&s.contentEditable=="false"}en.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.badSafariComposition?n.domObserver.forceFlush():n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,lv(n,20))};function lv(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>wc(n),e))}function ov(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=KM());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function YM(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=BC(e.focusNode,e.focusOffset),s=HC(e.focusNode,e.focusOffset);if(t&&s&&t!=s){let l=s.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||s==o)return o;if(!l||!l.isText(s.nodeValue))return s;if(n.input.compositionNode==s){let c=t.pmViewDesc;if(!(!c||!c.isText(t.nodeValue)))return s}}return t||s}function KM(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function wc(n,e=!1){if(!(Er&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),ov(n),e||n.docView&&n.docView.dirty){let t=bp(n),s=n.state.selection;return t&&!t.eq(s)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!s.$from.node(s.$from.sharedDepth(s.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function PM(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let s=getSelection(),l=document.createRange();l.selectNodeContents(e),n.dom.blur(),s.removeAllRanges(),s.addRange(l),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Mo=un&&hs<15||rl&&qC<604;Wt.copy=en.cut=(n,e)=>{let t=e,s=n.state.selection,l=t.type=="cut";if(s.empty)return;let o=Mo?null:t.clipboardData,c=s.content(),{dom:f,text:d}=vp(n,c);o?(t.preventDefault(),o.clearData(),o.setData("text/html",f.innerHTML),o.setData("text/plain",d)):PM(n,f),l&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function JM(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function FM(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,s=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(s.contentEditable="true"),s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus();let l=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),s.parentNode&&s.parentNode.removeChild(s),t?wo(n,s.value,null,l,e):wo(n,s.textContent,s.innerHTML,l,e)},50)}function wo(n,e,t,s,l){let o=Z1(n,e,t,s,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,l,o||ie.empty)))return!0;if(!o)return!1;let c=JM(o),f=c?n.state.tr.replaceSelectionWith(c,s):n.state.tr.replaceSelection(o);return n.dispatch(f.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function av(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}en.paste=(n,e)=>{let t=e;if(n.composing&&!Er)return;let s=Mo?null:t.clipboardData,l=n.input.shiftKey&&n.input.lastKeyCode!=45;s&&wo(n,av(s),s.getData("text/html"),l,t)?t.preventDefault():FM(n,t)};class cv{constructor(e,t,s){this.slice=e,this.move=t,this.node=s}}const XM=Ln?"altKey":"ctrlKey";function uv(n,e){let t=n.someProp("dragCopies",s=>!s(e));return t??!e[XM]}Wt.dragstart=(n,e)=>{let t=e,s=n.input.mouseDown;if(s&&s.done(),!t.dataTransfer)return;let l=n.state.selection,o=l.empty?null:n.posAtCoords(gu(t)),c;if(!(o&&o.pos>=l.from&&o.pos<=(l instanceof xe?l.to-1:l.to))){if(s&&s.mightDrag)c=xe.create(n.state.doc,s.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=n.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=n.docView&&(c=xe.create(n.state.doc,y.posBefore))}}let f=(c||n.state.selection).content(),{dom:d,text:p,slice:g}=vp(n,f);(!t.dataTransfer.files.length||!Yt||L1>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Mo?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",Mo||t.dataTransfer.setData("text/plain",p),n.dragging=new cv(g,uv(n,t),c)};Wt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};en.dragover=en.dragenter=(n,e)=>e.preventDefault();en.drop=(n,e)=>{try{QM(n,e,n.dragging)}finally{n.dragging=null}};function QM(n,e,t){if(!e.dataTransfer)return;let s=n.posAtCoords(gu(e));if(!s)return;let l=n.state.doc.resolve(s.pos),o=t&&t.slice;o?n.someProp("transformPasted",v=>{o=v(o,n,!1)}):o=Z1(n,av(e.dataTransfer),Mo?null:e.dataTransfer.getData("text/html"),!1,l);let c=!!(t&&uv(n,e));if(n.someProp("handleDrop",v=>v(n,e,o||ie.empty,c))){e.preventDefault();return}if(!o)return;e.preventDefault();let f=o?p1(n.state.doc,l.pos,o):l.pos;f==null&&(f=l.pos);let d=n.state.tr;if(c){let{node:v}=t;v?v.replace(d):d.deleteSelection()}let p=d.mapping.map(f),g=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,y=d.doc;if(g?d.replaceRangeWith(p,p,o.content.firstChild):d.replaceRange(p,p,o),d.doc.eq(y))return;let b=d.doc.resolve(p);if(g&&xe.isSelectable(o.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new xe(b));else{let v=d.mapping.map(f);d.mapping.maps[d.mapping.maps.length-1].forEach((k,E,C,M)=>v=M),d.setSelection(xp(n,b,d.doc.resolve(v)))}n.focus(),n.dispatch(d.setMeta("uiEvent","drop"))}Wt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Mr(n)},20))};Wt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Wt.beforeinput=(n,e)=>{if(Yt&&Er&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:s}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=s||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,qs(8,"Backspace")))))return;let{$cursor:l}=n.state.selection;l&&l.pos>0&&n.dispatch(n.state.tr.delete(l.pos-1,l.pos).scrollIntoView())},50)}};for(let n in en)Wt[n]=en[n];function No(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Nc{constructor(e,t){this.toDOM=e,this.spec=t||Fs,this.side=this.spec.side||0}map(e,t,s,l){let{pos:o,deleted:c}=e.mapResult(t.from+l,this.side<0?-1:1);return c?null:new Zt(o-s,o-s,this)}valid(){return!0}eq(e){return this==e||e instanceof Nc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&No(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ms{constructor(e,t){this.attrs=e,this.spec=t||Fs}map(e,t,s,l){let o=e.map(t.from+l,this.spec.inclusiveStart?-1:1)-s,c=e.map(t.to+l,this.spec.inclusiveEnd?1:-1)-s;return o>=c?null:new Zt(o,c,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ms&&No(this.attrs,e.attrs)&&No(this.spec,e.spec)}static is(e){return e.type instanceof ms}destroy(){}}class Ep{constructor(e,t){this.attrs=e,this.spec=t||Fs}map(e,t,s,l){let o=e.mapResult(t.from+l,1);if(o.deleted)return null;let c=e.mapResult(t.to+l,-1);return c.deleted||c.pos<=o.pos?null:new Zt(o.pos-s,c.pos-s,this)}valid(e,t){let{index:s,offset:l}=e.content.findIndex(t.from),o;return l==t.from&&!(o=e.child(s)).isText&&l+o.nodeSize==t.to}eq(e){return this==e||e instanceof Ep&&No(this.attrs,e.attrs)&&No(this.spec,e.spec)}destroy(){}}class Zt{constructor(e,t,s){this.from=e,this.to=t,this.type=s}copy(e,t){return new Zt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,s){return this.type.map(e,this,t,s)}static widget(e,t,s){return new Zt(e,e,new Nc(t,s))}static inline(e,t,s,l){return new Zt(e,t,new ms(s,l))}static node(e,t,s,l){return new Zt(e,t,new Ep(s,l))}get spec(){return this.type.spec}get inline(){return this.type instanceof ms}get widget(){return this.type instanceof Nc}}const Pi=[],Fs={};class dt{constructor(e,t){this.local=e.length?e:Pi,this.children=t.length?t:Pi}static create(e,t){return t.length?Ac(t,e,0,Fs):Pt}find(e,t,s){let l=[];return this.findInner(e??0,t??1e9,l,0,s),l}findInner(e,t,s,l,o){for(let c=0;c<this.local.length;c++){let f=this.local[c];f.from<=t&&f.to>=e&&(!o||o(f.spec))&&s.push(f.copy(f.from+l,f.to+l))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<t&&this.children[c+1]>e){let f=this.children[c]+1;this.children[c+2].findInner(e-f,t-f,s,l+f,o)}}map(e,t,s){return this==Pt||e.maps.length==0?this:this.mapInner(e,t,0,0,s||Fs)}mapInner(e,t,s,l,o){let c;for(let f=0;f<this.local.length;f++){let d=this.local[f].map(e,s,l);d&&d.type.valid(t,d)?(c||(c=[])).push(d):o.onRemove&&o.onRemove(this.local[f].spec)}return this.children.length?ZM(this.children,c||[],e,t,s,l,o):c?new dt(c.sort(Xs),Pi):Pt}add(e,t){return t.length?this==Pt?dt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,s){let l,o=0;e.forEach((f,d)=>{let p=d+s,g;if(g=dv(t,f,p)){for(l||(l=this.children.slice());o<l.length&&l[o]<d;)o+=3;l[o]==d?l[o+2]=l[o+2].addInner(f,g,p+1):l.splice(o,0,d,d+f.nodeSize,Ac(g,f,p+1,Fs)),o+=3}});let c=fv(o?hv(t):t,-s);for(let f=0;f<c.length;f++)c[f].type.valid(e,c[f])||c.splice(f--,1);return new dt(c.length?this.local.concat(c).sort(Xs):this.local,l||this.children)}remove(e){return e.length==0||this==Pt?this:this.removeInner(e,0)}removeInner(e,t){let s=this.children,l=this.local;for(let o=0;o<s.length;o+=3){let c,f=s[o]+t,d=s[o+1]+t;for(let g=0,y;g<e.length;g++)(y=e[g])&&y.from>f&&y.to<d&&(e[g]=null,(c||(c=[])).push(y));if(!c)continue;s==this.children&&(s=this.children.slice());let p=s[o+2].removeInner(c,f+1);p!=Pt?s[o+2]=p:(s.splice(o,3),o-=3)}if(l.length){for(let o=0,c;o<e.length;o++)if(c=e[o])for(let f=0;f<l.length;f++)l[f].eq(c,t)&&(l==this.local&&(l=this.local.slice()),l.splice(f--,1))}return s==this.children&&l==this.local?this:l.length||s.length?new dt(l,s):Pt}forChild(e,t){if(this==Pt)return this;if(t.isLeaf)return dt.empty;let s,l;for(let f=0;f<this.children.length;f+=3)if(this.children[f]>=e){this.children[f]==e&&(s=this.children[f+2]);break}let o=e+1,c=o+t.content.size;for(let f=0;f<this.local.length;f++){let d=this.local[f];if(d.from<c&&d.to>o&&d.type instanceof ms){let p=Math.max(o,d.from)-o,g=Math.min(c,d.to)-o;p<g&&(l||(l=[])).push(d.copy(p,g))}}if(l){let f=new dt(l.sort(Xs),Pi);return s?new ls([f,s]):f}return s||Pt}eq(e){if(this==e)return!0;if(!(e instanceof dt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Cp(this.localsInner(e))}localsInner(e){if(this==Pt)return Pi;if(e.inlineContent||!this.local.some(ms.is))return this.local;let t=[];for(let s=0;s<this.local.length;s++)this.local[s].type instanceof ms||t.push(this.local[s]);return t}forEachSet(e){e(this)}}dt.empty=new dt([],[]);dt.removeOverlap=Cp;const Pt=dt.empty;class ls{constructor(e){this.members=e}map(e,t){const s=this.members.map(l=>l.map(e,t,Fs));return ls.from(s)}forChild(e,t){if(t.isLeaf)return dt.empty;let s=[];for(let l=0;l<this.members.length;l++){let o=this.members[l].forChild(e,t);o!=Pt&&(o instanceof ls?s=s.concat(o.members):s.push(o))}return ls.from(s)}eq(e){if(!(e instanceof ls)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,s=!0;for(let l=0;l<this.members.length;l++){let o=this.members[l].localsInner(e);if(o.length)if(!t)t=o;else{s&&(t=t.slice(),s=!1);for(let c=0;c<o.length;c++)t.push(o[c])}}return t?Cp(s?t:t.sort(Xs)):Pi}static from(e){switch(e.length){case 0:return Pt;case 1:return e[0];default:return new ls(e.every(t=>t instanceof dt)?e:e.reduce((t,s)=>t.concat(s instanceof dt?s:s.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function ZM(n,e,t,s,l,o,c){let f=n.slice();for(let p=0,g=o;p<t.maps.length;p++){let y=0;t.maps[p].forEach((b,v,k,E)=>{let C=E-k-(v-b);for(let M=0;M<f.length;M+=3){let L=f[M+1];if(L<0||b>L+g-y)continue;let V=f[M]+g-y;v>=V?f[M+1]=b<=V?-2:-1:b>=g&&C&&(f[M]+=C,f[M+1]+=C)}y+=C}),g=t.maps[p].map(g,-1)}let d=!1;for(let p=0;p<f.length;p+=3)if(f[p+1]<0){if(f[p+1]==-2){d=!0,f[p+1]=-1;continue}let g=t.map(n[p]+o),y=g-l;if(y<0||y>=s.content.size){d=!0;continue}let b=t.map(n[p+1]+o,-1),v=b-l,{index:k,offset:E}=s.content.findIndex(y),C=s.maybeChild(k);if(C&&E==y&&E+C.nodeSize==v){let M=f[p+2].mapInner(t,C,g+1,n[p]+o+1,c);M!=Pt?(f[p]=y,f[p+1]=v,f[p+2]=M):(f[p+1]=-2,d=!0)}else d=!0}if(d){let p=WM(f,n,e,t,l,o,c),g=Ac(p,s,0,c);e=g.local;for(let y=0;y<f.length;y+=3)f[y+1]<0&&(f.splice(y,3),y-=3);for(let y=0,b=0;y<g.children.length;y+=3){let v=g.children[y];for(;b<f.length&&f[b]<v;)b+=3;f.splice(b,0,g.children[y],g.children[y+1],g.children[y+2])}}return new dt(e.sort(Xs),f)}function fv(n,e){if(!e||!n.length)return n;let t=[];for(let s=0;s<n.length;s++){let l=n[s];t.push(new Zt(l.from+e,l.to+e,l.type))}return t}function WM(n,e,t,s,l,o,c){function f(d,p){for(let g=0;g<d.local.length;g++){let y=d.local[g].map(s,l,p);y?t.push(y):c.onRemove&&c.onRemove(d.local[g].spec)}for(let g=0;g<d.children.length;g+=3)f(d.children[g+2],d.children[g]+p+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&f(n[d+2],e[d]+o+1);return t}function dv(n,e,t){if(e.isLeaf)return null;let s=t+e.nodeSize,l=null;for(let o=0,c;o<n.length;o++)(c=n[o])&&c.from>t&&c.to<s&&((l||(l=[])).push(c),n[o]=null);return l}function hv(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Ac(n,e,t,s){let l=[],o=!1;e.forEach((f,d)=>{let p=dv(n,f,d+t);if(p){o=!0;let g=Ac(p,f,t+d+1,s);g!=Pt&&l.push(d,d+f.nodeSize,g)}});let c=fv(o?hv(n):n,-t).sort(Xs);for(let f=0;f<c.length;f++)c[f].type.valid(e,c[f])||(s.onRemove&&s.onRemove(c[f].spec),c.splice(f--,1));return c.length||l.length?new dt(c,l):Pt}function Xs(n,e){return n.from-e.from||n.to-e.to}function Cp(n){let e=n;for(let t=0;t<e.length-1;t++){let s=e[t];if(s.from!=s.to)for(let l=t+1;l<e.length;l++){let o=e[l];if(o.from==s.from){o.to!=s.to&&(e==n&&(e=n.slice()),e[l]=o.copy(o.from,s.to),Pb(e,l+1,o.copy(s.to,o.to)));continue}else{o.from<s.to&&(e==n&&(e=n.slice()),e[t]=s.copy(s.from,o.from),Pb(e,l,s.copy(o.from,s.to)));break}}}return e}function Pb(n,e,t){for(;e<n.length&&Xs(t,n[e])>0;)e++;n.splice(e,0,t)}function ah(n){let e=[];return n.someProp("decorations",t=>{let s=t(n.state);s&&s!=Pt&&e.push(s)}),n.cursorWrapper&&e.push(dt.create(n.state.doc,[n.cursorWrapper.deco])),ls.from(e)}const ew={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},tw=un&&hs<=11;class nw{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class rw{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new nw,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(s=>{for(let l=0;l<s.length;l++)this.queue.push(s[l]);un&&hs<=11&&s.some(l=>l.type=="childList"&&l.removedNodes.length||l.type=="characterData"&&l.oldValue.length>l.target.nodeValue.length)?this.flushSoon():Jt&&e.composing&&s.some(l=>l.type=="childList"&&l.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),tw&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,ew)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ub(this.view)){if(this.suppressingSelectionUpdates)return Mr(this.view);if(un&&hs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ei(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,s;for(let o=e.focusNode;o;o=nl(o))t.add(o);for(let o=e.anchorNode;o;o=nl(o))if(t.has(o)){s=o;break}let l=s&&this.view.docView.nearestDesc(s);if(l&&l.ignoreMutation({type:"selection",target:s.nodeType==3?s.parentNode:s}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let s=e.domSelectionRange(),l=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(s)&&Ub(e)&&!this.ignoreSelectionChange(s),o=-1,c=-1,f=!1,d=[];if(e.editable)for(let g=0;g<t.length;g++){let y=this.registerMutation(t[g],d);y&&(o=o<0?y.from:Math.min(y.from,o),c=c<0?y.to:Math.max(y.to,c),y.typeOver&&(f=!0))}if(d.some(g=>g.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let g of d)if(g.nodeName=="BR"&&g.parentNode){let y=g.nextSibling;y&&y.nodeType==1&&y.contentEditable=="false"&&g.parentNode.removeChild(g)}}else if(Bn&&d.length){let g=d.filter(y=>y.nodeName=="BR");if(g.length==2){let[y,b]=g;y.parentNode&&y.parentNode.parentNode==b.parentNode?b.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let b of g){let v=b.parentNode;v&&v.nodeName=="LI"&&(!y||lw(e,y)!=v)&&b.remove()}}}let p=null;o<0&&l&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&pu(s)&&(p=bp(e))&&p.eq(De.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Mr(e),this.currentSelection.set(s),e.scrollToSelection()):(o>-1||l)&&(o>-1&&(e.docView.markDirty(o,c),sw(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,ow(e,d)),this.handleDOMChange(o,c,f,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(s)||Mr(e),this.currentSelection.set(s))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let s=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(s==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!s||s.ignoreMutation(e))return null;if(e.type=="childList"){for(let g=0;g<e.addedNodes.length;g++){let y=e.addedNodes[g];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(s.contentDOM&&s.contentDOM!=s.dom&&!s.contentDOM.contains(e.target))return{from:s.posBefore,to:s.posAfter};let l=e.previousSibling,o=e.nextSibling;if(un&&hs<=11&&e.addedNodes.length)for(let g=0;g<e.addedNodes.length;g++){let{previousSibling:y,nextSibling:b}=e.addedNodes[g];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(l=y),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(o=b)}let c=l&&l.parentNode==e.target?$t(l)+1:0,f=s.localPosFromDOM(e.target,c,-1),d=o&&o.parentNode==e.target?$t(o):e.target.childNodes.length,p=s.localPosFromDOM(e.target,d,1);return{from:f,to:p}}else return e.type=="attributes"?{from:s.posAtStart-s.border,to:s.posAtEnd+s.border}:(this.lastChangedTextNode=e.target,{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Jb=new WeakMap,Fb=!1;function sw(n){if(!Jb.has(n)&&(Jb.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Bn,Fb)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Fb=!0}}function Xb(n,e){let t=e.startContainer,s=e.startOffset,l=e.endContainer,o=e.endOffset,c=n.domAtPos(n.state.selection.anchor);return ei(c.node,c.offset,l,o)&&([t,s,l,o]=[l,o,t,s]),{anchorNode:t,anchorOffset:s,focusNode:l,focusOffset:o}}function iw(n,e){if(e.getComposedRanges){let l=e.getComposedRanges(n.root)[0];if(l)return Xb(n,l)}let t;function s(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",s,!0),t?Xb(n,t):null}function lw(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let s=n.docView.nearestDesc(t,!0);if(s&&s.node.isBlock)return t}return null}function ow(n,e){var t;let{focusNode:s,focusOffset:l}=n.domSelectionRange();for(let o of e)if(((t=o.parentNode)===null||t===void 0?void 0:t.nodeName)=="TR"){let c=o.nextSibling;for(;c&&c.nodeName!="TD"&&c.nodeName!="TH";)c=c.nextSibling;if(c){let f=c;for(;;){let d=f.firstChild;if(!d||d.nodeType!=1||d.contentEditable=="false"||/^(BR|IMG)$/.test(d.nodeName))break;f=d}f.insertBefore(o,f.firstChild),s==o&&n.domSelection().collapse(o,l)}else o.parentNode.removeChild(o)}}function aw(n,e,t){let{node:s,fromOffset:l,toOffset:o,from:c,to:f}=n.docView.parseRange(e,t),d=n.domSelectionRange(),p,g=d.anchorNode;if(g&&n.dom.contains(g.nodeType==1?g:g.parentNode)&&(p=[{node:g,offset:d.anchorOffset}],pu(d)||p.push({node:d.focusNode,offset:d.focusOffset})),Yt&&n.input.lastKeyCode===8)for(let C=o;C>l;C--){let M=s.childNodes[C-1],L=M.pmViewDesc;if(M.nodeName=="BR"&&!L){o=C;break}if(!L||L.size)break}let y=n.state.doc,b=n.someProp("domParser")||ds.fromSchema(n.state.schema),v=y.resolve(c),k=null,E=b.parse(s,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:l,to:o,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:p,ruleFromNode:cw,context:v});if(p&&p[0].pos!=null){let C=p[0].pos,M=p[1]&&p[1].pos;M==null&&(M=C),k={anchor:C+c,head:M+c}}return{doc:E,sel:k,from:c,to:f}}function cw(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Jt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Jt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const uw=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function fw(n,e,t,s,l){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let I=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,se=bp(n,I);if(se&&!n.state.selection.eq(se)){if(Yt&&Er&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",je=>je(n,qs(13,"Enter"))))return;let ue=n.state.tr.setSelection(se);I=="pointer"?ue.setMeta("pointer",!0):I=="key"&&ue.scrollIntoView(),o&&ue.setMeta("composition",o),n.dispatch(ue)}return}let c=n.state.doc.resolve(e),f=c.sharedDepth(t);e=c.before(f+1),t=n.state.doc.resolve(t).after(f+1);let d=n.state.selection,p=aw(n,e,t),g=n.state.doc,y=g.slice(p.from,p.to),b,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(b=n.state.selection.to,v="end"):(b=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let k=pw(y.content,p.doc.content,p.from,b,v);if(k&&n.input.domChangeCount++,(rl&&n.input.lastIOSEnter>Date.now()-225||Er)&&l.some(I=>I.nodeType==1&&!uw.test(I.nodeName))&&(!k||k.endA>=k.endB)&&n.someProp("handleKeyDown",I=>I(n,qs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!k)if(s&&d instanceof ke&&!d.empty&&d.$head.sameParent(d.$anchor)&&!n.composing&&!(p.sel&&p.sel.anchor!=p.sel.head))k={start:d.from,endA:d.to,endB:d.to};else{if(p.sel){let I=Qb(n,n.state.doc,p.sel);if(I&&!I.eq(n.state.selection)){let se=n.state.tr.setSelection(I);o&&se.setMeta("composition",o),n.dispatch(se)}}return}n.state.selection.from<n.state.selection.to&&k.start==k.endB&&n.state.selection instanceof ke&&(k.start>n.state.selection.from&&k.start<=n.state.selection.from+2&&n.state.selection.from>=p.from?k.start=n.state.selection.from:k.endA<n.state.selection.to&&k.endA>=n.state.selection.to-2&&n.state.selection.to<=p.to&&(k.endB+=n.state.selection.to-k.endA,k.endA=n.state.selection.to)),un&&hs<=11&&k.endB==k.start+1&&k.endA==k.start&&k.start>p.from&&p.doc.textBetween(k.start-p.from-1,k.start-p.from+1)==" "&&(k.start--,k.endA--,k.endB--);let E=p.doc.resolveNoCache(k.start-p.from),C=p.doc.resolveNoCache(k.endB-p.from),M=g.resolve(k.start),L=E.sameParent(C)&&E.parent.inlineContent&&M.end()>=k.endA;if((rl&&n.input.lastIOSEnter>Date.now()-225&&(!L||l.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!L&&E.pos<p.doc.content.size&&(!E.sameParent(C)||!E.parent.inlineContent)&&E.pos<C.pos&&!/\S/.test(p.doc.textBetween(E.pos,C.pos,"","")))&&n.someProp("handleKeyDown",I=>I(n,qs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>k.start&&hw(g,k.start,k.endA,E,C)&&n.someProp("handleKeyDown",I=>I(n,qs(8,"Backspace")))){Er&&Yt&&n.domObserver.suppressSelectionUpdates();return}Yt&&k.endB==k.start&&(n.input.lastChromeDelete=Date.now()),Er&&!L&&E.start()!=C.start()&&C.parentOffset==0&&E.depth==C.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==k.endA&&(k.endB-=2,C=p.doc.resolveNoCache(k.endB-p.from),setTimeout(()=>{n.someProp("handleKeyDown",function(I){return I(n,qs(13,"Enter"))})},20));let V=k.start,W=k.endA,$=I=>{let se=I||n.state.tr.replace(V,W,p.doc.slice(k.start-p.from,k.endB-p.from));if(p.sel){let ue=Qb(n,se.doc,p.sel);ue&&!(Yt&&n.composing&&ue.empty&&(k.start!=k.endB||n.input.lastChromeDelete<Date.now()-100)&&(ue.head==V||ue.head==se.mapping.map(W)-1)||un&&ue.empty&&ue.head==V)&&se.setSelection(ue)}return o&&se.setMeta("composition",o),se.scrollIntoView()},Y;if(L)if(E.pos==C.pos){un&&hs<=11&&E.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Mr(n),20));let I=$(n.state.tr.delete(V,W)),se=g.resolve(k.start).marksAcross(g.resolve(k.endA));se&&I.ensureMarks(se),n.dispatch(I)}else if(k.endA==k.endB&&(Y=dw(E.parent.content.cut(E.parentOffset,C.parentOffset),M.parent.content.cut(M.parentOffset,k.endA-M.start())))){let I=$(n.state.tr);Y.type=="add"?I.addMark(V,W,Y.mark):I.removeMark(V,W,Y.mark),n.dispatch(I)}else if(E.parent.child(E.index()).isText&&E.index()==C.index()-(C.textOffset?0:1)){let I=E.parent.textBetween(E.parentOffset,C.parentOffset),se=()=>$(n.state.tr.insertText(I,V,W));n.someProp("handleTextInput",ue=>ue(n,V,W,I,se))||n.dispatch(se())}else n.dispatch($());else n.dispatch($())}function Qb(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:xp(n,e.resolve(t.anchor),e.resolve(t.head))}function dw(n,e){let t=n.firstChild.marks,s=e.firstChild.marks,l=t,o=s,c,f,d;for(let g=0;g<s.length;g++)l=s[g].removeFromSet(l);for(let g=0;g<t.length;g++)o=t[g].removeFromSet(o);if(l.length==1&&o.length==0)f=l[0],c="add",d=g=>g.mark(f.addToSet(g.marks));else if(l.length==0&&o.length==1)f=o[0],c="remove",d=g=>g.mark(f.removeFromSet(g.marks));else return null;let p=[];for(let g=0;g<e.childCount;g++)p.push(d(e.child(g)));if(X.from(p).eq(n))return{mark:f,type:c}}function hw(n,e,t,s,l){if(t-e<=l.pos-s.pos||ch(s,!0,!1)<l.pos)return!1;let o=n.resolve(e);if(!s.parent.isTextblock){let f=o.nodeAfter;return f!=null&&t==e+f.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let c=n.resolve(ch(o,!0,!0));return!c.parent.isTextblock||c.pos>t||ch(c,!0,!1)<t?!1:s.parent.content.cut(s.parentOffset).eq(c.parent.content)}function ch(n,e,t){let s=n.depth,l=e?n.end():n.pos;for(;s>0&&(e||n.indexAfter(s)==n.node(s).childCount);)s--,l++,e=!1;if(t){let o=n.node(s).maybeChild(n.indexAfter(s));for(;o&&!o.isLeaf;)o=o.firstChild,l++}return l}function pw(n,e,t,s,l){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:c,b:f}=n.findDiffEnd(e,t+n.size,t+e.size);if(l=="end"){let d=Math.max(0,o-Math.min(c,f));s-=c+d-o}if(c<o&&n.size<e.size){let d=s<=o&&s>=c?o-s:0;o-=d,o&&o<e.size&&Zb(e.textBetween(o-1,o+1))&&(o+=d?1:-1),f=o+(f-c),c=o}else if(f<o){let d=s<=o&&s>=f?o-s:0;o-=d,o&&o<n.size&&Zb(n.textBetween(o-1,o+1))&&(o+=d?1:-1),c=o+(c-f),f=o}return{start:o,endA:c,endB:f}}function Zb(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class pv{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new OM,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(rx),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=tx(this),ex(this),this.nodeViews=nx(this),this.docView=Rb(this.state.doc,Wb(this),ah(this),this.dom,this),this.domObserver=new rw(this,(s,l,o,c)=>fw(this,s,l,o,c)),this.domObserver.start(),DM(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&$h(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(rx),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let s in this._props)t[s]=this._props[s];t.state=this.state;for(let s in e)t[s]=e[s];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var s;let l=this.state,o=!1,c=!1;e.storedMarks&&this.composing&&(ov(this),c=!0),this.state=e;let f=l.plugins!=e.plugins||this._props.plugins!=t.plugins;if(f||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=nx(this);gw(v,this.nodeViews)&&(this.nodeViews=v,o=!0)}(f||t.handleDOMEvents!=this._props.handleDOMEvents)&&$h(this),this.editable=tx(this),ex(this);let d=ah(this),p=Wb(this),g=l.plugins!=e.plugins&&!l.doc.eq(e.doc)?"reset":e.scrollToSelection>l.scrollToSelection?"to selection":"preserve",y=o||!this.docView.matchesNode(e.doc,p,d);(y||!e.selection.eq(l.selection))&&(c=!0);let b=g=="preserve"&&c&&this.dom.style.overflowAnchor==null&&YC(this);if(c){this.domObserver.stop();let v=y&&(un||Yt)&&!this.composing&&!l.selection.empty&&!e.selection.empty&&mw(l.selection,e.selection);if(y){let k=Yt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=YM(this)),(o||!this.docView.update(e.doc,p,d,this))&&(this.docView.updateOuterDeco(p),this.docView.destroy(),this.docView=Rb(e.doc,p,d,this.dom,this)),k&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&mM(this))?Mr(this,v):(F1(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(l),!((s=this.dragging)===null||s===void 0)&&s.node&&!l.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,l),g=="reset"?this.dom.scrollTop=0:g=="to selection"?this.scrollToSelection():b&&KC(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof xe){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&wb(this,t.getBoundingClientRect(),e)}else wb(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let s=this.directPlugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let s=this.state.plugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let s=this.pluginViews[t];s.update&&s.update(this,e)}}updateDraggedNode(e,t){let s=e.node,l=-1;if(this.state.doc.nodeAt(s.from)==s.node)l=s.from;else{let o=s.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==s.node&&(l=o)}this.dragging=new cv(e.slice,e.move,l<0?void 0:xe.create(this.state.doc,l))}someProp(e,t){let s=this._props&&this._props[e],l;if(s!=null&&(l=t?t(s):s))return l;for(let c=0;c<this.directPlugins.length;c++){let f=this.directPlugins[c].props[e];if(f!=null&&(l=t?t(f):f))return l}let o=this.state.plugins;if(o)for(let c=0;c<o.length;c++){let f=o[c].props[e];if(f!=null&&(l=t?t(f):f))return l}}hasFocus(){if(un){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&PC(this.dom),Mr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return ZC(this,e)}coordsAtPos(e,t=1){return V1(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,s=-1){let l=this.docView.posFromDOM(e,t,s);if(l==null)throw new RangeError("DOM position not inside the editor");return l}endOfTextblock(e,t){return rM(this,t||this.state,e)}pasteHTML(e,t){return wo(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return wo(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return vp(this,e)}destroy(){this.docView&&(jM(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ah(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,LC())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return zM(this,e)}domSelectionRange(){let e=this.domSelection();return e?Jt&&this.root.nodeType===11&&IC(this.dom.ownerDocument)==this.dom&&iw(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}pv.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function Wb(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let s in t)s=="class"?e.class+=" "+t[s]:s=="style"?e.style=(e.style?e.style+";":"")+t[s]:!e[s]&&s!="contenteditable"&&s!="nodeName"&&(e[s]=String(t[s]))}),e.translate||(e.translate="no"),[Zt.node(0,n.state.doc.content.size,e)]}function ex(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Zt.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function tx(n){return!n.someProp("editable",e=>e(n.state)===!1)}function mw(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function nx(n){let e=Object.create(null);function t(s){for(let l in s)Object.prototype.hasOwnProperty.call(e,l)||(e[l]=s[l])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function gw(n,e){let t=0,s=0;for(let l in n){if(n[l]!=e[l])return!0;t++}for(let l in e)s++;return t!=s}function rx(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var gs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Oc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},yw=typeof navigator<"u"&&/Mac/.test(navigator.platform),bw=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Gt=0;Gt<10;Gt++)gs[48+Gt]=gs[96+Gt]=String(Gt);for(var Gt=1;Gt<=24;Gt++)gs[Gt+111]="F"+Gt;for(var Gt=65;Gt<=90;Gt++)gs[Gt]=String.fromCharCode(Gt+32),Oc[Gt]=String.fromCharCode(Gt);for(var uh in gs)Oc.hasOwnProperty(uh)||(Oc[uh]=gs[uh]);function xw(n){var e=yw&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||bw&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Oc:gs)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const vw=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Sw=typeof navigator<"u"&&/Win/.test(navigator.platform);function kw(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let s,l,o,c;for(let f=0;f<e.length-1;f++){let d=e[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))vw?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(t="Alt-"+t),l&&(t="Ctrl-"+t),c&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function Tw(n){let e=Object.create(null);for(let t in n)e[kw(t)]=n[t];return e}function fh(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function Ew(n){return new ht({props:{handleKeyDown:mv(n)}})}function mv(n){let e=Tw(n);return function(t,s){let l=xw(s),o,c=e[fh(l,s)];if(c&&c(t.state,t.dispatch,t))return!0;if(l.length==1&&l!=" "){if(s.shiftKey){let f=e[fh(l,s,!1)];if(f&&f(t.state,t.dispatch,t))return!0}if((s.altKey||s.metaKey||s.ctrlKey)&&!(Sw&&s.ctrlKey&&s.altKey)&&(o=gs[s.keyCode])&&o!=l){let f=e[fh(o,s)];if(f&&f(t.state,t.dispatch,t))return!0}}return!1}}var Cw=Object.defineProperty,Mp=(n,e)=>{for(var t in e)Cw(n,t,{get:e[t],enumerable:!0})};function yu(n){const{state:e,transaction:t}=n;let{selection:s}=t,{doc:l}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return s},get doc(){return l},get tr(){return s=t.selection,l=t.doc,o=t.storedMarks,t}}}var bu=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:e,state:t}=this,{view:s}=e,{tr:l}=t,o=this.buildProps(l);return Object.fromEntries(Object.entries(n).map(([c,f])=>[c,(...p)=>{const g=f(...p)(o);return!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),g}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,e=!0){const{rawCommands:t,editor:s,state:l}=this,{view:o}=s,c=[],f=!!n,d=n||l.tr,p=()=>(!f&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(d),c.every(y=>y===!0)),g={...Object.fromEntries(Object.entries(t).map(([y,b])=>[y,(...k)=>{const E=this.buildProps(d,e),C=b(...k)(E);return c.push(C),g}])),run:p};return g}createCan(n){const{rawCommands:e,state:t}=this,s=!1,l=n||t.tr,o=this.buildProps(l,s);return{...Object.fromEntries(Object.entries(e).map(([f,d])=>[f,(...p)=>d(...p)({...o,dispatch:void 0})])),chain:()=>this.createChain(l,s)}}buildProps(n,e=!0){const{rawCommands:t,editor:s,state:l}=this,{view:o}=s,c={tr:n,editor:s,view:o,state:yu({state:l,transaction:n}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(n,e),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,(...p)=>d(...p)(c)]))}};return c}},gv={};Mp(gv,{blur:()=>Mw,clearContent:()=>ww,clearNodes:()=>Nw,command:()=>Aw,createParagraphNear:()=>Ow,cut:()=>Dw,deleteCurrentNode:()=>jw,deleteNode:()=>Rw,deleteRange:()=>zw,deleteSelection:()=>Lw,enter:()=>_w,exitCode:()=>Bw,extendMarkRange:()=>Hw,first:()=>Uw,focus:()=>Vw,forEach:()=>qw,insertContent:()=>$w,insertContentAt:()=>Kw,joinBackward:()=>Fw,joinDown:()=>Jw,joinForward:()=>Xw,joinItemBackward:()=>Qw,joinItemForward:()=>Zw,joinTextblockBackward:()=>Ww,joinTextblockForward:()=>e2,joinUp:()=>Pw,keyboardShortcut:()=>n2,lift:()=>r2,liftEmptyBlock:()=>s2,liftListItem:()=>i2,newlineInCode:()=>l2,resetAttributes:()=>o2,scrollIntoView:()=>a2,selectAll:()=>c2,selectNodeBackward:()=>u2,selectNodeForward:()=>f2,selectParentNode:()=>d2,selectTextblockEnd:()=>h2,selectTextblockStart:()=>p2,setContent:()=>m2,setMark:()=>L2,setMeta:()=>_2,setNode:()=>B2,setNodeSelection:()=>H2,setTextDirection:()=>U2,setTextSelection:()=>I2,sinkListItem:()=>V2,splitBlock:()=>q2,splitListItem:()=>$2,toggleList:()=>G2,toggleMark:()=>Y2,toggleNode:()=>K2,toggleWrap:()=>P2,undoInputRule:()=>J2,unsetAllMarks:()=>F2,unsetMark:()=>X2,unsetTextDirection:()=>Q2,updateAttributes:()=>Z2,wrapIn:()=>W2,wrapInList:()=>eN});var Mw=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window?.getSelection())==null||t.removeAllRanges())}),!0),ww=(n=!0)=>({commands:e})=>e.setContent("",{emitUpdate:n}),Nw=()=>({state:n,tr:e,dispatch:t})=>{const{selection:s}=e,{ranges:l}=s;return t&&l.forEach(({$from:o,$to:c})=>{n.doc.nodesBetween(o.pos,c.pos,(f,d)=>{if(f.type.isText)return;const{doc:p,mapping:g}=e,y=p.resolve(g.map(d)),b=p.resolve(g.map(d+f.nodeSize)),v=y.blockRange(b);if(!v)return;const k=ol(v);if(f.type.isTextblock){const{defaultType:E}=y.parent.contentMatchAt(y.index());e.setNodeMarkup(v.start,E)}(k||k===0)&&e.lift(v,k)})}),!0},Aw=n=>e=>n(e),Ow=()=>({state:n,dispatch:e})=>O1(n,e),Dw=(n,e)=>({editor:t,tr:s})=>{const{state:l}=t,o=l.doc.slice(n.from,n.to);s.deleteRange(n.from,n.to);const c=s.mapping.map(e);return s.insert(c,o.content),s.setSelection(new ke(s.doc.resolve(Math.max(c-1,0)))),!0},jw=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,s=t.$anchor.node();if(s.content.size>0)return!1;const l=n.selection.$anchor;for(let o=l.depth;o>0;o-=1)if(l.node(o).type===s.type){if(e){const f=l.before(o),d=l.after(o);n.delete(f,d).scrollIntoView()}return!0}return!1};function wt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}var Rw=n=>({tr:e,state:t,dispatch:s})=>{const l=wt(n,t.schema),o=e.selection.$anchor;for(let c=o.depth;c>0;c-=1)if(o.node(c).type===l){if(s){const d=o.before(c),p=o.after(c);e.delete(d,p).scrollIntoView()}return!0}return!1},zw=n=>({tr:e,dispatch:t})=>{const{from:s,to:l}=n;return t&&e.delete(s,l),!0},Lw=()=>({state:n,dispatch:e})=>dp(n,e),_w=()=>({commands:n})=>n.keyboardShortcut("Enter"),Bw=()=>({state:n,dispatch:e})=>vC(n,e);function wp(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function Dc(n,e,t={strict:!0}){const s=Object.keys(e);return s.length?s.every(l=>t.strict?e[l]===n[l]:wp(e[l])?e[l].test(n[l]):e[l]===n[l]):!0}function yv(n,e,t={}){return n.find(s=>s.type===e&&Dc(Object.fromEntries(Object.keys(t).map(l=>[l,s.attrs[l]])),t))}function sx(n,e,t={}){return!!yv(n,e,t)}function Np(n,e,t){var s;if(!n||!e)return;let l=n.parent.childAfter(n.parentOffset);if((!l.node||!l.node.marks.some(g=>g.type===e))&&(l=n.parent.childBefore(n.parentOffset)),!l.node||!l.node.marks.some(g=>g.type===e)||(t=t||((s=l.node.marks[0])==null?void 0:s.attrs),!yv([...l.node.marks],e,t)))return;let c=l.index,f=n.start()+l.offset,d=c+1,p=f+l.node.nodeSize;for(;c>0&&sx([...n.parent.child(c-1).marks],e,t);)c-=1,f-=n.parent.child(c).nodeSize;for(;d<n.parent.childCount&&sx([...n.parent.child(d).marks],e,t);)p+=n.parent.child(d).nodeSize,d+=1;return{from:f,to:p}}function wr(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}var Hw=(n,e={})=>({tr:t,state:s,dispatch:l})=>{const o=wr(n,s.schema),{doc:c,selection:f}=t,{$from:d,from:p,to:g}=f;if(l){const y=Np(d,o,e);if(y&&y.from<=p&&y.to>=g){const b=ke.create(c,y.from,y.to);t.setSelection(b)}}return!0},Uw=n=>e=>{const t=typeof n=="function"?n(e):n;for(let s=0;s<t.length;s+=1)if(t[s](e))return!0;return!1};function bv(n){return n instanceof ke}function Ys(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function xv(n,e=null){if(!e)return null;const t=De.atStart(n),s=De.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return s;const l=t.from,o=s.to;return e==="all"?ke.create(n,Ys(0,l,o),Ys(n.content.size,l,o)):ke.create(n,Ys(e,l,o),Ys(e,l,o))}function ix(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function jc(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Iw(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Vw=(n=null,e={})=>({editor:t,view:s,tr:l,dispatch:o})=>{e={scrollIntoView:!0,...e};const c=()=>{(jc()||ix())&&s.dom.focus(),Iw()&&!jc()&&!ix()&&s.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{t.isDestroyed||(s.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};try{if(s.hasFocus()&&n===null||n===!1)return!0}catch{return!1}if(o&&n===null&&!bv(t.state.selection))return c(),!0;const f=xv(l.doc,n)||t.state.selection,d=t.state.selection.eq(f);return o&&(d||l.setSelection(f),d&&l.storedMarks&&l.setStoredMarks(l.storedMarks),c()),!0},qw=(n,e)=>t=>n.every((s,l)=>e(s,{...t,index:l})),$w=(n,e)=>({tr:t,commands:s})=>s.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),vv=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const s=e[t];s.nodeType===3&&s.nodeValue&&/^(\n\s\s|\n)$/.test(s.nodeValue)?n.removeChild(s):s.nodeType===1&&vv(s)}return n};function sc(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return vv(t)}function Ao(n,e,t){if(n instanceof Gn||n instanceof X)return n;t={slice:!0,parseOptions:{},...t};const s=typeof n=="object"&&n!==null,l=typeof n=="string";if(s)try{if(Array.isArray(n)&&n.length>0)return X.fromArray(n.map(f=>e.nodeFromJSON(f)));const c=e.nodeFromJSON(n);return t.errorOnInvalidContent&&c.check(),c}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),Ao("",e,t)}if(l){if(t.errorOnInvalidContent){let c=!1,f="";const d=new r1({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:p=>(c=!0,f=typeof p=="string"?p:p.outerHTML,null)}]}})});if(t.slice?ds.fromSchema(d).parseSlice(sc(n),t.parseOptions):ds.fromSchema(d).parse(sc(n),t.parseOptions),t.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${f}`)})}const o=ds.fromSchema(e);return t.slice?o.parseSlice(sc(n),t.parseOptions).content:o.parse(sc(n),t.parseOptions)}return Ao("",e,t)}function Gw(n,e,t){const s=n.steps.length-1;if(s<e)return;const l=n.steps[s];if(!(l instanceof zt||l instanceof Lt))return;const o=n.mapping.maps[s];let c=0;o.forEach((f,d,p,g)=>{c===0&&(c=g)}),n.setSelection(De.near(n.doc.resolve(c),t))}var Yw=n=>!("type"in n),Kw=(n,e,t)=>({tr:s,dispatch:l,editor:o})=>{var c;if(l){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let f;const d=C=>{o.emit("contentError",{editor:o,error:C,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},p={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Ao(e,o.schema,{parseOptions:p,errorOnInvalidContent:!0})}catch(C){d(C)}try{f=Ao(e,o.schema,{parseOptions:p,errorOnInvalidContent:(c=t.errorOnInvalidContent)!=null?c:o.options.enableContentCheck})}catch(C){return d(C),!1}let{from:g,to:y}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},b=!0,v=!0;if((Yw(f)?f:[f]).forEach(C=>{C.check(),b=b?C.isText&&C.marks.length===0:!1,v=v?C.isBlock:!1}),g===y&&v){const{parent:C}=s.doc.resolve(g);C.isTextblock&&!C.type.spec.code&&!C.childCount&&(g-=1,y+=1)}let E;if(b){if(Array.isArray(e))E=e.map(C=>C.text||"").join("");else if(e instanceof X){let C="";e.forEach(M=>{M.text&&(C+=M.text)}),E=C}else typeof e=="object"&&e&&e.text?E=e.text:E=e;s.insertText(E,g,y)}else{E=f;const C=s.doc.resolve(g),M=C.node(),L=C.parentOffset===0,V=M.isText||M.isTextblock,W=M.content.size>0;L&&V&&W&&(g=Math.max(0,g-1)),s.replaceWith(g,y,E)}t.updateSelection&&Gw(s,s.steps.length-1,-1),t.applyInputRules&&s.setMeta("applyInputRules",{from:g,text:E}),t.applyPasteRules&&s.setMeta("applyPasteRules",{from:g,text:E})}return!0},Pw=()=>({state:n,dispatch:e})=>yC(n,e),Jw=()=>({state:n,dispatch:e})=>bC(n,e),Fw=()=>({state:n,dispatch:e})=>T1(n,e),Xw=()=>({state:n,dispatch:e})=>w1(n,e),Qw=()=>({state:n,dispatch:e,tr:t})=>{try{const s=fu(n.doc,n.selection.$from.pos,-1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},Zw=()=>({state:n,dispatch:e,tr:t})=>{try{const s=fu(n.doc,n.selection.$from.pos,1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},Ww=()=>({state:n,dispatch:e})=>mC(n,e),e2=()=>({state:n,dispatch:e})=>gC(n,e);function Sv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function t2(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let s,l,o,c;for(let f=0;f<e.length-1;f+=1){const d=e[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))jc()||Sv()?c=!0:l=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return s&&(t=`Alt-${t}`),l&&(t=`Ctrl-${t}`),c&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}var n2=n=>({editor:e,view:t,tr:s,dispatch:l})=>{const o=t2(n).split(/-(?!$)/),c=o.find(p=>!["Alt","Ctrl","Meta","Shift"].includes(p)),f=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",p=>p(t,f))});return d?.steps.forEach(p=>{const g=p.map(s.mapping);g&&l&&s.maybeStep(g)}),!0};function ys(n,e,t={}){const{from:s,to:l,empty:o}=n.selection,c=e?wt(e,n.schema):null,f=[];n.doc.nodesBetween(s,l,(y,b)=>{if(y.isText)return;const v=Math.max(s,b),k=Math.min(l,b+y.nodeSize);f.push({node:y,from:v,to:k})});const d=l-s,p=f.filter(y=>c?c.name===y.node.type.name:!0).filter(y=>Dc(y.node.attrs,t,{strict:!1}));return o?!!p.length:p.reduce((y,b)=>y+b.to-b.from,0)>=d}var r2=(n,e={})=>({state:t,dispatch:s})=>{const l=wt(n,t.schema);return ys(t,l,e)?xC(t,s):!1},s2=()=>({state:n,dispatch:e})=>D1(n,e),i2=n=>({state:e,dispatch:t})=>{const s=wt(n,e.schema);return DC(s)(e,t)},l2=()=>({state:n,dispatch:e})=>A1(n,e);function xu(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function lx(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((s,l)=>(t.includes(l)||(s[l]=n[l]),s),{})}var o2=(n,e)=>({tr:t,state:s,dispatch:l})=>{let o=null,c=null;const f=xu(typeof n=="string"?n:n.name,s.schema);if(!f)return!1;f==="node"&&(o=wt(n,s.schema)),f==="mark"&&(c=wr(n,s.schema));let d=!1;return t.selection.ranges.forEach(p=>{s.doc.nodesBetween(p.$from.pos,p.$to.pos,(g,y)=>{o&&o===g.type&&(d=!0,l&&t.setNodeMarkup(y,void 0,lx(g.attrs,e))),c&&g.marks.length&&g.marks.forEach(b=>{c===b.type&&(d=!0,l&&t.addMark(y,y+g.nodeSize,c.create(lx(b.attrs,e))))})})}),d},a2=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),c2=()=>({tr:n,dispatch:e})=>{if(e){const t=new Sn(n.doc);n.setSelection(t)}return!0},u2=()=>({state:n,dispatch:e})=>C1(n,e),f2=()=>({state:n,dispatch:e})=>N1(n,e),d2=()=>({state:n,dispatch:e})=>TC(n,e),h2=()=>({state:n,dispatch:e})=>MC(n,e),p2=()=>({state:n,dispatch:e})=>CC(n,e);function Gh(n,e,t={},s={}){return Ao(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:s.errorOnInvalidContent})}var m2=(n,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:s={}}={})=>({editor:l,tr:o,dispatch:c,commands:f})=>{const{doc:d}=o;if(s.preserveWhitespace!=="full"){const p=Gh(n,l.schema,s,{errorOnInvalidContent:e??l.options.enableContentCheck});return c&&o.replaceWith(0,d.content.size,p).setMeta("preventUpdate",!t),!0}return c&&o.setMeta("preventUpdate",!t),f.insertContentAt({from:0,to:d.content.size},n,{parseOptions:s,errorOnInvalidContent:e??l.options.enableContentCheck})};function kv(n,e){const t=wr(e,n.schema),{from:s,to:l,empty:o}=n.selection,c=[];o?(n.storedMarks&&c.push(...n.storedMarks),c.push(...n.selection.$head.marks())):n.doc.nodesBetween(s,l,d=>{c.push(...d.marks)});const f=c.find(d=>d.type.name===t.name);return f?{...f.attrs}:{}}function Tv(n,e){const t=new x1(n);return e.forEach(s=>{s.steps.forEach(l=>{t.step(l)})}),t}function g2(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function y2(n,e,t){const s=[];return n.nodesBetween(e.from,e.to,(l,o)=>{t(l)&&s.push({node:l,pos:o})}),s}function b2(n,e){for(let t=n.depth;t>0;t-=1){const s=n.node(t);if(e(s))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:s}}}function vu(n){return e=>b2(e.$from,n)}function me(n,e,t){return n.config[e]===void 0&&n.parent?me(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?me(n.parent,e,t):null}):n.config[e]}function Ap(n){return n.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},s=me(e,"addExtensions",t);return s?[e,...Ap(s())]:e}).flat(10)}function Op(n,e){const t=ri.fromSchema(e).serializeFragment(n),l=document.implementation.createHTMLDocument().createElement("div");return l.appendChild(t),l.innerHTML}function Ev(n){return typeof n=="function"}function Qe(n,e=void 0,...t){return Ev(n)?e?n.bind(e)(...t):n(...t):n}function x2(n={}){return Object.keys(n).length===0&&n.constructor===Object}function sl(n){const e=n.filter(l=>l.type==="extension"),t=n.filter(l=>l.type==="node"),s=n.filter(l=>l.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:s}}function Cv(n){const e=[],{nodeExtensions:t,markExtensions:s}=sl(n),l=[...t,...s],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(c=>{const f={name:c.name,options:c.options,storage:c.storage,extensions:l},d=me(c,"addGlobalAttributes",f);if(!d)return;d().forEach(g=>{g.types.forEach(y=>{Object.entries(g.attributes).forEach(([b,v])=>{e.push({type:y,name:b,attribute:{...o,...v}})})})})}),l.forEach(c=>{const f={name:c.name,options:c.options,storage:c.storage},d=me(c,"addAttributes",f);if(!d)return;const p=d();Object.entries(p).forEach(([g,y])=>{const b={...o,...y};typeof b?.default=="function"&&(b.default=b.default()),b?.isRequired&&b?.default===void 0&&delete b.default,e.push({type:c.name,name:g,attribute:b})})}),e}function Nt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const s={...e};return Object.entries(t).forEach(([l,o])=>{if(!s[l]){s[l]=o;return}if(l==="class"){const f=o?String(o).split(" "):[],d=s[l]?s[l].split(" "):[],p=f.filter(g=>!d.includes(g));s[l]=[...d,...p].join(" ")}else if(l==="style"){const f=o?o.split(";").map(g=>g.trim()).filter(Boolean):[],d=s[l]?s[l].split(";").map(g=>g.trim()).filter(Boolean):[],p=new Map;d.forEach(g=>{const[y,b]=g.split(":").map(v=>v.trim());p.set(y,b)}),f.forEach(g=>{const[y,b]=g.split(":").map(v=>v.trim());p.set(y,b)}),s[l]=Array.from(p.entries()).map(([g,y])=>`${g}: ${y}`).join("; ")}else s[l]=o}),s},{})}function Oo(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,s)=>Nt(t,s),{})}function v2(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function ox(n,e){return"style"in n?n:{...n,getAttrs:t=>{const s=n.getAttrs?n.getAttrs(t):n.attrs;if(s===!1)return!1;const l=e.reduce((o,c)=>{const f=c.attribute.parseHTML?c.attribute.parseHTML(t):v2(t.getAttribute(c.name));return f==null?o:{...o,[c.name]:f}},{});return{...s,...l}}}}function ax(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&x2(t)?!1:t!=null))}function cx(n){var e,t;const s={};return!((e=n?.attribute)!=null&&e.isRequired)&&"default"in(n?.attribute||{})&&(s.default=n.attribute.default),((t=n?.attribute)==null?void 0:t.validate)!==void 0&&(s.validate=n.attribute.validate),[n.name,s]}function S2(n,e){var t;const s=Cv(n),{nodeExtensions:l,markExtensions:o}=sl(n),c=(t=l.find(p=>me(p,"topNode")))==null?void 0:t.name,f=Object.fromEntries(l.map(p=>{const g=s.filter(M=>M.type===p.name),y={name:p.name,options:p.options,storage:p.storage,editor:e},b=n.reduce((M,L)=>{const V=me(L,"extendNodeSchema",y);return{...M,...V?V(p):{}}},{}),v=ax({...b,content:Qe(me(p,"content",y)),marks:Qe(me(p,"marks",y)),group:Qe(me(p,"group",y)),inline:Qe(me(p,"inline",y)),atom:Qe(me(p,"atom",y)),selectable:Qe(me(p,"selectable",y)),draggable:Qe(me(p,"draggable",y)),code:Qe(me(p,"code",y)),whitespace:Qe(me(p,"whitespace",y)),linebreakReplacement:Qe(me(p,"linebreakReplacement",y)),defining:Qe(me(p,"defining",y)),isolating:Qe(me(p,"isolating",y)),attrs:Object.fromEntries(g.map(cx))}),k=Qe(me(p,"parseHTML",y));k&&(v.parseDOM=k.map(M=>ox(M,g)));const E=me(p,"renderHTML",y);E&&(v.toDOM=M=>E({node:M,HTMLAttributes:Oo(M,g)}));const C=me(p,"renderText",y);return C&&(v.toText=C),[p.name,v]})),d=Object.fromEntries(o.map(p=>{const g=s.filter(C=>C.type===p.name),y={name:p.name,options:p.options,storage:p.storage,editor:e},b=n.reduce((C,M)=>{const L=me(M,"extendMarkSchema",y);return{...C,...L?L(p):{}}},{}),v=ax({...b,inclusive:Qe(me(p,"inclusive",y)),excludes:Qe(me(p,"excludes",y)),group:Qe(me(p,"group",y)),spanning:Qe(me(p,"spanning",y)),code:Qe(me(p,"code",y)),attrs:Object.fromEntries(g.map(cx))}),k=Qe(me(p,"parseHTML",y));k&&(v.parseDOM=k.map(C=>ox(C,g)));const E=me(p,"renderHTML",y);return E&&(v.toDOM=C=>E({mark:C,HTMLAttributes:Oo(C,g)})),[p.name,v]}));return new r1({topNode:c,nodes:f,marks:d})}function k2(n){const e=n.filter((t,s)=>n.indexOf(t)!==s);return Array.from(new Set(e))}function Rc(n){return n.sort((t,s)=>{const l=me(t,"priority")||100,o=me(s,"priority")||100;return l>o?-1:l<o?1:0})}function Mv(n){const e=Rc(Ap(n)),t=k2(e.map(s=>s.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),e}function wv(n,e,t){const{from:s,to:l}=e,{blockSeparator:o=`

`,textSerializers:c={}}=t||{};let f="";return n.nodesBetween(s,l,(d,p,g,y)=>{var b;d.isBlock&&p>s&&(f+=o);const v=c?.[d.type.name];if(v)return g&&(f+=v({node:d,pos:p,parent:g,index:y,range:e})),!1;d.isText&&(f+=(b=d?.text)==null?void 0:b.slice(Math.max(s,p)-p,l-p))}),f}function T2(n,e){const t={from:0,to:n.content.size};return wv(n,t,e)}function Nv(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function E2(n,e){const t=wt(e,n.schema),{from:s,to:l}=n.selection,o=[];n.doc.nodesBetween(s,l,f=>{o.push(f)});const c=o.reverse().find(f=>f.type.name===t.name);return c?{...c.attrs}:{}}function Av(n,e){const t=xu(typeof e=="string"?e:e.name,n.schema);return t==="node"?E2(n,e):t==="mark"?kv(n,e):{}}function C2(n,e=JSON.stringify){const t={};return n.filter(s=>{const l=e(s);return Object.prototype.hasOwnProperty.call(t,l)?!1:t[l]=!0})}function M2(n){const e=C2(n);return e.length===1?e:e.filter((t,s)=>!e.filter((o,c)=>c!==s).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function Ov(n){const{mapping:e,steps:t}=n,s=[];return e.maps.forEach((l,o)=>{const c=[];if(l.ranges.length)l.forEach((f,d)=>{c.push({from:f,to:d})});else{const{from:f,to:d}=t[o];if(f===void 0||d===void 0)return;c.push({from:f,to:d})}c.forEach(({from:f,to:d})=>{const p=e.slice(o).map(f,-1),g=e.slice(o).map(d),y=e.invert().map(p,-1),b=e.invert().map(g);s.push({oldRange:{from:y,to:b},newRange:{from:p,to:g}})})}),M2(s)}function Dp(n,e,t){const s=[];return n===e?t.resolve(n).marks().forEach(l=>{const o=t.resolve(n),c=Np(o,l.type);c&&s.push({mark:l,...c})}):t.nodesBetween(n,e,(l,o)=>{!l||l?.nodeSize===void 0||s.push(...l.marks.map(c=>({from:o,to:o+l.nodeSize,mark:c})))}),s}var w2=(n,e,t,s=20)=>{const l=n.doc.resolve(t);let o=s,c=null;for(;o>0&&c===null;){const f=l.node(o);f?.type.name===e?c=f:o-=1}return[c,o]};function ic(n,e){return e.nodes[n]||e.marks[n]||null}function gc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([s])=>{const l=n.find(o=>o.type===e&&o.name===s);return l?l.attribute.keepOnSplit:!1}))}var N2=(n,e=500)=>{let t="";const s=n.parentOffset;return n.parent.nodesBetween(Math.max(0,s-e),s,(l,o,c,f)=>{var d,p;const g=((p=(d=l.type.spec).toText)==null?void 0:p.call(d,{node:l,pos:o,parent:c,index:f}))||l.textContent||"%leaf%";t+=l.isAtom&&!l.isText?g:g.slice(0,Math.max(0,s-o))}),t};function Yh(n,e,t={}){const{empty:s,ranges:l}=n.selection,o=e?wr(e,n.schema):null;if(s)return!!(n.storedMarks||n.selection.$from.marks()).filter(y=>o?o.name===y.type.name:!0).find(y=>Dc(y.attrs,t,{strict:!1}));let c=0;const f=[];if(l.forEach(({$from:y,$to:b})=>{const v=y.pos,k=b.pos;n.doc.nodesBetween(v,k,(E,C)=>{if(!E.isText&&!E.marks.length)return;const M=Math.max(v,C),L=Math.min(k,C+E.nodeSize),V=L-M;c+=V,f.push(...E.marks.map(W=>({mark:W,from:M,to:L})))})}),c===0)return!1;const d=f.filter(y=>o?o.name===y.mark.type.name:!0).filter(y=>Dc(y.mark.attrs,t,{strict:!1})).reduce((y,b)=>y+b.to-b.from,0),p=f.filter(y=>o?y.mark.type!==o&&y.mark.type.excludes(o):!0).reduce((y,b)=>y+b.to-b.from,0);return(d>0?d+p:d)>=c}function A2(n,e,t={}){if(!e)return ys(n,null,t)||Yh(n,null,t);const s=xu(e,n.schema);return s==="node"?ys(n,e,t):s==="mark"?Yh(n,e,t):!1}var O2=(n,e)=>{const{$from:t,$to:s,$anchor:l}=n.selection;if(e){const o=vu(f=>f.type.name===e)(n.selection);if(!o)return!1;const c=n.doc.resolve(o.pos+1);return l.pos+1===c.end()}return!(s.parentOffset<s.parent.nodeSize-2||t.pos!==s.pos)},D2=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function ux(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function fx(n,e){const{nodeExtensions:t}=sl(e),s=t.find(c=>c.name===n);if(!s)return!1;const l={name:s.name,options:s.options,storage:s.storage},o=Qe(me(s,"group",l));return typeof o!="string"?!1:o.split(" ").includes("list")}function Su(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var s;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((s=n.text)!=null?s:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let l=!0;return n.content.forEach(o=>{l!==!1&&(Su(o,{ignoreWhitespace:t,checkChildren:e})||(l=!1))}),l}return!1}function Dv(n){return n instanceof xe}var jv=class Rv{constructor(e){this.position=e}static fromJSON(e){return new Rv(e.position)}toJSON(){return{position:this.position}}};function j2(n,e){const t=e.mapping.mapResult(n.position);return{position:new jv(t.pos),mapResult:t}}function R2(n){return new jv(n)}function z2(n,e,t){var s;const{selection:l}=e;let o=null;if(bv(l)&&(o=l.$cursor),o){const f=(s=n.storedMarks)!=null?s:o.marks();return o.parent.type.allowsMarkType(t)&&(!!t.isInSet(f)||!f.some(p=>p.type.excludes(t)))}const{ranges:c}=l;return c.some(({$from:f,$to:d})=>{let p=f.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(f.pos,d.pos,(g,y,b)=>{if(p)return!1;if(g.isInline){const v=!b||b.type.allowsMarkType(t),k=!!t.isInSet(g.marks)||!g.marks.some(E=>E.type.excludes(t));p=v&&k}return!p}),p})}var L2=(n,e={})=>({tr:t,state:s,dispatch:l})=>{const{selection:o}=t,{empty:c,ranges:f}=o,d=wr(n,s.schema);if(l)if(c){const p=kv(s,d);t.addStoredMark(d.create({...p,...e}))}else f.forEach(p=>{const g=p.$from.pos,y=p.$to.pos;s.doc.nodesBetween(g,y,(b,v)=>{const k=Math.max(v,g),E=Math.min(v+b.nodeSize,y);b.marks.find(M=>M.type===d)?b.marks.forEach(M=>{d===M.type&&t.addMark(k,E,d.create({...M.attrs,...e}))}):t.addMark(k,E,d.create(e))})});return z2(s,t,d)},_2=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),B2=(n,e={})=>({state:t,dispatch:s,chain:l})=>{const o=wt(n,t.schema);let c;return t.selection.$anchor.sameParent(t.selection.$head)&&(c=t.selection.$anchor.parent.attrs),o.isTextblock?l().command(({commands:f})=>Eb(o,{...c,...e})(t)?!0:f.clearNodes()).command(({state:f})=>Eb(o,{...c,...e})(f,s)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},H2=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,l=Ys(n,0,s.content.size),o=xe.create(s,l);e.setSelection(o)}return!0},U2=(n,e)=>({tr:t,state:s,dispatch:l})=>{const{selection:o}=s;let c,f;return typeof e=="number"?(c=e,f=e):e&&"from"in e&&"to"in e?(c=e.from,f=e.to):(c=o.from,f=o.to),l&&t.doc.nodesBetween(c,f,(d,p)=>{d.isText||t.setNodeMarkup(p,void 0,{...d.attrs,dir:n})}),!0},I2=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,{from:l,to:o}=typeof n=="number"?{from:n,to:n}:n,c=ke.atStart(s).from,f=ke.atEnd(s).to,d=Ys(l,c,f),p=Ys(o,c,f),g=ke.create(s,d,p);e.setSelection(g)}return!0},V2=n=>({state:e,dispatch:t})=>{const s=wt(n,e.schema);return zC(s)(e,t)};function dx(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const s=t.filter(l=>e?.includes(l.type.name));n.tr.ensureMarks(s)}}var q2=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:s,editor:l})=>{const{selection:o,doc:c}=e,{$from:f,$to:d}=o,p=l.extensionManager.attributes,g=gc(p,f.node().type.name,f.node().attrs);if(o instanceof xe&&o.node.isBlock)return!f.parentOffset||!Cr(c,f.pos)?!1:(s&&(n&&dx(t,l.extensionManager.splittableMarks),e.split(f.pos).scrollIntoView()),!0);if(!f.parent.isBlock)return!1;const y=d.parentOffset===d.parent.content.size,b=f.depth===0?void 0:g2(f.node(-1).contentMatchAt(f.indexAfter(-1)));let v=y&&b?[{type:b,attrs:g}]:void 0,k=Cr(e.doc,e.mapping.map(f.pos),1,v);if(!v&&!k&&Cr(e.doc,e.mapping.map(f.pos),1,b?[{type:b}]:void 0)&&(k=!0,v=b?[{type:b,attrs:g}]:void 0),s){if(k&&(o instanceof ke&&e.deleteSelection(),e.split(e.mapping.map(f.pos),1,v),b&&!y&&!f.parentOffset&&f.parent.type!==b)){const E=e.mapping.map(f.before()),C=e.doc.resolve(E);f.node(-1).canReplaceWith(C.index(),C.index()+1,b)&&e.setNodeMarkup(e.mapping.map(f.before()),b)}n&&dx(t,l.extensionManager.splittableMarks),e.scrollIntoView()}return k},$2=(n,e={})=>({tr:t,state:s,dispatch:l,editor:o})=>{var c;const f=wt(n,s.schema),{$from:d,$to:p}=s.selection,g=s.selection.node;if(g&&g.isBlock||d.depth<2||!d.sameParent(p))return!1;const y=d.node(-1);if(y.type!==f)return!1;const b=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==f||d.index(-2)!==d.node(-2).childCount-1)return!1;if(l){let M=X.empty;const L=d.index(-1)?1:d.index(-2)?2:3;for(let se=d.depth-L;se>=d.depth-3;se-=1)M=X.from(d.node(se).copy(M));const V=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,W={...gc(b,d.node().type.name,d.node().attrs),...e},$=((c=f.contentMatch.defaultType)==null?void 0:c.createAndFill(W))||void 0;M=M.append(X.from(f.createAndFill(null,$)||void 0));const Y=d.before(d.depth-(L-1));t.replace(Y,d.after(-V),new ie(M,4-L,0));let I=-1;t.doc.nodesBetween(Y,t.doc.content.size,(se,ue)=>{if(I>-1)return!1;se.isTextblock&&se.content.size===0&&(I=ue+1)}),I>-1&&t.setSelection(ke.near(t.doc.resolve(I))),t.scrollIntoView()}return!0}const v=p.pos===d.end()?y.contentMatchAt(0).defaultType:null,k={...gc(b,y.type.name,y.attrs),...e},E={...gc(b,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,p.pos);const C=v?[{type:f,attrs:k},{type:v,attrs:E}]:[{type:f,attrs:k}];if(!Cr(t.doc,d.pos,2))return!1;if(l){const{selection:M,storedMarks:L}=s,{splittableMarks:V}=o.extensionManager,W=L||M.$to.parentOffset&&M.$from.marks();if(t.split(d.pos,2,C).scrollIntoView(),!W||!l)return!0;const $=W.filter(Y=>V.includes(Y.type.name));t.ensureMarks($)}return!0},dh=(n,e)=>{const t=vu(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(s===void 0)return!0;const l=n.doc.nodeAt(s);return t.node.type===l?.type&&bs(n.doc,t.pos)&&n.join(t.pos),!0},hh=(n,e)=>{const t=vu(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(t.start).after(t.depth);if(s===void 0)return!0;const l=n.doc.nodeAt(s);return t.node.type===l?.type&&bs(n.doc,s)&&n.join(s),!0},G2=(n,e,t,s={})=>({editor:l,tr:o,state:c,dispatch:f,chain:d,commands:p,can:g})=>{const{extensions:y,splittableMarks:b}=l.extensionManager,v=wt(n,c.schema),k=wt(e,c.schema),{selection:E,storedMarks:C}=c,{$from:M,$to:L}=E,V=M.blockRange(L),W=C||E.$to.parentOffset&&E.$from.marks();if(!V)return!1;const $=vu(Y=>fx(Y.type.name,y))(E);if(V.depth>=1&&$&&V.depth-$.depth<=1){if($.node.type===v)return p.liftListItem(k);if(fx($.node.type.name,y)&&v.validContent($.node.content)&&f)return d().command(()=>(o.setNodeMarkup($.pos,v),!0)).command(()=>dh(o,v)).command(()=>hh(o,v)).run()}return!t||!W||!f?d().command(()=>g().wrapInList(v,s)?!0:p.clearNodes()).wrapInList(v,s).command(()=>dh(o,v)).command(()=>hh(o,v)).run():d().command(()=>{const Y=g().wrapInList(v,s),I=W.filter(se=>b.includes(se.type.name));return o.ensureMarks(I),Y?!0:p.clearNodes()}).wrapInList(v,s).command(()=>dh(o,v)).command(()=>hh(o,v)).run()},Y2=(n,e={},t={})=>({state:s,commands:l})=>{const{extendEmptyMarkRange:o=!1}=t,c=wr(n,s.schema);return Yh(s,c,e)?l.unsetMark(c,{extendEmptyMarkRange:o}):l.setMark(c,e)},K2=(n,e,t={})=>({state:s,commands:l})=>{const o=wt(n,s.schema),c=wt(e,s.schema),f=ys(s,o,t);let d;return s.selection.$anchor.sameParent(s.selection.$head)&&(d=s.selection.$anchor.parent.attrs),f?l.setNode(c,d):l.setNode(o,{...d,...t})},P2=(n,e={})=>({state:t,commands:s})=>{const l=wt(n,t.schema);return ys(t,l,e)?s.lift(l):s.wrapIn(l,e)},J2=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let s=0;s<t.length;s+=1){const l=t[s];let o;if(l.spec.isInputRules&&(o=l.getState(n))){if(e){const c=n.tr,f=o.transform;for(let d=f.steps.length-1;d>=0;d-=1)c.step(f.steps[d].invert(f.docs[d]));if(o.text){const d=c.doc.resolve(o.from).marks();c.replaceWith(o.from,o.to,n.schema.text(o.text,d))}else c.delete(o.from,o.to)}return!0}}return!1},F2=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:s,ranges:l}=t;return s||e&&l.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},X2=(n,e={})=>({tr:t,state:s,dispatch:l})=>{var o;const{extendEmptyMarkRange:c=!1}=e,{selection:f}=t,d=wr(n,s.schema),{$from:p,empty:g,ranges:y}=f;if(!l)return!0;if(g&&c){let{from:b,to:v}=f;const k=(o=p.marks().find(C=>C.type===d))==null?void 0:o.attrs,E=Np(p,d,k);E&&(b=E.from,v=E.to),t.removeMark(b,v,d)}else y.forEach(b=>{t.removeMark(b.$from.pos,b.$to.pos,d)});return t.removeStoredMark(d),!0},Q2=n=>({tr:e,state:t,dispatch:s})=>{const{selection:l}=t;let o,c;return typeof n=="number"?(o=n,c=n):n&&"from"in n&&"to"in n?(o=n.from,c=n.to):(o=l.from,c=l.to),s&&e.doc.nodesBetween(o,c,(f,d)=>{if(f.isText)return;const p={...f.attrs};delete p.dir,e.setNodeMarkup(d,void 0,p)}),!0},Z2=(n,e={})=>({tr:t,state:s,dispatch:l})=>{let o=null,c=null;const f=xu(typeof n=="string"?n:n.name,s.schema);if(!f)return!1;f==="node"&&(o=wt(n,s.schema)),f==="mark"&&(c=wr(n,s.schema));let d=!1;return t.selection.ranges.forEach(p=>{const g=p.$from.pos,y=p.$to.pos;let b,v,k,E;t.selection.empty?s.doc.nodesBetween(g,y,(C,M)=>{o&&o===C.type&&(d=!0,k=Math.max(M,g),E=Math.min(M+C.nodeSize,y),b=M,v=C)}):s.doc.nodesBetween(g,y,(C,M)=>{M<g&&o&&o===C.type&&(d=!0,k=Math.max(M,g),E=Math.min(M+C.nodeSize,y),b=M,v=C),M>=g&&M<=y&&(o&&o===C.type&&(d=!0,l&&t.setNodeMarkup(M,void 0,{...C.attrs,...e})),c&&C.marks.length&&C.marks.forEach(L=>{if(c===L.type&&(d=!0,l)){const V=Math.max(M,g),W=Math.min(M+C.nodeSize,y);t.addMark(V,W,c.create({...L.attrs,...e}))}}))}),v&&(b!==void 0&&l&&t.setNodeMarkup(b,void 0,{...v.attrs,...e}),c&&v.marks.length&&v.marks.forEach(C=>{c===C.type&&l&&t.addMark(k,E,c.create({...C.attrs,...e}))}))}),d},W2=(n,e={})=>({state:t,dispatch:s})=>{const l=wt(n,t.schema);return wC(l,e)(t,s)},eN=(n,e={})=>({state:t,dispatch:s})=>{const l=wt(n,t.schema);return NC(l,e)(t,s)},tN=class{constructor(){this.callbacks={}}on(n,e){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(e),this}emit(n,...e){const t=this.callbacks[n];return t&&t.forEach(s=>s.apply(this,e)),this}off(n,e){const t=this.callbacks[n];return t&&(e?this.callbacks[n]=t.filter(s=>s!==e):delete this.callbacks[n]),this}once(n,e){const t=(...s)=>{this.off(n,t),e.apply(this,s)};return this.on(n,t)}removeAllListeners(){this.callbacks={}}},ku=class{constructor(n){var e;this.find=n.find,this.handler=n.handler,this.undoable=(e=n.undoable)!=null?e:!0}},nN=(n,e)=>{if(wp(e))return e.exec(n);const t=e(n);if(!t)return null;const s=[t.text];return s.index=t.index,s.input=n,s.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),s.push(t.replaceWith)),s};function lc(n){var e;const{editor:t,from:s,to:l,text:o,rules:c,plugin:f}=n,{view:d}=t;if(d.composing)return!1;const p=d.state.doc.resolve(s);if(p.parent.type.spec.code||(e=p.nodeBefore||p.nodeAfter)!=null&&e.marks.find(b=>b.type.spec.code))return!1;let g=!1;const y=N2(p)+o;return c.forEach(b=>{if(g)return;const v=nN(y,b.find);if(!v)return;const k=d.state.tr,E=yu({state:d.state,transaction:k}),C={from:s-(v[0].length-o.length),to:l},{commands:M,chain:L,can:V}=new bu({editor:t,state:E});b.handler({state:E,range:C,match:v,commands:M,chain:L,can:V})===null||!k.steps.length||(b.undoable&&k.setMeta(f,{transform:k,from:s,to:l,text:o}),d.dispatch(k),g=!0)}),g}function rN(n){const{editor:e,rules:t}=n,s=new ht({state:{init(){return null},apply(l,o,c){const f=l.getMeta(s);if(f)return f;const d=l.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:g}=d;typeof g=="string"?g=g:g=Op(X.from(g),c.schema);const{from:y}=d,b=y+g.length;lc({editor:e,from:y,to:b,text:g,rules:t,plugin:s})}),l.selectionSet||l.docChanged?null:o}},props:{handleTextInput(l,o,c,f){return lc({editor:e,from:o,to:c,text:f,rules:t,plugin:s})},handleDOMEvents:{compositionend:l=>(setTimeout(()=>{const{$cursor:o}=l.state.selection;o&&lc({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:s})}),!1)},handleKeyDown(l,o){if(o.key!=="Enter")return!1;const{$cursor:c}=l.state.selection;return c?lc({editor:e,from:c.pos,to:c.pos,text:`
`,rules:t,plugin:s}):!1}},isInputRules:!0});return s}function sN(n){return Object.prototype.toString.call(n).slice(8,-1)}function oc(n){return sN(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function zv(n,e){const t={...n};return oc(n)&&oc(e)&&Object.keys(e).forEach(s=>{oc(e[s])&&oc(n[s])?t[s]=zv(n[s],e[s]):t[s]=e[s]}),t}var jp=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...Qe(me(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Qe(me(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const e=this.extend({...this.config,addOptions:()=>zv(this.options,n)});return e.name=this.name,e.parent=this.parent,e}extend(n={}){const e=new this.constructor({...this.config,...n});return e.parent=this,this.child=e,e.name="name"in n?n.name:e.parent.name,e}},si=class Lv extends jp{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new Lv(t)}static handleExit({editor:e,mark:t}){const{tr:s}=e.state,l=e.state.selection.$from;if(l.pos===l.end()){const c=l.marks();if(!!!c.find(p=>p?.type.name===t.name))return!1;const d=c.find(p=>p?.type.name===t.name);return d&&s.removeStoredMark(d),s.insertText(" ",l.pos),e.view.dispatch(s),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function iN(n){return typeof n=="number"}var lN=class{constructor(n){this.find=n.find,this.handler=n.handler}},oN=(n,e,t)=>{if(wp(e))return[...n.matchAll(e)];const s=e(n,t);return s?s.map(l=>{const o=[l.text];return o.index=l.index,o.input=n,o.data=l.data,l.replaceWith&&(l.text.includes(l.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(l.replaceWith)),o}):[]};function aN(n){const{editor:e,state:t,from:s,to:l,rule:o,pasteEvent:c,dropEvent:f}=n,{commands:d,chain:p,can:g}=new bu({editor:e,state:t}),y=[];return t.doc.nodesBetween(s,l,(v,k)=>{var E,C,M,L,V;if((C=(E=v.type)==null?void 0:E.spec)!=null&&C.code||!(v.isText||v.isTextblock||v.isInline))return;const W=(V=(L=(M=v.content)==null?void 0:M.size)!=null?L:v.nodeSize)!=null?V:0,$=Math.max(s,k),Y=Math.min(l,k+W);if($>=Y)return;const I=v.isText?v.text||"":v.textBetween($-k,Y-k,void 0,"");oN(I,o.find,c).forEach(ue=>{if(ue.index===void 0)return;const je=$+ue.index+1,st=je+ue[0].length,Le={from:t.tr.mapping.map(je),to:t.tr.mapping.map(st)},ft=o.handler({state:t,range:Le,match:ue,commands:d,chain:p,can:g,pasteEvent:c,dropEvent:f});y.push(ft)})}),y.every(v=>v!==null)}var ac=null,cN=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",n),t};function uN(n){const{editor:e,rules:t}=n;let s=null,l=!1,o=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,f;try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}const d=({state:g,from:y,to:b,rule:v,pasteEvt:k})=>{const E=g.tr,C=yu({state:g,transaction:E});if(!(!aN({editor:e,state:C,from:Math.max(y-1,0),to:b.b-1,rule:v,pasteEvent:k,dropEvent:f})||!E.steps.length)){try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,E}};return t.map(g=>new ht({view(y){const b=k=>{var E;s=(E=y.dom.parentElement)!=null&&E.contains(k.target)?y.dom.parentElement:null,s&&(ac=e)},v=()=>{ac&&(ac=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(y,b)=>{if(o=s===y.dom.parentElement,f=b,!o){const v=ac;v?.isEditable&&setTimeout(()=>{const k=v.state.selection;k&&v.commands.deleteRange({from:k.from,to:k.to})},10)}return!1},paste:(y,b)=>{var v;const k=(v=b.clipboardData)==null?void 0:v.getData("text/html");return c=b,l=!!k?.includes("data-pm-slice"),!1}}},appendTransaction:(y,b,v)=>{const k=y[0],E=k.getMeta("uiEvent")==="paste"&&!l,C=k.getMeta("uiEvent")==="drop"&&!o,M=k.getMeta("applyPasteRules"),L=!!M;if(!E&&!C&&!L)return;if(L){let{text:$}=M;typeof $=="string"?$=$:$=Op(X.from($),v.schema);const{from:Y}=M,I=Y+$.length,se=cN($);return d({rule:g,state:v,from:Y,to:{b:I},pasteEvt:se})}const V=b.doc.content.findDiffStart(v.doc.content),W=b.doc.content.findDiffEnd(v.doc.content);if(!(!iN(V)||!W||V===W.b))return d({rule:g,state:v,from:V,to:W,pasteEvt:c})}}))}var Tu=class{constructor(n,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=n,this.extensions=Mv(n),this.schema=S2(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((n,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ic(e.name,this.schema)},s=me(e,"addCommands",t);return s?{...n,...s()}:n},{})}get plugins(){const{editor:n}=this;return Rc([...this.extensions].reverse()).flatMap(s=>{const l={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:n,type:ic(s.name,this.schema)},o=[],c=me(s,"addKeyboardShortcuts",l);let f={};if(s.type==="mark"&&me(s,"exitable",l)&&(f.ArrowRight=()=>si.handleExit({editor:n,mark:s})),c){const b=Object.fromEntries(Object.entries(c()).map(([v,k])=>[v,()=>k({editor:n})]));f={...f,...b}}const d=Ew(f);o.push(d);const p=me(s,"addInputRules",l);if(ux(s,n.options.enableInputRules)&&p){const b=p();if(b&&b.length){const v=rN({editor:n,rules:b}),k=Array.isArray(v)?v:[v];o.push(...k)}}const g=me(s,"addPasteRules",l);if(ux(s,n.options.enablePasteRules)&&g){const b=g();if(b&&b.length){const v=uN({editor:n,rules:b});o.push(...v)}}const y=me(s,"addProseMirrorPlugins",l);if(y){const b=y();o.push(...b)}return o})}get attributes(){return Cv(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:e}=sl(this.extensions);return Object.fromEntries(e.filter(t=>!!me(t,"addNodeView")).map(t=>{const s=this.attributes.filter(d=>d.type===t.name),l={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:wt(t.name,this.schema)},o=me(t,"addNodeView",l);if(!o)return[];const c=o();if(!c)return[];const f=(d,p,g,y,b)=>{const v=Oo(d,s);return c({node:d,view:p,getPos:g,decorations:y,innerDecorations:b,editor:n,extension:t,HTMLAttributes:v})};return[t.name,f]}))}dispatchTransaction(n){const{editor:e}=this;return Rc([...this.extensions].reverse()).reduceRight((s,l)=>{const o={name:l.name,options:l.options,storage:this.editor.extensionStorage[l.name],editor:e,type:ic(l.name,this.schema)},c=me(l,"dispatchTransaction",o);return c?f=>{c.call(o,{transaction:f,next:s})}:s},n)}get markViews(){const{editor:n}=this,{markExtensions:e}=sl(this.extensions);return Object.fromEntries(e.filter(t=>!!me(t,"addMarkView")).map(t=>{const s=this.attributes.filter(f=>f.type===t.name),l={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:wr(t.name,this.schema)},o=me(t,"addMarkView",l);if(!o)return[];const c=(f,d,p)=>{const g=Oo(f,s);return o()({mark:f,view:d,inline:p,editor:n,extension:t,HTMLAttributes:g,updateAttributes:y=>{EN(f,n,y)}})};return[t.name,c]}))}setupExtensions(){const n=this.extensions;this.editor.extensionStorage=Object.fromEntries(n.map(e=>[e.name,e.storage])),n.forEach(e=>{var t;const s={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ic(e.name,this.schema)};e.type==="mark"&&((t=Qe(me(e,"keepOnSplit",s)))==null||t)&&this.splittableMarks.push(e.name);const l=me(e,"onBeforeCreate",s),o=me(e,"onCreate",s),c=me(e,"onUpdate",s),f=me(e,"onSelectionUpdate",s),d=me(e,"onTransaction",s),p=me(e,"onFocus",s),g=me(e,"onBlur",s),y=me(e,"onDestroy",s);l&&this.editor.on("beforeCreate",l),o&&this.editor.on("create",o),c&&this.editor.on("update",c),f&&this.editor.on("selectionUpdate",f),d&&this.editor.on("transaction",d),p&&this.editor.on("focus",p),g&&this.editor.on("blur",g),y&&this.editor.on("destroy",y)})}};Tu.resolve=Mv;Tu.sort=Rc;Tu.flatten=Ap;var fN={};Mp(fN,{ClipboardTextSerializer:()=>Bv,Commands:()=>Hv,Delete:()=>Uv,Drop:()=>Iv,Editable:()=>Vv,FocusEvents:()=>$v,Keymap:()=>Gv,Paste:()=>Yv,Tabindex:()=>Kv,TextDirection:()=>Pv,focusEventsPluginKey:()=>qv});var St=class _v extends jp{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new _v(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},Bv=St.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ht({key:new Ot("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:s,selection:l}=e,{ranges:o}=l,c=Math.min(...o.map(g=>g.$from.pos)),f=Math.max(...o.map(g=>g.$to.pos)),d=Nv(t);return wv(s,{from:c,to:f},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),Hv=St.create({name:"commands",addCommands(){return{...gv}}}),Uv=St.create({name:"delete",onUpdate({transaction:n,appendedTransactions:e}){var t,s,l;const o=()=>{var c,f,d,p;if((p=(d=(f=(c=this.editor.options.coreExtensionOptions)==null?void 0:c.delete)==null?void 0:f.filterTransaction)==null?void 0:d.call(f,n))!=null?p:n.getMeta("y-sync$"))return;const g=Tv(n.before,[n,...e]);Ov(g).forEach(v=>{g.mapping.mapResult(v.oldRange.from).deletedAfter&&g.mapping.mapResult(v.oldRange.to).deletedBefore&&g.before.nodesBetween(v.oldRange.from,v.oldRange.to,(k,E)=>{const C=E+k.nodeSize-2,M=v.oldRange.from<=E&&C<=v.oldRange.to;this.editor.emit("delete",{type:"node",node:k,from:E,to:C,newFrom:g.mapping.map(E),newTo:g.mapping.map(C),deletedRange:v.oldRange,newRange:v.newRange,partial:!M,editor:this.editor,transaction:n,combinedTransform:g})})});const b=g.mapping;g.steps.forEach((v,k)=>{var E,C;if(v instanceof $n){const M=b.slice(k).map(v.from,-1),L=b.slice(k).map(v.to),V=b.invert().map(M,-1),W=b.invert().map(L),$=(E=g.doc.nodeAt(M-1))==null?void 0:E.marks.some(I=>I.eq(v.mark)),Y=(C=g.doc.nodeAt(L))==null?void 0:C.marks.some(I=>I.eq(v.mark));this.editor.emit("delete",{type:"mark",mark:v.mark,from:v.from,to:v.to,deletedRange:{from:V,to:W},newRange:{from:M,to:L},partial:!!(Y||$),editor:this.editor,transaction:n,combinedTransform:g})}})};(l=(s=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:s.async)==null||l?setTimeout(o,0):o()}}),Iv=St.create({name:"drop",addProseMirrorPlugins(){return[new ht({key:new Ot("tiptapDrop"),props:{handleDrop:(n,e,t,s)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:s})}}})]}}),Vv=St.create({name:"editable",addProseMirrorPlugins(){return[new ht({key:new Ot("editable"),props:{editable:()=>this.editor.options.editable}})]}}),qv=new Ot("focusEvents"),$v=St.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new ht({key:qv,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const s=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1},blur:(e,t)=>{n.isFocused=!1;const s=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1}}}})]}}),Gv=St.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:f})=>{const{selection:d,doc:p}=f,{empty:g,$anchor:y}=d,{pos:b,parent:v}=y,k=y.parent.isTextblock&&b>0?f.doc.resolve(b-1):y,E=k.parent.type.spec.isolating,C=y.pos-y.parentOffset,M=E&&k.parent.childCount===1?C===y.pos:De.atStart(p).from===b;return!g||!v.type.isTextblock||v.textContent.length||!M||M&&y.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),s={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},l={...s},o={...s,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return jc()||Sv()?o:l},addProseMirrorPlugins(){return[new ht({key:new Ot("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(E=>E.getMeta("composition")))return;const s=n.some(E=>E.docChanged)&&!e.doc.eq(t.doc),l=n.some(E=>E.getMeta("preventClearDocument"));if(!s||l)return;const{empty:o,from:c,to:f}=e.selection,d=De.atStart(e.doc).from,p=De.atEnd(e.doc).to;if(o||!(c===d&&f===p)||!Su(t.doc))return;const b=t.tr,v=yu({state:t,transaction:b}),{commands:k}=new bu({editor:this.editor,state:v});if(k.clearNodes(),!!b.steps.length)return b}})]}}),Yv=St.create({name:"paste",addProseMirrorPlugins(){return[new ht({key:new Ot("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),Kv=St.create({name:"tabindex",addProseMirrorPlugins(){return[new ht({key:new Ot("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Pv=St.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:n}=sl(this.extensions);return[{types:n.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const t=e.getAttribute("dir");return t&&(t==="ltr"||t==="rtl"||t==="auto")?t:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new ht({key:new Ot("textDirection"),props:{attributes:()=>{const n=this.options.direction;return n?{dir:n}:{}}}})]}}),dN=class co{constructor(e,t,s=!1,l=null){this.currentNode=null,this.actualDepth=null,this.isBlock=s,this.resolvedPos=e,this.editor=t,this.currentNode=l}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,s=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,s=this.to-1}this.editor.commands.insertContentAt({from:t,to:s},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new co(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new co(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new co(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,s)=>{const l=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,c=t.isInline,f=this.pos+s+(o?0:1);if(f<0||f>this.resolvedPos.doc.nodeSize-2)return;const d=this.resolvedPos.doc.resolve(f);if(!l&&!c&&d.depth<=this.depth)return;const p=new co(d,this.editor,l,l||c?t:null);l&&(p.actualDepth=this.depth+1),e.push(p)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let s=null,l=this.parent;for(;l&&!s;){if(l.node.type.name===e)if(Object.keys(t).length>0){const o=l.node.attrs,c=Object.keys(t);for(let f=0;f<c.length;f+=1){const d=c[f];if(o[d]!==t[d])break}}else s=l;l=l.parent}return s}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},s=!1){let l=[];if(!this.children||this.children.length===0)return l;const o=Object.keys(t);return this.children.forEach(c=>{s&&l.length>0||(c.node.type.name===e&&o.every(d=>t[d]===c.node.attrs[d])&&l.push(c),!(s&&l.length>0)&&(l=l.concat(c.querySelectorAll(e,t,s))))}),l}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},hN=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function pN(n,e,t){const s=document.querySelector("style[data-tiptap-style]");if(s!==null)return s;const l=document.createElement("style");return e&&l.setAttribute("nonce",e),l.setAttribute("data-tiptap-style",""),l.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(l),l}var mN=class extends tN{constructor(n={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:s})=>{throw s},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:j2,createMappablePosition:R2},this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:s,slice:l,moved:o})=>this.options.onDrop(s,l,o)),this.on("paste",({event:s,slice:l})=>this.options.onPaste(s,l)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=xv(e,this.options.autofocus);this.editorState=Xi.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n?.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=pN(hN,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,e=!0){this.setOptions({editable:n}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.dispatchTransaction(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in n)return Reflect.get(n,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,e){const t=Ev(e)?e(n,[...this.state.plugins]):[...this.state.plugins,n],s=this.state.reconfigure({plugins:t});return this.view.updateState(s),s}unregisterPlugin(n){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(n).forEach(l=>{const o=typeof l=="string"?`${l}$`:l.key;t=t.filter(c=>!c.key.startsWith(o))}),e.length===t.length)return;const s=this.state.reconfigure({plugins:t});return this.view.updateState(s),s}createExtensionManager(){var n,e;const s=[...this.options.enableCoreExtensions?[Vv,Bv.configure({blockSeparator:(e=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Hv,$v,Gv,Kv,Iv,Yv,Uv,Pv.configure({direction:this.options.textDirection})].filter(l=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[l.name]!==!1:!0):[],...this.options.extensions].filter(l=>["extension","node","mark"].includes(l?.type));this.extensionManager=new Tu(s,this)}createCommandManager(){this.commandManager=new bu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=Gh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),n=Gh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){const{editorProps:e,enableExtensionDispatchTransaction:t}=this.options,s=e.dispatchTransaction||this.dispatchTransaction.bind(this),l=t?this.extensionManager.dispatchTransaction(s):s;this.editorView=new pv(n,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:l,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.prependClass(),this.injectCSS();const c=this.view.dom;c.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(p=>{var g;return(g=this.capturedTransaction)==null?void 0:g.step(p)});return}const{state:e,transactions:t}=this.state.applyTransaction(n),s=!this.state.selection.eq(e.selection),l=t.includes(n),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:e}),!l)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:t.slice(1)}),s&&this.emit("selectionUpdate",{editor:this,transaction:n});const c=t.findLast(p=>p.getMeta("focus")||p.getMeta("blur")),f=c?.getMeta("focus"),d=c?.getMeta("blur");f&&this.emit("focus",{editor:this,event:f.event,transaction:c}),d&&this.emit("blur",{editor:this,event:d.event,transaction:c}),!(n.getMeta("preventUpdate")||!t.some(p=>p.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:t.slice(1)})}getAttributes(n){return Av(this.state,n)}isActive(n,e){const t=typeof n=="string"?n:null,s=typeof n=="string"?e:n;return A2(this.state,t,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Op(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:e=`

`,textSerializers:t={}}=n||{};return T2(this.state.doc,{blockSeparator:e,textSerializers:{...Nv(this.schema),...t}})}get isEmpty(){return Su(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,e;return(e=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?e:!0}$node(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(n,e))||null}$nodes(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(n,e))||null}$pos(n){const e=this.state.doc.resolve(n);return new dN(e,this)}get $doc(){return this.$pos(0)}};function il(n){return new ku({find:n.find,handler:({state:e,range:t,match:s})=>{const l=Qe(n.getAttributes,void 0,s);if(l===!1||l===null)return null;const{tr:o}=e,c=s[s.length-1],f=s[0];if(c){const d=f.search(/\S/),p=t.from+f.indexOf(c),g=p+c.length;if(Dp(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(E=>E===n.type&&E!==v.mark.type)).filter(v=>v.to>p).length)return null;g<t.to&&o.delete(g,t.to),p>t.from&&o.delete(t.from+d,p);const b=t.from+d+c.length;o.addMark(t.from+d,b,n.type.create(l||{})),o.removeStoredMark(n.type)}},undoable:n.undoable})}function gN(n){return new ku({find:n.find,handler:({state:e,range:t,match:s})=>{const l=Qe(n.getAttributes,void 0,s)||{},{tr:o}=e,c=t.from;let f=t.to;const d=n.type.create(l);if(s[1]){const p=s[0].lastIndexOf(s[1]);let g=c+p;g>f?g=f:f=g+s[1].length;const y=s[0][s[0].length-1];o.insertText(y,c+s[0].length-1),o.replaceWith(g,f,d)}else if(s[0]){const p=n.type.isInline?c:c-1;o.insert(p,n.type.create(l)).delete(o.mapping.map(c),o.mapping.map(f))}o.scrollIntoView()},undoable:n.undoable})}function Kh(n){return new ku({find:n.find,handler:({state:e,range:t,match:s})=>{const l=e.doc.resolve(t.from),o=Qe(n.getAttributes,void 0,s)||{};if(!l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)},undoable:n.undoable})}function ll(n){return new ku({find:n.find,handler:({state:e,range:t,match:s,chain:l})=>{const o=Qe(n.getAttributes,void 0,s)||{},c=e.tr.delete(t.from,t.to),d=c.doc.resolve(t.from).blockRange(),p=d&&up(d,n.type,o);if(!p)return null;if(c.wrap(d,p),n.keepMarks&&n.editor){const{selection:y,storedMarks:b}=e,{splittableMarks:v}=n.editor.extensionManager,k=b||y.$to.parentOffset&&y.$from.marks();if(k){const E=k.filter(C=>v.includes(C.type.name));c.ensureMarks(E)}}if(n.keepAttributes){const y=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";l().updateAttributes(y,o).run()}const g=c.doc.resolve(t.from-1).nodeBefore;g&&g.type===n.type&&bs(c.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(s,g))&&c.join(t.from-1)},undoable:n.undoable})}function yN(n,e){const{selection:t}=n,{$from:s}=t;if(t instanceof xe){const o=s.index();return s.parent.canReplaceWith(o,o+1,e)}let l=s.depth;for(;l>=0;){const o=s.index(l);if(s.node(l).contentMatchAt(o).matchType(e))return!0;l-=1}return!1}var bN={};Mp(bN,{createAtomBlockMarkdownSpec:()=>xN,createBlockMarkdownSpec:()=>vN,createInlineMarkdownSpec:()=>TN,parseAttributes:()=>Rp,parseIndentedBlocks:()=>Ph,renderNestedMarkdownContent:()=>Lp,serializeAttributes:()=>zp});function Rp(n){if(!n?.trim())return{};const e={},t=[],s=n.replace(/["']([^"']*)["']/g,p=>(t.push(p),`__QUOTED_${t.length-1}__`)),l=s.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(l){const p=l.map(g=>g.trim().slice(1));e.class=p.join(" ")}const o=s.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const c=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(s.matchAll(c)).forEach(([,p,g])=>{var y;const b=parseInt(((y=g.match(/__QUOTED_(\d+)__/))==null?void 0:y[1])||"0",10),v=t[b];v&&(e[p]=v.slice(1,-1))});const d=s.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(g=>{g.match(/^[a-zA-Z][\w-]*$/)&&(e[g]=!0)}),e}function zp(n){if(!n||Object.keys(n).length===0)return"";const e=[];return n.class&&String(n.class).split(/\s+/).filter(Boolean).forEach(s=>e.push(`.${s}`)),n.id&&e.push(`#${n.id}`),Object.entries(n).forEach(([t,s])=>{t==="class"||t==="id"||(s===!0?e.push(t):s!==!1&&s!=null&&e.push(`${t}="${String(s)}"`))}),e.join(" ")}function xN(n){const{nodeName:e,name:t,parseAttributes:s=Rp,serializeAttributes:l=zp,defaultAttributes:o={},requiredAttributes:c=[],allowedAttributes:f}=n,d=t||e,p=g=>{if(!f)return g;const y={};return f.forEach(b=>{b in g&&(y[b]=g[b])}),y};return{parseMarkdown:(g,y)=>{const b={...o,...g.attributes};return y.createNode(e,b,[])},markdownTokenizer:{name:e,level:"block",start(g){var y;const b=new RegExp(`^:::${d}(?:\\s|$)`,"m"),v=(y=g.match(b))==null?void 0:y.index;return v!==void 0?v:-1},tokenize(g,y,b){const v=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),k=g.match(v);if(!k)return;const E=k[1]||"",C=s(E);if(!c.find(L=>!(L in C)))return{type:e,raw:k[0],attributes:C}}},renderMarkdown:g=>{const y=p(g.attrs||{}),b=l(y),v=b?` {${b}}`:"";return`:::${d}${v} :::`}}}function vN(n){const{nodeName:e,name:t,getContent:s,parseAttributes:l=Rp,serializeAttributes:o=zp,defaultAttributes:c={},content:f="block",allowedAttributes:d}=n,p=t||e,g=y=>{if(!d)return y;const b={};return d.forEach(v=>{v in y&&(b[v]=y[v])}),b};return{parseMarkdown:(y,b)=>{let v;if(s){const E=s(y);v=typeof E=="string"?[{type:"text",text:E}]:E}else f==="block"?v=b.parseChildren(y.tokens||[]):v=b.parseInline(y.tokens||[]);const k={...c,...y.attributes};return b.createNode(e,k,v)},markdownTokenizer:{name:e,level:"block",start(y){var b;const v=new RegExp(`^:::${p}`,"m"),k=(b=y.match(v))==null?void 0:b.index;return k!==void 0?k:-1},tokenize(y,b,v){var k;const E=new RegExp(`^:::${p}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),C=y.match(E);if(!C)return;const[M,L=""]=C,V=l(L);let W=1;const $=M.length;let Y="";const I=/^:::([\w-]*)(\s.*)?/gm,se=y.slice($);for(I.lastIndex=0;;){const ue=I.exec(se);if(ue===null)break;const je=ue.index,st=ue[1];if(!((k=ue[2])!=null&&k.endsWith(":::"))){if(st)W+=1;else if(W-=1,W===0){const Le=se.slice(0,je);Y=Le.trim();const ft=y.slice(0,$+je+ue[0].length);let Ve=[];if(Y)if(f==="block")for(Ve=v.blockTokens(Le),Ve.forEach(Te=>{Te.text&&(!Te.tokens||Te.tokens.length===0)&&(Te.tokens=v.inlineTokens(Te.text))});Ve.length>0;){const Te=Ve[Ve.length-1];if(Te.type==="paragraph"&&(!Te.text||Te.text.trim()===""))Ve.pop();else break}else Ve=v.inlineTokens(Y);return{type:e,raw:ft,attributes:V,content:Y,tokens:Ve}}}}}},renderMarkdown:(y,b)=>{const v=g(y.attrs||{}),k=o(v),E=k?` {${k}}`:"",C=b.renderChildren(y.content||[],`

`);return`:::${p}${E}

${C}

:::`}}}function SN(n){if(!n.trim())return{};const e={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let s=t.exec(n);for(;s!==null;){const[,l,o,c]=s;e[l]=o||c,s=t.exec(n)}return e}function kN(n){return Object.entries(n).filter(([,e])=>e!=null).map(([e,t])=>`${e}="${t}"`).join(" ")}function TN(n){const{nodeName:e,name:t,getContent:s,parseAttributes:l=SN,serializeAttributes:o=kN,defaultAttributes:c={},selfClosing:f=!1,allowedAttributes:d}=n,p=t||e,g=b=>{if(!d)return b;const v={};return d.forEach(k=>{const E=typeof k=="string"?k:k.name,C=typeof k=="string"?void 0:k.skipIfDefault;if(E in b){const M=b[E];if(C!==void 0&&M===C)return;v[E]=M}}),v},y=p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(b,v)=>{const k={...c,...b.attributes};if(f)return v.createNode(e,k);const E=s?s(b):b.content||"";return E?v.createNode(e,k,[v.createTextNode(E)]):v.createNode(e,k,[])},markdownTokenizer:{name:e,level:"inline",start(b){const v=f?new RegExp(`\\[${y}\\s*[^\\]]*\\]`):new RegExp(`\\[${y}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${y}\\]`),k=b.match(v),E=k?.index;return E!==void 0?E:-1},tokenize(b,v,k){const E=f?new RegExp(`^\\[${y}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${y}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${y}\\]`),C=b.match(E);if(!C)return;let M="",L="";if(f){const[,W]=C;L=W}else{const[,W,$]=C;L=W,M=$||""}const V=l(L.trim());return{type:e,raw:C[0],content:M.trim(),attributes:V}}},renderMarkdown:b=>{let v="";s?v=s(b):b.content&&b.content.length>0&&(v=b.content.filter(M=>M.type==="text").map(M=>M.text).join(""));const k=g(b.attrs||{}),E=o(k),C=E?` ${E}`:"";return f?`[${p}${C}]`:`[${p}${C}]${v}[/${p}]`}}}function Ph(n,e,t){var s,l,o,c;const f=n.split(`
`),d=[];let p="",g=0;const y=e.baseIndentSize||2;for(;g<f.length;){const b=f[g],v=b.match(e.itemPattern);if(!v){if(d.length>0)break;if(b.trim()===""){g+=1,p=`${p}${b}
`;continue}else return}const k=e.extractItemData(v),{indentLevel:E,mainContent:C}=k;p=`${p}${b}
`;const M=[C];for(g+=1;g<f.length;){const $=f[g];if($.trim()===""){const I=f.slice(g+1).findIndex(je=>je.trim()!=="");if(I===-1)break;if((((l=(s=f[g+1+I].match(/^(\s*)/))==null?void 0:s[1])==null?void 0:l.length)||0)>E){M.push($),p=`${p}${$}
`,g+=1;continue}else break}if((((c=(o=$.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:c.length)||0)>E)M.push($),p=`${p}${$}
`,g+=1;else break}let L;const V=M.slice(1);if(V.length>0){const $=V.map(Y=>Y.slice(E+y)).join(`
`);$.trim()&&(e.customNestedParser?L=e.customNestedParser($):L=t.blockTokens($))}const W=e.createToken(k,L);d.push(W)}if(d.length!==0)return{items:d,raw:p}}function Lp(n,e,t,s){if(!n||!Array.isArray(n.content))return"";const l=typeof t=="function"?t(s):t,[o,...c]=n.content,f=e.renderChildren([o]),d=[`${l}${f}`];return c&&c.length>0&&c.forEach(p=>{const g=e.renderChildren([p]);if(g){const y=g.split(`
`).map(b=>b?e.indent(b):"").join(`
`);d.push(y)}}),d.join(`
`)}function EN(n,e,t={}){const{state:s}=e,{doc:l,tr:o}=s,c=n;l.descendants((f,d)=>{const p=o.mapping.map(d),g=o.mapping.map(d)+f.nodeSize;let y=null;if(f.marks.forEach(v=>{if(v!==c)return!1;y=v}),!y)return;let b=!1;if(Object.keys(t).forEach(v=>{t[v]!==y.attrs[v]&&(b=!0)}),b){const v=n.type.create({...n.attrs,...t});o.removeMark(p,g,n.type),o.addMark(p,g,v)}}),o.docChanged&&e.view.dispatch(o)}var kn=class Jv extends jp{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new Jv(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function ni(n){return new lN({find:n.find,handler:({state:e,range:t,match:s,pasteEvent:l})=>{const o=Qe(n.getAttributes,void 0,s,l);if(o===!1||o===null)return null;const{tr:c}=e,f=s[s.length-1],d=s[0];let p=t.to;if(f){const g=d.search(/\S/),y=t.from+d.indexOf(f),b=y+f.length;if(Dp(t.from,t.to,e.doc).filter(k=>k.mark.type.excluded.find(C=>C===n.type&&C!==k.mark.type)).filter(k=>k.to>y).length)return null;b<t.to&&c.delete(b,t.to),y>t.from&&c.delete(t.from+g,y),p=t.from+g+f.length,c.addMark(t.from+g,p,n.type.create(o||{})),c.removeStoredMark(n.type)}}})}const{getOwnPropertyNames:CN,getOwnPropertySymbols:MN}=Object,{hasOwnProperty:wN}=Object.prototype;function ph(n,e){return function(s,l,o){return n(s,l,o)&&e(s,l,o)}}function cc(n){return function(t,s,l){if(!t||!s||typeof t!="object"||typeof s!="object")return n(t,s,l);const{cache:o}=l,c=o.get(t),f=o.get(s);if(c&&f)return c===s&&f===t;o.set(t,s),o.set(s,t);const d=n(t,s,l);return o.delete(t),o.delete(s),d}}function NN(n){return n?.[Symbol.toStringTag]}function hx(n){return CN(n).concat(MN(n))}const AN=Object.hasOwn||((n,e)=>wN.call(n,e));function ii(n,e){return n===e||!n&&!e&&n!==n&&e!==e}const ON="__v",DN="__o",jN="_owner",{getOwnPropertyDescriptor:px,keys:mx}=Object;function RN(n,e){return n.byteLength===e.byteLength&&zc(new Uint8Array(n),new Uint8Array(e))}function zN(n,e,t){let s=n.length;if(e.length!==s)return!1;for(;s-- >0;)if(!t.equals(n[s],e[s],s,s,n,e,t))return!1;return!0}function LN(n,e){return n.byteLength===e.byteLength&&zc(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function _N(n,e){return ii(n.getTime(),e.getTime())}function BN(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function HN(n,e){return n===e}function gx(n,e,t){const s=n.size;if(s!==e.size)return!1;if(!s)return!0;const l=new Array(s),o=n.entries();let c,f,d=0;for(;(c=o.next())&&!c.done;){const p=e.entries();let g=!1,y=0;for(;(f=p.next())&&!f.done;){if(l[y]){y++;continue}const b=c.value,v=f.value;if(t.equals(b[0],v[0],d,y,n,e,t)&&t.equals(b[1],v[1],b[0],v[0],n,e,t)){g=l[y]=!0;break}y++}if(!g)return!1;d++}return!0}const UN=ii;function IN(n,e,t){const s=mx(n);let l=s.length;if(mx(e).length!==l)return!1;for(;l-- >0;)if(!Fv(n,e,t,s[l]))return!1;return!0}function so(n,e,t){const s=hx(n);let l=s.length;if(hx(e).length!==l)return!1;let o,c,f;for(;l-- >0;)if(o=s[l],!Fv(n,e,t,o)||(c=px(n,o),f=px(e,o),(c||f)&&(!c||!f||c.configurable!==f.configurable||c.enumerable!==f.enumerable||c.writable!==f.writable)))return!1;return!0}function VN(n,e){return ii(n.valueOf(),e.valueOf())}function qN(n,e){return n.source===e.source&&n.flags===e.flags}function yx(n,e,t){const s=n.size;if(s!==e.size)return!1;if(!s)return!0;const l=new Array(s),o=n.values();let c,f;for(;(c=o.next())&&!c.done;){const d=e.values();let p=!1,g=0;for(;(f=d.next())&&!f.done;){if(!l[g]&&t.equals(c.value,f.value,c.value,f.value,n,e,t)){p=l[g]=!0;break}g++}if(!p)return!1}return!0}function zc(n,e){let t=n.byteLength;if(e.byteLength!==t||n.byteOffset!==e.byteOffset)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function $N(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function Fv(n,e,t,s){return(s===jN||s===DN||s===ON)&&(n.$$typeof||e.$$typeof)?!0:AN(e,s)&&t.equals(n[s],e[s],s,s,n,e,t)}const GN="[object ArrayBuffer]",YN="[object Arguments]",KN="[object Boolean]",PN="[object DataView]",JN="[object Date]",FN="[object Error]",XN="[object Map]",QN="[object Number]",ZN="[object Object]",WN="[object RegExp]",eA="[object Set]",tA="[object String]",nA={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},rA="[object URL]",sA=Object.prototype.toString;function iA({areArrayBuffersEqual:n,areArraysEqual:e,areDataViewsEqual:t,areDatesEqual:s,areErrorsEqual:l,areFunctionsEqual:o,areMapsEqual:c,areNumbersEqual:f,areObjectsEqual:d,arePrimitiveWrappersEqual:p,areRegExpsEqual:g,areSetsEqual:y,areTypedArraysEqual:b,areUrlsEqual:v,unknownTagComparators:k}){return function(C,M,L){if(C===M)return!0;if(C==null||M==null)return!1;const V=typeof C;if(V!==typeof M)return!1;if(V!=="object")return V==="number"?f(C,M,L):V==="function"?o(C,M,L):!1;const W=C.constructor;if(W!==M.constructor)return!1;if(W===Object)return d(C,M,L);if(Array.isArray(C))return e(C,M,L);if(W===Date)return s(C,M,L);if(W===RegExp)return g(C,M,L);if(W===Map)return c(C,M,L);if(W===Set)return y(C,M,L);const $=sA.call(C);if($===JN)return s(C,M,L);if($===WN)return g(C,M,L);if($===XN)return c(C,M,L);if($===eA)return y(C,M,L);if($===ZN)return typeof C.then!="function"&&typeof M.then!="function"&&d(C,M,L);if($===rA)return v(C,M,L);if($===FN)return l(C,M,L);if($===YN)return d(C,M,L);if(nA[$])return b(C,M,L);if($===GN)return n(C,M,L);if($===PN)return t(C,M,L);if($===KN||$===QN||$===tA)return p(C,M,L);if(k){let Y=k[$];if(!Y){const I=NN(C);I&&(Y=k[I])}if(Y)return Y(C,M,L)}return!1}}function lA({circular:n,createCustomConfig:e,strict:t}){let s={areArrayBuffersEqual:RN,areArraysEqual:t?so:zN,areDataViewsEqual:LN,areDatesEqual:_N,areErrorsEqual:BN,areFunctionsEqual:HN,areMapsEqual:t?ph(gx,so):gx,areNumbersEqual:UN,areObjectsEqual:t?so:IN,arePrimitiveWrappersEqual:VN,areRegExpsEqual:qN,areSetsEqual:t?ph(yx,so):yx,areTypedArraysEqual:t?ph(zc,so):zc,areUrlsEqual:$N,unknownTagComparators:void 0};if(e&&(s=Object.assign({},s,e(s))),n){const l=cc(s.areArraysEqual),o=cc(s.areMapsEqual),c=cc(s.areObjectsEqual),f=cc(s.areSetsEqual);s=Object.assign({},s,{areArraysEqual:l,areMapsEqual:o,areObjectsEqual:c,areSetsEqual:f})}return s}function oA(n){return function(e,t,s,l,o,c,f){return n(e,t,f)}}function aA({circular:n,comparator:e,createState:t,equals:s,strict:l}){if(t)return function(f,d){const{cache:p=n?new WeakMap:void 0,meta:g}=t();return e(f,d,{cache:p,equals:s,meta:g,strict:l})};if(n)return function(f,d){return e(f,d,{cache:new WeakMap,equals:s,meta:void 0,strict:l})};const o={cache:void 0,equals:s,meta:void 0,strict:l};return function(f,d){return e(f,d,o)}}const cA=vs();vs({strict:!0});vs({circular:!0});vs({circular:!0,strict:!0});vs({createInternalComparator:()=>ii});vs({strict:!0,createInternalComparator:()=>ii});vs({circular:!0,createInternalComparator:()=>ii});vs({circular:!0,createInternalComparator:()=>ii,strict:!0});function vs(n={}){const{circular:e=!1,createInternalComparator:t,createState:s,strict:l=!1}=n,o=lA(n),c=iA(o),f=t?t(c):oA(c);return aA({circular:e,comparator:c,createState:s,equals:f,strict:l})}var mh={exports:{}},gh={};var bx;function uA(){if(bx)return gh;bx=1;var n=Ro(),e=Ix();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var s=typeof Object.is=="function"?Object.is:t,l=e.useSyncExternalStore,o=n.useRef,c=n.useEffect,f=n.useMemo,d=n.useDebugValue;return gh.useSyncExternalStoreWithSelector=function(p,g,y,b,v){var k=o(null);if(k.current===null){var E={hasValue:!1,value:null};k.current=E}else E=k.current;k=f(function(){function M(Y){if(!L){if(L=!0,V=Y,Y=b(Y),v!==void 0&&E.hasValue){var I=E.value;if(v(I,Y))return W=I}return W=Y}if(I=W,s(V,Y))return I;var se=b(Y);return v!==void 0&&v(I,se)?(V=Y,I):(V=Y,W=se)}var L=!1,V,W,$=y===void 0?null:y;return[function(){return M(g())},$===null?void 0:function(){return M($())}]},[g,y,b,v]);var C=l(p,k[0],k[1]);return c(function(){E.hasValue=!0,E.value=C},[C]),d(C),C},gh}var xx;function fA(){return xx||(xx=1,mh.exports=uA()),mh.exports}var dA=fA(),hA=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},pA=({contentComponent:n})=>{const e=Vx.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return x.jsx(x.Fragment,{children:Object.values(e)})};function mA(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,s){e={...e,[t]:bE.createPortal(s.reactElement,s.element,t)},n.forEach(l=>l())},removeRenderer(t){const s={...e};delete s[t],e=s,n.forEach(l=>l())}}}var gA=class extends Zn.Component{constructor(n){var e;super(n),this.editorContentRef=Zn.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=n.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var n;const e=this.props.editor;if(e&&!e.isDestroyed&&((n=e.view.dom)!=null&&n.parentNode)){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t}),e.contentComponent=mA(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(s=>s.hasContentComponentInitialized?s:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((n=e.view.dom)!=null&&n.parentNode))return;const t=document.createElement("div");t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t})}catch{}}}render(){const{editor:n,innerRef:e,...t}=this.props;return x.jsxs(x.Fragment,{children:[x.jsx("div",{ref:hA(e,this.editorContentRef),...t}),n?.contentComponent&&x.jsx(pA,{contentComponent:n.contentComponent})]})}},yA=Q.forwardRef((n,e)=>{const t=Zn.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Zn.createElement(gA,{key:t,innerRef:e,...n})}),Xv=Zn.memo(yA),bA=typeof window<"u"?Q.useLayoutEffect:Q.useEffect,xA=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function vA(n){var e;const[t]=Q.useState(()=>new xA(n.editor)),s=dA.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!=null?e:cA);return bA(()=>t.watch(n.editor),[n.editor,t]),Q.useDebugValue(s),s}var SA=!1,Jh=typeof window>"u",kA=Jh||!!(typeof window<"u"&&window.next),TA=class Qv{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Jh||kA?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...s)=>{var l,o;return(o=(l=this.options.current).onBeforeCreate)==null?void 0:o.call(l,...s)},onBlur:(...s)=>{var l,o;return(o=(l=this.options.current).onBlur)==null?void 0:o.call(l,...s)},onCreate:(...s)=>{var l,o;return(o=(l=this.options.current).onCreate)==null?void 0:o.call(l,...s)},onDestroy:(...s)=>{var l,o;return(o=(l=this.options.current).onDestroy)==null?void 0:o.call(l,...s)},onFocus:(...s)=>{var l,o;return(o=(l=this.options.current).onFocus)==null?void 0:o.call(l,...s)},onSelectionUpdate:(...s)=>{var l,o;return(o=(l=this.options.current).onSelectionUpdate)==null?void 0:o.call(l,...s)},onTransaction:(...s)=>{var l,o;return(o=(l=this.options.current).onTransaction)==null?void 0:o.call(l,...s)},onUpdate:(...s)=>{var l,o;return(o=(l=this.options.current).onUpdate)==null?void 0:o.call(l,...s)},onContentError:(...s)=>{var l,o;return(o=(l=this.options.current).onContentError)==null?void 0:o.call(l,...s)},onDrop:(...s)=>{var l,o;return(o=(l=this.options.current).onDrop)==null?void 0:o.call(l,...s)},onPaste:(...s)=>{var l,o;return(o=(l=this.options.current).onPaste)==null?void 0:o.call(l,...s)},onDelete:(...s)=>{var l,o;return(o=(l=this.options.current).onDelete)==null?void 0:o.call(l,...s)}};return new mN(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(s=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(s)?!0:s==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((l,o)=>{var c;return l===((c=t.extensions)==null?void 0:c[o])}):e[s]===t[s])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Qv.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((s,l)=>s===e[l]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function EA(n={},e=[]){const t=Q.useRef(n);t.current=n;const[s]=Q.useState(()=>new TA(t)),l=Vx.useSyncExternalStore(s.subscribe,s.getEditor,s.getServerSnapshot);return Q.useDebugValue(l),Q.useEffect(s.onRender(e)),vA({editor:l,selector:({transactionNumber:o})=>n.shouldRerenderOnTransaction===!1||n.shouldRerenderOnTransaction===void 0?null:n.immediatelyRender&&o===0?0:o+1}),l}var Zv=Q.createContext({editor:null});Zv.Consumer;var CA=Q.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),MA=()=>Q.useContext(CA);Zn.forwardRef((n,e)=>{const{onDragStart:t}=MA(),s=n.as||"div";return x.jsx(s,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});Zn.createContext({markViewContentRef:()=>{}});var _p=Q.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});_p.displayName="TiptapContext";var wA=()=>Q.useContext(_p);function Wv({editor:n,instance:e,children:t}){const s=n??e;if(!s)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const l=Q.useMemo(()=>({editor:s}),[s]),o=Q.useMemo(()=>({editor:s}),[s]);return x.jsx(Zv.Provider,{value:o,children:x.jsx(_p.Provider,{value:l,children:t})})}Wv.displayName="Tiptap";function eS({...n}){const{editor:e}=wA();return x.jsx(Xv,{editor:e,...n})}eS.displayName="Tiptap.Content";Object.assign(Wv,{Content:eS});var Lc=(n,e)=>{if(n==="slot")return 0;if(n instanceof Function)return n(e);const{children:t,...s}=e??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,s,t]},NA=/^\s*>\s$/,AA=kn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return Lc("blockquote",{...Nt(this.options.HTMLAttributes,n),children:Lc("slot",{})})},parseMarkdown:(n,e)=>e.createNode("blockquote",void 0,e.parseChildren(n.tokens||[])),renderMarkdown:(n,e)=>{if(!n.content)return"";const t=">",s=[];return n.content.forEach(l=>{const f=e.renderChildren([l]).split(`
`).map(d=>d.trim()===""?t:`${t} ${d}`);s.push(f.join(`
`))}),s.join(`
${t}
`)},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ll({find:NA,type:this.type})]}}),OA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,DA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,jA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,RA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,zA=si.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return Lc("strong",{...Nt(this.options.HTMLAttributes,n),children:Lc("slot",{})})},markdownTokenName:"strong",parseMarkdown:(n,e)=>e.applyMark("bold",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`**${e.renderChildren(n)}**`,addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[il({find:OA,type:this.type}),il({find:jA,type:this.type})]},addPasteRules(){return[ni({find:DA,type:this.type}),ni({find:RA,type:this.type})]}}),LA=/(^|[^`])`([^`]+)`(?!`)$/,_A=/(^|[^`])`([^`]+)`(?!`)/g,BA=si.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Nt(this.options.HTMLAttributes,n),0]},markdownTokenName:"codespan",parseMarkdown:(n,e)=>e.applyMark("code",[{type:"text",text:n.text||""}]),renderMarkdown:(n,e)=>n.content?`\`${e.renderChildren(n.content)}\``:"",addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[il({find:LA,type:this.type})]},addPasteRules(){return[ni({find:_A,type:this.type})]}}),yh=4,HA=/^```([a-z]+)?[\s\n]$/,UA=/^~~~([a-z]+)?[\s\n]$/,IA=kn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:yh,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options;if(!t)return null;const o=[...((e=n.firstElementChild)==null?void 0:e.classList)||[]].filter(c=>c.startsWith(t)).map(c=>c.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Nt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(n,e)=>{var t;return((t=n.raw)==null?void 0:t.startsWith("```"))===!1&&n.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:n.lang||null},n.text?[e.createTextNode(n.text)]:[])},renderMarkdown:(n,e)=>{var t;let s="";const l=((t=n.attrs)==null?void 0:t.language)||"";return n.content?s=[`\`\`\`${l}`,e.renderChildren(n.content),"```"].join(`
`):s=`\`\`\`${l}

\`\`\``,s},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:yh,{state:s}=n,{selection:l}=s,{$from:o,empty:c}=l;if(o.parent.type!==this.type)return!1;const f=" ".repeat(t);return c?n.commands.insertContent(f):n.commands.command(({tr:d})=>{const{from:p,to:g}=l,v=s.doc.textBetween(p,g,`
`,`
`).split(`
`).map(k=>f+k).join(`
`);return d.replaceWith(p,g,s.schema.text(v)),!0})},"Shift-Tab":({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:yh,{state:s}=n,{selection:l}=s,{$from:o,empty:c}=l;return o.parent.type!==this.type?!1:c?n.commands.command(({tr:f})=>{var d;const{pos:p}=o,g=o.start(),y=o.end(),v=s.doc.textBetween(g,y,`
`,`
`).split(`
`);let k=0,E=0;const C=p-g;for(let Y=0;Y<v.length;Y+=1){if(E+v[Y].length>=C){k=Y;break}E+=v[Y].length+1}const L=((d=v[k].match(/^ */))==null?void 0:d[0])||"",V=Math.min(L.length,t);if(V===0)return!0;let W=g;for(let Y=0;Y<k;Y+=1)W+=v[Y].length+1;return f.delete(W,W+V),p-W<=V&&f.setSelection(ke.create(f.doc,W)),!0}):n.commands.command(({tr:f})=>{const{from:d,to:p}=l,b=s.doc.textBetween(d,p,`
`,`
`).split(`
`).map(v=>{var k;const E=((k=v.match(/^ */))==null?void 0:k[0])||"",C=Math.min(E.length,t);return v.slice(C)}).join(`
`);return f.replaceWith(d,p,s.schema.text(b)),!0})},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:s,empty:l}=t;if(!l||s.parent.type!==this.type)return!1;const o=s.parentOffset===s.parent.nodeSize-2,c=s.parent.textContent.endsWith(`

`);return!o||!c?!1:n.chain().command(({tr:f})=>(f.delete(s.pos-2,s.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:s}=e,{$from:l,empty:o}=t;if(!o||l.parent.type!==this.type||!(l.parentOffset===l.parent.nodeSize-2))return!1;const f=l.after();return f===void 0?!1:s.nodeAt(f)?n.commands.command(({tr:p})=>(p.setSelection(De.near(s.resolve(f))),!0)):n.commands.exitCode()}}},addInputRules(){return[Kh({find:HA,type:this.type,getAttributes:n=>({language:n[1]})}),Kh({find:UA,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new ht({key:new Ot("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),s=e.clipboardData.getData("vscode-editor-data"),l=s?JSON.parse(s):void 0,o=l?.mode;if(!t||!o)return!1;const{tr:c,schema:f}=n.state,d=f.text(t.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:o},d)),c.selection.$from.parent.type!==this.type&&c.setSelection(ke.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),n.dispatch(c),!0}}})]}}),VA=kn.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`

`):""}),qA=kn.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Nt(this.options.HTMLAttributes,n)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:s})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:l,storedMarks:o}=t;if(l.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:f}=s.extensionManager,d=o||l.$to.parentOffset&&l.$from.marks();return e().insertContent({type:this.name}).command(({tr:p,dispatch:g})=>{if(g&&d&&c){const y=d.filter(b=>f.includes(b.type.name));p.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),$A=kn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Nt(this.options.HTMLAttributes,e),0]},parseMarkdown:(n,e)=>e.createNode("heading",{level:n.depth||1},e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>{var t;const s=(t=n.attrs)!=null&&t.level?parseInt(n.attrs.level,10):1,l="#".repeat(s);return n.content?`${l} ${e.renderChildren(n.content)}`:""},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Kh({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),GA=kn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Nt(this.options.HTMLAttributes,n)]},markdownTokenName:"hr",parseMarkdown:(n,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!yN(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:s}=t,l=n();return Dv(t)?l.insertContentAt(s.pos,{type:this.name}):l.insertContent({type:this.name}),l.command(({state:o,tr:c,dispatch:f})=>{if(f){const{$to:d}=c.selection,p=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?c.setSelection(ke.create(c.doc,d.pos+1)):d.nodeAfter.isBlock?c.setSelection(xe.create(c.doc,d.pos)):c.setSelection(ke.create(c.doc,d.pos));else{const g=o.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,y=g?.create();y&&(c.insert(p,y),c.setSelection(ke.create(c.doc,p+1)))}c.scrollIntoView()}return!0}).run()}}},addInputRules(){return[gN({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),YA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,KA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,PA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,JA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,FA=si.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Nt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(n,e)=>e.applyMark("italic",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`*${e.renderChildren(n)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[il({find:YA,type:this.type}),il({find:PA,type:this.type})]},addPasteRules(){return[ni({find:KA,type:this.type}),ni({find:JA,type:this.type})]}});const XA="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",QA="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Fh="numeric",Xh="ascii",Qh="alpha",go="asciinumeric",uo="alphanumeric",Zh="domain",tS="emoji",ZA="scheme",WA="slashscheme",bh="whitespace";function eO(n,e){return n in e||(e[n]=[]),e[n]}function Ks(n,e,t){e[Fh]&&(e[go]=!0,e[uo]=!0),e[Xh]&&(e[go]=!0,e[Qh]=!0),e[go]&&(e[uo]=!0),e[Qh]&&(e[uo]=!0),e[uo]&&(e[Zh]=!0),e[tS]&&(e[Zh]=!0);for(const s in e){const l=eO(s,t);l.indexOf(n)<0&&l.push(n)}}function tO(n,e){const t={};for(const s in e)e[s].indexOf(n)>=0&&(t[s]=!0);return t}function cn(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}cn.groups={};cn.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let s=0;s<e.jr.length;s++){const l=e.jr[s][0],o=e.jr[s][1];if(o&&l.test(n))return o}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,s){for(let l=0;l<n.length;l++)this.tt(n[l],e,t,s)},tr(n,e,t,s){s=s||cn.groups;let l;return e&&e.j?l=e:(l=new cn(e),t&&s&&Ks(e,t,s)),this.jr.push([n,l]),l},ts(n,e,t,s){let l=this;const o=n.length;if(!o)return l;for(let c=0;c<o-1;c++)l=l.tt(n[c]);return l.tt(n[o-1],e,t,s)},tt(n,e,t,s){s=s||cn.groups;const l=this;if(e&&e.j)return l.j[n]=e,e;const o=e;let c,f=l.go(n);if(f?(c=new cn,Object.assign(c.j,f.j),c.jr.push.apply(c.jr,f.jr),c.jd=f.jd,c.t=f.t):c=new cn,o){if(s)if(c.t&&typeof c.t=="string"){const d=Object.assign(tO(c.t,s),t);Ks(o,d,s)}else t&&Ks(o,t,s);c.t=o}return l.j[n]=c,c}};const Oe=(n,e,t,s,l)=>n.ta(e,t,s,l),gt=(n,e,t,s,l)=>n.tr(e,t,s,l),vx=(n,e,t,s,l)=>n.ts(e,t,s,l),ee=(n,e,t,s,l)=>n.tt(e,t,s,l),kr="WORD",Wh="UWORD",nS="ASCIINUMERICAL",rS="ALPHANUMERICAL",Do="LOCALHOST",ep="TLD",tp="UTLD",yc="SCHEME",Ji="SLASH_SCHEME",Bp="NUM",np="WS",Hp="NL",yo="OPENBRACE",bo="CLOSEBRACE",_c="OPENBRACKET",Bc="CLOSEBRACKET",Hc="OPENPAREN",Uc="CLOSEPAREN",Ic="OPENANGLEBRACKET",Vc="CLOSEANGLEBRACKET",qc="FULLWIDTHLEFTPAREN",$c="FULLWIDTHRIGHTPAREN",Gc="LEFTCORNERBRACKET",Yc="RIGHTCORNERBRACKET",Kc="LEFTWHITECORNERBRACKET",Pc="RIGHTWHITECORNERBRACKET",Jc="FULLWIDTHLESSTHAN",Fc="FULLWIDTHGREATERTHAN",Xc="AMPERSAND",Qc="APOSTROPHE",Zc="ASTERISK",ss="AT",Wc="BACKSLASH",eu="BACKTICK",tu="CARET",as="COLON",Up="COMMA",nu="DOLLAR",Fn="DOT",ru="EQUALS",Ip="EXCLAMATION",zn="HYPHEN",xo="PERCENT",su="PIPE",iu="PLUS",lu="POUND",vo="QUERY",Vp="QUOTE",sS="FULLWIDTHMIDDLEDOT",qp="SEMI",Xn="SLASH",So="TILDE",ou="UNDERSCORE",iS="EMOJI",au="SYM";var lS=Object.freeze({__proto__:null,ALPHANUMERICAL:rS,AMPERSAND:Xc,APOSTROPHE:Qc,ASCIINUMERICAL:nS,ASTERISK:Zc,AT:ss,BACKSLASH:Wc,BACKTICK:eu,CARET:tu,CLOSEANGLEBRACKET:Vc,CLOSEBRACE:bo,CLOSEBRACKET:Bc,CLOSEPAREN:Uc,COLON:as,COMMA:Up,DOLLAR:nu,DOT:Fn,EMOJI:iS,EQUALS:ru,EXCLAMATION:Ip,FULLWIDTHGREATERTHAN:Fc,FULLWIDTHLEFTPAREN:qc,FULLWIDTHLESSTHAN:Jc,FULLWIDTHMIDDLEDOT:sS,FULLWIDTHRIGHTPAREN:$c,HYPHEN:zn,LEFTCORNERBRACKET:Gc,LEFTWHITECORNERBRACKET:Kc,LOCALHOST:Do,NL:Hp,NUM:Bp,OPENANGLEBRACKET:Ic,OPENBRACE:yo,OPENBRACKET:_c,OPENPAREN:Hc,PERCENT:xo,PIPE:su,PLUS:iu,POUND:lu,QUERY:vo,QUOTE:Vp,RIGHTCORNERBRACKET:Yc,RIGHTWHITECORNERBRACKET:Pc,SCHEME:yc,SEMI:qp,SLASH:Xn,SLASH_SCHEME:Ji,SYM:au,TILDE:So,TLD:ep,UNDERSCORE:ou,UTLD:tp,UWORD:Wh,WORD:kr,WS:np});const vr=/[a-z]/,io=new RegExp("\\p{L}","u"),xh=new RegExp("\\p{Emoji}","u"),Sr=/\d/,vh=/\s/,Sx="\r",Sh=`
`,nO="",rO="",kh="";let uc=null,fc=null;function sO(n=[]){const e={};cn.groups=e;const t=new cn;uc==null&&(uc=kx(XA)),fc==null&&(fc=kx(QA)),ee(t,"'",Qc),ee(t,"{",yo),ee(t,"}",bo),ee(t,"[",_c),ee(t,"]",Bc),ee(t,"(",Hc),ee(t,")",Uc),ee(t,"<",Ic),ee(t,">",Vc),ee(t,"",qc),ee(t,"",$c),ee(t,"",Gc),ee(t,"",Yc),ee(t,"",Kc),ee(t,"",Pc),ee(t,"",Jc),ee(t,"",Fc),ee(t,"&",Xc),ee(t,"*",Zc),ee(t,"@",ss),ee(t,"`",eu),ee(t,"^",tu),ee(t,":",as),ee(t,",",Up),ee(t,"$",nu),ee(t,".",Fn),ee(t,"=",ru),ee(t,"!",Ip),ee(t,"-",zn),ee(t,"%",xo),ee(t,"|",su),ee(t,"+",iu),ee(t,"#",lu),ee(t,"?",vo),ee(t,'"',Vp),ee(t,"/",Xn),ee(t,";",qp),ee(t,"~",So),ee(t,"_",ou),ee(t,"\\",Wc),ee(t,"",sS);const s=gt(t,Sr,Bp,{[Fh]:!0});gt(s,Sr,s);const l=gt(s,vr,nS,{[go]:!0}),o=gt(s,io,rS,{[uo]:!0}),c=gt(t,vr,kr,{[Xh]:!0});gt(c,Sr,l),gt(c,vr,c),gt(l,Sr,l),gt(l,vr,l);const f=gt(t,io,Wh,{[Qh]:!0});gt(f,vr),gt(f,Sr,o),gt(f,io,f),gt(o,Sr,o),gt(o,vr),gt(o,io,o);const d=ee(t,Sh,Hp,{[bh]:!0}),p=ee(t,Sx,np,{[bh]:!0}),g=gt(t,vh,np,{[bh]:!0});ee(t,kh,g),ee(p,Sh,d),ee(p,kh,g),gt(p,vh,g),ee(g,Sx),ee(g,Sh),gt(g,vh,g),ee(g,kh,g);const y=gt(t,xh,iS,{[tS]:!0});ee(y,"#"),gt(y,xh,y),ee(y,nO,y);const b=ee(y,rO);ee(b,"#"),gt(b,xh,y);const v=[[vr,c],[Sr,l]],k=[[vr,null],[io,f],[Sr,o]];for(let E=0;E<uc.length;E++)es(t,uc[E],ep,kr,v);for(let E=0;E<fc.length;E++)es(t,fc[E],tp,Wh,k);Ks(ep,{tld:!0,ascii:!0},e),Ks(tp,{utld:!0,alpha:!0},e),es(t,"file",yc,kr,v),es(t,"mailto",yc,kr,v),es(t,"http",Ji,kr,v),es(t,"https",Ji,kr,v),es(t,"ftp",Ji,kr,v),es(t,"ftps",Ji,kr,v),Ks(yc,{scheme:!0,ascii:!0},e),Ks(Ji,{slashscheme:!0,ascii:!0},e),n=n.sort((E,C)=>E[0]>C[0]?1:-1);for(let E=0;E<n.length;E++){const C=n[E][0],L=n[E][1]?{[ZA]:!0}:{[WA]:!0};C.indexOf("-")>=0?L[Zh]=!0:vr.test(C)?Sr.test(C)?L[go]=!0:L[Xh]=!0:L[Fh]=!0,vx(t,C,C,L)}return vx(t,"localhost",Do,{ascii:!0}),t.jd=new cn(au),{start:t,tokens:Object.assign({groups:e},lS)}}function oS(n,e){const t=iO(e.replace(/[A-Z]/g,f=>f.toLowerCase())),s=t.length,l=[];let o=0,c=0;for(;c<s;){let f=n,d=null,p=0,g=null,y=-1,b=-1;for(;c<s&&(d=f.go(t[c]));)f=d,f.accepts()?(y=0,b=0,g=f):y>=0&&(y+=t[c].length,b++),p+=t[c].length,o+=t[c].length,c++;o-=y,c-=b,p-=y,l.push({t:g.t,v:e.slice(o-p,o),s:o-p,e:o})}return l}function iO(n){const e=[],t=n.length;let s=0;for(;s<t;){let l=n.charCodeAt(s),o,c=l<55296||l>56319||s+1===t||(o=n.charCodeAt(s+1))<56320||o>57343?n[s]:n.slice(s,s+2);e.push(c),s+=c.length}return e}function es(n,e,t,s,l){let o;const c=e.length;for(let f=0;f<c-1;f++){const d=e[f];n.j[d]?o=n.j[d]:(o=new cn(s),o.jr=l.slice(),n.j[d]=o),n=o}return o=new cn(t),o.jr=l.slice(),n.j[e[c-1]]=o,o}function kx(n){const e=[],t=[];let s=0,l="0123456789";for(;s<n.length;){let o=0;for(;l.indexOf(n[s+o])>=0;)o++;if(o>0){e.push(t.join(""));for(let c=parseInt(n.substring(s,s+o),10);c>0;c--)t.pop();s+=o}else t.push(n[s]),s++}return e}const jo={defaultProtocol:"http",events:null,format:Tx,formatHref:Tx,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function $p(n,e=null){let t=Object.assign({},jo);n&&(t=Object.assign(t,n instanceof $p?n.o:n));const s=t.ignoreTags,l=[];for(let o=0;o<s.length;o++)l.push(s[o].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=l}$p.prototype={o:jo,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const s=e!=null;let l=this.o[n];return l&&(typeof l=="object"?(l=t.t in l?l[t.t]:jo[n],typeof l=="function"&&s&&(l=l(e,t))):typeof l=="function"&&s&&(l=l(e,t.t,t)),l)},getObj(n,e,t){let s=this.o[n];return typeof s=="function"&&e!=null&&(s=s(e,t.t,t)),s},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function Tx(n){return n}function aS(n,e){this.t="token",this.v=n,this.tk=e}aS.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),s=n.get("format",e,this);return t&&s.length>t?s.substring(0,t)+"":s},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=jo.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),s=n.get("formatHref",t,this),l=n.get("tagName",t,e),o=this.toFormattedString(n),c={},f=n.get("className",t,e),d=n.get("target",t,e),p=n.get("rel",t,e),g=n.getObj("attributes",t,e),y=n.getObj("events",t,e);return c.href=s,f&&(c.class=f),d&&(c.target=d),p&&(c.rel=p),g&&Object.assign(c,g),{tagName:l,attributes:c,content:o,eventListeners:y}}};function Eu(n,e){class t extends aS{constructor(l,o){super(l,o),this.t=n}}for(const s in e)t.prototype[s]=e[s];return t.t=n,t}const Ex=Eu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Cx=Eu("text"),lO=Eu("nl"),dc=Eu("url",{isLink:!0,toHref(n=jo.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Do&&n[1].t===as}}),Rn=n=>new cn(n);function oO({groups:n}){const e=n.domain.concat([Xc,Zc,ss,Wc,eu,tu,nu,ru,zn,Bp,xo,su,iu,lu,Xn,au,So,ou]),t=[Qc,as,Up,Fn,Ip,xo,vo,Vp,qp,Ic,Vc,yo,bo,Bc,_c,Hc,Uc,qc,$c,Gc,Yc,Kc,Pc,Jc,Fc],s=[Xc,Qc,Zc,Wc,eu,tu,nu,ru,zn,yo,bo,xo,su,iu,lu,vo,Xn,au,So,ou],l=Rn(),o=ee(l,So);Oe(o,s,o),Oe(o,n.domain,o);const c=Rn(),f=Rn(),d=Rn();Oe(l,n.domain,c),Oe(l,n.scheme,f),Oe(l,n.slashscheme,d),Oe(c,s,o),Oe(c,n.domain,c);const p=ee(c,ss);ee(o,ss,p),ee(f,ss,p),ee(d,ss,p);const g=ee(o,Fn);Oe(g,s,o),Oe(g,n.domain,o);const y=Rn();Oe(p,n.domain,y),Oe(y,n.domain,y);const b=ee(y,Fn);Oe(b,n.domain,y);const v=Rn(Ex);Oe(b,n.tld,v),Oe(b,n.utld,v),ee(p,Do,v);const k=ee(y,zn);ee(k,zn,k),Oe(k,n.domain,y),Oe(v,n.domain,y),ee(v,Fn,b),ee(v,zn,k);const E=ee(v,as);Oe(E,n.numeric,Ex);const C=ee(c,zn),M=ee(c,Fn);ee(C,zn,C),Oe(C,n.domain,c),Oe(M,s,o),Oe(M,n.domain,c);const L=Rn(dc);Oe(M,n.tld,L),Oe(M,n.utld,L),Oe(L,n.domain,c),Oe(L,s,o),ee(L,Fn,M),ee(L,zn,C),ee(L,ss,p);const V=ee(L,as),W=Rn(dc);Oe(V,n.numeric,W);const $=Rn(dc),Y=Rn();Oe($,e,$),Oe($,t,Y),Oe(Y,e,$),Oe(Y,t,Y),ee(L,Xn,$),ee(W,Xn,$);const I=ee(f,as),se=ee(d,as),ue=ee(se,Xn),je=ee(ue,Xn);Oe(f,n.domain,c),ee(f,Fn,M),ee(f,zn,C),Oe(d,n.domain,c),ee(d,Fn,M),ee(d,zn,C),Oe(I,n.domain,$),ee(I,Xn,$),ee(I,vo,$),Oe(je,n.domain,$),Oe(je,e,$),ee(je,Xn,$);const st=[[yo,bo],[_c,Bc],[Hc,Uc],[Ic,Vc],[qc,$c],[Gc,Yc],[Kc,Pc],[Jc,Fc]];for(let Le=0;Le<st.length;Le++){const[ft,Ve]=st[Le],Te=ee($,ft);ee(Y,ft,Te),ee(Te,Ve,$);const H=Rn(dc);Oe(Te,e,H);const Z=Rn();Oe(Te,t),Oe(H,e,H),Oe(H,t,Z),Oe(Z,e,H),Oe(Z,t,Z),ee(H,Ve,$),ee(Z,Ve,$)}return ee(l,Do,L),ee(l,Hp,lO),{start:l,tokens:lS}}function aO(n,e,t){let s=t.length,l=0,o=[],c=[];for(;l<s;){let f=n,d=null,p=null,g=0,y=null,b=-1;for(;l<s&&!(d=f.go(t[l].t));)c.push(t[l++]);for(;l<s&&(p=d||f.go(t[l].t));)d=null,f=p,f.accepts()?(b=0,y=f):b>=0&&b++,l++,g++;if(b<0)l-=g,l<s&&(c.push(t[l]),l++);else{c.length>0&&(o.push(Th(Cx,e,c)),c=[]),l-=b,g-=b;const v=y.t,k=t.slice(l-g,l);o.push(Th(v,e,k))}}return c.length>0&&o.push(Th(Cx,e,c)),o}function Th(n,e,t){const s=t[0].s,l=t[t.length-1].e,o=e.slice(s,l);return new n(o,t)}const cO=typeof console<"u"&&console&&console.warn||(()=>{}),uO="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ot={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function fO(){return cn.groups={},ot.scanner=null,ot.parser=null,ot.tokenQueue=[],ot.pluginQueue=[],ot.customSchemes=[],ot.initialized=!1,ot}function Mx(n,e=!1){if(ot.initialized&&cO(`linkifyjs: already initialized - will not register custom scheme "${n}" ${uO}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);ot.customSchemes.push([n,e])}function dO(){ot.scanner=sO(ot.customSchemes);for(let n=0;n<ot.tokenQueue.length;n++)ot.tokenQueue[n][1]({scanner:ot.scanner});ot.parser=oO(ot.scanner.tokens);for(let n=0;n<ot.pluginQueue.length;n++)ot.pluginQueue[n][1]({scanner:ot.scanner,parser:ot.parser});return ot.initialized=!0,ot}function Gp(n){return ot.initialized||dO(),aO(ot.parser.start,n,oS(ot.scanner.start,n))}Gp.scan=oS;function cS(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const s=new $p(t),l=Gp(n),o=[];for(let c=0;c<l.length;c++){const f=l[c];f.isLink&&(!e||f.t===e)&&s.check(f)&&o.push(f.toFormattedObject(s))}return o}var Yp="[\0- -\u2029]",hO=new RegExp(Yp),pO=new RegExp(`${Yp}$`),mO=new RegExp(Yp,"g");function gO(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function yO(n){return new ht({key:new Ot("autolink"),appendTransaction:(e,t,s)=>{const l=e.some(p=>p.docChanged)&&!t.doc.eq(s.doc),o=e.some(p=>p.getMeta("preventAutolink"));if(!l||o)return;const{tr:c}=s,f=Tv(t.doc,[...e]);if(Ov(f).forEach(({newRange:p})=>{const g=y2(s.doc,p,v=>v.isTextblock);let y,b;if(g.length>1)y=g[0],b=s.doc.textBetween(y.pos,y.pos+y.node.nodeSize,void 0," ");else if(g.length){const v=s.doc.textBetween(p.from,p.to," "," ");if(!pO.test(v))return;y=g[0],b=s.doc.textBetween(y.pos,p.to,void 0," ")}if(y&&b){const v=b.split(hO).filter(Boolean);if(v.length<=0)return!1;const k=v[v.length-1],E=y.pos+b.lastIndexOf(k);if(!k)return!1;const C=Gp(k).map(M=>M.toObject(n.defaultProtocol));if(!gO(C))return!1;C.filter(M=>M.isLink).map(M=>({...M,from:E+M.start+1,to:E+M.end+1})).filter(M=>s.schema.marks.code?!s.doc.rangeHasMark(M.from,M.to,s.schema.marks.code):!0).filter(M=>n.validate(M.value)).filter(M=>n.shouldAutoLink(M.value)).forEach(M=>{Dp(M.from,M.to,s.doc).some(L=>L.mark.type===n.type)||c.addMark(M.from,M.to,n.type.create({href:M.href}))})}}),!!c.steps.length)return c}})}function bO(n){return new ht({key:new Ot("handleClickLink"),props:{handleClick:(e,t,s)=>{var l,o;if(s.button!==0||!e.editable)return!1;let c=null;if(s.target instanceof HTMLAnchorElement)c=s.target;else{const d=s.target;if(!d)return!1;const p=n.editor.view.dom;c=d.closest("a"),c&&!p.contains(c)&&(c=null)}if(!c)return!1;let f=!1;if(n.enableClickSelection&&(f=n.editor.commands.extendMarkRange(n.type.name)),n.openOnClick){const d=Av(e.state,n.type.name),p=(l=c.href)!=null?l:d.href,g=(o=c.target)!=null?o:d.target;p&&(window.open(p,g),f=!0)}return f}}})}function xO(n){return new ht({key:new Ot("handlePasteLink"),props:{handlePaste:(e,t,s)=>{const{shouldAutoLink:l}=n,{state:o}=e,{selection:c}=o,{empty:f}=c;if(f)return!1;let d="";s.content.forEach(g=>{d+=g.textContent});const p=cS(d,{defaultProtocol:n.defaultProtocol}).find(g=>g.isLink&&g.value===d);return!d||!p||l!==void 0&&!l(p.value)?!1:n.editor.commands.setMark(n.type,{href:p.href})}}})}function Vs(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(s=>{const l=typeof s=="string"?s:s.scheme;l&&t.push(l)}),!n||n.replace(mO,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var vO=si.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){Mx(n);return}Mx(n.scheme,n.optionalSlashes)})},onDestroy(){fO()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Vs(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(n),t=/^[a-z][a-z0-9+.-]*:/i.test(n);if(e||t&&!n.includes("@"))return!0;const l=(n.includes("@")?n.split("@").pop():n).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(l)||!/\./.test(l))}}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Vs(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Vs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Nt(this.options.HTMLAttributes,n),0]:["a",Nt(this.options.HTMLAttributes,{...n,href:""}),0]},markdownTokenName:"link",parseMarkdown:(n,e)=>e.applyMark("link",e.parseInline(n.tokens||[]),{href:n.href,title:n.title||null}),renderMarkdown:(n,e)=>{var t,s,l,o;const c=(s=(t=n.attrs)==null?void 0:t.href)!=null?s:"",f=(o=(l=n.attrs)==null?void 0:l.title)!=null?o:"",d=e.renderChildren(n);return f?`[${d}](${c} "${f}")`:`[${d}](${c})`},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:s=>!!Vs(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:s=>!!Vs(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ni({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:s}=this.options,l=cS(n).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:c=>!!Vs(c,t),protocols:t,defaultProtocol:s}));l.length&&l.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(yO({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:s=>this.options.isAllowedUri(s,{defaultValidate:l=>!!Vs(l,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),n.push(bO({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(xO({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),n}}),SO=Object.defineProperty,kO=(n,e)=>{for(var t in e)SO(n,t,{get:e[t],enumerable:!0})},TO="listItem",wx="textStyle",Nx=/^\s*([-+*])\s$/,uS=kn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Nt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>n.type!=="list"||n.ordered?[]:{type:"bulletList",content:n.items?e.parseChildren(n.items):[]},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(TO,this.editor.getAttributes(wx)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=ll({find:Nx,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ll({find:Nx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(wx),editor:this.editor})),[n]}}),fS=kn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Nt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list_item",parseMarkdown:(n,e)=>{if(n.type!=="list_item")return[];let t=[];if(n.tokens&&n.tokens.length>0)if(n.tokens.some(l=>l.type==="paragraph"))t=e.parseChildren(n.tokens);else{const l=n.tokens[0];if(l&&l.type==="text"&&l.tokens&&l.tokens.length>0){if(t=[{type:"paragraph",content:e.parseInline(l.tokens)}],n.tokens.length>1){const c=n.tokens.slice(1),f=e.parseChildren(c);t.push(...f)}}else t=e.parseChildren(n.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(n,e,t)=>Lp(n,e,s=>{var l,o;return s.parentType==="bulletList"?"- ":s.parentType==="orderedList"?`${(((o=(l=s.meta)==null?void 0:l.parentAttrs)==null?void 0:o.start)||1)+s.index}. `:"- "},t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),EO={};kO(EO,{findListItemPos:()=>Ho,getNextListDepth:()=>Kp,handleBackspace:()=>rp,handleDelete:()=>sp,hasListBefore:()=>dS,hasListItemAfter:()=>CO,hasListItemBefore:()=>hS,listItemHasSubList:()=>pS,nextListIsDeeper:()=>mS,nextListIsHigher:()=>gS});var Ho=(n,e)=>{const{$from:t}=e.selection,s=wt(n,e.schema);let l=null,o=t.depth,c=t.pos,f=null;for(;o>0&&f===null;)l=t.node(o),l.type===s?f=o:(o-=1,c-=1);return f===null?null:{$pos:e.doc.resolve(c),depth:f}},Kp=(n,e)=>{const t=Ho(n,e);if(!t)return!1;const[,s]=w2(e,n,t.$pos.pos+4);return s},dS=(n,e,t)=>{const{$anchor:s}=n.selection,l=Math.max(0,s.pos-2),o=n.doc.resolve(l).node();return!(!o||!t.includes(o.type.name))},hS=(n,e)=>{var t;const{$anchor:s}=e.selection,l=e.doc.resolve(s.pos-2);return!(l.index()===0||((t=l.nodeBefore)==null?void 0:t.type.name)!==n)},pS=(n,e,t)=>{if(!t)return!1;const s=wt(n,e.schema);let l=!1;return t.descendants(o=>{o.type===s&&(l=!0)}),l},rp=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!ys(n.state,e)&&dS(n.state,e,t)){const{$anchor:f}=n.state.selection,d=n.state.doc.resolve(f.before()-1),p=[];d.node().descendants((b,v)=>{b.type.name===e&&p.push({node:b,pos:v})});const g=p.at(-1);if(!g)return!1;const y=n.state.doc.resolve(d.start()+g.pos+1);return n.chain().cut({from:f.start()-1,to:f.end()+1},y.end()).joinForward().run()}if(!ys(n.state,e)||!D2(n.state))return!1;const s=Ho(e,n.state);if(!s)return!1;const o=n.state.doc.resolve(s.$pos.pos-2).node(s.depth),c=pS(e,n.state,o);return hS(e,n.state)&&!c?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},mS=(n,e)=>{const t=Kp(n,e),s=Ho(n,e);return!s||!t?!1:t>s.depth},gS=(n,e)=>{const t=Kp(n,e),s=Ho(n,e);return!s||!t?!1:t<s.depth},sp=(n,e)=>{if(!ys(n.state,e)||!O2(n.state,e))return!1;const{selection:t}=n.state,{$from:s,$to:l}=t;return!t.empty&&s.sameParent(l)?!1:mS(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():gS(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},CO=(n,e)=>{var t;const{$anchor:s}=e.selection,l=e.doc.resolve(s.pos-s.parentOffset-2);return!(l.index()===l.parent.childCount-1||((t=l.nodeAfter)==null?void 0:t.type.name)!==n)},yS=St.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&sp(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&sp(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:s})=>{n.state.schema.nodes[t]!==void 0&&rp(n,t,s)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:s})=>{n.state.schema.nodes[t]!==void 0&&rp(n,t,s)&&(e=!0)}),e}}}}),Ax=/^(\s*)(\d+)\.\s+(.*)$/,MO=/^\s/;function wO(n){const e=[];let t=0,s=0;for(;t<n.length;){const l=n[t],o=l.match(Ax);if(!o)break;const[,c,f,d]=o,p=c.length;let g=d,y=t+1;const b=[l];for(;y<n.length;){const v=n[y];if(v.match(Ax))break;if(v.trim()==="")b.push(v),g+=`
`,y+=1;else if(v.match(MO))b.push(v),g+=`
${v.slice(p+2)}`,y+=1;else break}e.push({indent:p,number:parseInt(f,10),content:g.trim(),raw:b.join(`
`)}),s=y,t=y}return[e,s]}function bS(n,e,t){var s;const l=[];let o=0;for(;o<n.length;){const c=n[o];if(c.indent===e){const f=c.content.split(`
`),d=((s=f[0])==null?void 0:s.trim())||"",p=[];d&&p.push({type:"paragraph",raw:d,tokens:t.inlineTokens(d)});const g=f.slice(1).join(`
`).trim();if(g){const v=t.blockTokens(g);p.push(...v)}let y=o+1;const b=[];for(;y<n.length&&n[y].indent>e;)b.push(n[y]),y+=1;if(b.length>0){const v=Math.min(...b.map(E=>E.indent)),k=bS(b,v,t);p.push({type:"list",ordered:!0,start:b[0].number,items:k,raw:b.map(E=>E.raw).join(`
`)})}l.push({type:"list_item",raw:c.raw,tokens:p}),o=y}else o+=1}return l}function NO(n,e){return n.map(t=>{if(t.type!=="list_item")return e.parseChildren([t])[0];const s=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(l=>{if(l.type==="paragraph"||l.type==="list"||l.type==="blockquote"||l.type==="code")s.push(...e.parseChildren([l]));else if(l.type==="text"&&l.tokens){const o=e.parseChildren([l]);s.push({type:"paragraph",content:o})}else{const o=e.parseChildren([l]);o.length>0&&s.push(...o)}}),{type:"listItem",content:s}})}var AO="listItem",Ox="textStyle",Dx=/^(\d+)\.\s$/,xS=kn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Nt(this.options.HTMLAttributes,t),0]:["ol",Nt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>{if(n.type!=="list"||!n.ordered)return[];const t=n.start||1,s=n.items?NO(n.items,e):[];return t!==1?{type:"orderedList",attrs:{start:t},content:s}:{type:"orderedList",content:s}},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:n=>{const e=n.match(/^(\s*)(\d+)\.\s+/),t=e?.index;return t!==void 0?t:-1},tokenize:(n,e,t)=>{var s;const l=n.split(`
`),[o,c]=wO(l);if(o.length===0)return;const f=bS(o,0,t);return f.length===0?void 0:{type:"list",ordered:!0,start:((s=o[0])==null?void 0:s.number)||1,items:f,raw:l.slice(0,c).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(AO,this.editor.getAttributes(Ox)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=ll({find:Dx,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ll({find:Dx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Ox)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),OO=/^\s*(\[([( |x])?\])\s$/,vS=kn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",Nt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(n,e)=>{const t=[];if(n.tokens&&n.tokens.length>0?t.push(e.createNode("paragraph",{},e.parseInline(n.tokens))):n.text?t.push(e.createNode("paragraph",{},[e.createNode("text",{text:n.text})])):t.push(e.createNode("paragraph",{},[])),n.nestedTokens&&n.nestedTokens.length>0){const s=e.parseChildren(n.nestedTokens);t.push(...s)}return e.createNode("taskItem",{checked:n.checked||!1},t)},renderMarkdown:(n,e)=>{var t;const l=`- [${(t=n.attrs)!=null&&t.checked?"x":" "}] `;return Lp(n,e,l)},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:s})=>{const l=document.createElement("li"),o=document.createElement("label"),c=document.createElement("span"),f=document.createElement("input"),d=document.createElement("div"),p=y=>{var b,v;f.ariaLabel=((v=(b=this.options.a11y)==null?void 0:b.checkboxLabel)==null?void 0:v.call(b,y,f.checked))||`Task item checkbox for ${y.textContent||"empty task item"}`};p(n),o.contentEditable="false",f.type="checkbox",f.addEventListener("mousedown",y=>y.preventDefault()),f.addEventListener("change",y=>{if(!s.isEditable&&!this.options.onReadOnlyChecked){f.checked=!f.checked;return}const{checked:b}=y.target;s.isEditable&&typeof t=="function"&&s.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:v})=>{const k=t();if(typeof k!="number")return!1;const E=v.doc.nodeAt(k);return v.setNodeMarkup(k,void 0,{...E?.attrs,checked:b}),!0}).run(),!s.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,b)||(f.checked=!f.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([y,b])=>{l.setAttribute(y,b)}),l.dataset.checked=n.attrs.checked,f.checked=n.attrs.checked,o.append(f,c),l.append(o,d),Object.entries(e).forEach(([y,b])=>{l.setAttribute(y,b)});let g=new Set(Object.keys(e));return{dom:l,contentDOM:d,update:y=>{if(y.type!==this.type)return!1;l.dataset.checked=y.attrs.checked,f.checked=y.attrs.checked,p(y);const b=s.extensionManager.attributes,v=Oo(y,b),k=new Set(Object.keys(v)),E=this.options.HTMLAttributes;return g.forEach(C=>{k.has(C)||(C in E?l.setAttribute(C,E[C]):l.removeAttribute(C))}),Object.entries(v).forEach(([C,M])=>{M==null?C in E?l.setAttribute(C,E[C]):l.removeAttribute(C):l.setAttribute(C,M)}),g=k,!0}}}},addInputRules(){return[ll({find:OO,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),SS=kn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",Nt(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},parseMarkdown:(n,e)=>e.createNode("taskList",{},e.parseChildren(n.items||[])),renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(n){var e;const t=(e=n.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return t!==void 0?t:-1},tokenize(n,e,t){const s=o=>{const c=Ph(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:f=>({indentLevel:f[1].length,mainContent:f[4],checked:f[3].toLowerCase()==="x"}),createToken:(f,d)=>({type:"taskItem",raw:"",mainContent:f.mainContent,indentLevel:f.indentLevel,checked:f.checked,text:f.mainContent,tokens:t.inlineTokens(f.mainContent),nestedTokens:d}),customNestedParser:s},t);return c?[{type:"taskList",raw:c.raw,items:c.items}]:t.blockTokens(o)},l=Ph(n,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,c)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:t.inlineTokens(o.mainContent),nestedTokens:c}),customNestedParser:s},t);if(l)return{type:"taskList",raw:l.raw,items:l.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});St.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(uS.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push(fS.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(yS.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(xS.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(vS.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(SS.configure(this.options.taskList)),n}});var jx="&nbsp;",DO="",jO=kn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Nt(this.options.HTMLAttributes,n),0]},parseMarkdown:(n,e)=>{const t=n.tokens||[];if(t.length===1&&t[0].type==="image")return e.parseChildren([t[0]]);const s=e.parseInline(t);return s.length===1&&s[0].type==="text"&&(s[0].text===jx||s[0].text===DO)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,s)},renderMarkdown:(n,e)=>{if(!n)return"";const t=Array.isArray(n.content)?n.content:[];return t.length===0?jx:e.renderChildren(t)},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),RO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,zO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,LO=si.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Nt(this.options.HTMLAttributes,n),0]},markdownTokenName:"del",parseMarkdown:(n,e)=>e.applyMark("strike",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`~~${e.renderChildren(n)}~~`,addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[il({find:RO,type:this.type})]},addPasteRules(){return[ni({find:zO,type:this.type})]}}),_O=kn.create({name:"text",group:"inline",parseMarkdown:n=>({type:"text",text:n.text||""}),renderMarkdown:n=>n.text||""}),BO=si.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",Nt(this.options.HTMLAttributes,n),0]},parseMarkdown(n,e){return e.applyMark(this.name||"underline",e.parseInline(n.tokens||[]))},renderMarkdown(n,e){return`++${e.renderChildren(n)}++`},markdownTokenizer:{name:"underline",level:"inline",start(n){return n.indexOf("++")},tokenize(n,e,t){const l=/^(\+\+)([\s\S]+?)(\+\+)/.exec(n);if(!l)return;const o=l[2].trim();return{type:"underline",raw:l[0],text:o,tokens:t.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function HO(n={}){return new ht({view(e){return new UO(e,n)}})}class UO{constructor(e,t){var s;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(s=t.width)!==null&&s!==void 0?s:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(l=>{let o=c=>{this[l](c)};return e.dom.addEventListener(l,o),{name:l,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,s,l=this.editorView.dom,o=l.getBoundingClientRect(),c=o.width/l.offsetWidth,f=o.height/l.offsetHeight;if(t){let y=e.nodeBefore,b=e.nodeAfter;if(y||b){let v=this.editorView.nodeDOM(this.cursorPos-(y?y.nodeSize:0));if(v){let k=v.getBoundingClientRect(),E=y?k.bottom:k.top;y&&b&&(E=(E+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let C=this.width/2*f;s={left:k.left,right:k.right,top:E-C,bottom:E+C}}}}if(!s){let y=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*c;s={left:y.left-b,right:y.left+b,top:y.top,bottom:y.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let p,g;if(!d||d==document.body&&getComputedStyle(d).position=="static")p=-pageXOffset,g=-pageYOffset;else{let y=d.getBoundingClientRect(),b=y.width/d.offsetWidth,v=y.height/d.offsetHeight;p=y.left-d.scrollLeft*b,g=y.top-d.scrollTop*v}this.element.style.left=(s.left-p)/c+"px",this.element.style.top=(s.top-g)/f+"px",this.element.style.width=(s.right-s.left)/c+"px",this.element.style.height=(s.bottom-s.top)/f+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),s=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),l=s&&s.type.spec.disableDropCursor,o=typeof l=="function"?l(this.editorView,t,e):l;if(t&&!o){let c=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let f=p1(this.editorView.state.doc,c,this.editorView.dragging.slice);f!=null&&(c=f)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class yt extends De{constructor(e){super(e,e)}map(e,t){let s=e.resolve(t.map(this.head));return yt.valid(s)?new yt(s):De.near(s)}content(){return ie.empty}eq(e){return e instanceof yt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new yt(e.resolve(t.pos))}getBookmark(){return new Pp(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!IO(e)||!VO(e))return!1;let s=t.type.spec.allowGapCursor;if(s!=null)return s;let l=t.contentMatchAt(e.index()).defaultType;return l&&l.isTextblock}static findGapCursorFrom(e,t,s=!1){e:for(;;){if(!s&&yt.valid(e))return e;let l=e.pos,o=null;for(let c=e.depth;;c--){let f=e.node(c);if(t>0?e.indexAfter(c)<f.childCount:e.index(c)>0){o=f.child(t>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;l+=t;let d=e.doc.resolve(l);if(yt.valid(d))return d}for(;;){let c=t>0?o.firstChild:o.lastChild;if(!c){if(o.isAtom&&!o.isText&&!xe.isSelectable(o)){e=e.doc.resolve(l+o.nodeSize*t),s=!1;continue e}break}o=c,l+=t;let f=e.doc.resolve(l);if(yt.valid(f))return f}return null}}}yt.prototype.visible=!1;yt.findFrom=yt.findGapCursorFrom;De.jsonID("gapcursor",yt);class Pp{constructor(e){this.pos=e}map(e){return new Pp(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return yt.valid(t)?new yt(t):De.near(t)}}function kS(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function IO(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),s=n.node(e);if(t==0){if(s.type.spec.isolating)return!0;continue}for(let l=s.child(t-1);;l=l.lastChild){if(l.childCount==0&&!l.inlineContent||kS(l.type))return!0;if(l.inlineContent)return!1}}return!0}function VO(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),s=n.node(e);if(t==s.childCount){if(s.type.spec.isolating)return!0;continue}for(let l=s.child(t);;l=l.firstChild){if(l.childCount==0&&!l.inlineContent||kS(l.type))return!0;if(l.inlineContent)return!1}}return!0}function qO(){return new ht({props:{decorations:KO,createSelectionBetween(n,e,t){return e.pos==t.pos&&yt.valid(t)?new yt(t):null},handleClick:GO,handleKeyDown:$O,handleDOMEvents:{beforeinput:YO}}})}const $O=mv({ArrowLeft:hc("horiz",-1),ArrowRight:hc("horiz",1),ArrowUp:hc("vert",-1),ArrowDown:hc("vert",1)});function hc(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(s,l,o){let c=s.selection,f=e>0?c.$to:c.$from,d=c.empty;if(c instanceof ke){if(!o.endOfTextblock(t)||f.depth==0)return!1;d=!1,f=s.doc.resolve(e>0?f.after():f.before())}let p=yt.findGapCursorFrom(f,e,d);return p?(l&&l(s.tr.setSelection(new yt(p))),!0):!1}}function GO(n,e,t){if(!n||!n.editable)return!1;let s=n.state.doc.resolve(e);if(!yt.valid(s))return!1;let l=n.posAtCoords({left:t.clientX,top:t.clientY});return l&&l.inside>-1&&xe.isSelectable(n.state.doc.nodeAt(l.inside))?!1:(n.dispatch(n.state.tr.setSelection(new yt(s))),!0)}function YO(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof yt))return!1;let{$from:t}=n.state.selection,s=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!s)return!1;let l=X.empty;for(let c=s.length-1;c>=0;c--)l=X.from(s[c].createAndFill(null,l));let o=n.state.tr.replace(t.pos,t.pos,new ie(l,0,0));return o.setSelection(ke.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function KO(n){if(!(n.selection instanceof yt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",dt.create(n.doc,[Zt.widget(n.selection.head,e,{key:"gapcursor"})])}var cu=200,_t=function(){};_t.prototype.append=function(e){return e.length?(e=_t.from(e),!this.length&&e||e.length<cu&&this.leafAppend(e)||this.length<cu&&e.leafPrepend(this)||this.appendInner(e)):this};_t.prototype.prepend=function(e){return e.length?_t.from(e).append(this):this};_t.prototype.appendInner=function(e){return new PO(this,e)};_t.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?_t.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};_t.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};_t.prototype.forEach=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length),t<=s?this.forEachInner(e,t,s,0):this.forEachInvertedInner(e,t,s,0)};_t.prototype.map=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length);var l=[];return this.forEach(function(o,c){return l.push(e(o,c))},t,s),l};_t.from=function(e){return e instanceof _t?e:e&&e.length?new TS(e):_t.empty};var TS=(function(n){function e(s){n.call(this),this.values=s}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(l,o){return l==0&&o==this.length?this:new e(this.values.slice(l,o))},e.prototype.getInner=function(l){return this.values[l]},e.prototype.forEachInner=function(l,o,c,f){for(var d=o;d<c;d++)if(l(this.values[d],f+d)===!1)return!1},e.prototype.forEachInvertedInner=function(l,o,c,f){for(var d=o-1;d>=c;d--)if(l(this.values[d],f+d)===!1)return!1},e.prototype.leafAppend=function(l){if(this.length+l.length<=cu)return new e(this.values.concat(l.flatten()))},e.prototype.leafPrepend=function(l){if(this.length+l.length<=cu)return new e(l.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e})(_t);_t.empty=new TS([]);var PO=(function(n){function e(t,s){n.call(this),this.left=t,this.right=s,this.length=t.length+s.length,this.depth=Math.max(t.depth,s.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(s){return s<this.left.length?this.left.get(s):this.right.get(s-this.left.length)},e.prototype.forEachInner=function(s,l,o,c){var f=this.left.length;if(l<f&&this.left.forEachInner(s,l,Math.min(o,f),c)===!1||o>f&&this.right.forEachInner(s,Math.max(l-f,0),Math.min(this.length,o)-f,c+f)===!1)return!1},e.prototype.forEachInvertedInner=function(s,l,o,c){var f=this.left.length;if(l>f&&this.right.forEachInvertedInner(s,l-f,Math.max(o,f)-f,c+f)===!1||o<f&&this.left.forEachInvertedInner(s,Math.min(l,f),o,c)===!1)return!1},e.prototype.sliceInner=function(s,l){if(s==0&&l==this.length)return this;var o=this.left.length;return l<=o?this.left.slice(s,l):s>=o?this.right.slice(s-o,l-o):this.left.slice(s,o).append(this.right.slice(0,l-o))},e.prototype.leafAppend=function(s){var l=this.right.leafAppend(s);if(l)return new e(this.left,l)},e.prototype.leafPrepend=function(s){var l=this.left.leafPrepend(s);if(l)return new e(l,this.right)},e.prototype.appendInner=function(s){return this.left.depth>=Math.max(this.right.depth,s.depth)+1?new e(this.left,new e(this.right,s)):new e(this,s)},e})(_t);const JO=500;class qn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}let l,o;t&&(l=this.remapping(s,this.items.length),o=l.maps.length);let c=e.tr,f,d,p=[],g=[];return this.items.forEach((y,b)=>{if(!y.step){l||(l=this.remapping(s,b+1),o=l.maps.length),o--,g.push(y);return}if(l){g.push(new Qn(y.map));let v=y.step.map(l.slice(o)),k;v&&c.maybeStep(v).doc&&(k=c.mapping.maps[c.mapping.maps.length-1],p.push(new Qn(k,void 0,void 0,p.length+g.length))),o--,k&&l.appendMap(k,o)}else c.maybeStep(y.step);if(y.selection)return f=l?y.selection.map(l.slice(o)):y.selection,d=new qn(this.items.slice(0,s).append(g.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:c,selection:f}}addTransform(e,t,s,l){let o=[],c=this.eventCount,f=this.items,d=!l&&f.length?f.get(f.length-1):null;for(let g=0;g<e.steps.length;g++){let y=e.steps[g].invert(e.docs[g]),b=new Qn(e.mapping.maps[g],y,t),v;(v=d&&d.merge(b))&&(b=v,g?o.pop():f=f.slice(0,f.length-1)),o.push(b),t&&(c++,t=void 0),l||(d=b)}let p=c-s.depth;return p>XO&&(f=FO(f,p),c-=p),new qn(f.append(o),c)}remapping(e,t){let s=new Eo;return this.items.forEach((l,o)=>{let c=l.mirrorOffset!=null&&o-l.mirrorOffset>=e?s.maps.length-l.mirrorOffset:void 0;s.appendMap(l.map,c)},e,t),s}addMaps(e){return this.eventCount==0?this:new qn(this.items.append(e.map(t=>new Qn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let s=[],l=Math.max(0,this.items.length-t),o=e.mapping,c=e.steps.length,f=this.eventCount;this.items.forEach(b=>{b.selection&&f--},l);let d=t;this.items.forEach(b=>{let v=o.getMirror(--d);if(v==null)return;c=Math.min(c,v);let k=o.maps[v];if(b.step){let E=e.steps[v].invert(e.docs[v]),C=b.selection&&b.selection.map(o.slice(d+1,v));C&&f++,s.push(new Qn(k,E,C))}else s.push(new Qn(k))},l);let p=[];for(let b=t;b<c;b++)p.push(new Qn(o.maps[b]));let g=this.items.slice(0,l).append(p).append(s),y=new qn(g,f);return y.emptyItemCount()>JO&&(y=y.compress(this.items.length-s.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),s=t.maps.length,l=[],o=0;return this.items.forEach((c,f)=>{if(f>=e)l.push(c),c.selection&&o++;else if(c.step){let d=c.step.map(t.slice(s)),p=d&&d.getMap();if(s--,p&&t.appendMap(p,s),d){let g=c.selection&&c.selection.map(t.slice(s));g&&o++;let y=new Qn(p.invert(),d,g),b,v=l.length-1;(b=l.length&&l[v].merge(y))?l[v]=b:l.push(y)}}else c.map&&s--},this.items.length,0),new qn(_t.from(l.reverse()),o)}}qn.empty=new qn(_t.empty,0);function FO(n,e){let t;return n.forEach((s,l)=>{if(s.selection&&e--==0)return t=l,!1}),n.slice(t)}class Qn{constructor(e,t,s,l){this.map=e,this.step=t,this.selection=s,this.mirrorOffset=l}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Qn(t.getMap().invert(),t,this.selection)}}}class is{constructor(e,t,s,l,o){this.done=e,this.undone=t,this.prevRanges=s,this.prevTime=l,this.prevComposition=o}}const XO=20;function QO(n,e,t,s){let l=t.getMeta(Qs),o;if(l)return l.historyState;t.getMeta(e3)&&(n=new is(n.done,n.undone,null,0,-1));let c=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(c&&c.getMeta(Qs))return c.getMeta(Qs).redo?new is(n.done.addTransform(t,void 0,s,bc(e)),n.undone,Rx(t.mapping.maps),n.prevTime,n.prevComposition):new is(n.done,n.undone.addTransform(t,void 0,s,bc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let f=t.getMeta("composition"),d=n.prevTime==0||!c&&n.prevComposition!=f&&(n.prevTime<(t.time||0)-s.newGroupDelay||!ZO(t,n.prevRanges)),p=c?Eh(n.prevRanges,t.mapping):Rx(t.mapping.maps);return new is(n.done.addTransform(t,d?e.selection.getBookmark():void 0,s,bc(e)),qn.empty,p,t.time,f??n.prevComposition)}else return(o=t.getMeta("rebased"))?new is(n.done.rebased(t,o),n.undone.rebased(t,o),Eh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new is(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Eh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function ZO(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((s,l)=>{for(let o=0;o<e.length;o+=2)s<=e[o+1]&&l>=e[o]&&(t=!0)}),t}function Rx(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((s,l,o,c)=>e.push(o,c));return e}function Eh(n,e){if(!n)return null;let t=[];for(let s=0;s<n.length;s+=2){let l=e.map(n[s],1),o=e.map(n[s+1],-1);l<=o&&t.push(l,o)}return t}function WO(n,e,t){let s=bc(e),l=Qs.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,s);if(!o)return null;let c=o.selection.resolve(o.transform.doc),f=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),l,s),d=new is(t?f:o.remaining,t?o.remaining:f,null,0,-1);return o.transform.setSelection(c).setMeta(Qs,{redo:t,historyState:d})}let Ch=!1,zx=null;function bc(n){let e=n.plugins;if(zx!=e){Ch=!1,zx=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Ch=!0;break}}return Ch}const Qs=new Ot("history"),e3=new Ot("closeHistory");function t3(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new ht({key:Qs,state:{init(){return new is(qn.empty,qn.empty,null,0,-1)},apply(e,t,s){return QO(t,s,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let s=t.inputType,l=s=="historyUndo"?CS:s=="historyRedo"?MS:null;return!l||!e.editable?!1:(t.preventDefault(),l(e.state,e.dispatch))}}}})}function ES(n,e){return(t,s)=>{let l=Qs.getState(t);if(!l||(n?l.undone:l.done).eventCount==0)return!1;if(s){let o=WO(l,t,n);o&&s(e?o.scrollIntoView():o)}return!0}}const CS=ES(!1,!0),MS=ES(!0,!0);St.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=n?.node||this.editor.state.doc;if((n?.mode||this.options.mode)==="textSize"){const s=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(s)}return e.nodeSize},this.storage.words=n=>{const e=n?.node||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new ht({key:new Ot("characterCount"),appendTransaction:(e,t,s)=>{if(n)return;const l=this.options.limit;if(l==null||l===0){n=!0;return}const o=this.storage.characters({node:s.doc});if(o>l){const c=o-l,f=0,d=c;console.warn(`[CharacterCount] Initial content exceeded limit of ${l} characters. Content was automatically trimmed.`);const p=s.tr.deleteRange(f,d);return n=!0,p}n=!0},filterTransaction:(e,t)=>{const s=this.options.limit;if(!e.docChanged||s===0||s===null||s===void 0)return!0;const l=this.storage.characters({node:t.doc}),o=this.storage.characters({node:e.doc});if(o<=s||l>s&&o>s&&o<=l)return!0;if(l>s&&o>s&&o>l||!e.getMeta("paste"))return!1;const f=e.selection.$head.pos,d=o-s,p=f-d,g=f;return e.deleteRange(p,g),!(this.storage.characters({node:e.doc})>s)}})]}});var n3=St.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[HO(this.options)]}});St.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new ht({key:new Ot("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:s}=this.editor,{anchor:l}=e,o=[];if(!t||!s)return dt.create(n,[]);let c=0;this.options.mode==="deepest"&&n.descendants((d,p)=>{if(d.isText)return;if(!(l>=p&&l<=p+d.nodeSize-1))return!1;c+=1});let f=0;return n.descendants((d,p)=>{if(d.isText||!(l>=p&&l<=p+d.nodeSize-1))return!1;if(f+=1,this.options.mode==="deepest"&&c-f>0||this.options.mode==="shallowest"&&f>1)return this.options.mode==="deepest";o.push(Zt.node(p,p+d.nodeSize,{class:this.options.className}))}),dt.create(n,o)}}})]}});var r3=St.create({name:"gapCursor",addProseMirrorPlugins(){return[qO()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Qe(me(n,"allowGapCursor",t)))!=null?e:null}}}),Lx="placeholder";function s3(n){return n.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}St.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:Lx,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const n=this.options.dataAttribute?`data-${s3(this.options.dataAttribute)}`:`data-${Lx}`;return[new ht({key:new Ot("placeholder"),props:{decorations:({doc:e,selection:t})=>{const s=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:l}=t,o=[];if(!s)return null;const c=this.editor.isEmpty;return e.descendants((f,d)=>{const p=l>=d&&l<=d+f.nodeSize,g=!f.isLeaf&&Su(f);if((p||!this.options.showOnlyCurrent)&&g){const y=[this.options.emptyNodeClass];c&&y.push(this.options.emptyEditorClass);const b=Zt.node(d,d+f.nodeSize,{class:y.join(" "),[n]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:f,pos:d,hasAnchor:p}):this.options.placeholder});o.push(b)}return this.options.includeChildren}),dt.create(e,o)}}})]}});St.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:e}=this;return[new ht({key:new Ot("selection"),props:{decorations(t){return t.selection.empty||n.isFocused||!n.isEditable||Dv(t.selection)||n.view.dragging?null:dt.create(t.doc,[Zt.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function _x({types:n,node:e}){return e&&Array.isArray(n)&&n.includes(e.type)||e?.type===n}var i3=St.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var n;const e=new Ot(this.name),t=this.options.node||((n=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:n.name)||"paragraph",s=Object.entries(this.editor.schema.nodes).map(([,l])=>l).filter(l=>(this.options.notAfter||[]).concat(t).includes(l.name));return[new ht({key:e,appendTransaction:(l,o,c)=>{const{doc:f,tr:d,schema:p}=c,g=e.getState(c),y=f.content.size,b=p.nodes[t];if(g)return d.insert(y,b.create())},state:{init:(l,o)=>{const c=o.tr.doc.lastChild;return!_x({node:c,types:s})},apply:(l,o)=>{if(!l.docChanged||l.getMeta("__uniqueIDTransaction"))return o;const c=l.doc.lastChild;return!_x({node:c,types:s})}}})]}}),l3=St.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>CS(n,e),redo:()=>({state:n,dispatch:e})=>MS(n,e)}},addProseMirrorPlugins(){return[t3(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),o3=St.create({name:"starterKit",addExtensions(){var n,e,t,s;const l=[];return this.options.bold!==!1&&l.push(zA.configure(this.options.bold)),this.options.blockquote!==!1&&l.push(AA.configure(this.options.blockquote)),this.options.bulletList!==!1&&l.push(uS.configure(this.options.bulletList)),this.options.code!==!1&&l.push(BA.configure(this.options.code)),this.options.codeBlock!==!1&&l.push(IA.configure(this.options.codeBlock)),this.options.document!==!1&&l.push(VA.configure(this.options.document)),this.options.dropcursor!==!1&&l.push(n3.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&l.push(r3.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&l.push(qA.configure(this.options.hardBreak)),this.options.heading!==!1&&l.push($A.configure(this.options.heading)),this.options.undoRedo!==!1&&l.push(l3.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&l.push(GA.configure(this.options.horizontalRule)),this.options.italic!==!1&&l.push(FA.configure(this.options.italic)),this.options.listItem!==!1&&l.push(fS.configure(this.options.listItem)),this.options.listKeymap!==!1&&l.push(yS.configure((n=this.options)==null?void 0:n.listKeymap)),this.options.link!==!1&&l.push(vO.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&l.push(xS.configure(this.options.orderedList)),this.options.paragraph!==!1&&l.push(jO.configure(this.options.paragraph)),this.options.strike!==!1&&l.push(LO.configure(this.options.strike)),this.options.text!==!1&&l.push(_O.configure(this.options.text)),this.options.underline!==!1&&l.push(BO.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&l.push(i3.configure((s=this.options)==null?void 0:s.trailingNode)),l}}),a3=o3,c3=SS,u3=vS;const ts=({onClick:n,active:e,title:t,children:s})=>x.jsx("button",{type:"button",onClick:n,title:t,className:`
      w-8 h-8 flex items-center justify-center rounded
      text-sm font-bold transition-colors cursor-pointer
      ${e?"bg-[var(--color-border-main)] text-[var(--color-bg-card)]":"text-[var(--color-text-muted)] hover:text-[var(--color-text-main)] hover:bg-[var(--color-bg-white)]"}
    `,children:s}),f3=({editor:n,isFullscreen:e,onToggleFullscreen:t})=>n?x.jsxs("div",{className:"flex gap-1 p-2 border-b border-[var(--color-border-gray-300)] bg-[var(--color-bg-gray-50)]",children:[x.jsx(ts,{onClick:()=>n.chain().focus().toggleHeading({level:1}).run(),active:n.isActive("heading",{level:1}),title:"Heading (Ctrl+Alt+1)",children:"H"}),x.jsx(ts,{onClick:()=>n.chain().focus().toggleBold().run(),active:n.isActive("bold"),title:"Bold (Ctrl+B)",children:"B"}),x.jsx(ts,{onClick:()=>n.chain().focus().toggleItalic().run(),active:n.isActive("italic"),title:"Italic (Ctrl+I)",children:x.jsx("span",{className:"italic",children:"I"})}),x.jsx("div",{className:"w-px bg-[var(--color-border-gray-300)] mx-1"}),x.jsx(ts,{onClick:()=>n.chain().focus().toggleBulletList().run(),active:n.isActive("bulletList"),title:"Bullet List",children:""}),x.jsx(ts,{onClick:()=>n.chain().focus().toggleOrderedList().run(),active:n.isActive("orderedList"),title:"Numbered List",children:"1."}),x.jsx(ts,{onClick:()=>n.chain().focus().toggleTaskList().run(),active:n.isActive("taskList"),title:"Checkbox List",children:""}),x.jsx("div",{className:"w-px bg-[var(--color-border-gray-300)] mx-1"}),x.jsx(ts,{onClick:()=>n.chain().focus().setHorizontalRule().run(),active:!1,title:"Horizontal Rule",children:""}),x.jsx("div",{className:"flex-1"}),x.jsx(ts,{onClick:t,active:e,title:e?"Exit Fullscreen (Esc)":"Fullscreen",children:e?"":""})]}):null,d3=({value:n,onChange:e})=>{const[t,s]=Q.useState(!1),l=EA({extensions:[a3.configure({heading:{levels:[1]},codeBlock:!1,code:!1,blockquote:!1,strike:!1}),c3,u3.configure({nested:!1})],content:Mh(n),onUpdate:({editor:c})=>{e(c.getJSON())},editorProps:{attributes:{class:"prose prose-sm max-w-none p-3 min-h-[120px] focus:outline-none font-mono text-sm"}}});Zn.useEffect(()=>{if(l&&n!==void 0){const c=Mh(n),f=Mh(l.getJSON());m3(f,c)||l.commands.setContent(c,!1)}},[n,l]),Zn.useEffect(()=>{const c=f=>{f.key==="Escape"&&t&&s(!1)};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[t]);const o=t?"fixed inset-0 z-50 flex flex-col bg-[var(--color-bg-base)]":"border-2 border-[var(--color-border-gray-300)] rounded-lg overflow-hidden bg-[var(--color-bg-input)] focus-within:border-[var(--color-border-main)] transition-colors";return x.jsxs("div",{className:o,children:[x.jsx(f3,{editor:l,isFullscreen:t,onToggleFullscreen:()=>s(!t)}),x.jsx("div",{className:t?"flex-1 overflow-auto":"",children:x.jsx(Xv,{editor:l})}),x.jsx("style",{children:`
        .ProseMirror {
          min-height: ${t?"calc(100vh - 60px)":"120px"};
          font-family: 'IBM Plex Mono', monospace;
          font-size: 14px;
          color: var(--color-text-main);
        }
        .ProseMirror:focus {
          outline: none;
        }
        .ProseMirror p {
          margin: 0.5em 0;
        }
        .ProseMirror h1 {
          font-size: 1.25em;
          font-weight: 700;
          margin: 0.75em 0 0.5em;
        }
        .ProseMirror strong {
          font-weight: 700;
        }
        .ProseMirror em {
          font-style: italic;
        }
        .ProseMirror ul, .ProseMirror.prose ul {
          list-style-type: disc !important;
          list-style-position: outside !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
        }
        .ProseMirror ol, .ProseMirror.prose ol {
          list-style-type: decimal !important;
          list-style-position: outside !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
        }
        .ProseMirror li, .ProseMirror.prose li {
          margin: 0.25em 0 !important;
          display: list-item !important;
        }
        .ProseMirror hr {
          border: none;
          border-top: 2px dashed var(--color-border-gray-400);
          margin: 1em 0;
        }
        /* Task List Styles */
        .ProseMirror ul[data-type="taskList"] {
          list-style: none !important;
          padding-left: 0 !important;
        }
        .ProseMirror ul[data-type="taskList"] li {
          display: flex !important;
          align-items: center;
          gap: 0.5em;
        }
        .ProseMirror ul[data-type="taskList"] li > label {
          flex-shrink: 0;
          margin-top: 0.15em;
        }
        .ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"] {
          width: 1em;
          height: 1em;
          cursor: pointer;
        }
        .ProseMirror ul[data-type="taskList"] li > div {
          flex: 1;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          color: var(--color-text-muted);
          pointer-events: none;
          float: left;
          height: 0;
        }
      `})]})};function Mh(n){return n&&typeof n=="object"&&n.type==="doc"&&Array.isArray(n.content)?n:typeof n=="string"&&n.trim().length>0?h3(n):p3()}function h3(n){const t=n.split(`
`).map(s=>s.trim()?{type:"paragraph",content:[{type:"text",text:s}]}:{type:"paragraph"});return{type:"doc",content:t.length>0?t:[{type:"paragraph"}]}}function p3(){return{type:"doc",content:[{type:"paragraph"}]}}function m3(n,e){return JSON.stringify(n)===JSON.stringify(e)}const g3=({schema:n,uiSchema:e={},formData:t={},onChange:s,moduleId:l,onActionComplete:o})=>n?x.jsx("div",{className:"space-y-4",children:x.jsx(ip,{schema:n,uiSchema:e,value:t,onChange:c=>s(c),path:[],rootValue:t,onRootChange:s,moduleId:l,onActionComplete:o})}):null,ip=({schema:n,uiSchema:e,value:t,onChange:s,path:l,label:o,required:c,compact:f,rootValue:d,onRootChange:p,moduleId:g,onActionComplete:y})=>{const b=n.type,v=n.title||o,k=n.description,E=e?.["ui:options"]||{},C=e?.["ui:widget"];if(C==="location-search")return x.jsxs("div",{className:"mb-4",children:[v&&x.jsx("label",{className:Ke.label,children:v}),x.jsx(Ux,{value:t,onChange:s}),k&&x.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});if(C==="key-value-list")return x.jsxs("div",{className:"mb-4",children:[v&&x.jsx("label",{className:Ke.label,children:v}),x.jsx(fE,{value:t,onChange:s}),k&&x.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});if(C==="preset-select"){const M=E.presets||{};return x.jsxs("div",{className:"mb-4",children:[v&&x.jsx("label",{className:Ke.label,children:v}),x.jsx(dE,{value:t,onChange:s,presets:M,onPresetSelect:L=>{p&&d&&p({...d,...L})}}),k&&x.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]})}if(C==="webhook-test")return x.jsx("div",{className:"mb-4",children:x.jsx(mE,{formData:d})});if(C==="action-button")return x.jsx(gE,{schema:n,uiSchema:e,moduleId:g,onActionComplete:y});if(C==="richtext")return x.jsxs("div",{className:"mb-4",children:[v&&x.jsx("label",{className:Ke.label,children:v}),x.jsx(d3,{value:t,onChange:s}),k&&x.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});if(b==="object"){const M=E.layout==="inline"||E.layout==="compact";return x.jsxs("div",{className:M?"flex flex-wrap gap-x-4 gap-y-2 items-end":"space-y-3",children:[v&&!M&&x.jsx("h3",{className:"font-bold text-sm text-zinc-700 uppercase tracking-wider",children:v}),k&&!M&&x.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:k}),Object.entries(n.properties||{}).map(([L,V])=>{const W=e?.[L]||{},$=t?.[L],Y=M||W["ui:options"]?.compact,I=W["ui:showWhen"];return I&&t?.[I.field]!==I.value?null:x.jsx("div",{className:M?"flex-1 min-w-[120px]":"",children:x.jsx(ip,{schema:V,uiSchema:W,value:$,onChange:se=>{const ue={...t,[L]:se};s(ue)},path:[...l,L],label:V.title||L,required:n.required&&n.required.includes(L),compact:Y,rootValue:d,onRootChange:p,moduleId:g,onActionComplete:y})},L)})]})}if(b==="array"){const M=t||[],L=n.items,V=e?.items||{},W=()=>{const I=wS(L);s([...M,I])},$=I=>{const se=[...M];se.splice(I,1),s(se)},Y=(I,se)=>{const ue=[...M];ue[I]=se,s(ue)};return x.jsxs("div",{className:"space-y-2",children:[x.jsx("div",{className:"flex justify-between items-center",children:v&&x.jsx("label",{className:Ke.label,children:v})}),k&&x.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:k}),x.jsx("div",{className:"space-y-2",children:M.map((I,se)=>x.jsxs("div",{className:"flex gap-2 items-center p-3 border border-zinc-200 rounded-lg bg-white relative group",children:[x.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-zinc-100 flex items-center justify-center text-xs font-mono font-bold text-zinc-500",children:se+1}),x.jsx("div",{className:"flex-1",children:x.jsx(ip,{schema:L,uiSchema:V,value:I,onChange:ue=>Y(se,ue),path:[...l,se],moduleId:g})}),x.jsx("button",{type:"button",onClick:()=>$(se),className:"text-gray-400 hover:text-red-500 transition-colors p-1",title:"Remove Item",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 256 256",children:x.jsx("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"})})})]},se))}),(!n.maxItems||M.length<n.maxItems)&&x.jsxs("button",{type:"button",onClick:W,className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs font-bold tracking-wider cursor-pointer",children:["+ ",e?.["ui:addLabel"]||"Add Item"]}),n.maxItems&&M.length>=n.maxItems&&x.jsxs("div",{className:"text-center text-xs text-zinc-400 py-2",children:["Maximum limit of ",n.maxItems," reached"]})]})}return b==="boolean"?x.jsxs("div",{className:`flex items-center gap-2 ${f?"py-0":"py-1"}`,children:[x.jsx("input",{type:"checkbox",checked:t||!1,onChange:M=>s(M.target.checked),className:"w-4 h-4 text-black rounded border-2 border-zinc-300 focus:ring-0 focus:ring-offset-0",style:{accentColor:"black"}}),x.jsx("label",{className:`text-sm text-black select-none cursor-pointer ${f?"font-medium":""}`,onClick:()=>s(!t),children:v})]}):x.jsxs("div",{className:f?"mb-0":"mb-2",children:[v&&x.jsxs("div",{className:"flex justify-between items-center mb-1",children:[x.jsxs("label",{className:f?Ke.labelSmall:Ke.label,children:[v," ",c&&x.jsx("span",{className:"text-red-500 ml-1",title:"Required",children:"*"})]}),e?.["ui:randomExample"]&&x.jsx("button",{type:"button",onClick:()=>{const M=e["ui:randomExample"];if(Array.isArray(M)&&M.length>0){const L=M.filter(V=>V!==t);if(L.length===0){const V=M[Math.floor(Math.random()*M.length)];s(V)}else{const V=L[Math.floor(Math.random()*L.length)];s(V)}}},className:"text-xs text-zinc-400 hover:text-black hover:underline cursor-pointer transition-colors",title:"Insert random example",children:"Generate Example"})]}),n.enum?x.jsxs("select",{value:t??"",onChange:M=>s(M.target.value),className:f?Ke.inputSmall:Ke.input,children:[!c&&x.jsx("option",{value:"",children:"Select..."}),n.enum.map(M=>x.jsx("option",{value:M,children:M},M))]}):C==="textarea"?x.jsx("textarea",{value:t||"",onChange:M=>s(M.target.value),className:`${f?Ke.inputSmall:Ke.input} min-h-[100px] text-sm`,placeholder:e?.["ui:placeholder"],rows:E.rows||3}):x.jsx("input",{type:C==="password"?"password":b==="number"||b==="integer"?"number":"text",value:t??"",onChange:M=>{const L=M.target.value;s(b==="number"||b==="integer"?L===""?void 0:parseFloat(L):L)},className:f?Ke.inputSmall:Ke.input,placeholder:e?.["ui:placeholder"]}),k&&!f&&x.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]})},wS=n=>{if(n.default!==void 0)return n.default;switch(n.type){case"string":return"";case"number":case"integer":return 0;case"boolean":return!1;case"array":return[];case"object":{const e={};return n.properties&&Object.keys(n.properties).forEach(t=>{e[t]=wS(n.properties[t])}),e}default:return null}},y3=({value:n,onChange:e,onBlur:t,className:s})=>{const[l,o]=Q.useState(JSON.stringify(n||{},null,2)),[c,f]=Q.useState(!0),[d,p]=Q.useState(!1),g=JSON.stringify(n||{},null,2),y=k=>{const E=k.trim();return E===""?{}:JSON.parse(E)},b=k=>{const E=k.target.value;o(E);try{const C=y(E);f(!0),e(C)}catch{f(!1)}},v=()=>{p(!1);try{const k=y(l);f(!0),l.trim()===""&&o("{}"),t(k)}catch{o(JSON.stringify(n||{},null,2)),f(!0)}};return x.jsx("textarea",{value:d?l:g,onChange:b,onFocus:()=>{p(!0),o(g)},onBlur:v,className:`${s} ${c?"":"border-red-500"}`})},b3=({module:n,updateConfig:e,onRefresh:t})=>{const{moduleTypes:s,loading:l}=zo(),o=n.config||{},c=s.find(p=>p.id===n.type),f=c?.configSchema,d=c?.uiSchema;if(f){const p=g=>{Object.keys(g).forEach(y=>{g[y]!==o[y]&&e(y,g[y])})};return x.jsx(g3,{schema:f,uiSchema:d,formData:o,onChange:p,moduleId:n.id,onActionComplete:t})}return l?x.jsx("div",{className:"p-4 text-center text-gray-500 italic",children:"Loading configuration schema..."}):x.jsxs("div",{className:"space-y-3",children:[x.jsx("p",{className:`${Ke.textSubtle} mb-2`,children:"This module does not have a configuration schema. You can edit the raw JSON configuration below."}),x.jsx(y3,{config:o,updateConfig:(p,g)=>e(p,g)})]})},x3=({className:n,title:e="delete",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsxs("g",{fill:"currentColor",children:[x.jsx("path",{d:"M2.5,5.5V14c0,.828,.672,1.5,1.5,1.5H12c.828,0,1.5-.672,1.5-1.5V5.5",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:".5",x2:"15.5",y1:"3.5",y2:"3.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"8",x2:"8",y1:"7.5",y2:"12.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"10.5",x2:"10.5",y1:"7.5",y2:"12.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"5.5",x2:"5.5",y1:"7.5",y2:"12.5"}),x.jsx("polyline",{fill:"none",points:"5.5 3.5 5.5 .5 10.5 .5 10.5 3.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),v3=({moduleId:n,module:e,setModule:t,onClose:s,onSave:l,onDelete:o})=>{const c=Q.useRef(null),{moduleTypes:f}=zo();return n===null||!e?null:x.jsx("div",{className:Ke.modalBackdrop,onMouseDown:d=>{d.target===d.currentTarget&&(c.current="backdrop")},onClick:d=>{d.target===d.currentTarget&&c.current==="backdrop"&&(l(n,e,!0),s()),c.current=null},children:x.jsxs("div",{className:Ke.modalContent,onClick:d=>d.stopPropagation(),children:[x.jsxs("div",{className:"flex justify-between items-start mb-6",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-black mb-1 ",children:"Edit Module"}),x.jsx("div",{className:"text-gray-600 text-sm ",children:x.jsxs("span",{className:"font-mono",children:["Type: ",f.find(d=>d.id===e?.type)?.label]})})]}),x.jsx(op,{onClick:()=>{l(n,e,!0),s()}})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("label",{className:Ke.label,children:"Module Name"}),x.jsx("input",{type:"text",value:e?.name||"",onChange:d=>{t(p=>p&&{...p,name:d.target.value})},className:Ke.input})]}),e&&x.jsx(b3,{module:e,updateConfig:(d,p)=>{t(g=>g&&{...g,config:{...g.config,[d]:p}})},onRefresh:async()=>{try{const g=(await(await nt("/api/settings")).json()).modules?.[n];g&&t(g)}catch(d){console.error("Failed to refresh module:",d)}}}),x.jsxs("div",{className:"mt-8 pt-6 border-t-2 border-gray-300 flex justify-end gap-3",children:[x.jsxs("button",{type:"button",onClick:()=>o(n),className:"px-4 py-2 bg-transparent border-0 rounded-lg transition-all cursor-pointer flex items-center gap-2",style:{color:"var(--color-error-light)"},onMouseEnter:d=>{d.currentTarget.style.color="var(--color-error)"},onMouseLeave:d=>{d.currentTarget.style.color="var(--color-error-light)"},children:[x.jsx(x3,{className:"w-4 h-4"}),"Delete Module"]}),x.jsx(Fi,{onClick:()=>{l(n,e,!0),s()},children:"Save"})]})]})})},S3=({position:n,channel:e,onClose:t,onUpdate:s,timeFormat:l})=>{const o=Q.useRef(null);return n===null?null:x.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onMouseDown:c=>{c.target===c.currentTarget&&(o.current="backdrop")},onClick:c=>{c.target===c.currentTarget&&o.current==="backdrop"&&t(),o.current=null},children:x.jsxs("div",{className:"border-4 rounded-xl p-4 sm:p-6 max-w-md w-full shadow-lg",style:{backgroundColor:"var(--color-bg-card)",borderColor:"var(--color-border-main)"},onClick:c=>c.stopPropagation(),children:[x.jsxs("div",{className:"flex justify-between items-center mb-6",children:[x.jsxs("h3",{className:"text-xl font-bold text-black ",children:["Schedule Channel ",n]}),x.jsx(op,{onClick:t})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx("div",{className:"text-sm text-gray-600 mb-4 ",children:"Add times when this channel should automatically print."}),x.jsxs("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:[(e?.schedule||[]).map((c,f)=>x.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border-2 border-gray-300 hover:border-black",style:{backgroundColor:"var(--color-bg-card)"},children:[x.jsx("span",{className:"text-black  text-lg",children:Nh(c,l)}),x.jsx("button",{onClick:()=>{const d=[...e?.schedule||[]];d.splice(f,1),s(d)},className:"text-red-600 hover:text-red-700 px-2  font-bold cursor-pointer hover-shimmer",children:""})]},f)),(!e?.schedule||e.schedule.length===0)&&x.jsx("div",{className:"text-gray-500 text-center py-4 italic ",children:"No scheduled times."})]}),x.jsx("div",{className:"pt-4 border-t-2 border-gray-300",children:x.jsxs("form",{onSubmit:c=>{c.preventDefault();const f=c.target.elements.timeInput,d=f.value;if(d){const p=e?.schedule||[];if(!p.includes(d)){const g=[...p,d].sort();s(g),f.value=""}}},className:"flex gap-2",children:[x.jsx("input",{name:"timeInput",type:"time",required:!0,className:"flex-1 border-2 border-gray-300 rounded-lg px-3 py-2 text-black focus:outline-none focus:border-black ",style:{backgroundColor:"var(--color-bg-card)"}}),x.jsx(Fi,{type:"submit",children:"Add"})]})})]})]})})},k3=({show:n,wifiStatus:e})=>{if(!n)return null;const t=e?.ap_ssid||"PC-1-Setup-<device>",s=e?.ap_password||"Check printed instructions";return x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white border-4 border-black rounded-xl p-4 sm:p-6 md:p-8 max-w-md w-full text-center shadow-lg",children:[x.jsx("div",{className:"text-6xl mb-4",children:""}),x.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:"Setup Mode Activating..."}),x.jsxs("div",{className:"text-left space-y-4 bg-gray-50 p-4 rounded-lg border-2 border-gray-300 mb-6",children:[x.jsxs("div",{className:"flex gap-3",children:[x.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"1"}),x.jsx("p",{className:"text-black text-sm",children:"Wait for the printer to print setup instructions."})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"2"}),x.jsxs("p",{className:"text-black text-sm",children:["Connect your device to the ",x.jsx("span",{className:"text-black bg-gray-200 px-1 rounded border border-gray-300",children:t})," ","WiFi network."]})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"3"}),x.jsxs("p",{className:"text-black text-sm",children:["Password: ",x.jsx("span",{className:"text-black bg-gray-200 px-1 rounded border border-gray-300",children:s})]})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"4"}),x.jsxs("p",{className:"text-black text-sm",children:["Navigate to ",x.jsx("span",{className:"text-black bg-gray-200 px-1 rounded border border-gray-300",children:"http://10.42.0.1"})," to configure WiFi."]})]})]}),x.jsx("p",{className:"text-yellow-600 text-xs italic",children:"Note: This page will stop responding as the device switches networks."})]})})},T3=({status:n})=>n.message?x.jsx("div",{className:`fixed bottom-8 left-1/2 -translate-x-1/2 z-50 px-6 py-3 rounded-full shadow-xl text-sm font-medium transition-all transform duration-300 ${n.type==="success"?"text-gray-200 shadow-black/50":"text-red-400 shadow-black/50"}`,style:{backgroundColor:"var(--color-bg-dark)"},children:n.message}):null,E3=({setSettings:n,setModules:e,setStatus:t})=>{const s=async()=>{if(confirm("Are you sure you want to reset ALL settings to default? This cannot be undone."))try{const l=await nt("/api/settings/reset",{method:"POST"});if(!l.ok)throw new Error("Failed to reset settings");const o=await l.json();n(o.config),e({}),t({type:"success",message:"Settings reset to defaults."})}catch(l){console.error(l),t({type:"error",message:"Failed to reset settings."})}};return x.jsx("button",{onClick:s,className:"text-xs text-red-400 hover:text-red-300 border border-red-800/40 hover:border-red-700/60 rounded px-3 py-1.5 bg-transparent transition-colors cursor-pointer",children:"Reset All Settings to Default"})},C3=({className:n="w-4 h-4"})=>x.jsx("svg",{className:n,fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:x.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),M3=({className:n,title:e="border width",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsxs("g",{fill:"currentColor",children:[x.jsx("rect",{height:"3",width:"15",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:".5",y:"2.5"}),x.jsx("rect",{height:"2",width:"15",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:".5",y:"8.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:".5",x2:"15.5",y1:"13.5",y2:"13.5"})]})]}),w3=({className:n,title:e="preferences",...t})=>x.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[x.jsx("title",{children:e}),x.jsxs("g",{fill:"currentColor",children:[x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"12.5",x2:"15.5",y1:"12.5",y2:"12.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"0.5",x2:"3.5",y1:"3.5",y2:"3.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"9.5",x2:"15.5",y1:"3.5",y2:"3.5"}),x.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"0.5",x2:"6.5",y1:"12.5",y2:"12.5"}),x.jsx("rect",{height:"6",width:"3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"3.5",y:"0.5"}),x.jsx("rect",{height:"6",width:"3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"9.5",y:"9.5"})]})]});function N3(){const[n,e]=Q.useState(null),[t,s]=Q.useState(null),{moduleTypes:l}=zo(),[o,c]=Q.useState({timezone:"",latitude:0,longitude:0,city_name:"",time_format:"12h",modules:{},channels:{}}),[f,d]=Q.useState({}),[p,g]=Q.useState({type:"",message:""}),[y,b]=Q.useState(!0),[v,k]=Q.useState(""),[E,C]=Q.useState([]),[M,L]=Q.useState(!1),[V,W]=Q.useState("channels"),[$,Y]=Q.useState(null),[I,se]=Q.useState(!1),[ue,je]=Q.useState(null),[st,Le]=Q.useState(null),[ft,Ve]=Q.useState(null),[Te,H]=Q.useState(!1),Z=Q.useRef(null);Q.useEffect(()=>{let w=!0;const j=async()=>{try{const ne=await(await fetch("/api/wifi/status")).json();if(s(ne),e(ne.mode),ne.mode==="ap"){w&&b(!1);return}if(w){try{const[F,fe]=await Promise.all([nt("/api/settings").then(ce=>ce.json()),nt("/api/modules").then(ce=>ce.json())]);c(F),d(fe.modules||{}),b(!1)}catch(F){console.error("Error fetching data:",F),g({type:"error",message:"Failed to load settings. Is the backend running?"}),b(!1)}w=!1}}catch(J){console.error("Error fetching WiFi status:",J),w&&b(!1)}};j();const P=setInterval(j,1e4);return()=>{clearInterval(P),Z.current&&clearTimeout(Z.current)}},[]);const pe=async w=>{if(k(w),w.length<2){C([]),L(!1),Z.current&&(clearTimeout(Z.current),Z.current=null);return}Z.current&&clearTimeout(Z.current),L(!0),Z.current=setTimeout(async()=>{try{console.log("Searching for:",w);const j=new AbortController,P=setTimeout(()=>j.abort(),15e3),J=await fetch(`/api/location/search?q=${encodeURIComponent(w)}&limit=20&use_api=false`,{signal:j.signal});if(clearTimeout(P),!J.ok)throw new Error(`HTTP error! status: ${J.status}`);const ne=await J.json();console.log("Search results:",ne.results?.length||0),ne.results?C(ne.results):C([])}catch(j){j.name==="AbortError"?console.warn("Location search timed out"):(console.error("Error fetching locations:",j),C([]))}finally{L(!1),Z.current=null}},500)},Ae=async(w,j)=>{try{const P=await nt(`/api/channels/${w}/schedule`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!P.ok)throw new Error("Failed to update schedule");const J=await P.json();c(ne=>({...ne,channels:{...ne.channels,[w]:J.channel}})),g({type:"success",message:"Schedule updated!"}),setTimeout(()=>g({type:"",message:""}),3e3)}catch(P){console.error("Error updating schedule:",P),g({type:"error",message:"Failed to update schedule"})}},ze=async w=>{try{if(!(await nt(`/action/print-channel/${w}`,{method:"POST"})).ok)throw new Error("Failed to trigger print");g({type:"success",message:`Printing Channel ${w}...`}),setTimeout(()=>g({type:"",message:""}),3e3)}catch(j){console.error("Error triggering print:",j),g({type:"error",message:"Failed to trigger print"})}},A=async w=>{try{const j=await nt(`/debug/print-module/${w}`,{method:"POST"});if(!j.ok){const J=await j.json().catch(()=>({detail:"Failed to trigger print"}));throw new Error(J.detail||"Failed to trigger print")}const P=await j.json();g({type:"success",message:P.message||"Printing module..."}),setTimeout(()=>g({type:"",message:""}),3e3)}catch(j){console.error("Error triggering module print:",j),g({type:"error",message:j.message||"Failed to trigger print"}),setTimeout(()=>g({type:"",message:""}),3e3)}},U=async w=>{c(j=>({...j,...w}));try{const j={...o,channels:o.channels||{},modules:f,...w};if(console.log("Auto-saving settings:",w),!(await nt("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)})).ok)throw new Error("Failed to save settings")}catch(j){console.error("Error auto-saving settings:",j),g({type:"error",message:"Failed to save settings automatically."})}},re=w=>{const P={city_name:w.city||w.name,state:w.state,latitude:w.latitude,longitude:w.longitude,timezone:w.timezone};k(""),C([]),U(P)},le=w=>({news:{news_api_key:""},rss:{rss_feeds:[]},weather:{},email:{email_host:"imap.gmail.com",email_user:"",email_password:"",polling_interval:60},games:{difficulty:"medium"},astronomy:{},calendar:{ical_sources:[],days_to_show:2},webhook:{url:"",method:"GET",headers:{},json_path:""},text:{content_doc:{type:"doc",content:[{type:"paragraph"}]}}})[w]||{},ge=async(w,j="")=>{try{const P=await nt("/api/modules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:w,name:j||`${l.find(ne=>ne.id===w)?.label||w}`,config:le(w)})});if(!P.ok)throw new Error("Failed to create module");const J=await P.json();return d(ne=>({...ne,[J.module.id]:J.module})),g({type:"success",message:"Module created successfully!"}),setTimeout(()=>g({type:"",message:""}),3e3),J.module}catch(P){return console.error("Error creating module:",P),g({type:"error",message:"Failed to create module"}),null}},be=async(w,j)=>{try{const P=f[w];if(!P){console.error(`[UPDATE] Module ${w} not found`);return}if(j.type&&j.type!==P.type){console.error(`[UPDATE] Type mismatch! Target module is ${P.type}, but update has type ${j.type}. Rejecting update.`);return}if(j.id&&j.id!==w){console.error(`[UPDATE] ID mismatch! Target module ID is ${w}, but update has ID ${j.id}. Rejecting update.`);return}if(j.config){const fe={...j.config};P.type==="news"?(fe.rss_feeds&&delete fe.rss_feeds,delete fe.enable_newsapi):P.type==="rss"&&(fe.news_api_key&&delete fe.news_api_key,delete fe.enable_newsapi),j.config=fe}d(fe=>{const ce=fe[w];return ce?{...fe,[w]:{...ce,...j}}:fe});const J={...P,...j};J.id=w;const ne=await nt(`/api/modules/${w}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)});if(!ne.ok)throw new Error("Failed to update module");const F=await ne.json();d(fe=>({...fe,[w]:F.module})),g({type:"success",message:"Module updated successfully!"}),setTimeout(()=>g({type:"",message:""}),3e3)}catch(P){console.error("Error updating module:",P),g({type:"error",message:"Failed to update module"});const J=await nt(`/api/modules/${w}`);if(J.ok){const ne=await J.json();d(F=>({...F,[w]:ne.module}))}}},Me=async w=>{if(confirm("Are you sure you want to delete this module?"))try{const j=[];for(const[J,ne]of Object.entries(o.channels))ne.modules&&ne.modules.some(F=>F.module_id===w)&&j.push(J);for(const J of j)await nt(`/api/channels/${J}/modules/${w}`,{method:"DELETE"});const P=await nt(`/api/modules/${w}`,{method:"DELETE"});if(!P.ok){const J=await P.json();throw new Error(J.detail||"Failed to delete module")}d(J=>{const ne={...J};return delete ne[w],ne}),c(J=>{const ne={...J.channels};for(const F in ne)ne[F].modules&&(ne[F].modules=ne[F].modules.filter(fe=>fe.module_id!==w));return{...J,channels:ne}}),g({type:"success",message:"Module deleted successfully!"}),setTimeout(()=>g({type:"",message:""}),3e3),ue===w&&(je(null),Le(null))}catch(j){console.error("Error deleting module:",j),g({type:"error",message:j.message||"Failed to delete module"})}},at=async(w,j,P=null,J={})=>{try{J?.optimistic&&c(fe=>{const ce={...fe.channels||{}},te=ce[w]?{...ce[w]}:{modules:[]},he=(te.modules||[]).filter(bt=>bt.module_id!==j).sort((bt,Xt)=>bt.order-Xt.order),we=P===null?he.length:Math.max(0,Math.min(P,he.length)),Je=[...he];return Je.splice(we,0,{module_id:j,order:we}),te.modules=Je.map((bt,Xt)=>({...bt,order:Xt})),ce[w]=te,{...fe,channels:ce}});const ne=await nt(`/api/channels/${w}/modules?module_id=${j}${P!==null?`&order=${P}`:""}`,{method:"POST"});if(!ne.ok)throw new Error("Failed to assign module");const F=await ne.json();return c(fe=>({...fe,channels:{...fe.channels,[w]:F.channel}})),J?.silent||(g({type:"success",message:"Module assigned to channel!"}),setTimeout(()=>g({type:"",message:""}),3e3)),F.channel}catch(ne){return console.error("Error assigning module:",ne),g({type:"error",message:ne.message||"Failed to assign module"}),null}},qe=async(w,j,P={})=>{try{P?.optimistic&&c(F=>{const fe=F.channels?.[w];if(!fe||!fe.modules)return F;const ce=fe.modules.filter(te=>te.module_id!==j).sort((te,he)=>te.order-he.order).map((te,he)=>({...te,order:he}));return{...F,channels:{...F.channels,[w]:{...fe,modules:ce}}}});const J=await nt(`/api/channels/${w}/modules/${j}`,{method:"DELETE"});if(!J.ok)throw new Error("Failed to remove module");const ne=await J.json();return c(F=>({...F,channels:{...F.channels,[w]:ne.channel}})),P?.silent||(g({type:"success",message:"Module removed from channel!"}),setTimeout(()=>g({type:"",message:""}),3e3)),ne.channel}catch(J){return console.error("Error removing module:",J),g({type:"error",message:J.message||"Failed to remove module"}),null}},ae=async(w,j,P={})=>{try{P?.optimistic&&c(F=>{const fe=F.channels?.[w];if(!fe||!fe.modules)return F;const ce=fe.modules.map(Dt=>Dt.module_id),te=new Set(ce),he=j||{},we=Object.entries(he).sort((Dt,al)=>Dt[1]-al[1]).map(([Dt])=>Dt).filter(Dt=>te.has(Dt)),Je=ce.filter(Dt=>!Object.prototype.hasOwnProperty.call(he,Dt)),Xt=[...we,...Je].map((Dt,al)=>({module_id:Dt,order:al}));return{...F,channels:{...F.channels,[w]:{...fe,modules:Xt}}}});const J=await nt(`/api/channels/${w}/modules/reorder`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!J.ok)throw new Error("Failed to reorder modules");const ne=await J.json();return c(F=>({...F,channels:{...F.channels,[w]:ne.channel}})),ne.channel}catch(J){return console.error("Error reordering modules:",J),g({type:"error",message:"Failed to reorder modules"}),null}},Se=(w,j,P)=>{const J=o.channels[w];if(!J||!J.modules)return;const ne=[...J.modules].sort((he,we)=>he.order-we.order),F=ne.findIndex(he=>he.module_id===j);if(F===-1)return;const fe=P==="up"?F-1:F+1;if(fe<0||fe>=ne.length)return;const ce=ne[F].order;ne[F].order=ne[fe].order,ne[fe].order=ce;const te={};ne.forEach(he=>{te[he.module_id]=he.order}),ae(w,te,{optimistic:!0})},Re=(w,j)=>{const P=o.channels[w],J=o.channels[j],ne={...o.channels,[w]:J||{modules:[]},[j]:P||{modules:[]}};U({channels:ne})},$e=async()=>{try{if(!(await nt("/api/wifi/ap-mode",{method:"POST"})).ok)throw new Error("Failed to activate AP mode");g({type:"success",message:"AP mode activating..."}),H(!0)}catch{g({type:"error",message:"Failed to activate AP mode"})}};return y?x.jsx("div",{className:"max-w-[800px] w-full p-8 text-center",children:"Loading settings..."}):n==="ap"?x.jsx(lE,{wifiStatus:t}):x.jsxs("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 min-h-screen",style:{backgroundColor:"var(--color-bg-base)",color:"var(--color-text-main)"},children:[x.jsx("div",{className:"mb-8 pt-4 pb-2",children:x.jsx("h1",{className:"text-3xl sm:text-4xl leading-none font-bold tracking-tighter",style:{color:"var(--color-text-main)"},children:"PC-1 SETTINGS"})}),x.jsxs("div",{className:"flex gap-2 mb-8 border-b-2 border-dashed",style:{borderColor:"var(--color-border-main)"},children:[x.jsxs("button",{type:"button",onClick:()=>W("general"),className:`px-6 py-2 font-bold tracking-wider transition-all text-sm flex items-center gap-2 ${V==="general"?"border-b-2 translate-y-[2px]":"border-b-2 border-transparent"}`,style:V==="general"?{borderColor:"var(--color-border-main)",color:"var(--color-text-main)"}:{color:"var(--color-text-muted)"},onMouseEnter:w=>{V!=="general"&&(w.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:w=>{V!=="general"&&(w.currentTarget.style.color="var(--color-text-muted)")},children:[x.jsx(w3,{className:"w-4 h-4"}),"GENERAL"]}),x.jsxs("button",{type:"button",onClick:()=>W("channels"),className:`px-6 py-2 font-bold tracking-wider transition-all text-sm flex items-center gap-2 ${V==="channels"?"border-b-2 translate-y-[2px]":"border-b-2 border-transparent"}`,style:V==="channels"?{borderColor:"var(--color-border-main)",color:"var(--color-text-main)"}:{color:"var(--color-text-muted)"},onMouseEnter:w=>{V!=="channels"&&(w.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:w=>{V!=="channels"&&(w.currentTarget.style.color="var(--color-text-muted)")},children:[x.jsx(M3,{className:"w-4 h-4"}),"CHANNELS"]})]}),x.jsxs("div",{className:"contents",children:[V==="general"&&x.jsxs(x.Fragment,{children:[x.jsx(oE,{searchTerm:v,searchResults:E,isSearching:M,handleSearch:pe,selectLocation:re,settings:o,saveGlobalSettings:U,triggerAPMode:$e,wifiStatus:t}),x.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[x.jsxs("a",{href:"https://github.com/travmiller/paper-console",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-gray-600 hover:text-black transition-colors",children:[x.jsx(C3,{className:"w-5 h-5"}),x.jsx("span",{className:"text-sm font-mono",children:"paper-console"})]}),x.jsx(E3,{setSettings:c,setModules:d,setStatus:g})]})]}),V==="channels"&&x.jsx(uE,{settings:o,modules:f,triggerChannelPrint:ze,triggerModulePrint:A,setShowScheduleModal:Ve,swapChannels:Re,setShowEditModuleModal:je,setEditingModule:Le,moveModuleInChannel:Se,assignModuleToChannel:at,reorderChannelModules:ae,removeModuleFromChannel:qe,setShowAddModuleModal:Y,setShowCreateUnassignedModal:se,wifiStatus:t}),x.jsx(nb,{channelPosition:$,onClose:()=>Y(null),onCreateModule:ge,onAssignModule:at,onOpenEdit:(w,j)=>{je(w),Le(j)}}),I&&x.jsx(nb,{channelPosition:null,isUnassigned:!0,onClose:()=>se(!1),onCreateModule:async w=>{const j=await ge(w);return j&&(se(!1),je(j.id),Le(JSON.parse(JSON.stringify(j)))),j},onAssignModule:async()=>{},onOpenEdit:(w,j)=>{je(w),Le(j)}}),x.jsx(v3,{moduleId:ue,module:st,setModule:Le,onClose:()=>{je(null),Le(null)},onSave:be,onDelete:Me}),x.jsx(S3,{position:ft,channel:o.channels[ft]||{},onClose:()=>Ve(null),onUpdate:w=>Ae(ft,w),timeFormat:o.time_format}),x.jsx(k3,{show:Te,wifiStatus:t}),x.jsx(T3,{status:p})]})]})}tE.createRoot(document.getElementById("root")).render(x.jsx(Zn.StrictMode,{children:x.jsx(N3,{})}));
