(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=t(l);fetch(l.href,o)}})();function ap(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qd={exports:{}},ro={};var K0;function XT(){if(K0)return ro;K0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,o){var c=null;if(o!==void 0&&(c=""+o),l.key!==void 0&&(c=""+l.key),"key"in l){o={};for(var f in l)f!=="key"&&(o[f]=l[f])}else o=l;return l=o.ref,{$$typeof:n,type:s,key:c,ref:l!==void 0?l:null,props:o}}return ro.Fragment=e,ro.jsx=t,ro.jsxs=t,ro}var P0;function QT(){return P0||(P0=1,qd.exports=XT()),qd.exports}var b=QT(),Vd={exports:{}},Se={};var F0;function ZT(){if(F0)return Se;F0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function v(N){return N===null||typeof N!="object"?null:(N=x&&N[x]||N["@@iterator"],typeof N=="function"?N:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,M={};function C(N,q,ie){this.props=N,this.context=q,this.refs=M,this.updater=ie||k}C.prototype.isReactComponent={},C.prototype.setState=function(N,q){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,q,"setState")},C.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function L(){}L.prototype=C.prototype;function $(N,q,ie){this.props=N,this.context=q,this.refs=M,this.updater=ie||k}var te=$.prototype=new L;te.constructor=$,E(te,C.prototype),te.isPureReactComponent=!0;var Y=Array.isArray;function J(){}var V={H:null,A:null,T:null,S:null},le=Object.prototype.hasOwnProperty;function ue(N,q,ie){var oe=ie.ref;return{$$typeof:n,type:N,key:q,ref:oe!==void 0?oe:null,props:ie}}function Ne(N,q){return ue(N.type,q,N.props)}function et(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function ze(N){var q={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ie){return q[ie]})}var nt=/\/+/g;function Ie(N,q){return typeof N=="object"&&N!==null&&N.key!=null?ze(""+N.key):q.toString(36)}function ke(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(J,J):(N.status="pending",N.then(function(q){N.status==="pending"&&(N.status="fulfilled",N.value=q)},function(q){N.status==="pending"&&(N.status="rejected",N.reason=q)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function U(N,q,ie,oe,be){var ge=typeof N;(ge==="undefined"||ge==="boolean")&&(N=null);var Ae=!1;if(N===null)Ae=!0;else switch(ge){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(N.$$typeof){case n:case e:Ae=!0;break;case m:return Ae=N._init,U(Ae(N._payload),q,ie,oe,be)}}if(Ae)return be=be(N),Ae=oe===""?"."+Ie(N,0):oe,Y(be)?(ie="",Ae!=null&&(ie=Ae.replace(nt,"$&/")+"/"),U(be,q,ie,"",function(Qt){return Qt})):be!=null&&(et(be)&&(be=Ne(be,ie+(be.key==null||N&&N.key===be.key?"":(""+be.key).replace(nt,"$&/")+"/")+Ae)),q.push(be)),1;Ae=0;var Qe=oe===""?".":oe+":";if(Y(N))for(var qe=0;qe<N.length;qe++)oe=N[qe],ge=Qe+Ie(oe,qe),Ae+=U(oe,q,ie,ge,be);else if(qe=v(N),typeof qe=="function")for(N=qe.call(N),qe=0;!(oe=N.next()).done;)oe=oe.value,ge=Qe+Ie(oe,qe++),Ae+=U(oe,q,ie,ge,be);else if(ge==="object"){if(typeof N.then=="function")return U(ke(N),q,ie,oe,be);throw q=String(N),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function ee(N,q,ie){if(N==null)return N;var oe=[],be=0;return U(N,oe,"","",function(ge){return q.call(ie,ge,be++)}),oe}function he(N){if(N._status===-1){var q=N._result;q=q(),q.then(function(ie){(N._status===0||N._status===-1)&&(N._status=1,N._result=ie)},function(ie){(N._status===0||N._status===-1)&&(N._status=2,N._result=ie)}),N._status===-1&&(N._status=0,N._result=q)}if(N._status===1)return N._result.default;throw N._result}var Te=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Be={map:ee,forEach:function(N,q,ie){ee(N,function(){q.apply(this,arguments)},ie)},count:function(N){var q=0;return ee(N,function(){q++}),q},toArray:function(N){return ee(N,function(q){return q})||[]},only:function(N){if(!et(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Se.Activity=y,Se.Children=Be,Se.Component=C,Se.Fragment=t,Se.Profiler=l,Se.PureComponent=$,Se.StrictMode=s,Se.Suspense=d,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Se.__COMPILER_RUNTIME={__proto__:null,c:function(N){return V.H.useMemoCache(N)}},Se.cache=function(N){return function(){return N.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(N,q,ie){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var oe=E({},N.props),be=N.key;if(q!=null)for(ge in q.key!==void 0&&(be=""+q.key),q)!le.call(q,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&q.ref===void 0||(oe[ge]=q[ge]);var ge=arguments.length-2;if(ge===1)oe.children=ie;else if(1<ge){for(var Ae=Array(ge),Qe=0;Qe<ge;Qe++)Ae[Qe]=arguments[Qe+2];oe.children=Ae}return ue(N.type,be,oe)},Se.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:o,_context:N},N},Se.createElement=function(N,q,ie){var oe,be={},ge=null;if(q!=null)for(oe in q.key!==void 0&&(ge=""+q.key),q)le.call(q,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(be[oe]=q[oe]);var Ae=arguments.length-2;if(Ae===1)be.children=ie;else if(1<Ae){for(var Qe=Array(Ae),qe=0;qe<Ae;qe++)Qe[qe]=arguments[qe+2];be.children=Qe}if(N&&N.defaultProps)for(oe in Ae=N.defaultProps,Ae)be[oe]===void 0&&(be[oe]=Ae[oe]);return ue(N,ge,be)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(N){return{$$typeof:f,render:N}},Se.isValidElement=et,Se.lazy=function(N){return{$$typeof:m,_payload:{_status:-1,_result:N},_init:he}},Se.memo=function(N,q){return{$$typeof:h,type:N,compare:q===void 0?null:q}},Se.startTransition=function(N){var q=V.T,ie={};V.T=ie;try{var oe=N(),be=V.S;be!==null&&be(ie,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(J,Te)}catch(ge){Te(ge)}finally{q!==null&&ie.types!==null&&(q.types=ie.types),V.T=q}},Se.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Se.use=function(N){return V.H.use(N)},Se.useActionState=function(N,q,ie){return V.H.useActionState(N,q,ie)},Se.useCallback=function(N,q){return V.H.useCallback(N,q)},Se.useContext=function(N){return V.H.useContext(N)},Se.useDebugValue=function(){},Se.useDeferredValue=function(N,q){return V.H.useDeferredValue(N,q)},Se.useEffect=function(N,q){return V.H.useEffect(N,q)},Se.useEffectEvent=function(N){return V.H.useEffectEvent(N)},Se.useId=function(){return V.H.useId()},Se.useImperativeHandle=function(N,q,ie){return V.H.useImperativeHandle(N,q,ie)},Se.useInsertionEffect=function(N,q){return V.H.useInsertionEffect(N,q)},Se.useLayoutEffect=function(N,q){return V.H.useLayoutEffect(N,q)},Se.useMemo=function(N,q){return V.H.useMemo(N,q)},Se.useOptimistic=function(N,q){return V.H.useOptimistic(N,q)},Se.useReducer=function(N,q,ie){return V.H.useReducer(N,q,ie)},Se.useRef=function(N){return V.H.useRef(N)},Se.useState=function(N){return V.H.useState(N)},Se.useSyncExternalStore=function(N,q,ie){return V.H.useSyncExternalStore(N,q,ie)},Se.useTransition=function(){return V.H.useTransition()},Se.version="19.2.1",Se}var J0;function Lo(){return J0||(J0=1,Vd.exports=ZT()),Vd.exports}var Q=Lo();const Xn=ap(Q);var $d={exports:{}},so={},Gd={exports:{}},Yd={};var X0;function WT(){return X0||(X0=1,(function(n){function e(U,ee){var he=U.length;U.push(ee);e:for(;0<he;){var Te=he-1>>>1,Be=U[Te];if(0<l(Be,ee))U[Te]=ee,U[he]=Be,he=Te;else break e}}function t(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var ee=U[0],he=U.pop();if(he!==ee){U[0]=he;e:for(var Te=0,Be=U.length,N=Be>>>1;Te<N;){var q=2*(Te+1)-1,ie=U[q],oe=q+1,be=U[oe];if(0>l(ie,he))oe<Be&&0>l(be,ie)?(U[Te]=be,U[oe]=he,Te=oe):(U[Te]=ie,U[q]=he,Te=q);else if(oe<Be&&0>l(be,he))U[Te]=be,U[oe]=he,Te=oe;else break e}}return ee}function l(U,ee){var he=U.sortIndex-ee.sortIndex;return he!==0?he:U.id-ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var d=[],h=[],m=1,y=null,x=3,v=!1,k=!1,E=!1,M=!1,C=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function te(U){for(var ee=t(h);ee!==null;){if(ee.callback===null)s(h);else if(ee.startTime<=U)s(h),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(h)}}function Y(U){if(E=!1,te(U),!k)if(t(d)!==null)k=!0,J||(J=!0,ze());else{var ee=t(h);ee!==null&&ke(Y,ee.startTime-U)}}var J=!1,V=-1,le=5,ue=-1;function Ne(){return M?!0:!(n.unstable_now()-ue<le)}function et(){if(M=!1,J){var U=n.unstable_now();ue=U;var ee=!0;try{e:{k=!1,E&&(E=!1,L(V),V=-1),v=!0;var he=x;try{t:{for(te(U),y=t(d);y!==null&&!(y.expirationTime>U&&Ne());){var Te=y.callback;if(typeof Te=="function"){y.callback=null,x=y.priorityLevel;var Be=Te(y.expirationTime<=U);if(U=n.unstable_now(),typeof Be=="function"){y.callback=Be,te(U),ee=!0;break t}y===t(d)&&s(d),te(U)}else s(d);y=t(d)}if(y!==null)ee=!0;else{var N=t(h);N!==null&&ke(Y,N.startTime-U),ee=!1}}break e}finally{y=null,x=he,v=!1}ee=void 0}}finally{ee?ze():J=!1}}}var ze;if(typeof $=="function")ze=function(){$(et)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,Ie=nt.port2;nt.port1.onmessage=et,ze=function(){Ie.postMessage(null)}}else ze=function(){C(et,0)};function ke(U,ee){V=C(function(){U(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(U){switch(x){case 1:case 2:case 3:var ee=3;break;default:ee=x}var he=x;x=ee;try{return U()}finally{x=he}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(U,ee){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var he=x;x=U;try{return ee()}finally{x=he}},n.unstable_scheduleCallback=function(U,ee,he){var Te=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Te+he:Te):he=Te,U){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=he+Be,U={id:m++,callback:ee,priorityLevel:U,startTime:he,expirationTime:Be,sortIndex:-1},he>Te?(U.sortIndex=he,e(h,U),t(d)===null&&U===t(h)&&(E?(L(V),V=-1):E=!0,ke(Y,he-Te))):(U.sortIndex=Be,e(d,U),k||v||(k=!0,J||(J=!0,ze()))),U},n.unstable_shouldYield=Ne,n.unstable_wrapCallback=function(U){var ee=x;return function(){var he=x;x=ee;try{return U.apply(this,arguments)}finally{x=he}}}})(Yd)),Yd}var Q0;function eE(){return Q0||(Q0=1,Gd.exports=WT()),Gd.exports}var Kd={exports:{}},$t={};var Z0;function tE(){if(Z0)return $t;Z0=1;var n=Lo();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(d,h,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:d,containerInfo:h,implementation:m}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return $t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,$t.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(d,h,null,m)},$t.flushSync=function(d){var h=c.T,m=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=h,s.p=m,s.d.f()}},$t.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(d,h))},$t.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},$t.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,y=f(m,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?s.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:v}):m==="script"&&s.d.X(d,{crossOrigin:y,integrity:x,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},$t.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=f(h.as,h.crossOrigin);s.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(d)},$t.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,y=f(m,h.crossOrigin);s.d.L(d,m,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},$t.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=f(h.as,h.crossOrigin);s.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(d)},$t.requestFormReset=function(d){s.d.r(d)},$t.unstable_batchedUpdates=function(d,h){return d(h)},$t.useFormState=function(d,h,m){return c.H.useFormState(d,h,m)},$t.useFormStatus=function(){return c.H.useHostTransitionStatus()},$t.version="19.2.1",$t}var W0;function Ix(){if(W0)return Kd.exports;W0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Kd.exports=tE(),Kd.exports}var eb;function nE(){if(eb)return so;eb=1;var n=eE(),e=Lo(),t=Ix();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function f(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(s(188))}function h(r){var i=r.alternate;if(!i){if(i=o(r),i===null)throw Error(s(188));return i!==r?null:r}for(var a=r,u=i;;){var p=a.return;if(p===null)break;var g=p.alternate;if(g===null){if(u=p.return,u!==null){a=u;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===a)return d(p),r;if(g===u)return d(p),i;g=g.sibling}throw Error(s(188))}if(a.return!==u.return)a=p,u=g;else{for(var S=!1,T=p.child;T;){if(T===a){S=!0,a=p,u=g;break}if(T===u){S=!0,u=p,a=g;break}T=T.sibling}if(!S){for(T=g.child;T;){if(T===a){S=!0,a=g,u=p;break}if(T===u){S=!0,u=g,a=p;break}T=T.sibling}if(!S)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?r:i}function m(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=m(r),i!==null)return i;r=r.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),$=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),Ne=Symbol.for("react.memo_cache_sentinel"),et=Symbol.iterator;function ze(r){return r===null||typeof r!="object"?null:(r=et&&r[et]||r["@@iterator"],typeof r=="function"?r:null)}var nt=Symbol.for("react.client.reference");function Ie(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===nt?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case E:return"Fragment";case C:return"Profiler";case M:return"StrictMode";case Y:return"Suspense";case J:return"SuspenseList";case ue:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case $:return r.displayName||"Context";case L:return(r._context.displayName||"Context")+".Consumer";case te:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case V:return i=r.displayName||null,i!==null?i:Ie(r.type)||"Memo";case le:i=r._payload,r=r._init;try{return Ie(r(i))}catch{}}return null}var ke=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Te=[],Be=-1;function N(r){return{current:r}}function q(r){0>Be||(r.current=Te[Be],Te[Be]=null,Be--)}function ie(r,i){Be++,Te[Be]=r.current,r.current=i}var oe=N(null),be=N(null),ge=N(null),Ae=N(null);function Qe(r,i){switch(ie(ge,i),ie(be,r),ie(oe,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?m0(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=m0(i),r=g0(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}q(oe),ie(oe,r)}function qe(){q(oe),q(be),q(ge)}function Qt(r){r.memoizedState!==null&&ie(Ae,r);var i=oe.current,a=g0(i,r.type);i!==a&&(ie(be,r),ie(oe,a))}function Vt(r){be.current===r&&(q(oe),q(be)),Ae.current===r&&(q(Ae),Wl._currentValue=he)}var an,P;function O(r){if(an===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);an=i&&i[1]||"",P=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+an+r+P}var I=!1;function z(r,i){if(!r||I)return"";I=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(H){var _=H}Reflect.construct(r,[],X)}else{try{X.call()}catch(H){_=H}r.call(X.prototype)}}else{try{throw Error()}catch(H){_=H}(X=r())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(H){if(H&&_&&typeof H.stack=="string")return[H.stack,_.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),S=g[0],T=g[1];if(S&&T){var w=S.split(`
`),R=T.split(`
`);for(p=u=0;u<w.length&&!w[u].includes("DetermineComponentFrameRoot");)u++;for(;p<R.length&&!R[p].includes("DetermineComponentFrameRoot");)p++;if(u===w.length||p===R.length)for(u=w.length-1,p=R.length-1;1<=u&&0<=p&&w[u]!==R[p];)p--;for(;1<=u&&0<=p;u--,p--)if(w[u]!==R[p]){if(u!==1||p!==1)do if(u--,p--,0>p||w[u]!==R[p]){var G=`
`+w[u].replace(" at new "," at ");return r.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",r.displayName)),G}while(1<=u&&0<=p);break}}}finally{I=!1,Error.prepareStackTrace=a}return(a=r?r.displayName||r.name:"")?O(a):""}function K(r,i){switch(r.tag){case 26:case 27:case 5:return O(r.type);case 16:return O("Lazy");case 13:return r.child!==i&&i!==null?O("Suspense Fallback"):O("Suspense");case 19:return O("SuspenseList");case 0:case 15:return z(r.type,!1);case 11:return z(r.type.render,!1);case 1:return z(r.type,!0);case 31:return O("Activity");default:return""}}function B(r){try{var i="",a=null;do i+=K(r,a),a=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var se=Object.prototype.hasOwnProperty,W=n.unstable_scheduleCallback,ne=n.unstable_cancelCallback,de=n.unstable_shouldYield,Ee=n.unstable_requestPaint,Me=n.unstable_now,ut=n.unstable_getCurrentPriorityLevel,bt=n.unstable_ImmediatePriority,cn=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,Wn=n.unstable_LowPriority,ul=n.unstable_IdlePriority,ai=n.log,RS=n.unstable_setDisableYieldValue,fl=null,un=null;function wr(r){if(typeof ai=="function"&&RS(r),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(fl,r)}catch{}}var fn=Math.clz32?Math.clz32:_S,zS=Math.log,LS=Math.LN2;function _S(r){return r>>>=0,r===0?32:31-(zS(r)/LS|0)|0}var qo=256,Vo=262144,$o=4194304;function ks(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Go(r,i,a){var u=r.pendingLanes;if(u===0)return 0;var p=0,g=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var T=u&134217727;return T!==0?(u=T&~g,u!==0?p=ks(u):(S&=T,S!==0?p=ks(S):a||(a=T&~r,a!==0&&(p=ks(a))))):(T=u&~g,T!==0?p=ks(T):S!==0?p=ks(S):a||(a=u&~r,a!==0&&(p=ks(a)))),p===0?0:i!==0&&i!==p&&(i&g)===0&&(g=p&-p,a=i&-i,g>=a||g===32&&(a&4194048)!==0)?i:p}function dl(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function BS(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xp(){var r=$o;return $o<<=1,($o&62914560)===0&&($o=4194304),r}function Nu(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function hl(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function HS(r,i,a,u,p,g){var S=r.pendingLanes;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=a,r.entangledLanes&=a,r.errorRecoveryDisabledLanes&=a,r.shellSuspendCounter=0;var T=r.entanglements,w=r.expirationTimes,R=r.hiddenUpdates;for(a=S&~a;0<a;){var G=31-fn(a),X=1<<G;T[G]=0,w[G]=-1;var _=R[G];if(_!==null)for(R[G]=null,G=0;G<_.length;G++){var H=_[G];H!==null&&(H.lane&=-536870913)}a&=~X}u!==0&&Qp(r,u,0),g!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=g&~(S&~i))}function Qp(r,i,a){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-fn(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|a&261930}function Zp(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var u=31-fn(a),p=1<<u;p&i|r[u]&i&&(r[u]|=i),a&=~p}}function Wp(r,i){var a=i&-i;return a=(a&42)!==0?1:Au(a),(a&(r.suspendedLanes|i))!==0?0:a}function Au(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ou(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function em(){var r=ee.p;return r!==0?r:(r=window.event,r===void 0?32:U0(r.type))}function tm(r,i){var a=ee.p;try{return ee.p=r,i()}finally{ee.p=a}}var Nr=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Nr,Zt="__reactProps$"+Nr,ci="__reactContainer$"+Nr,Du="__reactEvents$"+Nr,US="__reactListeners$"+Nr,IS="__reactHandles$"+Nr,nm="__reactResources$"+Nr,pl="__reactMarker$"+Nr;function ju(r){delete r[Rt],delete r[Zt],delete r[Du],delete r[US],delete r[IS]}function ui(r){var i=r[Rt];if(i)return i;for(var a=r.parentNode;a;){if(i=a[ci]||a[Rt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=T0(r);r!==null;){if(a=r[Rt])return a;r=T0(r)}return i}r=a,a=r.parentNode}return null}function fi(r){if(r=r[Rt]||r[ci]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function ml(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function di(r){var i=r[nm];return i||(i=r[nm]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Nt(r){r[pl]=!0}var rm=new Set,sm={};function Ts(r,i){hi(r,i),hi(r+"Capture",i)}function hi(r,i){for(sm[r]=i,r=0;r<i.length;r++)rm.add(i[r])}var qS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),im={},lm={};function VS(r){return se.call(lm,r)?!0:se.call(im,r)?!1:qS.test(r)?lm[r]=!0:(im[r]=!0,!1)}function Yo(r,i,a){if(VS(i))if(a===null)r.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+a)}}function Ko(r,i,a){if(a===null)r.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+a)}}function er(r,i,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttributeNS(i,a,""+u)}}function kn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function om(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function $S(r,i,a){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,g=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return p.call(this)},set:function(S){a=""+S,g.call(this,S)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Ru(r){if(!r._valueTracker){var i=om(r)?"checked":"value";r._valueTracker=$S(r,i,""+r[i])}}function am(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return r&&(u=om(r)?r.checked?"true":"false":r.value),r=u,r!==a?(i.setValue(r),!0):!1}function Po(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var GS=/[\n"\\]/g;function Tn(r){return r.replace(GS,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function zu(r,i,a,u,p,g,S,T){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),i!=null?S==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+kn(i)):r.value!==""+kn(i)&&(r.value=""+kn(i)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),i!=null?Lu(r,S,kn(i)):a!=null?Lu(r,S,kn(a)):u!=null&&r.removeAttribute("value"),p==null&&g!=null&&(r.defaultChecked=!!g),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.name=""+kn(T):r.removeAttribute("name")}function cm(r,i,a,u,p,g,S,T){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),i!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){Ru(r);return}a=a!=null?""+kn(a):"",i=i!=null?""+kn(i):a,T||i===r.value||(r.value=i),r.defaultValue=i}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=T?r.checked:!!u,r.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S),Ru(r)}function Lu(r,i,a){i==="number"&&Po(r.ownerDocument)===r||r.defaultValue===""+a||(r.defaultValue=""+a)}function pi(r,i,a,u){if(r=r.options,i){i={};for(var p=0;p<a.length;p++)i["$"+a[p]]=!0;for(a=0;a<r.length;a++)p=i.hasOwnProperty("$"+r[a].value),r[a].selected!==p&&(r[a].selected=p),p&&u&&(r[a].defaultSelected=!0)}else{for(a=""+kn(a),i=null,p=0;p<r.length;p++){if(r[p].value===a){r[p].selected=!0,u&&(r[p].defaultSelected=!0);return}i!==null||r[p].disabled||(i=r[p])}i!==null&&(i.selected=!0)}}function um(r,i,a){if(i!=null&&(i=""+kn(i),i!==r.value&&(r.value=i),a==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=a!=null?""+kn(a):""}function fm(r,i,a,u){if(i==null){if(u!=null){if(a!=null)throw Error(s(92));if(ke(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),i=a}a=kn(i),r.defaultValue=a,u=r.textContent,u===a&&u!==""&&u!==null&&(r.value=u),Ru(r)}function mi(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var YS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dm(r,i,a){var u=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,a):typeof a!="number"||a===0||YS.has(i)?i==="float"?r.cssFloat=a:r[i]=(""+a).trim():r[i]=a+"px"}function hm(r,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var p in i)u=i[p],i.hasOwnProperty(p)&&a[p]!==u&&dm(r,p,u)}else for(var g in i)i.hasOwnProperty(g)&&dm(r,g,i[g])}function _u(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var KS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),PS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fo(r){return PS.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function tr(){}var Bu=null;function Hu(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var gi=null,yi=null;function pm(r){var i=fi(r);if(i&&(r=i.stateNode)){var a=r[Zt]||null;e:switch(r=i.stateNode,i.type){case"input":if(zu(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Tn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==r&&u.form===r.form){var p=u[Zt]||null;if(!p)throw Error(s(90));zu(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<a.length;i++)u=a[i],u.form===r.form&&am(u)}break e;case"textarea":um(r,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&pi(r,!!a.multiple,i,!1)}}}var Uu=!1;function mm(r,i,a){if(Uu)return r(i,a);Uu=!0;try{var u=r(i);return u}finally{if(Uu=!1,(gi!==null||yi!==null)&&(La(),gi&&(i=gi,r=yi,yi=gi=null,pm(i),r)))for(i=0;i<r.length;i++)pm(r[i])}}function gl(r,i){var a=r.stateNode;if(a===null)return null;var u=a[Zt]||null;if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iu=!1;if(nr)try{var yl={};Object.defineProperty(yl,"passive",{get:function(){Iu=!0}}),window.addEventListener("test",yl,yl),window.removeEventListener("test",yl,yl)}catch{Iu=!1}var Ar=null,qu=null,Jo=null;function gm(){if(Jo)return Jo;var r,i=qu,a=i.length,u,p="value"in Ar?Ar.value:Ar.textContent,g=p.length;for(r=0;r<a&&i[r]===p[r];r++);var S=a-r;for(u=1;u<=S&&i[a-u]===p[g-u];u++);return Jo=p.slice(r,1<u?1-u:void 0)}function Xo(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Qo(){return!0}function ym(){return!1}function Wt(r){function i(a,u,p,g,S){this._reactName=a,this._targetInst=p,this.type=u,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(a=r[T],this[T]=a?a(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Qo:ym,this.isPropagationStopped=ym,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),i}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zo=Wt(Es),bl=y({},Es,{view:0,detail:0}),FS=Wt(bl),Vu,$u,xl,Wo=y({},bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==xl&&(xl&&r.type==="mousemove"?(Vu=r.screenX-xl.screenX,$u=r.screenY-xl.screenY):$u=Vu=0,xl=r),Vu)},movementY:function(r){return"movementY"in r?r.movementY:$u}}),bm=Wt(Wo),JS=y({},Wo,{dataTransfer:0}),XS=Wt(JS),QS=y({},bl,{relatedTarget:0}),Gu=Wt(QS),ZS=y({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),WS=Wt(ZS),ek=y({},Es,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),tk=Wt(ek),nk=y({},Es,{data:0}),xm=Wt(nk),rk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ik={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lk(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=ik[r])?!!i[r]:!1}function Yu(){return lk}var ok=y({},bl,{key:function(r){if(r.key){var i=rk[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Xo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?sk[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yu,charCode:function(r){return r.type==="keypress"?Xo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Xo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ak=Wt(ok),ck=y({},Wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vm=Wt(ck),uk=y({},bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yu}),fk=Wt(uk),dk=y({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),hk=Wt(dk),pk=y({},Wo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),mk=Wt(pk),gk=y({},Es,{newState:0,oldState:0}),yk=Wt(gk),bk=[9,13,27,32],Ku=nr&&"CompositionEvent"in window,vl=null;nr&&"documentMode"in document&&(vl=document.documentMode);var xk=nr&&"TextEvent"in window&&!vl,Sm=nr&&(!Ku||vl&&8<vl&&11>=vl),km=" ",Tm=!1;function Em(r,i){switch(r){case"keyup":return bk.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var bi=!1;function vk(r,i){switch(r){case"compositionend":return Mm(i);case"keypress":return i.which!==32?null:(Tm=!0,km);case"textInput":return r=i.data,r===km&&Tm?null:r;default:return null}}function Sk(r,i){if(bi)return r==="compositionend"||!Ku&&Em(r,i)?(r=gm(),Jo=qu=Ar=null,bi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Sm&&i.locale!=="ko"?null:i.data;default:return null}}var kk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cm(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!kk[r.type]:i==="textarea"}function wm(r,i,a,u){gi?yi?yi.push(u):yi=[u]:gi=u,i=Va(i,"onChange"),0<i.length&&(a=new Zo("onChange","change",null,a,u),r.push({event:a,listeners:i}))}var Sl=null,kl=null;function Tk(r){c0(r,0)}function ea(r){var i=ml(r);if(am(i))return r}function Nm(r,i){if(r==="change")return i}var Am=!1;if(nr){var Pu;if(nr){var Fu="oninput"in document;if(!Fu){var Om=document.createElement("div");Om.setAttribute("oninput","return;"),Fu=typeof Om.oninput=="function"}Pu=Fu}else Pu=!1;Am=Pu&&(!document.documentMode||9<document.documentMode)}function Dm(){Sl&&(Sl.detachEvent("onpropertychange",jm),kl=Sl=null)}function jm(r){if(r.propertyName==="value"&&ea(kl)){var i=[];wm(i,kl,r,Hu(r)),mm(Tk,i)}}function Ek(r,i,a){r==="focusin"?(Dm(),Sl=i,kl=a,Sl.attachEvent("onpropertychange",jm)):r==="focusout"&&Dm()}function Mk(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ea(kl)}function Ck(r,i){if(r==="click")return ea(i)}function wk(r,i){if(r==="input"||r==="change")return ea(i)}function Nk(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var dn=typeof Object.is=="function"?Object.is:Nk;function Tl(r,i){if(dn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var p=a[u];if(!se.call(i,p)||!dn(r[p],i[p]))return!1}return!0}function Rm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function zm(r,i){var a=Rm(r);r=0;for(var u;a;){if(a.nodeType===3){if(u=r+a.textContent.length,r<=i&&u>=i)return{node:a,offset:i-r};r=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Rm(a)}}function Lm(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Lm(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function _m(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Po(r.document);i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=Po(r.document)}return i}function Ju(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var Ak=nr&&"documentMode"in document&&11>=document.documentMode,xi=null,Xu=null,El=null,Qu=!1;function Bm(r,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qu||xi==null||xi!==Po(u)||(u=xi,"selectionStart"in u&&Ju(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),El&&Tl(El,u)||(El=u,u=Va(Xu,"onSelect"),0<u.length&&(i=new Zo("onSelect","select",null,i,a),r.push({event:i,listeners:u}),i.target=xi)))}function Ms(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var vi={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},Zu={},Hm={};nr&&(Hm=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function Cs(r){if(Zu[r])return Zu[r];if(!vi[r])return r;var i=vi[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in Hm)return Zu[r]=i[a];return r}var Um=Cs("animationend"),Im=Cs("animationiteration"),qm=Cs("animationstart"),Ok=Cs("transitionrun"),Dk=Cs("transitionstart"),jk=Cs("transitioncancel"),Vm=Cs("transitionend"),$m=new Map,Wu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wu.push("scrollEnd");function Hn(r,i){$m.set(r,i),Ts(i,[r])}var ta=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},En=[],Si=0,ef=0;function na(){for(var r=Si,i=ef=Si=0;i<r;){var a=En[i];En[i++]=null;var u=En[i];En[i++]=null;var p=En[i];En[i++]=null;var g=En[i];if(En[i++]=null,u!==null&&p!==null){var S=u.pending;S===null?p.next=p:(p.next=S.next,S.next=p),u.pending=p}g!==0&&Gm(a,p,g)}}function ra(r,i,a,u){En[Si++]=r,En[Si++]=i,En[Si++]=a,En[Si++]=u,ef|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function tf(r,i,a,u){return ra(r,i,a,u),sa(r)}function ws(r,i){return ra(r,null,null,i),sa(r)}function Gm(r,i,a){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a);for(var p=!1,g=r.return;g!==null;)g.childLanes|=a,u=g.alternate,u!==null&&(u.childLanes|=a),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(p=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,p&&i!==null&&(p=31-fn(a),r=g.hiddenUpdates,u=r[p],u===null?r[p]=[i]:u.push(i),i.lane=a|536870912),g):null}function sa(r){if(50<Kl)throw Kl=0,fd=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var ki={};function Rk(r,i,a,u){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(r,i,a,u){return new Rk(r,i,a,u)}function nf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function rr(r,i){var a=r.alternate;return a===null?(a=hn(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&65011712,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a.refCleanup=r.refCleanup,a}function Ym(r,i){r.flags&=65011714;var a=r.alternate;return a===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,i=a.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function ia(r,i,a,u,p,g){var S=0;if(u=r,typeof r=="function")nf(r)&&(S=1);else if(typeof r=="string")S=HT(r,a,oe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case ue:return r=hn(31,a,i,p),r.elementType=ue,r.lanes=g,r;case E:return Ns(a.children,p,g,i);case M:S=8,p|=24;break;case C:return r=hn(12,a,i,p|2),r.elementType=C,r.lanes=g,r;case Y:return r=hn(13,a,i,p),r.elementType=Y,r.lanes=g,r;case J:return r=hn(19,a,i,p),r.elementType=J,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case $:S=10;break e;case L:S=9;break e;case te:S=11;break e;case V:S=14;break e;case le:S=16,u=null;break e}S=29,a=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=hn(S,a,i,p),i.elementType=r,i.type=u,i.lanes=g,i}function Ns(r,i,a,u){return r=hn(7,r,u,i),r.lanes=a,r}function rf(r,i,a){return r=hn(6,r,null,i),r.lanes=a,r}function Km(r){var i=hn(18,null,null,0);return i.stateNode=r,i}function sf(r,i,a){return i=hn(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Pm=new WeakMap;function Mn(r,i){if(typeof r=="object"&&r!==null){var a=Pm.get(r);return a!==void 0?a:(i={value:r,source:i,stack:B(i)},Pm.set(r,i),i)}return{value:r,source:i,stack:B(i)}}var Ti=[],Ei=0,la=null,Ml=0,Cn=[],wn=0,Or=null,$n=1,Gn="";function sr(r,i){Ti[Ei++]=Ml,Ti[Ei++]=la,la=r,Ml=i}function Fm(r,i,a){Cn[wn++]=$n,Cn[wn++]=Gn,Cn[wn++]=Or,Or=r;var u=$n;r=Gn;var p=32-fn(u)-1;u&=~(1<<p),a+=1;var g=32-fn(i)+p;if(30<g){var S=p-p%5;g=(u&(1<<S)-1).toString(32),u>>=S,p-=S,$n=1<<32-fn(i)+p|a<<p|u,Gn=g+r}else $n=1<<g|a<<p|u,Gn=r}function lf(r){r.return!==null&&(sr(r,1),Fm(r,1,0))}function of(r){for(;r===la;)la=Ti[--Ei],Ti[Ei]=null,Ml=Ti[--Ei],Ti[Ei]=null;for(;r===Or;)Or=Cn[--wn],Cn[wn]=null,Gn=Cn[--wn],Cn[wn]=null,$n=Cn[--wn],Cn[wn]=null}function Jm(r,i){Cn[wn++]=$n,Cn[wn++]=Gn,Cn[wn++]=Or,$n=i.id,Gn=i.overflow,Or=r}var zt=null,rt=null,He=!1,Dr=null,Nn=!1,af=Error(s(519));function jr(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cl(Mn(i,r)),af}function Xm(r){var i=r.stateNode,a=r.type,u=r.memoizedProps;switch(i[Rt]=r,i[Zt]=u,a){case"dialog":Re("cancel",i),Re("close",i);break;case"iframe":case"object":case"embed":Re("load",i);break;case"video":case"audio":for(a=0;a<Fl.length;a++)Re(Fl[a],i);break;case"source":Re("error",i);break;case"img":case"image":case"link":Re("error",i),Re("load",i);break;case"details":Re("toggle",i);break;case"input":Re("invalid",i),cm(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Re("invalid",i);break;case"textarea":Re("invalid",i),fm(i,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||u.suppressHydrationWarning===!0||h0(i.textContent,a)?(u.popover!=null&&(Re("beforetoggle",i),Re("toggle",i)),u.onScroll!=null&&Re("scroll",i),u.onScrollEnd!=null&&Re("scrollend",i),u.onClick!=null&&(i.onclick=tr),i=!0):i=!1,i||jr(r,!0)}function Qm(r){for(zt=r.return;zt;)switch(zt.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:zt=zt.return}}function Mi(r){if(r!==zt)return!1;if(!He)return Qm(r),He=!0,!1;var i=r.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=r.type,a=!(a!=="form"&&a!=="button")||Cd(r.type,r.memoizedProps)),a=!a),a&&rt&&jr(r),Qm(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));rt=k0(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));rt=k0(r)}else i===27?(i=rt,Kr(r.type)?(r=Dd,Dd=null,rt=r):rt=i):rt=zt?On(r.stateNode.nextSibling):null;return!0}function As(){rt=zt=null,He=!1}function cf(){var r=Dr;return r!==null&&(rn===null?rn=r:rn.push.apply(rn,r),Dr=null),r}function Cl(r){Dr===null?Dr=[r]:Dr.push(r)}var uf=N(null),Os=null,ir=null;function Rr(r,i,a){ie(uf,i._currentValue),i._currentValue=a}function lr(r){r._currentValue=uf.current,q(uf)}function ff(r,i,a){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===a)break;r=r.return}}function df(r,i,a,u){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var g=p.dependencies;if(g!==null){var S=p.child;g=g.firstContext;e:for(;g!==null;){var T=g;g=p;for(var w=0;w<i.length;w++)if(T.context===i[w]){g.lanes|=a,T=g.alternate,T!==null&&(T.lanes|=a),ff(g.return,a,r),u||(S=null);break e}g=T.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(s(341));S.lanes|=a,g=S.alternate,g!==null&&(g.lanes|=a),ff(S,a,r),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===r){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function Ci(r,i,a,u){r=null;for(var p=i,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var T=p.type;dn(p.pendingProps.value,S.value)||(r!==null?r.push(T):r=[T])}}else if(p===Ae.current){if(S=p.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Wl):r=[Wl])}p=p.return}r!==null&&df(i,r,a,u),i.flags|=262144}function oa(r){for(r=r.firstContext;r!==null;){if(!dn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ds(r){Os=r,ir=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Lt(r){return Zm(Os,r)}function aa(r,i){return Os===null&&Ds(r),Zm(r,i)}function Zm(r,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ir===null){if(r===null)throw Error(s(308));ir=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else ir=ir.next=i;return a}var zk=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(a,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(a){return a()})}},Lk=n.unstable_scheduleCallback,_k=n.unstable_NormalPriority,xt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hf(){return{controller:new zk,data:new Map,refCount:0}}function wl(r){r.refCount--,r.refCount===0&&Lk(_k,function(){r.controller.abort()})}var Nl=null,pf=0,wi=0,Ni=null;function Bk(r,i){if(Nl===null){var a=Nl=[];pf=0,wi=yd(),Ni={status:"pending",value:void 0,then:function(u){a.push(u)}}}return pf++,i.then(Wm,Wm),i}function Wm(){if(--pf===0&&Nl!==null){Ni!==null&&(Ni.status="fulfilled");var r=Nl;Nl=null,wi=0,Ni=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function Hk(r,i){var a=[],u={status:"pending",value:null,reason:null,then:function(p){a.push(p)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var p=0;p<a.length;p++)(0,a[p])(i)},function(p){for(u.status="rejected",u.reason=p,p=0;p<a.length;p++)(0,a[p])(void 0)}),u}var eg=U.S;U.S=function(r,i){By=Me(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Bk(r,i),eg!==null&&eg(r,i)};var js=N(null);function mf(){var r=js.current;return r!==null?r:Ze.pooledCache}function ca(r,i){i===null?ie(js,js.current):ie(js,i.pool)}function tg(){var r=mf();return r===null?null:{parent:xt._currentValue,pool:r}}var Ai=Error(s(460)),gf=Error(s(474)),ua=Error(s(542)),fa={then:function(){}};function ng(r){return r=r.status,r==="fulfilled"||r==="rejected"}function rg(r,i,a){switch(a=r[a],a===void 0?r.push(i):a!==i&&(i.then(tr,tr),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,ig(r),r;default:if(typeof i.status=="string")i.then(tr,tr);else{if(r=Ze,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=u}},function(u){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,ig(r),r}throw zs=i,Ai}}function Rs(r){try{var i=r._init;return i(r._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(zs=a,Ai):a}}var zs=null;function sg(){if(zs===null)throw Error(s(459));var r=zs;return zs=null,r}function ig(r){if(r===Ai||r===ua)throw Error(s(483))}var Oi=null,Al=0;function da(r){var i=Al;return Al+=1,Oi===null&&(Oi=[]),rg(Oi,r,i)}function Ol(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function ha(r,i){throw i.$$typeof===x?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function lg(r){function i(D,A){if(r){var j=D.deletions;j===null?(D.deletions=[A],D.flags|=16):j.push(A)}}function a(D,A){if(!r)return null;for(;A!==null;)i(D,A),A=A.sibling;return null}function u(D){for(var A=new Map;D!==null;)D.key!==null?A.set(D.key,D):A.set(D.index,D),D=D.sibling;return A}function p(D,A){return D=rr(D,A),D.index=0,D.sibling=null,D}function g(D,A,j){return D.index=j,r?(j=D.alternate,j!==null?(j=j.index,j<A?(D.flags|=67108866,A):j):(D.flags|=67108866,A)):(D.flags|=1048576,A)}function S(D){return r&&D.alternate===null&&(D.flags|=67108866),D}function T(D,A,j,F){return A===null||A.tag!==6?(A=rf(j,D.mode,F),A.return=D,A):(A=p(A,j),A.return=D,A)}function w(D,A,j,F){var me=j.type;return me===E?G(D,A,j.props.children,F,j.key):A!==null&&(A.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===le&&Rs(me)===A.type)?(A=p(A,j.props),Ol(A,j),A.return=D,A):(A=ia(j.type,j.key,j.props,null,D.mode,F),Ol(A,j),A.return=D,A)}function R(D,A,j,F){return A===null||A.tag!==4||A.stateNode.containerInfo!==j.containerInfo||A.stateNode.implementation!==j.implementation?(A=sf(j,D.mode,F),A.return=D,A):(A=p(A,j.children||[]),A.return=D,A)}function G(D,A,j,F,me){return A===null||A.tag!==7?(A=Ns(j,D.mode,F,me),A.return=D,A):(A=p(A,j),A.return=D,A)}function X(D,A,j){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=rf(""+A,D.mode,j),A.return=D,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case v:return j=ia(A.type,A.key,A.props,null,D.mode,j),Ol(j,A),j.return=D,j;case k:return A=sf(A,D.mode,j),A.return=D,A;case le:return A=Rs(A),X(D,A,j)}if(ke(A)||ze(A))return A=Ns(A,D.mode,j,null),A.return=D,A;if(typeof A.then=="function")return X(D,da(A),j);if(A.$$typeof===$)return X(D,aa(D,A),j);ha(D,A)}return null}function _(D,A,j,F){var me=A!==null?A.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return me!==null?null:T(D,A,""+j,F);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case v:return j.key===me?w(D,A,j,F):null;case k:return j.key===me?R(D,A,j,F):null;case le:return j=Rs(j),_(D,A,j,F)}if(ke(j)||ze(j))return me!==null?null:G(D,A,j,F,null);if(typeof j.then=="function")return _(D,A,da(j),F);if(j.$$typeof===$)return _(D,A,aa(D,j),F);ha(D,j)}return null}function H(D,A,j,F,me){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return D=D.get(j)||null,T(A,D,""+F,me);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case v:return D=D.get(F.key===null?j:F.key)||null,w(A,D,F,me);case k:return D=D.get(F.key===null?j:F.key)||null,R(A,D,F,me);case le:return F=Rs(F),H(D,A,j,F,me)}if(ke(F)||ze(F))return D=D.get(j)||null,G(A,D,F,me,null);if(typeof F.then=="function")return H(D,A,j,da(F),me);if(F.$$typeof===$)return H(D,A,j,aa(A,F),me);ha(A,F)}return null}function ce(D,A,j,F){for(var me=null,Ve=null,fe=A,we=A=0,_e=null;fe!==null&&we<j.length;we++){fe.index>we?(_e=fe,fe=null):_e=fe.sibling;var $e=_(D,fe,j[we],F);if($e===null){fe===null&&(fe=_e);break}r&&fe&&$e.alternate===null&&i(D,fe),A=g($e,A,we),Ve===null?me=$e:Ve.sibling=$e,Ve=$e,fe=_e}if(we===j.length)return a(D,fe),He&&sr(D,we),me;if(fe===null){for(;we<j.length;we++)fe=X(D,j[we],F),fe!==null&&(A=g(fe,A,we),Ve===null?me=fe:Ve.sibling=fe,Ve=fe);return He&&sr(D,we),me}for(fe=u(fe);we<j.length;we++)_e=H(fe,D,we,j[we],F),_e!==null&&(r&&_e.alternate!==null&&fe.delete(_e.key===null?we:_e.key),A=g(_e,A,we),Ve===null?me=_e:Ve.sibling=_e,Ve=_e);return r&&fe.forEach(function(Qr){return i(D,Qr)}),He&&sr(D,we),me}function xe(D,A,j,F){if(j==null)throw Error(s(151));for(var me=null,Ve=null,fe=A,we=A=0,_e=null,$e=j.next();fe!==null&&!$e.done;we++,$e=j.next()){fe.index>we?(_e=fe,fe=null):_e=fe.sibling;var Qr=_(D,fe,$e.value,F);if(Qr===null){fe===null&&(fe=_e);break}r&&fe&&Qr.alternate===null&&i(D,fe),A=g(Qr,A,we),Ve===null?me=Qr:Ve.sibling=Qr,Ve=Qr,fe=_e}if($e.done)return a(D,fe),He&&sr(D,we),me;if(fe===null){for(;!$e.done;we++,$e=j.next())$e=X(D,$e.value,F),$e!==null&&(A=g($e,A,we),Ve===null?me=$e:Ve.sibling=$e,Ve=$e);return He&&sr(D,we),me}for(fe=u(fe);!$e.done;we++,$e=j.next())$e=H(fe,D,we,$e.value,F),$e!==null&&(r&&$e.alternate!==null&&fe.delete($e.key===null?we:$e.key),A=g($e,A,we),Ve===null?me=$e:Ve.sibling=$e,Ve=$e);return r&&fe.forEach(function(JT){return i(D,JT)}),He&&sr(D,we),me}function Xe(D,A,j,F){if(typeof j=="object"&&j!==null&&j.type===E&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case v:e:{for(var me=j.key;A!==null;){if(A.key===me){if(me=j.type,me===E){if(A.tag===7){a(D,A.sibling),F=p(A,j.props.children),F.return=D,D=F;break e}}else if(A.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===le&&Rs(me)===A.type){a(D,A.sibling),F=p(A,j.props),Ol(F,j),F.return=D,D=F;break e}a(D,A);break}else i(D,A);A=A.sibling}j.type===E?(F=Ns(j.props.children,D.mode,F,j.key),F.return=D,D=F):(F=ia(j.type,j.key,j.props,null,D.mode,F),Ol(F,j),F.return=D,D=F)}return S(D);case k:e:{for(me=j.key;A!==null;){if(A.key===me)if(A.tag===4&&A.stateNode.containerInfo===j.containerInfo&&A.stateNode.implementation===j.implementation){a(D,A.sibling),F=p(A,j.children||[]),F.return=D,D=F;break e}else{a(D,A);break}else i(D,A);A=A.sibling}F=sf(j,D.mode,F),F.return=D,D=F}return S(D);case le:return j=Rs(j),Xe(D,A,j,F)}if(ke(j))return ce(D,A,j,F);if(ze(j)){if(me=ze(j),typeof me!="function")throw Error(s(150));return j=me.call(j),xe(D,A,j,F)}if(typeof j.then=="function")return Xe(D,A,da(j),F);if(j.$$typeof===$)return Xe(D,A,aa(D,j),F);ha(D,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,A!==null&&A.tag===6?(a(D,A.sibling),F=p(A,j),F.return=D,D=F):(a(D,A),F=rf(j,D.mode,F),F.return=D,D=F),S(D)):a(D,A)}return function(D,A,j,F){try{Al=0;var me=Xe(D,A,j,F);return Oi=null,me}catch(fe){if(fe===Ai||fe===ua)throw fe;var Ve=hn(29,fe,null,D.mode);return Ve.lanes=F,Ve.return=D,Ve}finally{}}}var Ls=lg(!0),og=lg(!1),zr=!1;function yf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bf(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Lr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function _r(r,i,a){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Ge&2)!==0){var p=u.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),u.pending=i,i=sa(r),Gm(r,null,a),i}return ra(r,u,i,a),sa(r)}function Dl(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,a|=u,i.lanes=a,Zp(r,a)}}function xf(r,i){var a=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var p=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?p=g=S:g=g.next=S,a=a.next}while(a!==null);g===null?p=g=i:g=g.next=i}else p=g=i;a={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}var vf=!1;function jl(){if(vf){var r=Ni;if(r!==null)throw r}}function Rl(r,i,a,u){vf=!1;var p=r.updateQueue;zr=!1;var g=p.firstBaseUpdate,S=p.lastBaseUpdate,T=p.shared.pending;if(T!==null){p.shared.pending=null;var w=T,R=w.next;w.next=null,S===null?g=R:S.next=R,S=w;var G=r.alternate;G!==null&&(G=G.updateQueue,T=G.lastBaseUpdate,T!==S&&(T===null?G.firstBaseUpdate=R:T.next=R,G.lastBaseUpdate=w))}if(g!==null){var X=p.baseState;S=0,G=R=w=null,T=g;do{var _=T.lane&-536870913,H=_!==T.lane;if(H?(Le&_)===_:(u&_)===_){_!==0&&_===wi&&(vf=!0),G!==null&&(G=G.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ce=r,xe=T;_=i;var Xe=a;switch(xe.tag){case 1:if(ce=xe.payload,typeof ce=="function"){X=ce.call(Xe,X,_);break e}X=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=xe.payload,_=typeof ce=="function"?ce.call(Xe,X,_):ce,_==null)break e;X=y({},X,_);break e;case 2:zr=!0}}_=T.callback,_!==null&&(r.flags|=64,H&&(r.flags|=8192),H=p.callbacks,H===null?p.callbacks=[_]:H.push(_))}else H={lane:_,tag:T.tag,payload:T.payload,callback:T.callback,next:null},G===null?(R=G=H,w=X):G=G.next=H,S|=_;if(T=T.next,T===null){if(T=p.shared.pending,T===null)break;H=T,T=H.next,H.next=null,p.lastBaseUpdate=H,p.shared.pending=null}}while(!0);G===null&&(w=X),p.baseState=w,p.firstBaseUpdate=R,p.lastBaseUpdate=G,g===null&&(p.shared.lanes=0),qr|=S,r.lanes=S,r.memoizedState=X}}function ag(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function cg(r,i){var a=r.callbacks;if(a!==null)for(r.callbacks=null,r=0;r<a.length;r++)ag(a[r],i)}var Di=N(null),pa=N(0);function ug(r,i){r=mr,ie(pa,r),ie(Di,i),mr=r|i.baseLanes}function Sf(){ie(pa,mr),ie(Di,Di.current)}function kf(){mr=pa.current,q(Di),q(pa)}var pn=N(null),An=null;function Br(r){var i=r.alternate;ie(mt,mt.current&1),ie(pn,r),An===null&&(i===null||Di.current!==null||i.memoizedState!==null)&&(An=r)}function Tf(r){ie(mt,mt.current),ie(pn,r),An===null&&(An=r)}function fg(r){r.tag===22?(ie(mt,mt.current),ie(pn,r),An===null&&(An=r)):Hr()}function Hr(){ie(mt,mt.current),ie(pn,pn.current)}function mn(r){q(pn),An===r&&(An=null),q(mt)}var mt=N(0);function ma(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ad(a)||Od(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var or=0,Ce=null,Fe=null,vt=null,ga=!1,ji=!1,_s=!1,ya=0,zl=0,Ri=null,Uk=0;function ft(){throw Error(s(321))}function Ef(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!dn(r[a],i[a]))return!1;return!0}function Mf(r,i,a,u,p,g){return or=g,Ce=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,U.H=r===null||r.memoizedState===null?Fg:If,_s=!1,g=a(u,p),_s=!1,ji&&(g=hg(i,a,u,p)),dg(r),g}function dg(r){U.H=Bl;var i=Fe!==null&&Fe.next!==null;if(or=0,vt=Fe=Ce=null,ga=!1,zl=0,Ri=null,i)throw Error(s(300));r===null||St||(r=r.dependencies,r!==null&&oa(r)&&(St=!0))}function hg(r,i,a,u){Ce=r;var p=0;do{if(ji&&(Ri=null),zl=0,ji=!1,25<=p)throw Error(s(301));if(p+=1,vt=Fe=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}U.H=Jg,g=i(a,u)}while(ji);return g}function Ik(){var r=U.H,i=r.useState()[0];return i=typeof i.then=="function"?Ll(i):i,r=r.useState()[0],(Fe!==null?Fe.memoizedState:null)!==r&&(Ce.flags|=1024),i}function Cf(){var r=ya!==0;return ya=0,r}function wf(r,i,a){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~a}function Nf(r){if(ga){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ga=!1}or=0,vt=Fe=Ce=null,ji=!1,zl=ya=0,Ri=null}function Pt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ce.memoizedState=vt=r:vt=vt.next=r,vt}function gt(){if(Fe===null){var r=Ce.alternate;r=r!==null?r.memoizedState:null}else r=Fe.next;var i=vt===null?Ce.memoizedState:vt.next;if(i!==null)vt=i,Fe=r;else{if(r===null)throw Ce.alternate===null?Error(s(467)):Error(s(310));Fe=r,r={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},vt===null?Ce.memoizedState=vt=r:vt=vt.next=r}return vt}function ba(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ll(r){var i=zl;return zl+=1,Ri===null&&(Ri=[]),r=rg(Ri,r,i),i=Ce,(vt===null?i.memoizedState:vt.next)===null&&(i=i.alternate,U.H=i===null||i.memoizedState===null?Fg:If),r}function xa(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Ll(r);if(r.$$typeof===$)return Lt(r)}throw Error(s(438,String(r)))}function Af(r){var i=null,a=Ce.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var u=Ce.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=ba(),Ce.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(r),u=0;u<r;u++)a[u]=Ne;return i.index++,a}function ar(r,i){return typeof i=="function"?i(r):i}function va(r){var i=gt();return Of(i,Fe,r)}function Of(r,i,a){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var p=r.baseQueue,g=u.pending;if(g!==null){if(p!==null){var S=p.next;p.next=g.next,g.next=S}i.baseQueue=p=g,u.pending=null}if(g=r.baseState,p===null)r.memoizedState=g;else{i=p.next;var T=S=null,w=null,R=i,G=!1;do{var X=R.lane&-536870913;if(X!==R.lane?(Le&X)===X:(or&X)===X){var _=R.revertLane;if(_===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),X===wi&&(G=!0);else if((or&_)===_){R=R.next,_===wi&&(G=!0);continue}else X={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},w===null?(T=w=X,S=g):w=w.next=X,Ce.lanes|=_,qr|=_;X=R.action,_s&&a(g,X),g=R.hasEagerState?R.eagerState:a(g,X)}else _={lane:X,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},w===null?(T=w=_,S=g):w=w.next=_,Ce.lanes|=X,qr|=X;R=R.next}while(R!==null&&R!==i);if(w===null?S=g:w.next=T,!dn(g,r.memoizedState)&&(St=!0,G&&(a=Ni,a!==null)))throw a;r.memoizedState=g,r.baseState=S,r.baseQueue=w,u.lastRenderedState=g}return p===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Df(r){var i=gt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var u=a.dispatch,p=a.pending,g=i.memoizedState;if(p!==null){a.pending=null;var S=p=p.next;do g=r(g,S.action),S=S.next;while(S!==p);dn(g,i.memoizedState)||(St=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,u]}function pg(r,i,a){var u=Ce,p=gt(),g=He;if(g){if(a===void 0)throw Error(s(407));a=a()}else a=i();var S=!dn((Fe||p).memoizedState,a);if(S&&(p.memoizedState=a,St=!0),p=p.queue,zf(yg.bind(null,u,p,r),[r]),p.getSnapshot!==i||S||vt!==null&&vt.memoizedState.tag&1){if(u.flags|=2048,zi(9,{destroy:void 0},gg.bind(null,u,p,a,i),null),Ze===null)throw Error(s(349));g||(or&127)!==0||mg(u,i,a)}return a}function mg(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=Ce.updateQueue,i===null?(i=ba(),Ce.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function gg(r,i,a,u){i.value=a,i.getSnapshot=u,bg(i)&&xg(r)}function yg(r,i,a){return a(function(){bg(i)&&xg(r)})}function bg(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!dn(r,a)}catch{return!0}}function xg(r){var i=ws(r,2);i!==null&&sn(i,r,2)}function jf(r){var i=Pt();if(typeof r=="function"){var a=r;if(r=a(),_s){wr(!0);try{a()}finally{wr(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:r},i}function vg(r,i,a,u){return r.baseState=a,Of(r,Fe,typeof u=="function"?u:ar)}function qk(r,i,a,u,p){if(Ta(r))throw Error(s(485));if(r=i.action,r!==null){var g={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};U.T!==null?a(!0):g.isTransition=!1,u(g),a=i.pending,a===null?(g.next=i.pending=g,Sg(i,g)):(g.next=a.next,i.pending=a.next=g)}}function Sg(r,i){var a=i.action,u=i.payload,p=r.state;if(i.isTransition){var g=U.T,S={};U.T=S;try{var T=a(p,u),w=U.S;w!==null&&w(S,T),kg(r,i,T)}catch(R){Rf(r,i,R)}finally{g!==null&&S.types!==null&&(g.types=S.types),U.T=g}}else try{g=a(p,u),kg(r,i,g)}catch(R){Rf(r,i,R)}}function kg(r,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Tg(r,i,u)},function(u){return Rf(r,i,u)}):Tg(r,i,a)}function Tg(r,i,a){i.status="fulfilled",i.value=a,Eg(i),r.state=a,i=r.pending,i!==null&&(a=i.next,a===i?r.pending=null:(a=a.next,i.next=a,Sg(r,a)))}function Rf(r,i,a){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=a,Eg(i),i=i.next;while(i!==u)}r.action=null}function Eg(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function Mg(r,i){return i}function Cg(r,i){if(He){var a=Ze.formState;if(a!==null){e:{var u=Ce;if(He){if(rt){t:{for(var p=rt,g=Nn;p.nodeType!==8;){if(!g){p=null;break t}if(p=On(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){rt=On(p.nextSibling),u=p.data==="F!";break e}}jr(u)}u=!1}u&&(i=a[0])}}return a=Pt(),a.memoizedState=a.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mg,lastRenderedState:i},a.queue=u,a=Yg.bind(null,Ce,u),u.dispatch=a,u=jf(!1),g=Uf.bind(null,Ce,!1,u.queue),u=Pt(),p={state:i,dispatch:null,action:r,pending:null},u.queue=p,a=qk.bind(null,Ce,p,g,a),p.dispatch=a,u.memoizedState=r,[i,a,!1]}function wg(r){var i=gt();return Ng(i,Fe,r)}function Ng(r,i,a){if(i=Of(r,i,Mg)[0],r=va(ar)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Ll(i)}catch(S){throw S===Ai?ua:S}else u=i;i=gt();var p=i.queue,g=p.dispatch;return a!==i.memoizedState&&(Ce.flags|=2048,zi(9,{destroy:void 0},Vk.bind(null,p,a),null)),[u,g,r]}function Vk(r,i){r.action=i}function Ag(r){var i=gt(),a=Fe;if(a!==null)return Ng(i,a,r);gt(),i=i.memoizedState,a=gt();var u=a.queue.dispatch;return a.memoizedState=r,[i,u,!1]}function zi(r,i,a,u){return r={tag:r,create:a,deps:u,inst:i,next:null},i=Ce.updateQueue,i===null&&(i=ba(),Ce.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=r.next=r:(u=a.next,a.next=r,r.next=u,i.lastEffect=r),r}function Og(){return gt().memoizedState}function Sa(r,i,a,u){var p=Pt();Ce.flags|=r,p.memoizedState=zi(1|i,{destroy:void 0},a,u===void 0?null:u)}function ka(r,i,a,u){var p=gt();u=u===void 0?null:u;var g=p.memoizedState.inst;Fe!==null&&u!==null&&Ef(u,Fe.memoizedState.deps)?p.memoizedState=zi(i,g,a,u):(Ce.flags|=r,p.memoizedState=zi(1|i,g,a,u))}function Dg(r,i){Sa(8390656,8,r,i)}function zf(r,i){ka(2048,8,r,i)}function $k(r){Ce.flags|=4;var i=Ce.updateQueue;if(i===null)i=ba(),Ce.updateQueue=i,i.events=[r];else{var a=i.events;a===null?i.events=[r]:a.push(r)}}function jg(r){var i=gt().memoizedState;return $k({ref:i,nextImpl:r}),function(){if((Ge&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Rg(r,i){return ka(4,2,r,i)}function zg(r,i){return ka(4,4,r,i)}function Lg(r,i){if(typeof i=="function"){r=r();var a=i(r);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function _g(r,i,a){a=a!=null?a.concat([r]):null,ka(4,4,Lg.bind(null,i,r),a)}function Lf(){}function Bg(r,i){var a=gt();i=i===void 0?null:i;var u=a.memoizedState;return i!==null&&Ef(i,u[1])?u[0]:(a.memoizedState=[r,i],r)}function Hg(r,i){var a=gt();i=i===void 0?null:i;var u=a.memoizedState;if(i!==null&&Ef(i,u[1]))return u[0];if(u=r(),_s){wr(!0);try{r()}finally{wr(!1)}}return a.memoizedState=[u,i],u}function _f(r,i,a){return a===void 0||(or&1073741824)!==0&&(Le&261930)===0?r.memoizedState=i:(r.memoizedState=a,r=Uy(),Ce.lanes|=r,qr|=r,a)}function Ug(r,i,a,u){return dn(a,i)?a:Di.current!==null?(r=_f(r,a,u),dn(r,i)||(St=!0),r):(or&42)===0||(or&1073741824)!==0&&(Le&261930)===0?(St=!0,r.memoizedState=a):(r=Uy(),Ce.lanes|=r,qr|=r,i)}function Ig(r,i,a,u,p){var g=ee.p;ee.p=g!==0&&8>g?g:8;var S=U.T,T={};U.T=T,Uf(r,!1,i,a);try{var w=p(),R=U.S;if(R!==null&&R(T,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var G=Hk(w,u);_l(r,i,G,bn(r))}else _l(r,i,u,bn(r))}catch(X){_l(r,i,{then:function(){},status:"rejected",reason:X},bn())}finally{ee.p=g,S!==null&&T.types!==null&&(S.types=T.types),U.T=S}}function Gk(){}function Bf(r,i,a,u){if(r.tag!==5)throw Error(s(476));var p=qg(r).queue;Ig(r,p,i,he,a===null?Gk:function(){return Vg(r),a(u)})}function qg(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:he},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:a},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Vg(r){var i=qg(r);i.next===null&&(i=r.alternate.memoizedState),_l(r,i.next.queue,{},bn())}function Hf(){return Lt(Wl)}function $g(){return gt().memoizedState}function Gg(){return gt().memoizedState}function Yk(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var a=bn();r=Lr(a);var u=_r(i,r,a);u!==null&&(sn(u,i,a),Dl(u,i,a)),i={cache:hf()},r.payload=i;return}i=i.return}}function Kk(r,i,a){var u=bn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ta(r)?Kg(i,a):(a=tf(r,i,a,u),a!==null&&(sn(a,r,u),Pg(a,i,u)))}function Yg(r,i,a){var u=bn();_l(r,i,a,u)}function _l(r,i,a,u){var p={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ta(r))Kg(i,p);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var S=i.lastRenderedState,T=g(S,a);if(p.hasEagerState=!0,p.eagerState=T,dn(T,S))return ra(r,i,p,0),Ze===null&&na(),!1}catch{}finally{}if(a=tf(r,i,p,u),a!==null)return sn(a,r,u),Pg(a,i,u),!0}return!1}function Uf(r,i,a,u){if(u={lane:2,revertLane:yd(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ta(r)){if(i)throw Error(s(479))}else i=tf(r,a,u,2),i!==null&&sn(i,r,2)}function Ta(r){var i=r.alternate;return r===Ce||i!==null&&i===Ce}function Kg(r,i){ji=ga=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function Pg(r,i,a){if((a&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,a|=u,i.lanes=a,Zp(r,a)}}var Bl={readContext:Lt,use:xa,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft};Bl.useEffectEvent=ft;var Fg={readContext:Lt,use:xa,useCallback:function(r,i){return Pt().memoizedState=[r,i===void 0?null:i],r},useContext:Lt,useEffect:Dg,useImperativeHandle:function(r,i,a){a=a!=null?a.concat([r]):null,Sa(4194308,4,Lg.bind(null,i,r),a)},useLayoutEffect:function(r,i){return Sa(4194308,4,r,i)},useInsertionEffect:function(r,i){Sa(4,2,r,i)},useMemo:function(r,i){var a=Pt();i=i===void 0?null:i;var u=r();if(_s){wr(!0);try{r()}finally{wr(!1)}}return a.memoizedState=[u,i],u},useReducer:function(r,i,a){var u=Pt();if(a!==void 0){var p=a(i);if(_s){wr(!0);try{a(i)}finally{wr(!1)}}}else p=i;return u.memoizedState=u.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},u.queue=r,r=r.dispatch=Kk.bind(null,Ce,r),[u.memoizedState,r]},useRef:function(r){var i=Pt();return r={current:r},i.memoizedState=r},useState:function(r){r=jf(r);var i=r.queue,a=Yg.bind(null,Ce,i);return i.dispatch=a,[r.memoizedState,a]},useDebugValue:Lf,useDeferredValue:function(r,i){var a=Pt();return _f(a,r,i)},useTransition:function(){var r=jf(!1);return r=Ig.bind(null,Ce,r.queue,!0,!1),Pt().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,a){var u=Ce,p=Pt();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Ze===null)throw Error(s(349));(Le&127)!==0||mg(u,i,a)}p.memoizedState=a;var g={value:a,getSnapshot:i};return p.queue=g,Dg(yg.bind(null,u,g,r),[r]),u.flags|=2048,zi(9,{destroy:void 0},gg.bind(null,u,g,a,i),null),a},useId:function(){var r=Pt(),i=Ze.identifierPrefix;if(He){var a=Gn,u=$n;a=(u&~(1<<32-fn(u)-1)).toString(32)+a,i="_"+i+"R_"+a,a=ya++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Uk++,i="_"+i+"r_"+a.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Hf,useFormState:Cg,useActionState:Cg,useOptimistic:function(r){var i=Pt();i.memoizedState=i.baseState=r;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Uf.bind(null,Ce,!0,a),a.dispatch=i,[r,i]},useMemoCache:Af,useCacheRefresh:function(){return Pt().memoizedState=Yk.bind(null,Ce)},useEffectEvent:function(r){var i=Pt(),a={impl:r};return i.memoizedState=a,function(){if((Ge&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},If={readContext:Lt,use:xa,useCallback:Bg,useContext:Lt,useEffect:zf,useImperativeHandle:_g,useInsertionEffect:Rg,useLayoutEffect:zg,useMemo:Hg,useReducer:va,useRef:Og,useState:function(){return va(ar)},useDebugValue:Lf,useDeferredValue:function(r,i){var a=gt();return Ug(a,Fe.memoizedState,r,i)},useTransition:function(){var r=va(ar)[0],i=gt().memoizedState;return[typeof r=="boolean"?r:Ll(r),i]},useSyncExternalStore:pg,useId:$g,useHostTransitionStatus:Hf,useFormState:wg,useActionState:wg,useOptimistic:function(r,i){var a=gt();return vg(a,Fe,r,i)},useMemoCache:Af,useCacheRefresh:Gg};If.useEffectEvent=jg;var Jg={readContext:Lt,use:xa,useCallback:Bg,useContext:Lt,useEffect:zf,useImperativeHandle:_g,useInsertionEffect:Rg,useLayoutEffect:zg,useMemo:Hg,useReducer:Df,useRef:Og,useState:function(){return Df(ar)},useDebugValue:Lf,useDeferredValue:function(r,i){var a=gt();return Fe===null?_f(a,r,i):Ug(a,Fe.memoizedState,r,i)},useTransition:function(){var r=Df(ar)[0],i=gt().memoizedState;return[typeof r=="boolean"?r:Ll(r),i]},useSyncExternalStore:pg,useId:$g,useHostTransitionStatus:Hf,useFormState:Ag,useActionState:Ag,useOptimistic:function(r,i){var a=gt();return Fe!==null?vg(a,Fe,r,i):(a.baseState=r,[r,a.queue.dispatch])},useMemoCache:Af,useCacheRefresh:Gg};Jg.useEffectEvent=jg;function qf(r,i,a,u){i=r.memoizedState,a=a(u,i),a=a==null?i:y({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Vf={enqueueSetState:function(r,i,a){r=r._reactInternals;var u=bn(),p=Lr(u);p.payload=i,a!=null&&(p.callback=a),i=_r(r,p,u),i!==null&&(sn(i,r,u),Dl(i,r,u))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var u=bn(),p=Lr(u);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=_r(r,p,u),i!==null&&(sn(i,r,u),Dl(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=bn(),u=Lr(a);u.tag=2,i!=null&&(u.callback=i),i=_r(r,u,a),i!==null&&(sn(i,r,a),Dl(i,r,a))}};function Xg(r,i,a,u,p,g,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,S):i.prototype&&i.prototype.isPureReactComponent?!Tl(a,u)||!Tl(p,g):!0}function Qg(r,i,a,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==r&&Vf.enqueueReplaceState(i,i.state,null)}function Bs(r,i){var a=i;if("ref"in i){a={};for(var u in i)u!=="ref"&&(a[u]=i[u])}if(r=r.defaultProps){a===i&&(a=y({},a));for(var p in r)a[p]===void 0&&(a[p]=r[p])}return a}function Zg(r){ta(r)}function Wg(r){console.error(r)}function ey(r){ta(r)}function Ea(r,i){try{var a=r.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function ty(r,i,a){try{var u=r.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function $f(r,i,a){return a=Lr(a),a.tag=3,a.payload={element:null},a.callback=function(){Ea(r,i)},a}function ny(r){return r=Lr(r),r.tag=3,r}function ry(r,i,a,u){var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var g=u.value;r.payload=function(){return p(g)},r.callback=function(){ty(i,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){ty(i,a,u),typeof p!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function Pk(r,i,a,u,p){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=a.alternate,i!==null&&Ci(i,a,p,!0),a=pn.current,a!==null){switch(a.tag){case 31:case 13:return An===null?_a():a.alternate===null&&dt===0&&(dt=3),a.flags&=-257,a.flags|=65536,a.lanes=p,u===fa?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([u]):i.add(u),pd(r,u,p)),!1;case 22:return a.flags|=65536,u===fa?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([u]):a.add(u)),pd(r,u,p)),!1}throw Error(s(435,a.tag))}return pd(r,u,p),_a(),!1}if(He)return i=pn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,u!==af&&(r=Error(s(422),{cause:u}),Cl(Mn(r,a)))):(u!==af&&(i=Error(s(423),{cause:u}),Cl(Mn(i,a))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,u=Mn(u,a),p=$f(r.stateNode,u,p),xf(r,p),dt!==4&&(dt=2)),!1;var g=Error(s(520),{cause:u});if(g=Mn(g,a),Yl===null?Yl=[g]:Yl.push(g),dt!==4&&(dt=2),i===null)return!0;u=Mn(u,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,r=p&-p,a.lanes|=r,r=$f(a.stateNode,u,r),xf(a,r),!1;case 1:if(i=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Vr===null||!Vr.has(g))))return a.flags|=65536,p&=-p,a.lanes|=p,p=ny(p),ry(p,r,a,u),xf(a,p),!1}a=a.return}while(a!==null);return!1}var Gf=Error(s(461)),St=!1;function _t(r,i,a,u){i.child=r===null?og(i,null,a,u):Ls(i,r.child,a,u)}function sy(r,i,a,u,p){a=a.render;var g=i.ref;if("ref"in u){var S={};for(var T in u)T!=="ref"&&(S[T]=u[T])}else S=u;return Ds(i),u=Mf(r,i,a,S,g,p),T=Cf(),r!==null&&!St?(wf(r,i,p),cr(r,i,p)):(He&&T&&lf(i),i.flags|=1,_t(r,i,u,p),i.child)}function iy(r,i,a,u,p){if(r===null){var g=a.type;return typeof g=="function"&&!nf(g)&&g.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=g,ly(r,i,g,u,p)):(r=ia(a.type,null,u,i,i.mode,p),r.ref=i.ref,r.return=i,i.child=r)}if(g=r.child,!Zf(r,p)){var S=g.memoizedProps;if(a=a.compare,a=a!==null?a:Tl,a(S,u)&&r.ref===i.ref)return cr(r,i,p)}return i.flags|=1,r=rr(g,u),r.ref=i.ref,r.return=i,i.child=r}function ly(r,i,a,u,p){if(r!==null){var g=r.memoizedProps;if(Tl(g,u)&&r.ref===i.ref)if(St=!1,i.pendingProps=u=g,Zf(r,p))(r.flags&131072)!==0&&(St=!0);else return i.lanes=r.lanes,cr(r,i,p)}return Yf(r,i,a,u,p)}function oy(r,i,a,u){var p=u.children,g=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|a:a,r!==null){for(u=i.child=r.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~g}else u=0,i.child=null;return ay(r,i,g,a,u)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&ca(i,g!==null?g.cachePool:null),g!==null?ug(i,g):Sf(),fg(i);else return u=i.lanes=536870912,ay(r,i,g!==null?g.baseLanes|a:a,a,u)}else g!==null?(ca(i,g.cachePool),ug(i,g),Hr(),i.memoizedState=null):(r!==null&&ca(i,null),Sf(),Hr());return _t(r,i,p,a),i.child}function Hl(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function ay(r,i,a,u,p){var g=mf();return g=g===null?null:{parent:xt._currentValue,pool:g},i.memoizedState={baseLanes:a,cachePool:g},r!==null&&ca(i,null),Sf(),fg(i),r!==null&&Ci(r,i,u,!0),i.childLanes=p,null}function Ma(r,i){return i=wa({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function cy(r,i,a){return Ls(i,r.child,null,a),r=Ma(i,i.pendingProps),r.flags|=2,mn(i),i.memoizedState=null,r}function Fk(r,i,a){var u=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(He){if(u.mode==="hidden")return r=Ma(i,u),i.lanes=536870912,Hl(null,r);if(Tf(i),(r=rt)?(r=S0(r,Nn),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Or!==null?{id:$n,overflow:Gn}:null,retryLane:536870912,hydrationErrors:null},a=Km(r),a.return=i,i.child=a,zt=i,rt=null)):r=null,r===null)throw jr(i);return i.lanes=536870912,null}return Ma(i,u)}var g=r.memoizedState;if(g!==null){var S=g.dehydrated;if(Tf(i),p)if(i.flags&256)i.flags&=-257,i=cy(r,i,a);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(St||Ci(r,i,a,!1),p=(a&r.childLanes)!==0,St||p){if(u=Ze,u!==null&&(S=Wp(u,a),S!==0&&S!==g.retryLane))throw g.retryLane=S,ws(r,S),sn(u,r,S),Gf;_a(),i=cy(r,i,a)}else r=g.treeContext,rt=On(S.nextSibling),zt=i,He=!0,Dr=null,Nn=!1,r!==null&&Jm(i,r),i=Ma(i,u),i.flags|=4096;return i}return r=rr(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Ca(r,i){var a=i.ref;if(a===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(r===null||r.ref!==a)&&(i.flags|=4194816)}}function Yf(r,i,a,u,p){return Ds(i),a=Mf(r,i,a,u,void 0,p),u=Cf(),r!==null&&!St?(wf(r,i,p),cr(r,i,p)):(He&&u&&lf(i),i.flags|=1,_t(r,i,a,p),i.child)}function uy(r,i,a,u,p,g){return Ds(i),i.updateQueue=null,a=hg(i,u,a,p),dg(r),u=Cf(),r!==null&&!St?(wf(r,i,g),cr(r,i,g)):(He&&u&&lf(i),i.flags|=1,_t(r,i,a,g),i.child)}function fy(r,i,a,u,p){if(Ds(i),i.stateNode===null){var g=ki,S=a.contextType;typeof S=="object"&&S!==null&&(g=Lt(S)),g=new a(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Vf,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},yf(i),S=a.contextType,g.context=typeof S=="object"&&S!==null?Lt(S):ki,g.state=i.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(qf(i,a,S,u),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&Vf.enqueueReplaceState(g,g.state,null),Rl(i,u,g,p),jl(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){g=i.stateNode;var T=i.memoizedProps,w=Bs(a,T);g.props=w;var R=g.context,G=a.contextType;S=ki,typeof G=="object"&&G!==null&&(S=Lt(G));var X=a.getDerivedStateFromProps;G=typeof X=="function"||typeof g.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,G||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T||R!==S)&&Qg(i,g,u,S),zr=!1;var _=i.memoizedState;g.state=_,Rl(i,u,g,p),jl(),R=i.memoizedState,T||_!==R||zr?(typeof X=="function"&&(qf(i,a,X,u),R=i.memoizedState),(w=zr||Xg(i,a,w,u,_,R,S))?(G||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=R),g.props=u,g.state=R,g.context=S,u=w):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,bf(r,i),S=i.memoizedProps,G=Bs(a,S),g.props=G,X=i.pendingProps,_=g.context,R=a.contextType,w=ki,typeof R=="object"&&R!==null&&(w=Lt(R)),T=a.getDerivedStateFromProps,(R=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==X||_!==w)&&Qg(i,g,u,w),zr=!1,_=i.memoizedState,g.state=_,Rl(i,u,g,p),jl();var H=i.memoizedState;S!==X||_!==H||zr||r!==null&&r.dependencies!==null&&oa(r.dependencies)?(typeof T=="function"&&(qf(i,a,T,u),H=i.memoizedState),(G=zr||Xg(i,a,G,u,_,H,w)||r!==null&&r.dependencies!==null&&oa(r.dependencies))?(R||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,H,w),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,H,w)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===r.memoizedProps&&_===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&_===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=H),g.props=u,g.state=H,g.context=w,u=G):(typeof g.componentDidUpdate!="function"||S===r.memoizedProps&&_===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&_===r.memoizedState||(i.flags|=1024),u=!1)}return g=u,Ca(r,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,r!==null&&u?(i.child=Ls(i,r.child,null,p),i.child=Ls(i,null,a,p)):_t(r,i,a,p),i.memoizedState=g.state,r=i.child):r=cr(r,i,p),r}function dy(r,i,a,u){return As(),i.flags|=256,_t(r,i,a,u),i.child}var Kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pf(r){return{baseLanes:r,cachePool:tg()}}function Ff(r,i,a){return r=r!==null?r.childLanes&~a:0,i&&(r|=yn),r}function hy(r,i,a){var u=i.pendingProps,p=!1,g=(i.flags&128)!==0,S;if((S=g)||(S=r!==null&&r.memoizedState===null?!1:(mt.current&2)!==0),S&&(p=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,r===null){if(He){if(p?Br(i):Hr(),(r=rt)?(r=S0(r,Nn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Or!==null?{id:$n,overflow:Gn}:null,retryLane:536870912,hydrationErrors:null},a=Km(r),a.return=i,i.child=a,zt=i,rt=null)):r=null,r===null)throw jr(i);return Od(r)?i.lanes=32:i.lanes=536870912,null}var T=u.children;return u=u.fallback,p?(Hr(),p=i.mode,T=wa({mode:"hidden",children:T},p),u=Ns(u,p,a,null),T.return=i,u.return=i,T.sibling=u,i.child=T,u=i.child,u.memoizedState=Pf(a),u.childLanes=Ff(r,S,a),i.memoizedState=Kf,Hl(null,u)):(Br(i),Jf(i,T))}var w=r.memoizedState;if(w!==null&&(T=w.dehydrated,T!==null)){if(g)i.flags&256?(Br(i),i.flags&=-257,i=Xf(r,i,a)):i.memoizedState!==null?(Hr(),i.child=r.child,i.flags|=128,i=null):(Hr(),T=u.fallback,p=i.mode,u=wa({mode:"visible",children:u.children},p),T=Ns(T,p,a,null),T.flags|=2,u.return=i,T.return=i,u.sibling=T,i.child=u,Ls(i,r.child,null,a),u=i.child,u.memoizedState=Pf(a),u.childLanes=Ff(r,S,a),i.memoizedState=Kf,i=Hl(null,u));else if(Br(i),Od(T)){if(S=T.nextSibling&&T.nextSibling.dataset,S)var R=S.dgst;S=R,u=Error(s(419)),u.stack="",u.digest=S,Cl({value:u,source:null,stack:null}),i=Xf(r,i,a)}else if(St||Ci(r,i,a,!1),S=(a&r.childLanes)!==0,St||S){if(S=Ze,S!==null&&(u=Wp(S,a),u!==0&&u!==w.retryLane))throw w.retryLane=u,ws(r,u),sn(S,r,u),Gf;Ad(T)||_a(),i=Xf(r,i,a)}else Ad(T)?(i.flags|=192,i.child=r.child,i=null):(r=w.treeContext,rt=On(T.nextSibling),zt=i,He=!0,Dr=null,Nn=!1,r!==null&&Jm(i,r),i=Jf(i,u.children),i.flags|=4096);return i}return p?(Hr(),T=u.fallback,p=i.mode,w=r.child,R=w.sibling,u=rr(w,{mode:"hidden",children:u.children}),u.subtreeFlags=w.subtreeFlags&65011712,R!==null?T=rr(R,T):(T=Ns(T,p,a,null),T.flags|=2),T.return=i,u.return=i,u.sibling=T,i.child=u,Hl(null,u),u=i.child,T=r.child.memoizedState,T===null?T=Pf(a):(p=T.cachePool,p!==null?(w=xt._currentValue,p=p.parent!==w?{parent:w,pool:w}:p):p=tg(),T={baseLanes:T.baseLanes|a,cachePool:p}),u.memoizedState=T,u.childLanes=Ff(r,S,a),i.memoizedState=Kf,Hl(r.child,u)):(Br(i),a=r.child,r=a.sibling,a=rr(a,{mode:"visible",children:u.children}),a.return=i,a.sibling=null,r!==null&&(S=i.deletions,S===null?(i.deletions=[r],i.flags|=16):S.push(r)),i.child=a,i.memoizedState=null,a)}function Jf(r,i){return i=wa({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function wa(r,i){return r=hn(22,r,null,i),r.lanes=0,r}function Xf(r,i,a){return Ls(i,r.child,null,a),r=Jf(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function py(r,i,a){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),ff(r.return,i,a)}function Qf(r,i,a,u,p,g){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:p,treeForkCount:g}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=p,S.treeForkCount=g)}function my(r,i,a){var u=i.pendingProps,p=u.revealOrder,g=u.tail;u=u.children;var S=mt.current,T=(S&2)!==0;if(T?(S=S&1|2,i.flags|=128):S&=1,ie(mt,S),_t(r,i,u,a),u=He?Ml:0,!T&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&py(r,a,i);else if(r.tag===19)py(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(a=i.child,p=null;a!==null;)r=a.alternate,r!==null&&ma(r)===null&&(p=a),a=a.sibling;a=p,a===null?(p=i.child,i.child=null):(p=a.sibling,a.sibling=null),Qf(i,!1,p,a,g,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,p=i.child,i.child=null;p!==null;){if(r=p.alternate,r!==null&&ma(r)===null){i.child=p;break}r=p.sibling,p.sibling=a,a=p,p=r}Qf(i,!0,a,null,g,u);break;case"together":Qf(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function cr(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),qr|=i.lanes,(a&i.childLanes)===0)if(r!==null){if(Ci(r,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,a=rr(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=rr(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function Zf(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&oa(r)))}function Jk(r,i,a){switch(i.tag){case 3:Qe(i,i.stateNode.containerInfo),Rr(i,xt,r.memoizedState.cache),As();break;case 27:case 5:Qt(i);break;case 4:Qe(i,i.stateNode.containerInfo);break;case 10:Rr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Tf(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Br(i),i.flags|=128,null):(a&i.child.childLanes)!==0?hy(r,i,a):(Br(i),r=cr(r,i,a),r!==null?r.sibling:null);Br(i);break;case 19:var p=(r.flags&128)!==0;if(u=(a&i.childLanes)!==0,u||(Ci(r,i,a,!1),u=(a&i.childLanes)!==0),p){if(u)return my(r,i,a);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ie(mt,mt.current),u)break;return null;case 22:return i.lanes=0,oy(r,i,a,i.pendingProps);case 24:Rr(i,xt,r.memoizedState.cache)}return cr(r,i,a)}function gy(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps)St=!0;else{if(!Zf(r,a)&&(i.flags&128)===0)return St=!1,Jk(r,i,a);St=(r.flags&131072)!==0}else St=!1,He&&(i.flags&1048576)!==0&&Fm(i,Ml,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=Rs(i.elementType),i.type=r,typeof r=="function")nf(r)?(u=Bs(r,u),i.tag=1,i=fy(null,i,r,u,a)):(i.tag=0,i=Yf(null,i,r,u,a));else{if(r!=null){var p=r.$$typeof;if(p===te){i.tag=11,i=sy(null,i,r,u,a);break e}else if(p===V){i.tag=14,i=iy(null,i,r,u,a);break e}}throw i=Ie(r)||r,Error(s(306,i,""))}}return i;case 0:return Yf(r,i,i.type,i.pendingProps,a);case 1:return u=i.type,p=Bs(u,i.pendingProps),fy(r,i,u,p,a);case 3:e:{if(Qe(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var g=i.memoizedState;p=g.element,bf(r,i),Rl(i,u,null,a);var S=i.memoizedState;if(u=S.cache,Rr(i,xt,u),u!==g.cache&&df(i,[xt],a,!0),jl(),u=S.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=dy(r,i,u,a);break e}else if(u!==p){p=Mn(Error(s(424)),i),Cl(p),i=dy(r,i,u,a);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(rt=On(r.firstChild),zt=i,He=!0,Dr=null,Nn=!0,a=og(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(As(),u===p){i=cr(r,i,a);break e}_t(r,i,u,a)}i=i.child}return i;case 26:return Ca(r,i),r===null?(a=w0(i.type,null,i.pendingProps,null))?i.memoizedState=a:He||(a=i.type,r=i.pendingProps,u=$a(ge.current).createElement(a),u[Rt]=i,u[Zt]=r,Bt(u,a,r),Nt(u),i.stateNode=u):i.memoizedState=w0(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Qt(i),r===null&&He&&(u=i.stateNode=E0(i.type,i.pendingProps,ge.current),zt=i,Nn=!0,p=rt,Kr(i.type)?(Dd=p,rt=On(u.firstChild)):rt=p),_t(r,i,i.pendingProps.children,a),Ca(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&He&&((p=u=rt)&&(u=MT(u,i.type,i.pendingProps,Nn),u!==null?(i.stateNode=u,zt=i,rt=On(u.firstChild),Nn=!1,p=!0):p=!1),p||jr(i)),Qt(i),p=i.type,g=i.pendingProps,S=r!==null?r.memoizedProps:null,u=g.children,Cd(p,g)?u=null:S!==null&&Cd(p,S)&&(i.flags|=32),i.memoizedState!==null&&(p=Mf(r,i,Ik,null,null,a),Wl._currentValue=p),Ca(r,i),_t(r,i,u,a),i.child;case 6:return r===null&&He&&((r=a=rt)&&(a=CT(a,i.pendingProps,Nn),a!==null?(i.stateNode=a,zt=i,rt=null,r=!0):r=!1),r||jr(i)),null;case 13:return hy(r,i,a);case 4:return Qe(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Ls(i,null,u,a):_t(r,i,u,a),i.child;case 11:return sy(r,i,i.type,i.pendingProps,a);case 7:return _t(r,i,i.pendingProps,a),i.child;case 8:return _t(r,i,i.pendingProps.children,a),i.child;case 12:return _t(r,i,i.pendingProps.children,a),i.child;case 10:return u=i.pendingProps,Rr(i,i.type,u.value),_t(r,i,u.children,a),i.child;case 9:return p=i.type._context,u=i.pendingProps.children,Ds(i),p=Lt(p),u=u(p),i.flags|=1,_t(r,i,u,a),i.child;case 14:return iy(r,i,i.type,i.pendingProps,a);case 15:return ly(r,i,i.type,i.pendingProps,a);case 19:return my(r,i,a);case 31:return Fk(r,i,a);case 22:return oy(r,i,a,i.pendingProps);case 24:return Ds(i),u=Lt(xt),r===null?(p=mf(),p===null&&(p=Ze,g=hf(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=a),p=g),i.memoizedState={parent:u,cache:p},yf(i),Rr(i,xt,p)):((r.lanes&a)!==0&&(bf(r,i),Rl(i,null,null,a),jl()),p=r.memoizedState,g=i.memoizedState,p.parent!==u?(p={parent:u,cache:u},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),Rr(i,xt,u)):(u=g.cache,Rr(i,xt,u),u!==p.cache&&df(i,[xt],a,!0))),_t(r,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ur(r){r.flags|=4}function Wf(r,i,a,u,p){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if($y())r.flags|=8192;else throw zs=fa,gf}else r.flags&=-16777217}function yy(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!j0(i))if($y())r.flags|=8192;else throw zs=fa,gf}function Na(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Xp():536870912,r.lanes|=i,Hi|=i)}function Ul(r,i){if(!He)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function st(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,u=0;if(i)for(var p=r.child;p!==null;)a|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)a|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=u,r.childLanes=a,i}function Xk(r,i,a){var u=i.pendingProps;switch(of(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(i),null;case 1:return st(i),null;case 3:return a=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),lr(xt),qe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(r===null||r.child===null)&&(Mi(i)?ur(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,cf())),st(i),null;case 26:var p=i.type,g=i.memoizedState;return r===null?(ur(i),g!==null?(st(i),yy(i,g)):(st(i),Wf(i,p,null,u,a))):g?g!==r.memoizedState?(ur(i),st(i),yy(i,g)):(st(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&ur(i),st(i),Wf(i,p,r,u,a)),null;case 27:if(Vt(i),a=ge.current,p=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&ur(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return st(i),null}r=oe.current,Mi(i)?Xm(i):(r=E0(p,u,a),i.stateNode=r,ur(i))}return st(i),null;case 5:if(Vt(i),p=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&ur(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return st(i),null}if(g=oe.current,Mi(i))Xm(i);else{var S=$a(ge.current);switch(g){case 1:g=S.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=S.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=S.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?S.createElement(p,{is:u.is}):S.createElement(p)}}g[Rt]=i,g[Zt]=u;e:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)g.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break e;for(;S.sibling===null;){if(S.return===null||S.return===i)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=g;e:switch(Bt(g,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ur(i)}}return st(i),Wf(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,a),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&ur(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=ge.current,Mi(i)){if(r=i.stateNode,a=i.memoizedProps,u=null,p=zt,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}r[Rt]=i,r=!!(r.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||h0(r.nodeValue,a)),r||jr(i,!0)}else r=$a(r).createTextNode(u),r[Rt]=i,i.stateNode=r}return st(i),null;case 31:if(a=i.memoizedState,r===null||r.memoizedState!==null){if(u=Mi(i),a!==null){if(r===null){if(!u)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[Rt]=i}else As(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;st(i),r=!1}else a=cf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=a),r=!0;if(!r)return i.flags&256?(mn(i),i):(mn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return st(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=Mi(i),u!==null&&u.dehydrated!==null){if(r===null){if(!p)throw Error(s(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[Rt]=i}else As(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;st(i),p=!1}else p=cf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(mn(i),i):(mn(i),null)}return mn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=u!==null,r=r!==null&&r.memoizedState!==null,a&&(u=i.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==p&&(u.flags|=2048)),a!==r&&a&&(i.child.flags|=8192),Na(i,i.updateQueue),st(i),null);case 4:return qe(),r===null&&Sd(i.stateNode.containerInfo),st(i),null;case 10:return lr(i.type),st(i),null;case 19:if(q(mt),u=i.memoizedState,u===null)return st(i),null;if(p=(i.flags&128)!==0,g=u.rendering,g===null)if(p)Ul(u,!1);else{if(dt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(g=ma(r),g!==null){for(i.flags|=128,Ul(u,!1),r=g.updateQueue,i.updateQueue=r,Na(i,r),i.subtreeFlags=0,r=a,a=i.child;a!==null;)Ym(a,r),a=a.sibling;return ie(mt,mt.current&1|2),He&&sr(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&Me()>Ra&&(i.flags|=128,p=!0,Ul(u,!1),i.lanes=4194304)}else{if(!p)if(r=ma(g),r!==null){if(i.flags|=128,p=!0,r=r.updateQueue,i.updateQueue=r,Na(i,r),Ul(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!He)return st(i),null}else 2*Me()-u.renderingStartTime>Ra&&a!==536870912&&(i.flags|=128,p=!0,Ul(u,!1),i.lanes=4194304);u.isBackwards?(g.sibling=i.child,i.child=g):(r=u.last,r!==null?r.sibling=g:i.child=g,u.last=g)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Me(),r.sibling=null,a=mt.current,ie(mt,p?a&1|2:a&1),He&&sr(i,u.treeForkCount),r):(st(i),null);case 22:case 23:return mn(i),kf(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(a&536870912)!==0&&(i.flags&128)===0&&(st(i),i.subtreeFlags&6&&(i.flags|=8192)):st(i),a=i.updateQueue,a!==null&&Na(i,a.retryQueue),a=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==a&&(i.flags|=2048),r!==null&&q(js),null;case 24:return a=null,r!==null&&(a=r.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),lr(xt),st(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Qk(r,i){switch(of(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return lr(xt),qe(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Vt(i),null;case 31:if(i.memoizedState!==null){if(mn(i),i.alternate===null)throw Error(s(340));As()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(mn(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));As()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return q(mt),null;case 4:return qe(),null;case 10:return lr(i.type),null;case 22:case 23:return mn(i),kf(),r!==null&&q(js),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return lr(xt),null;case 25:return null;default:return null}}function by(r,i){switch(of(i),i.tag){case 3:lr(xt),qe();break;case 26:case 27:case 5:Vt(i);break;case 4:qe();break;case 31:i.memoizedState!==null&&mn(i);break;case 13:mn(i);break;case 19:q(mt);break;case 10:lr(i.type);break;case 22:case 23:mn(i),kf(),r!==null&&q(js);break;case 24:lr(xt)}}function Il(r,i){try{var a=i.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var p=u.next;a=p;do{if((a.tag&r)===r){u=void 0;var g=a.create,S=a.inst;u=g(),S.destroy=u}a=a.next}while(a!==p)}}catch(T){Ke(i,i.return,T)}}function Ur(r,i,a){try{var u=i.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var g=p.next;u=g;do{if((u.tag&r)===r){var S=u.inst,T=S.destroy;if(T!==void 0){S.destroy=void 0,p=i;var w=a,R=T;try{R()}catch(G){Ke(p,w,G)}}}u=u.next}while(u!==g)}}catch(G){Ke(i,i.return,G)}}function xy(r){var i=r.updateQueue;if(i!==null){var a=r.stateNode;try{cg(i,a)}catch(u){Ke(r,r.return,u)}}}function vy(r,i,a){a.props=Bs(r.type,r.memoizedProps),a.state=r.memoizedState;try{a.componentWillUnmount()}catch(u){Ke(r,i,u)}}function ql(r,i){try{var a=r.ref;if(a!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof a=="function"?r.refCleanup=a(u):a.current=u}}catch(p){Ke(r,i,p)}}function Yn(r,i){var a=r.ref,u=r.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(p){Ke(r,i,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(p){Ke(r,i,p)}else a.current=null}function Sy(r){var i=r.type,a=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(p){Ke(r,r.return,p)}}function ed(r,i,a){try{var u=r.stateNode;xT(u,r.type,a,i),u[Zt]=i}catch(p){Ke(r,r.return,p)}}function ky(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Kr(r.type)||r.tag===4}function td(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ky(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Kr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function nd(r,i,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(r,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(r),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=tr));else if(u!==4&&(u===27&&Kr(r.type)&&(a=r.stateNode,i=null),r=r.child,r!==null))for(nd(r,i,a),r=r.sibling;r!==null;)nd(r,i,a),r=r.sibling}function Aa(r,i,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(u!==4&&(u===27&&Kr(r.type)&&(a=r.stateNode),r=r.child,r!==null))for(Aa(r,i,a),r=r.sibling;r!==null;)Aa(r,i,a),r=r.sibling}function Ty(r){var i=r.stateNode,a=r.memoizedProps;try{for(var u=r.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Bt(i,u,a),i[Rt]=r,i[Zt]=a}catch(g){Ke(r,r.return,g)}}var fr=!1,kt=!1,rd=!1,Ey=typeof WeakSet=="function"?WeakSet:Set,At=null;function Zk(r,i){if(r=r.containerInfo,Ed=Xa,r=_m(r),Ju(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var p=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var S=0,T=-1,w=-1,R=0,G=0,X=r,_=null;t:for(;;){for(var H;X!==a||p!==0&&X.nodeType!==3||(T=S+p),X!==g||u!==0&&X.nodeType!==3||(w=S+u),X.nodeType===3&&(S+=X.nodeValue.length),(H=X.firstChild)!==null;)_=X,X=H;for(;;){if(X===r)break t;if(_===a&&++R===p&&(T=S),_===g&&++G===u&&(w=S),(H=X.nextSibling)!==null)break;X=_,_=X.parentNode}X=H}a=T===-1||w===-1?null:{start:T,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(Md={focusedElem:r,selectionRange:a},Xa=!1,At=i;At!==null;)if(i=At,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,At=r;else for(;At!==null;){switch(i=At,g=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(a=0;a<r.length;a++)p=r[a],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,a=i,p=g.memoizedProps,g=g.memoizedState,u=a.stateNode;try{var ce=Bs(a.type,p);r=u.getSnapshotBeforeUpdate(ce,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(xe){Ke(a,a.return,xe)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,a=r.nodeType,a===9)Nd(r);else if(a===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Nd(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,At=r;break}At=i.return}}function My(r,i,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:hr(r,a),u&4&&Il(5,a);break;case 1:if(hr(r,a),u&4)if(r=a.stateNode,i===null)try{r.componentDidMount()}catch(S){Ke(a,a.return,S)}else{var p=Bs(a.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(p,i,r.__reactInternalSnapshotBeforeUpdate)}catch(S){Ke(a,a.return,S)}}u&64&&xy(a),u&512&&ql(a,a.return);break;case 3:if(hr(r,a),u&64&&(r=a.updateQueue,r!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{cg(r,i)}catch(S){Ke(a,a.return,S)}}break;case 27:i===null&&u&4&&Ty(a);case 26:case 5:hr(r,a),i===null&&u&4&&Sy(a),u&512&&ql(a,a.return);break;case 12:hr(r,a);break;case 31:hr(r,a),u&4&&Ny(r,a);break;case 13:hr(r,a),u&4&&Ay(r,a),u&64&&(r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(a=oT.bind(null,a),wT(r,a))));break;case 22:if(u=a.memoizedState!==null||fr,!u){i=i!==null&&i.memoizedState!==null||kt,p=fr;var g=kt;fr=u,(kt=i)&&!g?pr(r,a,(a.subtreeFlags&8772)!==0):hr(r,a),fr=p,kt=g}break;case 30:break;default:hr(r,a)}}function Cy(r){var i=r.alternate;i!==null&&(r.alternate=null,Cy(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&ju(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var lt=null,en=!1;function dr(r,i,a){for(a=a.child;a!==null;)wy(r,i,a),a=a.sibling}function wy(r,i,a){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(fl,a)}catch{}switch(a.tag){case 26:kt||Yn(a,i),dr(r,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:kt||Yn(a,i);var u=lt,p=en;Kr(a.type)&&(lt=a.stateNode,en=!1),dr(r,i,a),Xl(a.stateNode),lt=u,en=p;break;case 5:kt||Yn(a,i);case 6:if(u=lt,p=en,lt=null,dr(r,i,a),lt=u,en=p,lt!==null)if(en)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(g){Ke(a,i,g)}else try{lt.removeChild(a.stateNode)}catch(g){Ke(a,i,g)}break;case 18:lt!==null&&(en?(r=lt,x0(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.stateNode),Ki(r)):x0(lt,a.stateNode));break;case 4:u=lt,p=en,lt=a.stateNode.containerInfo,en=!0,dr(r,i,a),lt=u,en=p;break;case 0:case 11:case 14:case 15:Ur(2,a,i),kt||Ur(4,a,i),dr(r,i,a);break;case 1:kt||(Yn(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"&&vy(a,i,u)),dr(r,i,a);break;case 21:dr(r,i,a);break;case 22:kt=(u=kt)||a.memoizedState!==null,dr(r,i,a),kt=u;break;default:dr(r,i,a)}}function Ny(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Ki(r)}catch(a){Ke(i,i.return,a)}}}function Ay(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ki(r)}catch(a){Ke(i,i.return,a)}}function Wk(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Ey),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Ey),i;default:throw Error(s(435,r.tag))}}function Oa(r,i){var a=Wk(r);i.forEach(function(u){if(!a.has(u)){a.add(u);var p=aT.bind(null,r,u);u.then(p,p)}})}function tn(r,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var p=a[u],g=r,S=i,T=S;e:for(;T!==null;){switch(T.tag){case 27:if(Kr(T.type)){lt=T.stateNode,en=!1;break e}break;case 5:lt=T.stateNode,en=!1;break e;case 3:case 4:lt=T.stateNode.containerInfo,en=!0;break e}T=T.return}if(lt===null)throw Error(s(160));wy(g,S,p),lt=null,en=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Oy(i,r),i=i.sibling}var Un=null;function Oy(r,i){var a=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:tn(i,r),nn(r),u&4&&(Ur(3,r,r.return),Il(3,r),Ur(5,r,r.return));break;case 1:tn(i,r),nn(r),u&512&&(kt||a===null||Yn(a,a.return)),u&64&&fr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(a=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var p=Un;if(tn(i,r),nn(r),u&512&&(kt||a===null||Yn(a,a.return)),u&4){var g=a!==null?a.memoizedState:null;if(u=r.memoizedState,a===null)if(u===null)if(r.stateNode===null){e:{u=r.type,a=r.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":g=p.getElementsByTagName("title")[0],(!g||g[pl]||g[Rt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(u),p.head.insertBefore(g,p.querySelector("head > title"))),Bt(g,u,a),g[Rt]=r,Nt(g),u=g;break e;case"link":var S=O0("link","href",p).get(u+(a.href||""));if(S){for(var T=0;T<S.length;T++)if(g=S[T],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(T,1);break t}}g=p.createElement(u),Bt(g,u,a),p.head.appendChild(g);break;case"meta":if(S=O0("meta","content",p).get(u+(a.content||""))){for(T=0;T<S.length;T++)if(g=S[T],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(T,1);break t}}g=p.createElement(u),Bt(g,u,a),p.head.appendChild(g);break;default:throw Error(s(468,u))}g[Rt]=r,Nt(g),u=g}r.stateNode=u}else D0(p,r.type,r.stateNode);else r.stateNode=A0(p,u,r.memoizedProps);else g!==u?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,u===null?D0(p,r.type,r.stateNode):A0(p,u,r.memoizedProps)):u===null&&r.stateNode!==null&&ed(r,r.memoizedProps,a.memoizedProps)}break;case 27:tn(i,r),nn(r),u&512&&(kt||a===null||Yn(a,a.return)),a!==null&&u&4&&ed(r,r.memoizedProps,a.memoizedProps);break;case 5:if(tn(i,r),nn(r),u&512&&(kt||a===null||Yn(a,a.return)),r.flags&32){p=r.stateNode;try{mi(p,"")}catch(ce){Ke(r,r.return,ce)}}u&4&&r.stateNode!=null&&(p=r.memoizedProps,ed(r,p,a!==null?a.memoizedProps:p)),u&1024&&(rd=!0);break;case 6:if(tn(i,r),nn(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,a=r.stateNode;try{a.nodeValue=u}catch(ce){Ke(r,r.return,ce)}}break;case 3:if(Ka=null,p=Un,Un=Ga(i.containerInfo),tn(i,r),Un=p,nn(r),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Ki(i.containerInfo)}catch(ce){Ke(r,r.return,ce)}rd&&(rd=!1,Dy(r));break;case 4:u=Un,Un=Ga(r.stateNode.containerInfo),tn(i,r),nn(r),Un=u;break;case 12:tn(i,r),nn(r);break;case 31:tn(i,r),nn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Oa(r,u)));break;case 13:tn(i,r),nn(r),r.child.flags&8192&&r.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ja=Me()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Oa(r,u)));break;case 22:p=r.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,R=fr,G=kt;if(fr=R||p,kt=G||w,tn(i,r),kt=G,fr=R,nn(r),u&8192)e:for(i=r.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(a===null||w||fr||kt||Hs(r)),a=null,i=r;;){if(i.tag===5||i.tag===26){if(a===null){w=a=i;try{if(g=w.stateNode,p)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{T=w.stateNode;var X=w.memoizedProps.style,_=X!=null&&X.hasOwnProperty("display")?X.display:null;T.style.display=_==null||typeof _=="boolean"?"":(""+_).trim()}}catch(ce){Ke(w,w.return,ce)}}}else if(i.tag===6){if(a===null){w=i;try{w.stateNode.nodeValue=p?"":w.memoizedProps}catch(ce){Ke(w,w.return,ce)}}}else if(i.tag===18){if(a===null){w=i;try{var H=w.stateNode;p?v0(H,!0):v0(w.stateNode,!1)}catch(ce){Ke(w,w.return,ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Oa(r,a))));break;case 19:tn(i,r),nn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Oa(r,u)));break;case 30:break;case 21:break;default:tn(i,r),nn(r)}}function nn(r){var i=r.flags;if(i&2){try{for(var a,u=r.return;u!==null;){if(ky(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var p=a.stateNode,g=td(r);Aa(r,g,p);break;case 5:var S=a.stateNode;a.flags&32&&(mi(S,""),a.flags&=-33);var T=td(r);Aa(r,T,S);break;case 3:case 4:var w=a.stateNode.containerInfo,R=td(r);nd(r,R,w);break;default:throw Error(s(161))}}catch(G){Ke(r,r.return,G)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Dy(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;Dy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function hr(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)My(r,i.alternate,i),i=i.sibling}function Hs(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ur(4,i,i.return),Hs(i);break;case 1:Yn(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&vy(i,i.return,a),Hs(i);break;case 27:Xl(i.stateNode);case 26:case 5:Yn(i,i.return),Hs(i);break;case 22:i.memoizedState===null&&Hs(i);break;case 30:Hs(i);break;default:Hs(i)}r=r.sibling}}function pr(r,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,p=r,g=i,S=g.flags;switch(g.tag){case 0:case 11:case 15:pr(p,g,a),Il(4,g);break;case 1:if(pr(p,g,a),u=g,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(R){Ke(u,u.return,R)}if(u=g,p=u.updateQueue,p!==null){var T=u.stateNode;try{var w=p.shared.hiddenCallbacks;if(w!==null)for(p.shared.hiddenCallbacks=null,p=0;p<w.length;p++)ag(w[p],T)}catch(R){Ke(u,u.return,R)}}a&&S&64&&xy(g),ql(g,g.return);break;case 27:Ty(g);case 26:case 5:pr(p,g,a),a&&u===null&&S&4&&Sy(g),ql(g,g.return);break;case 12:pr(p,g,a);break;case 31:pr(p,g,a),a&&S&4&&Ny(p,g);break;case 13:pr(p,g,a),a&&S&4&&Ay(p,g);break;case 22:g.memoizedState===null&&pr(p,g,a),ql(g,g.return);break;case 30:break;default:pr(p,g,a)}i=i.sibling}}function sd(r,i){var a=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==a&&(r!=null&&r.refCount++,a!=null&&wl(a))}function id(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&wl(r))}function In(r,i,a,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)jy(r,i,a,u),i=i.sibling}function jy(r,i,a,u){var p=i.flags;switch(i.tag){case 0:case 11:case 15:In(r,i,a,u),p&2048&&Il(9,i);break;case 1:In(r,i,a,u);break;case 3:In(r,i,a,u),p&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&wl(r)));break;case 12:if(p&2048){In(r,i,a,u),r=i.stateNode;try{var g=i.memoizedProps,S=g.id,T=g.onPostCommit;typeof T=="function"&&T(S,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(w){Ke(i,i.return,w)}}else In(r,i,a,u);break;case 31:In(r,i,a,u);break;case 13:In(r,i,a,u);break;case 23:break;case 22:g=i.stateNode,S=i.alternate,i.memoizedState!==null?g._visibility&2?In(r,i,a,u):Vl(r,i):g._visibility&2?In(r,i,a,u):(g._visibility|=2,Li(r,i,a,u,(i.subtreeFlags&10256)!==0||!1)),p&2048&&sd(S,i);break;case 24:In(r,i,a,u),p&2048&&id(i.alternate,i);break;default:In(r,i,a,u)}}function Li(r,i,a,u,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=r,S=i,T=a,w=u,R=S.flags;switch(S.tag){case 0:case 11:case 15:Li(g,S,T,w,p),Il(8,S);break;case 23:break;case 22:var G=S.stateNode;S.memoizedState!==null?G._visibility&2?Li(g,S,T,w,p):Vl(g,S):(G._visibility|=2,Li(g,S,T,w,p)),p&&R&2048&&sd(S.alternate,S);break;case 24:Li(g,S,T,w,p),p&&R&2048&&id(S.alternate,S);break;default:Li(g,S,T,w,p)}i=i.sibling}}function Vl(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=r,u=i,p=u.flags;switch(u.tag){case 22:Vl(a,u),p&2048&&sd(u.alternate,u);break;case 24:Vl(a,u),p&2048&&id(u.alternate,u);break;default:Vl(a,u)}i=i.sibling}}var $l=8192;function _i(r,i,a){if(r.subtreeFlags&$l)for(r=r.child;r!==null;)Ry(r,i,a),r=r.sibling}function Ry(r,i,a){switch(r.tag){case 26:_i(r,i,a),r.flags&$l&&r.memoizedState!==null&&UT(a,Un,r.memoizedState,r.memoizedProps);break;case 5:_i(r,i,a);break;case 3:case 4:var u=Un;Un=Ga(r.stateNode.containerInfo),_i(r,i,a),Un=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=$l,$l=16777216,_i(r,i,a),$l=u):_i(r,i,a));break;default:_i(r,i,a)}}function zy(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Gl(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];At=u,_y(u,r)}zy(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ly(r),r=r.sibling}function Ly(r){switch(r.tag){case 0:case 11:case 15:Gl(r),r.flags&2048&&Ur(9,r,r.return);break;case 3:Gl(r);break;case 12:Gl(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Da(r)):Gl(r);break;default:Gl(r)}}function Da(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];At=u,_y(u,r)}zy(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ur(8,i,i.return),Da(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Da(i));break;default:Da(i)}r=r.sibling}}function _y(r,i){for(;At!==null;){var a=At;switch(a.tag){case 0:case 11:case 15:Ur(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:wl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,At=u;else e:for(a=r;At!==null;){u=At;var p=u.sibling,g=u.return;if(Cy(u),u===a){At=null;break e}if(p!==null){p.return=g,At=p;break e}At=g}}}var eT={getCacheForType:function(r){var i=Lt(xt),a=i.data.get(r);return a===void 0&&(a=r(),i.data.set(r,a)),a},cacheSignal:function(){return Lt(xt).controller.signal}},tT=typeof WeakMap=="function"?WeakMap:Map,Ge=0,Ze=null,je=null,Le=0,Ye=0,gn=null,Ir=!1,Bi=!1,ld=!1,mr=0,dt=0,qr=0,Us=0,od=0,yn=0,Hi=0,Yl=null,rn=null,ad=!1,ja=0,By=0,Ra=1/0,za=null,Vr=null,Ct=0,$r=null,Ui=null,gr=0,cd=0,ud=null,Hy=null,Kl=0,fd=null;function bn(){return(Ge&2)!==0&&Le!==0?Le&-Le:U.T!==null?yd():em()}function Uy(){if(yn===0)if((Le&536870912)===0||He){var r=Vo;Vo<<=1,(Vo&3932160)===0&&(Vo=262144),yn=r}else yn=536870912;return r=pn.current,r!==null&&(r.flags|=32),yn}function sn(r,i,a){(r===Ze&&(Ye===2||Ye===9)||r.cancelPendingCommit!==null)&&(Ii(r,0),Gr(r,Le,yn,!1)),hl(r,a),((Ge&2)===0||r!==Ze)&&(r===Ze&&((Ge&2)===0&&(Us|=a),dt===4&&Gr(r,Le,yn,!1)),Kn(r))}function Iy(r,i,a){if((Ge&6)!==0)throw Error(s(327));var u=!a&&(i&127)===0&&(i&r.expiredLanes)===0||dl(r,i),p=u?sT(r,i):hd(r,i,!0),g=u;do{if(p===0){Bi&&!u&&Gr(r,i,0,!1);break}else{if(a=r.current.alternate,g&&!nT(a)){p=hd(r,i,!1),g=!1;continue}if(p===2){if(g=i,r.errorRecoveryDisabledLanes&g)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var T=r;p=Yl;var w=T.current.memoizedState.isDehydrated;if(w&&(Ii(T,S).flags|=256),S=hd(T,S,!1),S!==2){if(ld&&!w){T.errorRecoveryDisabledLanes|=g,Us|=g,p=4;break e}g=rn,rn=p,g!==null&&(rn===null?rn=g:rn.push.apply(rn,g))}p=S}if(g=!1,p!==2)continue}}if(p===1){Ii(r,0),Gr(r,i,0,!0);break}e:{switch(u=r,g=p,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Gr(u,i,yn,!Ir);break e;case 2:rn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(p=ja+300-Me(),10<p)){if(Gr(u,i,yn,!Ir),Go(u,0,!0)!==0)break e;gr=i,u.timeoutHandle=y0(qy.bind(null,u,a,rn,za,ad,i,yn,Us,Hi,Ir,g,"Throttled",-0,0),p);break e}qy(u,a,rn,za,ad,i,yn,Us,Hi,Ir,g,null,-0,0)}}break}while(!0);Kn(r)}function qy(r,i,a,u,p,g,S,T,w,R,G,X,_,H){if(r.timeoutHandle=-1,X=i.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tr},Ry(i,g,X);var ce=(g&62914560)===g?ja-Me():(g&4194048)===g?By-Me():0;if(ce=IT(X,ce),ce!==null){gr=g,r.cancelPendingCommit=ce(Jy.bind(null,r,i,g,a,u,p,S,T,w,G,X,null,_,H)),Gr(r,g,S,!R);return}}Jy(r,i,g,a,u,p,S,T,w)}function nT(r){for(var i=r;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var p=a[u],g=p.getSnapshot;p=p.value;try{if(!dn(g(),p))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gr(r,i,a,u){i&=~od,i&=~Us,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var p=i;0<p;){var g=31-fn(p),S=1<<g;u[g]=-1,p&=~S}a!==0&&Qp(r,a,i)}function La(){return(Ge&6)===0?(Pl(0),!1):!0}function dd(){if(je!==null){if(Ye===0)var r=je.return;else r=je,ir=Os=null,Nf(r),Oi=null,Al=0,r=je;for(;r!==null;)by(r.alternate,r),r=r.return;je=null}}function Ii(r,i){var a=r.timeoutHandle;a!==-1&&(r.timeoutHandle=-1,kT(a)),a=r.cancelPendingCommit,a!==null&&(r.cancelPendingCommit=null,a()),gr=0,dd(),Ze=r,je=a=rr(r.current,null),Le=i,Ye=0,gn=null,Ir=!1,Bi=dl(r,i),ld=!1,Hi=yn=od=Us=qr=dt=0,rn=Yl=null,ad=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var p=31-fn(u),g=1<<p;i|=r[p],u&=~g}return mr=i,na(),a}function Vy(r,i){Ce=null,U.H=Bl,i===Ai||i===ua?(i=sg(),Ye=3):i===gf?(i=sg(),Ye=4):Ye=i===Gf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,gn=i,je===null&&(dt=1,Ea(r,Mn(i,r.current)))}function $y(){var r=pn.current;return r===null?!0:(Le&4194048)===Le?An===null:(Le&62914560)===Le||(Le&536870912)!==0?r===An:!1}function Gy(){var r=U.H;return U.H=Bl,r===null?Bl:r}function Yy(){var r=U.A;return U.A=eT,r}function _a(){dt=4,Ir||(Le&4194048)!==Le&&pn.current!==null||(Bi=!0),(qr&134217727)===0&&(Us&134217727)===0||Ze===null||Gr(Ze,Le,yn,!1)}function hd(r,i,a){var u=Ge;Ge|=2;var p=Gy(),g=Yy();(Ze!==r||Le!==i)&&(za=null,Ii(r,i)),i=!1;var S=dt;e:do try{if(Ye!==0&&je!==null){var T=je,w=gn;switch(Ye){case 8:dd(),S=6;break e;case 3:case 2:case 9:case 6:pn.current===null&&(i=!0);var R=Ye;if(Ye=0,gn=null,qi(r,T,w,R),a&&Bi){S=0;break e}break;default:R=Ye,Ye=0,gn=null,qi(r,T,w,R)}}rT(),S=dt;break}catch(G){Vy(r,G)}while(!0);return i&&r.shellSuspendCounter++,ir=Os=null,Ge=u,U.H=p,U.A=g,je===null&&(Ze=null,Le=0,na()),S}function rT(){for(;je!==null;)Ky(je)}function sT(r,i){var a=Ge;Ge|=2;var u=Gy(),p=Yy();Ze!==r||Le!==i?(za=null,Ra=Me()+500,Ii(r,i)):Bi=dl(r,i);e:do try{if(Ye!==0&&je!==null){i=je;var g=gn;t:switch(Ye){case 1:Ye=0,gn=null,qi(r,i,g,1);break;case 2:case 9:if(ng(g)){Ye=0,gn=null,Py(i);break}i=function(){Ye!==2&&Ye!==9||Ze!==r||(Ye=7),Kn(r)},g.then(i,i);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:ng(g)?(Ye=0,gn=null,Py(i)):(Ye=0,gn=null,qi(r,i,g,7));break;case 5:var S=null;switch(je.tag){case 26:S=je.memoizedState;case 5:case 27:var T=je;if(S?j0(S):T.stateNode.complete){Ye=0,gn=null;var w=T.sibling;if(w!==null)je=w;else{var R=T.return;R!==null?(je=R,Ba(R)):je=null}break t}}Ye=0,gn=null,qi(r,i,g,5);break;case 6:Ye=0,gn=null,qi(r,i,g,6);break;case 8:dd(),dt=6;break e;default:throw Error(s(462))}}iT();break}catch(G){Vy(r,G)}while(!0);return ir=Os=null,U.H=u,U.A=p,Ge=a,je!==null?0:(Ze=null,Le=0,na(),dt)}function iT(){for(;je!==null&&!de();)Ky(je)}function Ky(r){var i=gy(r.alternate,r,mr);r.memoizedProps=r.pendingProps,i===null?Ba(r):je=i}function Py(r){var i=r,a=i.alternate;switch(i.tag){case 15:case 0:i=uy(a,i,i.pendingProps,i.type,void 0,Le);break;case 11:i=uy(a,i,i.pendingProps,i.type.render,i.ref,Le);break;case 5:Nf(i);default:by(a,i),i=je=Ym(i,mr),i=gy(a,i,mr)}r.memoizedProps=r.pendingProps,i===null?Ba(r):je=i}function qi(r,i,a,u){ir=Os=null,Nf(i),Oi=null,Al=0;var p=i.return;try{if(Pk(r,p,i,a,Le)){dt=1,Ea(r,Mn(a,r.current)),je=null;return}}catch(g){if(p!==null)throw je=p,g;dt=1,Ea(r,Mn(a,r.current)),je=null;return}i.flags&32768?(He||u===1?r=!0:Bi||(Le&536870912)!==0?r=!1:(Ir=r=!0,(u===2||u===9||u===3||u===6)&&(u=pn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Fy(i,r)):Ba(i)}function Ba(r){var i=r;do{if((i.flags&32768)!==0){Fy(i,Ir);return}r=i.return;var a=Xk(i.alternate,i,mr);if(a!==null){je=a;return}if(i=i.sibling,i!==null){je=i;return}je=i=r}while(i!==null);dt===0&&(dt=5)}function Fy(r,i){do{var a=Qk(r.alternate,r);if(a!==null){a.flags&=32767,je=a;return}if(a=r.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(r=r.sibling,r!==null)){je=r;return}je=r=a}while(r!==null);dt=6,je=null}function Jy(r,i,a,u,p,g,S,T,w){r.cancelPendingCommit=null;do Ha();while(Ct!==0);if((Ge&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=ef,HS(r,a,g,S,T,w),r===Ze&&(je=Ze=null,Le=0),Ui=i,$r=r,gr=a,cd=g,ud=p,Hy=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,cT(tt,function(){return e0(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=U.T,U.T=null,p=ee.p,ee.p=2,S=Ge,Ge|=4;try{Zk(r,i,a)}finally{Ge=S,ee.p=p,U.T=u}}Ct=1,Xy(),Qy(),Zy()}}function Xy(){if(Ct===1){Ct=0;var r=$r,i=Ui,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var u=ee.p;ee.p=2;var p=Ge;Ge|=4;try{Oy(i,r);var g=Md,S=_m(r.containerInfo),T=g.focusedElem,w=g.selectionRange;if(S!==T&&T&&T.ownerDocument&&Lm(T.ownerDocument.documentElement,T)){if(w!==null&&Ju(T)){var R=w.start,G=w.end;if(G===void 0&&(G=R),"selectionStart"in T)T.selectionStart=R,T.selectionEnd=Math.min(G,T.value.length);else{var X=T.ownerDocument||document,_=X&&X.defaultView||window;if(_.getSelection){var H=_.getSelection(),ce=T.textContent.length,xe=Math.min(w.start,ce),Xe=w.end===void 0?xe:Math.min(w.end,ce);!H.extend&&xe>Xe&&(S=Xe,Xe=xe,xe=S);var D=zm(T,xe),A=zm(T,Xe);if(D&&A&&(H.rangeCount!==1||H.anchorNode!==D.node||H.anchorOffset!==D.offset||H.focusNode!==A.node||H.focusOffset!==A.offset)){var j=X.createRange();j.setStart(D.node,D.offset),H.removeAllRanges(),xe>Xe?(H.addRange(j),H.extend(A.node,A.offset)):(j.setEnd(A.node,A.offset),H.addRange(j))}}}}for(X=[],H=T;H=H.parentNode;)H.nodeType===1&&X.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<X.length;T++){var F=X[T];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}Xa=!!Ed,Md=Ed=null}finally{Ge=p,ee.p=u,U.T=a}}r.current=i,Ct=2}}function Qy(){if(Ct===2){Ct=0;var r=$r,i=Ui,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var u=ee.p;ee.p=2;var p=Ge;Ge|=4;try{My(r,i.alternate,i)}finally{Ge=p,ee.p=u,U.T=a}}Ct=3}}function Zy(){if(Ct===4||Ct===3){Ct=0,Ee();var r=$r,i=Ui,a=gr,u=Hy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ct=5:(Ct=0,Ui=$r=null,Wy(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(Vr=null),Ou(a),i=i.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(fl,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=U.T,p=ee.p,ee.p=2,U.T=null;try{for(var g=r.onRecoverableError,S=0;S<u.length;S++){var T=u[S];g(T.value,{componentStack:T.stack})}}finally{U.T=i,ee.p=p}}(gr&3)!==0&&Ha(),Kn(r),p=r.pendingLanes,(a&261930)!==0&&(p&42)!==0?r===fd?Kl++:(Kl=0,fd=r):Kl=0,Pl(0)}}function Wy(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,wl(i)))}function Ha(){return Xy(),Qy(),Zy(),e0()}function e0(){if(Ct!==5)return!1;var r=$r,i=cd;cd=0;var a=Ou(gr),u=U.T,p=ee.p;try{ee.p=32>a?32:a,U.T=null,a=ud,ud=null;var g=$r,S=gr;if(Ct=0,Ui=$r=null,gr=0,(Ge&6)!==0)throw Error(s(331));var T=Ge;if(Ge|=4,Ly(g.current),jy(g,g.current,S,a),Ge=T,Pl(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(fl,g)}catch{}return!0}finally{ee.p=p,U.T=u,Wy(r,i)}}function t0(r,i,a){i=Mn(a,i),i=$f(r.stateNode,i,2),r=_r(r,i,2),r!==null&&(hl(r,2),Kn(r))}function Ke(r,i,a){if(r.tag===3)t0(r,r,a);else for(;i!==null;){if(i.tag===3){t0(i,r,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Vr===null||!Vr.has(u))){r=Mn(a,r),a=ny(2),u=_r(i,a,2),u!==null&&(ry(a,u,i,r),hl(u,2),Kn(u));break}}i=i.return}}function pd(r,i,a){var u=r.pingCache;if(u===null){u=r.pingCache=new tT;var p=new Set;u.set(i,p)}else p=u.get(i),p===void 0&&(p=new Set,u.set(i,p));p.has(a)||(ld=!0,p.add(a),r=lT.bind(null,r,i,a),i.then(r,r))}function lT(r,i,a){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&a,r.warmLanes&=~a,Ze===r&&(Le&a)===a&&(dt===4||dt===3&&(Le&62914560)===Le&&300>Me()-ja?(Ge&2)===0&&Ii(r,0):od|=a,Hi===Le&&(Hi=0)),Kn(r)}function n0(r,i){i===0&&(i=Xp()),r=ws(r,i),r!==null&&(hl(r,i),Kn(r))}function oT(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),n0(r,a)}function aT(r,i){var a=0;switch(r.tag){case 31:case 13:var u=r.stateNode,p=r.memoizedState;p!==null&&(a=p.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),n0(r,a)}function cT(r,i){return W(r,i)}var Ua=null,Vi=null,md=!1,Ia=!1,gd=!1,Yr=0;function Kn(r){r!==Vi&&r.next===null&&(Vi===null?Ua=Vi=r:Vi=Vi.next=r),Ia=!0,md||(md=!0,fT())}function Pl(r,i){if(!gd&&Ia){gd=!0;do for(var a=!1,u=Ua;u!==null;){if(r!==0){var p=u.pendingLanes;if(p===0)var g=0;else{var S=u.suspendedLanes,T=u.pingedLanes;g=(1<<31-fn(42|r)+1)-1,g&=p&~(S&~T),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,l0(u,g))}else g=Le,g=Go(u,u===Ze?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||dl(u,g)||(a=!0,l0(u,g));u=u.next}while(a);gd=!1}}function uT(){r0()}function r0(){Ia=md=!1;var r=0;Yr!==0&&ST()&&(r=Yr);for(var i=Me(),a=null,u=Ua;u!==null;){var p=u.next,g=s0(u,i);g===0?(u.next=null,a===null?Ua=p:a.next=p,p===null&&(Vi=a)):(a=u,(r!==0||(g&3)!==0)&&(Ia=!0)),u=p}Ct!==0&&Ct!==5||Pl(r),Yr!==0&&(Yr=0)}function s0(r,i){for(var a=r.suspendedLanes,u=r.pingedLanes,p=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var S=31-fn(g),T=1<<S,w=p[S];w===-1?((T&a)===0||(T&u)!==0)&&(p[S]=BS(T,i)):w<=i&&(r.expiredLanes|=T),g&=~T}if(i=Ze,a=Le,a=Go(r,r===i?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,a===0||r===i&&(Ye===2||Ye===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&ne(u),r.callbackNode=null,r.callbackPriority=0;if((a&3)===0||dl(r,a)){if(i=a&-a,i===r.callbackPriority)return i;switch(u!==null&&ne(u),Ou(a)){case 2:case 8:a=cn;break;case 32:a=tt;break;case 268435456:a=ul;break;default:a=tt}return u=i0.bind(null,r),a=W(a,u),r.callbackPriority=i,r.callbackNode=a,i}return u!==null&&u!==null&&ne(u),r.callbackPriority=2,r.callbackNode=null,2}function i0(r,i){if(Ct!==0&&Ct!==5)return r.callbackNode=null,r.callbackPriority=0,null;var a=r.callbackNode;if(Ha()&&r.callbackNode!==a)return null;var u=Le;return u=Go(r,r===Ze?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(Iy(r,u,i),s0(r,Me()),r.callbackNode!=null&&r.callbackNode===a?i0.bind(null,r):null)}function l0(r,i){if(Ha())return null;Iy(r,i,!0)}function fT(){TT(function(){(Ge&6)!==0?W(bt,uT):r0()})}function yd(){if(Yr===0){var r=wi;r===0&&(r=qo,qo<<=1,(qo&261888)===0&&(qo=256)),Yr=r}return Yr}function o0(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Fo(""+r)}function a0(r,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,r.id&&a.setAttribute("form",r.id),i.parentNode.insertBefore(a,i),r=new FormData(r),a.parentNode.removeChild(a),r}function dT(r,i,a,u,p){if(i==="submit"&&a&&a.stateNode===p){var g=o0((p[Zt]||null).action),S=u.submitter;S&&(i=(i=S[Zt]||null)?o0(i.formAction):S.getAttribute("formAction"),i!==null&&(g=i,S=null));var T=new Zo("action","action",null,u,p);r.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Yr!==0){var w=S?a0(p,S):new FormData(p);Bf(a,{pending:!0,data:w,method:p.method,action:g},null,w)}}else typeof g=="function"&&(T.preventDefault(),w=S?a0(p,S):new FormData(p),Bf(a,{pending:!0,data:w,method:p.method,action:g},g,w))},currentTarget:p}]})}}for(var bd=0;bd<Wu.length;bd++){var xd=Wu[bd],hT=xd.toLowerCase(),pT=xd[0].toUpperCase()+xd.slice(1);Hn(hT,"on"+pT)}Hn(Um,"onAnimationEnd"),Hn(Im,"onAnimationIteration"),Hn(qm,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(Ok,"onTransitionRun"),Hn(Dk,"onTransitionStart"),Hn(jk,"onTransitionCancel"),Hn(Vm,"onTransitionEnd"),hi("onMouseEnter",["mouseout","mouseover"]),hi("onMouseLeave",["mouseout","mouseover"]),hi("onPointerEnter",["pointerout","pointerover"]),hi("onPointerLeave",["pointerout","pointerover"]),Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function c0(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var u=r[a],p=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var S=u.length-1;0<=S;S--){var T=u[S],w=T.instance,R=T.currentTarget;if(T=T.listener,w!==g&&p.isPropagationStopped())break e;g=T,p.currentTarget=R;try{g(p)}catch(G){ta(G)}p.currentTarget=null,g=w}else for(S=0;S<u.length;S++){if(T=u[S],w=T.instance,R=T.currentTarget,T=T.listener,w!==g&&p.isPropagationStopped())break e;g=T,p.currentTarget=R;try{g(p)}catch(G){ta(G)}p.currentTarget=null,g=w}}}}function Re(r,i){var a=i[Du];a===void 0&&(a=i[Du]=new Set);var u=r+"__bubble";a.has(u)||(u0(i,r,2,!1),a.add(u))}function vd(r,i,a){var u=0;i&&(u|=4),u0(a,r,u,i)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Sd(r){if(!r[qa]){r[qa]=!0,rm.forEach(function(a){a!=="selectionchange"&&(mT.has(a)||vd(a,!1,r),vd(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[qa]||(i[qa]=!0,vd("selectionchange",!1,i))}}function u0(r,i,a,u){switch(U0(i)){case 2:var p=$T;break;case 8:p=GT;break;default:p=_d}a=p.bind(null,i,a,r),p=void 0,!Iu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),u?p!==void 0?r.addEventListener(i,a,{capture:!0,passive:p}):r.addEventListener(i,a,!0):p!==void 0?r.addEventListener(i,a,{passive:p}):r.addEventListener(i,a,!1)}function kd(r,i,a,u,p){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var T=u.stateNode.containerInfo;if(T===p)break;if(S===4)for(S=u.return;S!==null;){var w=S.tag;if((w===3||w===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;T!==null;){if(S=ui(T),S===null)return;if(w=S.tag,w===5||w===6||w===26||w===27){u=g=S;continue e}T=T.parentNode}}u=u.return}mm(function(){var R=g,G=Hu(a),X=[];e:{var _=$m.get(r);if(_!==void 0){var H=Zo,ce=r;switch(r){case"keypress":if(Xo(a)===0)break e;case"keydown":case"keyup":H=ak;break;case"focusin":ce="focus",H=Gu;break;case"focusout":ce="blur",H=Gu;break;case"beforeblur":case"afterblur":H=Gu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=XS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=fk;break;case Um:case Im:case qm:H=WS;break;case Vm:H=hk;break;case"scroll":case"scrollend":H=FS;break;case"wheel":H=mk;break;case"copy":case"cut":case"paste":H=tk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=vm;break;case"toggle":case"beforetoggle":H=yk}var xe=(i&4)!==0,Xe=!xe&&(r==="scroll"||r==="scrollend"),D=xe?_!==null?_+"Capture":null:_;xe=[];for(var A=R,j;A!==null;){var F=A;if(j=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||j===null||D===null||(F=gl(A,D),F!=null&&xe.push(Jl(A,F,j))),Xe)break;A=A.return}0<xe.length&&(_=new H(_,ce,null,a,G),X.push({event:_,listeners:xe}))}}if((i&7)===0){e:{if(_=r==="mouseover"||r==="pointerover",H=r==="mouseout"||r==="pointerout",_&&a!==Bu&&(ce=a.relatedTarget||a.fromElement)&&(ui(ce)||ce[ci]))break e;if((H||_)&&(_=G.window===G?G:(_=G.ownerDocument)?_.defaultView||_.parentWindow:window,H?(ce=a.relatedTarget||a.toElement,H=R,ce=ce?ui(ce):null,ce!==null&&(Xe=o(ce),xe=ce.tag,ce!==Xe||xe!==5&&xe!==27&&xe!==6)&&(ce=null)):(H=null,ce=R),H!==ce)){if(xe=bm,F="onMouseLeave",D="onMouseEnter",A="mouse",(r==="pointerout"||r==="pointerover")&&(xe=vm,F="onPointerLeave",D="onPointerEnter",A="pointer"),Xe=H==null?_:ml(H),j=ce==null?_:ml(ce),_=new xe(F,A+"leave",H,a,G),_.target=Xe,_.relatedTarget=j,F=null,ui(G)===R&&(xe=new xe(D,A+"enter",ce,a,G),xe.target=j,xe.relatedTarget=Xe,F=xe),Xe=F,H&&ce)t:{for(xe=gT,D=H,A=ce,j=0,F=D;F;F=xe(F))j++;F=0;for(var me=A;me;me=xe(me))F++;for(;0<j-F;)D=xe(D),j--;for(;0<F-j;)A=xe(A),F--;for(;j--;){if(D===A||A!==null&&D===A.alternate){xe=D;break t}D=xe(D),A=xe(A)}xe=null}else xe=null;H!==null&&f0(X,_,H,xe,!1),ce!==null&&Xe!==null&&f0(X,Xe,ce,xe,!0)}}e:{if(_=R?ml(R):window,H=_.nodeName&&_.nodeName.toLowerCase(),H==="select"||H==="input"&&_.type==="file")var Ve=Nm;else if(Cm(_))if(Am)Ve=wk;else{Ve=Mk;var fe=Ek}else H=_.nodeName,!H||H.toLowerCase()!=="input"||_.type!=="checkbox"&&_.type!=="radio"?R&&_u(R.elementType)&&(Ve=Nm):Ve=Ck;if(Ve&&(Ve=Ve(r,R))){wm(X,Ve,a,G);break e}fe&&fe(r,_,R),r==="focusout"&&R&&_.type==="number"&&R.memoizedProps.value!=null&&Lu(_,"number",_.value)}switch(fe=R?ml(R):window,r){case"focusin":(Cm(fe)||fe.contentEditable==="true")&&(xi=fe,Xu=R,El=null);break;case"focusout":El=Xu=xi=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,Bm(X,a,G);break;case"selectionchange":if(Ak)break;case"keydown":case"keyup":Bm(X,a,G)}var we;if(Ku)e:{switch(r){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else bi?Em(r,a)&&(_e="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(Sm&&a.locale!=="ko"&&(bi||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&bi&&(we=gm()):(Ar=G,qu="value"in Ar?Ar.value:Ar.textContent,bi=!0)),fe=Va(R,_e),0<fe.length&&(_e=new xm(_e,r,null,a,G),X.push({event:_e,listeners:fe}),we?_e.data=we:(we=Mm(a),we!==null&&(_e.data=we)))),(we=xk?vk(r,a):Sk(r,a))&&(_e=Va(R,"onBeforeInput"),0<_e.length&&(fe=new xm("onBeforeInput","beforeinput",null,a,G),X.push({event:fe,listeners:_e}),fe.data=we)),dT(X,r,R,a,G)}c0(X,i)})}function Jl(r,i,a){return{instance:r,listener:i,currentTarget:a}}function Va(r,i){for(var a=i+"Capture",u=[];r!==null;){var p=r,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=gl(r,a),p!=null&&u.unshift(Jl(r,p,g)),p=gl(r,i),p!=null&&u.push(Jl(r,p,g))),r.tag===3)return u;r=r.return}return[]}function gT(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function f0(r,i,a,u,p){for(var g=i._reactName,S=[];a!==null&&a!==u;){var T=a,w=T.alternate,R=T.stateNode;if(T=T.tag,w!==null&&w===u)break;T!==5&&T!==26&&T!==27||R===null||(w=R,p?(R=gl(a,g),R!=null&&S.unshift(Jl(a,R,w))):p||(R=gl(a,g),R!=null&&S.push(Jl(a,R,w)))),a=a.return}S.length!==0&&r.push({event:i,listeners:S})}var yT=/\r\n?/g,bT=/\u0000|\uFFFD/g;function d0(r){return(typeof r=="string"?r:""+r).replace(yT,`
`).replace(bT,"")}function h0(r,i){return i=d0(i),d0(r)===i}function Je(r,i,a,u,p,g){switch(a){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||mi(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&mi(r,""+u);break;case"className":Ko(r,"class",u);break;case"tabIndex":Ko(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ko(r,a,u);break;case"style":hm(r,u,g);break;case"data":if(i!=="object"){Ko(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||a!=="href")){r.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=Fo(""+u),r.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(i!=="input"&&Je(r,i,"name",p.name,p,null),Je(r,i,"formEncType",p.formEncType,p,null),Je(r,i,"formMethod",p.formMethod,p,null),Je(r,i,"formTarget",p.formTarget,p,null)):(Je(r,i,"encType",p.encType,p,null),Je(r,i,"method",p.method,p,null),Je(r,i,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=Fo(""+u),r.setAttribute(a,u);break;case"onClick":u!=null&&(r.onclick=tr);break;case"onScroll":u!=null&&Re("scroll",r);break;case"onScrollEnd":u!=null&&Re("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(p.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}a=Fo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""+u):r.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""):r.removeAttribute(a);break;case"capture":case"download":u===!0?r.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,u):r.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(a,u):r.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(a):r.setAttribute(a,u);break;case"popover":Re("beforetoggle",r),Re("toggle",r),Yo(r,"popover",u);break;case"xlinkActuate":er(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":er(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":er(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":er(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":er(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":er(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":er(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":er(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":er(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Yo(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=KS.get(a)||a,Yo(r,a,u))}}function Td(r,i,a,u,p,g){switch(a){case"style":hm(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(p.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"children":typeof u=="string"?mi(r,u):(typeof u=="number"||typeof u=="bigint")&&mi(r,""+u);break;case"onScroll":u!=null&&Re("scroll",r);break;case"onScrollEnd":u!=null&&Re("scrollend",r);break;case"onClick":u!=null&&(r.onclick=tr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sm.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(p=a.endsWith("Capture"),i=a.slice(2,p?a.length-7:void 0),g=r[Zt]||null,g=g!=null?g[a]:null,typeof g=="function"&&r.removeEventListener(i,g,p),typeof u=="function")){typeof g!="function"&&g!==null&&(a in r?r[a]=null:r.hasAttribute(a)&&r.removeAttribute(a)),r.addEventListener(i,u,p);break e}a in r?r[a]=u:u===!0?r.setAttribute(a,""):Yo(r,a,u)}}}function Bt(r,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",r),Re("load",r);var u=!1,p=!1,g;for(g in a)if(a.hasOwnProperty(g)){var S=a[g];if(S!=null)switch(g){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Je(r,i,g,S,a,null)}}p&&Je(r,i,"srcSet",a.srcSet,a,null),u&&Je(r,i,"src",a.src,a,null);return;case"input":Re("invalid",r);var T=g=S=p=null,w=null,R=null;for(u in a)if(a.hasOwnProperty(u)){var G=a[u];if(G!=null)switch(u){case"name":p=G;break;case"type":S=G;break;case"checked":w=G;break;case"defaultChecked":R=G;break;case"value":g=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:Je(r,i,u,G,a,null)}}cm(r,g,T,w,R,S,p,!1);return;case"select":Re("invalid",r),u=S=g=null;for(p in a)if(a.hasOwnProperty(p)&&(T=a[p],T!=null))switch(p){case"value":g=T;break;case"defaultValue":S=T;break;case"multiple":u=T;default:Je(r,i,p,T,a,null)}i=g,a=S,r.multiple=!!u,i!=null?pi(r,!!u,i,!1):a!=null&&pi(r,!!u,a,!0);return;case"textarea":Re("invalid",r),g=p=u=null;for(S in a)if(a.hasOwnProperty(S)&&(T=a[S],T!=null))switch(S){case"value":u=T;break;case"defaultValue":p=T;break;case"children":g=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Je(r,i,S,T,a,null)}fm(r,u,p,g);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(u=a[w],u!=null))switch(w){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Je(r,i,w,u,a,null)}return;case"dialog":Re("beforetoggle",r),Re("toggle",r),Re("cancel",r),Re("close",r);break;case"iframe":case"object":Re("load",r);break;case"video":case"audio":for(u=0;u<Fl.length;u++)Re(Fl[u],r);break;case"image":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"embed":case"source":case"link":Re("error",r),Re("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in a)if(a.hasOwnProperty(R)&&(u=a[R],u!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Je(r,i,R,u,a,null)}return;default:if(_u(i)){for(G in a)a.hasOwnProperty(G)&&(u=a[G],u!==void 0&&Td(r,i,G,u,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(u=a[T],u!=null&&Je(r,i,T,u,a,null))}function xT(r,i,a,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,S=null,T=null,w=null,R=null,G=null;for(H in a){var X=a[H];if(a.hasOwnProperty(H)&&X!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":w=X;default:u.hasOwnProperty(H)||Je(r,i,H,null,u,X)}}for(var _ in u){var H=u[_];if(X=a[_],u.hasOwnProperty(_)&&(H!=null||X!=null))switch(_){case"type":g=H;break;case"name":p=H;break;case"checked":R=H;break;case"defaultChecked":G=H;break;case"value":S=H;break;case"defaultValue":T=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:H!==X&&Je(r,i,_,H,u,X)}}zu(r,S,T,w,R,G,g,p);return;case"select":H=S=T=_=null;for(g in a)if(w=a[g],a.hasOwnProperty(g)&&w!=null)switch(g){case"value":break;case"multiple":H=w;default:u.hasOwnProperty(g)||Je(r,i,g,null,u,w)}for(p in u)if(g=u[p],w=a[p],u.hasOwnProperty(p)&&(g!=null||w!=null))switch(p){case"value":_=g;break;case"defaultValue":T=g;break;case"multiple":S=g;default:g!==w&&Je(r,i,p,g,u,w)}i=T,a=S,u=H,_!=null?pi(r,!!a,_,!1):!!u!=!!a&&(i!=null?pi(r,!!a,i,!0):pi(r,!!a,a?[]:"",!1));return;case"textarea":H=_=null;for(T in a)if(p=a[T],a.hasOwnProperty(T)&&p!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Je(r,i,T,null,u,p)}for(S in u)if(p=u[S],g=a[S],u.hasOwnProperty(S)&&(p!=null||g!=null))switch(S){case"value":_=p;break;case"defaultValue":H=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==g&&Je(r,i,S,p,u,g)}um(r,_,H);return;case"option":for(var ce in a)if(_=a[ce],a.hasOwnProperty(ce)&&_!=null&&!u.hasOwnProperty(ce))switch(ce){case"selected":r.selected=!1;break;default:Je(r,i,ce,null,u,_)}for(w in u)if(_=u[w],H=a[w],u.hasOwnProperty(w)&&_!==H&&(_!=null||H!=null))switch(w){case"selected":r.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Je(r,i,w,_,u,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)_=a[xe],a.hasOwnProperty(xe)&&_!=null&&!u.hasOwnProperty(xe)&&Je(r,i,xe,null,u,_);for(R in u)if(_=u[R],H=a[R],u.hasOwnProperty(R)&&_!==H&&(_!=null||H!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(137,i));break;default:Je(r,i,R,_,u,H)}return;default:if(_u(i)){for(var Xe in a)_=a[Xe],a.hasOwnProperty(Xe)&&_!==void 0&&!u.hasOwnProperty(Xe)&&Td(r,i,Xe,void 0,u,_);for(G in u)_=u[G],H=a[G],!u.hasOwnProperty(G)||_===H||_===void 0&&H===void 0||Td(r,i,G,_,u,H);return}}for(var D in a)_=a[D],a.hasOwnProperty(D)&&_!=null&&!u.hasOwnProperty(D)&&Je(r,i,D,null,u,_);for(X in u)_=u[X],H=a[X],!u.hasOwnProperty(X)||_===H||_==null&&H==null||Je(r,i,X,_,u,H)}function p0(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vT(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var p=a[u],g=p.transferSize,S=p.initiatorType,T=p.duration;if(g&&T&&p0(S)){for(S=0,T=p.responseEnd,u+=1;u<a.length;u++){var w=a[u],R=w.startTime;if(R>T)break;var G=w.transferSize,X=w.initiatorType;G&&p0(X)&&(w=w.responseEnd,S+=G*(w<T?1:(T-R)/(w-R)))}if(--u,i+=8*(g+S)/(p.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Ed=null,Md=null;function $a(r){return r.nodeType===9?r:r.ownerDocument}function m0(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g0(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Cd(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var wd=null;function ST(){var r=window.event;return r&&r.type==="popstate"?r===wd?!1:(wd=r,!0):(wd=null,!1)}var y0=typeof setTimeout=="function"?setTimeout:void 0,kT=typeof clearTimeout=="function"?clearTimeout:void 0,b0=typeof Promise=="function"?Promise:void 0,TT=typeof queueMicrotask=="function"?queueMicrotask:typeof b0<"u"?function(r){return b0.resolve(null).then(r).catch(ET)}:y0;function ET(r){setTimeout(function(){throw r})}function Kr(r){return r==="head"}function x0(r,i){var a=i,u=0;do{var p=a.nextSibling;if(r.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"||a==="/&"){if(u===0){r.removeChild(p),Ki(i);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Xl(r.ownerDocument.documentElement);else if(a==="head"){a=r.ownerDocument.head,Xl(a);for(var g=a.firstChild;g;){var S=g.nextSibling,T=g.nodeName;g[pl]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&g.rel.toLowerCase()==="stylesheet"||a.removeChild(g),g=S}}else a==="body"&&Xl(r.ownerDocument.body);a=p}while(a);Ki(i)}function v0(r,i){var a=r;r=0;do{var u=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(r===0)break;r--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||r++;a=u}while(a)}function Nd(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Nd(a),ju(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}r.removeChild(a)}}function MT(r,i,a,u){for(;r.nodeType===1;){var p=a;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[pl])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=On(r.nextSibling),r===null)break}return null}function CT(r,i,a){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=On(r.nextSibling),r===null))return null;return r}function S0(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=On(r.nextSibling),r===null))return null;return r}function Ad(r){return r.data==="$?"||r.data==="$~"}function Od(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function wT(r,i){var a=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||a.readyState!=="loading")i();else{var u=function(){i(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function On(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Dd=null;function k0(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"||a==="/&"){if(i===0)return On(r.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}r=r.nextSibling}return null}function T0(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return r;i--}else a!=="/$"&&a!=="/&"||i++}r=r.previousSibling}return null}function E0(r,i,a){switch(i=$a(a),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Xl(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);ju(r)}var Dn=new Map,M0=new Set;function Ga(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var yr=ee.d;ee.d={f:NT,r:AT,D:OT,C:DT,L:jT,m:RT,X:LT,S:zT,M:_T};function NT(){var r=yr.f(),i=La();return r||i}function AT(r){var i=fi(r);i!==null&&i.tag===5&&i.type==="form"?Vg(i):yr.r(r)}var $i=typeof document>"u"?null:document;function C0(r,i,a){var u=$i;if(u&&typeof i=="string"&&i){var p=Tn(i);p='link[rel="'+r+'"][href="'+p+'"]',typeof a=="string"&&(p+='[crossorigin="'+a+'"]'),M0.has(p)||(M0.add(p),r={rel:r,crossOrigin:a,href:i},u.querySelector(p)===null&&(i=u.createElement("link"),Bt(i,"link",r),Nt(i),u.head.appendChild(i)))}}function OT(r){yr.D(r),C0("dns-prefetch",r,null)}function DT(r,i){yr.C(r,i),C0("preconnect",r,i)}function jT(r,i,a){yr.L(r,i,a);var u=$i;if(u&&r&&i){var p='link[rel="preload"][as="'+Tn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(p+='[imagesrcset="'+Tn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(p+='[imagesizes="'+Tn(a.imageSizes)+'"]')):p+='[href="'+Tn(r)+'"]';var g=p;switch(i){case"style":g=Gi(r);break;case"script":g=Yi(r)}Dn.has(g)||(r=y({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:r,as:i},a),Dn.set(g,r),u.querySelector(p)!==null||i==="style"&&u.querySelector(Ql(g))||i==="script"&&u.querySelector(Zl(g))||(i=u.createElement("link"),Bt(i,"link",r),Nt(i),u.head.appendChild(i)))}}function RT(r,i){yr.m(r,i);var a=$i;if(a&&r){var u=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+Tn(u)+'"][href="'+Tn(r)+'"]',g=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Yi(r)}if(!Dn.has(g)&&(r=y({rel:"modulepreload",href:r},i),Dn.set(g,r),a.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Zl(g)))return}u=a.createElement("link"),Bt(u,"link",r),Nt(u),a.head.appendChild(u)}}}function zT(r,i,a){yr.S(r,i,a);var u=$i;if(u&&r){var p=di(u).hoistableStyles,g=Gi(r);i=i||"default";var S=p.get(g);if(!S){var T={loading:0,preload:null};if(S=u.querySelector(Ql(g)))T.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":i},a),(a=Dn.get(g))&&jd(r,a);var w=S=u.createElement("link");Nt(w),Bt(w,"link",r),w._p=new Promise(function(R,G){w.onload=R,w.onerror=G}),w.addEventListener("load",function(){T.loading|=1}),w.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Ya(S,i,u)}S={type:"stylesheet",instance:S,count:1,state:T},p.set(g,S)}}}function LT(r,i){yr.X(r,i);var a=$i;if(a&&r){var u=di(a).hoistableScripts,p=Yi(r),g=u.get(p);g||(g=a.querySelector(Zl(p)),g||(r=y({src:r,async:!0},i),(i=Dn.get(p))&&Rd(r,i),g=a.createElement("script"),Nt(g),Bt(g,"link",r),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function _T(r,i){yr.M(r,i);var a=$i;if(a&&r){var u=di(a).hoistableScripts,p=Yi(r),g=u.get(p);g||(g=a.querySelector(Zl(p)),g||(r=y({src:r,async:!0,type:"module"},i),(i=Dn.get(p))&&Rd(r,i),g=a.createElement("script"),Nt(g),Bt(g,"link",r),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function w0(r,i,a,u){var p=(p=ge.current)?Ga(p):null;if(!p)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Gi(a.href),a=di(p).hoistableStyles,u=a.get(i),u||(u={type:"style",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){r=Gi(a.href);var g=di(p).hoistableStyles,S=g.get(r);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,S),(g=p.querySelector(Ql(r)))&&!g._p&&(S.instance=g,S.state.loading=5),Dn.has(r)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Dn.set(r,a),g||BT(p,r,a,S.state))),i&&u===null)throw Error(s(528,""));return S}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Yi(a),a=di(p).hoistableScripts,u=a.get(i),u||(u={type:"script",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Gi(r){return'href="'+Tn(r)+'"'}function Ql(r){return'link[rel="stylesheet"]['+r+"]"}function N0(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function BT(r,i,a,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Bt(i,"link",a),Nt(i),r.head.appendChild(i))}function Yi(r){return'[src="'+Tn(r)+'"]'}function Zl(r){return"script[async]"+r}function A0(r,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Tn(a.href)+'"]');if(u)return i.instance=u,Nt(u),u;var p=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Nt(u),Bt(u,"style",p),Ya(u,a.precedence,r),i.instance=u;case"stylesheet":p=Gi(a.href);var g=r.querySelector(Ql(p));if(g)return i.state.loading|=4,i.instance=g,Nt(g),g;u=N0(a),(p=Dn.get(p))&&jd(u,p),g=(r.ownerDocument||r).createElement("link"),Nt(g);var S=g;return S._p=new Promise(function(T,w){S.onload=T,S.onerror=w}),Bt(g,"link",u),i.state.loading|=4,Ya(g,a.precedence,r),i.instance=g;case"script":return g=Yi(a.src),(p=r.querySelector(Zl(g)))?(i.instance=p,Nt(p),p):(u=a,(p=Dn.get(g))&&(u=y({},a),Rd(u,p)),r=r.ownerDocument||r,p=r.createElement("script"),Nt(p),Bt(p,"link",u),r.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Ya(u,a.precedence,r));return i.instance}function Ya(r,i,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,g=p,S=0;S<u.length;S++){var T=u[S];if(T.dataset.precedence===i)g=T;else if(g!==p)break}g?g.parentNode.insertBefore(r,g.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(r,i.firstChild))}function jd(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Rd(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Ka=null;function O0(r,i,a){if(Ka===null){var u=new Map,p=Ka=new Map;p.set(a,u)}else p=Ka,u=p.get(a),u||(u=new Map,p.set(a,u));if(u.has(r))return u;for(u.set(r,null),a=a.getElementsByTagName(r),p=0;p<a.length;p++){var g=a[p];if(!(g[pl]||g[Rt]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(i)||"";S=r+S;var T=u.get(S);T?T.push(g):u.set(S,[g])}}return u}function D0(r,i,a){r=r.ownerDocument||r,r.head.insertBefore(a,i==="title"?r.querySelector("head > title"):null)}function HT(r,i,a){if(a===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function j0(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function UT(r,i,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Gi(u.href),g=i.querySelector(Ql(p));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Pa.bind(r),i.then(r,r)),a.state.loading|=4,a.instance=g,Nt(g);return}g=i.ownerDocument||i,u=N0(u),(p=Dn.get(p))&&jd(u,p),g=g.createElement("link"),Nt(g);var S=g;S._p=new Promise(function(T,w){S.onload=T,S.onerror=w}),Bt(g,"link",u),a.instance=g}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(r.count++,a=Pa.bind(r),i.addEventListener("load",a),i.addEventListener("error",a))}}var zd=0;function IT(r,i){return r.stylesheets&&r.count===0&&Ja(r,r.stylesheets),0<r.count||0<r.imgCount?function(a){var u=setTimeout(function(){if(r.stylesheets&&Ja(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4+i);0<r.imgBytes&&zd===0&&(zd=62500*vT());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Ja(r,r.stylesheets),r.unsuspend)){var g=r.unsuspend;r.unsuspend=null,g()}},(r.imgBytes>zd?50:800)+i);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Pa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ja(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Fa=null;function Ja(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Fa=new Map,i.forEach(qT,r),Fa=null,Pa.call(r))}function qT(r,i){if(!(i.state.loading&4)){var a=Fa.get(r);if(a)var u=a.get(null);else{a=new Map,Fa.set(r,a);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var S=p[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}p=i.instance,S=p.getAttribute("data-precedence"),g=a.get(S)||u,g===u&&a.set(null,p),a.set(S,p),this.count++,u=Pa.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),g?g.parentNode.insertBefore(p,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),i.state.loading|=4}}var Wl={$$typeof:$,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function VT(r,i,a,u,p,g,S,T,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nu(0),this.hiddenUpdates=Nu(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function R0(r,i,a,u,p,g,S,T,w,R,G,X){return r=new VT(r,i,a,S,w,R,G,X,T),i=1,g===!0&&(i|=24),g=hn(3,null,null,i),r.current=g,g.stateNode=r,i=hf(),i.refCount++,r.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:a,cache:i},yf(g),r}function z0(r){return r?(r=ki,r):ki}function L0(r,i,a,u,p,g){p=z0(p),u.context===null?u.context=p:u.pendingContext=p,u=Lr(i),u.payload={element:a},g=g===void 0?null:g,g!==null&&(u.callback=g),a=_r(r,u,i),a!==null&&(sn(a,r,i),Dl(a,r,i))}function _0(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function Ld(r,i){_0(r,i),(r=r.alternate)&&_0(r,i)}function B0(r){if(r.tag===13||r.tag===31){var i=ws(r,67108864);i!==null&&sn(i,r,67108864),Ld(r,67108864)}}function H0(r){if(r.tag===13||r.tag===31){var i=bn();i=Au(i);var a=ws(r,i);a!==null&&sn(a,r,i),Ld(r,i)}}var Xa=!0;function $T(r,i,a,u){var p=U.T;U.T=null;var g=ee.p;try{ee.p=2,_d(r,i,a,u)}finally{ee.p=g,U.T=p}}function GT(r,i,a,u){var p=U.T;U.T=null;var g=ee.p;try{ee.p=8,_d(r,i,a,u)}finally{ee.p=g,U.T=p}}function _d(r,i,a,u){if(Xa){var p=Bd(u);if(p===null)kd(r,i,u,Qa,a),I0(r,u);else if(KT(p,r,i,a,u))u.stopPropagation();else if(I0(r,u),i&4&&-1<YT.indexOf(r)){for(;p!==null;){var g=fi(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=ks(g.pendingLanes);if(S!==0){var T=g;for(T.pendingLanes|=2,T.entangledLanes|=2;S;){var w=1<<31-fn(S);T.entanglements[1]|=w,S&=~w}Kn(g),(Ge&6)===0&&(Ra=Me()+500,Pl(0))}}break;case 31:case 13:T=ws(g,2),T!==null&&sn(T,g,2),La(),Ld(g,2)}if(g=Bd(u),g===null&&kd(r,i,u,Qa,a),g===p)break;p=g}p!==null&&u.stopPropagation()}else kd(r,i,u,null,a)}}function Bd(r){return r=Hu(r),Hd(r)}var Qa=null;function Hd(r){if(Qa=null,r=ui(r),r!==null){var i=o(r);if(i===null)r=null;else{var a=i.tag;if(a===13){if(r=c(i),r!==null)return r;r=null}else if(a===31){if(r=f(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Qa=r,null}function U0(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ut()){case bt:return 2;case cn:return 8;case tt:case Wn:return 32;case ul:return 268435456;default:return 32}default:return 32}}var Ud=!1,Pr=null,Fr=null,Jr=null,eo=new Map,to=new Map,Xr=[],YT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function I0(r,i){switch(r){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":eo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":to.delete(i.pointerId)}}function no(r,i,a,u,p,g){return r===null||r.nativeEvent!==g?(r={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:g,targetContainers:[p]},i!==null&&(i=fi(i),i!==null&&B0(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),r)}function KT(r,i,a,u,p){switch(i){case"focusin":return Pr=no(Pr,r,i,a,u,p),!0;case"dragenter":return Fr=no(Fr,r,i,a,u,p),!0;case"mouseover":return Jr=no(Jr,r,i,a,u,p),!0;case"pointerover":var g=p.pointerId;return eo.set(g,no(eo.get(g)||null,r,i,a,u,p)),!0;case"gotpointercapture":return g=p.pointerId,to.set(g,no(to.get(g)||null,r,i,a,u,p)),!0}return!1}function q0(r){var i=ui(r.target);if(i!==null){var a=o(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){r.blockedOn=i,tm(r.priority,function(){H0(a)});return}}else if(i===31){if(i=f(a),i!==null){r.blockedOn=i,tm(r.priority,function(){H0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Za(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=Bd(r.nativeEvent);if(a===null){a=r.nativeEvent;var u=new a.constructor(a.type,a);Bu=u,a.target.dispatchEvent(u),Bu=null}else return i=fi(a),i!==null&&B0(i),r.blockedOn=a,!1;i.shift()}return!0}function V0(r,i,a){Za(r)&&a.delete(i)}function PT(){Ud=!1,Pr!==null&&Za(Pr)&&(Pr=null),Fr!==null&&Za(Fr)&&(Fr=null),Jr!==null&&Za(Jr)&&(Jr=null),eo.forEach(V0),to.forEach(V0)}function Wa(r,i){r.blockedOn===i&&(r.blockedOn=null,Ud||(Ud=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,PT)))}var ec=null;function $0(r){ec!==r&&(ec=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ec===r&&(ec=null);for(var i=0;i<r.length;i+=3){var a=r[i],u=r[i+1],p=r[i+2];if(typeof u!="function"){if(Hd(u||a)===null)continue;break}var g=fi(a);g!==null&&(r.splice(i,3),i-=3,Bf(g,{pending:!0,data:p,method:a.method,action:u},u,p))}}))}function Ki(r){function i(w){return Wa(w,r)}Pr!==null&&Wa(Pr,r),Fr!==null&&Wa(Fr,r),Jr!==null&&Wa(Jr,r),eo.forEach(i),to.forEach(i);for(var a=0;a<Xr.length;a++){var u=Xr[a];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Xr.length&&(a=Xr[0],a.blockedOn===null);)q0(a),a.blockedOn===null&&Xr.shift();if(a=(r.ownerDocument||r).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var p=a[u],g=a[u+1],S=p[Zt]||null;if(typeof g=="function")S||$0(a);else if(S){var T=null;if(g&&g.hasAttribute("formAction")){if(p=g,S=g[Zt]||null)T=S.formAction;else if(Hd(p)!==null)continue}else T=S.action;typeof T=="function"?a[u+1]=T:(a.splice(u,3),u-=3),$0(a)}}}function G0(){function r(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(S){return p=S})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function Id(r){this._internalRoot=r}tc.prototype.render=Id.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,u=bn();L0(a,u,r,i,null,null)},tc.prototype.unmount=Id.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;L0(r.current,2,null,r,null,null),La(),i[ci]=null}};function tc(r){this._internalRoot=r}tc.prototype.unstable_scheduleHydration=function(r){if(r){var i=em();r={blockedOn:null,target:r,priority:i};for(var a=0;a<Xr.length&&i!==0&&i<Xr[a].priority;a++);Xr.splice(a,0,r),a===0&&q0(r)}};var Y0=e.version;if(Y0!=="19.2.1")throw Error(s(527,Y0,"19.2.1"));ee.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=h(i),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var FT={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{fl=nc.inject(FT),un=nc}catch{}}return so.createRoot=function(r,i){if(!l(r))throw Error(s(299));var a=!1,u="",p=Zg,g=Wg,S=ey;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=R0(r,1,!1,null,null,a,u,null,p,g,S,G0),r[ci]=i.current,Sd(r),new Id(i)},so.hydrateRoot=function(r,i,a){if(!l(r))throw Error(s(299));var u=!1,p="",g=Zg,S=Wg,T=ey,w=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(w=a.formState)),i=R0(r,1,!0,i,a??null,u,p,w,g,S,T,G0),i.context=z0(null),a=i.current,u=bn(),u=Au(u),p=Lr(u),p.callback=null,_r(a,p,u),a=u,i.current.lanes=a,hl(i,a),Kn(i),r[ci]=i.current,Sd(r),new tc(i)},so.version="19.2.1",so}var tb;function rE(){if(tb)return $d.exports;tb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$d.exports=nE(),$d.exports}var sE=rE();const iE=ap(sE);function lE({wifiStatus:n}){const[e,t]=Q.useState([]),[s,l]=Q.useState(""),[o,c]=Q.useState(""),[f,d]=Q.useState(!1),[h,m]=Q.useState(!1),[y,x]=Q.useState(!1),[v,k]=Q.useState(""),[E,M]=Q.useState(!1);Q.useEffect(()=>{C()},[]);const C=async()=>{d(!0),k("");try{const J=await(await fetch("/api/wifi/networks")).json();t(J.networks||[])}catch(Y){k("Failed to scan networks"),console.error(Y)}finally{d(!1)}},L=async Y=>{if(Y.preventDefault(),!s){k("Please select a network");return}m(!0),k("");try{const J=await fetch("/api/wifi/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ssid:s,password:o||null})});if(J.ok)x(!0),m(!1);else{const V=await J.json();k(V.detail||"Failed to connect"),m(!1)}}catch{x(!0),m(!1)}},$="w-full p-3 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border",te="w-full py-3 px-4 rounded-lg font-bold transition-all";return y?b.jsx("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 bg-white min-h-screen",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-6xl mb-6",children:""}),b.jsx("h1",{className:"text-3xl mb-4 font-bold text-black",children:"Connecting to WiFi..."}),b.jsxs("p",{className:"text-gray-600 mb-6",children:["Your PC-1 is now connecting to ",b.jsx("strong",{className:"text-black",children:s})]}),b.jsxs("div",{className:"bg-bg-card border-4 border-black rounded-xl p-6 text-left mb-6 shadow-lg",children:[b.jsx("h2",{className:"font-bold text-black mb-4",children:"Next Steps:"}),b.jsxs("ol",{className:"space-y-3 text-black",children:[b.jsxs("li",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"1"}),b.jsxs("span",{children:["Disconnect from ",b.jsx("strong",{children:n?.ap_ssid||"PC-1 Setup network"})," on your phone"]})]}),b.jsxs("li",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"2"}),b.jsxs("span",{children:["Connect your phone to ",b.jsx("strong",{children:s})]})]}),b.jsxs("li",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"3"}),b.jsx("span",{children:"Wait about 30 seconds for the device to connect"})]}),b.jsxs("li",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"4"}),b.jsxs("span",{children:["Visit ",b.jsx("strong",{className:"text-black",children:"http://pc-1.local"})," to access settings"]})]})]})]}),b.jsx("p",{className:"text-sm text-gray-600",children:"If the connection fails, the PC-1 will re-create the setup network automatically."})]})}):b.jsxs("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 bg-white min-h-screen",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("h1",{className:"text-3xl sm:text-4xl mb-4 font-bold text-black",children:"WiFi Setup"}),b.jsx("p",{className:"text-gray-600",children:"Connect your PC-1 to your home WiFi network"})]}),v&&b.jsxs("div",{className:"bg-white border-2 border-red-500 text-red-600 p-4 rounded-lg mb-6",children:[b.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),v]}),b.jsx("div",{className:"bg-bg-card border-4 border-black rounded-xl p-4 flex flex-col shadow-lg mb-6",children:b.jsxs("form",{onSubmit:L,className:"space-y-6",children:[E?b.jsxs(b.Fragment,{children:[b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 font-bold text-black",children:"Network Name (SSID)"}),b.jsx("input",{type:"text",value:s,onChange:Y=>l(Y.target.value),className:$,placeholder:"Enter WiFi network name",required:!0,disabled:h})]}),b.jsx("button",{type:"button",onClick:()=>{M(!1),l("")},className:"text-sm text-gray-600 hover:text-black underline cursor-pointer",children:" Back to network list"})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b.jsx("label",{className:"block font-bold text-black",children:"Available Networks"}),b.jsx("button",{type:"button",onClick:C,disabled:f,className:"text-sm px-3 py-1 bg-transparent border-2 border-gray-300 hover:border-black rounded-lg text-black transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:f?"Scanning...":"Refresh"})]}),b.jsxs("select",{value:s,onChange:Y=>l(Y.target.value),className:$,required:!0,disabled:h,children:[b.jsx("option",{value:"",children:"-- Select a network --"}),e.map(Y=>b.jsxs("option",{value:Y.ssid,children:[Y.ssid," (",Y.signal,"%) ",Y.secure?"":""]},Y.ssid))]})]}),b.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-sm text-gray-600 hover:text-black underline cursor-pointer",children:"Enter network name manually"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 font-bold text-black",children:"Password"}),b.jsx("input",{type:"password",value:o,onChange:Y=>c(Y.target.value),className:$,placeholder:"Enter WiFi password (leave blank if open network)",disabled:h})]}),b.jsx("button",{type:"submit",disabled:h||!s,className:`${te} bg-transparent border-2 border-black text-black hover:bg-black hover:text-white disabled:opacity-50 disabled:cursor-not-allowed disabled:border-gray-300 disabled:text-gray-400 cursor-pointer`,children:h?"Connecting...":"Connect to WiFi"})]})}),b.jsxs("div",{className:"mt-8 p-4 bg-bg-card border-4 border-black rounded-xl shadow-lg",children:[b.jsxs("p",{className:"text-sm text-black mb-2",children:[b.jsx("strong",{children:"Note:"})," After clicking Connect, this device will disconnect from the setup network and join your home WiFi."]}),b.jsx("p",{className:"text-sm text-gray-600",children:"You'll need to reconnect your phone to your home WiFi to access the settings page."})]})]})}const Ah=(n,e="12h")=>{if(!n)return"";if(e==="24h")return n;const[t,s]=n.split(":"),l=parseInt(t,10),o=l>=12?"PM":"AM";return`${l%12||12}:${s} ${o}`},ot="#000000",Zr="#3a3a3a",Is="#4a4a4a",Pd="#525252",qx=[`radial-gradient(circle at 20% 30%, ${ot} 0%, ${Zr} 25%, ${ot} 50%, ${Is} 75%, ${ot} 100%)`,`radial-gradient(circle at 80% 70%, ${ot} 0%, ${Is} 20%, ${ot} 40%, ${Zr} 60%, ${ot} 80%, ${Pd} 100%)`,`radial-gradient(ellipse at 50% 20%, ${ot} 0%, ${Zr} 30%, ${ot} 60%, ${Is} 90%, ${ot} 100%)`,`radial-gradient(circle at 70% 50%, ${ot} 0%, ${Pd} 15%, ${ot} 35%, ${Zr} 55%, ${ot} 75%, ${Is} 100%)`,`radial-gradient(ellipse at 30% 80%, ${ot} 0%, ${Is} 25%, ${ot} 50%, ${Zr} 75%, ${ot} 100%)`,`radial-gradient(circle at 60% 40%, ${ot} 0%, ${Zr} 20%, ${ot} 45%, ${Pd} 70%, ${ot} 100%)`,`radial-gradient(ellipse at 40% 60%, ${ot} 0%, ${Is} 30%, ${ot} 60%, ${Zr} 90%, ${ot} 100%)`,`radial-gradient(circle at 50% 50%, ${ot} 0%, ${Zr} 25%, ${ot} 50%, ${Is} 75%, ${ot} 100%)`],$s=({children:n,onClick:e,disabled:t=!1,className:s="",type:l="button",loading:o=!1,...c})=>{const d={className:`px-6 py-2 bg-transparent border-2 rounded-lg font-bold transition-all cursor-pointer flex items-center gap-2 ${s}`,style:{borderColor:"var(--color-text-muted)",color:"var(--color-text-muted)"},onMouseEnter:h=>{!t&&!o&&(h.currentTarget.style.backgroundColor="var(--color-bg-white)",h.currentTarget.style.borderColor="var(--color-border-main)",h.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:h=>{!t&&!o&&(h.currentTarget.style.backgroundColor="transparent",h.currentTarget.style.borderColor="var(--color-text-muted)",h.currentTarget.style.color="var(--color-text-muted)")}};return b.jsx("button",{type:l,onClick:e,disabled:t||o,className:d.className,style:d.style,onMouseEnter:d.onMouseEnter,onMouseLeave:d.onMouseLeave,...c,children:o?"Loading...":n})},Wi=({className:n})=>b.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:[b.jsx("title",{children:"wifi"}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("circle",{fill:"currentColor",cx:"8",cy:"12.5",r:"1.5"}),b.jsx("path",{fill:"currentColor",d:"M11.5,10C10.6,9,9.3,8.5,8,8.5S5.4,9,4.5,10L3.1,8.6C4.4,7.2,6.1,6.5,8,6.5s3.6,0.7,4.9,2.1 L11.5,10z"}),b.jsx("path",{fill:"currentColor",d:"M8,2C5,2,2.2,3.1,0,5.2l1.4,1.4C3.2,4.9,5.5,4,8,4s4.8,0.9,6.6,2.7L16,5.2C13.8,3.1,11,2,8,2z"})]})]}),Sc=({className:n,style:e,...t})=>b.jsxs("svg",{className:n,style:e,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",...t,children:[b.jsx("title",{children:"wifi-off"}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("path",{fill:"currentColor",d:"M8.142,7.507C8.094,7.506,8.048,7.5,8,7.5c-1.9,0-3.6,0.7-4.9,2.1L4.5,11 c0.798-0.886,1.912-1.357,3.06-1.457L8.142,7.507z"}),b.jsx("path",{fill:"currentColor",d:"M10.13,7.827L9.573,9.776c0.724,0.242,1.398,0.636,1.927,1.224l1.4-1.4 C12.11,8.749,11.171,8.161,10.13,7.827z"}),b.jsx("path",{fill:"currentColor",d:"M8.848,5.039l0.557-1.946C8.942,3.037,8.475,3,8,3C5,3,2.2,4.1,0,6.2l1.4,1.4C3.2,5.9,5.5,5,8,5 C8.286,5,8.568,5.015,8.848,5.039z"}),b.jsx("path",{fill:"currentColor",d:"M11.368,3.493l-0.55,1.924c1.4,0.428,2.684,1.186,3.781,2.283L16,6.2 C14.651,4.913,13.076,4.005,11.368,3.493z"}),b.jsx("path",{fill:"currentColor",d:"M6.001,16c-0.092,0-0.184-0.013-0.275-0.039c-0.531-0.152-0.839-0.705-0.688-1.236l4-14 c0.152-0.532,0.711-0.839,1.236-0.687c0.531,0.152,0.839,0.705,0.688,1.236l-4,14C6.836,15.714,6.436,16,6.001,16z"})]})]}),Ue={input:"w-full p-3 text-base bg-white border-2 border-zinc-300 rounded-lg text-black focus:border-black focus:outline-none ",inputSmall:"w-full p-2 text-sm bg-white border-2 border-zinc-300 rounded-lg text-black focus:border-black focus:outline-none ",label:"block mb-2 text-sm text-black  font-bold",labelSmall:"block mb-1 text-xs text-black  font-bold",buttonPrimary:"px-6 py-2 bg-transparent border-2 border-black text-black  font-bold rounded-lg hover:bg-black hover:text-white transition-all cursor-pointer",buttonDanger:"px-4 py-2 text-xs bg-transparent border-2 border-red-500 text-red-600 rounded-lg hover:bg-red-600 hover:text-white  font-bold transition-colors cursor-pointer",buttonGhost:"text-xs px-2 py-0.5 rounded border-2 bg-transparent text-zinc-500 border-zinc-400 hover:text-black hover:border-black  transition-colors cursor-pointer hover-shimmer",modalBackdrop:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",modalContent:"bg-white border-4 border-black rounded-xl p-4 sm:p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-lg",textSubtle:"text-xs text-zinc-500 "},Vx=({value:n={},onChange:e,placeholder:t="Type city name (e.g. Boston, London, Tokyo)"})=>{const[s,l]=Q.useState(""),[o,c]=Q.useState([]),[f,d]=Q.useState(!1),h=Q.useRef(null),m=Q.useRef(null);Q.useEffect(()=>{const k=E=>{h.current&&!h.current.contains(E.target)&&c([])};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const y=async k=>{if(l(k),m.current&&clearTimeout(m.current),k.length<2){c([]),d(!1);return}m.current=setTimeout(async()=>{d(!0);try{const E=new AbortController,M=setTimeout(()=>E.abort(),15e3),C=await fetch(`/api/location/search?q=${encodeURIComponent(k)}&limit=20&use_api=false`,{signal:E.signal});clearTimeout(M);const L=await C.json();L.results?c(L.results):c([])}catch(E){E.name==="AbortError"?console.warn("Location search timed out"):(console.error("Error fetching locations:",E),c([]))}finally{d(!1)}},500)},x=k=>{const M={city_name:k.city||k.name,latitude:k.latitude,longitude:k.longitude,timezone:k.timezone,state:k.state,zipcode:k.zipcode};e(M),l(""),c([])},v=n&&n.city_name;return b.jsxs("div",{className:"space-y-3",ref:h,children:[b.jsxs("div",{className:"relative",children:[b.jsx("input",{type:"text",value:s,onChange:k=>y(k.target.value),placeholder:t,className:Ue.input,autoComplete:"off"}),f&&b.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:b.jsx("div",{className:"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin"})}),o.length>0&&b.jsx("ul",{className:"absolute w-full z-10 max-h-[300px] overflow-y-auto bg-white border-2 border-gray-300 border-t-0 rounded-b-lg shadow-lg list-none p-0 m-0",children:o.map(k=>b.jsx("li",{onClick:()=>x(k),className:"p-3 cursor-pointer border-b-2 border-gray-200 last:border-0 hover:bg-gray-50 transition-colors group",children:b.jsx("div",{className:"flex items-start justify-between",children:b.jsx("div",{className:"flex-1 min-w-0",children:b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("strong",{className:"text-black transition-colors",children:k.name}),k.state&&b.jsx("span",{className:"text-gray-500 text-xs",children:k.state}),k.zipcode&&b.jsxs("span",{className:"text-gray-500 text-xs",children:["(",k.zipcode,")"]}),k.population&&k.population>0&&b.jsx("span",{className:"text-xs text-gray-600",children:k.population>=1e6?`${(k.population/1e6).toFixed(1)}M`:k.population>=1e3?`${(k.population/1e3).toFixed(0)}K`:k.population}),k.country_code&&k.country_code!=="US"&&b.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-gray-100 text-gray-700 rounded border border-gray-300",children:k.country_code})]})})})},k.id))})]}),v?b.jsxs("div",{className:"bg-gray-50 border-2 border-gray-300 rounded-lg p-3 space-y-2",children:[b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:Ue.textSubtle,children:"City"}),b.jsxs("span",{className:"text-sm font-medium",children:[n.city_name,n.state&&`, ${n.state}`]})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:Ue.textSubtle,children:"Timezone"}),b.jsx("span",{className:"text-sm",children:n.timezone||"Not set"})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:Ue.textSubtle,children:"Coordinates"}),b.jsxs("span",{className:"text-sm",children:[n.latitude?.toFixed(4),", ",n.longitude?.toFixed(4)]})]})]}):b.jsx("p",{className:`${Ue.textSubtle} mt-1`,children:"Unless set, uses global location."})]})},kc="pc1_admin_token",oE="X-PC1-Auth-Required",aE="X-PC1-Admin-Token";function $x(){return window.localStorage.getItem(kc)||""}function Gx(n){const e=(n||"").trim();if(!e){window.localStorage.removeItem(kc);return}window.localStorage.setItem(kc,e)}function cE(){window.localStorage.removeItem(kc)}function nb(n={},e=""){return e?{...n,[aE]:e}:n}async function qs(n,e={}){const t=$x(),s=nb(e.headers||{},t);let l=await fetch(n,{...e,headers:s});const o=l.headers.get(oE)==="true";if(l.status!==401||!o)return l;const c=window.prompt("Enter PC-1 admin token");if(!c)return l;const f=c.trim();if(!f)return l;Gx(f);const d=nb(e.headers||{},f);return l=await fetch(n,{...e,headers:d}),l}const uE=({settings:n,saveGlobalSettings:e,triggerAPMode:t,wifiStatus:s})=>{const l="w-full p-3 text-base border-2 border-gray-300 rounded-lg focus:outline-none box-border",o="block mb-2 font-bold",c=qx,[f,d]=Q.useState(null),[h,m]=Q.useState(""),[y,x]=Q.useState(""),[v,k]=Q.useState({type:"",message:""}),[E,M]=Q.useState(!1),[C,L]=Q.useState(null),[$,te]=Q.useState(!1),[Y,J]=Q.useState({type:"",message:""}),[V,le]=Q.useState(!1),[ue,Ne]=Q.useState(""),[et,ze]=Q.useState(""),[nt,Ie]=Q.useState(!1),[ke,U]=Q.useState(null),[ee,he]=Q.useState(!1),[Te,Be]=Q.useState(!1),[N,q]=Q.useState({type:"",message:""}),[ie,oe]=Q.useState(null),[be,ge]=Q.useState({stage:"",progress:0}),[Ae,Qe]=Q.useState(null),[qe,Qt]=Q.useState(""),[Vt,an]=Q.useState(!1);Q.useEffect(()=>{const z=async()=>{try{const se=await(await fetch("/api/system/time")).json();se.datetime&&(d(se),m(W=>W||se.date),x(W=>W||se.time.substring(0,5)))}catch(B){console.error("Error fetching system time:",B)}};z();const K=setInterval(z,3e4);return()=>clearInterval(K)},[]),Q.useEffect(()=>{if(n&&(n.timezone||n.city_name||n.time_sync_mode!==void 0)){const z=n.time_sync_mode||"manual";console.log("[TimeSync] Loading preference:",{syncMode:z,time_sync_mode:n.time_sync_mode}),M(z==="automatic")}},[n]),Q.useEffect(()=>{const z=async()=>{try{const se=await(await fetch("/api/system/ssh/status")).json();L(se)}catch(B){console.error("Error fetching SSH status:",B)}};z();const K=setInterval(z,3e4);return()=>clearInterval(K)},[]),Q.useEffect(()=>{(async()=>{try{const B=await(await fetch("/api/system/version")).json();B.version&&oe(B.version)}catch(K){console.error("Error fetching current version:",K)}})()},[]),Q.useEffect(()=>{const z=$x();z&&(Qt(z),an(!0)),(async()=>{try{const se=await(await fetch("/api/system/auth/status")).json();Qe(se)}catch(B){console.error("Error fetching auth status:",B)}})()},[]);const P=(z,K)=>z?.detail||z?.message||z?.error||K,O=async()=>{if(!s?.connected){k({type:"error",message:"Internet connection required for automatic time sync"}),setTimeout(()=>k({type:"",message:""}),5e3);return}k({type:"",message:""});try{const K=await(await qs("/api/system/time/sync",{method:"POST"})).json();if(K.success){k({type:"success",message:K.message||"Time synchronized successfully"});const se=await(await fetch("/api/system/time")).json();se.datetime&&(d(se),m(se.date),x(se.time.substring(0,5)))}else k({type:"error",message:P(K,"Failed to sync time")})}catch(z){k({type:"error",message:"Error syncing time: "+z.message})}setTimeout(()=>k({type:"",message:""}),5e3)},I=async()=>{if(!h||!y){k({type:"error",message:"Please enter both date and time"}),setTimeout(()=>k({type:"",message:""}),5e3);return}const z=h.trim();if(!/^\d{4}-\d{2}-\d{2}$/.test(z)){k({type:"error",message:"Invalid date format. Please use YYYY-MM-DD format."}),setTimeout(()=>k({type:"",message:""}),5e3);return}let B=String(y||"").trim();if(!B||B.length===0){k({type:"error",message:"Please enter a valid time"}),setTimeout(()=>k({type:"",message:""}),5e3);return}const se=/^(\d{1,2}):(\d{2})(:(\d{2}))?$/,W=B.match(se);if(!W){console.error("Time validation failed:",{normalizedTime:B,original:y,type:typeof y,length:B.length,charCodes:B.split("").map(tt=>`${tt}(${tt.charCodeAt(0)})`)}),k({type:"error",message:`Invalid time format: "${B}". Please use HH:MM format (e.g., 14:30).`}),setTimeout(()=>k({type:"",message:""}),5e3);return}const ne=W[1].padStart(2,"0"),de=W[2],Ee=W[4]||"00",Me=parseInt(ne,10),ut=parseInt(de,10),bt=parseInt(Ee,10);if(isNaN(Me)||Me<0||Me>23){k({type:"error",message:`Invalid hours: ${ne}. Must be between 00 and 23.`}),setTimeout(()=>k({type:"",message:""}),5e3);return}if(isNaN(ut)||ut<0||ut>59){k({type:"error",message:`Invalid minutes: ${de}. Must be between 00 and 59.`}),setTimeout(()=>k({type:"",message:""}),5e3);return}if(isNaN(bt)||bt<0||bt>59){k({type:"error",message:`Invalid seconds: ${Ee}. Must be between 00 and 59.`}),setTimeout(()=>k({type:"",message:""}),5e3);return}const cn=`${ne}:${de}:${Ee}`;k({type:"",message:""});try{console.log("Setting time:",{date:z,time:cn});const tt=await qs("/api/system/time",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:z,time:cn})});if(!tt.ok)throw new Error(`HTTP error! status: ${tt.status}`);const Wn=await tt.json();Wn.success?(k({type:"success",message:Wn.message||"System time set successfully"}),M(!1),setTimeout(async()=>{try{const ai=await(await fetch("/api/system/time")).json();ai.datetime&&(d(ai),m(ai.date),x(ai.time.substring(0,5)))}catch(ul){console.error("Error refreshing time:",ul)}},1e3)):k({type:"error",message:P(Wn,"Failed to set system time. The application may need sudo privileges.")})}catch(tt){console.error("Error setting system time:",tt),k({type:"error",message:`Error setting system time: ${tt.message}. Make sure the backend is running and has proper permissions.`})}setTimeout(()=>k({type:"",message:""}),5e3)};return b.jsxs("div",{className:"space-y-4",children:[b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[0]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black text-lg tracking-tight mb-3",children:"Admin Access"}),b.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Time, SSH, and update installation actions may require admin authorization."}),Ae&&b.jsxs("div",{className:"mb-3 text-sm",children:[b.jsx("span",{className:"text-gray-600 font-bold",children:"Mode: "}),b.jsx("span",{className:"text-black font-bold",children:Ae.token_required?"Admin token required":"Local/private network only"})]}),Ae?.token_required&&b.jsxs(b.Fragment,{children:[b.jsx("label",{className:"block mb-2 text-sm text-black font-bold",children:"Admin Token"}),b.jsx("input",{type:"password",value:qe,onChange:z=>{Qt(z.target.value),an(!1)},placeholder:"Paste PC1_ADMIN_TOKEN",className:l}),b.jsxs("div",{className:"flex gap-3 mt-3",children:[b.jsx($s,{onClick:()=>{const z=qe.trim();if(!z){q({type:"error",message:"Enter an admin token first."}),setTimeout(()=>q({type:"",message:""}),4e3);return}Gx(z),an(!0)},className:"flex-1",children:"Save Token"}),b.jsx("button",{type:"button",onClick:()=>{cE(),Qt(""),an(!1)},className:"px-4 py-2.5 bg-transparent border-2 border-gray-400 text-black rounded-lg font-bold hover:border-black transition-all cursor-pointer",children:"Clear"})]}),Vt&&b.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Token saved in this browser."})]})]})}),b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[5]||c[0]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Updates"}),b.jsx("p",{className:"text-sm text-gray-600 mb-4 ",children:"Check for software updates and keep your PC-1 running the latest version."}),ie&&b.jsxs("div",{className:"mb-4 text-sm",children:[b.jsx("span",{className:"text-gray-600 font-bold",children:"Current Version: "}),b.jsx("span",{className:"font-mono font-bold text-black",children:ie})]}),ke&&!Te&&b.jsxs("div",{className:`mb-4 p-3 rounded-lg text-sm ${ke.up_to_date?"bg-gray-100 text-black":"bg-white text-black border-2 border-gray-300 border-dashed"}`,children:[b.jsx("div",{className:"font-bold mb-1",children:ke.message}),b.jsx("div",{className:"text-xs text-gray-600 mt-1",children:ke.up_to_date?b.jsxs(b.Fragment,{children:["Current version: ",b.jsx("span",{className:"font-mono",children:ke.current_version||"unknown"})]}):b.jsxs(b.Fragment,{children:["Current: ",b.jsx("span",{className:"font-mono",children:ke.current_version||"unknown"}),"  Latest: ",b.jsx("span",{className:"font-mono",children:ke.latest_version||"unknown"}),ke.commits_behind>0&&b.jsxs(b.Fragment,{children:[" (",ke.commits_behind," ",ke.commits_behind===1?"update":"updates",")"]})]})})]}),N.message&&!Te&&N.type==="error"&&b.jsxs("div",{className:"mb-4 p-3 rounded-lg text-sm border-2 bg-white text-black border-black border-dashed",children:[b.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),N.message]}),Te&&b.jsxs("div",{className:"mb-4 p-4 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[b.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b.jsx("span",{className:"text-sm font-bold text-black",children:be.stage||"Installing update..."}),b.jsxs("span",{className:"text-xs text-gray-600 font-mono",children:[be.progress,"%"]})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:b.jsx("div",{className:"bg-black h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:`${be.progress}%`}})})]}),!Te&&b.jsxs("div",{className:"flex gap-3",children:[b.jsx($s,{onClick:async()=>{he(!0),q({type:"",message:""});try{const K=await(await fetch("/api/system/updates/check")).json();U(K),K.error&&(q({type:"error",message:K.error}),setTimeout(()=>q({type:"",message:""}),5e3))}catch{q({type:"error",message:"Could not check for updates. Check your internet connection."}),setTimeout(()=>q({type:"",message:""}),5e3)}finally{he(!1)}},disabled:ee,loading:ee,className:"flex-1",children:"Check for Updates"}),ke&&ke.available&&!Te&&b.jsx($s,{onClick:async()=>{if(!confirm("Install the update now? The device will restart automatically. The page will refresh automatically once the update is complete."))return;Be(!0),q({type:"",message:""}),ge({stage:"Installing update...",progress:10});try{const K=setInterval(()=>{ge(W=>W.progress<50?{...W,progress:Math.min(W.progress+2,50)}:W)},500),B=await qs("/api/system/updates/install",{method:"POST"});clearInterval(K),ge({stage:"Update installed! Restarting service...",progress:60});const se=await B.json();if(se.success)ge({stage:"Service restarting...",progress:70}),U(null);else{ge({stage:"",progress:0}),q({type:"error",message:P(se,"Update failed. Please try again.")}),Be(!1);return}}catch{ge({stage:"Service restarting...",progress:70}),U(null)}const z=setTimeout(()=>{window.location.reload()},45e3);setTimeout(()=>{ge({stage:"Waiting for service to restart...",progress:75});let K=0;const B=30,se=async()=>{K++;const W=Math.min(75+Math.floor(K/B*20),95);ge({stage:"Waiting for service to restart...",progress:W});const ne=new AbortController,de=setTimeout(()=>ne.abort(),2e3);try{const Ee=await fetch("/api/health",{method:"GET",signal:ne.signal});if(clearTimeout(de),Ee.ok){ge({stage:"Service ready! Reloading page...",progress:100}),clearTimeout(z),setTimeout(()=>window.location.reload(),500);return}else K<B?setTimeout(se,1e3):(ge({stage:"Reloading page...",progress:100}),clearTimeout(z),setTimeout(()=>window.location.reload(),500))}catch{clearTimeout(de),K<B?setTimeout(se,1e3):(ge({stage:"Reloading page...",progress:100}),clearTimeout(z),setTimeout(()=>window.location.reload(),500))}};se()},5e3)},disabled:Te,className:"flex-1",children:"Install Update"})]})]})}),s&&b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[0]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Network"}),b.jsx("div",{className:"flex items-center justify-between",children:b.jsxs("div",{className:"flex-1",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[s.connected?b.jsx(Wi,{className:"w-4 h-4",style:{color:"var(--color-text-muted)"}}):b.jsx(Sc,{className:"w-4 h-4",style:{color:"var(--color-error)"}}),b.jsx("span",{className:"font-bold text-black ",children:s.connected&&s.ssid?s.ssid:s.mode==="ap"?"Setup Mode (AP)":"Not Connected"}),b.jsx("button",{type:"button",onClick:t,className:"text-xs underline ml-2 cursor-pointer font-bold",style:{color:"var(--color-brass)"},onMouseEnter:z=>z.currentTarget.style.color="var(--color-text-main)",onMouseLeave:z=>z.currentTarget.style.color="var(--color-brass)",children:"Reset WiFi"})]}),s.connected&&s.ip&&b.jsxs("div",{className:"text-xs text-gray-600 mt-1 ",children:["IP: ",s.ip]})]})})]})}),b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[1]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Time Settings"}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block mb-2 text-sm text-gray-600  font-bold",children:"Time Format"}),b.jsxs("select",{value:n.time_format||"12h",onChange:z=>e({time_format:z.target.value}),className:l,children:[b.jsx("option",{value:"12h",children:"12-hour (3:45 PM)"}),b.jsx("option",{value:"24h",children:"24-hour (15:45)"})]}),b.jsx("p",{className:"text-xs text-gray-600 mt-1 ",children:"Choose how times are displayed across all modules"})]}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block mb-3 text-sm font-medium text-black  font-bold",children:"Set Time"}),b.jsxs("div",{className:"flex gap-0 mb-0",children:[b.jsxs("label",{className:`relative flex flex-col items-center px-4 py-2 border-t-2 border-l-2 border-r-2 cursor-pointer transition-all rounded-tl-lg ${E?"border-gray-300 border-b-2 border-b-black bg-white hover:border-black z-0":"border-black border-b-0 bg-white z-10"}`,children:[b.jsx("input",{type:"radio",name:"timeMode",checked:!E,onChange:async()=>{console.log("[TimeSync] Switching to manual mode"),M(!1),e({time_sync_mode:"manual"});try{await qs("/api/system/time/sync/disable",{method:"POST"}).catch(()=>{})}catch{}f&&(!h&&f.date&&m(f.date),!y&&f.time&&x(f.time.substring(0,5)))},className:"sr-only"}),b.jsx("span",{className:`text-sm font-medium  ${E?"text-gray-600":"text-black font-bold"}`,children:"Manual"})]}),b.jsxs("label",{className:`relative flex flex-col items-center px-4 py-2 border-t-2 border-l-2 border-r-2 cursor-pointer transition-all rounded-tr-lg ${E?"border-black border-b-0 bg-white z-10":"border-gray-300 border-b-2 border-b-black bg-white hover:border-black z-0"}`,children:[b.jsx("input",{type:"radio",name:"timeMode",checked:E,onChange:()=>{console.log("[TimeSync] Switching to automatic mode"),M(!0),e({time_sync_mode:"automatic"}),s?.connected&&O()},className:"sr-only"}),b.jsxs("div",{className:"flex items-baseline justify-center gap-1.5",children:[b.jsx(Wi,{className:`w-3 h-3 flex-shrink-0 ${E?"text-black":"text-gray-600"}`,style:{transform:"translateY(0.125rem)"}}),b.jsx("span",{className:`text-sm font-medium  ${E?"text-black font-bold":"text-gray-600"}`,children:"Automatic"})]})]})]}),E&&b.jsx("div",{className:"p-4 border-2 border-black rounded-b-lg -mt-[2px]",children:s?.connected?b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-bold text-black mb-2 ",children:"Time Set Automatically"}),f&&b.jsxs("div",{className:"p-3 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[b.jsx("div",{className:"text-xs text-gray-600 mb-1 uppercase font-bold",children:"Current Time"}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("div",{className:"text-lg font-bold text-black",children:[f.date," ",Ah(f.time,n.time_format||"12h")]}),b.jsx(Wi,{className:"w-3.5 h-3.5",style:{color:"var(--color-text-muted)"}})]})]})]}):b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-bold text-black mb-2 ",children:"Not Syncing"}),b.jsx("p",{className:"text-sm text-yellow-700 mb-3 ",children:"Internet connection required for automatic time synchronization. Connect to WiFi or use manual mode."}),f&&b.jsxs("div",{className:"p-3 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[b.jsx("div",{className:"text-xs text-gray-600 mb-1 uppercase font-bold",children:"Current Time"}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("div",{className:"text-lg font-bold text-black",children:[f.date," ",Ah(f.time,n.time_format||"12h")]}),b.jsx(Sc,{className:"w-3.5 h-3.5",style:{color:"var(--color-error)"}})]})]})]})}),!E&&b.jsxs("div",{className:"p-4 border-2 border-black rounded-b-lg -mt-[2px]",children:[b.jsxs("div",{className:"grid grid-cols-1 min-[340px]:grid-cols-2 gap-3 mb-3",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Date"}),b.jsx("input",{type:"date",value:h,onChange:z=>m(z.target.value),className:"w-full py-3 px-2 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border "})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Time"}),b.jsx("input",{type:"time",value:y||"",onChange:z=>{const K=z.target.value;x(K),console.log("Time input changed:",K,"Type:",typeof K)},className:"w-full py-3 px-2 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border ",step:"1",required:!0})]})]}),b.jsx($s,{onClick:I,className:"w-full",children:"Set System Time"}),b.jsx("p",{className:"text-xs text-gray-600 mt-2 text-center ",children:"Use this when offline or to set a specific time"})]}),v.message&&b.jsxs("div",{className:`mt-4 p-3 rounded-lg text-sm  border-2 ${v.type==="success"?"bg-gray-100 text-black border-black":"bg-white text-black border-black border-dashed"}`,children:[v.type==="error"&&b.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),v.message]})]})]})}),b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[2]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Location"}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block mb-2 text-sm text-gray-600 font-bold",children:"Set Location"}),b.jsx(Vx,{value:n,onChange:z=>e(z)})]})]})}),b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[3]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Printer Settings"}),b.jsxs("div",{children:[b.jsx("label",{className:o,children:"Maximum Print Lines"}),b.jsx("input",{type:"number",min:"0",max:"1000",value:n.max_print_lines??200,onChange:z=>e({max_print_lines:parseInt(z.target.value)||0}),className:l}),b.jsx("p",{className:"text-xs text-gray-600 mt-1 ",children:"Maximum lines per print job to prevent endless prints. Set to 0 for no limit (default: 200)"})]})]})}),b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[4]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"SSH Access"}),b.jsx("p",{className:"text-sm text-gray-600 mb-4 ",children:"Manage SSH (Secure Shell) access to your PC-1 device. SSH allows advanced users to access the device via command line."}),C&&C.available?b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:[b.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b.jsx("span",{className:"text-sm font-medium text-black  font-bold",children:"SSH Service"}),b.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium  border-2 ${C.enabled&&C.active?"bg-white text-black border-black":C.enabled?"bg-gray-200 text-black border-gray-400":"bg-white text-gray-500 border-gray-300"}`,children:C.enabled&&C.active?"Enabled & Active":C.enabled?"Enabled":C.active?"Active":"Disabled"})]}),C.username&&b.jsxs("p",{className:"text-xs text-gray-600 mt-1 ",children:["Username: ",b.jsx("span",{className:"text-black ",children:C.username})]}),C.enabled&&b.jsxs("p",{className:"text-xs text-gray-600 mt-1 ",children:["Connect via: ",b.jsxs("span",{className:"text-black ",children:["ssh ",C.username||"admin","@pc-1.local"]})]})]}),b.jsxs("div",{className:"flex gap-3",children:[C.enabled?b.jsx("button",{type:"button",onClick:async()=>{if(confirm("Are you sure you want to disable SSH? You may lose remote access to the device.")){te(!0),J({type:"",message:""});try{const K=await(await qs("/api/system/ssh/disable",{method:"POST"})).json();if(K.success){J({type:"success",message:K.message});const se=await(await fetch("/api/system/ssh/status")).json();L(se)}else J({type:"error",message:P(K,"Failed to disable SSH")})}catch{J({type:"error",message:"Error disabling SSH"})}finally{te(!1),setTimeout(()=>J({type:"",message:""}),5e3)}}},disabled:$,className:"flex-1 py-2.5 px-4 bg-transparent border-0 rounded-lg transition-all cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed font-bold",style:{color:"var(--color-error-light)"},onMouseEnter:z=>{$||(z.currentTarget.style.color="var(--color-error)")},onMouseLeave:z=>{$||(z.currentTarget.style.color="var(--color-error-light)")},children:$?"Disabling...":"Disable SSH"}):b.jsx("button",{type:"button",onClick:async()=>{te(!0),J({type:"",message:""});try{const K=await(await qs("/api/system/ssh/enable",{method:"POST"})).json();if(K.success){J({type:"success",message:K.message});const se=await(await fetch("/api/system/ssh/status")).json();L(se)}else J({type:"error",message:P(K,"Failed to enable SSH")})}catch{J({type:"error",message:"Error enabling SSH"})}finally{te(!1),setTimeout(()=>J({type:"",message:""}),5e3)}},disabled:$,className:"flex-1 py-2.5 px-4 bg-transparent border-2 border-black text-black disabled:border-gray-300 disabled:text-gray-400 disabled:cursor-not-allowed rounded-lg  font-bold hover:bg-black hover:text-white transition-all cursor-pointer",children:$?"Enabling...":"Enable SSH"}),C.enabled&&b.jsx("button",{type:"button",onClick:()=>le(!V),className:"flex-1 py-2.5 px-4 bg-transparent border-2 border-gray-400 text-black rounded-lg  font-bold hover:border-black hover:bg-white transition-all cursor-pointer",children:V?"Cancel":"Change Password"})]}),V&&C.enabled&&b.jsxs("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:[b.jsx("h4",{className:"text-sm font-medium text-black mb-3  font-bold",children:"Change SSH Password"}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"New Password"}),b.jsx("input",{type:"password",value:ue,onChange:z=>Ne(z.target.value),placeholder:"Minimum 8 characters",className:l,minLength:8})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Confirm Password"}),b.jsx("input",{type:"password",value:et,onChange:z=>ze(z.target.value),placeholder:"Re-enter password",className:l,minLength:8})]}),b.jsx($s,{onClick:async()=>{if(!ue||ue.length<8){J({type:"error",message:"Password must be at least 8 characters"}),setTimeout(()=>J({type:"",message:""}),5e3);return}if(ue!==et){J({type:"error",message:"Passwords do not match"}),setTimeout(()=>J({type:"",message:""}),5e3);return}Ie(!0),J({type:"",message:""});try{const K=await(await qs("/api/system/ssh/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({new_password:ue})})).json();K.success?(J({type:"success",message:K.message}),Ne(""),ze(""),le(!1)):J({type:"error",message:P(K,"Failed to change password")})}catch{J({type:"error",message:"Error changing password"})}finally{Ie(!1),setTimeout(()=>J({type:"",message:""}),5e3)}},disabled:nt||!ue||!et,loading:nt,className:"w-full",children:"Change Password"})]})]}),Y.message&&b.jsxs("div",{className:`p-3 rounded-lg text-sm  border-2 ${Y.type==="success"?"bg-gray-100 text-black border-black":"bg-white text-black border-black border-dashed"}`,children:[Y.type==="error"&&b.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),Y.message]})]}):b.jsx("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:b.jsx("p",{className:"text-sm text-gray-500 ",children:"SSH isn't available in testing mode"})})]})})]})},fE=[{id:"news",label:"News API",offline:!1,icon:"newspaper"},{id:"weather",label:"Weather",offline:!1,icon:"cloud-sun"}];let Wr=null,Fd=null;function _o(){const[n,e]=Q.useState(Wr||[]),[t,s]=Q.useState(!Wr),[l,o]=Q.useState(null);return Q.useEffect(()=>{if(Wr){e(Wr),s(!1);return}Fd||(Fd=fetch("/api/module-types").then(c=>{if(!c.ok)throw new Error("Failed to load module types");return c.json()}).then(c=>(Wr=c.moduleTypes||[],Wr)).catch(c=>(console.error("Error loading module types:",c),Wr=fE,Wr))),Fd.then(c=>{e(c),s(!1)})},[]),{moduleTypes:n,loading:t,error:l}}const Jd=({className:n,title:e="print",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("polyline",{fill:"none",points:"3.5 3.5 3.5 0.5 12.5 0.5 12.5 3.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),b.jsx("path",{d:"M3.5,12.5H.5v-4a3,3,0,0,1,3-3h9a3,3,0,0,1,3,3v4h-3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),b.jsx("rect",{height:"6",width:"9",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"3.5",y:"9.5"})]})]}),dE=({className:n,title:e="schedule",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"11.5",x2:"15.5",y1:"0.5",y2:"4.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"7",x2:"7",y1:"5.5",y2:"8.5"}),b.jsx("circle",{cx:"7",cy:"9",fill:"none",r:"6.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),Xd=({className:n,title:e="arrow up",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsx("g",{fill:"currentColor",children:b.jsx("polyline",{fill:"none",points:"15.5,10.5 8,5.5 0.5,10.5 ",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),Qd=({className:n,title:e="arrow down",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsx("g",{fill:"currentColor",children:b.jsx("polyline",{fill:"none",points:"15.5,5.5 8,10.5 0.5,5.5 ",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),hE=({settings:n,modules:e,triggerChannelPrint:t,triggerModulePrint:s,setShowScheduleModal:l,swapChannels:o,setShowEditModuleModal:c,setEditingModule:f,moveModuleInChannel:d,assignModuleToChannel:h,reorderChannelModules:m,removeModuleFromChannel:y,setShowAddModuleModal:x,setShowCreateUnassignedModal:v,wifiStatus:k})=>{const{moduleTypes:E}=_o(),M=Q.useRef({}),C=Q.useRef(null),L=Q.useRef(!1),$=Q.useRef(null),[te,Y]=Q.useState(null),[J,V]=Q.useState(null),le=Q.useRef(null),ue=Q.useRef(new Map),Ne=P=>typeof P=="string"&&P.trim().length>0,et=P=>{const O=P?.config||{};switch(P?.type){case"news":return Ne(O.news_api_key);case"rss":return Array.isArray(O.rss_feeds)&&O.rss_feeds.some(I=>Ne(String(I||"")));case"email":return Ne(O.email_user)&&Ne(O.email_password);case"calendar":return Array.isArray(O.ical_sources)&&O.ical_sources.some(I=>Ne(I?.url));case"webhook":return Ne(O.url);case"text":return Ne(O.content);case"weather":return Ne(O.city_name)||Ne(n?.city_name);default:return!0}},ze=P=>`channel:${P}`,nt=P=>{if(P==="unassigned")return{type:"unassigned"};if(P?.startsWith("channel:")){const O=Number(P.split(":")[1]);if(Number.isFinite(O))return{type:"channel",position:O}}return null},Ie=P=>{const O={};return P.forEach((I,z)=>{O[I]=z}),O},ke=(P,O,I)=>{const z=[...P],[K]=z.splice(O,1);return z.splice(I,0,K),z},U=P=>{V(O=>P?O&&O.listId===P.listId&&O.index===P.index&&Math.abs(O.top-P.top)<1?O:P:O&&null),le.current=P,P?.listId&&ue.current.set(P.listId,P)},ee=(P,O)=>{const I=M.current[P];if(!I)return null;const z=Array.from(I.querySelectorAll('[data-dnd-item="true"]')),K=I.getBoundingClientRect();if(z.length===0)return{listId:P,index:0,top:Math.max(8,Math.floor(K.height/2))};let B=z.length;for(let ne=0;ne<z.length;ne+=1){const de=z[ne].getBoundingClientRect(),Ee=de.top+de.height/2;if(O<Ee){B=ne;break}}let se;if(B===0){const ne=z[0].getBoundingClientRect(),de=Math.max(0,ne.top-K.top);se=ne.top-K.top-de/2}else if(B>=z.length){const ne=z[z.length-1].getBoundingClientRect(),de=Math.max(0,K.bottom-ne.bottom);se=ne.bottom-K.top+de/2-1}else{const ne=z[B-1].getBoundingClientRect(),de=z[B].getBoundingClientRect(),Ee=Math.max(0,de.top-ne.bottom);se=ne.bottom-K.top+Ee/2-1}const W=Math.max(6,Math.min(se,K.height-6));return{listId:P,index:B,top:W}},he=(P,O)=>{if(P.target.closest('[data-no-drag="true"]')){P.preventDefault();return}const I=P.currentTarget?.getBoundingClientRect?.();O.itemHeight=I?.height||44,L.current=!0,P.dataTransfer.effectAllowed="move",P.dataTransfer.setData("text/plain",O.moduleId),C.current=O,Y(O)},Te=(P,O)=>{if(!C.current||(P.preventDefault(),$.current))return;const I=P.clientY;$.current=requestAnimationFrame(()=>{$.current=null;const z=ee(O,I);U(z)})},Be=(P,O)=>{P.currentTarget.contains(P.relatedTarget)},N=()=>{$.current&&(cancelAnimationFrame($.current),$.current=null),V(null),Y(null),C.current=null,le.current=null,ue.current.clear(),setTimeout(()=>{L.current=!1},0)},q=P=>{const O=nt(P);return O?O.type==="unassigned"?Vt.map(I=>I.id):(be[O.position]||[]).map(I=>I.module_id):[]},ie=(P,O)=>{L.current||(c(P),f(JSON.parse(JSON.stringify(O))))},oe=(P,O)=>{P.preventDefault();const I=C.current;if(!I)return;const K=ue.current.get(O)||ee(O,P.clientY)||J,B=K?K.index:0,se=I.listId,W=nt(se),ne=nt(O);if(!W||!ne){N();return}if(se===O){const de=q(se),Ee=de.indexOf(I.moduleId);if(Ee===-1){N();return}let Me=B;if(Me>Ee&&(Me-=1),Me===Ee){N();return}const ut=ke(de,Ee,Me);W.type==="unassigned"?Qe(ut):m(W.position,Ie(ut),{optimistic:!0}),N();return}if(W.type==="unassigned"&&ne.type==="channel"){const de=q(O),Ee=Math.max(0,Math.min(B,de.length)),Me=[...de];Me.splice(Ee,0,I.moduleId),Qe(ut=>ut.filter(bt=>bt!==I.moduleId)),N(),(async()=>await h(ne.position,I.moduleId,Ee,{silent:!0,optimistic:!0})&&await m(ne.position,Ie(Me),{optimistic:!0}))();return}if(W.type==="channel"&&ne.type==="unassigned"){const de=Math.max(0,Math.min(B,Vt.length));Qe(Ee=>{const Me=Ee.filter(ut=>ut!==I.moduleId);return Me.splice(de,0,I.moduleId),Me}),y(W.position,I.moduleId,{silent:!0,optimistic:!0}),N();return}if(W.type==="channel"&&ne.type==="channel"){const de=q(O),Ee=Math.max(0,Math.min(B,de.length)),Me=[...de];Me.splice(Ee,0,I.moduleId),N(),(async()=>!await y(W.position,I.moduleId,{silent:!0,optimistic:!0})||!await h(ne.position,I.moduleId,Ee,{silent:!0,optimistic:!0})||await m(ne.position,Ie(Me),{optimistic:!0}))();return}N()},be=Q.useMemo(()=>{const P={};for(let O=1;O<=8;O+=1){const z=((n.channels?.[O]||{modules:[]}).modules||[]).map(K=>({...K,module:e[K.module_id]})).filter(K=>K.module).sort((K,B)=>K.order-B.order);P[O]=z}return P},[e,n.channels]),ge=Q.useMemo(()=>{const P=new Set;return Object.values(n.channels||{}).forEach(O=>{(O.modules||[]).forEach(I=>{P.add(I.module_id)})}),Object.values(e||{}).filter(O=>!P.has(O.id))},[e,n.channels]),[Ae,Qe]=Q.useState([]),qe=Q.useMemo(()=>ge.map(P=>P.id),[ge]),Qt=Q.useMemo(()=>new Set(qe),[qe]);Q.useEffect(()=>{Qe(P=>{const O=new Set(qe),I=P.filter(B=>O.has(B)),z=new Set(I),K=qe.filter(B=>!z.has(B));return K.length===0&&I.length===P.length?P:[...I,...K]})},[qe]);const Vt=Ae.filter(P=>Qt.has(P)).map(P=>e[P]).filter(Boolean),an=(P,O)=>{const I=Ae.findIndex(K=>K===P);if(I===-1)return;const z=[...Ae];O==="up"&&I>0?([z[I],z[I-1]]=[z[I-1],z[I]],Qe(z)):O==="down"&&I<z.length-1&&([z[I],z[I+1]]=[z[I+1],z[I]],Qe(z))};return b.jsxs("div",{className:"space-y-4",children:[b.jsx("div",{className:"space-y-4",children:[1,2,3,4,5,6,7,8].map(P=>{const O=n.channels?.[P]||{},I=be[P]||[],z=ze(P),K=qx;return b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:K[P-1]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col h-full",children:[b.jsxs("div",{className:"flex items-center justify-between mb-3 gap-4",children:[b.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight",children:P}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx("button",{type:"button",onClick:()=>t(P),className:"group flex items-center justify-center px-2 py-1 rounded border-2 bg-transparent border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer",title:"Print Channel",children:b.jsx(Jd,{className:"w-3.5 h-3.5 text-gray-400 group-hover:text-black transition-all"})}),b.jsxs("button",{type:"button",onClick:()=>l(P),className:`group flex items-center gap-1 px-2 py-1 rounded border-2 transition-all cursor-pointer ${O.schedule&&O.schedule.length>0?"bg-transparent shadow-sm":"bg-transparent border-gray-300 hover:border-black hover:bg-white"}`,style:O.schedule&&O.schedule.length>0?{color:"var(--color-brass)",borderColor:"var(--color-brass)"}:{},onMouseEnter:B=>{O.schedule&&O.schedule.length>0&&(B.currentTarget.style.backgroundColor="var(--color-brass-10)")},onMouseLeave:B=>{O.schedule&&O.schedule.length>0&&(B.currentTarget.style.backgroundColor="transparent")},title:"Configure Schedule",children:[b.jsx(dE,{className:`w-3.5 h-3.5 transition-all ${O.schedule?.length>0?"":"text-gray-400 group-hover:text-black"}`,style:O.schedule?.length>0?{color:"var(--color-brass)"}:{}}),b.jsx("span",{className:`text-xs font-bold ${O.schedule?.length>0?"":"text-gray-400 group-hover:text-black"}`,style:O.schedule?.length>0?{color:"var(--color-brass)"}:{},children:O.schedule?.length||0})]})]})]}),b.jsxs("div",{className:"flex gap-1",children:[b.jsx("button",{type:"button",onClick:B=>{B.preventDefault(),o(P,P-1)},disabled:P===1,className:"px-2 py-1 text-xs  border-2 border-gray-300 hover:border-black rounded text-gray-600 hover:text-black transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer hover:bg-white",title:"Move channel up",children:b.jsx(Xd,{className:"w-3 h-3"})}),b.jsx("button",{type:"button",onClick:B=>{B.preventDefault(),o(P,P+1)},disabled:P===8,className:"px-2 py-1 text-xs  border-2 border-gray-300 hover:border-black rounded text-gray-600 hover:text-black transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer hover:bg-white",title:"Move channel down",children:b.jsx(Qd,{className:"w-3 h-3"})})]})]}),b.jsxs("div",{ref:B=>{M.current[z]=B},onDragOver:B=>Te(B,z),onDragLeave:B=>Be(B),onDrop:B=>oe(B,z),"data-drop-active":J?.listId===z,className:"space-y-2 mb-2 flex-grow min-h-[36px] dnd-list",role:"list",children:[I.map((B,se)=>b.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border-2 border-gray-600 hover:border-black group transition-all dnd-item cursor-pointer",style:{backgroundColor:"var(--color-bg-card)"},onMouseEnter:W=>W.currentTarget.style.setProperty("background-color","var(--color-bg-white)","important"),onMouseLeave:W=>W.currentTarget.style.setProperty("background-color","var(--color-bg-card)","important"),onClick:()=>ie(B.module_id,e[B.module_id]),onDragOver:W=>Te(W,z),onDrop:W=>oe(W,z),draggable:!0,"data-dnd-item":"true","data-dragging":te?.moduleId===B.module_id?"true":"false",onDragStart:W=>he(W,{moduleId:B.module_id,listId:z,index:se}),onDragEnd:N,role:"listitem",children:[b.jsx("div",{className:"flex-1 min-w-0 mr-2",children:(()=>{const W=E.find(cn=>cn.id===B.module.type),ne=W?!W.offline:!1,de=et(B.module),Me=ne&&!de,ut=k?.connected;let bt="var(--color-text-muted)";return ut?Me&&(bt="var(--color-brass)"):bt="var(--color-error)",b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-sm font-bold text-gray-700 group-hover:text-black  truncate transition-colors",children:B.module.name}),b.jsxs("div",{className:`text-[10px]  truncate flex items-baseline gap-1 ${Me?"":"text-gray-700"}`,style:Me?{color:"var(--color-brass)"}:{},children:[ne&&(ut?b.jsx(Wi,{className:"w-2.5 h-2.5 flex-shrink-0 group-hover:text-black transition-colors",style:{transform:"translateY(0.125rem)",color:bt}}):b.jsx(Sc,{className:"w-2.5 h-2.5 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-error)"}})),b.jsx("span",{className:"truncate font-mono group-hover:text-black transition-colors",style:{color:"var(--color-text-muted)"},children:W?.label?.toUpperCase()})]})]})})()}),b.jsxs("div",{className:"flex gap-2 items-center",onClick:W=>W.stopPropagation(),"data-no-drag":"true",children:[b.jsx("button",{type:"button",onClick:()=>s(B.module_id),className:"px-1.5 py-1 rounded border border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer",title:"Print this module",children:b.jsx(Jd,{className:"w-3 h-3 text-gray-400 hover:text-black transition-colors"})}),b.jsxs("div",{className:"flex flex-col gap-0.5",children:[b.jsx("button",{type:"button",onClick:()=>d(P,B.module_id,"up"),disabled:se===0,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:W=>{const ne=W.currentTarget.querySelector("svg");ne&&(ne.style.color="var(--color-text-main)")},onMouseLeave:W=>{const ne=W.currentTarget.querySelector("svg");ne&&(ne.style.color="var(--color-text-muted)")},children:b.jsx(Xd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})}),b.jsx("button",{type:"button",onClick:()=>d(P,B.module_id,"down"),disabled:se===I.length-1,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:W=>{const ne=W.currentTarget.querySelector("svg");ne&&(ne.style.color="var(--color-text-main)")},onMouseLeave:W=>{const ne=W.currentTarget.querySelector("svg");ne&&(ne.style.color="var(--color-text-muted)")},children:b.jsx(Qd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})})]})]})]},B.module_id)),J?.listId===z&&b.jsx("div",{className:"dnd-indicator",style:{top:J.top}})]}),b.jsx("div",{className:"mt-auto",children:b.jsx("button",{type:"button",onClick:()=>x(P),onDragOver:B=>Te(B,z),onDrop:B=>oe(B,z),className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs  font-bold tracking-wider cursor-pointer",style:{backgroundColor:"transparent"},onMouseEnter:B=>B.currentTarget.style.backgroundColor="var(--color-bg-white)",onMouseLeave:B=>B.currentTarget.style.backgroundColor="transparent",title:"Add a module to this channel",children:"+ ADD MODULE"})})]})},P)})}),b.jsxs("div",{className:"mt-8",children:[b.jsx("h3",{className:"text-lg font-bold text-black mb-4 tracking-tight border-b-2 border-dashed border-gray-300 pb-2",children:"UNASSIGNED MODULES"}),b.jsxs("div",{ref:P=>{M.current.unassigned=P},onDragOver:P=>Te(P,"unassigned"),onDragLeave:P=>Be(P),onDrop:P=>oe(P,"unassigned"),"data-drop-active":J?.listId==="unassigned",className:"space-y-2 min-h-[36px] dnd-list",role:"list",children:[Vt.length===0?b.jsx("div",{className:"text-sm text-gray-500 italic py-4",children:"No unassigned modules. Create a module below or assign existing modules to channels."}):Vt.map((P,O)=>{const I=E.find(ne=>ne.id===P.type),z=I?!I.offline:!1,K=et(P),B=z&&!K,se=k?.connected;let W="var(--color-text-muted)";return se?B&&(W="var(--color-brass)"):W="var(--color-error)",b.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border-2 border-gray-300 hover:border-black group transition-all dnd-item cursor-pointer",style:{backgroundColor:"var(--color-bg-card)"},onMouseEnter:ne=>ne.currentTarget.style.setProperty("background-color","var(--color-bg-white)","important"),onMouseLeave:ne=>ne.currentTarget.style.setProperty("background-color","var(--color-bg-card)","important"),onClick:()=>ie(P.id,P),onDragOver:ne=>Te(ne,"unassigned"),onDrop:ne=>oe(ne,"unassigned"),draggable:!0,"data-dnd-item":"true","data-dragging":te?.moduleId===P.id?"true":"false",onDragStart:ne=>he(ne,{moduleId:P.id,listId:"unassigned",index:O}),onDragEnd:N,role:"listitem",children:[b.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[b.jsx("div",{className:"text-sm font-bold text-gray-700 group-hover:text-black truncate transition-colors",children:P.name}),b.jsxs("div",{className:`text-[10px] truncate flex items-baseline gap-1 ${B?"":"text-gray-700"}`,style:B?{color:"var(--color-brass)"}:{},children:[z&&(se?b.jsx(Wi,{className:"w-2.5 h-2.5 flex-shrink-0 group-hover:text-black transition-colors",style:{transform:"translateY(0.125rem)",color:W}}):b.jsx(Sc,{className:"w-2.5 h-2.5 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-error)"}})),b.jsx("span",{className:"truncate font-mono group-hover:text-black transition-colors",style:{color:"var(--color-text-muted)"},children:I?.label?.toUpperCase()})]})]}),b.jsxs("div",{className:"flex gap-2 items-center",onClick:ne=>ne.stopPropagation(),"data-no-drag":"true",children:[b.jsx("button",{type:"button",onClick:()=>s(P.id),className:"px-1.5 py-1 rounded border border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer",title:"Print this module",children:b.jsx(Jd,{className:"w-3 h-3 text-gray-400 hover:text-black transition-colors"})}),b.jsxs("div",{className:"flex flex-col gap-0.5",children:[b.jsx("button",{type:"button",onClick:()=>an(P.id,"up"),disabled:Vt.findIndex(ne=>ne.id===P.id)===0,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:ne=>{const de=ne.currentTarget.querySelector("svg");de&&(de.style.color="var(--color-text-main)")},onMouseLeave:ne=>{const de=ne.currentTarget.querySelector("svg");de&&(de.style.color="var(--color-text-muted)")},children:b.jsx(Xd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})}),b.jsx("button",{type:"button",onClick:()=>an(P.id,"down"),disabled:Vt.findIndex(ne=>ne.id===P.id)===Vt.length-1,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:ne=>{const de=ne.currentTarget.querySelector("svg");de&&(de.style.color="var(--color-text-main)")},onMouseLeave:ne=>{const de=ne.currentTarget.querySelector("svg");de&&(de.style.color="var(--color-text-muted)")},children:b.jsx(Qd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})})]})]})]},P.id)}),J?.listId==="unassigned"&&b.jsx("div",{className:"dnd-indicator",style:{top:J.top}})]}),b.jsx("div",{className:"mt-4",children:b.jsx("button",{type:"button",onClick:()=>{v&&v(!0)},className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs font-bold tracking-wider cursor-pointer",style:{backgroundColor:"transparent"},onMouseEnter:P=>P.currentTarget.style.backgroundColor="var(--color-bg-white)",onMouseLeave:P=>P.currentTarget.style.backgroundColor="transparent",title:"Add a new unassigned module",children:"+ ADD MODULE"})})]})]})},cp=({onClick:n,className:e="",...t})=>b.jsx("button",{onClick:n,className:`text-gray-500 hover:text-black text-2xl cursor-pointer hover-shimmer ${e}`,type:"button",...t,children:""}),rb=({channelPosition:n,onClose:e,onCreateModule:t,onAssignModule:s,onOpenEdit:l,isUnassigned:o=!1})=>{const c=Q.useRef(null),{moduleTypes:f}=_o();return n===null&&!o?null:b.jsx("div",{className:Ue.modalBackdrop,onMouseDown:d=>{d.target===d.currentTarget&&(c.current="backdrop")},onClick:d=>{d.target===d.currentTarget&&c.current==="backdrop"&&e(),c.current=null},children:b.jsxs("div",{className:Ue.modalContent,onClick:d=>d.stopPropagation(),children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h3",{className:"text-xl font-bold text-black ",children:n?`Add Module to Channel ${n}`:"Create Module"}),b.jsx(cp,{onClick:e})]}),b.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[...f].sort((d,h)=>d.offline&&!h.offline?-1:!d.offline&&h.offline?1:d.label.localeCompare(h.label)).map(d=>b.jsx("button",{type:"button",onClick:async()=>{const h=await t(d.id);h&&(n&&await s(n,h.id),e(),l(h.id,h))},className:"flex flex-col items-center p-4 bg-white border-2 border-gray-300 hover:border-black rounded-lg transition-colors text-center group cursor-pointer hover-shimmer",children:b.jsxs("div",{className:"flex items-baseline justify-center gap-1.5",children:[!d.offline&&b.jsx(Wi,{className:"w-3 h-3 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-text-muted)"}}),b.jsx("span",{className:"font-bold text-black group-hover:text-black ",children:d.label})]})},d.id))})]})})},pE=({value:n={},onChange:e})=>{const[t,s]=Q.useState(()=>Object.entries(n||{}).map(([d,h])=>({key:d,value:h})));Q.useEffect(()=>{const d=new Map(Object.entries(n||{})),h=new Map(t.map(m=>[m.key,m.value]));d.size!==h.size&&s(Object.entries(n||{}).map(([m,y])=>({key:m,value:y})))},[n]);const l=d=>{const h={};d.forEach(m=>{m.key.trim()&&(h[m.key.trim()]=m.value)}),e(h)},o=(d,h,m)=>{const y=[...t];y[d]={...y[d],[h]:m},s(y),l(y)},c=()=>{s([...t,{key:"",value:""}])},f=d=>{const h=t.filter((m,y)=>y!==d);s(h),l(h)};return b.jsxs("div",{className:"space-y-2",children:[t.map((d,h)=>b.jsxs("div",{className:"flex gap-2 items-center",children:[b.jsx("input",{type:"text",value:d.key,onChange:m=>o(h,"key",m.target.value),placeholder:"Key",className:`${Ue.inputSmall} flex-1`}),b.jsx("input",{type:"text",value:d.value,onChange:m=>o(h,"value",m.target.value),placeholder:"Value",className:`${Ue.inputSmall} flex-1`}),b.jsx("button",{type:"button",onClick:()=>f(h),className:`${Ue.buttonDanger} flex-shrink-0 px-2`,children:""})]},h)),b.jsx("button",{type:"button",onClick:c,className:`${Ue.buttonGhost} text-xs w-full border-dashed border-2 border-gray-200 py-1`,children:"+ Add Entry"})]})},mE=({value:n=[],onChange:e})=>{const t=Array.isArray(n)?n:[],s=Q.useRef([]),l=(d,h,m)=>{const y=[...t];y[d]={...y[d],[h]:m},e(y)},o=d=>{const h=[...t],m={text:"",checked:!1};h.splice(d+1,0,m),e(h),setTimeout(()=>{s.current[d+1]&&s.current[d+1].focus()},0)},c=d=>{if(t.length<=1){l(0,"text","");return}const h=t.filter((y,x)=>x!==d);e(h);const m=Math.max(0,d-1);setTimeout(()=>{if(s.current[m]){s.current[m].focus();const y=s.current[m].value.length;s.current[m].setSelectionRange(y,y)}},0)},f=(d,h)=>{d.key==="Enter"?(d.preventDefault(),o(h)):d.key==="Backspace"&&t[h].text===""&&t.length>1?(d.preventDefault(),c(h)):d.key==="ArrowUp"&&h>0?(d.preventDefault(),s.current[h-1].focus()):d.key==="ArrowDown"&&h<t.length-1&&(d.preventDefault(),s.current[h+1].focus())};return Q.useEffect(()=>{t.length===0&&e([{text:"",checked:!1}])},[t.length]),b.jsxs("div",{className:"space-y-0 bg-white",children:[t.map((d,h)=>b.jsxs("div",{className:"flex items-center gap-3 group px-1 py-1 transition-all",children:[b.jsx("input",{type:"checkbox",checked:d.checked||!1,onChange:m=>l(h,"checked",m.target.checked),className:"w-5 h-5 text-black rounded border-2 border-zinc-300 focus:ring-0 cursor-pointer flex-shrink-0",style:{accentColor:"black"}}),b.jsx("input",{ref:m=>s.current[h]=m,type:"text",value:d.text||"",onChange:m=>l(h,"text",m.target.value),onKeyDown:m=>f(m,h),placeholder:"New checklist item...",className:"flex-1 bg-transparent border-none focus:outline-none focus:ring-0 py-1 text-base placeholder-zinc-300 transition-colors"}),b.jsx("button",{type:"button",onClick:()=>c(h),className:"opacity-0 group-hover:opacity-100 text-gray-300 hover:text-red-500 transition-all p-1",title:"Remove Item",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 256 256",children:b.jsx("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"})})})]},h)),b.jsx("div",{className:"pt-2",children:b.jsxs("button",{type:"button",onClick:()=>o(t.length-1),className:"text-xs text-gray-400 hover:text-gray-600 flex items-center gap-1 px-2",children:[b.jsx("span",{className:"text-sm",children:"+"})," Add another item"]})})]})},gE=({value:n,onChange:e,presets:t={},onPresetSelect:s})=>{const l=o=>{const c=o.target.value;if(e(c),c&&t[c]&&s){const f=t[c];let d={};if(f.values)d=f.values;else{const{label:h,...m}=f;d=m}s(d)}};return b.jsx("select",{value:n||"custom",onChange:l,className:Ue.input,children:Object.entries(t).map(([o,c])=>b.jsx("option",{value:o,children:c.label||o},o))})},yE=({className:n,title:e="check",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsx("g",{fill:"currentColor",children:b.jsx("path",{d:"M0.5,7l4,4.5 c0,0,2.5-5.5,11-8.5",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),bE=({className:n,title:e="warning",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsx("path",{fill:"currentColor",d:"M236.8,188.09,149.35,36.22h0a24.76,24.76,0,0,0-42.7,0L19.2,188.09a23.51,23.51,0,0,0,0,23.72A24.35,24.35,0,0,0,40.55,224h174.9a24.35,24.35,0,0,0,21.33-12.19A23.51,23.51,0,0,0,236.8,188.09ZM120,104a8,8,0,0,1,16,0v40a8,8,0,0,1-16,0Zm8,88a12,12,0,1,1,12-12A12,12,0,0,1,128,192Z"})]}),xE=({formData:n={}})=>{const[e,t]=Q.useState(!1),[s,l]=Q.useState(null),o=async()=>{t(!0),l(null);try{const f=await(await fetch("/api/webhook/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();l(f)}catch(c){l({success:!1,error:c.message})}finally{t(!1)}};return b.jsxs("div",{className:"space-y-3",children:[b.jsx("button",{type:"button",onClick:o,disabled:e||!n.url,className:"text-sm px-3 py-1.5 border-2 border-gray-300 rounded-lg hover:border-black disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e?b.jsxs("span",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"w-3 h-3 border-2 border-black border-t-transparent rounded-full animate-spin"}),"Testing..."]}):"Test Webhook"}),s&&b.jsx("div",{className:`p-3 rounded-lg text-sm border-2 ${s.success?"bg-gray-50 border-gray-300":"bg-white border-black border-dashed"}`,children:s.success?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex items-center gap-2 text-black font-bold mb-2",children:[b.jsx(yE,{className:"w-4 h-4"}),b.jsx("span",{children:"Success"}),s.status_code&&b.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["(HTTP ",s.status_code,")"]})]}),s.json_path&&b.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Extracted from: ",b.jsx("code",{className:"bg-gray-200 px-1 rounded",children:s.json_path})]}),b.jsx("div",{className:"bg-white border border-gray-200 rounded p-2 font-mono text-xs whitespace-pre-wrap break-words max-h-32 overflow-y-auto",children:s.content})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex items-center gap-2 text-black font-bold mb-2",children:[b.jsx(bE,{className:"w-4 h-4"}),b.jsx("span",{children:"Error"})]}),b.jsx("div",{className:"text-gray-600 text-xs",children:s.error}),s.raw_response&&b.jsxs("details",{className:"mt-2",children:[b.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"Show raw response"}),b.jsx("div",{className:"bg-gray-100 border border-gray-200 rounded p-2 font-mono text-xs whitespace-pre-wrap break-words max-h-32 overflow-y-auto mt-1",children:s.raw_response})]})]})})]})},vE=({value:n,onChange:e,schema:t,uiSchema:s={},moduleId:l,onActionComplete:o})=>{const[c,f]=Q.useState(!1),[d,h]=Q.useState(null),m=s["ui:options"]||{},y=m.action||"default",x=m.label||t?.title||"Action",v=m.confirmMessage,k=m.style||"primary",E=async()=>{if(!(v&&!window.confirm(v))){if(!l){console.error("ActionButton: moduleId is required"),h("error");return}f(!0),h(null);try{const C=await fetch(`/api/modules/${l}/actions/${y}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(C.ok){const L=await C.json();h("success"),L.reload&&o?setTimeout(()=>o(),300):setTimeout(()=>h(null),2e3)}else h("error")}catch(C){console.error("ActionButton error:",C),h("error")}finally{f(!1)}}};let M=Ue.buttonPrimary;return k==="danger"?M="px-4 py-2 rounded-lg font-medium bg-red-600 text-white hover:bg-red-700 transition-colors disabled:opacity-50":k==="ghost"?M=Ue.buttonGhost:k==="link"&&(M="text-black hover:text-zinc-600 underline text-sm font-bold disabled:opacity-50"),b.jsxs("div",{className:"mb-4",children:[b.jsx("button",{type:"button",onClick:E,disabled:c,className:M,children:c?"Processing...":x}),d==="success"&&b.jsx("span",{className:"ml-3 text-green-600 text-sm",children:" Done"}),d==="error"&&b.jsx("span",{className:"ml-3 text-red-600 text-sm",children:" Failed"})]})};var SE=Ix();const kE=ap(SE);var Zd={exports:{}},Wd={};var sb;function TE(){if(sb)return Wd;sb=1;var n=Lo();function e(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,l=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function f(y,x){var v=x(),k=s({inst:{value:v,getSnapshot:x}}),E=k[0].inst,M=k[1];return o(function(){E.value=v,E.getSnapshot=x,d(E)&&M({inst:E})},[y,v,x]),l(function(){return d(E)&&M({inst:E}),y(function(){d(E)&&M({inst:E})})},[y]),c(v),v}function d(y){var x=y.getSnapshot;y=y.value;try{var v=x();return!t(y,v)}catch{return!0}}function h(y,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:f;return Wd.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,Wd}var ib;function Yx(){return ib||(ib=1,Zd.exports=TE()),Zd.exports}var Kx=Yx();function Ht(n){this.content=n}Ht.prototype={constructor:Ht,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var s=t&&t!=n?this.remove(t):this,l=s.find(n),o=s.content.slice();return l==-1?o.push(t||n,e):(o[l+1]=e,t&&(o[l]=t)),new Ht(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Ht(t)},addToStart:function(n,e){return new Ht([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Ht(t)},addBefore:function(n,e,t){var s=this.remove(e),l=s.content.slice(),o=s.find(n);return l.splice(o==-1?l.length:o,0,e,t),new Ht(l)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Ht.from(n),n.size?new Ht(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Ht.from(n),n.size?new Ht(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Ht.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Ht.from=function(n){if(n instanceof Ht)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Ht(e)};function Px(n,e,t){for(let s=0;;s++){if(s==n.childCount||s==e.childCount)return n.childCount==e.childCount?null:t;let l=n.child(s),o=e.child(s);if(l==o){t+=l.nodeSize;continue}if(!l.sameMarkup(o))return t;if(l.isText&&l.text!=o.text){for(let c=0;l.text[c]==o.text[c];c++)t++;return t}if(l.content.size||o.content.size){let c=Px(l.content,o.content,t+1);if(c!=null)return c}t+=l.nodeSize}}function Fx(n,e,t,s){for(let l=n.childCount,o=e.childCount;;){if(l==0||o==0)return l==o?null:{a:t,b:s};let c=n.child(--l),f=e.child(--o),d=c.nodeSize;if(c==f){t-=d,s-=d;continue}if(!c.sameMarkup(f))return{a:t,b:s};if(c.isText&&c.text!=f.text){let h=0,m=Math.min(c.text.length,f.text.length);for(;h<m&&c.text[c.text.length-h-1]==f.text[f.text.length-h-1];)h++,t--,s--;return{a:t,b:s}}if(c.content.size||f.content.size){let h=Fx(c.content,f.content,t-1,s-1);if(h)return h}t-=d,s-=d}}class Z{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let s=0;s<e.length;s++)this.size+=e[s].nodeSize}nodesBetween(e,t,s,l=0,o){for(let c=0,f=0;f<t;c++){let d=this.content[c],h=f+d.nodeSize;if(h>e&&s(d,l+f,o||null,c)!==!1&&d.content.size){let m=f+1;d.nodesBetween(Math.max(0,e-m),Math.min(d.content.size,t-m),s,l+m)}f=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,s,l){let o="",c=!0;return this.nodesBetween(e,t,(f,d)=>{let h=f.isText?f.text.slice(Math.max(e,d)-d,t-d):f.isLeaf?l?typeof l=="function"?l(f):l:f.type.spec.leafText?f.type.spec.leafText(f):"":"";f.isBlock&&(f.isLeaf&&h||f.isTextblock)&&s&&(c?c=!1:o+=s),o+=h},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,s=e.firstChild,l=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(s)&&(l[l.length-1]=t.withText(t.text+s.text),o=1);o<e.content.length;o++)l.push(e.content[o]);return new Z(l,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let s=[],l=0;if(t>e)for(let o=0,c=0;c<t;o++){let f=this.content[o],d=c+f.nodeSize;d>e&&((c<e||d>t)&&(f.isText?f=f.cut(Math.max(0,e-c),Math.min(f.text.length,t-c)):f=f.cut(Math.max(0,e-c-1),Math.min(f.content.size,t-c-1))),s.push(f),l+=f.nodeSize),c=d}return new Z(s,l)}cutByIndex(e,t){return e==t?Z.empty:e==0&&t==this.content.length?this:new Z(this.content.slice(e,t))}replaceChild(e,t){let s=this.content[e];if(s==t)return this;let l=this.content.slice(),o=this.size+t.nodeSize-s.nodeSize;return l[e]=t,new Z(l,o)}addToStart(e){return new Z([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Z(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,s=0;t<this.content.length;t++){let l=this.content[t];e(l,s,t),s+=l.nodeSize}}findDiffStart(e,t=0){return Px(this,e,t)}findDiffEnd(e,t=this.size,s=e.size){return Fx(this,e,t,s)}findIndex(e){if(e==0)return rc(0,e);if(e==this.size)return rc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,s=0;;t++){let l=this.child(t),o=s+l.nodeSize;if(o>=e)return o==e?rc(t+1,o):rc(t,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Z.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Z(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Z.empty;let t,s=0;for(let l=0;l<e.length;l++){let o=e[l];s+=o.nodeSize,l&&o.isText&&e[l-1].sameMarkup(o)?(t||(t=e.slice(0,l)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new Z(t||e,s)}static from(e){if(!e)return Z.empty;if(e instanceof Z)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Z([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Z.empty=new Z([],0);const eh={index:0,offset:0};function rc(n,e){return eh.index=n,eh.offset=e,eh}function Tc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let s=0;s<n.length;s++)if(!Tc(n[s],e[s]))return!1}else{for(let s in n)if(!(s in e)||!Tc(n[s],e[s]))return!1;for(let s in e)if(!(s in n))return!1}return!0}let We=class Oh{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,s=!1;for(let l=0;l<e.length;l++){let o=e[l];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,l));else{if(o.type.excludes(this.type))return e;!s&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,l)),t.push(this),s=!0),t&&t.push(o)}}return t||(t=e.slice()),s||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Tc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let s=e.marks[t.type];if(!s)throw new RangeError(`There is no mark type ${t.type} in this schema`);let l=s.create(t.attrs);return s.checkAttrs(l.attrs),l}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++)if(!e[s].eq(t[s]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Oh.none;if(e instanceof Oh)return[e];let t=e.slice();return t.sort((s,l)=>s.type.rank-l.type.rank),t}};We.none=[];class Ec extends Error{}class ae{constructor(e,t,s){this.content=e,this.openStart=t,this.openEnd=s}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let s=Xx(this.content,e+this.openStart,t);return s&&new ae(s,this.openStart,this.openEnd)}removeBetween(e,t){return new ae(Jx(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ae.empty;let s=t.openStart||0,l=t.openEnd||0;if(typeof s!="number"||typeof l!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ae(Z.fromJSON(e,t.content),s,l)}static maxOpen(e,t=!0){let s=0,l=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)s++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)l++;return new ae(e,s,l)}}ae.empty=new ae(Z.empty,0,0);function Jx(n,e,t){let{index:s,offset:l}=n.findIndex(e),o=n.maybeChild(s),{index:c,offset:f}=n.findIndex(t);if(l==e||o.isText){if(f!=t&&!n.child(c).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(s!=c)throw new RangeError("Removing non-flat range");return n.replaceChild(s,o.copy(Jx(o.content,e-l-1,t-l-1)))}function Xx(n,e,t,s){let{index:l,offset:o}=n.findIndex(e),c=n.maybeChild(l);if(o==e||c.isText)return s&&!s.canReplace(l,l,t)?null:n.cut(0,e).append(t).append(n.cut(e));let f=Xx(c.content,e-o-1,t,c);return f&&n.replaceChild(l,c.copy(f))}function EE(n,e,t){if(t.openStart>n.depth)throw new Ec("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Ec("Inconsistent open depths");return Qx(n,e,t,0)}function Qx(n,e,t,s){let l=n.index(s),o=n.node(s);if(l==e.index(s)&&s<n.depth-t.openStart){let c=Qx(n,e,t,s+1);return o.copy(o.content.replaceChild(l,c))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==s&&e.depth==s){let c=n.parent,f=c.content;return Xs(c,f.cut(0,n.parentOffset).append(t.content).append(f.cut(e.parentOffset)))}else{let{start:c,end:f}=ME(t,n);return Xs(o,Wx(n,c,f,e,s))}else return Xs(o,Mc(n,e,s))}function Zx(n,e){if(!e.type.compatibleContent(n.type))throw new Ec("Cannot join "+e.type.name+" onto "+n.type.name)}function Dh(n,e,t){let s=n.node(t);return Zx(s,e.node(t)),s}function Js(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function po(n,e,t,s){let l=(e||n).node(t),o=0,c=e?e.index(t):l.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(Js(n.nodeAfter,s),o++));for(let f=o;f<c;f++)Js(l.child(f),s);e&&e.depth==t&&e.textOffset&&Js(e.nodeBefore,s)}function Xs(n,e){return n.type.checkContent(e),n.copy(e)}function Wx(n,e,t,s,l){let o=n.depth>l&&Dh(n,e,l+1),c=s.depth>l&&Dh(t,s,l+1),f=[];return po(null,n,l,f),o&&c&&e.index(l)==t.index(l)?(Zx(o,c),Js(Xs(o,Wx(n,e,t,s,l+1)),f)):(o&&Js(Xs(o,Mc(n,e,l+1)),f),po(e,t,l,f),c&&Js(Xs(c,Mc(t,s,l+1)),f)),po(s,null,l,f),new Z(f)}function Mc(n,e,t){let s=[];if(po(null,n,t,s),n.depth>t){let l=Dh(n,e,t+1);Js(Xs(l,Mc(n,e,t+1)),s)}return po(e,null,t,s),new Z(s)}function ME(n,e){let t=e.depth-n.openStart,l=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)l=e.node(o).copy(Z.from(l));return{start:l.resolveNoCache(n.openStart+t),end:l.resolveNoCache(l.content.size-n.openEnd-t)}}class Eo{constructor(e,t,s){this.pos=e,this.path=t,this.parentOffset=s,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let s=this.pos-this.path[this.path.length-1],l=e.child(t);return s?e.child(t).cut(s):l}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let s=this.path[t*3],l=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)l+=s.child(o).nodeSize;return l}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return We.none;if(this.textOffset)return e.child(t).marks;let s=e.maybeChild(t-1),l=e.maybeChild(t);if(!s){let f=s;s=l,l=f}let o=s.marks;for(var c=0;c<o.length;c++)o[c].type.spec.inclusive===!1&&(!l||!o[c].isInSet(l.marks))&&(o=o[c--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let s=t.marks,l=e.parent.maybeChild(e.index());for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!l||!s[o].isInSet(l.marks))&&(s=s[o--].removeFromSet(s));return s}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let s=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);s>=0;s--)if(e.pos<=this.end(s)&&(!t||t(this.node(s))))return new Cc(this,e,s);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let s=[],l=0,o=t;for(let c=e;;){let{index:f,offset:d}=c.content.findIndex(o),h=o-d;if(s.push(c,f,l+d),!h||(c=c.child(f),c.isText))break;o=h-1,l+=d+1}return new Eo(t,s,o)}static resolveCached(e,t){let s=lb.get(e);if(s)for(let o=0;o<s.elts.length;o++){let c=s.elts[o];if(c.pos==t)return c}else lb.set(e,s=new CE);let l=s.elts[s.i]=Eo.resolve(e,t);return s.i=(s.i+1)%wE,l}}class CE{constructor(){this.elts=[],this.i=0}}const wE=12,lb=new WeakMap;class Cc{constructor(e,t,s){this.$from=e,this.$to=t,this.depth=s}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const NE=Object.create(null);let ds=class jh{constructor(e,t,s,l=We.none){this.type=e,this.attrs=t,this.marks=l,this.content=s||Z.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,s,l=0){this.content.nodesBetween(e,t,s,l,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,s,l){return this.content.textBetween(e,t,s,l)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,s){return this.type==e&&Tc(this.attrs,t||e.defaultAttrs||NE)&&We.sameSet(this.marks,s||We.none)}copy(e=null){return e==this.content?this:new jh(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new jh(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,s=!1){if(e==t)return ae.empty;let l=this.resolve(e),o=this.resolve(t),c=s?0:l.sharedDepth(t),f=l.start(c),h=l.node(c).content.cut(l.pos-f,o.pos-f);return new ae(h,l.depth-c,o.depth-c)}replace(e,t,s){return EE(this.resolve(e),this.resolve(t),s)}nodeAt(e){for(let t=this;;){let{index:s,offset:l}=t.content.findIndex(e);if(t=t.maybeChild(s),!t)return null;if(l==e||t.isText)return t;e-=l+1}}childAfter(e){let{index:t,offset:s}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:s}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:s}=this.content.findIndex(e);if(s<e)return{node:this.content.child(t),index:t,offset:s};let l=this.content.child(t-1);return{node:l,index:t-1,offset:s-l.nodeSize}}resolve(e){return Eo.resolveCached(this,e)}resolveNoCache(e){return Eo.resolve(this,e)}rangeHasMark(e,t,s){let l=!1;return t>e&&this.nodesBetween(e,t,o=>(s.isInSet(o.marks)&&(l=!0),!l)),l}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),e1(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,s=Z.empty,l=0,o=s.childCount){let c=this.contentMatchAt(e).matchFragment(s,l,o),f=c&&c.matchFragment(this.content,t);if(!f||!f.validEnd)return!1;for(let d=l;d<o;d++)if(!this.type.allowsMarks(s.child(d).marks))return!1;return!0}canReplaceWith(e,t,s,l){if(l&&!this.type.allowsMarks(l))return!1;let o=this.contentMatchAt(e).matchType(s),c=o&&o.matchFragment(this.content,t);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=We.none;for(let t=0;t<this.marks.length;t++){let s=this.marks[t];s.type.checkAttrs(s.attrs),e=s.addToSet(e)}if(!We.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let s;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");s=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,s)}let l=Z.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,l,s);return o.type.checkAttrs(o.attrs),o}};ds.prototype.text=void 0;class wc extends ds{constructor(e,t,s,l){if(super(e,t,null,l),!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):e1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new wc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new wc(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function e1(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class ei{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let s=new AE(e,t);if(s.next==null)return ei.empty;let l=t1(s);s.next&&s.err("Unexpected trailing text");let o=_E(LE(l));return BE(o,s),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,s=e.childCount){let l=this;for(let o=t;l&&o<s;o++)l=l.matchType(e.child(o).type);return l}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let s=0;s<e.next.length;s++)if(this.next[t].type==e.next[s].type)return!0;return!1}fillBefore(e,t=!1,s=0){let l=[this];function o(c,f){let d=c.matchFragment(e,s);if(d&&(!t||d.validEnd))return Z.from(f.map(h=>h.createAndFill()));for(let h=0;h<c.next.length;h++){let{type:m,next:y}=c.next[h];if(!(m.isText||m.hasRequiredAttrs())&&l.indexOf(y)==-1){l.push(y);let x=o(y,f.concat(m));if(x)return x}}return null}return o(this,[])}findWrapping(e){for(let s=0;s<this.wrapCache.length;s+=2)if(this.wrapCache[s]==e)return this.wrapCache[s+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),s=[{match:this,type:null,via:null}];for(;s.length;){let l=s.shift(),o=l.match;if(o.matchType(e)){let c=[];for(let f=l;f.type;f=f.via)c.push(f.type);return c.reverse()}for(let c=0;c<o.next.length;c++){let{type:f,next:d}=o.next[c];!f.isLeaf&&!f.hasRequiredAttrs()&&!(f.name in t)&&(!l.type||d.validEnd)&&(s.push({match:f.contentMatch,type:f,via:l}),t[f.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(s){e.push(s);for(let l=0;l<s.next.length;l++)e.indexOf(s.next[l].next)==-1&&t(s.next[l].next)}return t(this),e.map((s,l)=>{let o=l+(s.validEnd?"*":" ")+" ";for(let c=0;c<s.next.length;c++)o+=(c?", ":"")+s.next[c].type.name+"->"+e.indexOf(s.next[c].next);return o}).join(`
`)}}ei.empty=new ei(!0);class AE{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function t1(n){let e=[];do e.push(OE(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function OE(n){let e=[];do e.push(DE(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function DE(n){let e=zE(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=jE(n,e);else break;return e}function ob(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function jE(n,e){let t=ob(n),s=t;return n.eat(",")&&(n.next!="}"?s=ob(n):s=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:s,expr:e}}function RE(n,e){let t=n.nodeTypes,s=t[e];if(s)return[s];let l=[];for(let o in t){let c=t[o];c.isInGroup(e)&&l.push(c)}return l.length==0&&n.err("No node type or group '"+e+"' found"),l}function zE(n){if(n.eat("(")){let e=t1(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=RE(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function LE(n){let e=[[]];return l(o(n,0),t()),e;function t(){return e.push([])-1}function s(c,f,d){let h={term:d,to:f};return e[c].push(h),h}function l(c,f){c.forEach(d=>d.to=f)}function o(c,f){if(c.type=="choice")return c.exprs.reduce((d,h)=>d.concat(o(h,f)),[]);if(c.type=="seq")for(let d=0;;d++){let h=o(c.exprs[d],f);if(d==c.exprs.length-1)return h;l(h,f=t())}else if(c.type=="star"){let d=t();return s(f,d),l(o(c.expr,d),d),[s(d)]}else if(c.type=="plus"){let d=t();return l(o(c.expr,f),d),l(o(c.expr,d),d),[s(d)]}else{if(c.type=="opt")return[s(f)].concat(o(c.expr,f));if(c.type=="range"){let d=f;for(let h=0;h<c.min;h++){let m=t();l(o(c.expr,d),m),d=m}if(c.max==-1)l(o(c.expr,d),d);else for(let h=c.min;h<c.max;h++){let m=t();s(d,m),l(o(c.expr,d),m),d=m}return[s(d)]}else{if(c.type=="name")return[s(f,void 0,c.value)];throw new Error("Unknown expr type")}}}}function n1(n,e){return e-n}function ab(n,e){let t=[];return s(e),t.sort(n1);function s(l){let o=n[l];if(o.length==1&&!o[0].term)return s(o[0].to);t.push(l);for(let c=0;c<o.length;c++){let{term:f,to:d}=o[c];!f&&t.indexOf(d)==-1&&s(d)}}}function _E(n){let e=Object.create(null);return t(ab(n,0));function t(s){let l=[];s.forEach(c=>{n[c].forEach(({term:f,to:d})=>{if(!f)return;let h;for(let m=0;m<l.length;m++)l[m][0]==f&&(h=l[m][1]);ab(n,d).forEach(m=>{h||l.push([f,h=[]]),h.indexOf(m)==-1&&h.push(m)})})});let o=e[s.join(",")]=new ei(s.indexOf(n.length-1)>-1);for(let c=0;c<l.length;c++){let f=l[c][1].sort(n1);o.next.push({type:l[c][0],next:e[f.join(",")]||t(f)})}return o}}function BE(n,e){for(let t=0,s=[n];t<s.length;t++){let l=s[t],o=!l.validEnd,c=[];for(let f=0;f<l.next.length;f++){let{type:d,next:h}=l.next[f];c.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),s.indexOf(h)==-1&&s.push(h)}o&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function r1(n){let e=Object.create(null);for(let t in n){let s=n[t];if(!s.hasDefault)return null;e[t]=s.default}return e}function s1(n,e){let t=Object.create(null);for(let s in n){let l=e&&e[s];if(l===void 0){let o=n[s];if(o.hasDefault)l=o.default;else throw new RangeError("No value supplied for attribute "+s)}t[s]=l}return t}function i1(n,e,t,s){for(let l in e)if(!(l in n))throw new RangeError(`Unsupported attribute ${l} for ${t} of type ${l}`);for(let l in n){let o=n[l];o.validate&&o.validate(e[l])}}function l1(n,e){let t=Object.create(null);if(e)for(let s in e)t[s]=new UE(n,s,e[s]);return t}let cb=class o1{constructor(e,t,s){this.name=e,this.schema=t,this.spec=s,this.markSet=null,this.groups=s.group?s.group.split(" "):[],this.attrs=l1(e,s.attrs),this.defaultAttrs=r1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(s.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ei.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:s1(this.attrs,e)}create(e=null,t,s){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ds(this,this.computeAttrs(e),Z.from(t),We.setFrom(s))}createChecked(e=null,t,s){return t=Z.from(t),this.checkContent(t),new ds(this,this.computeAttrs(e),t,We.setFrom(s))}createAndFill(e=null,t,s){if(e=this.computeAttrs(e),t=Z.from(t),t.size){let c=this.contentMatch.fillBefore(t);if(!c)return null;t=c.append(t)}let l=this.contentMatch.matchFragment(t),o=l&&l.fillBefore(Z.empty,!0);return o?new ds(this,e,t.append(o),We.setFrom(s)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let s=0;s<e.childCount;s++)if(!this.allowsMarks(e.child(s).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){i1(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let s=0;s<e.length;s++)this.allowsMarkType(e[s].type)?t&&t.push(e[s]):t||(t=e.slice(0,s));return t?t.length?t:We.none:e}static compile(e,t){let s=Object.create(null);e.forEach((o,c)=>s[o]=new o1(o,t,c));let l=t.spec.topNode||"doc";if(!s[l])throw new RangeError("Schema is missing its top node type ('"+l+"')");if(!s.text)throw new RangeError("Every schema needs a 'text' type");for(let o in s.text.attrs)throw new RangeError("The text node type should not have attributes");return s}};function HE(n,e,t){let s=t.split("|");return l=>{let o=l===null?"null":typeof l;if(s.indexOf(o)<0)throw new RangeError(`Expected value of type ${s} for attribute ${e} on type ${n}, got ${o}`)}}class UE{constructor(e,t,s){this.hasDefault=Object.prototype.hasOwnProperty.call(s,"default"),this.default=s.default,this.validate=typeof s.validate=="string"?HE(e,t,s.validate):s.validate}get isRequired(){return!this.hasDefault}}class hu{constructor(e,t,s,l){this.name=e,this.rank=t,this.schema=s,this.spec=l,this.attrs=l1(e,l.attrs),this.excluded=null;let o=r1(this.attrs);this.instance=o?new We(this,o):null}create(e=null){return!e&&this.instance?this.instance:new We(this,s1(this.attrs,e))}static compile(e,t){let s=Object.create(null),l=0;return e.forEach((o,c)=>s[o]=new hu(o,l++,t,c)),s}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){i1(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class a1{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let l in e)t[l]=e[l];t.nodes=Ht.from(e.nodes),t.marks=Ht.from(e.marks||{}),this.nodes=cb.compile(this.spec.nodes,this),this.marks=hu.compile(this.spec.marks,this);let s=Object.create(null);for(let l in this.nodes){if(l in this.marks)throw new RangeError(l+" can not be both a node and a mark");let o=this.nodes[l],c=o.spec.content||"",f=o.spec.marks;if(o.contentMatch=s[c]||(s[c]=ei.parse(c,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=f=="_"?null:f?ub(this,f.split(" ")):f==""||!o.inlineContent?[]:null}for(let l in this.marks){let o=this.marks[l],c=o.spec.excludes;o.excluded=c==null?[o]:c==""?[]:ub(this,c.split(" "))}this.nodeFromJSON=l=>ds.fromJSON(this,l),this.markFromJSON=l=>We.fromJSON(this,l),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,s,l){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof cb){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,s,l)}text(e,t){let s=this.nodes.text;return new wc(s,s.defaultAttrs,e,We.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function ub(n,e){let t=[];for(let s=0;s<e.length;s++){let l=e[s],o=n.marks[l],c=o;if(o)t.push(o);else for(let f in n.marks){let d=n.marks[f];(l=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(l)>-1)&&t.push(c=d)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[s]+"'")}return t}function IE(n){return n.tag!=null}function qE(n){return n.style!=null}class hs{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let s=this.matchedStyles=[];t.forEach(l=>{if(IE(l))this.tags.push(l);else if(qE(l)){let o=/[^=]*/.exec(l.style)[0];s.indexOf(o)<0&&s.push(o),this.styles.push(l)}}),this.normalizeLists=!this.tags.some(l=>{if(!/^(ul|ol)\b/.test(l.tag)||!l.node)return!1;let o=e.nodes[l.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let s=new db(this,t,!1);return s.addAll(e,We.none,t.from,t.to),s.finish()}parseSlice(e,t={}){let s=new db(this,t,!0);return s.addAll(e,We.none,t.from,t.to),ae.maxOpen(s.finish())}matchTag(e,t,s){for(let l=s?this.tags.indexOf(s)+1:0;l<this.tags.length;l++){let o=this.tags[l];if(GE(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let c=o.getAttrs(e);if(c===!1)continue;o.attrs=c||void 0}return o}}}matchStyle(e,t,s,l){for(let o=l?this.styles.indexOf(l)+1:0;o<this.styles.length;o++){let c=this.styles[o],f=c.style;if(!(f.indexOf(e)!=0||c.context&&!s.matchesContext(c.context)||f.length>e.length&&(f.charCodeAt(e.length)!=61||f.slice(e.length+1)!=t))){if(c.getAttrs){let d=c.getAttrs(t);if(d===!1)continue;c.attrs=d||void 0}return c}}}static schemaRules(e){let t=[];function s(l){let o=l.priority==null?50:l.priority,c=0;for(;c<t.length;c++){let f=t[c];if((f.priority==null?50:f.priority)<o)break}t.splice(c,0,l)}for(let l in e.marks){let o=e.marks[l].spec.parseDOM;o&&o.forEach(c=>{s(c=hb(c)),c.mark||c.ignore||c.clearMark||(c.mark=l)})}for(let l in e.nodes){let o=e.nodes[l].spec.parseDOM;o&&o.forEach(c=>{s(c=hb(c)),c.node||c.ignore||c.mark||(c.node=l)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new hs(e,hs.schemaRules(e)))}}const c1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},VE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},u1={ol:!0,ul:!0},Mo=1,Rh=2,mo=4;function fb(n,e,t){return e!=null?(e?Mo:0)|(e==="full"?Rh:0):n&&n.whitespace=="pre"?Mo|Rh:t&~mo}class sc{constructor(e,t,s,l,o,c){this.type=e,this.attrs=t,this.marks=s,this.solid=l,this.options=c,this.content=[],this.activeMarks=We.none,this.match=o||(c&mo?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Z.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let s=this.type.contentMatch,l;return(l=s.findWrapping(e.type))?(this.match=s,l):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Mo)){let s=this.content[this.content.length-1],l;if(s&&s.isText&&(l=/[ \t\r\n\u000c]+$/.exec(s.text))){let o=s;s.text.length==l[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-l[0].length))}}let t=Z.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Z.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!c1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class db{constructor(e,t,s){this.parser=e,this.options=t,this.isOpen=s,this.open=0,this.localPreserveWS=!1;let l=t.topNode,o,c=fb(null,t.preserveWhitespace,0)|(s?mo:0);l?o=new sc(l.type,l.attrs,We.none,!0,t.topMatch||l.type.contentMatch,c):s?o=new sc(null,null,We.none,!0,null,c):o=new sc(e.schema.topNodeType,null,We.none,!0,null,c),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let s=e.nodeValue,l=this.top,o=l.options&Rh?"full":this.localPreserveWS||(l.options&Mo)>0,{schema:c}=this.parser;if(o==="full"||l.inlineContext(e)||/[^ \t\r\n\u000c]/.test(s)){if(o)if(o==="full")s=s.replace(/\r\n?/g,`
`);else if(c.linebreakReplacement&&/[\r\n]/.test(s)&&this.top.findWrapping(c.linebreakReplacement.create())){let f=s.split(/\r?\n|\r/);for(let d=0;d<f.length;d++)d&&this.insertNode(c.linebreakReplacement.create(),t,!0),f[d]&&this.insertNode(c.text(f[d]),t,!/\S/.test(f[d]));s=""}else s=s.replace(/\r?\n|\r/g," ");else if(s=s.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(s)&&this.open==this.nodes.length-1){let f=l.content[l.content.length-1],d=e.previousSibling;(!f||d&&d.nodeName=="BR"||f.isText&&/[ \t\r\n\u000c]$/.test(f.text))&&(s=s.slice(1))}s&&this.insertNode(c.text(s),t,!/\S/.test(s)),this.findInText(e)}else this.findInside(e)}addElement(e,t,s){let l=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),f;u1.hasOwnProperty(c)&&this.parser.normalizeLists&&$E(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(f=this.parser.matchTag(e,this,s));e:if(d?d.ignore:VE.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let h,m=this.needsBlock;if(c1.hasOwnProperty(c))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=d&&d.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),h&&this.sync(o),this.needsBlock=m}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,d,h,d.consuming===!1?f:void 0)}this.localPreserveWS=l}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let s=e.style;if(s&&s.length)for(let l=0;l<this.parser.matchedStyles.length;l++){let o=this.parser.matchedStyles[l],c=s.getPropertyValue(o);if(c)for(let f=void 0;;){let d=this.parser.matchStyle(o,c,this,f);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(h=>!d.clearMark(h)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)f=d;else break}}return t}addElementByRule(e,t,s,l){let o,c;if(t.node)if(c=this.parser.schema.nodes[t.node],c.isLeaf)this.insertNode(c.create(t.attrs),s,e.nodeName=="BR")||this.leafFallback(e,s);else{let d=this.enter(c,t.attrs||null,s,t.preserveWhitespace);d&&(o=!0,s=d)}else{let d=this.parser.schema.marks[t.mark];s=s.concat(d.create(t.attrs))}let f=this.top;if(c&&c.isLeaf)this.findInside(e);else if(l)this.addElement(e,s,l);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,s,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,s),this.findAround(e,d,!1)}o&&this.sync(f)&&this.open--}addAll(e,t,s,l){let o=s||0;for(let c=s?e.childNodes[s]:e.firstChild,f=l==null?null:e.childNodes[l];c!=f;c=c.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(c,t);this.findAtPoint(e,o)}findPlace(e,t,s){let l,o;for(let c=this.open,f=0;c>=0;c--){let d=this.nodes[c],h=d.findWrapping(e);if(h&&(!l||l.length>h.length+f)&&(l=h,o=d,!h.length))break;if(d.solid){if(s)break;f+=2}}if(!l)return null;this.sync(o);for(let c=0;c<l.length;c++)t=this.enterInner(l[c],null,t,!1);return t}insertNode(e,t,s){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let l=this.findPlace(e,t,s);if(l){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let c=We.none;for(let f of l.concat(e.marks))(o.type?o.type.allowsMarkType(f.type):pb(f.type,e.type))&&(c=f.addToSet(c));return o.content.push(e.mark(c)),!0}return!1}enter(e,t,s,l){let o=this.findPlace(e.create(t),s,!1);return o&&(o=this.enterInner(e,t,s,!0,l)),o}enterInner(e,t,s,l=!1,o){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let f=fb(e,o,c.options);c.options&mo&&c.content.length==0&&(f|=mo);let d=We.none;return s=s.filter(h=>(c.type?c.type.allowsMarkType(h.type):pb(h.type,e))?(d=h.addToSet(d),!1):!0),this.nodes.push(new sc(e,t,d,l,null,f)),this.open++,s}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Mo)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let s=this.nodes[t].content;for(let l=s.length-1;l>=0;l--)e+=s[l].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==e&&this.find[s].offset==t&&(this.find[s].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,s){if(e!=t&&this.find)for(let l=0;l<this.find.length;l++)this.find[l].pos==null&&e.nodeType==1&&e.contains(this.find[l].node)&&t.compareDocumentPosition(this.find[l].node)&(s?2:4)&&(this.find[l].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),s=this.options.context,l=!this.isOpen&&(!s||s.parent.type==this.nodes[0].type),o=-(s?s.depth+1:0)+(l?0:1),c=(f,d)=>{for(;f>=0;f--){let h=t[f];if(h==""){if(f==t.length-1||f==0)continue;for(;d>=o;d--)if(c(f-1,d))return!0;return!1}else{let m=d>0||d==0&&l?this.nodes[d].type:s&&d>=o?s.node(d-o).type:null;if(!m||m.name!=h&&!m.isInGroup(h))return!1;d--}}return!0};return c(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(s&&s.isTextblock&&s.defaultAttrs)return s}for(let t in this.parser.schema.nodes){let s=this.parser.schema.nodes[t];if(s.isTextblock&&s.defaultAttrs)return s}}}function $E(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let s=e.nodeType==1?e.nodeName.toLowerCase():null;s&&u1.hasOwnProperty(s)&&t?(t.appendChild(e),e=t):s=="li"?t=e:s&&(t=null)}}function GE(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function hb(n){let e={};for(let t in n)e[t]=n[t];return e}function pb(n,e){let t=e.schema.nodes;for(let s in t){let l=t[s];if(!l.allowsMarkType(n))continue;let o=[],c=f=>{o.push(f);for(let d=0;d<f.edgeCount;d++){let{type:h,next:m}=f.edge(d);if(h==e||o.indexOf(m)<0&&c(m))return!0}};if(c(l.contentMatch))return!0}}class ii{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},s){s||(s=th(t).createDocumentFragment());let l=s,o=[];return e.forEach(c=>{if(o.length||c.marks.length){let f=0,d=0;for(;f<o.length&&d<c.marks.length;){let h=c.marks[d];if(!this.marks[h.type.name]){d++;continue}if(!h.eq(o[f][0])||h.type.spec.spanning===!1)break;f++,d++}for(;f<o.length;)l=o.pop()[1];for(;d<c.marks.length;){let h=c.marks[d++],m=this.serializeMark(h,c.isInline,t);m&&(o.push([h,l]),l.appendChild(m.dom),l=m.contentDOM||m.dom)}}l.appendChild(this.serializeNodeInner(c,t))}),s}serializeNodeInner(e,t){let{dom:s,contentDOM:l}=gc(th(t),this.nodes[e.type.name](e),null,e.attrs);if(l){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,l)}return s}serializeNode(e,t={}){let s=this.serializeNodeInner(e,t);for(let l=e.marks.length-1;l>=0;l--){let o=this.serializeMark(e.marks[l],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(s),s=o.dom)}return s}serializeMark(e,t,s={}){let l=this.marks[e.type.name];return l&&gc(th(s),l(e,t),null,e.attrs)}static renderSpec(e,t,s=null,l){return gc(e,t,s,l)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ii(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=mb(e.nodes);return t.text||(t.text=s=>s.text),t}static marksFromSchema(e){return mb(e.marks)}}function mb(n){let e={};for(let t in n){let s=n[t].spec.toDOM;s&&(e[t]=s)}return e}function th(n){return n.document||window.document}const gb=new WeakMap;function YE(n){let e=gb.get(n);return e===void 0&&gb.set(n,e=KE(n)),e}function KE(n){let e=null;function t(s){if(s&&typeof s=="object")if(Array.isArray(s))if(typeof s[0]=="string")e||(e=[]),e.push(s);else for(let l=0;l<s.length;l++)t(s[l]);else for(let l in s)t(s[l])}return t(n),e}function gc(n,e,t,s){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let l=e[0],o;if(typeof l!="string")throw new RangeError("Invalid array passed to renderSpec");if(s&&(o=YE(s))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=l.indexOf(" ");c>0&&(t=l.slice(0,c),l=l.slice(c+1));let f,d=t?n.createElementNS(t,l):n.createElement(l),h=e[1],m=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){m=2;for(let y in h)if(h[y]!=null){let x=y.indexOf(" ");x>0?d.setAttributeNS(y.slice(0,x),y.slice(x+1),h[y]):y=="style"&&d.style?d.style.cssText=h[y]:d.setAttribute(y,h[y])}}for(let y=m;y<e.length;y++){let x=e[y];if(x===0){if(y<e.length-1||y>m)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:v,contentDOM:k}=gc(n,x,t,s);if(d.appendChild(v),k){if(f)throw new RangeError("Multiple content holes");f=k}}}return{dom:d,contentDOM:f}}const f1=65535,d1=Math.pow(2,16);function PE(n,e){return n+e*d1}function yb(n){return n&f1}function FE(n){return(n-(n&f1))/d1}const h1=1,p1=2,yc=4,m1=8;class zh{constructor(e,t,s){this.pos=e,this.delInfo=t,this.recover=s}get deleted(){return(this.delInfo&m1)>0}get deletedBefore(){return(this.delInfo&(h1|yc))>0}get deletedAfter(){return(this.delInfo&(p1|yc))>0}get deletedAcross(){return(this.delInfo&yc)>0}}class xn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&xn.empty)return xn.empty}recover(e){let t=0,s=yb(e);if(!this.inverted)for(let l=0;l<s;l++)t+=this.ranges[l*3+2]-this.ranges[l*3+1];return this.ranges[s*3]+t+FE(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,s){let l=0,o=this.inverted?2:1,c=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?l:0);if(d>e)break;let h=this.ranges[f+o],m=this.ranges[f+c],y=d+h;if(e<=y){let x=h?e==d?-1:e==y?1:t:t,v=d+l+(x<0?0:m);if(s)return v;let k=e==(t<0?d:y)?null:PE(f/3,e-d),E=e==d?p1:e==y?h1:yc;return(t<0?e!=d:e!=y)&&(E|=m1),new zh(v,E,k)}l+=m-h}return s?e+l:new zh(e+l,0,null)}touches(e,t){let s=0,l=yb(t),o=this.inverted?2:1,c=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?s:0);if(d>e)break;let h=this.ranges[f+o],m=d+h;if(e<=m&&f==l*3)return!0;s+=this.ranges[f+c]-h}return!1}forEach(e){let t=this.inverted?2:1,s=this.inverted?1:2;for(let l=0,o=0;l<this.ranges.length;l+=3){let c=this.ranges[l],f=c-(this.inverted?o:0),d=c+(this.inverted?0:o),h=this.ranges[l+t],m=this.ranges[l+s];e(f,f+h,d,d+m),o+=m-h}}invert(){return new xn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?xn.empty:new xn(e<0?[0,-e,0]:[0,0,e])}}xn.empty=new xn([]);class Co{constructor(e,t,s=0,l=e?e.length:0){this.mirror=t,this.from=s,this.to=l,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Co(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,s=this._maps.length;t<e._maps.length;t++){let l=e.getMirror(t);this.appendMap(e._maps[t],l!=null&&l<t?s+l:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,s=this._maps.length+e._maps.length;t>=0;t--){let l=e.getMirror(t);this.appendMap(e._maps[t].invert(),l!=null&&l>t?s-l-1:void 0)}}invert(){let e=new Co;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let s=this.from;s<this.to;s++)e=this._maps[s].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,s){let l=0;for(let o=this.from;o<this.to;o++){let c=this._maps[o],f=c.mapResult(e,t);if(f.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,e=this._maps[d].recover(f.recover);continue}}l|=f.delInfo,e=f.pos}return s?e:new zh(e,l,null)}}const nh=Object.create(null);class Kt{getMap(){return xn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let s=nh[t.stepType];if(!s)throw new RangeError(`No step type ${t.stepType} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in nh)throw new RangeError("Duplicate use of step JSON ID "+e);return nh[e]=t,t.prototype.jsonID=e,t}}class Tt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Tt(e,null)}static fail(e){return new Tt(null,e)}static fromReplace(e,t,s,l){try{return Tt.ok(e.replace(t,s,l))}catch(o){if(o instanceof Ec)return Tt.fail(o.message);throw o}}}function up(n,e,t){let s=[];for(let l=0;l<n.childCount;l++){let o=n.child(l);o.content.size&&(o=o.copy(up(o.content,e,o))),o.isInline&&(o=e(o,t,l)),s.push(o)}return Z.fromArray(s)}class cs extends Kt{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=e.resolve(this.from),l=s.node(s.sharedDepth(this.to)),o=new ae(up(t.content,(c,f)=>!c.isAtom||!f.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),l),t.openStart,t.openEnd);return Tt.fromReplace(e,this.from,this.to,o)}invert(){return new Vn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new cs(t.pos,s.pos,this.mark)}merge(e){return e instanceof cs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new cs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new cs(t.from,t.to,e.markFromJSON(t.mark))}}Kt.jsonID("addMark",cs);class Vn extends Kt{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=new ae(up(t.content,l=>l.mark(this.mark.removeFromSet(l.marks)),e),t.openStart,t.openEnd);return Tt.fromReplace(e,this.from,this.to,s)}invert(){return new cs(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new Vn(t.pos,s.pos,this.mark)}merge(e){return e instanceof Vn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Vn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Vn(t.from,t.to,e.markFromJSON(t.mark))}}Kt.jsonID("removeMark",Vn);class us extends Kt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Tt.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Tt.fromReplace(e,this.pos,this.pos+1,new ae(Z.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let s=this.mark.addToSet(t.marks);if(s.length==t.marks.length){for(let l=0;l<t.marks.length;l++)if(!t.marks[l].isInSet(s))return new us(this.pos,t.marks[l]);return new us(this.pos,this.mark)}}return new ti(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new us(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new us(t.pos,e.markFromJSON(t.mark))}}Kt.jsonID("addNodeMark",us);class ti extends Kt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Tt.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Tt.fromReplace(e,this.pos,this.pos+1,new ae(Z.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new us(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ti(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ti(t.pos,e.markFromJSON(t.mark))}}Kt.jsonID("removeNodeMark",ti);class Ot extends Kt{constructor(e,t,s,l=!1){super(),this.from=e,this.to=t,this.slice=s,this.structure=l}apply(e){return this.structure&&Lh(e,this.from,this.to)?Tt.fail("Structure replace would overwrite content"):Tt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new xn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ot(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deletedAcross&&s.deletedAcross?null:new Ot(t.pos,Math.max(t.pos,s.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ot)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?ae.empty:new ae(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ot(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?ae.empty:new ae(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ot(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ot(t.from,t.to,ae.fromJSON(e,t.slice),!!t.structure)}}Kt.jsonID("replace",Ot);class Dt extends Kt{constructor(e,t,s,l,o,c,f=!1){super(),this.from=e,this.to=t,this.gapFrom=s,this.gapTo=l,this.slice=o,this.insert=c,this.structure=f}apply(e){if(this.structure&&(Lh(e,this.from,this.gapFrom)||Lh(e,this.gapTo,this.to)))return Tt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Tt.fail("Gap is not a flat range");let s=this.slice.insertAt(this.insert,t.content);return s?Tt.fromReplace(e,this.from,this.to,s):Tt.fail("Content does not fit in gap")}getMap(){return new xn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Dt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1),l=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?s.pos:e.map(this.gapTo,1);return t.deletedAcross&&s.deletedAcross||l<t.pos||o>s.pos?null:new Dt(t.pos,s.pos,l,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Dt(t.from,t.to,t.gapFrom,t.gapTo,ae.fromJSON(e,t.slice),t.insert,!!t.structure)}}Kt.jsonID("replaceAround",Dt);function Lh(n,e,t){let s=n.resolve(e),l=t-e,o=s.depth;for(;l>0&&o>0&&s.indexAfter(o)==s.node(o).childCount;)o--,l--;if(l>0){let c=s.node(o).maybeChild(s.indexAfter(o));for(;l>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,l--}}return!1}function JE(n,e,t,s){let l=[],o=[],c,f;n.doc.nodesBetween(e,t,(d,h,m)=>{if(!d.isInline)return;let y=d.marks;if(!s.isInSet(y)&&m.type.allowsMarkType(s.type)){let x=Math.max(h,e),v=Math.min(h+d.nodeSize,t),k=s.addToSet(y);for(let E=0;E<y.length;E++)y[E].isInSet(k)||(c&&c.to==x&&c.mark.eq(y[E])?c.to=v:l.push(c=new Vn(x,v,y[E])));f&&f.to==x?f.to=v:o.push(f=new cs(x,v,s))}}),l.forEach(d=>n.step(d)),o.forEach(d=>n.step(d))}function XE(n,e,t,s){let l=[],o=0;n.doc.nodesBetween(e,t,(c,f)=>{if(!c.isInline)return;o++;let d=null;if(s instanceof hu){let h=c.marks,m;for(;m=s.isInSet(h);)(d||(d=[])).push(m),h=m.removeFromSet(h)}else s?s.isInSet(c.marks)&&(d=[s]):d=c.marks;if(d&&d.length){let h=Math.min(f+c.nodeSize,t);for(let m=0;m<d.length;m++){let y=d[m],x;for(let v=0;v<l.length;v++){let k=l[v];k.step==o-1&&y.eq(l[v].style)&&(x=k)}x?(x.to=h,x.step=o):l.push({style:y,from:Math.max(f,e),to:h,step:o})}}}),l.forEach(c=>n.step(new Vn(c.from,c.to,c.style)))}function fp(n,e,t,s=t.contentMatch,l=!0){let o=n.doc.nodeAt(e),c=[],f=e+1;for(let d=0;d<o.childCount;d++){let h=o.child(d),m=f+h.nodeSize,y=s.matchType(h.type);if(!y)c.push(new Ot(f,m,ae.empty));else{s=y;for(let x=0;x<h.marks.length;x++)t.allowsMarkType(h.marks[x].type)||n.step(new Vn(f,m,h.marks[x]));if(l&&h.isText&&t.whitespace!="pre"){let x,v=/\r?\n|\r/g,k;for(;x=v.exec(h.text);)k||(k=new ae(Z.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),c.push(new Ot(f+x.index,f+x.index+x[0].length,k))}}f=m}if(!s.validEnd){let d=s.fillBefore(Z.empty,!0);n.replace(f,f,new ae(d,0,0))}for(let d=c.length-1;d>=0;d--)n.step(c[d])}function QE(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function cl(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let s=n.depth,l=0,o=0;;--s){let c=n.$from.node(s),f=n.$from.index(s)+l,d=n.$to.indexAfter(s)-o;if(s<n.depth&&c.canReplace(f,d,t))return s;if(s==0||c.type.spec.isolating||!QE(c,f,d))break;f&&(l=1),d<c.childCount&&(o=1)}return null}function ZE(n,e,t){let{$from:s,$to:l,depth:o}=e,c=s.before(o+1),f=l.after(o+1),d=c,h=f,m=Z.empty,y=0;for(let k=o,E=!1;k>t;k--)E||s.index(k)>0?(E=!0,m=Z.from(s.node(k).copy(m)),y++):d--;let x=Z.empty,v=0;for(let k=o,E=!1;k>t;k--)E||l.after(k+1)<l.end(k)?(E=!0,x=Z.from(l.node(k).copy(x)),v++):h++;n.step(new Dt(d,h,c,f,new ae(m.append(x),y,v),m.size-y,!0))}function dp(n,e,t=null,s=n){let l=WE(n,e),o=l&&eM(s,e);return o?l.map(bb).concat({type:e,attrs:t}).concat(o.map(bb)):null}function bb(n){return{type:n,attrs:null}}function WE(n,e){let{parent:t,startIndex:s,endIndex:l}=n,o=t.contentMatchAt(s).findWrapping(e);if(!o)return null;let c=o.length?o[0]:e;return t.canReplaceWith(s,l,c)?o:null}function eM(n,e){let{parent:t,startIndex:s,endIndex:l}=n,o=t.child(s),c=e.contentMatch.findWrapping(o.type);if(!c)return null;let d=(c.length?c[c.length-1]:e).contentMatch;for(let h=s;d&&h<l;h++)d=d.matchType(t.child(h).type);return!d||!d.validEnd?null:c}function tM(n,e,t){let s=Z.empty;for(let c=t.length-1;c>=0;c--){if(s.size){let f=t[c].type.contentMatch.matchFragment(s);if(!f||!f.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}s=Z.from(t[c].type.create(t[c].attrs,s))}let l=e.start,o=e.end;n.step(new Dt(l,o,l,o,new ae(s,0,0),t.length,!0))}function nM(n,e,t,s,l){if(!s.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(c,f)=>{let d=typeof l=="function"?l(c):l;if(c.isTextblock&&!c.hasMarkup(s,d)&&rM(n.doc,n.mapping.slice(o).map(f),s)){let h=null;if(s.schema.linebreakReplacement){let v=s.whitespace=="pre",k=!!s.contentMatch.matchType(s.schema.linebreakReplacement);v&&!k?h=!1:!v&&k&&(h=!0)}h===!1&&y1(n,c,f,o),fp(n,n.mapping.slice(o).map(f,1),s,void 0,h===null);let m=n.mapping.slice(o),y=m.map(f,1),x=m.map(f+c.nodeSize,1);return n.step(new Dt(y,x,y+1,x-1,new ae(Z.from(s.create(d,null,c.marks)),0,0),1,!0)),h===!0&&g1(n,c,f,o),!1}})}function g1(n,e,t,s){e.forEach((l,o)=>{if(l.isText){let c,f=/\r?\n|\r/g;for(;c=f.exec(l.text);){let d=n.mapping.slice(s).map(t+1+o+c.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function y1(n,e,t,s){e.forEach((l,o)=>{if(l.type==l.type.schema.linebreakReplacement){let c=n.mapping.slice(s).map(t+1+o);n.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function rM(n,e,t){let s=n.resolve(e),l=s.index();return s.parent.canReplaceWith(l,l+1,t)}function sM(n,e,t,s,l){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let c=t.create(s,null,l||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,c);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Dt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new ae(Z.from(c),0,0),1,!0))}function Er(n,e,t=1,s){let l=n.resolve(e),o=l.depth-t,c=s&&s[s.length-1]||l.parent;if(o<0||l.parent.type.spec.isolating||!l.parent.canReplace(l.index(),l.parent.childCount)||!c.type.validContent(l.parent.content.cutByIndex(l.index(),l.parent.childCount)))return!1;for(let h=l.depth-1,m=t-2;h>o;h--,m--){let y=l.node(h),x=l.index(h);if(y.type.spec.isolating)return!1;let v=y.content.cutByIndex(x,y.childCount),k=s&&s[m+1];k&&(v=v.replaceChild(0,k.type.create(k.attrs)));let E=s&&s[m]||y;if(!y.canReplace(x+1,y.childCount)||!E.type.validContent(v))return!1}let f=l.indexAfter(o),d=s&&s[0];return l.node(o).canReplaceWith(f,f,d?d.type:l.node(o+1).type)}function iM(n,e,t=1,s){let l=n.doc.resolve(e),o=Z.empty,c=Z.empty;for(let f=l.depth,d=l.depth-t,h=t-1;f>d;f--,h--){o=Z.from(l.node(f).copy(o));let m=s&&s[h];c=Z.from(m?m.type.create(m.attrs,c):l.node(f).copy(c))}n.step(new Ot(e,e,new ae(o.append(c),t,t),!0))}function xs(n,e){let t=n.resolve(e),s=t.index();return b1(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(s,s+1)}function lM(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:s}=n.type.schema;for(let l=0;l<e.childCount;l++){let o=e.child(l),c=o.type==s?n.type.schema.nodes.text:o.type;if(t=t.matchType(c),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function b1(n,e){return!!(n&&e&&!n.isLeaf&&lM(n,e))}function pu(n,e,t=-1){let s=n.resolve(e);for(let l=s.depth;;l--){let o,c,f=s.index(l);if(l==s.depth?(o=s.nodeBefore,c=s.nodeAfter):t>0?(o=s.node(l+1),f++,c=s.node(l).maybeChild(f)):(o=s.node(l).maybeChild(f-1),c=s.node(l+1)),o&&!o.isTextblock&&b1(o,c)&&s.node(l).canReplace(f,f+1))return e;if(l==0)break;e=t<0?s.before(l):s.after(l)}}function oM(n,e,t){let s=null,{linebreakReplacement:l}=n.doc.type.schema,o=n.doc.resolve(e-t),c=o.node().type;if(l&&c.inlineContent){let m=c.whitespace=="pre",y=!!c.contentMatch.matchType(l);m&&!y?s=!1:!m&&y&&(s=!0)}let f=n.steps.length;if(s===!1){let m=n.doc.resolve(e+t);y1(n,m.node(),m.before(),f)}c.inlineContent&&fp(n,e+t-1,c,o.node().contentMatchAt(o.index()),s==null);let d=n.mapping.slice(f),h=d.map(e-t);if(n.step(new Ot(h,d.map(e+t,-1),ae.empty,!0)),s===!0){let m=n.doc.resolve(h);g1(n,m.node(),m.before(),n.steps.length)}return n}function aM(n,e,t){let s=n.resolve(e);if(s.parent.canReplaceWith(s.index(),s.index(),t))return e;if(s.parentOffset==0)for(let l=s.depth-1;l>=0;l--){let o=s.index(l);if(s.node(l).canReplaceWith(o,o,t))return s.before(l+1);if(o>0)return null}if(s.parentOffset==s.parent.content.size)for(let l=s.depth-1;l>=0;l--){let o=s.indexAfter(l);if(s.node(l).canReplaceWith(o,o,t))return s.after(l+1);if(o<s.node(l).childCount)return null}return null}function x1(n,e,t){let s=n.resolve(e);if(!t.content.size)return e;let l=t.content;for(let o=0;o<t.openStart;o++)l=l.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let c=s.depth;c>=0;c--){let f=c==s.depth?0:s.pos<=(s.start(c+1)+s.end(c+1))/2?-1:1,d=s.index(c)+(f>0?1:0),h=s.node(c),m=!1;if(o==1)m=h.canReplace(d,d,l);else{let y=h.contentMatchAt(d).findWrapping(l.firstChild.type);m=y&&h.canReplaceWith(d,d,y[0])}if(m)return f==0?s.pos:f<0?s.before(c+1):s.after(c+1)}return null}function mu(n,e,t=e,s=ae.empty){if(e==t&&!s.size)return null;let l=n.resolve(e),o=n.resolve(t);return v1(l,o,s)?new Ot(e,t,s):new cM(l,o,s).fit()}function v1(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class cM{constructor(e,t,s){this.$from=e,this.$to=t,this.unplaced=s,this.frontier=[],this.placed=Z.empty;for(let l=0;l<=e.depth;l++){let o=e.node(l);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(l))})}for(let l=e.depth;l>0;l--)this.placed=Z.from(e.node(l).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,s=this.$from,l=this.close(e<0?this.$to:s.doc.resolve(e));if(!l)return null;let o=this.placed,c=s.depth,f=l.depth;for(;c&&f&&o.childCount==1;)o=o.firstChild.content,c--,f--;let d=new ae(o,c,f);return e>-1?new Dt(s.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||s.pos!=this.$to.pos?new Ot(s.pos,l.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,s=0,l=this.unplaced.openEnd;s<e;s++){let o=t.firstChild;if(t.childCount>1&&(l=0),o.type.spec.isolating&&l<=s){e=s;break}t=o.content}for(let t=1;t<=2;t++)for(let s=t==1?e:this.unplaced.openStart;s>=0;s--){let l,o=null;s?(o=rh(this.unplaced.content,s-1).firstChild,l=o.content):l=this.unplaced.content;let c=l.firstChild;for(let f=this.depth;f>=0;f--){let{type:d,match:h}=this.frontier[f],m,y=null;if(t==1&&(c?h.matchType(c.type)||(y=h.fillBefore(Z.from(c),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:s,frontierDepth:f,parent:o,inject:y};if(t==2&&c&&(m=h.findWrapping(c.type)))return{sliceDepth:s,frontierDepth:f,parent:o,wrap:m};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:s}=this.unplaced,l=rh(e,t);return!l.childCount||l.firstChild.isLeaf?!1:(this.unplaced=new ae(e,t+1,Math.max(s,l.size+t>=e.size-s?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:s}=this.unplaced,l=rh(e,t);if(l.childCount<=1&&t>0){let o=e.size-t<=t+l.size;this.unplaced=new ae(ao(e,t-1,1),t-1,o?t-1:s)}else this.unplaced=new ae(ao(e,t,1),t,s)}placeNodes({sliceDepth:e,frontierDepth:t,parent:s,inject:l,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let E=0;E<o.length;E++)this.openFrontierNode(o[E]);let c=this.unplaced,f=s?s.content:c.content,d=c.openStart-e,h=0,m=[],{match:y,type:x}=this.frontier[t];if(l){for(let E=0;E<l.childCount;E++)m.push(l.child(E));y=y.matchFragment(l)}let v=f.size+e-(c.content.size-c.openEnd);for(;h<f.childCount;){let E=f.child(h),M=y.matchType(E.type);if(!M)break;h++,(h>1||d==0||E.content.size)&&(y=M,m.push(S1(E.mark(x.allowedMarks(E.marks)),h==1?d:0,h==f.childCount?v:-1)))}let k=h==f.childCount;k||(v=-1),this.placed=co(this.placed,t,Z.from(m)),this.frontier[t].match=y,k&&v<0&&s&&s.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,M=f;E<v;E++){let C=M.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),M=C.content}this.unplaced=k?e==0?ae.empty:new ae(ao(c.content,e-1,1),e-1,v<0?c.openEnd:e-1):new ae(ao(c.content,e,h),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!sh(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:s}=this.$to,l=this.$to.after(s);for(;s>1&&l==this.$to.end(--s);)++l;return l}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:s,type:l}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),c=sh(e,t,l,s,o);if(c){for(let f=t-1;f>=0;f--){let{match:d,type:h}=this.frontier[f],m=sh(e,f,h,d,!0);if(!m||m.childCount)continue e}return{depth:t,fit:c,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=co(this.placed,t.depth,t.fit)),e=t.move;for(let s=t.depth+1;s<=e.depth;s++){let l=e.node(s),o=l.type.contentMatch.fillBefore(l.content,!0,e.index(s));this.openFrontierNode(l.type,l.attrs,o)}return e}openFrontierNode(e,t=null,s){let l=this.frontier[this.depth];l.match=l.match.matchType(e),this.placed=co(this.placed,this.depth,Z.from(e.create(t,s))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Z.empty,!0);t.childCount&&(this.placed=co(this.placed,this.frontier.length,t))}}function ao(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(ao(n.firstChild.content,e-1,t)))}function co(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(co(n.lastChild.content,e-1,t)))}function rh(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function S1(n,e,t){if(e<=0)return n;let s=n.content;return e>1&&(s=s.replaceChild(0,S1(s.firstChild,e-1,s.childCount==1?t-1:0))),e>0&&(s=n.type.contentMatch.fillBefore(s).append(s),t<=0&&(s=s.append(n.type.contentMatch.matchFragment(s).fillBefore(Z.empty,!0)))),n.copy(s)}function sh(n,e,t,s,l){let o=n.node(e),c=l?n.indexAfter(e):n.index(e);if(c==o.childCount&&!t.compatibleContent(o.type))return null;let f=s.fillBefore(o.content,!0,c);return f&&!uM(t,o.content,c)?f:null}function uM(n,e,t){for(let s=t;s<e.childCount;s++)if(!n.allowsMarks(e.child(s).marks))return!0;return!1}function fM(n){return n.spec.defining||n.spec.definingForContent}function dM(n,e,t,s){if(!s.size)return n.deleteRange(e,t);let l=n.doc.resolve(e),o=n.doc.resolve(t);if(v1(l,o,s))return n.step(new Ot(e,t,s));let c=T1(l,o);c[c.length-1]==0&&c.pop();let f=-(l.depth+1);c.unshift(f);for(let x=l.depth,v=l.pos-1;x>0;x--,v--){let k=l.node(x).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;c.indexOf(x)>-1?f=x:l.before(x)==v&&c.splice(1,0,-x)}let d=c.indexOf(f),h=[],m=s.openStart;for(let x=s.content,v=0;;v++){let k=x.firstChild;if(h.push(k),v==s.openStart)break;x=k.content}for(let x=m-1;x>=0;x--){let v=h[x],k=fM(v.type);if(k&&!v.sameMarkup(l.node(Math.abs(f)-1)))m=x;else if(k||!v.type.isTextblock)break}for(let x=s.openStart;x>=0;x--){let v=(x+m+1)%(s.openStart+1),k=h[v];if(k)for(let E=0;E<c.length;E++){let M=c[(E+d)%c.length],C=!0;M<0&&(C=!1,M=-M);let L=l.node(M-1),$=l.index(M-1);if(L.canReplaceWith($,$,k.type,k.marks))return n.replace(l.before(M),C?o.after(M):t,new ae(k1(s.content,0,s.openStart,v),v,s.openEnd))}}let y=n.steps.length;for(let x=c.length-1;x>=0&&(n.replace(e,t,s),!(n.steps.length>y));x--){let v=c[x];v<0||(e=l.before(v),t=o.after(v))}}function k1(n,e,t,s,l){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(k1(o.content,e+1,t,s,o)))}if(e>s){let o=l.contentMatchAt(0),c=o.fillBefore(n).append(n);n=c.append(o.matchFragment(c).fillBefore(Z.empty,!0))}return n}function hM(n,e,t,s){if(!s.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let l=aM(n.doc,e,s.type);l!=null&&(e=t=l)}n.replaceRange(e,t,new ae(Z.from(s),0,0))}function pM(n,e,t){let s=n.doc.resolve(e),l=n.doc.resolve(t),o=T1(s,l);for(let c=0;c<o.length;c++){let f=o[c],d=c==o.length-1;if(d&&f==0||s.node(f).type.contentMatch.validEnd)return n.delete(s.start(f),l.end(f));if(f>0&&(d||s.node(f-1).canReplace(s.index(f-1),l.indexAfter(f-1))))return n.delete(s.before(f),l.after(f))}for(let c=1;c<=s.depth&&c<=l.depth;c++)if(e-s.start(c)==s.depth-c&&t>s.end(c)&&l.end(c)-t!=l.depth-c&&s.start(c-1)==l.start(c-1)&&s.node(c-1).canReplace(s.index(c-1),l.index(c-1)))return n.delete(s.before(c),t);n.delete(e,t)}function T1(n,e){let t=[],s=Math.min(n.depth,e.depth);for(let l=s;l>=0;l--){let o=n.start(l);if(o<n.pos-(n.depth-l)||e.end(l)>e.pos+(e.depth-l)||n.node(l).type.spec.isolating||e.node(l).type.spec.isolating)break;(o==e.start(l)||l==n.depth&&l==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&l&&e.start(l-1)==o-1)&&t.push(l)}return t}class el extends Kt{constructor(e,t,s){super(),this.pos=e,this.attr=t,this.value=s}apply(e){let t=e.nodeAt(this.pos);if(!t)return Tt.fail("No node at attribute step's position");let s=Object.create(null);for(let o in t.attrs)s[o]=t.attrs[o];s[this.attr]=this.value;let l=t.type.create(s,null,t.marks);return Tt.fromReplace(e,this.pos,this.pos+1,new ae(Z.from(l),0,t.isLeaf?0:1))}getMap(){return xn.empty}invert(e){return new el(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new el(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new el(t.pos,t.attr,t.value)}}Kt.jsonID("attr",el);class wo extends Kt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let l in e.attrs)t[l]=e.attrs[l];t[this.attr]=this.value;let s=e.type.create(t,e.content,e.marks);return Tt.ok(s)}getMap(){return xn.empty}invert(e){return new wo(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new wo(t.attr,t.value)}}Kt.jsonID("docAttr",wo);let nl=class extends Error{};nl=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};nl.prototype=Object.create(Error.prototype);nl.prototype.constructor=nl;nl.prototype.name="TransformError";class E1{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Co}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new nl(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,t=-1e9;for(let s=0;s<this.mapping.maps.length;s++){let l=this.mapping.maps[s];s&&(e=l.map(e,1),t=l.map(t,-1)),l.forEach((o,c,f,d)=>{e=Math.min(e,f),t=Math.max(t,d)})}return e==1e9?null:{from:e,to:t}}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,s=ae.empty){let l=mu(this.doc,e,t,s);return l&&this.step(l),this}replaceWith(e,t,s){return this.replace(e,t,new ae(Z.from(s),0,0))}delete(e,t){return this.replace(e,t,ae.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,s){return dM(this,e,t,s),this}replaceRangeWith(e,t,s){return hM(this,e,t,s),this}deleteRange(e,t){return pM(this,e,t),this}lift(e,t){return ZE(this,e,t),this}join(e,t=1){return oM(this,e,t),this}wrap(e,t){return tM(this,e,t),this}setBlockType(e,t=e,s,l=null){return nM(this,e,t,s,l),this}setNodeMarkup(e,t,s=null,l){return sM(this,e,t,s,l),this}setNodeAttribute(e,t,s){return this.step(new el(e,t,s)),this}setDocAttribute(e,t){return this.step(new wo(e,t)),this}addNodeMark(e,t){return this.step(new us(e,t)),this}removeNodeMark(e,t){let s=this.doc.nodeAt(e);if(!s)throw new RangeError("No node at position "+e);if(t instanceof We)t.isInSet(s.marks)&&this.step(new ti(e,t));else{let l=s.marks,o,c=[];for(;o=t.isInSet(l);)c.push(new ti(e,o)),l=o.removeFromSet(l);for(let f=c.length-1;f>=0;f--)this.step(c[f])}return this}split(e,t=1,s){return iM(this,e,t,s),this}addMark(e,t,s){return JE(this,e,t,s),this}removeMark(e,t,s){return XE(this,e,t,s),this}clearIncompatible(e,t,s){return fp(this,e,t,s),this}}const ih=Object.create(null);class De{constructor(e,t,s){this.$anchor=e,this.$head=t,this.ranges=s||[new mM(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=ae.empty){let s=t.content.lastChild,l=null;for(let f=0;f<t.openEnd;f++)l=s,s=s.lastChild;let o=e.steps.length,c=this.ranges;for(let f=0;f<c.length;f++){let{$from:d,$to:h}=c[f],m=e.mapping.slice(o);e.replaceRange(m.map(d.pos),m.map(h.pos),f?ae.empty:t),f==0&&Sb(e,o,(s?s.isInline:l&&l.isTextblock)?-1:1)}}replaceWith(e,t){let s=e.steps.length,l=this.ranges;for(let o=0;o<l.length;o++){let{$from:c,$to:f}=l[o],d=e.mapping.slice(s),h=d.map(c.pos),m=d.map(f.pos);o?e.deleteRange(h,m):(e.replaceRangeWith(h,m,t),Sb(e,s,t.isInline?-1:1))}}static findFrom(e,t,s=!1){let l=e.parent.inlineContent?new ve(e):Ji(e.node(0),e.parent,e.pos,e.index(),t,s);if(l)return l;for(let o=e.depth-1;o>=0;o--){let c=t<0?Ji(e.node(0),e.node(o),e.before(o+1),e.index(o),t,s):Ji(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,s);if(c)return c}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new vn(e.node(0))}static atStart(e){return Ji(e,e,0,0,1)||new vn(e)}static atEnd(e){return Ji(e,e,e.content.size,e.childCount,-1)||new vn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let s=ih[t.type];if(!s)throw new RangeError(`No selection type ${t.type} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in ih)throw new RangeError("Duplicate use of selection JSON ID "+e);return ih[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ve.between(this.$anchor,this.$head).getBookmark()}}De.prototype.visible=!0;class mM{constructor(e,t){this.$from=e,this.$to=t}}let xb=!1;function vb(n){!xb&&!n.parent.inlineContent&&(xb=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class ve extends De{constructor(e,t=e){vb(e),vb(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let s=e.resolve(t.map(this.head));if(!s.parent.inlineContent)return De.near(s);let l=e.resolve(t.map(this.anchor));return new ve(l.parent.inlineContent?l:s,s)}replace(e,t=ae.empty){if(super.replace(e,t),t==ae.empty){let s=this.$from.marksAcross(this.$to);s&&e.ensureMarks(s)}}eq(e){return e instanceof ve&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new gu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ve(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,s=t){let l=e.resolve(t);return new this(l,s==t?l:e.resolve(s))}static between(e,t,s){let l=e.pos-t.pos;if((!s||l)&&(s=l>=0?1:-1),!t.parent.inlineContent){let o=De.findFrom(t,s,!0)||De.findFrom(t,-s,!0);if(o)t=o.$head;else return De.near(t,s)}return e.parent.inlineContent||(l==0?e=t:(e=(De.findFrom(e,-s,!0)||De.findFrom(e,s,!0)).$anchor,e.pos<t.pos!=l<0&&(e=t))),new ve(e,t)}}De.jsonID("text",ve);class gu{constructor(e,t){this.anchor=e,this.head=t}map(e){return new gu(e.map(this.anchor),e.map(this.head))}resolve(e){return ve.between(e.resolve(this.anchor),e.resolve(this.head))}}class ye extends De{constructor(e){let t=e.nodeAfter,s=e.node(0).resolve(e.pos+t.nodeSize);super(e,s),this.node=t}map(e,t){let{deleted:s,pos:l}=t.mapResult(this.anchor),o=e.resolve(l);return s?De.near(o):new ye(o)}content(){return new ae(Z.from(this.node),0,0)}eq(e){return e instanceof ye&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new hp(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ye(e.resolve(t.anchor))}static create(e,t){return new ye(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ye.prototype.visible=!1;De.jsonID("node",ye);class hp{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:s}=e.mapResult(this.anchor);return t?new gu(s,s):new hp(s)}resolve(e){let t=e.resolve(this.anchor),s=t.nodeAfter;return s&&ye.isSelectable(s)?new ye(t):De.near(t)}}class vn extends De{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=ae.empty){if(t==ae.empty){e.delete(0,e.doc.content.size);let s=De.atStart(e.doc);s.eq(e.selection)||e.setSelection(s)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new vn(e)}map(e){return new vn(e)}eq(e){return e instanceof vn}getBookmark(){return gM}}De.jsonID("all",vn);const gM={map(){return this},resolve(n){return new vn(n)}};function Ji(n,e,t,s,l,o=!1){if(e.inlineContent)return ve.create(n,t);for(let c=s-(l>0?0:1);l>0?c<e.childCount:c>=0;c+=l){let f=e.child(c);if(f.isAtom){if(!o&&ye.isSelectable(f))return ye.create(n,t-(l<0?f.nodeSize:0))}else{let d=Ji(n,f,t+l,l<0?f.childCount:0,l,o);if(d)return d}t+=f.nodeSize*l}return null}function Sb(n,e,t){let s=n.steps.length-1;if(s<e)return;let l=n.steps[s];if(!(l instanceof Ot||l instanceof Dt))return;let o=n.mapping.maps[s],c;o.forEach((f,d,h,m)=>{c==null&&(c=m)}),n.setSelection(De.near(n.doc.resolve(c),t))}const kb=1,ic=2,Tb=4;class yM extends E1{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|kb)&~ic,this.storedMarks=null,this}get selectionSet(){return(this.updated&kb)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ic,this}ensureMarks(e){return We.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ic)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~ic,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let s=this.selection;return t&&(e=e.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||We.none))),s.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,s){let l=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(l.text(e),!0):this.deleteSelection();{if(s==null&&(s=t),!e)return this.deleteRange(t,s);let o=this.storedMarks;if(!o){let c=this.doc.resolve(t);o=s==t?c.marks():c.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(t,s,l.text(e,o)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(De.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Tb,this}get scrolledIntoView(){return(this.updated&Tb)>0}}function Eb(n,e){return!e||!n?n:n.bind(e)}class uo{constructor(e,t,s){this.name=e,this.init=Eb(t.init,s),this.apply=Eb(t.apply,s)}}const bM=[new uo("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new uo("selection",{init(n,e){return n.selection||De.atStart(e.doc)},apply(n){return n.selection}}),new uo("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,s){return s.selection.$cursor?n.storedMarks:null}}),new uo("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class lh{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=bM.slice(),t&&t.forEach(s=>{if(this.pluginsByKey[s.key])throw new RangeError("Adding different instances of a keyed plugin ("+s.key+")");this.plugins.push(s),this.pluginsByKey[s.key]=s,s.spec.state&&this.fields.push(new uo(s.key,s.spec.state,s))})}}class Zi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let s=0;s<this.config.plugins.length;s++)if(s!=t){let l=this.config.plugins[s];if(l.spec.filterTransaction&&!l.spec.filterTransaction.call(l,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],s=this.applyInner(e),l=null;for(;;){let o=!1;for(let c=0;c<this.config.plugins.length;c++){let f=this.config.plugins[c];if(f.spec.appendTransaction){let d=l?l[c].n:0,h=l?l[c].state:this,m=d<t.length&&f.spec.appendTransaction.call(f,d?t.slice(d):t,h,s);if(m&&s.filterTransaction(m,c)){if(m.setMeta("appendedTransaction",e),!l){l=[];for(let y=0;y<this.config.plugins.length;y++)l.push(y<c?{state:s,n:t.length}:{state:this,n:0})}t.push(m),s=s.applyInner(m),o=!0}l&&(l[c]={state:s,n:t.length})}}if(!o)return{state:s,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Zi(this.config),s=this.config.fields;for(let l=0;l<s.length;l++){let o=s[l];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new yM(this)}static create(e){let t=new lh(e.doc?e.doc.type.schema:e.schema,e.plugins),s=new Zi(t);for(let l=0;l<t.fields.length;l++)s[t.fields[l].name]=t.fields[l].init(e,s);return s}reconfigure(e){let t=new lh(this.schema,e.plugins),s=t.fields,l=new Zi(t);for(let o=0;o<s.length;o++){let c=s[o].name;l[c]=this.hasOwnProperty(c)?this[c]:s[o].init(e,l)}return l}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(s=>s.toJSON())),e&&typeof e=="object")for(let s in e){if(s=="doc"||s=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let l=e[s],o=l.spec.state;o&&o.toJSON&&(t[s]=o.toJSON.call(l,this[l.key]))}return t}static fromJSON(e,t,s){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let l=new lh(e.schema,e.plugins),o=new Zi(l);return l.fields.forEach(c=>{if(c.name=="doc")o.doc=ds.fromJSON(e.schema,t.doc);else if(c.name=="selection")o.selection=De.fromJSON(o.doc,t.selection);else if(c.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(s)for(let f in s){let d=s[f],h=d.spec.state;if(d.key==c.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,f)){o[c.name]=h.fromJSON.call(d,e,t[f],o);return}}o[c.name]=c.init(e,o)}}),o}}function M1(n,e,t){for(let s in n){let l=n[s];l instanceof Function?l=l.bind(e):s=="handleDOMEvents"&&(l=M1(l,e,{})),t[s]=l}return t}class ct{constructor(e){this.spec=e,this.props={},e.props&&M1(e.props,this,this.props),this.key=e.key?e.key.key:C1("plugin")}getState(e){return e[this.key]}}const oh=Object.create(null);function C1(n){return n in oh?n+"$"+ ++oh[n]:(oh[n]=0,n+"$")}class wt{constructor(e="key"){this.key=C1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const pp=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function w1(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const N1=(n,e,t)=>{let s=w1(n,t);if(!s)return!1;let l=mp(s);if(!l){let c=s.blockRange(),f=c&&cl(c);return f==null?!1:(e&&e(n.tr.lift(c,f).scrollIntoView()),!0)}let o=l.nodeBefore;if(B1(n,l,e,-1))return!0;if(s.parent.content.size==0&&(rl(o,"end")||ye.isSelectable(o)))for(let c=s.depth;;c--){let f=mu(n.doc,s.before(c),s.after(c),ae.empty);if(f&&f.slice.size<f.to-f.from){if(e){let d=n.tr.step(f);d.setSelection(rl(o,"end")?De.findFrom(d.doc.resolve(d.mapping.map(l.pos,-1)),-1):ye.create(d.doc,l.pos-o.nodeSize)),e(d.scrollIntoView())}return!0}if(c==1||s.node(c-1).childCount>1)break}return o.isAtom&&l.depth==s.depth-1?(e&&e(n.tr.delete(l.pos-o.nodeSize,l.pos).scrollIntoView()),!0):!1},xM=(n,e,t)=>{let s=w1(n,t);if(!s)return!1;let l=mp(s);return l?A1(n,l,e):!1},vM=(n,e,t)=>{let s=D1(n,t);if(!s)return!1;let l=gp(s);return l?A1(n,l,e):!1};function A1(n,e,t){let s=e.nodeBefore,l=s,o=e.pos-1;for(;!l.isTextblock;o--){if(l.type.spec.isolating)return!1;let m=l.lastChild;if(!m)return!1;l=m}let c=e.nodeAfter,f=c,d=e.pos+1;for(;!f.isTextblock;d++){if(f.type.spec.isolating)return!1;let m=f.firstChild;if(!m)return!1;f=m}let h=mu(n.doc,o,d,ae.empty);if(!h||h.from!=o||h instanceof Ot&&h.slice.size>=d-o)return!1;if(t){let m=n.tr.step(h);m.setSelection(ve.create(m.doc,o)),t(m.scrollIntoView())}return!0}function rl(n,e,t=!1){for(let s=n;s;s=e=="start"?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(t&&s.childCount!=1)return!1}return!1}const O1=(n,e,t)=>{let{$head:s,empty:l}=n.selection,o=s;if(!l)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):s.parentOffset>0)return!1;o=mp(s)}let c=o&&o.nodeBefore;return!c||!ye.isSelectable(c)?!1:(e&&e(n.tr.setSelection(ye.create(n.doc,o.pos-c.nodeSize)).scrollIntoView()),!0)};function mp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function D1(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const j1=(n,e,t)=>{let s=D1(n,t);if(!s)return!1;let l=gp(s);if(!l)return!1;let o=l.nodeAfter;if(B1(n,l,e,1))return!0;if(s.parent.content.size==0&&(rl(o,"start")||ye.isSelectable(o))){let c=mu(n.doc,s.before(),s.after(),ae.empty);if(c&&c.slice.size<c.to-c.from){if(e){let f=n.tr.step(c);f.setSelection(rl(o,"start")?De.findFrom(f.doc.resolve(f.mapping.map(l.pos)),1):ye.create(f.doc,f.mapping.map(l.pos))),e(f.scrollIntoView())}return!0}}return o.isAtom&&l.depth==s.depth-1?(e&&e(n.tr.delete(l.pos,l.pos+o.nodeSize).scrollIntoView()),!0):!1},R1=(n,e,t)=>{let{$head:s,empty:l}=n.selection,o=s;if(!l)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):s.parentOffset<s.parent.content.size)return!1;o=gp(s)}let c=o&&o.nodeAfter;return!c||!ye.isSelectable(c)?!1:(e&&e(n.tr.setSelection(ye.create(n.doc,o.pos)).scrollIntoView()),!0)};function gp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const SM=(n,e)=>{let t=n.selection,s=t instanceof ye,l;if(s){if(t.node.isTextblock||!xs(n.doc,t.from))return!1;l=t.from}else if(l=pu(n.doc,t.from,-1),l==null)return!1;if(e){let o=n.tr.join(l);s&&o.setSelection(ye.create(o.doc,l-n.doc.resolve(l).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},kM=(n,e)=>{let t=n.selection,s;if(t instanceof ye){if(t.node.isTextblock||!xs(n.doc,t.to))return!1;s=t.to}else if(s=pu(n.doc,t.to,1),s==null)return!1;return e&&e(n.tr.join(s).scrollIntoView()),!0},TM=(n,e)=>{let{$from:t,$to:s}=n.selection,l=t.blockRange(s),o=l&&cl(l);return o==null?!1:(e&&e(n.tr.lift(l,o).scrollIntoView()),!0)},z1=(n,e)=>{let{$head:t,$anchor:s}=n.selection;return!t.parent.type.spec.code||!t.sameParent(s)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function yp(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const EM=(n,e)=>{let{$head:t,$anchor:s}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(s))return!1;let l=t.node(-1),o=t.indexAfter(-1),c=yp(l.contentMatchAt(o));if(!c||!l.canReplaceWith(o,o,c))return!1;if(e){let f=t.after(),d=n.tr.replaceWith(f,f,c.createAndFill());d.setSelection(De.near(d.doc.resolve(f),1)),e(d.scrollIntoView())}return!0},L1=(n,e)=>{let t=n.selection,{$from:s,$to:l}=t;if(t instanceof vn||s.parent.inlineContent||l.parent.inlineContent)return!1;let o=yp(l.parent.contentMatchAt(l.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let c=(!s.parentOffset&&l.index()<l.parent.childCount?s:l).pos,f=n.tr.insert(c,o.createAndFill());f.setSelection(ve.create(f.doc,c+1)),e(f.scrollIntoView())}return!0},_1=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(Er(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let s=t.blockRange(),l=s&&cl(s);return l==null?!1:(e&&e(n.tr.lift(s,l).scrollIntoView()),!0)};function MM(n){return(e,t)=>{let{$from:s,$to:l}=e.selection;if(e.selection instanceof ye&&e.selection.node.isBlock)return!s.parentOffset||!Er(e.doc,s.pos)?!1:(t&&t(e.tr.split(s.pos).scrollIntoView()),!0);if(!s.depth)return!1;let o=[],c,f,d=!1,h=!1;for(let v=s.depth;;v--)if(s.node(v).isBlock){d=s.end(v)==s.pos+(s.depth-v),h=s.start(v)==s.pos-(s.depth-v),f=yp(s.node(v-1).contentMatchAt(s.indexAfter(v-1))),o.unshift(d&&f?{type:f}:null),c=v;break}else{if(v==1)return!1;o.unshift(null)}let m=e.tr;(e.selection instanceof ve||e.selection instanceof vn)&&m.deleteSelection();let y=m.mapping.map(s.pos),x=Er(m.doc,y,o.length,o);if(x||(o[0]=f?{type:f}:null,x=Er(m.doc,y,o.length,o)),!x)return!1;if(m.split(y,o.length,o),!d&&h&&s.node(c).type!=f){let v=m.mapping.map(s.before(c)),k=m.doc.resolve(v);f&&s.node(c-1).canReplaceWith(k.index(),k.index()+1,f)&&m.setNodeMarkup(m.mapping.map(s.before(c)),f)}return t&&t(m.scrollIntoView()),!0}}const CM=MM(),wM=(n,e)=>{let{$from:t,to:s}=n.selection,l,o=t.sharedDepth(s);return o==0?!1:(l=t.before(o),e&&e(n.tr.setSelection(ye.create(n.doc,l))),!0)};function NM(n,e,t){let s=e.nodeBefore,l=e.nodeAfter,o=e.index();return!s||!l||!s.type.compatibleContent(l.type)?!1:!s.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-s.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(l.isTextblock||xs(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function B1(n,e,t,s){let l=e.nodeBefore,o=e.nodeAfter,c,f,d=l.type.spec.isolating||o.type.spec.isolating;if(!d&&NM(n,e,t))return!0;let h=!d&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(c=(f=l.contentMatchAt(l.childCount)).findWrapping(o.type))&&f.matchType(c[0]||o.type).validEnd){if(t){let v=e.pos+o.nodeSize,k=Z.empty;for(let C=c.length-1;C>=0;C--)k=Z.from(c[C].create(null,k));k=Z.from(l.copy(k));let E=n.tr.step(new Dt(e.pos-1,v,e.pos,v,new ae(k,1,0),c.length,!0)),M=E.doc.resolve(v+2*c.length);M.nodeAfter&&M.nodeAfter.type==l.type&&xs(E.doc,M.pos)&&E.join(M.pos),t(E.scrollIntoView())}return!0}let m=o.type.spec.isolating||s>0&&d?null:De.findFrom(e,1),y=m&&m.$from.blockRange(m.$to),x=y&&cl(y);if(x!=null&&x>=e.depth)return t&&t(n.tr.lift(y,x).scrollIntoView()),!0;if(h&&rl(o,"start",!0)&&rl(l,"end")){let v=l,k=[];for(;k.push(v),!v.isTextblock;)v=v.lastChild;let E=o,M=1;for(;!E.isTextblock;E=E.firstChild)M++;if(v.canReplace(v.childCount,v.childCount,E.content)){if(t){let C=Z.empty;for(let $=k.length-1;$>=0;$--)C=Z.from(k[$].copy(C));let L=n.tr.step(new Dt(e.pos-k.length,e.pos+o.nodeSize,e.pos+M,e.pos+o.nodeSize-M,new ae(C,k.length,0),0,!0));t(L.scrollIntoView())}return!0}}return!1}function H1(n){return function(e,t){let s=e.selection,l=n<0?s.$from:s.$to,o=l.depth;for(;l.node(o).isInline;){if(!o)return!1;o--}return l.node(o).isTextblock?(t&&t(e.tr.setSelection(ve.create(e.doc,n<0?l.start(o):l.end(o)))),!0):!1}}const AM=H1(-1),OM=H1(1);function DM(n,e=null){return function(t,s){let{$from:l,$to:o}=t.selection,c=l.blockRange(o),f=c&&dp(c,n,e);return f?(s&&s(t.tr.wrap(c,f).scrollIntoView()),!0):!1}}function Mb(n,e=null){return function(t,s){let l=!1;for(let o=0;o<t.selection.ranges.length&&!l;o++){let{$from:{pos:c},$to:{pos:f}}=t.selection.ranges[o];t.doc.nodesBetween(c,f,(d,h)=>{if(l)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)l=!0;else{let m=t.doc.resolve(h),y=m.index();l=m.parent.canReplaceWith(y,y+1,n)}})}if(!l)return!1;if(s){let o=t.tr;for(let c=0;c<t.selection.ranges.length;c++){let{$from:{pos:f},$to:{pos:d}}=t.selection.ranges[c];o.setBlockType(f,d,n,e)}s(o.scrollIntoView())}return!0}}function bp(...n){return function(e,t,s){for(let l=0;l<n.length;l++)if(n[l](e,t,s))return!0;return!1}}bp(pp,N1,O1);bp(pp,j1,R1);bp(z1,L1,_1,CM);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function jM(n,e=null){return function(t,s){let{$from:l,$to:o}=t.selection,c=l.blockRange(o);if(!c)return!1;let f=s?t.tr:null;return RM(f,c,n,e)?(s&&s(f.scrollIntoView()),!0):!1}}function RM(n,e,t,s=null){let l=!1,o=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=c.resolve(e.start-2);o=new Cc(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Cc(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),l=!0}let f=dp(o,t,s,e);return f?(n&&zM(n,e,f,l,t),!0):!1}function zM(n,e,t,s,l){let o=Z.empty;for(let m=t.length-1;m>=0;m--)o=Z.from(t[m].type.create(t[m].attrs,o));n.step(new Dt(e.start-(s?2:0),e.end,e.start,e.end,new ae(o,0,0),t.length,!0));let c=0;for(let m=0;m<t.length;m++)t[m].type==l&&(c=m+1);let f=t.length-c,d=e.start+t.length-(s?2:0),h=e.parent;for(let m=e.startIndex,y=e.endIndex,x=!0;m<y;m++,x=!1)!x&&Er(n.doc,d,f)&&(n.split(d,f),d+=2*f),d+=h.child(m).nodeSize;return n}function LM(n){return function(e,t){let{$from:s,$to:l}=e.selection,o=s.blockRange(l,c=>c.childCount>0&&c.firstChild.type==n);return o?t?s.node(o.depth-1).type==n?_M(e,t,n,o):BM(e,t,o):!0:!1}}function _M(n,e,t,s){let l=n.tr,o=s.end,c=s.$to.end(s.depth);o<c&&(l.step(new Dt(o-1,c,o,c,new ae(Z.from(t.create(null,s.parent.copy())),1,0),1,!0)),s=new Cc(l.doc.resolve(s.$from.pos),l.doc.resolve(c),s.depth));const f=cl(s);if(f==null)return!1;l.lift(s,f);let d=l.doc.resolve(l.mapping.map(o,-1)-1);return xs(l.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&l.join(d.pos),e(l.scrollIntoView()),!0}function BM(n,e,t){let s=n.tr,l=t.parent;for(let v=t.end,k=t.endIndex-1,E=t.startIndex;k>E;k--)v-=l.child(k).nodeSize,s.delete(v-1,v+1);let o=s.doc.resolve(t.start),c=o.nodeAfter;if(s.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let f=t.startIndex==0,d=t.endIndex==l.childCount,h=o.node(-1),m=o.index(-1);if(!h.canReplace(m+(f?0:1),m+1,c.content.append(d?Z.empty:Z.from(l))))return!1;let y=o.pos,x=y+c.nodeSize;return s.step(new Dt(y-(f?1:0),x+(d?1:0),y+1,x-1,new ae((f?Z.empty:Z.from(l.copy(Z.empty))).append(d?Z.empty:Z.from(l.copy(Z.empty))),f?0:1,d?0:1),f?0:1)),e(s.scrollIntoView()),!0}function HM(n){return function(e,t){let{$from:s,$to:l}=e.selection,o=s.blockRange(l,h=>h.childCount>0&&h.firstChild.type==n);if(!o)return!1;let c=o.startIndex;if(c==0)return!1;let f=o.parent,d=f.child(c-1);if(d.type!=n)return!1;if(t){let h=d.lastChild&&d.lastChild.type==f.type,m=Z.from(h?n.create():null),y=new ae(Z.from(n.create(null,Z.from(f.type.create(null,m)))),h?3:1,0),x=o.start,v=o.end;t(e.tr.step(new Dt(x-(h?3:1),v,x,v,y,1,!0)).scrollIntoView())}return!0}}const Ut=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},sl=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let _h=null;const kr=function(n,e,t){let s=_h||(_h=document.createRange());return s.setEnd(n,t??n.nodeValue.length),s.setStart(n,e||0),s},UM=function(){_h=null},ni=function(n,e,t,s){return t&&(Cb(n,e,t,s,-1)||Cb(n,e,t,s,1))},IM=/^(img|br|input|textarea|hr)$/i;function Cb(n,e,t,s,l){for(var o;;){if(n==t&&e==s)return!0;if(e==(l<0?0:Ln(n))){let c=n.parentNode;if(!c||c.nodeType!=1||Bo(n)||IM.test(n.nodeName)||n.contentEditable=="false")return!1;e=Ut(n)+(l<0?0:1),n=c}else if(n.nodeType==1){let c=n.childNodes[e+(l<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((o=c.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=l;else return!1;else n=c,e=l<0?Ln(n):0}else return!1}}function Ln(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function qM(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Ln(n)}else if(n.parentNode&&!Bo(n))e=Ut(n),n=n.parentNode;else return null}}function VM(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Bo(n))e=Ut(n)+1,n=n.parentNode;else return null}}function $M(n,e,t){for(let s=e==0,l=e==Ln(n);s||l;){if(n==t)return!0;let o=Ut(n);if(n=n.parentNode,!n)return!1;s=s&&o==0,l=l&&o==Ln(n)}}function Bo(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const yu=function(n){return n.focusNode&&ni(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Gs(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function GM(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function YM(n,e,t){if(n.caretPositionFromPoint)try{let s=n.caretPositionFromPoint(e,t);if(s)return{node:s.offsetNode,offset:Math.min(Ln(s.offsetNode),s.offset)}}catch{}if(n.caretRangeFromPoint){let s=n.caretRangeFromPoint(e,t);if(s)return{node:s.startContainer,offset:Math.min(Ln(s.startContainer),s.startOffset)}}}const Qn=typeof navigator<"u"?navigator:null,wb=typeof document<"u"?document:null,vs=Qn&&Qn.userAgent||"",Bh=/Edge\/(\d+)/.exec(vs),U1=/MSIE \d/.exec(vs),Hh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(vs),on=!!(U1||Hh||Bh),ps=U1?document.documentMode:Hh?+Hh[1]:Bh?+Bh[1]:0,_n=!on&&/gecko\/(\d+)/i.test(vs);_n&&+(/Firefox\/(\d+)/.exec(vs)||[0,0])[1];const Uh=!on&&/Chrome\/(\d+)/.exec(vs),qt=!!Uh,I1=Uh?+Uh[1]:0,Yt=!on&&!!Qn&&/Apple Computer/.test(Qn.vendor),il=Yt&&(/Mobile\/\w+/.test(vs)||!!Qn&&Qn.maxTouchPoints>2),zn=il||(Qn?/Mac/.test(Qn.platform):!1),q1=Qn?/Win/.test(Qn.platform):!1,Tr=/Android \d/.test(vs),Ho=!!wb&&"webkitFontSmoothing"in wb.documentElement.style,KM=Ho?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function PM(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function br(n,e){return typeof n=="number"?n:n[e]}function FM(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,s=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*s}}function Nb(n,e,t){let s=n.someProp("scrollThreshold")||0,l=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let c=t||n.dom;c;){if(c.nodeType!=1){c=sl(c);continue}let f=c,d=f==o.body,h=d?PM(o):FM(f),m=0,y=0;if(e.top<h.top+br(s,"top")?y=-(h.top-e.top+br(l,"top")):e.bottom>h.bottom-br(s,"bottom")&&(y=e.bottom-e.top>h.bottom-h.top?e.top+br(l,"top")-h.top:e.bottom-h.bottom+br(l,"bottom")),e.left<h.left+br(s,"left")?m=-(h.left-e.left+br(l,"left")):e.right>h.right-br(s,"right")&&(m=e.right-h.right+br(l,"right")),m||y)if(d)o.defaultView.scrollBy(m,y);else{let v=f.scrollLeft,k=f.scrollTop;y&&(f.scrollTop+=y),m&&(f.scrollLeft+=m);let E=f.scrollLeft-v,M=f.scrollTop-k;e={left:e.left-E,top:e.top-M,right:e.right-E,bottom:e.bottom-M}}let x=d?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(x))break;c=x=="absolute"?c.offsetParent:sl(c)}}function JM(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),s,l;for(let o=(e.left+e.right)/2,c=t+1;c<Math.min(innerHeight,e.bottom);c+=5){let f=n.root.elementFromPoint(o,c);if(!f||f==n.dom||!n.dom.contains(f))continue;let d=f.getBoundingClientRect();if(d.top>=t-20){s=f,l=d.top;break}}return{refDOM:s,refTop:l,stack:V1(n.dom)}}function V1(n){let e=[],t=n.ownerDocument;for(let s=n;s&&(e.push({dom:s,top:s.scrollTop,left:s.scrollLeft}),n!=t);s=sl(s));return e}function XM({refDOM:n,refTop:e,stack:t}){let s=n?n.getBoundingClientRect().top:0;$1(t,s==0?0:s-e)}function $1(n,e){for(let t=0;t<n.length;t++){let{dom:s,top:l,left:o}=n[t];s.scrollTop!=l+e&&(s.scrollTop=l+e),s.scrollLeft!=o&&(s.scrollLeft=o)}}let Pi=null;function QM(n){if(n.setActive)return n.setActive();if(Pi)return n.focus(Pi);let e=V1(n);n.focus(Pi==null?{get preventScroll(){return Pi={preventScroll:!0},!0}}:void 0),Pi||(Pi=!1,$1(e,0))}function G1(n,e){let t,s=2e8,l,o=0,c=e.top,f=e.top,d,h;for(let m=n.firstChild,y=0;m;m=m.nextSibling,y++){let x;if(m.nodeType==1)x=m.getClientRects();else if(m.nodeType==3)x=kr(m).getClientRects();else continue;for(let v=0;v<x.length;v++){let k=x[v];if(k.top<=c&&k.bottom>=f){c=Math.max(k.bottom,c),f=Math.min(k.top,f);let E=k.left>e.left?k.left-e.left:k.right<e.left?e.left-k.right:0;if(E<s){t=m,s=E,l=E&&t.nodeType==3?{left:k.right<e.left?k.right:k.left,top:e.top}:e,m.nodeType==1&&E&&(o=y+(e.left>=(k.left+k.right)/2?1:0));continue}}else k.top>e.top&&!d&&k.left<=e.left&&k.right>=e.left&&(d=m,h={left:Math.max(k.left,Math.min(k.right,e.left)),top:k.top});!t&&(e.left>=k.right&&e.top>=k.top||e.left>=k.left&&e.top>=k.bottom)&&(o=y+1)}}return!t&&d&&(t=d,l=h,s=0),t&&t.nodeType==3?ZM(t,l):!t||s&&t.nodeType==1?{node:n,offset:o}:G1(t,l)}function ZM(n,e){let t=n.nodeValue.length,s=document.createRange(),l;for(let o=0;o<t;o++){s.setEnd(n,o+1),s.setStart(n,o);let c=ns(s,1);if(c.top!=c.bottom&&xp(e,c)){l={node:n,offset:o+(e.left>=(c.left+c.right)/2?1:0)};break}}return s.detach(),l||{node:n,offset:0}}function xp(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function WM(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function eC(n,e,t){let{node:s,offset:l}=G1(e,t),o=-1;if(s.nodeType==1&&!s.firstChild){let c=s.getBoundingClientRect();o=c.left!=c.right&&t.left>(c.left+c.right)/2?1:-1}return n.docView.posFromDOM(s,l,o)}function tC(n,e,t,s){let l=-1;for(let o=e,c=!1;o!=n.dom;){let f=n.docView.nearestDesc(o,!0),d;if(!f)return null;if(f.dom.nodeType==1&&(f.node.isBlock&&f.parent||!f.contentDOM)&&((d=f.dom.getBoundingClientRect()).width||d.height)&&(f.node.isBlock&&f.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(f.dom.nodeName)&&(!c&&d.left>s.left||d.top>s.top?l=f.posBefore:(!c&&d.right<s.left||d.bottom<s.top)&&(l=f.posAfter),c=!0),!f.contentDOM&&l<0&&!f.node.isText))return(f.node.isBlock?s.top<(d.top+d.bottom)/2:s.left<(d.left+d.right)/2)?f.posBefore:f.posAfter;o=f.dom.parentNode}return l>-1?l:n.docView.posFromDOM(e,t,-1)}function Y1(n,e,t){let s=n.childNodes.length;if(s&&t.top<t.bottom)for(let l=Math.max(0,Math.min(s-1,Math.floor(s*(e.top-t.top)/(t.bottom-t.top))-2)),o=l;;){let c=n.childNodes[o];if(c.nodeType==1){let f=c.getClientRects();for(let d=0;d<f.length;d++){let h=f[d];if(xp(e,h))return Y1(c,e,h)}}if((o=(o+1)%s)==l)break}return n}function nC(n,e){let t=n.dom.ownerDocument,s,l=0,o=YM(t,e.left,e.top);o&&({node:s,offset:l}=o);let c=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),f;if(!c||!n.dom.contains(c.nodeType!=1?c.parentNode:c)){let h=n.dom.getBoundingClientRect();if(!xp(e,h)||(c=Y1(n.dom,e,h),!c))return null}if(Yt)for(let h=c;s&&h;h=sl(h))h.draggable&&(s=void 0);if(c=WM(c,e),s){if(_n&&s.nodeType==1&&(l=Math.min(l,s.childNodes.length),l<s.childNodes.length)){let m=s.childNodes[l],y;m.nodeName=="IMG"&&(y=m.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&l++}let h;Ho&&l&&s.nodeType==1&&(h=s.childNodes[l-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&l--,s==n.dom&&l==s.childNodes.length-1&&s.lastChild.nodeType==1&&e.top>s.lastChild.getBoundingClientRect().bottom?f=n.state.doc.content.size:(l==0||s.nodeType!=1||s.childNodes[l-1].nodeName!="BR")&&(f=tC(n,s,l,e))}f==null&&(f=eC(n,c,e));let d=n.docView.nearestDesc(c,!0);return{pos:f,inside:d?d.posAtStart-d.border:-1}}function Ab(n){return n.top<n.bottom||n.left<n.right}function ns(n,e){let t=n.getClientRects();if(t.length){let s=t[e<0?0:t.length-1];if(Ab(s))return s}return Array.prototype.find.call(t,Ab)||n.getBoundingClientRect()}const rC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function K1(n,e,t){let{node:s,offset:l,atom:o}=n.docView.domFromPos(e,t<0?-1:1),c=Ho||_n;if(s.nodeType==3)if(c&&(rC.test(s.nodeValue)||(t<0?!l:l==s.nodeValue.length))){let d=ns(kr(s,l,l),t);if(_n&&l&&/\s/.test(s.nodeValue[l-1])&&l<s.nodeValue.length){let h=ns(kr(s,l-1,l-1),-1);if(h.top==d.top){let m=ns(kr(s,l,l+1),-1);if(m.top!=d.top)return io(m,m.left<h.left)}}return d}else{let d=l,h=l,m=t<0?1:-1;return t<0&&!l?(h++,m=-1):t>=0&&l==s.nodeValue.length?(d--,m=1):t<0?d--:h++,io(ns(kr(s,d,h),m),m<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&l&&(t<0||l==Ln(s))){let d=s.childNodes[l-1];if(d.nodeType==1)return ah(d.getBoundingClientRect(),!1)}if(o==null&&l<Ln(s)){let d=s.childNodes[l];if(d.nodeType==1)return ah(d.getBoundingClientRect(),!0)}return ah(s.getBoundingClientRect(),t>=0)}if(o==null&&l&&(t<0||l==Ln(s))){let d=s.childNodes[l-1],h=d.nodeType==3?kr(d,Ln(d)-(c?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(h)return io(ns(h,1),!1)}if(o==null&&l<Ln(s)){let d=s.childNodes[l];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let h=d?d.nodeType==3?kr(d,0,c?0:1):d.nodeType==1?d:null:null;if(h)return io(ns(h,-1),!0)}return io(ns(s.nodeType==3?kr(s):s,-t),t>=0)}function io(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function ah(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function P1(n,e,t){let s=n.state,l=n.root.activeElement;s!=e&&n.updateState(e),l!=n.dom&&n.focus();try{return t()}finally{s!=e&&n.updateState(s),l!=n.dom&&l&&l.focus()}}function sC(n,e,t){let s=e.selection,l=t=="up"?s.$from:s.$to;return P1(n,e,()=>{let{node:o}=n.docView.domFromPos(l.pos,t=="up"?-1:1);for(;;){let f=n.docView.nearestDesc(o,!0);if(!f)break;if(f.node.isBlock){o=f.contentDOM||f.dom;break}o=f.dom.parentNode}let c=K1(n,l.pos,1);for(let f=o.firstChild;f;f=f.nextSibling){let d;if(f.nodeType==1)d=f.getClientRects();else if(f.nodeType==3)d=kr(f,0,f.nodeValue.length).getClientRects();else continue;for(let h=0;h<d.length;h++){let m=d[h];if(m.bottom>m.top+1&&(t=="up"?c.top-m.top>(m.bottom-c.top)*2:m.bottom-c.bottom>(c.bottom-m.top)*2))return!1}}return!0})}const iC=/[\u0590-\u08ac]/;function lC(n,e,t){let{$head:s}=e.selection;if(!s.parent.isTextblock)return!1;let l=s.parentOffset,o=!l,c=l==s.parent.content.size,f=n.domSelection();return f?!iC.test(s.parent.textContent)||!f.modify?t=="left"||t=="backward"?o:c:P1(n,e,()=>{let{focusNode:d,focusOffset:h,anchorNode:m,anchorOffset:y}=n.domSelectionRange(),x=f.caretBidiLevel;f.modify("move",t,"character");let v=s.depth?n.docView.domAfterPos(s.before()):n.dom,{focusNode:k,focusOffset:E}=n.domSelectionRange(),M=k&&!v.contains(k.nodeType==1?k:k.parentNode)||d==k&&h==E;try{f.collapse(m,y),d&&(d!=m||h!=y)&&f.extend&&f.extend(d,h)}catch{}return x!=null&&(f.caretBidiLevel=x),M}):s.pos==s.start()||s.pos==s.end()}let Ob=null,Db=null,jb=!1;function oC(n,e,t){return Ob==e&&Db==t?jb:(Ob=e,Db=t,jb=t=="up"||t=="down"?sC(n,e,t):lC(n,e,t))}const Bn=0,Rb=1,Ys=2,Zn=3;class Uo{constructor(e,t,s,l){this.parent=e,this.children=t,this.dom=s,this.contentDOM=l,this.dirty=Bn,s.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,s){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,s=this.posAtStart;;t++){let l=this.children[t];if(l==e)return s;s+=l.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,s){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(s<0){let o,c;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((c=o.pmViewDesc)&&c.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(c)+c.size:this.posAtStart}else{let o,c;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((c=o.pmViewDesc)&&c.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(c):this.posAtEnd}let l;if(e==this.dom&&this.contentDOM)l=t>Ut(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))l=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){l=!1;break}if(o.previousSibling)break}if(l==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){l=!0;break}if(o.nextSibling)break}}return l??s>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let s=!0,l=e;l;l=l.parentNode){let o=this.getDesc(l),c;if(o&&(!t||o.node))if(s&&(c=o.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))s=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let s=t;s;s=s.parent)if(s==this)return t}posFromDOM(e,t,s){for(let l=e;l;l=l.parentNode){let o=this.getDesc(l);if(o)return o.localPosFromDOM(e,t,s)}return-1}descAt(e){for(let t=0,s=0;t<this.children.length;t++){let l=this.children[t],o=s+l.size;if(s==e&&o!=s){for(;!l.border&&l.children.length;)for(let c=0;c<l.children.length;c++){let f=l.children[c];if(f.size){l=f;break}}return l}if(e<o)return l.descAt(e-s-l.border);s=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let s=0,l=0;for(let o=0;s<this.children.length;s++){let c=this.children[s],f=o+c.size;if(f>e||c instanceof J1){l=e-o;break}o=f}if(l)return this.children[s].domFromPos(l-this.children[s].border,t);for(let o;s&&!(o=this.children[s-1]).size&&o instanceof F1&&o.side>=0;s--);if(t<=0){let o,c=!0;for(;o=s?this.children[s-1]:null,!(!o||o.dom.parentNode==this.contentDOM);s--,c=!1);return o&&t&&c&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?Ut(o.dom)+1:0}}else{let o,c=!0;for(;o=s<this.children.length?this.children[s]:null,!(!o||o.dom.parentNode==this.contentDOM);s++,c=!1);return o&&c&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?Ut(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,s=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let l=-1,o=-1;for(let c=s,f=0;;f++){let d=this.children[f],h=c+d.size;if(l==-1&&e<=h){let m=c+d.border;if(e>=m&&t<=h-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,m);e=c;for(let y=f;y>0;y--){let x=this.children[y-1];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(1)){l=Ut(x.dom)+1;break}e-=x.size}l==-1&&(l=0)}if(l>-1&&(h>t||f==this.children.length-1)){t=h;for(let m=f+1;m<this.children.length;m++){let y=this.children[m];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){o=Ut(y.dom);break}t+=y.size}o==-1&&(o=this.contentDOM.childNodes.length);break}c=h}return{node:this.contentDOM,from:e,to:t,fromOffset:l,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:s}=this.domFromPos(e,0);if(t.nodeType!=1||s==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[s]}setSelection(e,t,s,l=!1){let o=Math.min(e,t),c=Math.max(e,t);for(let v=0,k=0;v<this.children.length;v++){let E=this.children[v],M=k+E.size;if(o>k&&c<M)return E.setSelection(e-k-E.border,t-k-E.border,s,l);k=M}let f=this.domFromPos(e,e?-1:1),d=t==e?f:this.domFromPos(t,t?-1:1),h=s.root.getSelection(),m=s.domSelectionRange(),y=!1;if((_n||Yt)&&e==t){let{node:v,offset:k}=f;if(v.nodeType==3){if(y=!!(k&&v.nodeValue[k-1]==`
`),y&&k==v.nodeValue.length)for(let E=v,M;E;E=E.parentNode){if(M=E.nextSibling){M.nodeName=="BR"&&(f=d={node:M.parentNode,offset:Ut(M)+1});break}let C=E.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let E=v.childNodes[k-1];y=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(_n&&m.focusNode&&m.focusNode!=d.node&&m.focusNode.nodeType==1){let v=m.focusNode.childNodes[m.focusOffset];v&&v.contentEditable=="false"&&(l=!0)}if(!(l||y&&Yt)&&ni(f.node,f.offset,m.anchorNode,m.anchorOffset)&&ni(d.node,d.offset,m.focusNode,m.focusOffset))return;let x=!1;if((h.extend||e==t)&&!(y&&_n)){h.collapse(f.node,f.offset);try{e!=t&&h.extend(d.node,d.offset),x=!0}catch{}}if(!x){if(e>t){let k=f;f=d,d=k}let v=document.createRange();v.setEnd(d.node,d.offset),v.setStart(f.node,f.offset),h.removeAllRanges(),h.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let s=0,l=0;l<this.children.length;l++){let o=this.children[l],c=s+o.size;if(s==c?e<=c&&t>=s:e<c&&t>s){let f=s+o.border,d=c-o.border;if(e>=f&&t<=d){this.dirty=e==s||t==c?Ys:Rb,e==f&&t==d&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Zn:o.markDirty(e-f,t-f);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Ys:Zn}s=c}this.dirty=Ys}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let s=e==1?Ys:Rb;t.dirty<s&&(t.dirty=s)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class F1 extends Uo{constructor(e,t,s,l){let o,c=t.type.toDOM;if(typeof c=="function"&&(c=c(s,()=>{if(!o)return l;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(c.nodeType!=1){let f=document.createElement("span");f.appendChild(c),c=f}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==Bn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class aC extends Uo{constructor(e,t,s,l){super(e,[],t,null),this.textDOM=s,this.text=l}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ri extends Uo{constructor(e,t,s,l,o){super(e,[],s,l),this.mark=t,this.spec=o}static create(e,t,s,l){let o=l.nodeViews[t.type.name],c=o&&o(t,l,s);return(!c||!c.dom)&&(c=ii.renderSpec(document,t.type.spec.toDOM(t,s),null,t.attrs)),new ri(e,t,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&Zn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Zn&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Bn){let s=this.parent;for(;!s.node;)s=s.parent;s.dirty<this.dirty&&(s.dirty=this.dirty),this.dirty=Bn}}slice(e,t,s){let l=ri.create(this.parent,this.mark,!0,s),o=this.children,c=this.size;t<c&&(o=qh(o,t,c,s)),e>0&&(o=qh(o,0,e,s));for(let f=0;f<o.length;f++)o[f].parent=l;return l.children=o,l}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ms extends Uo{constructor(e,t,s,l,o,c,f,d,h){super(e,[],o,c),this.node=t,this.outerDeco=s,this.innerDeco=l,this.nodeDOM=f}static create(e,t,s,l,o,c){let f=o.nodeViews[t.type.name],d,h=f&&f(t,o,()=>{if(!d)return c;if(d.parent)return d.parent.posBeforeChild(d)},s,l),m=h&&h.dom,y=h&&h.contentDOM;if(t.isText){if(!m)m=document.createTextNode(t.text);else if(m.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else m||({dom:m,contentDOM:y}=ii.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&m.nodeName!="BR"&&(m.hasAttribute("contenteditable")||(m.contentEditable="false"),t.type.spec.draggable&&(m.draggable=!0));let x=m;return m=Z1(m,s,t),h?d=new cC(e,t,s,l,m,y||null,x,h,o,c+1):t.isText?new bu(e,t,s,l,m,x,o):new ms(e,t,s,l,m,y||null,x,o,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let s=this.children[t];if(this.dom.contains(s.dom.parentNode)){e.contentElement=s.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Z.empty)}return e}matchesNode(e,t,s){return this.dirty==Bn&&e.eq(this.node)&&Nc(t,this.outerDeco)&&s.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let s=this.node.inlineContent,l=t,o=e.composing?this.localCompositionInfo(e,t):null,c=o&&o.pos>-1?o:null,f=o&&o.pos<0,d=new fC(this,c&&c.node,e);pC(this.node,this.innerDeco,(h,m,y)=>{h.spec.marks?d.syncToMarks(h.spec.marks,s,e,m):h.type.side>=0&&!y&&d.syncToMarks(m==this.node.childCount?We.none:this.node.child(m).marks,s,e,m),d.placeWidget(h,e,l)},(h,m,y,x)=>{d.syncToMarks(h.marks,s,e,x);let v;d.findNodeMatch(h,m,y,x)||f&&e.state.selection.from>l&&e.state.selection.to<l+h.nodeSize&&(v=d.findIndexWithChild(o.node))>-1&&d.updateNodeAt(h,m,y,v,e)||d.updateNextNode(h,m,y,e,x,l)||d.addNode(h,m,y,e,l),l+=h.nodeSize}),d.syncToMarks([],s,e,0),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==Ys)&&(c&&this.protectLocalComposition(e,c),X1(this.contentDOM,this.children,e),il&&mC(this.dom))}localCompositionInfo(e,t){let{from:s,to:l}=e.state.selection;if(!(e.state.selection instanceof ve)||s<t||l>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let c=o.nodeValue,f=gC(this.node.content,c,s-t,l-t);return f<0?null:{node:o,pos:f,text:c}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:s,text:l}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let c=new aC(this,o,t,l);e.input.compositionNodes.push(c),this.children=qh(this.children,s,s+l.length,e,c)}update(e,t,s,l){return this.dirty==Zn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,s,l),!0)}updateInner(e,t,s,l){this.updateOuterDeco(t),this.node=e,this.innerDeco=s,this.contentDOM&&this.updateChildren(l,this.posAtStart),this.dirty=Bn}updateOuterDeco(e){if(Nc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,s=this.dom;this.dom=Q1(this.dom,this.nodeDOM,Ih(this.outerDeco,this.node,t),Ih(e,this.node,t)),this.dom!=s&&(s.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function zb(n,e,t,s,l){Z1(s,e,n);let o=new ms(void 0,n,e,t,s,s,s,l,0);return o.contentDOM&&o.updateChildren(l,0),o}class bu extends ms{constructor(e,t,s,l,o,c,f){super(e,t,s,l,o,null,c,f,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,s,l){return this.dirty==Zn||this.dirty!=Bn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Bn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,l.trackWrites==this.nodeDOM&&(l.trackWrites=null)),this.node=e,this.dirty=Bn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,s){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,s)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,s){let l=this.node.cut(e,t),o=document.createTextNode(l.text);return new bu(this.parent,l,this.outerDeco,this.innerDeco,o,o,s)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Zn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class J1 extends Uo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Bn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class cC extends ms{constructor(e,t,s,l,o,c,f,d,h,m){super(e,t,s,l,o,c,f,h,m),this.spec=d}update(e,t,s,l){if(this.dirty==Zn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,s);return o&&this.updateInner(e,t,s,l),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,s,l)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,s,l){this.spec.setSelection?this.spec.setSelection(e,t,s.root):super.setSelection(e,t,s,l)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function X1(n,e,t){let s=n.firstChild,l=!1;for(let o=0;o<e.length;o++){let c=e[o],f=c.dom;if(f.parentNode==n){for(;f!=s;)s=Lb(s),l=!0;s=s.nextSibling}else l=!0,n.insertBefore(f,s);if(c instanceof ri){let d=s?s.previousSibling:n.lastChild;X1(c.contentDOM,c.children,t),s=d?d.nextSibling:n.firstChild}}for(;s;)s=Lb(s),l=!0;l&&t.trackWrites==n&&(t.trackWrites=null)}const go=function(n){n&&(this.nodeName=n)};go.prototype=Object.create(null);const Ks=[new go];function Ih(n,e,t){if(n.length==0)return Ks;let s=t?Ks[0]:new go,l=[s];for(let o=0;o<n.length;o++){let c=n[o].type.attrs;if(c){c.nodeName&&l.push(s=new go(c.nodeName));for(let f in c){let d=c[f];d!=null&&(t&&l.length==1&&l.push(s=new go(e.isInline?"span":"div")),f=="class"?s.class=(s.class?s.class+" ":"")+d:f=="style"?s.style=(s.style?s.style+";":"")+d:f!="nodeName"&&(s[f]=d))}}}return l}function Q1(n,e,t,s){if(t==Ks&&s==Ks)return e;let l=e;for(let o=0;o<s.length;o++){let c=s[o],f=t[o];if(o){let d;f&&f.nodeName==c.nodeName&&l!=n&&(d=l.parentNode)&&d.nodeName.toLowerCase()==c.nodeName||(d=document.createElement(c.nodeName),d.pmIsDeco=!0,d.appendChild(l),f=Ks[0]),l=d}uC(l,f||Ks[0],c)}return l}function uC(n,e,t){for(let s in e)s!="class"&&s!="style"&&s!="nodeName"&&!(s in t)&&n.removeAttribute(s);for(let s in t)s!="class"&&s!="style"&&s!="nodeName"&&t[s]!=e[s]&&n.setAttribute(s,t[s]);if(e.class!=t.class){let s=e.class?e.class.split(" ").filter(Boolean):[],l=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<s.length;o++)l.indexOf(s[o])==-1&&n.classList.remove(s[o]);for(let o=0;o<l.length;o++)s.indexOf(l[o])==-1&&n.classList.add(l[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let s=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,l;for(;l=s.exec(e.style);)n.style.removeProperty(l[1])}t.style&&(n.style.cssText+=t.style)}}function Z1(n,e,t){return Q1(n,n,Ks,Ih(e,t,n.nodeType!=1))}function Nc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Lb(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class fC{constructor(e,t,s){this.lock=t,this.view=s,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=dC(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let s=e;s<t;s++)this.top.children[s].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,s,l){let o=0,c=this.stack.length>>1,f=Math.min(c,e.length);for(;o<f&&(o==c-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<c;)this.destroyRest(),this.top.dirty=Bn,this.index=this.stack.pop(),this.top=this.stack.pop(),c--;for(;c<e.length;){this.stack.push(this.top,this.index+1);let d=-1,h=this.top.children.length;l<this.preMatch.index&&(h=Math.min(this.index+3,h));for(let m=this.index;m<h;m++){let y=this.top.children[m];if(y.matchesMark(e[c])&&!this.isLocked(y.dom)){d=m;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let m=ri.create(this.top,e[c],t,s);this.top.children.splice(this.index,0,m),this.top=m,this.changed=!0}this.index=0,c++}}findNodeMatch(e,t,s,l){let o=-1,c;if(l>=this.preMatch.index&&(c=this.preMatch.matches[l-this.preMatch.index]).parent==this.top&&c.matchesNode(e,t,s))o=this.top.children.indexOf(c,this.index);else for(let f=this.index,d=Math.min(this.top.children.length,f+5);f<d;f++){let h=this.top.children[f];if(h.matchesNode(e,t,s)&&!this.preMatch.matched.has(h)){o=f;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,s,l,o){let c=this.top.children[l];return c.dirty==Zn&&c.dom==c.contentDOM&&(c.dirty=Ys),c.update(e,t,s,o)?(this.destroyBetween(this.index,l),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let s=e.pmViewDesc;if(s){for(let l=this.index;l<this.top.children.length;l++)if(this.top.children[l]==s)return l}return-1}e=t}}updateNextNode(e,t,s,l,o,c){for(let f=this.index;f<this.top.children.length;f++){let d=this.top.children[f];if(d instanceof ms){let h=this.preMatch.matched.get(d);if(h!=null&&h!=o)return!1;let m=d.dom,y,x=this.isLocked(m)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Zn&&Nc(t,d.outerDeco));if(!x&&d.update(e,t,s,l))return this.destroyBetween(this.index,f),d.dom!=m&&(this.changed=!0),this.index++,!0;if(!x&&(y=this.recreateWrapper(d,e,t,s,l,c)))return this.destroyBetween(this.index,f),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=Ys,y.updateChildren(l,c+1),y.dirty=Bn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,s,l,o,c){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Nc(s,e.outerDeco)||!l.eq(e.innerDeco))return null;let f=ms.create(this.top,t,s,l,o,c);if(f.contentDOM){f.children=e.children,e.children=[];for(let d of f.children)d.parent=f}return e.destroy(),f}addNode(e,t,s,l,o){let c=ms.create(this.top,e,t,s,l,o);c.contentDOM&&c.updateChildren(l,o+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,t,s){let l=this.index<this.top.children.length?this.top.children[this.index]:null;if(l&&l.matchesWidget(e)&&(e==l.widget||!l.widget.type.toDOM.parentNode))this.index++;else{let o=new F1(this.top,e,t,s);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ri;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof bu)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Yt||qt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let s=document.createElement(e);e=="IMG"&&(s.className="ProseMirror-separator",s.alt=""),e=="BR"&&(s.className="ProseMirror-trailingBreak");let l=new J1(this.top,[],s,null);t!=this.top?t.children.push(l):t.children.splice(this.index++,0,l),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function dC(n,e){let t=e,s=t.children.length,l=n.childCount,o=new Map,c=[];e:for(;l>0;){let f;for(;;)if(s){let h=t.children[s-1];if(h instanceof ri)t=h,s=h.children.length;else{f=h,s--;break}}else{if(t==e)break e;s=t.parent.children.indexOf(t),t=t.parent}let d=f.node;if(d){if(d!=n.child(l-1))break;--l,o.set(f,l),c.push(f)}}return{index:l,matched:o,matches:c.reverse()}}function hC(n,e){return n.type.side-e.type.side}function pC(n,e,t,s){let l=e.locals(n),o=0;if(l.length==0){for(let h=0;h<n.childCount;h++){let m=n.child(h);s(m,l,e.forChild(o,m),h),o+=m.nodeSize}return}let c=0,f=[],d=null;for(let h=0;;){let m,y;for(;c<l.length&&l[c].to==o;){let M=l[c++];M.widget&&(m?(y||(y=[m])).push(M):m=M)}if(m)if(y){y.sort(hC);for(let M=0;M<y.length;M++)t(y[M],h,!!d)}else t(m,h,!!d);let x,v;if(d)v=-1,x=d,d=null;else if(h<n.childCount)v=h,x=n.child(h++);else break;for(let M=0;M<f.length;M++)f[M].to<=o&&f.splice(M--,1);for(;c<l.length&&l[c].from<=o&&l[c].to>o;)f.push(l[c++]);let k=o+x.nodeSize;if(x.isText){let M=k;c<l.length&&l[c].from<M&&(M=l[c].from);for(let C=0;C<f.length;C++)f[C].to<M&&(M=f[C].to);M<k&&(d=x.cut(M-o),x=x.cut(0,M-o),k=M,v=-1)}else for(;c<l.length&&l[c].to<k;)c++;let E=x.isInline&&!x.isLeaf?f.filter(M=>!M.inline):f.slice();s(x,E,e.forChild(o,x),v),o=k}}function mC(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function gC(n,e,t,s){for(let l=0,o=0;l<n.childCount&&o<=s;){let c=n.child(l++),f=o;if(o+=c.nodeSize,!c.isText)continue;let d=c.text;for(;l<n.childCount;){let h=n.child(l++);if(o+=h.nodeSize,!h.isText)break;d+=h.text}if(o>=t){if(o>=s&&d.slice(s-e.length-f,s-f)==e)return s-e.length;let h=f<s?d.lastIndexOf(e,s-f-1):-1;if(h>=0&&h+e.length+f>=t)return f+h;if(t==s&&d.length>=s+e.length-f&&d.slice(s-f,s-f+e.length)==e)return s}}return-1}function qh(n,e,t,s,l){let o=[];for(let c=0,f=0;c<n.length;c++){let d=n[c],h=f,m=f+=d.size;h>=t||m<=e?o.push(d):(h<e&&o.push(d.slice(0,e-h,s)),l&&(o.push(l),l=void 0),m>t&&o.push(d.slice(t-h,d.size,s)))}return o}function vp(n,e=null){let t=n.domSelectionRange(),s=n.state.doc;if(!t.focusNode)return null;let l=n.docView.nearestDesc(t.focusNode),o=l&&l.size==0,c=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(c<0)return null;let f=s.resolve(c),d,h;if(yu(t)){for(d=c;l&&!l.node;)l=l.parent;let y=l.node;if(l&&y.isAtom&&ye.isSelectable(y)&&l.parent&&!(y.isInline&&$M(t.focusNode,t.focusOffset,l.dom))){let x=l.posBefore;h=new ye(c==x?f:s.resolve(x))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=c,x=c;for(let v=0;v<t.rangeCount;v++){let k=t.getRangeAt(v);y=Math.min(y,n.docView.posFromDOM(k.startContainer,k.startOffset,1)),x=Math.max(x,n.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(y<0)return null;[d,c]=x==n.state.selection.anchor?[x,y]:[y,x],f=s.resolve(c)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let m=s.resolve(d);if(!h){let y=e=="pointer"||n.state.selection.head<f.pos&&!o?1:-1;h=Sp(n,m,f,y)}return h}function W1(n){return n.editable?n.hasFocus():tv(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Mr(n,e=!1){let t=n.state.selection;if(ev(n,t),!!W1(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&qt){let s=n.domSelectionRange(),l=n.domObserver.currentSelection;if(s.anchorNode&&l.anchorNode&&ni(s.anchorNode,s.anchorOffset,l.anchorNode,l.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)bC(n);else{let{anchor:s,head:l}=t,o,c;_b&&!(t instanceof ve)&&(t.$from.parent.inlineContent||(o=Bb(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(c=Bb(n,t.to))),n.docView.setSelection(s,l,n,e),_b&&(o&&Hb(o),c&&Hb(c)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&yC(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const _b=Yt||qt&&I1<63;function Bb(n,e){let{node:t,offset:s}=n.docView.domFromPos(e,0),l=s<t.childNodes.length?t.childNodes[s]:null,o=s?t.childNodes[s-1]:null;if(Yt&&l&&l.contentEditable=="false")return ch(l);if((!l||l.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(l)return ch(l);if(o)return ch(o)}}function ch(n){return n.contentEditable="true",Yt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Hb(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function yC(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),s=t.anchorNode,l=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=s||t.anchorOffset!=l)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!W1(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function bC(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,s=t.nodeName=="IMG";s?e.collapse(t.parentNode,Ut(t)+1):e.collapse(t,0),!s&&!n.state.selection.visible&&on&&ps<=11&&(t.disabled=!0,t.disabled=!1)}function ev(n,e){if(e instanceof ye){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Ub(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Ub(n)}function Ub(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Sp(n,e,t,s){return n.someProp("createSelectionBetween",l=>l(n,e,t))||ve.between(e,t,s)}function Ib(n){return n.editable&&!n.hasFocus()?!1:tv(n)}function tv(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function xC(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return ni(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Vh(n,e){let{$anchor:t,$head:s}=n.selection,l=e>0?t.max(s):t.min(s),o=l.parent.inlineContent?l.depth?n.doc.resolve(e>0?l.after():l.before()):null:l;return o&&De.findFrom(o,e)}function rs(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function qb(n,e,t){let s=n.state.selection;if(s instanceof ve)if(t.indexOf("s")>-1){let{$head:l}=s,o=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let c=n.state.doc.resolve(l.pos+o.nodeSize*(e<0?-1:1));return rs(n,new ve(s.$anchor,c))}else if(s.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let l=Vh(n.state,e);return l&&l instanceof ye?rs(n,l):!1}else if(!(zn&&t.indexOf("m")>-1)){let l=s.$head,o=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter,c;if(!o||o.isText)return!1;let f=e<0?l.pos-o.nodeSize:l.pos;return o.isAtom||(c=n.docView.descAt(f))&&!c.contentDOM?ye.isSelectable(o)?rs(n,new ye(e<0?n.state.doc.resolve(l.pos-o.nodeSize):l)):Ho?rs(n,new ve(n.state.doc.resolve(e<0?f:f+o.nodeSize))):!1:!1}}else return!1;else{if(s instanceof ye&&s.node.isInline)return rs(n,new ve(e>0?s.$to:s.$from));{let l=Vh(n.state,e);return l?rs(n,l):!1}}}function Ac(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function yo(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Fi(n,e){return e<0?vC(n):SC(n)}function vC(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let l,o,c=!1;for(_n&&t.nodeType==1&&s<Ac(t)&&yo(t.childNodes[s],-1)&&(c=!0);;)if(s>0){if(t.nodeType!=1)break;{let f=t.childNodes[s-1];if(yo(f,-1))l=t,o=--s;else if(f.nodeType==3)t=f,s=t.nodeValue.length;else break}}else{if(nv(t))break;{let f=t.previousSibling;for(;f&&yo(f,-1);)l=t.parentNode,o=Ut(f),f=f.previousSibling;if(f)t=f,s=Ac(t);else{if(t=t.parentNode,t==n.dom)break;s=0}}}c?$h(n,t,s):l&&$h(n,l,o)}function SC(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let l=Ac(t),o,c;for(;;)if(s<l){if(t.nodeType!=1)break;let f=t.childNodes[s];if(yo(f,1))o=t,c=++s;else break}else{if(nv(t))break;{let f=t.nextSibling;for(;f&&yo(f,1);)o=f.parentNode,c=Ut(f)+1,f=f.nextSibling;if(f)t=f,s=0,l=Ac(t);else{if(t=t.parentNode,t==n.dom)break;s=l=0}}}o&&$h(n,o,c)}function nv(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function kC(n,e){for(;n&&e==n.childNodes.length&&!Bo(n);)e=Ut(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function TC(n,e){for(;n&&!e&&!Bo(n);)e=Ut(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function $h(n,e,t){if(e.nodeType!=3){let o,c;(c=kC(e,t))?(e=c,t=0):(o=TC(e,t))&&(e=o,t=o.nodeValue.length)}let s=n.domSelection();if(!s)return;if(yu(s)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),s.removeAllRanges(),s.addRange(o)}else s.extend&&s.extend(e,t);n.domObserver.setCurSelection();let{state:l}=n;setTimeout(()=>{n.state==l&&Mr(n)},50)}function Vb(n,e){let t=n.state.doc.resolve(e);if(!(qt||q1)&&t.parent.inlineContent){let l=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),c=(o.top+o.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(o.left-l.left)>1)return o.left<l.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),c=(o.top+o.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(o.left-l.left)>1)return o.left>l.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function $b(n,e,t){let s=n.state.selection;if(s instanceof ve&&!s.empty||t.indexOf("s")>-1||zn&&t.indexOf("m")>-1)return!1;let{$from:l,$to:o}=s;if(!l.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let c=Vh(n.state,e);if(c&&c instanceof ye)return rs(n,c)}if(!l.parent.inlineContent){let c=e<0?l:o,f=s instanceof vn?De.near(c,e):De.findFrom(c,e);return f?rs(n,f):!1}return!1}function Gb(n,e){if(!(n.state.selection instanceof ve))return!0;let{$head:t,$anchor:s,empty:l}=n.state.selection;if(!t.sameParent(s))return!0;if(!l)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let c=n.state.tr;return e<0?c.delete(t.pos-o.nodeSize,t.pos):c.delete(t.pos,t.pos+o.nodeSize),n.dispatch(c),!0}return!1}function Yb(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function EC(n){if(!Yt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let s=e.firstChild;Yb(n,s,"true"),setTimeout(()=>Yb(n,s,"false"),20)}return!1}function MC(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function CC(n,e){let t=e.keyCode,s=MC(e);if(t==8||zn&&t==72&&s=="c")return Gb(n,-1)||Fi(n,-1);if(t==46&&!e.shiftKey||zn&&t==68&&s=="c")return Gb(n,1)||Fi(n,1);if(t==13||t==27)return!0;if(t==37||zn&&t==66&&s=="c"){let l=t==37?Vb(n,n.state.selection.from)=="ltr"?-1:1:-1;return qb(n,l,s)||Fi(n,l)}else if(t==39||zn&&t==70&&s=="c"){let l=t==39?Vb(n,n.state.selection.from)=="ltr"?1:-1:1;return qb(n,l,s)||Fi(n,l)}else{if(t==38||zn&&t==80&&s=="c")return $b(n,-1,s)||Fi(n,-1);if(t==40||zn&&t==78&&s=="c")return EC(n)||$b(n,1,s)||Fi(n,1);if(s==(zn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function kp(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:s,openStart:l,openEnd:o}=e;for(;l>1&&o>1&&s.childCount==1&&s.firstChild.childCount==1;){l--,o--;let v=s.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),s=v.content}let c=n.someProp("clipboardSerializer")||ii.fromSchema(n.state.schema),f=av(),d=f.createElement("div");d.appendChild(c.serializeFragment(s,{document:f}));let h=d.firstChild,m,y=0;for(;h&&h.nodeType==1&&(m=ov[h.nodeName.toLowerCase()]);){for(let v=m.length-1;v>=0;v--){let k=f.createElement(m[v]);for(;d.firstChild;)k.appendChild(d.firstChild);d.appendChild(k),y++}h=d.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${l} ${o}${y?` -${y}`:""} ${JSON.stringify(t)}`);let x=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:x,slice:e}}function rv(n,e,t,s,l){let o=l.parent.type.spec.code,c,f;if(!t&&!e)return null;let d=!!e&&(s||o||!t);if(d){if(n.someProp("transformPastedText",x=>{e=x(e,o||s,n)}),o)return f=new ae(Z.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",x=>{f=x(f,n,!0)}),f;let y=n.someProp("clipboardTextParser",x=>x(e,l,s,n));if(y)f=y;else{let x=l.marks(),{schema:v}=n.state,k=ii.fromSchema(v);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let M=c.appendChild(document.createElement("p"));E&&M.appendChild(k.serializeNode(v.text(E,x)))})}}else n.someProp("transformPastedHTML",y=>{t=y(t,n)}),c=OC(t),Ho&&DC(c);let h=c&&c.querySelector("[data-pm-slice]"),m=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(m&&m[3])for(let y=+m[3];y>0;y--){let x=c.firstChild;for(;x&&x.nodeType!=1;)x=x.nextSibling;if(!x)break;c=x}if(f||(f=(n.someProp("clipboardParser")||n.someProp("domParser")||hs.fromSchema(n.state.schema)).parseSlice(c,{preserveWhitespace:!!(d||m),context:l,ruleFromNode(x){return x.nodeName=="BR"&&!x.nextSibling&&x.parentNode&&!wC.test(x.parentNode.nodeName)?{ignore:!0}:null}})),m)f=jC(Kb(f,+m[1],+m[2]),m[4]);else if(f=ae.maxOpen(NC(f.content,l),!0),f.openStart||f.openEnd){let y=0,x=0;for(let v=f.content.firstChild;y<f.openStart&&!v.type.spec.isolating;y++,v=v.firstChild);for(let v=f.content.lastChild;x<f.openEnd&&!v.type.spec.isolating;x++,v=v.lastChild);f=Kb(f,y,x)}return n.someProp("transformPasted",y=>{f=y(f,n,d)}),f}const wC=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function NC(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let l=e.node(t).contentMatchAt(e.index(t)),o,c=[];if(n.forEach(f=>{if(!c)return;let d=l.findWrapping(f.type),h;if(!d)return c=null;if(h=c.length&&o.length&&iv(d,o,f,c[c.length-1],0))c[c.length-1]=h;else{c.length&&(c[c.length-1]=lv(c[c.length-1],o.length));let m=sv(f,d);c.push(m),l=l.matchType(m.type),o=d}}),c)return Z.from(c)}return n}function sv(n,e,t=0){for(let s=e.length-1;s>=t;s--)n=e[s].create(null,Z.from(n));return n}function iv(n,e,t,s,l){if(l<n.length&&l<e.length&&n[l]==e[l]){let o=iv(n,e,t,s.lastChild,l+1);if(o)return s.copy(s.content.replaceChild(s.childCount-1,o));if(s.contentMatchAt(s.childCount).matchType(l==n.length-1?t.type:n[l+1]))return s.copy(s.content.append(Z.from(sv(t,n,l+1))))}}function lv(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,lv(n.lastChild,e-1)),s=n.contentMatchAt(n.childCount).fillBefore(Z.empty,!0);return n.copy(t.append(s))}function Gh(n,e,t,s,l,o){let c=e<0?n.firstChild:n.lastChild,f=c.content;return n.childCount>1&&(o=0),l<s-1&&(f=Gh(f,e,t,s,l+1,o)),l>=t&&(f=e<0?c.contentMatchAt(0).fillBefore(f,o<=l).append(f):f.append(c.contentMatchAt(c.childCount).fillBefore(Z.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,c.copy(f))}function Kb(n,e,t){return e<n.openStart&&(n=new ae(Gh(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new ae(Gh(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const ov={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Pb=null;function av(){return Pb||(Pb=document.implementation.createHTMLDocument("title"))}let uh=null;function AC(n){let e=window.trustedTypes;return e?(uh||(uh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),uh.createHTML(n)):n}function OC(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=av().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(n),l;if((l=s&&ov[s[1].toLowerCase()])&&(n=l.map(o=>"<"+o+">").join("")+n+l.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=AC(n),l)for(let o=0;o<l.length;o++)t=t.querySelector(l[o])||t;return t}function DC(n){let e=n.querySelectorAll(qt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let s=e[t];s.childNodes.length==1&&s.textContent==""&&s.parentNode&&s.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),s)}}function jC(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,s;try{s=JSON.parse(e)}catch{return n}let{content:l,openStart:o,openEnd:c}=n;for(let f=s.length-2;f>=0;f-=2){let d=t.nodes[s[f]];if(!d||d.hasRequiredAttrs())break;l=Z.from(d.create(s[f+1],l)),o++,c++}return new ae(l,o,c)}const Jt={},Xt={},RC={touchstart:!0,touchmove:!0};class zC{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function LC(n){for(let e in Jt){let t=Jt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=s=>{BC(n,s)&&!Tp(n,s)&&(n.editable||!(s.type in Xt))&&t(n,s)},RC[e]?{passive:!0}:void 0)}Yt&&n.dom.addEventListener("input",()=>null),Yh(n)}function fs(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function _C(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Yh(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=s=>Tp(n,s))})}function Tp(n,e){return n.someProp("handleDOMEvents",t=>{let s=t[e.type];return s?s(n,e)||e.defaultPrevented:!1})}function BC(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function HC(n,e){!Tp(n,e)&&Jt[e.type]&&(n.editable||!(e.type in Xt))&&Jt[e.type](n,e)}Xt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!uv(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Tr&&qt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),il&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let s=Date.now();n.input.lastIOSEnter=s,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==s&&(n.someProp("handleKeyDown",l=>l(n,Gs(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",s=>s(n,t))||CC(n,t)?t.preventDefault():fs(n,"key")};Xt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Xt.keypress=(n,e)=>{let t=e;if(uv(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||zn&&t.metaKey)return;if(n.someProp("handleKeyPress",l=>l(n,t))){t.preventDefault();return}let s=n.state.selection;if(!(s instanceof ve)||!s.$from.sameParent(s.$to)){let l=String.fromCharCode(t.charCode),o=()=>n.state.tr.insertText(l).scrollIntoView();!/[\r\n]/.test(l)&&!n.someProp("handleTextInput",c=>c(n,s.$from.pos,s.$to.pos,l,o))&&n.dispatch(o()),t.preventDefault()}};function xu(n){return{left:n.clientX,top:n.clientY}}function UC(n,e){let t=e.x-n.clientX,s=e.y-n.clientY;return t*t+s*s<100}function Ep(n,e,t,s,l){if(s==-1)return!1;let o=n.state.doc.resolve(s);for(let c=o.depth+1;c>0;c--)if(n.someProp(e,f=>c>o.depth?f(n,t,o.nodeAfter,o.before(c),l,!0):f(n,t,o.node(c),o.before(c),l,!1)))return!0;return!1}function tl(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let s=n.state.tr.setSelection(e);s.setMeta("pointer",!0),n.dispatch(s)}function IC(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),s=t.nodeAfter;return s&&s.isAtom&&ye.isSelectable(s)?(tl(n,new ye(t)),!0):!1}function qC(n,e){if(e==-1)return!1;let t=n.state.selection,s,l;t instanceof ye&&(s=t.node);let o=n.state.doc.resolve(e);for(let c=o.depth+1;c>0;c--){let f=c>o.depth?o.nodeAfter:o.node(c);if(ye.isSelectable(f)){s&&t.$from.depth>0&&c>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?l=o.before(t.$from.depth):l=o.before(c);break}}return l!=null?(tl(n,ye.create(n.state.doc,l)),!0):!1}function VC(n,e,t,s,l){return Ep(n,"handleClickOn",e,t,s)||n.someProp("handleClick",o=>o(n,e,s))||(l?qC(n,t):IC(n,t))}function $C(n,e,t,s){return Ep(n,"handleDoubleClickOn",e,t,s)||n.someProp("handleDoubleClick",l=>l(n,e,s))}function GC(n,e,t,s){return Ep(n,"handleTripleClickOn",e,t,s)||n.someProp("handleTripleClick",l=>l(n,e,s))||YC(n,t,s)}function YC(n,e,t){if(t.button!=0)return!1;let s=n.state.doc;if(e==-1)return s.inlineContent?(tl(n,ve.create(s,0,s.content.size)),!0):!1;let l=s.resolve(e);for(let o=l.depth+1;o>0;o--){let c=o>l.depth?l.nodeAfter:l.node(o),f=l.before(o);if(c.inlineContent)tl(n,ve.create(s,f+1,f+1+c.content.size));else if(ye.isSelectable(c))tl(n,ye.create(s,f));else continue;return!0}}function Mp(n){return Oc(n)}const cv=zn?"metaKey":"ctrlKey";Jt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let s=Mp(n),l=Date.now(),o="singleClick";l-n.input.lastClick.time<500&&UC(t,n.input.lastClick)&&!t[cv]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:l,x:t.clientX,y:t.clientY,type:o,button:t.button};let c=n.posAtCoords(xu(t));c&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new KC(n,c,t,!!s)):(o=="doubleClick"?$C:GC)(n,c.pos,c.inside,t)?t.preventDefault():fs(n,"pointer"))};class KC{constructor(e,t,s,l){this.view=e,this.pos=t,this.event=s,this.flushed=l,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!s[cv],this.allowDefault=s.shiftKey;let o,c;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),c=t.inside;else{let m=e.state.doc.resolve(t.pos);o=m.parent,c=m.depth?m.before():0}const f=l?null:s.target,d=f?e.docView.nearestDesc(f,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:h}=e.state;(s.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof ye&&h.from<=c&&h.to>c)&&(this.mightDrag={node:o,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&_n&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),fs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Mr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(xu(e))),this.updateAllowDefault(e),this.allowDefault||!t?fs(this.view,"pointer"):VC(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Yt&&this.mightDrag&&!this.mightDrag.node.isAtom||qt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(tl(this.view,De.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):fs(this.view,"pointer")}move(e){this.updateAllowDefault(e),fs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Jt.touchstart=n=>{n.input.lastTouch=Date.now(),Mp(n),fs(n,"pointer")};Jt.touchmove=n=>{n.input.lastTouch=Date.now(),fs(n,"pointer")};Jt.contextmenu=n=>Mp(n);function uv(n,e){return n.composing?!0:Yt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const PC=Tr?5e3:-1;Xt.compositionstart=Xt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof ve&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(s=>s.type.spec.inclusive===!1)||qt&&q1&&FC(n)))n.markCursor=n.state.storedMarks||t.marks(),Oc(n,!0),n.markCursor=null;else if(Oc(n,!e.selection.empty),_n&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let s=n.domSelectionRange();for(let l=s.focusNode,o=s.focusOffset;l&&l.nodeType==1&&o!=0;){let c=o<0?l.lastChild:l.childNodes[o-1];if(!c)break;if(c.nodeType==3){let f=n.domSelection();f&&f.collapse(c,c.nodeValue.length);break}else l=c,o=-1}}n.input.composing=!0}fv(n,PC)};function FC(n){let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(!e||e.nodeType!=1||t>=e.childNodes.length)return!1;let s=e.childNodes[t];return s.nodeType==1&&s.contentEditable=="false"}Xt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.badSafariComposition?n.domObserver.forceFlush():n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,fv(n,20))};function fv(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Oc(n),e))}function dv(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=XC());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function JC(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=qM(e.focusNode,e.focusOffset),s=VM(e.focusNode,e.focusOffset);if(t&&s&&t!=s){let l=s.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||s==o)return o;if(!l||!l.isText(s.nodeValue))return s;if(n.input.compositionNode==s){let c=t.pmViewDesc;if(!(!c||!c.isText(t.nodeValue)))return s}}return t||s}function XC(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Oc(n,e=!1){if(!(Tr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),dv(n),e||n.docView&&n.docView.dirty){let t=vp(n),s=n.state.selection;return t&&!t.eq(s)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!s.$from.node(s.$from.sharedDepth(s.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function QC(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let s=getSelection(),l=document.createRange();l.selectNodeContents(e),n.dom.blur(),s.removeAllRanges(),s.addRange(l),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const No=on&&ps<15||il&&KM<604;Jt.copy=Xt.cut=(n,e)=>{let t=e,s=n.state.selection,l=t.type=="cut";if(s.empty)return;let o=No?null:t.clipboardData,c=s.content(),{dom:f,text:d}=kp(n,c);o?(t.preventDefault(),o.clearData(),o.setData("text/html",f.innerHTML),o.setData("text/plain",d)):QC(n,f),l&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ZC(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function WC(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,s=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(s.contentEditable="true"),s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus();let l=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),s.parentNode&&s.parentNode.removeChild(s),t?Ao(n,s.value,null,l,e):Ao(n,s.textContent,s.innerHTML,l,e)},50)}function Ao(n,e,t,s,l){let o=rv(n,e,t,s,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,l,o||ae.empty)))return!0;if(!o)return!1;let c=ZC(o),f=c?n.state.tr.replaceSelectionWith(c,s):n.state.tr.replaceSelection(o);return n.dispatch(f.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function hv(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Xt.paste=(n,e)=>{let t=e;if(n.composing&&!Tr)return;let s=No?null:t.clipboardData,l=n.input.shiftKey&&n.input.lastKeyCode!=45;s&&Ao(n,hv(s),s.getData("text/html"),l,t)?t.preventDefault():WC(n,t)};class pv{constructor(e,t,s){this.slice=e,this.move=t,this.node=s}}const ew=zn?"altKey":"ctrlKey";function mv(n,e){let t=n.someProp("dragCopies",s=>!s(e));return t??!e[ew]}Jt.dragstart=(n,e)=>{let t=e,s=n.input.mouseDown;if(s&&s.done(),!t.dataTransfer)return;let l=n.state.selection,o=l.empty?null:n.posAtCoords(xu(t)),c;if(!(o&&o.pos>=l.from&&o.pos<=(l instanceof ye?l.to-1:l.to))){if(s&&s.mightDrag)c=ye.create(n.state.doc,s.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=n.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=n.docView&&(c=ye.create(n.state.doc,y.posBefore))}}let f=(c||n.state.selection).content(),{dom:d,text:h,slice:m}=kp(n,f);(!t.dataTransfer.files.length||!qt||I1>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(No?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",No||t.dataTransfer.setData("text/plain",h),n.dragging=new pv(m,mv(n,t),c)};Jt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Xt.dragover=Xt.dragenter=(n,e)=>e.preventDefault();Xt.drop=(n,e)=>{try{tw(n,e,n.dragging)}finally{n.dragging=null}};function tw(n,e,t){if(!e.dataTransfer)return;let s=n.posAtCoords(xu(e));if(!s)return;let l=n.state.doc.resolve(s.pos),o=t&&t.slice;o?n.someProp("transformPasted",v=>{o=v(o,n,!1)}):o=rv(n,hv(e.dataTransfer),No?null:e.dataTransfer.getData("text/html"),!1,l);let c=!!(t&&mv(n,e));if(n.someProp("handleDrop",v=>v(n,e,o||ae.empty,c))){e.preventDefault();return}if(!o)return;e.preventDefault();let f=o?x1(n.state.doc,l.pos,o):l.pos;f==null&&(f=l.pos);let d=n.state.tr;if(c){let{node:v}=t;v?v.replace(d):d.deleteSelection()}let h=d.mapping.map(f),m=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,y=d.doc;if(m?d.replaceRangeWith(h,h,o.content.firstChild):d.replaceRange(h,h,o),d.doc.eq(y))return;let x=d.doc.resolve(h);if(m&&ye.isSelectable(o.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new ye(x));else{let v=d.mapping.map(f);d.mapping.maps[d.mapping.maps.length-1].forEach((k,E,M,C)=>v=C),d.setSelection(Sp(n,x,d.doc.resolve(v)))}n.focus(),n.dispatch(d.setMeta("uiEvent","drop"))}Jt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Mr(n)},20))};Jt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Jt.beforeinput=(n,e)=>{if(qt&&Tr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:s}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=s||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,Gs(8,"Backspace")))))return;let{$cursor:l}=n.state.selection;l&&l.pos>0&&n.dispatch(n.state.tr.delete(l.pos-1,l.pos).scrollIntoView())},50)}};for(let n in Xt)Jt[n]=Xt[n];function Oo(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Dc{constructor(e,t){this.toDOM=e,this.spec=t||Qs,this.side=this.spec.side||0}map(e,t,s,l){let{pos:o,deleted:c}=e.mapResult(t.from+l,this.side<0?-1:1);return c?null:new Ft(o-s,o-s,this)}valid(){return!0}eq(e){return this==e||e instanceof Dc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Oo(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class gs{constructor(e,t){this.attrs=e,this.spec=t||Qs}map(e,t,s,l){let o=e.map(t.from+l,this.spec.inclusiveStart?-1:1)-s,c=e.map(t.to+l,this.spec.inclusiveEnd?1:-1)-s;return o>=c?null:new Ft(o,c,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof gs&&Oo(this.attrs,e.attrs)&&Oo(this.spec,e.spec)}static is(e){return e.type instanceof gs}destroy(){}}class Cp{constructor(e,t){this.attrs=e,this.spec=t||Qs}map(e,t,s,l){let o=e.mapResult(t.from+l,1);if(o.deleted)return null;let c=e.mapResult(t.to+l,-1);return c.deleted||c.pos<=o.pos?null:new Ft(o.pos-s,c.pos-s,this)}valid(e,t){let{index:s,offset:l}=e.content.findIndex(t.from),o;return l==t.from&&!(o=e.child(s)).isText&&l+o.nodeSize==t.to}eq(e){return this==e||e instanceof Cp&&Oo(this.attrs,e.attrs)&&Oo(this.spec,e.spec)}destroy(){}}class Ft{constructor(e,t,s){this.from=e,this.to=t,this.type=s}copy(e,t){return new Ft(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,s){return this.type.map(e,this,t,s)}static widget(e,t,s){return new Ft(e,e,new Dc(t,s))}static inline(e,t,s,l){return new Ft(e,t,new gs(s,l))}static node(e,t,s,l){return new Ft(e,t,new Cp(s,l))}get spec(){return this.type.spec}get inline(){return this.type instanceof gs}get widget(){return this.type instanceof Dc}}const Xi=[],Qs={};class at{constructor(e,t){this.local=e.length?e:Xi,this.children=t.length?t:Xi}static create(e,t){return t.length?jc(t,e,0,Qs):Gt}find(e,t,s){let l=[];return this.findInner(e??0,t??1e9,l,0,s),l}findInner(e,t,s,l,o){for(let c=0;c<this.local.length;c++){let f=this.local[c];f.from<=t&&f.to>=e&&(!o||o(f.spec))&&s.push(f.copy(f.from+l,f.to+l))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<t&&this.children[c+1]>e){let f=this.children[c]+1;this.children[c+2].findInner(e-f,t-f,s,l+f,o)}}map(e,t,s){return this==Gt||e.maps.length==0?this:this.mapInner(e,t,0,0,s||Qs)}mapInner(e,t,s,l,o){let c;for(let f=0;f<this.local.length;f++){let d=this.local[f].map(e,s,l);d&&d.type.valid(t,d)?(c||(c=[])).push(d):o.onRemove&&o.onRemove(this.local[f].spec)}return this.children.length?nw(this.children,c||[],e,t,s,l,o):c?new at(c.sort(Zs),Xi):Gt}add(e,t){return t.length?this==Gt?at.create(e,t):this.addInner(e,t,0):this}addInner(e,t,s){let l,o=0;e.forEach((f,d)=>{let h=d+s,m;if(m=yv(t,f,h)){for(l||(l=this.children.slice());o<l.length&&l[o]<d;)o+=3;l[o]==d?l[o+2]=l[o+2].addInner(f,m,h+1):l.splice(o,0,d,d+f.nodeSize,jc(m,f,h+1,Qs)),o+=3}});let c=gv(o?bv(t):t,-s);for(let f=0;f<c.length;f++)c[f].type.valid(e,c[f])||c.splice(f--,1);return new at(c.length?this.local.concat(c).sort(Zs):this.local,l||this.children)}remove(e){return e.length==0||this==Gt?this:this.removeInner(e,0)}removeInner(e,t){let s=this.children,l=this.local;for(let o=0;o<s.length;o+=3){let c,f=s[o]+t,d=s[o+1]+t;for(let m=0,y;m<e.length;m++)(y=e[m])&&y.from>f&&y.to<d&&(e[m]=null,(c||(c=[])).push(y));if(!c)continue;s==this.children&&(s=this.children.slice());let h=s[o+2].removeInner(c,f+1);h!=Gt?s[o+2]=h:(s.splice(o,3),o-=3)}if(l.length){for(let o=0,c;o<e.length;o++)if(c=e[o])for(let f=0;f<l.length;f++)l[f].eq(c,t)&&(l==this.local&&(l=this.local.slice()),l.splice(f--,1))}return s==this.children&&l==this.local?this:l.length||s.length?new at(l,s):Gt}forChild(e,t){if(this==Gt)return this;if(t.isLeaf)return at.empty;let s,l;for(let f=0;f<this.children.length;f+=3)if(this.children[f]>=e){this.children[f]==e&&(s=this.children[f+2]);break}let o=e+1,c=o+t.content.size;for(let f=0;f<this.local.length;f++){let d=this.local[f];if(d.from<c&&d.to>o&&d.type instanceof gs){let h=Math.max(o,d.from)-o,m=Math.min(c,d.to)-o;h<m&&(l||(l=[])).push(d.copy(h,m))}}if(l){let f=new at(l.sort(Zs),Xi);return s?new ls([f,s]):f}return s||Gt}eq(e){if(this==e)return!0;if(!(e instanceof at)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return wp(this.localsInner(e))}localsInner(e){if(this==Gt)return Xi;if(e.inlineContent||!this.local.some(gs.is))return this.local;let t=[];for(let s=0;s<this.local.length;s++)this.local[s].type instanceof gs||t.push(this.local[s]);return t}forEachSet(e){e(this)}}at.empty=new at([],[]);at.removeOverlap=wp;const Gt=at.empty;class ls{constructor(e){this.members=e}map(e,t){const s=this.members.map(l=>l.map(e,t,Qs));return ls.from(s)}forChild(e,t){if(t.isLeaf)return at.empty;let s=[];for(let l=0;l<this.members.length;l++){let o=this.members[l].forChild(e,t);o!=Gt&&(o instanceof ls?s=s.concat(o.members):s.push(o))}return ls.from(s)}eq(e){if(!(e instanceof ls)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,s=!0;for(let l=0;l<this.members.length;l++){let o=this.members[l].localsInner(e);if(o.length)if(!t)t=o;else{s&&(t=t.slice(),s=!1);for(let c=0;c<o.length;c++)t.push(o[c])}}return t?wp(s?t:t.sort(Zs)):Xi}static from(e){switch(e.length){case 0:return Gt;case 1:return e[0];default:return new ls(e.every(t=>t instanceof at)?e:e.reduce((t,s)=>t.concat(s instanceof at?s:s.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function nw(n,e,t,s,l,o,c){let f=n.slice();for(let h=0,m=o;h<t.maps.length;h++){let y=0;t.maps[h].forEach((x,v,k,E)=>{let M=E-k-(v-x);for(let C=0;C<f.length;C+=3){let L=f[C+1];if(L<0||x>L+m-y)continue;let $=f[C]+m-y;v>=$?f[C+1]=x<=$?-2:-1:x>=m&&M&&(f[C]+=M,f[C+1]+=M)}y+=M}),m=t.maps[h].map(m,-1)}let d=!1;for(let h=0;h<f.length;h+=3)if(f[h+1]<0){if(f[h+1]==-2){d=!0,f[h+1]=-1;continue}let m=t.map(n[h]+o),y=m-l;if(y<0||y>=s.content.size){d=!0;continue}let x=t.map(n[h+1]+o,-1),v=x-l,{index:k,offset:E}=s.content.findIndex(y),M=s.maybeChild(k);if(M&&E==y&&E+M.nodeSize==v){let C=f[h+2].mapInner(t,M,m+1,n[h]+o+1,c);C!=Gt?(f[h]=y,f[h+1]=v,f[h+2]=C):(f[h+1]=-2,d=!0)}else d=!0}if(d){let h=rw(f,n,e,t,l,o,c),m=jc(h,s,0,c);e=m.local;for(let y=0;y<f.length;y+=3)f[y+1]<0&&(f.splice(y,3),y-=3);for(let y=0,x=0;y<m.children.length;y+=3){let v=m.children[y];for(;x<f.length&&f[x]<v;)x+=3;f.splice(x,0,m.children[y],m.children[y+1],m.children[y+2])}}return new at(e.sort(Zs),f)}function gv(n,e){if(!e||!n.length)return n;let t=[];for(let s=0;s<n.length;s++){let l=n[s];t.push(new Ft(l.from+e,l.to+e,l.type))}return t}function rw(n,e,t,s,l,o,c){function f(d,h){for(let m=0;m<d.local.length;m++){let y=d.local[m].map(s,l,h);y?t.push(y):c.onRemove&&c.onRemove(d.local[m].spec)}for(let m=0;m<d.children.length;m+=3)f(d.children[m+2],d.children[m]+h+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&f(n[d+2],e[d]+o+1);return t}function yv(n,e,t){if(e.isLeaf)return null;let s=t+e.nodeSize,l=null;for(let o=0,c;o<n.length;o++)(c=n[o])&&c.from>t&&c.to<s&&((l||(l=[])).push(c),n[o]=null);return l}function bv(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function jc(n,e,t,s){let l=[],o=!1;e.forEach((f,d)=>{let h=yv(n,f,d+t);if(h){o=!0;let m=jc(h,f,t+d+1,s);m!=Gt&&l.push(d,d+f.nodeSize,m)}});let c=gv(o?bv(n):n,-t).sort(Zs);for(let f=0;f<c.length;f++)c[f].type.valid(e,c[f])||(s.onRemove&&s.onRemove(c[f].spec),c.splice(f--,1));return c.length||l.length?new at(c,l):Gt}function Zs(n,e){return n.from-e.from||n.to-e.to}function wp(n){let e=n;for(let t=0;t<e.length-1;t++){let s=e[t];if(s.from!=s.to)for(let l=t+1;l<e.length;l++){let o=e[l];if(o.from==s.from){o.to!=s.to&&(e==n&&(e=n.slice()),e[l]=o.copy(o.from,s.to),Fb(e,l+1,o.copy(s.to,o.to)));continue}else{o.from<s.to&&(e==n&&(e=n.slice()),e[t]=s.copy(s.from,o.from),Fb(e,l,s.copy(o.from,s.to)));break}}}return e}function Fb(n,e,t){for(;e<n.length&&Zs(t,n[e])>0;)e++;n.splice(e,0,t)}function fh(n){let e=[];return n.someProp("decorations",t=>{let s=t(n.state);s&&s!=Gt&&e.push(s)}),n.cursorWrapper&&e.push(at.create(n.state.doc,[n.cursorWrapper.deco])),ls.from(e)}const sw={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},iw=on&&ps<=11;class lw{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class ow{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new lw,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(s=>{for(let l=0;l<s.length;l++)this.queue.push(s[l]);on&&ps<=11&&s.some(l=>l.type=="childList"&&l.removedNodes.length||l.type=="characterData"&&l.oldValue.length>l.target.nodeValue.length)?this.flushSoon():Yt&&e.composing&&s.some(l=>l.type=="childList"&&l.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),iw&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,sw)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ib(this.view)){if(this.suppressingSelectionUpdates)return Mr(this.view);if(on&&ps<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ni(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,s;for(let o=e.focusNode;o;o=sl(o))t.add(o);for(let o=e.anchorNode;o;o=sl(o))if(t.has(o)){s=o;break}let l=s&&this.view.docView.nearestDesc(s);if(l&&l.ignoreMutation({type:"selection",target:s.nodeType==3?s.parentNode:s}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let s=e.domSelectionRange(),l=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(s)&&Ib(e)&&!this.ignoreSelectionChange(s),o=-1,c=-1,f=!1,d=[];if(e.editable)for(let m=0;m<t.length;m++){let y=this.registerMutation(t[m],d);y&&(o=o<0?y.from:Math.min(y.from,o),c=c<0?y.to:Math.max(y.to,c),y.typeOver&&(f=!0))}if(d.some(m=>m.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let m of d)if(m.nodeName=="BR"&&m.parentNode){let y=m.nextSibling;y&&y.nodeType==1&&y.contentEditable=="false"&&m.parentNode.removeChild(m)}}else if(_n&&d.length){let m=d.filter(y=>y.nodeName=="BR");if(m.length==2){let[y,x]=m;y.parentNode&&y.parentNode.parentNode==x.parentNode?x.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let x of m){let v=x.parentNode;v&&v.nodeName=="LI"&&(!y||uw(e,y)!=v)&&x.remove()}}}let h=null;o<0&&l&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&yu(s)&&(h=vp(e))&&h.eq(De.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Mr(e),this.currentSelection.set(s),e.scrollToSelection()):(o>-1||l)&&(o>-1&&(e.docView.markDirty(o,c),aw(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,fw(e,d)),this.handleDOMChange(o,c,f,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(s)||Mr(e),this.currentSelection.set(s))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let s=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(s==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!s||s.ignoreMutation(e))return null;if(e.type=="childList"){for(let m=0;m<e.addedNodes.length;m++){let y=e.addedNodes[m];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(s.contentDOM&&s.contentDOM!=s.dom&&!s.contentDOM.contains(e.target))return{from:s.posBefore,to:s.posAfter};let l=e.previousSibling,o=e.nextSibling;if(on&&ps<=11&&e.addedNodes.length)for(let m=0;m<e.addedNodes.length;m++){let{previousSibling:y,nextSibling:x}=e.addedNodes[m];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(l=y),(!x||Array.prototype.indexOf.call(e.addedNodes,x)<0)&&(o=x)}let c=l&&l.parentNode==e.target?Ut(l)+1:0,f=s.localPosFromDOM(e.target,c,-1),d=o&&o.parentNode==e.target?Ut(o):e.target.childNodes.length,h=s.localPosFromDOM(e.target,d,1);return{from:f,to:h}}else return e.type=="attributes"?{from:s.posAtStart-s.border,to:s.posAtEnd+s.border}:(this.lastChangedTextNode=e.target,{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Jb=new WeakMap,Xb=!1;function aw(n){if(!Jb.has(n)&&(Jb.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=_n,Xb)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Xb=!0}}function Qb(n,e){let t=e.startContainer,s=e.startOffset,l=e.endContainer,o=e.endOffset,c=n.domAtPos(n.state.selection.anchor);return ni(c.node,c.offset,l,o)&&([t,s,l,o]=[l,o,t,s]),{anchorNode:t,anchorOffset:s,focusNode:l,focusOffset:o}}function cw(n,e){if(e.getComposedRanges){let l=e.getComposedRanges(n.root)[0];if(l)return Qb(n,l)}let t;function s(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",s,!0),t?Qb(n,t):null}function uw(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let s=n.docView.nearestDesc(t,!0);if(s&&s.node.isBlock)return t}return null}function fw(n,e){var t;let{focusNode:s,focusOffset:l}=n.domSelectionRange();for(let o of e)if(((t=o.parentNode)===null||t===void 0?void 0:t.nodeName)=="TR"){let c=o.nextSibling;for(;c&&c.nodeName!="TD"&&c.nodeName!="TH";)c=c.nextSibling;if(c){let f=c;for(;;){let d=f.firstChild;if(!d||d.nodeType!=1||d.contentEditable=="false"||/^(BR|IMG)$/.test(d.nodeName))break;f=d}f.insertBefore(o,f.firstChild),s==o&&n.domSelection().collapse(o,l)}else o.parentNode.removeChild(o)}}function dw(n,e,t){let{node:s,fromOffset:l,toOffset:o,from:c,to:f}=n.docView.parseRange(e,t),d=n.domSelectionRange(),h,m=d.anchorNode;if(m&&n.dom.contains(m.nodeType==1?m:m.parentNode)&&(h=[{node:m,offset:d.anchorOffset}],yu(d)||h.push({node:d.focusNode,offset:d.focusOffset})),qt&&n.input.lastKeyCode===8)for(let M=o;M>l;M--){let C=s.childNodes[M-1],L=C.pmViewDesc;if(C.nodeName=="BR"&&!L){o=M;break}if(!L||L.size)break}let y=n.state.doc,x=n.someProp("domParser")||hs.fromSchema(n.state.schema),v=y.resolve(c),k=null,E=x.parse(s,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:l,to:o,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:hw,context:v});if(h&&h[0].pos!=null){let M=h[0].pos,C=h[1]&&h[1].pos;C==null&&(C=M),k={anchor:M+c,head:C+c}}return{doc:E,sel:k,from:c,to:f}}function hw(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Yt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Yt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const pw=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function mw(n,e,t,s,l){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let V=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,le=vp(n,V);if(le&&!n.state.selection.eq(le)){if(qt&&Tr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Ne=>Ne(n,Gs(13,"Enter"))))return;let ue=n.state.tr.setSelection(le);V=="pointer"?ue.setMeta("pointer",!0):V=="key"&&ue.scrollIntoView(),o&&ue.setMeta("composition",o),n.dispatch(ue)}return}let c=n.state.doc.resolve(e),f=c.sharedDepth(t);e=c.before(f+1),t=n.state.doc.resolve(t).after(f+1);let d=n.state.selection,h=dw(n,e,t),m=n.state.doc,y=m.slice(h.from,h.to),x,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(x=n.state.selection.to,v="end"):(x=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let k=bw(y.content,h.doc.content,h.from,x,v);if(k&&n.input.domChangeCount++,(il&&n.input.lastIOSEnter>Date.now()-225||Tr)&&l.some(V=>V.nodeType==1&&!pw.test(V.nodeName))&&(!k||k.endA>=k.endB)&&n.someProp("handleKeyDown",V=>V(n,Gs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!k)if(s&&d instanceof ve&&!d.empty&&d.$head.sameParent(d.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))k={start:d.from,endA:d.to,endB:d.to};else{if(h.sel){let V=Zb(n,n.state.doc,h.sel);if(V&&!V.eq(n.state.selection)){let le=n.state.tr.setSelection(V);o&&le.setMeta("composition",o),n.dispatch(le)}}return}n.state.selection.from<n.state.selection.to&&k.start==k.endB&&n.state.selection instanceof ve&&(k.start>n.state.selection.from&&k.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?k.start=n.state.selection.from:k.endA<n.state.selection.to&&k.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(k.endB+=n.state.selection.to-k.endA,k.endA=n.state.selection.to)),on&&ps<=11&&k.endB==k.start+1&&k.endA==k.start&&k.start>h.from&&h.doc.textBetween(k.start-h.from-1,k.start-h.from+1)==" "&&(k.start--,k.endA--,k.endB--);let E=h.doc.resolveNoCache(k.start-h.from),M=h.doc.resolveNoCache(k.endB-h.from),C=m.resolve(k.start),L=E.sameParent(M)&&E.parent.inlineContent&&C.end()>=k.endA;if((il&&n.input.lastIOSEnter>Date.now()-225&&(!L||l.some(V=>V.nodeName=="DIV"||V.nodeName=="P"))||!L&&E.pos<h.doc.content.size&&(!E.sameParent(M)||!E.parent.inlineContent)&&E.pos<M.pos&&!/\S/.test(h.doc.textBetween(E.pos,M.pos,"","")))&&n.someProp("handleKeyDown",V=>V(n,Gs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>k.start&&yw(m,k.start,k.endA,E,M)&&n.someProp("handleKeyDown",V=>V(n,Gs(8,"Backspace")))){Tr&&qt&&n.domObserver.suppressSelectionUpdates();return}qt&&k.endB==k.start&&(n.input.lastChromeDelete=Date.now()),Tr&&!L&&E.start()!=M.start()&&M.parentOffset==0&&E.depth==M.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==k.endA&&(k.endB-=2,M=h.doc.resolveNoCache(k.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(V){return V(n,Gs(13,"Enter"))})},20));let $=k.start,te=k.endA,Y=V=>{let le=V||n.state.tr.replace($,te,h.doc.slice(k.start-h.from,k.endB-h.from));if(h.sel){let ue=Zb(n,le.doc,h.sel);ue&&!(qt&&n.composing&&ue.empty&&(k.start!=k.endB||n.input.lastChromeDelete<Date.now()-100)&&(ue.head==$||ue.head==le.mapping.map(te)-1)||on&&ue.empty&&ue.head==$)&&le.setSelection(ue)}return o&&le.setMeta("composition",o),le.scrollIntoView()},J;if(L)if(E.pos==M.pos){on&&ps<=11&&E.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Mr(n),20));let V=Y(n.state.tr.delete($,te)),le=m.resolve(k.start).marksAcross(m.resolve(k.endA));le&&V.ensureMarks(le),n.dispatch(V)}else if(k.endA==k.endB&&(J=gw(E.parent.content.cut(E.parentOffset,M.parentOffset),C.parent.content.cut(C.parentOffset,k.endA-C.start())))){let V=Y(n.state.tr);J.type=="add"?V.addMark($,te,J.mark):V.removeMark($,te,J.mark),n.dispatch(V)}else if(E.parent.child(E.index()).isText&&E.index()==M.index()-(M.textOffset?0:1)){let V=E.parent.textBetween(E.parentOffset,M.parentOffset),le=()=>Y(n.state.tr.insertText(V,$,te));n.someProp("handleTextInput",ue=>ue(n,$,te,V,le))||n.dispatch(le())}else n.dispatch(Y());else n.dispatch(Y())}function Zb(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Sp(n,e.resolve(t.anchor),e.resolve(t.head))}function gw(n,e){let t=n.firstChild.marks,s=e.firstChild.marks,l=t,o=s,c,f,d;for(let m=0;m<s.length;m++)l=s[m].removeFromSet(l);for(let m=0;m<t.length;m++)o=t[m].removeFromSet(o);if(l.length==1&&o.length==0)f=l[0],c="add",d=m=>m.mark(f.addToSet(m.marks));else if(l.length==0&&o.length==1)f=o[0],c="remove",d=m=>m.mark(f.removeFromSet(m.marks));else return null;let h=[];for(let m=0;m<e.childCount;m++)h.push(d(e.child(m)));if(Z.from(h).eq(n))return{mark:f,type:c}}function yw(n,e,t,s,l){if(t-e<=l.pos-s.pos||dh(s,!0,!1)<l.pos)return!1;let o=n.resolve(e);if(!s.parent.isTextblock){let f=o.nodeAfter;return f!=null&&t==e+f.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let c=n.resolve(dh(o,!0,!0));return!c.parent.isTextblock||c.pos>t||dh(c,!0,!1)<t?!1:s.parent.content.cut(s.parentOffset).eq(c.parent.content)}function dh(n,e,t){let s=n.depth,l=e?n.end():n.pos;for(;s>0&&(e||n.indexAfter(s)==n.node(s).childCount);)s--,l++,e=!1;if(t){let o=n.node(s).maybeChild(n.indexAfter(s));for(;o&&!o.isLeaf;)o=o.firstChild,l++}return l}function bw(n,e,t,s,l){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:c,b:f}=n.findDiffEnd(e,t+n.size,t+e.size);if(l=="end"){let d=Math.max(0,o-Math.min(c,f));s-=c+d-o}if(c<o&&n.size<e.size){let d=s<=o&&s>=c?o-s:0;o-=d,o&&o<e.size&&Wb(e.textBetween(o-1,o+1))&&(o+=d?1:-1),f=o+(f-c),c=o}else if(f<o){let d=s<=o&&s>=f?o-s:0;o-=d,o&&o<n.size&&Wb(n.textBetween(o-1,o+1))&&(o+=d?1:-1),c=o+(c-f),f=o}return{start:o,endA:c,endB:f}}function Wb(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class xv{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new zC,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(sx),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=nx(this),tx(this),this.nodeViews=rx(this),this.docView=zb(this.state.doc,ex(this),fh(this),this.dom,this),this.domObserver=new ow(this,(s,l,o,c)=>mw(this,s,l,o,c)),this.domObserver.start(),LC(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Yh(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(sx),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let s in this._props)t[s]=this._props[s];t.state=this.state;for(let s in e)t[s]=e[s];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var s;let l=this.state,o=!1,c=!1;e.storedMarks&&this.composing&&(dv(this),c=!0),this.state=e;let f=l.plugins!=e.plugins||this._props.plugins!=t.plugins;if(f||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=rx(this);vw(v,this.nodeViews)&&(this.nodeViews=v,o=!0)}(f||t.handleDOMEvents!=this._props.handleDOMEvents)&&Yh(this),this.editable=nx(this),tx(this);let d=fh(this),h=ex(this),m=l.plugins!=e.plugins&&!l.doc.eq(e.doc)?"reset":e.scrollToSelection>l.scrollToSelection?"to selection":"preserve",y=o||!this.docView.matchesNode(e.doc,h,d);(y||!e.selection.eq(l.selection))&&(c=!0);let x=m=="preserve"&&c&&this.dom.style.overflowAnchor==null&&JM(this);if(c){this.domObserver.stop();let v=y&&(on||qt)&&!this.composing&&!l.selection.empty&&!e.selection.empty&&xw(l.selection,e.selection);if(y){let k=qt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=JC(this)),(o||!this.docView.update(e.doc,h,d,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=zb(e.doc,h,d,this.dom,this)),k&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&xC(this))?Mr(this,v):(ev(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(l),!((s=this.dragging)===null||s===void 0)&&s.node&&!l.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,l),m=="reset"?this.dom.scrollTop=0:m=="to selection"?this.scrollToSelection():x&&XM(x)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof ye){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Nb(this,t.getBoundingClientRect(),e)}else Nb(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let s=this.directPlugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let s=this.state.plugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let s=this.pluginViews[t];s.update&&s.update(this,e)}}updateDraggedNode(e,t){let s=e.node,l=-1;if(this.state.doc.nodeAt(s.from)==s.node)l=s.from;else{let o=s.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==s.node&&(l=o)}this.dragging=new pv(e.slice,e.move,l<0?void 0:ye.create(this.state.doc,l))}someProp(e,t){let s=this._props&&this._props[e],l;if(s!=null&&(l=t?t(s):s))return l;for(let c=0;c<this.directPlugins.length;c++){let f=this.directPlugins[c].props[e];if(f!=null&&(l=t?t(f):f))return l}let o=this.state.plugins;if(o)for(let c=0;c<o.length;c++){let f=o[c].props[e];if(f!=null&&(l=t?t(f):f))return l}}hasFocus(){if(on){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&QM(this.dom),Mr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return nC(this,e)}coordsAtPos(e,t=1){return K1(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,s=-1){let l=this.docView.posFromDOM(e,t,s);if(l==null)throw new RangeError("DOM position not inside the editor");return l}endOfTextblock(e,t){return oC(this,t||this.state,e)}pasteHTML(e,t){return Ao(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Ao(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return kp(this,e)}destroy(){this.docView&&(_C(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],fh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,UM())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return HC(this,e)}domSelectionRange(){let e=this.domSelection();return e?Yt&&this.root.nodeType===11&&GM(this.dom.ownerDocument)==this.dom&&cw(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}xv.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function ex(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let s in t)s=="class"?e.class+=" "+t[s]:s=="style"?e.style=(e.style?e.style+";":"")+t[s]:!e[s]&&s!="contenteditable"&&s!="nodeName"&&(e[s]=String(t[s]))}),e.translate||(e.translate="no"),[Ft.node(0,n.state.doc.content.size,e)]}function tx(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Ft.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function nx(n){return!n.someProp("editable",e=>e(n.state)===!1)}function xw(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function rx(n){let e=Object.create(null);function t(s){for(let l in s)Object.prototype.hasOwnProperty.call(e,l)||(e[l]=s[l])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function vw(n,e){let t=0,s=0;for(let l in n){if(n[l]!=e[l])return!0;t++}for(let l in e)s++;return t!=s}function sx(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ys={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Rc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Sw=typeof navigator<"u"&&/Mac/.test(navigator.platform),kw=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var It=0;It<10;It++)ys[48+It]=ys[96+It]=String(It);for(var It=1;It<=24;It++)ys[It+111]="F"+It;for(var It=65;It<=90;It++)ys[It]=String.fromCharCode(It+32),Rc[It]=String.fromCharCode(It);for(var hh in ys)Rc.hasOwnProperty(hh)||(Rc[hh]=ys[hh]);function Tw(n){var e=Sw&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||kw&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Rc:ys)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const Ew=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Mw=typeof navigator<"u"&&/Win/.test(navigator.platform);function Cw(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let s,l,o,c;for(let f=0;f<e.length-1;f++){let d=e[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))Ew?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(t="Alt-"+t),l&&(t="Ctrl-"+t),c&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function ww(n){let e=Object.create(null);for(let t in n)e[Cw(t)]=n[t];return e}function ph(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function Nw(n){return new ct({props:{handleKeyDown:vv(n)}})}function vv(n){let e=ww(n);return function(t,s){let l=Tw(s),o,c=e[ph(l,s)];if(c&&c(t.state,t.dispatch,t))return!0;if(l.length==1&&l!=" "){if(s.shiftKey){let f=e[ph(l,s,!1)];if(f&&f(t.state,t.dispatch,t))return!0}if((s.altKey||s.metaKey||s.ctrlKey)&&!(Mw&&s.ctrlKey&&s.altKey)&&(o=ys[s.keyCode])&&o!=l){let f=e[ph(o,s)];if(f&&f(t.state,t.dispatch,t))return!0}}return!1}}var Aw=Object.defineProperty,Np=(n,e)=>{for(var t in e)Aw(n,t,{get:e[t],enumerable:!0})};function vu(n){const{state:e,transaction:t}=n;let{selection:s}=t,{doc:l}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return s},get doc(){return l},get tr(){return s=t.selection,l=t.doc,o=t.storedMarks,t}}}var Su=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:e,state:t}=this,{view:s}=e,{tr:l}=t,o=this.buildProps(l);return Object.fromEntries(Object.entries(n).map(([c,f])=>[c,(...h)=>{const m=f(...h)(o);return!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,e=!0){const{rawCommands:t,editor:s,state:l}=this,{view:o}=s,c=[],f=!!n,d=n||l.tr,h=()=>(!f&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(d),c.every(y=>y===!0)),m={...Object.fromEntries(Object.entries(t).map(([y,x])=>[y,(...k)=>{const E=this.buildProps(d,e),M=x(...k)(E);return c.push(M),m}])),run:h};return m}createCan(n){const{rawCommands:e,state:t}=this,s=!1,l=n||t.tr,o=this.buildProps(l,s);return{...Object.fromEntries(Object.entries(e).map(([f,d])=>[f,(...h)=>d(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(l,s)}}buildProps(n,e=!0){const{rawCommands:t,editor:s,state:l}=this,{view:o}=s,c={tr:n,editor:s,view:o,state:vu({state:l,transaction:n}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(n,e),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,(...h)=>d(...h)(c)]))}};return c}},Sv={};Np(Sv,{blur:()=>Ow,clearContent:()=>Dw,clearNodes:()=>jw,command:()=>Rw,createParagraphNear:()=>zw,cut:()=>Lw,deleteCurrentNode:()=>_w,deleteNode:()=>Bw,deleteRange:()=>Hw,deleteSelection:()=>Uw,enter:()=>Iw,exitCode:()=>qw,extendMarkRange:()=>Vw,first:()=>$w,focus:()=>Yw,forEach:()=>Kw,insertContent:()=>Pw,insertContentAt:()=>Xw,joinBackward:()=>Ww,joinDown:()=>Zw,joinForward:()=>e2,joinItemBackward:()=>t2,joinItemForward:()=>n2,joinTextblockBackward:()=>r2,joinTextblockForward:()=>s2,joinUp:()=>Qw,keyboardShortcut:()=>l2,lift:()=>o2,liftEmptyBlock:()=>a2,liftListItem:()=>c2,newlineInCode:()=>u2,resetAttributes:()=>f2,scrollIntoView:()=>d2,selectAll:()=>h2,selectNodeBackward:()=>p2,selectNodeForward:()=>m2,selectParentNode:()=>g2,selectTextblockEnd:()=>y2,selectTextblockStart:()=>b2,setContent:()=>x2,setMark:()=>U2,setMeta:()=>I2,setNode:()=>q2,setNodeSelection:()=>V2,setTextDirection:()=>$2,setTextSelection:()=>G2,sinkListItem:()=>Y2,splitBlock:()=>K2,splitListItem:()=>P2,toggleList:()=>F2,toggleMark:()=>J2,toggleNode:()=>X2,toggleWrap:()=>Q2,undoInputRule:()=>Z2,unsetAllMarks:()=>W2,unsetMark:()=>eN,unsetTextDirection:()=>tN,updateAttributes:()=>nN,wrapIn:()=>rN,wrapInList:()=>sN});var Ow=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window?.getSelection())==null||t.removeAllRanges())}),!0),Dw=(n=!0)=>({commands:e})=>e.setContent("",{emitUpdate:n}),jw=()=>({state:n,tr:e,dispatch:t})=>{const{selection:s}=e,{ranges:l}=s;return t&&l.forEach(({$from:o,$to:c})=>{n.doc.nodesBetween(o.pos,c.pos,(f,d)=>{if(f.type.isText)return;const{doc:h,mapping:m}=e,y=h.resolve(m.map(d)),x=h.resolve(m.map(d+f.nodeSize)),v=y.blockRange(x);if(!v)return;const k=cl(v);if(f.type.isTextblock){const{defaultType:E}=y.parent.contentMatchAt(y.index());e.setNodeMarkup(v.start,E)}(k||k===0)&&e.lift(v,k)})}),!0},Rw=n=>e=>n(e),zw=()=>({state:n,dispatch:e})=>L1(n,e),Lw=(n,e)=>({editor:t,tr:s})=>{const{state:l}=t,o=l.doc.slice(n.from,n.to);s.deleteRange(n.from,n.to);const c=s.mapping.map(e);return s.insert(c,o.content),s.setSelection(new ve(s.doc.resolve(Math.max(c-1,0)))),!0},_w=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,s=t.$anchor.node();if(s.content.size>0)return!1;const l=n.selection.$anchor;for(let o=l.depth;o>0;o-=1)if(l.node(o).type===s.type){if(e){const f=l.before(o),d=l.after(o);n.delete(f,d).scrollIntoView()}return!0}return!1};function Et(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}var Bw=n=>({tr:e,state:t,dispatch:s})=>{const l=Et(n,t.schema),o=e.selection.$anchor;for(let c=o.depth;c>0;c-=1)if(o.node(c).type===l){if(s){const d=o.before(c),h=o.after(c);e.delete(d,h).scrollIntoView()}return!0}return!1},Hw=n=>({tr:e,dispatch:t})=>{const{from:s,to:l}=n;return t&&e.delete(s,l),!0},Uw=()=>({state:n,dispatch:e})=>pp(n,e),Iw=()=>({commands:n})=>n.keyboardShortcut("Enter"),qw=()=>({state:n,dispatch:e})=>EM(n,e);function Ap(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function zc(n,e,t={strict:!0}){const s=Object.keys(e);return s.length?s.every(l=>t.strict?e[l]===n[l]:Ap(e[l])?e[l].test(n[l]):e[l]===n[l]):!0}function kv(n,e,t={}){return n.find(s=>s.type===e&&zc(Object.fromEntries(Object.keys(t).map(l=>[l,s.attrs[l]])),t))}function ix(n,e,t={}){return!!kv(n,e,t)}function Op(n,e,t){var s;if(!n||!e)return;let l=n.parent.childAfter(n.parentOffset);if((!l.node||!l.node.marks.some(m=>m.type===e))&&(l=n.parent.childBefore(n.parentOffset)),!l.node||!l.node.marks.some(m=>m.type===e)||(t=t||((s=l.node.marks[0])==null?void 0:s.attrs),!kv([...l.node.marks],e,t)))return;let c=l.index,f=n.start()+l.offset,d=c+1,h=f+l.node.nodeSize;for(;c>0&&ix([...n.parent.child(c-1).marks],e,t);)c-=1,f-=n.parent.child(c).nodeSize;for(;d<n.parent.childCount&&ix([...n.parent.child(d).marks],e,t);)h+=n.parent.child(d).nodeSize,d+=1;return{from:f,to:h}}function Cr(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}var Vw=(n,e={})=>({tr:t,state:s,dispatch:l})=>{const o=Cr(n,s.schema),{doc:c,selection:f}=t,{$from:d,from:h,to:m}=f;if(l){const y=Op(d,o,e);if(y&&y.from<=h&&y.to>=m){const x=ve.create(c,y.from,y.to);t.setSelection(x)}}return!0},$w=n=>e=>{const t=typeof n=="function"?n(e):n;for(let s=0;s<t.length;s+=1)if(t[s](e))return!0;return!1};function Tv(n){return n instanceof ve}function Ps(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Ev(n,e=null){if(!e)return null;const t=De.atStart(n),s=De.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return s;const l=t.from,o=s.to;return e==="all"?ve.create(n,Ps(0,l,o),Ps(n.content.size,l,o)):ve.create(n,Ps(e,l,o),Ps(e,l,o))}function lx(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Lc(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Gw(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Yw=(n=null,e={})=>({editor:t,view:s,tr:l,dispatch:o})=>{e={scrollIntoView:!0,...e};const c=()=>{(Lc()||lx())&&s.dom.focus(),Gw()&&!Lc()&&!lx()&&s.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{t.isDestroyed||(s.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};try{if(s.hasFocus()&&n===null||n===!1)return!0}catch{return!1}if(o&&n===null&&!Tv(t.state.selection))return c(),!0;const f=Ev(l.doc,n)||t.state.selection,d=t.state.selection.eq(f);return o&&(d||l.setSelection(f),d&&l.storedMarks&&l.setStoredMarks(l.storedMarks),c()),!0},Kw=(n,e)=>t=>n.every((s,l)=>e(s,{...t,index:l})),Pw=(n,e)=>({tr:t,commands:s})=>s.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Mv=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const s=e[t];s.nodeType===3&&s.nodeValue&&/^(\n\s\s|\n)$/.test(s.nodeValue)?n.removeChild(s):s.nodeType===1&&Mv(s)}return n};function lc(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Mv(t)}function Do(n,e,t){if(n instanceof ds||n instanceof Z)return n;t={slice:!0,parseOptions:{},...t};const s=typeof n=="object"&&n!==null,l=typeof n=="string";if(s)try{if(Array.isArray(n)&&n.length>0)return Z.fromArray(n.map(f=>e.nodeFromJSON(f)));const c=e.nodeFromJSON(n);return t.errorOnInvalidContent&&c.check(),c}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),Do("",e,t)}if(l){if(t.errorOnInvalidContent){let c=!1,f="";const d=new a1({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(c=!0,f=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?hs.fromSchema(d).parseSlice(lc(n),t.parseOptions):hs.fromSchema(d).parse(lc(n),t.parseOptions),t.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${f}`)})}const o=hs.fromSchema(e);return t.slice?o.parseSlice(lc(n),t.parseOptions).content:o.parse(lc(n),t.parseOptions)}return Do("",e,t)}function Fw(n,e,t){const s=n.steps.length-1;if(s<e)return;const l=n.steps[s];if(!(l instanceof Ot||l instanceof Dt))return;const o=n.mapping.maps[s];let c=0;o.forEach((f,d,h,m)=>{c===0&&(c=m)}),n.setSelection(De.near(n.doc.resolve(c),t))}var Jw=n=>!("type"in n),Xw=(n,e,t)=>({tr:s,dispatch:l,editor:o})=>{var c;if(l){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let f;const d=M=>{o.emit("contentError",{editor:o,error:M,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Do(e,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(M){d(M)}try{f=Do(e,o.schema,{parseOptions:h,errorOnInvalidContent:(c=t.errorOnInvalidContent)!=null?c:o.options.enableContentCheck})}catch(M){return d(M),!1}let{from:m,to:y}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},x=!0,v=!0;if((Jw(f)?f:[f]).forEach(M=>{M.check(),x=x?M.isText&&M.marks.length===0:!1,v=v?M.isBlock:!1}),m===y&&v){const{parent:M}=s.doc.resolve(m);M.isTextblock&&!M.type.spec.code&&!M.childCount&&(m-=1,y+=1)}let E;if(x){if(Array.isArray(e))E=e.map(M=>M.text||"").join("");else if(e instanceof Z){let M="";e.forEach(C=>{C.text&&(M+=C.text)}),E=M}else typeof e=="object"&&e&&e.text?E=e.text:E=e;s.insertText(E,m,y)}else{E=f;const M=s.doc.resolve(m),C=M.node(),L=M.parentOffset===0,$=C.isText||C.isTextblock,te=C.content.size>0;L&&$&&te&&(m=Math.max(0,m-1)),s.replaceWith(m,y,E)}t.updateSelection&&Fw(s,s.steps.length-1,-1),t.applyInputRules&&s.setMeta("applyInputRules",{from:m,text:E}),t.applyPasteRules&&s.setMeta("applyPasteRules",{from:m,text:E})}return!0},Qw=()=>({state:n,dispatch:e})=>SM(n,e),Zw=()=>({state:n,dispatch:e})=>kM(n,e),Ww=()=>({state:n,dispatch:e})=>N1(n,e),e2=()=>({state:n,dispatch:e})=>j1(n,e),t2=()=>({state:n,dispatch:e,tr:t})=>{try{const s=pu(n.doc,n.selection.$from.pos,-1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},n2=()=>({state:n,dispatch:e,tr:t})=>{try{const s=pu(n.doc,n.selection.$from.pos,1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},r2=()=>({state:n,dispatch:e})=>xM(n,e),s2=()=>({state:n,dispatch:e})=>vM(n,e);function Cv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function i2(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let s,l,o,c;for(let f=0;f<e.length-1;f+=1){const d=e[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))Lc()||Cv()?c=!0:l=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return s&&(t=`Alt-${t}`),l&&(t=`Ctrl-${t}`),c&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}var l2=n=>({editor:e,view:t,tr:s,dispatch:l})=>{const o=i2(n).split(/-(?!$)/),c=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),f=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,f))});return d?.steps.forEach(h=>{const m=h.map(s.mapping);m&&l&&s.maybeStep(m)}),!0};function bs(n,e,t={}){const{from:s,to:l,empty:o}=n.selection,c=e?Et(e,n.schema):null,f=[];n.doc.nodesBetween(s,l,(y,x)=>{if(y.isText)return;const v=Math.max(s,x),k=Math.min(l,x+y.nodeSize);f.push({node:y,from:v,to:k})});const d=l-s,h=f.filter(y=>c?c.name===y.node.type.name:!0).filter(y=>zc(y.node.attrs,t,{strict:!1}));return o?!!h.length:h.reduce((y,x)=>y+x.to-x.from,0)>=d}var o2=(n,e={})=>({state:t,dispatch:s})=>{const l=Et(n,t.schema);return bs(t,l,e)?TM(t,s):!1},a2=()=>({state:n,dispatch:e})=>_1(n,e),c2=n=>({state:e,dispatch:t})=>{const s=Et(n,e.schema);return LM(s)(e,t)},u2=()=>({state:n,dispatch:e})=>z1(n,e);function ku(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function ox(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((s,l)=>(t.includes(l)||(s[l]=n[l]),s),{})}var f2=(n,e)=>({tr:t,state:s,dispatch:l})=>{let o=null,c=null;const f=ku(typeof n=="string"?n:n.name,s.schema);if(!f)return!1;f==="node"&&(o=Et(n,s.schema)),f==="mark"&&(c=Cr(n,s.schema));let d=!1;return t.selection.ranges.forEach(h=>{s.doc.nodesBetween(h.$from.pos,h.$to.pos,(m,y)=>{o&&o===m.type&&(d=!0,l&&t.setNodeMarkup(y,void 0,ox(m.attrs,e))),c&&m.marks.length&&m.marks.forEach(x=>{c===x.type&&(d=!0,l&&t.addMark(y,y+m.nodeSize,c.create(ox(x.attrs,e))))})})}),d},d2=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),h2=()=>({tr:n,dispatch:e})=>{if(e){const t=new vn(n.doc);n.setSelection(t)}return!0},p2=()=>({state:n,dispatch:e})=>O1(n,e),m2=()=>({state:n,dispatch:e})=>R1(n,e),g2=()=>({state:n,dispatch:e})=>wM(n,e),y2=()=>({state:n,dispatch:e})=>OM(n,e),b2=()=>({state:n,dispatch:e})=>AM(n,e);function Kh(n,e,t={},s={}){return Do(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:s.errorOnInvalidContent})}var x2=(n,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:s={}}={})=>({editor:l,tr:o,dispatch:c,commands:f})=>{const{doc:d}=o;if(s.preserveWhitespace!=="full"){const h=Kh(n,l.schema,s,{errorOnInvalidContent:e??l.options.enableContentCheck});return c&&o.replaceWith(0,d.content.size,h).setMeta("preventUpdate",!t),!0}return c&&o.setMeta("preventUpdate",!t),f.insertContentAt({from:0,to:d.content.size},n,{parseOptions:s,errorOnInvalidContent:e??l.options.enableContentCheck})};function wv(n,e){const t=Cr(e,n.schema),{from:s,to:l,empty:o}=n.selection,c=[];o?(n.storedMarks&&c.push(...n.storedMarks),c.push(...n.selection.$head.marks())):n.doc.nodesBetween(s,l,d=>{c.push(...d.marks)});const f=c.find(d=>d.type.name===t.name);return f?{...f.attrs}:{}}function Nv(n,e){const t=new E1(n);return e.forEach(s=>{s.steps.forEach(l=>{t.step(l)})}),t}function v2(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function S2(n,e,t){const s=[];return n.nodesBetween(e.from,e.to,(l,o)=>{t(l)&&s.push({node:l,pos:o})}),s}function k2(n,e){for(let t=n.depth;t>0;t-=1){const s=n.node(t);if(e(s))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:s}}}function Tu(n){return e=>k2(e.$from,n)}function pe(n,e,t){return n.config[e]===void 0&&n.parent?pe(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?pe(n.parent,e,t):null}):n.config[e]}function Dp(n){return n.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},s=pe(e,"addExtensions",t);return s?[e,...Dp(s())]:e}).flat(10)}function jp(n,e){const t=ii.fromSchema(e).serializeFragment(n),l=document.implementation.createHTMLDocument().createElement("div");return l.appendChild(t),l.innerHTML}function Av(n){return typeof n=="function"}function Pe(n,e=void 0,...t){return Av(n)?e?n.bind(e)(...t):n(...t):n}function T2(n={}){return Object.keys(n).length===0&&n.constructor===Object}function ll(n){const e=n.filter(l=>l.type==="extension"),t=n.filter(l=>l.type==="node"),s=n.filter(l=>l.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:s}}function Ov(n){const e=[],{nodeExtensions:t,markExtensions:s}=ll(n),l=[...t,...s],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(c=>{const f={name:c.name,options:c.options,storage:c.storage,extensions:l},d=pe(c,"addGlobalAttributes",f);if(!d)return;d().forEach(m=>{m.types.forEach(y=>{Object.entries(m.attributes).forEach(([x,v])=>{e.push({type:y,name:x,attribute:{...o,...v}})})})})}),l.forEach(c=>{const f={name:c.name,options:c.options,storage:c.storage},d=pe(c,"addAttributes",f);if(!d)return;const h=d();Object.entries(h).forEach(([m,y])=>{const x={...o,...y};typeof x?.default=="function"&&(x.default=x.default()),x?.isRequired&&x?.default===void 0&&delete x.default,e.push({type:c.name,name:m,attribute:x})})}),e}function Mt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const s={...e};return Object.entries(t).forEach(([l,o])=>{if(!s[l]){s[l]=o;return}if(l==="class"){const f=o?String(o).split(" "):[],d=s[l]?s[l].split(" "):[],h=f.filter(m=>!d.includes(m));s[l]=[...d,...h].join(" ")}else if(l==="style"){const f=o?o.split(";").map(m=>m.trim()).filter(Boolean):[],d=s[l]?s[l].split(";").map(m=>m.trim()).filter(Boolean):[],h=new Map;d.forEach(m=>{const[y,x]=m.split(":").map(v=>v.trim());h.set(y,x)}),f.forEach(m=>{const[y,x]=m.split(":").map(v=>v.trim());h.set(y,x)}),s[l]=Array.from(h.entries()).map(([m,y])=>`${m}: ${y}`).join("; ")}else s[l]=o}),s},{})}function jo(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,s)=>Mt(t,s),{})}function E2(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function ax(n,e){return"style"in n?n:{...n,getAttrs:t=>{const s=n.getAttrs?n.getAttrs(t):n.attrs;if(s===!1)return!1;const l=e.reduce((o,c)=>{const f=c.attribute.parseHTML?c.attribute.parseHTML(t):E2(t.getAttribute(c.name));return f==null?o:{...o,[c.name]:f}},{});return{...s,...l}}}}function cx(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&T2(t)?!1:t!=null))}function ux(n){var e,t;const s={};return!((e=n?.attribute)!=null&&e.isRequired)&&"default"in(n?.attribute||{})&&(s.default=n.attribute.default),((t=n?.attribute)==null?void 0:t.validate)!==void 0&&(s.validate=n.attribute.validate),[n.name,s]}function M2(n,e){var t;const s=Ov(n),{nodeExtensions:l,markExtensions:o}=ll(n),c=(t=l.find(h=>pe(h,"topNode")))==null?void 0:t.name,f=Object.fromEntries(l.map(h=>{const m=s.filter(C=>C.type===h.name),y={name:h.name,options:h.options,storage:h.storage,editor:e},x=n.reduce((C,L)=>{const $=pe(L,"extendNodeSchema",y);return{...C,...$?$(h):{}}},{}),v=cx({...x,content:Pe(pe(h,"content",y)),marks:Pe(pe(h,"marks",y)),group:Pe(pe(h,"group",y)),inline:Pe(pe(h,"inline",y)),atom:Pe(pe(h,"atom",y)),selectable:Pe(pe(h,"selectable",y)),draggable:Pe(pe(h,"draggable",y)),code:Pe(pe(h,"code",y)),whitespace:Pe(pe(h,"whitespace",y)),linebreakReplacement:Pe(pe(h,"linebreakReplacement",y)),defining:Pe(pe(h,"defining",y)),isolating:Pe(pe(h,"isolating",y)),attrs:Object.fromEntries(m.map(ux))}),k=Pe(pe(h,"parseHTML",y));k&&(v.parseDOM=k.map(C=>ax(C,m)));const E=pe(h,"renderHTML",y);E&&(v.toDOM=C=>E({node:C,HTMLAttributes:jo(C,m)}));const M=pe(h,"renderText",y);return M&&(v.toText=M),[h.name,v]})),d=Object.fromEntries(o.map(h=>{const m=s.filter(M=>M.type===h.name),y={name:h.name,options:h.options,storage:h.storage,editor:e},x=n.reduce((M,C)=>{const L=pe(C,"extendMarkSchema",y);return{...M,...L?L(h):{}}},{}),v=cx({...x,inclusive:Pe(pe(h,"inclusive",y)),excludes:Pe(pe(h,"excludes",y)),group:Pe(pe(h,"group",y)),spanning:Pe(pe(h,"spanning",y)),code:Pe(pe(h,"code",y)),attrs:Object.fromEntries(m.map(ux))}),k=Pe(pe(h,"parseHTML",y));k&&(v.parseDOM=k.map(M=>ax(M,m)));const E=pe(h,"renderHTML",y);return E&&(v.toDOM=M=>E({mark:M,HTMLAttributes:jo(M,m)})),[h.name,v]}));return new a1({topNode:c,nodes:f,marks:d})}function C2(n){const e=n.filter((t,s)=>n.indexOf(t)!==s);return Array.from(new Set(e))}function _c(n){return n.sort((t,s)=>{const l=pe(t,"priority")||100,o=pe(s,"priority")||100;return l>o?-1:l<o?1:0})}function Dv(n){const e=_c(Dp(n)),t=C2(e.map(s=>s.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),e}function jv(n,e,t){const{from:s,to:l}=e,{blockSeparator:o=`

`,textSerializers:c={}}=t||{};let f="";return n.nodesBetween(s,l,(d,h,m,y)=>{var x;d.isBlock&&h>s&&(f+=o);const v=c?.[d.type.name];if(v)return m&&(f+=v({node:d,pos:h,parent:m,index:y,range:e})),!1;d.isText&&(f+=(x=d?.text)==null?void 0:x.slice(Math.max(s,h)-h,l-h))}),f}function w2(n,e){const t={from:0,to:n.content.size};return jv(n,t,e)}function Rv(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function N2(n,e){const t=Et(e,n.schema),{from:s,to:l}=n.selection,o=[];n.doc.nodesBetween(s,l,f=>{o.push(f)});const c=o.reverse().find(f=>f.type.name===t.name);return c?{...c.attrs}:{}}function zv(n,e){const t=ku(typeof e=="string"?e:e.name,n.schema);return t==="node"?N2(n,e):t==="mark"?wv(n,e):{}}function A2(n,e=JSON.stringify){const t={};return n.filter(s=>{const l=e(s);return Object.prototype.hasOwnProperty.call(t,l)?!1:t[l]=!0})}function O2(n){const e=A2(n);return e.length===1?e:e.filter((t,s)=>!e.filter((o,c)=>c!==s).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function Lv(n){const{mapping:e,steps:t}=n,s=[];return e.maps.forEach((l,o)=>{const c=[];if(l.ranges.length)l.forEach((f,d)=>{c.push({from:f,to:d})});else{const{from:f,to:d}=t[o];if(f===void 0||d===void 0)return;c.push({from:f,to:d})}c.forEach(({from:f,to:d})=>{const h=e.slice(o).map(f,-1),m=e.slice(o).map(d),y=e.invert().map(h,-1),x=e.invert().map(m);s.push({oldRange:{from:y,to:x},newRange:{from:h,to:m}})})}),O2(s)}function Rp(n,e,t){const s=[];return n===e?t.resolve(n).marks().forEach(l=>{const o=t.resolve(n),c=Op(o,l.type);c&&s.push({mark:l,...c})}):t.nodesBetween(n,e,(l,o)=>{!l||l?.nodeSize===void 0||s.push(...l.marks.map(c=>({from:o,to:o+l.nodeSize,mark:c})))}),s}var D2=(n,e,t,s=20)=>{const l=n.doc.resolve(t);let o=s,c=null;for(;o>0&&c===null;){const f=l.node(o);f?.type.name===e?c=f:o-=1}return[c,o]};function oc(n,e){return e.nodes[n]||e.marks[n]||null}function bc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([s])=>{const l=n.find(o=>o.type===e&&o.name===s);return l?l.attribute.keepOnSplit:!1}))}var j2=(n,e=500)=>{let t="";const s=n.parentOffset;return n.parent.nodesBetween(Math.max(0,s-e),s,(l,o,c,f)=>{var d,h;const m=((h=(d=l.type.spec).toText)==null?void 0:h.call(d,{node:l,pos:o,parent:c,index:f}))||l.textContent||"%leaf%";t+=l.isAtom&&!l.isText?m:m.slice(0,Math.max(0,s-o))}),t};function Ph(n,e,t={}){const{empty:s,ranges:l}=n.selection,o=e?Cr(e,n.schema):null;if(s)return!!(n.storedMarks||n.selection.$from.marks()).filter(y=>o?o.name===y.type.name:!0).find(y=>zc(y.attrs,t,{strict:!1}));let c=0;const f=[];if(l.forEach(({$from:y,$to:x})=>{const v=y.pos,k=x.pos;n.doc.nodesBetween(v,k,(E,M)=>{if(!E.isText&&!E.marks.length)return;const C=Math.max(v,M),L=Math.min(k,M+E.nodeSize),$=L-C;c+=$,f.push(...E.marks.map(te=>({mark:te,from:C,to:L})))})}),c===0)return!1;const d=f.filter(y=>o?o.name===y.mark.type.name:!0).filter(y=>zc(y.mark.attrs,t,{strict:!1})).reduce((y,x)=>y+x.to-x.from,0),h=f.filter(y=>o?y.mark.type!==o&&y.mark.type.excludes(o):!0).reduce((y,x)=>y+x.to-x.from,0);return(d>0?d+h:d)>=c}function R2(n,e,t={}){if(!e)return bs(n,null,t)||Ph(n,null,t);const s=ku(e,n.schema);return s==="node"?bs(n,e,t):s==="mark"?Ph(n,e,t):!1}var z2=(n,e)=>{const{$from:t,$to:s,$anchor:l}=n.selection;if(e){const o=Tu(f=>f.type.name===e)(n.selection);if(!o)return!1;const c=n.doc.resolve(o.pos+1);return l.pos+1===c.end()}return!(s.parentOffset<s.parent.nodeSize-2||t.pos!==s.pos)},L2=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function fx(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function dx(n,e){const{nodeExtensions:t}=ll(e),s=t.find(c=>c.name===n);if(!s)return!1;const l={name:s.name,options:s.options,storage:s.storage},o=Pe(pe(s,"group",l));return typeof o!="string"?!1:o.split(" ").includes("list")}function Eu(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var s;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((s=n.text)!=null?s:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let l=!0;return n.content.forEach(o=>{l!==!1&&(Eu(o,{ignoreWhitespace:t,checkChildren:e})||(l=!1))}),l}return!1}function _v(n){return n instanceof ye}var Bv=class Hv{constructor(e){this.position=e}static fromJSON(e){return new Hv(e.position)}toJSON(){return{position:this.position}}};function _2(n,e){const t=e.mapping.mapResult(n.position);return{position:new Bv(t.pos),mapResult:t}}function B2(n){return new Bv(n)}function H2(n,e,t){var s;const{selection:l}=e;let o=null;if(Tv(l)&&(o=l.$cursor),o){const f=(s=n.storedMarks)!=null?s:o.marks();return o.parent.type.allowsMarkType(t)&&(!!t.isInSet(f)||!f.some(h=>h.type.excludes(t)))}const{ranges:c}=l;return c.some(({$from:f,$to:d})=>{let h=f.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(f.pos,d.pos,(m,y,x)=>{if(h)return!1;if(m.isInline){const v=!x||x.type.allowsMarkType(t),k=!!t.isInSet(m.marks)||!m.marks.some(E=>E.type.excludes(t));h=v&&k}return!h}),h})}var U2=(n,e={})=>({tr:t,state:s,dispatch:l})=>{const{selection:o}=t,{empty:c,ranges:f}=o,d=Cr(n,s.schema);if(l)if(c){const h=wv(s,d);t.addStoredMark(d.create({...h,...e}))}else f.forEach(h=>{const m=h.$from.pos,y=h.$to.pos;s.doc.nodesBetween(m,y,(x,v)=>{const k=Math.max(v,m),E=Math.min(v+x.nodeSize,y);x.marks.find(C=>C.type===d)?x.marks.forEach(C=>{d===C.type&&t.addMark(k,E,d.create({...C.attrs,...e}))}):t.addMark(k,E,d.create(e))})});return H2(s,t,d)},I2=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),q2=(n,e={})=>({state:t,dispatch:s,chain:l})=>{const o=Et(n,t.schema);let c;return t.selection.$anchor.sameParent(t.selection.$head)&&(c=t.selection.$anchor.parent.attrs),o.isTextblock?l().command(({commands:f})=>Mb(o,{...c,...e})(t)?!0:f.clearNodes()).command(({state:f})=>Mb(o,{...c,...e})(f,s)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},V2=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,l=Ps(n,0,s.content.size),o=ye.create(s,l);e.setSelection(o)}return!0},$2=(n,e)=>({tr:t,state:s,dispatch:l})=>{const{selection:o}=s;let c,f;return typeof e=="number"?(c=e,f=e):e&&"from"in e&&"to"in e?(c=e.from,f=e.to):(c=o.from,f=o.to),l&&t.doc.nodesBetween(c,f,(d,h)=>{d.isText||t.setNodeMarkup(h,void 0,{...d.attrs,dir:n})}),!0},G2=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,{from:l,to:o}=typeof n=="number"?{from:n,to:n}:n,c=ve.atStart(s).from,f=ve.atEnd(s).to,d=Ps(l,c,f),h=Ps(o,c,f),m=ve.create(s,d,h);e.setSelection(m)}return!0},Y2=n=>({state:e,dispatch:t})=>{const s=Et(n,e.schema);return HM(s)(e,t)};function hx(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const s=t.filter(l=>e?.includes(l.type.name));n.tr.ensureMarks(s)}}var K2=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:s,editor:l})=>{const{selection:o,doc:c}=e,{$from:f,$to:d}=o,h=l.extensionManager.attributes,m=bc(h,f.node().type.name,f.node().attrs);if(o instanceof ye&&o.node.isBlock)return!f.parentOffset||!Er(c,f.pos)?!1:(s&&(n&&hx(t,l.extensionManager.splittableMarks),e.split(f.pos).scrollIntoView()),!0);if(!f.parent.isBlock)return!1;const y=d.parentOffset===d.parent.content.size,x=f.depth===0?void 0:v2(f.node(-1).contentMatchAt(f.indexAfter(-1)));let v=y&&x?[{type:x,attrs:m}]:void 0,k=Er(e.doc,e.mapping.map(f.pos),1,v);if(!v&&!k&&Er(e.doc,e.mapping.map(f.pos),1,x?[{type:x}]:void 0)&&(k=!0,v=x?[{type:x,attrs:m}]:void 0),s){if(k&&(o instanceof ve&&e.deleteSelection(),e.split(e.mapping.map(f.pos),1,v),x&&!y&&!f.parentOffset&&f.parent.type!==x)){const E=e.mapping.map(f.before()),M=e.doc.resolve(E);f.node(-1).canReplaceWith(M.index(),M.index()+1,x)&&e.setNodeMarkup(e.mapping.map(f.before()),x)}n&&hx(t,l.extensionManager.splittableMarks),e.scrollIntoView()}return k},P2=(n,e={})=>({tr:t,state:s,dispatch:l,editor:o})=>{var c;const f=Et(n,s.schema),{$from:d,$to:h}=s.selection,m=s.selection.node;if(m&&m.isBlock||d.depth<2||!d.sameParent(h))return!1;const y=d.node(-1);if(y.type!==f)return!1;const x=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==f||d.index(-2)!==d.node(-2).childCount-1)return!1;if(l){let C=Z.empty;const L=d.index(-1)?1:d.index(-2)?2:3;for(let le=d.depth-L;le>=d.depth-3;le-=1)C=Z.from(d.node(le).copy(C));const $=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,te={...bc(x,d.node().type.name,d.node().attrs),...e},Y=((c=f.contentMatch.defaultType)==null?void 0:c.createAndFill(te))||void 0;C=C.append(Z.from(f.createAndFill(null,Y)||void 0));const J=d.before(d.depth-(L-1));t.replace(J,d.after(-$),new ae(C,4-L,0));let V=-1;t.doc.nodesBetween(J,t.doc.content.size,(le,ue)=>{if(V>-1)return!1;le.isTextblock&&le.content.size===0&&(V=ue+1)}),V>-1&&t.setSelection(ve.near(t.doc.resolve(V))),t.scrollIntoView()}return!0}const v=h.pos===d.end()?y.contentMatchAt(0).defaultType:null,k={...bc(x,y.type.name,y.attrs),...e},E={...bc(x,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,h.pos);const M=v?[{type:f,attrs:k},{type:v,attrs:E}]:[{type:f,attrs:k}];if(!Er(t.doc,d.pos,2))return!1;if(l){const{selection:C,storedMarks:L}=s,{splittableMarks:$}=o.extensionManager,te=L||C.$to.parentOffset&&C.$from.marks();if(t.split(d.pos,2,M).scrollIntoView(),!te||!l)return!0;const Y=te.filter(J=>$.includes(J.type.name));t.ensureMarks(Y)}return!0},mh=(n,e)=>{const t=Tu(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(s===void 0)return!0;const l=n.doc.nodeAt(s);return t.node.type===l?.type&&xs(n.doc,t.pos)&&n.join(t.pos),!0},gh=(n,e)=>{const t=Tu(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(t.start).after(t.depth);if(s===void 0)return!0;const l=n.doc.nodeAt(s);return t.node.type===l?.type&&xs(n.doc,s)&&n.join(s),!0},F2=(n,e,t,s={})=>({editor:l,tr:o,state:c,dispatch:f,chain:d,commands:h,can:m})=>{const{extensions:y,splittableMarks:x}=l.extensionManager,v=Et(n,c.schema),k=Et(e,c.schema),{selection:E,storedMarks:M}=c,{$from:C,$to:L}=E,$=C.blockRange(L),te=M||E.$to.parentOffset&&E.$from.marks();if(!$)return!1;const Y=Tu(J=>dx(J.type.name,y))(E);if($.depth>=1&&Y&&$.depth-Y.depth<=1){if(Y.node.type===v)return h.liftListItem(k);if(dx(Y.node.type.name,y)&&v.validContent(Y.node.content)&&f)return d().command(()=>(o.setNodeMarkup(Y.pos,v),!0)).command(()=>mh(o,v)).command(()=>gh(o,v)).run()}return!t||!te||!f?d().command(()=>m().wrapInList(v,s)?!0:h.clearNodes()).wrapInList(v,s).command(()=>mh(o,v)).command(()=>gh(o,v)).run():d().command(()=>{const J=m().wrapInList(v,s),V=te.filter(le=>x.includes(le.type.name));return o.ensureMarks(V),J?!0:h.clearNodes()}).wrapInList(v,s).command(()=>mh(o,v)).command(()=>gh(o,v)).run()},J2=(n,e={},t={})=>({state:s,commands:l})=>{const{extendEmptyMarkRange:o=!1}=t,c=Cr(n,s.schema);return Ph(s,c,e)?l.unsetMark(c,{extendEmptyMarkRange:o}):l.setMark(c,e)},X2=(n,e,t={})=>({state:s,commands:l})=>{const o=Et(n,s.schema),c=Et(e,s.schema),f=bs(s,o,t);let d;return s.selection.$anchor.sameParent(s.selection.$head)&&(d=s.selection.$anchor.parent.attrs),f?l.setNode(c,d):l.setNode(o,{...d,...t})},Q2=(n,e={})=>({state:t,commands:s})=>{const l=Et(n,t.schema);return bs(t,l,e)?s.lift(l):s.wrapIn(l,e)},Z2=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let s=0;s<t.length;s+=1){const l=t[s];let o;if(l.spec.isInputRules&&(o=l.getState(n))){if(e){const c=n.tr,f=o.transform;for(let d=f.steps.length-1;d>=0;d-=1)c.step(f.steps[d].invert(f.docs[d]));if(o.text){const d=c.doc.resolve(o.from).marks();c.replaceWith(o.from,o.to,n.schema.text(o.text,d))}else c.delete(o.from,o.to)}return!0}}return!1},W2=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:s,ranges:l}=t;return s||e&&l.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},eN=(n,e={})=>({tr:t,state:s,dispatch:l})=>{var o;const{extendEmptyMarkRange:c=!1}=e,{selection:f}=t,d=Cr(n,s.schema),{$from:h,empty:m,ranges:y}=f;if(!l)return!0;if(m&&c){let{from:x,to:v}=f;const k=(o=h.marks().find(M=>M.type===d))==null?void 0:o.attrs,E=Op(h,d,k);E&&(x=E.from,v=E.to),t.removeMark(x,v,d)}else y.forEach(x=>{t.removeMark(x.$from.pos,x.$to.pos,d)});return t.removeStoredMark(d),!0},tN=n=>({tr:e,state:t,dispatch:s})=>{const{selection:l}=t;let o,c;return typeof n=="number"?(o=n,c=n):n&&"from"in n&&"to"in n?(o=n.from,c=n.to):(o=l.from,c=l.to),s&&e.doc.nodesBetween(o,c,(f,d)=>{if(f.isText)return;const h={...f.attrs};delete h.dir,e.setNodeMarkup(d,void 0,h)}),!0},nN=(n,e={})=>({tr:t,state:s,dispatch:l})=>{let o=null,c=null;const f=ku(typeof n=="string"?n:n.name,s.schema);if(!f)return!1;f==="node"&&(o=Et(n,s.schema)),f==="mark"&&(c=Cr(n,s.schema));let d=!1;return t.selection.ranges.forEach(h=>{const m=h.$from.pos,y=h.$to.pos;let x,v,k,E;t.selection.empty?s.doc.nodesBetween(m,y,(M,C)=>{o&&o===M.type&&(d=!0,k=Math.max(C,m),E=Math.min(C+M.nodeSize,y),x=C,v=M)}):s.doc.nodesBetween(m,y,(M,C)=>{C<m&&o&&o===M.type&&(d=!0,k=Math.max(C,m),E=Math.min(C+M.nodeSize,y),x=C,v=M),C>=m&&C<=y&&(o&&o===M.type&&(d=!0,l&&t.setNodeMarkup(C,void 0,{...M.attrs,...e})),c&&M.marks.length&&M.marks.forEach(L=>{if(c===L.type&&(d=!0,l)){const $=Math.max(C,m),te=Math.min(C+M.nodeSize,y);t.addMark($,te,c.create({...L.attrs,...e}))}}))}),v&&(x!==void 0&&l&&t.setNodeMarkup(x,void 0,{...v.attrs,...e}),c&&v.marks.length&&v.marks.forEach(M=>{c===M.type&&l&&t.addMark(k,E,c.create({...M.attrs,...e}))}))}),d},rN=(n,e={})=>({state:t,dispatch:s})=>{const l=Et(n,t.schema);return DM(l,e)(t,s)},sN=(n,e={})=>({state:t,dispatch:s})=>{const l=Et(n,t.schema);return jM(l,e)(t,s)},iN=class{constructor(){this.callbacks={}}on(n,e){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(e),this}emit(n,...e){const t=this.callbacks[n];return t&&t.forEach(s=>s.apply(this,e)),this}off(n,e){const t=this.callbacks[n];return t&&(e?this.callbacks[n]=t.filter(s=>s!==e):delete this.callbacks[n]),this}once(n,e){const t=(...s)=>{this.off(n,t),e.apply(this,s)};return this.on(n,t)}removeAllListeners(){this.callbacks={}}},Mu=class{constructor(n){var e;this.find=n.find,this.handler=n.handler,this.undoable=(e=n.undoable)!=null?e:!0}},lN=(n,e)=>{if(Ap(e))return e.exec(n);const t=e(n);if(!t)return null;const s=[t.text];return s.index=t.index,s.input=n,s.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),s.push(t.replaceWith)),s};function ac(n){var e;const{editor:t,from:s,to:l,text:o,rules:c,plugin:f}=n,{view:d}=t;if(d.composing)return!1;const h=d.state.doc.resolve(s);if(h.parent.type.spec.code||(e=h.nodeBefore||h.nodeAfter)!=null&&e.marks.find(x=>x.type.spec.code))return!1;let m=!1;const y=j2(h)+o;return c.forEach(x=>{if(m)return;const v=lN(y,x.find);if(!v)return;const k=d.state.tr,E=vu({state:d.state,transaction:k}),M={from:s-(v[0].length-o.length),to:l},{commands:C,chain:L,can:$}=new Su({editor:t,state:E});x.handler({state:E,range:M,match:v,commands:C,chain:L,can:$})===null||!k.steps.length||(x.undoable&&k.setMeta(f,{transform:k,from:s,to:l,text:o}),d.dispatch(k),m=!0)}),m}function oN(n){const{editor:e,rules:t}=n,s=new ct({state:{init(){return null},apply(l,o,c){const f=l.getMeta(s);if(f)return f;const d=l.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:m}=d;typeof m=="string"?m=m:m=jp(Z.from(m),c.schema);const{from:y}=d,x=y+m.length;ac({editor:e,from:y,to:x,text:m,rules:t,plugin:s})}),l.selectionSet||l.docChanged?null:o}},props:{handleTextInput(l,o,c,f){return ac({editor:e,from:o,to:c,text:f,rules:t,plugin:s})},handleDOMEvents:{compositionend:l=>(setTimeout(()=>{const{$cursor:o}=l.state.selection;o&&ac({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:s})}),!1)},handleKeyDown(l,o){if(o.key!=="Enter")return!1;const{$cursor:c}=l.state.selection;return c?ac({editor:e,from:c.pos,to:c.pos,text:`
`,rules:t,plugin:s}):!1}},isInputRules:!0});return s}function aN(n){return Object.prototype.toString.call(n).slice(8,-1)}function cc(n){return aN(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Uv(n,e){const t={...n};return cc(n)&&cc(e)&&Object.keys(e).forEach(s=>{cc(e[s])&&cc(n[s])?t[s]=Uv(n[s],e[s]):t[s]=e[s]}),t}var zp=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...Pe(pe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Pe(pe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const e=this.extend({...this.config,addOptions:()=>Uv(this.options,n)});return e.name=this.name,e.parent=this.parent,e}extend(n={}){const e=new this.constructor({...this.config,...n});return e.parent=this,this.child=e,e.name="name"in n?n.name:e.parent.name,e}},li=class Iv extends zp{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new Iv(t)}static handleExit({editor:e,mark:t}){const{tr:s}=e.state,l=e.state.selection.$from;if(l.pos===l.end()){const c=l.marks();if(!!!c.find(h=>h?.type.name===t.name))return!1;const d=c.find(h=>h?.type.name===t.name);return d&&s.removeStoredMark(d),s.insertText(" ",l.pos),e.view.dispatch(s),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function cN(n){return typeof n=="number"}var uN=class{constructor(n){this.find=n.find,this.handler=n.handler}},fN=(n,e,t)=>{if(Ap(e))return[...n.matchAll(e)];const s=e(n,t);return s?s.map(l=>{const o=[l.text];return o.index=l.index,o.input=n,o.data=l.data,l.replaceWith&&(l.text.includes(l.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(l.replaceWith)),o}):[]};function dN(n){const{editor:e,state:t,from:s,to:l,rule:o,pasteEvent:c,dropEvent:f}=n,{commands:d,chain:h,can:m}=new Su({editor:e,state:t}),y=[];return t.doc.nodesBetween(s,l,(v,k)=>{var E,M,C,L,$;if((M=(E=v.type)==null?void 0:E.spec)!=null&&M.code||!(v.isText||v.isTextblock||v.isInline))return;const te=($=(L=(C=v.content)==null?void 0:C.size)!=null?L:v.nodeSize)!=null?$:0,Y=Math.max(s,k),J=Math.min(l,k+te);if(Y>=J)return;const V=v.isText?v.text||"":v.textBetween(Y-k,J-k,void 0,"");fN(V,o.find,c).forEach(ue=>{if(ue.index===void 0)return;const Ne=Y+ue.index+1,et=Ne+ue[0].length,ze={from:t.tr.mapping.map(Ne),to:t.tr.mapping.map(et)},nt=o.handler({state:t,range:ze,match:ue,commands:d,chain:h,can:m,pasteEvent:c,dropEvent:f});y.push(nt)})}),y.every(v=>v!==null)}var uc=null,hN=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",n),t};function pN(n){const{editor:e,rules:t}=n;let s=null,l=!1,o=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,f;try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}const d=({state:m,from:y,to:x,rule:v,pasteEvt:k})=>{const E=m.tr,M=vu({state:m,transaction:E});if(!(!dN({editor:e,state:M,from:Math.max(y-1,0),to:x.b-1,rule:v,pasteEvent:k,dropEvent:f})||!E.steps.length)){try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,E}};return t.map(m=>new ct({view(y){const x=k=>{var E;s=(E=y.dom.parentElement)!=null&&E.contains(k.target)?y.dom.parentElement:null,s&&(uc=e)},v=()=>{uc&&(uc=null)};return window.addEventListener("dragstart",x),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",x),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(y,x)=>{if(o=s===y.dom.parentElement,f=x,!o){const v=uc;v?.isEditable&&setTimeout(()=>{const k=v.state.selection;k&&v.commands.deleteRange({from:k.from,to:k.to})},10)}return!1},paste:(y,x)=>{var v;const k=(v=x.clipboardData)==null?void 0:v.getData("text/html");return c=x,l=!!k?.includes("data-pm-slice"),!1}}},appendTransaction:(y,x,v)=>{const k=y[0],E=k.getMeta("uiEvent")==="paste"&&!l,M=k.getMeta("uiEvent")==="drop"&&!o,C=k.getMeta("applyPasteRules"),L=!!C;if(!E&&!M&&!L)return;if(L){let{text:Y}=C;typeof Y=="string"?Y=Y:Y=jp(Z.from(Y),v.schema);const{from:J}=C,V=J+Y.length,le=hN(Y);return d({rule:m,state:v,from:J,to:{b:V},pasteEvt:le})}const $=x.doc.content.findDiffStart(v.doc.content),te=x.doc.content.findDiffEnd(v.doc.content);if(!(!cN($)||!te||$===te.b))return d({rule:m,state:v,from:$,to:te,pasteEvt:c})}}))}var Cu=class{constructor(n,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=n,this.extensions=Dv(n),this.schema=M2(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((n,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:oc(e.name,this.schema)},s=pe(e,"addCommands",t);return s?{...n,...s()}:n},{})}get plugins(){const{editor:n}=this;return _c([...this.extensions].reverse()).flatMap(s=>{const l={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:n,type:oc(s.name,this.schema)},o=[],c=pe(s,"addKeyboardShortcuts",l);let f={};if(s.type==="mark"&&pe(s,"exitable",l)&&(f.ArrowRight=()=>li.handleExit({editor:n,mark:s})),c){const x=Object.fromEntries(Object.entries(c()).map(([v,k])=>[v,()=>k({editor:n})]));f={...f,...x}}const d=Nw(f);o.push(d);const h=pe(s,"addInputRules",l);if(fx(s,n.options.enableInputRules)&&h){const x=h();if(x&&x.length){const v=oN({editor:n,rules:x}),k=Array.isArray(v)?v:[v];o.push(...k)}}const m=pe(s,"addPasteRules",l);if(fx(s,n.options.enablePasteRules)&&m){const x=m();if(x&&x.length){const v=pN({editor:n,rules:x});o.push(...v)}}const y=pe(s,"addProseMirrorPlugins",l);if(y){const x=y();o.push(...x)}return o})}get attributes(){return Ov(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:e}=ll(this.extensions);return Object.fromEntries(e.filter(t=>!!pe(t,"addNodeView")).map(t=>{const s=this.attributes.filter(d=>d.type===t.name),l={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:Et(t.name,this.schema)},o=pe(t,"addNodeView",l);if(!o)return[];const c=o();if(!c)return[];const f=(d,h,m,y,x)=>{const v=jo(d,s);return c({node:d,view:h,getPos:m,decorations:y,innerDecorations:x,editor:n,extension:t,HTMLAttributes:v})};return[t.name,f]}))}dispatchTransaction(n){const{editor:e}=this;return _c([...this.extensions].reverse()).reduceRight((s,l)=>{const o={name:l.name,options:l.options,storage:this.editor.extensionStorage[l.name],editor:e,type:oc(l.name,this.schema)},c=pe(l,"dispatchTransaction",o);return c?f=>{c.call(o,{transaction:f,next:s})}:s},n)}get markViews(){const{editor:n}=this,{markExtensions:e}=ll(this.extensions);return Object.fromEntries(e.filter(t=>!!pe(t,"addMarkView")).map(t=>{const s=this.attributes.filter(f=>f.type===t.name),l={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:Cr(t.name,this.schema)},o=pe(t,"addMarkView",l);if(!o)return[];const c=(f,d,h)=>{const m=jo(f,s);return o()({mark:f,view:d,inline:h,editor:n,extension:t,HTMLAttributes:m,updateAttributes:y=>{NN(f,n,y)}})};return[t.name,c]}))}setupExtensions(){const n=this.extensions;this.editor.extensionStorage=Object.fromEntries(n.map(e=>[e.name,e.storage])),n.forEach(e=>{var t;const s={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:oc(e.name,this.schema)};e.type==="mark"&&((t=Pe(pe(e,"keepOnSplit",s)))==null||t)&&this.splittableMarks.push(e.name);const l=pe(e,"onBeforeCreate",s),o=pe(e,"onCreate",s),c=pe(e,"onUpdate",s),f=pe(e,"onSelectionUpdate",s),d=pe(e,"onTransaction",s),h=pe(e,"onFocus",s),m=pe(e,"onBlur",s),y=pe(e,"onDestroy",s);l&&this.editor.on("beforeCreate",l),o&&this.editor.on("create",o),c&&this.editor.on("update",c),f&&this.editor.on("selectionUpdate",f),d&&this.editor.on("transaction",d),h&&this.editor.on("focus",h),m&&this.editor.on("blur",m),y&&this.editor.on("destroy",y)})}};Cu.resolve=Dv;Cu.sort=_c;Cu.flatten=Dp;var mN={};Np(mN,{ClipboardTextSerializer:()=>Vv,Commands:()=>$v,Delete:()=>Gv,Drop:()=>Yv,Editable:()=>Kv,FocusEvents:()=>Fv,Keymap:()=>Jv,Paste:()=>Xv,Tabindex:()=>Qv,TextDirection:()=>Zv,focusEventsPluginKey:()=>Pv});var yt=class qv extends zp{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new qv(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},Vv=yt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ct({key:new wt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:s,selection:l}=e,{ranges:o}=l,c=Math.min(...o.map(m=>m.$from.pos)),f=Math.max(...o.map(m=>m.$to.pos)),d=Rv(t);return jv(s,{from:c,to:f},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),$v=yt.create({name:"commands",addCommands(){return{...Sv}}}),Gv=yt.create({name:"delete",onUpdate({transaction:n,appendedTransactions:e}){var t,s,l;const o=()=>{var c,f,d,h;if((h=(d=(f=(c=this.editor.options.coreExtensionOptions)==null?void 0:c.delete)==null?void 0:f.filterTransaction)==null?void 0:d.call(f,n))!=null?h:n.getMeta("y-sync$"))return;const m=Nv(n.before,[n,...e]);Lv(m).forEach(v=>{m.mapping.mapResult(v.oldRange.from).deletedAfter&&m.mapping.mapResult(v.oldRange.to).deletedBefore&&m.before.nodesBetween(v.oldRange.from,v.oldRange.to,(k,E)=>{const M=E+k.nodeSize-2,C=v.oldRange.from<=E&&M<=v.oldRange.to;this.editor.emit("delete",{type:"node",node:k,from:E,to:M,newFrom:m.mapping.map(E),newTo:m.mapping.map(M),deletedRange:v.oldRange,newRange:v.newRange,partial:!C,editor:this.editor,transaction:n,combinedTransform:m})})});const x=m.mapping;m.steps.forEach((v,k)=>{var E,M;if(v instanceof Vn){const C=x.slice(k).map(v.from,-1),L=x.slice(k).map(v.to),$=x.invert().map(C,-1),te=x.invert().map(L),Y=(E=m.doc.nodeAt(C-1))==null?void 0:E.marks.some(V=>V.eq(v.mark)),J=(M=m.doc.nodeAt(L))==null?void 0:M.marks.some(V=>V.eq(v.mark));this.editor.emit("delete",{type:"mark",mark:v.mark,from:v.from,to:v.to,deletedRange:{from:$,to:te},newRange:{from:C,to:L},partial:!!(J||Y),editor:this.editor,transaction:n,combinedTransform:m})}})};(l=(s=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:s.async)==null||l?setTimeout(o,0):o()}}),Yv=yt.create({name:"drop",addProseMirrorPlugins(){return[new ct({key:new wt("tiptapDrop"),props:{handleDrop:(n,e,t,s)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:s})}}})]}}),Kv=yt.create({name:"editable",addProseMirrorPlugins(){return[new ct({key:new wt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Pv=new wt("focusEvents"),Fv=yt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new ct({key:Pv,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const s=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1},blur:(e,t)=>{n.isFocused=!1;const s=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1}}}})]}}),Jv=yt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:f})=>{const{selection:d,doc:h}=f,{empty:m,$anchor:y}=d,{pos:x,parent:v}=y,k=y.parent.isTextblock&&x>0?f.doc.resolve(x-1):y,E=k.parent.type.spec.isolating,M=y.pos-y.parentOffset,C=E&&k.parent.childCount===1?M===y.pos:De.atStart(h).from===x;return!m||!v.type.isTextblock||v.textContent.length||!C||C&&y.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),s={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},l={...s},o={...s,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Lc()||Cv()?o:l},addProseMirrorPlugins(){return[new ct({key:new wt("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(E=>E.getMeta("composition")))return;const s=n.some(E=>E.docChanged)&&!e.doc.eq(t.doc),l=n.some(E=>E.getMeta("preventClearDocument"));if(!s||l)return;const{empty:o,from:c,to:f}=e.selection,d=De.atStart(e.doc).from,h=De.atEnd(e.doc).to;if(o||!(c===d&&f===h)||!Eu(t.doc))return;const x=t.tr,v=vu({state:t,transaction:x}),{commands:k}=new Su({editor:this.editor,state:v});if(k.clearNodes(),!!x.steps.length)return x}})]}}),Xv=yt.create({name:"paste",addProseMirrorPlugins(){return[new ct({key:new wt("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),Qv=yt.create({name:"tabindex",addProseMirrorPlugins(){return[new ct({key:new wt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Zv=yt.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:n}=ll(this.extensions);return[{types:n.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const t=e.getAttribute("dir");return t&&(t==="ltr"||t==="rtl"||t==="auto")?t:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new ct({key:new wt("textDirection"),props:{attributes:()=>{const n=this.options.direction;return n?{dir:n}:{}}}})]}}),gN=class fo{constructor(e,t,s=!1,l=null){this.currentNode=null,this.actualDepth=null,this.isBlock=s,this.resolvedPos=e,this.editor=t,this.currentNode=l}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,s=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,s=this.to-1}this.editor.commands.insertContentAt({from:t,to:s},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new fo(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new fo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new fo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,s)=>{const l=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,c=t.isInline,f=this.pos+s+(o?0:1);if(f<0||f>this.resolvedPos.doc.nodeSize-2)return;const d=this.resolvedPos.doc.resolve(f);if(!l&&!c&&d.depth<=this.depth)return;const h=new fo(d,this.editor,l,l||c?t:null);l&&(h.actualDepth=this.depth+1),e.push(h)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let s=null,l=this.parent;for(;l&&!s;){if(l.node.type.name===e)if(Object.keys(t).length>0){const o=l.node.attrs,c=Object.keys(t);for(let f=0;f<c.length;f+=1){const d=c[f];if(o[d]!==t[d])break}}else s=l;l=l.parent}return s}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},s=!1){let l=[];if(!this.children||this.children.length===0)return l;const o=Object.keys(t);return this.children.forEach(c=>{s&&l.length>0||(c.node.type.name===e&&o.every(d=>t[d]===c.node.attrs[d])&&l.push(c),!(s&&l.length>0)&&(l=l.concat(c.querySelectorAll(e,t,s))))}),l}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},yN=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function bN(n,e,t){const s=document.querySelector("style[data-tiptap-style]");if(s!==null)return s;const l=document.createElement("style");return e&&l.setAttribute("nonce",e),l.setAttribute("data-tiptap-style",""),l.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(l),l}var xN=class extends iN{constructor(n={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:s})=>{throw s},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:_2,createMappablePosition:B2},this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:s,slice:l,moved:o})=>this.options.onDrop(s,l,o)),this.on("paste",({event:s,slice:l})=>this.options.onPaste(s,l)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=Ev(e,this.options.autofocus);this.editorState=Zi.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n?.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=bN(yN,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,e=!0){this.setOptions({editable:n}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.dispatchTransaction(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in n)return Reflect.get(n,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,e){const t=Av(e)?e(n,[...this.state.plugins]):[...this.state.plugins,n],s=this.state.reconfigure({plugins:t});return this.view.updateState(s),s}unregisterPlugin(n){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(n).forEach(l=>{const o=typeof l=="string"?`${l}$`:l.key;t=t.filter(c=>!c.key.startsWith(o))}),e.length===t.length)return;const s=this.state.reconfigure({plugins:t});return this.view.updateState(s),s}createExtensionManager(){var n,e;const s=[...this.options.enableCoreExtensions?[Kv,Vv.configure({blockSeparator:(e=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:e.blockSeparator}),$v,Fv,Jv,Qv,Yv,Xv,Gv,Zv.configure({direction:this.options.textDirection})].filter(l=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[l.name]!==!1:!0):[],...this.options.extensions].filter(l=>["extension","node","mark"].includes(l?.type));this.extensionManager=new Cu(s,this)}createCommandManager(){this.commandManager=new Su({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=Kh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),n=Kh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){const{editorProps:e,enableExtensionDispatchTransaction:t}=this.options,s=e.dispatchTransaction||this.dispatchTransaction.bind(this),l=t?this.extensionManager.dispatchTransaction(s):s;this.editorView=new xv(n,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:l,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.prependClass(),this.injectCSS();const c=this.view.dom;c.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(h=>{var m;return(m=this.capturedTransaction)==null?void 0:m.step(h)});return}const{state:e,transactions:t}=this.state.applyTransaction(n),s=!this.state.selection.eq(e.selection),l=t.includes(n),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:e}),!l)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:t.slice(1)}),s&&this.emit("selectionUpdate",{editor:this,transaction:n});const c=t.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),f=c?.getMeta("focus"),d=c?.getMeta("blur");f&&this.emit("focus",{editor:this,event:f.event,transaction:c}),d&&this.emit("blur",{editor:this,event:d.event,transaction:c}),!(n.getMeta("preventUpdate")||!t.some(h=>h.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:t.slice(1)})}getAttributes(n){return zv(this.state,n)}isActive(n,e){const t=typeof n=="string"?n:null,s=typeof n=="string"?e:n;return R2(this.state,t,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return jp(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:e=`

`,textSerializers:t={}}=n||{};return w2(this.state.doc,{blockSeparator:e,textSerializers:{...Rv(this.schema),...t}})}get isEmpty(){return Eu(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,e;return(e=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?e:!0}$node(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(n,e))||null}$nodes(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(n,e))||null}$pos(n){const e=this.state.doc.resolve(n);return new gN(e,this)}get $doc(){return this.$pos(0)}};function ol(n){return new Mu({find:n.find,handler:({state:e,range:t,match:s})=>{const l=Pe(n.getAttributes,void 0,s);if(l===!1||l===null)return null;const{tr:o}=e,c=s[s.length-1],f=s[0];if(c){const d=f.search(/\S/),h=t.from+f.indexOf(c),m=h+c.length;if(Rp(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(E=>E===n.type&&E!==v.mark.type)).filter(v=>v.to>h).length)return null;m<t.to&&o.delete(m,t.to),h>t.from&&o.delete(t.from+d,h);const x=t.from+d+c.length;o.addMark(t.from+d,x,n.type.create(l||{})),o.removeStoredMark(n.type)}},undoable:n.undoable})}function vN(n){return new Mu({find:n.find,handler:({state:e,range:t,match:s})=>{const l=Pe(n.getAttributes,void 0,s)||{},{tr:o}=e,c=t.from;let f=t.to;const d=n.type.create(l);if(s[1]){const h=s[0].lastIndexOf(s[1]);let m=c+h;m>f?m=f:f=m+s[1].length;const y=s[0][s[0].length-1];o.insertText(y,c+s[0].length-1),o.replaceWith(m,f,d)}else if(s[0]){const h=n.type.isInline?c:c-1;o.insert(h,n.type.create(l)).delete(o.mapping.map(c),o.mapping.map(f))}o.scrollIntoView()},undoable:n.undoable})}function Fh(n){return new Mu({find:n.find,handler:({state:e,range:t,match:s})=>{const l=e.doc.resolve(t.from),o=Pe(n.getAttributes,void 0,s)||{};if(!l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)},undoable:n.undoable})}function al(n){return new Mu({find:n.find,handler:({state:e,range:t,match:s,chain:l})=>{const o=Pe(n.getAttributes,void 0,s)||{},c=e.tr.delete(t.from,t.to),d=c.doc.resolve(t.from).blockRange(),h=d&&dp(d,n.type,o);if(!h)return null;if(c.wrap(d,h),n.keepMarks&&n.editor){const{selection:y,storedMarks:x}=e,{splittableMarks:v}=n.editor.extensionManager,k=x||y.$to.parentOffset&&y.$from.marks();if(k){const E=k.filter(M=>v.includes(M.type.name));c.ensureMarks(E)}}if(n.keepAttributes){const y=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";l().updateAttributes(y,o).run()}const m=c.doc.resolve(t.from-1).nodeBefore;m&&m.type===n.type&&xs(c.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(s,m))&&c.join(t.from-1)},undoable:n.undoable})}function SN(n,e){const{selection:t}=n,{$from:s}=t;if(t instanceof ye){const o=s.index();return s.parent.canReplaceWith(o,o+1,e)}let l=s.depth;for(;l>=0;){const o=s.index(l);if(s.node(l).contentMatchAt(o).matchType(e))return!0;l-=1}return!1}var kN={};Np(kN,{createAtomBlockMarkdownSpec:()=>TN,createBlockMarkdownSpec:()=>EN,createInlineMarkdownSpec:()=>wN,parseAttributes:()=>Lp,parseIndentedBlocks:()=>Jh,renderNestedMarkdownContent:()=>Bp,serializeAttributes:()=>_p});function Lp(n){if(!n?.trim())return{};const e={},t=[],s=n.replace(/["']([^"']*)["']/g,h=>(t.push(h),`__QUOTED_${t.length-1}__`)),l=s.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(l){const h=l.map(m=>m.trim().slice(1));e.class=h.join(" ")}const o=s.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const c=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(s.matchAll(c)).forEach(([,h,m])=>{var y;const x=parseInt(((y=m.match(/__QUOTED_(\d+)__/))==null?void 0:y[1])||"0",10),v=t[x];v&&(e[h]=v.slice(1,-1))});const d=s.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(m=>{m.match(/^[a-zA-Z][\w-]*$/)&&(e[m]=!0)}),e}function _p(n){if(!n||Object.keys(n).length===0)return"";const e=[];return n.class&&String(n.class).split(/\s+/).filter(Boolean).forEach(s=>e.push(`.${s}`)),n.id&&e.push(`#${n.id}`),Object.entries(n).forEach(([t,s])=>{t==="class"||t==="id"||(s===!0?e.push(t):s!==!1&&s!=null&&e.push(`${t}="${String(s)}"`))}),e.join(" ")}function TN(n){const{nodeName:e,name:t,parseAttributes:s=Lp,serializeAttributes:l=_p,defaultAttributes:o={},requiredAttributes:c=[],allowedAttributes:f}=n,d=t||e,h=m=>{if(!f)return m;const y={};return f.forEach(x=>{x in m&&(y[x]=m[x])}),y};return{parseMarkdown:(m,y)=>{const x={...o,...m.attributes};return y.createNode(e,x,[])},markdownTokenizer:{name:e,level:"block",start(m){var y;const x=new RegExp(`^:::${d}(?:\\s|$)`,"m"),v=(y=m.match(x))==null?void 0:y.index;return v!==void 0?v:-1},tokenize(m,y,x){const v=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),k=m.match(v);if(!k)return;const E=k[1]||"",M=s(E);if(!c.find(L=>!(L in M)))return{type:e,raw:k[0],attributes:M}}},renderMarkdown:m=>{const y=h(m.attrs||{}),x=l(y),v=x?` {${x}}`:"";return`:::${d}${v} :::`}}}function EN(n){const{nodeName:e,name:t,getContent:s,parseAttributes:l=Lp,serializeAttributes:o=_p,defaultAttributes:c={},content:f="block",allowedAttributes:d}=n,h=t||e,m=y=>{if(!d)return y;const x={};return d.forEach(v=>{v in y&&(x[v]=y[v])}),x};return{parseMarkdown:(y,x)=>{let v;if(s){const E=s(y);v=typeof E=="string"?[{type:"text",text:E}]:E}else f==="block"?v=x.parseChildren(y.tokens||[]):v=x.parseInline(y.tokens||[]);const k={...c,...y.attributes};return x.createNode(e,k,v)},markdownTokenizer:{name:e,level:"block",start(y){var x;const v=new RegExp(`^:::${h}`,"m"),k=(x=y.match(v))==null?void 0:x.index;return k!==void 0?k:-1},tokenize(y,x,v){var k;const E=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),M=y.match(E);if(!M)return;const[C,L=""]=M,$=l(L);let te=1;const Y=C.length;let J="";const V=/^:::([\w-]*)(\s.*)?/gm,le=y.slice(Y);for(V.lastIndex=0;;){const ue=V.exec(le);if(ue===null)break;const Ne=ue.index,et=ue[1];if(!((k=ue[2])!=null&&k.endsWith(":::"))){if(et)te+=1;else if(te-=1,te===0){const ze=le.slice(0,Ne);J=ze.trim();const nt=y.slice(0,Y+Ne+ue[0].length);let Ie=[];if(J)if(f==="block")for(Ie=v.blockTokens(ze),Ie.forEach(ke=>{ke.text&&(!ke.tokens||ke.tokens.length===0)&&(ke.tokens=v.inlineTokens(ke.text))});Ie.length>0;){const ke=Ie[Ie.length-1];if(ke.type==="paragraph"&&(!ke.text||ke.text.trim()===""))Ie.pop();else break}else Ie=v.inlineTokens(J);return{type:e,raw:nt,attributes:$,content:J,tokens:Ie}}}}}},renderMarkdown:(y,x)=>{const v=m(y.attrs||{}),k=o(v),E=k?` {${k}}`:"",M=x.renderChildren(y.content||[],`

`);return`:::${h}${E}

${M}

:::`}}}function MN(n){if(!n.trim())return{};const e={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let s=t.exec(n);for(;s!==null;){const[,l,o,c]=s;e[l]=o||c,s=t.exec(n)}return e}function CN(n){return Object.entries(n).filter(([,e])=>e!=null).map(([e,t])=>`${e}="${t}"`).join(" ")}function wN(n){const{nodeName:e,name:t,getContent:s,parseAttributes:l=MN,serializeAttributes:o=CN,defaultAttributes:c={},selfClosing:f=!1,allowedAttributes:d}=n,h=t||e,m=x=>{if(!d)return x;const v={};return d.forEach(k=>{const E=typeof k=="string"?k:k.name,M=typeof k=="string"?void 0:k.skipIfDefault;if(E in x){const C=x[E];if(M!==void 0&&C===M)return;v[E]=C}}),v},y=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(x,v)=>{const k={...c,...x.attributes};if(f)return v.createNode(e,k);const E=s?s(x):x.content||"";return E?v.createNode(e,k,[v.createTextNode(E)]):v.createNode(e,k,[])},markdownTokenizer:{name:e,level:"inline",start(x){const v=f?new RegExp(`\\[${y}\\s*[^\\]]*\\]`):new RegExp(`\\[${y}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${y}\\]`),k=x.match(v),E=k?.index;return E!==void 0?E:-1},tokenize(x,v,k){const E=f?new RegExp(`^\\[${y}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${y}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${y}\\]`),M=x.match(E);if(!M)return;let C="",L="";if(f){const[,te]=M;L=te}else{const[,te,Y]=M;L=te,C=Y||""}const $=l(L.trim());return{type:e,raw:M[0],content:C.trim(),attributes:$}}},renderMarkdown:x=>{let v="";s?v=s(x):x.content&&x.content.length>0&&(v=x.content.filter(C=>C.type==="text").map(C=>C.text).join(""));const k=m(x.attrs||{}),E=o(k),M=E?` ${E}`:"";return f?`[${h}${M}]`:`[${h}${M}]${v}[/${h}]`}}}function Jh(n,e,t){var s,l,o,c;const f=n.split(`
`),d=[];let h="",m=0;const y=e.baseIndentSize||2;for(;m<f.length;){const x=f[m],v=x.match(e.itemPattern);if(!v){if(d.length>0)break;if(x.trim()===""){m+=1,h=`${h}${x}
`;continue}else return}const k=e.extractItemData(v),{indentLevel:E,mainContent:M}=k;h=`${h}${x}
`;const C=[M];for(m+=1;m<f.length;){const Y=f[m];if(Y.trim()===""){const V=f.slice(m+1).findIndex(Ne=>Ne.trim()!=="");if(V===-1)break;if((((l=(s=f[m+1+V].match(/^(\s*)/))==null?void 0:s[1])==null?void 0:l.length)||0)>E){C.push(Y),h=`${h}${Y}
`,m+=1;continue}else break}if((((c=(o=Y.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:c.length)||0)>E)C.push(Y),h=`${h}${Y}
`,m+=1;else break}let L;const $=C.slice(1);if($.length>0){const Y=$.map(J=>J.slice(E+y)).join(`
`);Y.trim()&&(e.customNestedParser?L=e.customNestedParser(Y):L=t.blockTokens(Y))}const te=e.createToken(k,L);d.push(te)}if(d.length!==0)return{items:d,raw:h}}function Bp(n,e,t,s){if(!n||!Array.isArray(n.content))return"";const l=typeof t=="function"?t(s):t,[o,...c]=n.content,f=e.renderChildren([o]),d=[`${l}${f}`];return c&&c.length>0&&c.forEach(h=>{const m=e.renderChildren([h]);if(m){const y=m.split(`
`).map(x=>x?e.indent(x):"").join(`
`);d.push(y)}}),d.join(`
`)}function NN(n,e,t={}){const{state:s}=e,{doc:l,tr:o}=s,c=n;l.descendants((f,d)=>{const h=o.mapping.map(d),m=o.mapping.map(d)+f.nodeSize;let y=null;if(f.marks.forEach(v=>{if(v!==c)return!1;y=v}),!y)return;let x=!1;if(Object.keys(t).forEach(v=>{t[v]!==y.attrs[v]&&(x=!0)}),x){const v=n.type.create({...n.attrs,...t});o.removeMark(h,m,n.type),o.addMark(h,m,v)}}),o.docChanged&&e.view.dispatch(o)}var Sn=class Wv extends zp{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new Wv(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function si(n){return new uN({find:n.find,handler:({state:e,range:t,match:s,pasteEvent:l})=>{const o=Pe(n.getAttributes,void 0,s,l);if(o===!1||o===null)return null;const{tr:c}=e,f=s[s.length-1],d=s[0];let h=t.to;if(f){const m=d.search(/\S/),y=t.from+d.indexOf(f),x=y+f.length;if(Rp(t.from,t.to,e.doc).filter(k=>k.mark.type.excluded.find(M=>M===n.type&&M!==k.mark.type)).filter(k=>k.to>y).length)return null;x<t.to&&c.delete(x,t.to),y>t.from&&c.delete(t.from+m,y),h=t.from+m+f.length,c.addMark(t.from+m,h,n.type.create(o||{})),c.removeStoredMark(n.type)}}})}const{getOwnPropertyNames:AN,getOwnPropertySymbols:ON}=Object,{hasOwnProperty:DN}=Object.prototype;function yh(n,e){return function(s,l,o){return n(s,l,o)&&e(s,l,o)}}function fc(n){return function(t,s,l){if(!t||!s||typeof t!="object"||typeof s!="object")return n(t,s,l);const{cache:o}=l,c=o.get(t),f=o.get(s);if(c&&f)return c===s&&f===t;o.set(t,s),o.set(s,t);const d=n(t,s,l);return o.delete(t),o.delete(s),d}}function jN(n){return n?.[Symbol.toStringTag]}function px(n){return AN(n).concat(ON(n))}const RN=Object.hasOwn||((n,e)=>DN.call(n,e));function oi(n,e){return n===e||!n&&!e&&n!==n&&e!==e}const zN="__v",LN="__o",_N="_owner",{getOwnPropertyDescriptor:mx,keys:gx}=Object;function BN(n,e){return n.byteLength===e.byteLength&&Bc(new Uint8Array(n),new Uint8Array(e))}function HN(n,e,t){let s=n.length;if(e.length!==s)return!1;for(;s-- >0;)if(!t.equals(n[s],e[s],s,s,n,e,t))return!1;return!0}function UN(n,e){return n.byteLength===e.byteLength&&Bc(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function IN(n,e){return oi(n.getTime(),e.getTime())}function qN(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function VN(n,e){return n===e}function yx(n,e,t){const s=n.size;if(s!==e.size)return!1;if(!s)return!0;const l=new Array(s),o=n.entries();let c,f,d=0;for(;(c=o.next())&&!c.done;){const h=e.entries();let m=!1,y=0;for(;(f=h.next())&&!f.done;){if(l[y]){y++;continue}const x=c.value,v=f.value;if(t.equals(x[0],v[0],d,y,n,e,t)&&t.equals(x[1],v[1],x[0],v[0],n,e,t)){m=l[y]=!0;break}y++}if(!m)return!1;d++}return!0}const $N=oi;function GN(n,e,t){const s=gx(n);let l=s.length;if(gx(e).length!==l)return!1;for(;l-- >0;)if(!eS(n,e,t,s[l]))return!1;return!0}function lo(n,e,t){const s=px(n);let l=s.length;if(px(e).length!==l)return!1;let o,c,f;for(;l-- >0;)if(o=s[l],!eS(n,e,t,o)||(c=mx(n,o),f=mx(e,o),(c||f)&&(!c||!f||c.configurable!==f.configurable||c.enumerable!==f.enumerable||c.writable!==f.writable)))return!1;return!0}function YN(n,e){return oi(n.valueOf(),e.valueOf())}function KN(n,e){return n.source===e.source&&n.flags===e.flags}function bx(n,e,t){const s=n.size;if(s!==e.size)return!1;if(!s)return!0;const l=new Array(s),o=n.values();let c,f;for(;(c=o.next())&&!c.done;){const d=e.values();let h=!1,m=0;for(;(f=d.next())&&!f.done;){if(!l[m]&&t.equals(c.value,f.value,c.value,f.value,n,e,t)){h=l[m]=!0;break}m++}if(!h)return!1}return!0}function Bc(n,e){let t=n.byteLength;if(e.byteLength!==t||n.byteOffset!==e.byteOffset)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function PN(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function eS(n,e,t,s){return(s===_N||s===LN||s===zN)&&(n.$$typeof||e.$$typeof)?!0:RN(e,s)&&t.equals(n[s],e[s],s,s,n,e,t)}const FN="[object ArrayBuffer]",JN="[object Arguments]",XN="[object Boolean]",QN="[object DataView]",ZN="[object Date]",WN="[object Error]",eA="[object Map]",tA="[object Number]",nA="[object Object]",rA="[object RegExp]",sA="[object Set]",iA="[object String]",lA={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},oA="[object URL]",aA=Object.prototype.toString;function cA({areArrayBuffersEqual:n,areArraysEqual:e,areDataViewsEqual:t,areDatesEqual:s,areErrorsEqual:l,areFunctionsEqual:o,areMapsEqual:c,areNumbersEqual:f,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:m,areSetsEqual:y,areTypedArraysEqual:x,areUrlsEqual:v,unknownTagComparators:k}){return function(M,C,L){if(M===C)return!0;if(M==null||C==null)return!1;const $=typeof M;if($!==typeof C)return!1;if($!=="object")return $==="number"?f(M,C,L):$==="function"?o(M,C,L):!1;const te=M.constructor;if(te!==C.constructor)return!1;if(te===Object)return d(M,C,L);if(Array.isArray(M))return e(M,C,L);if(te===Date)return s(M,C,L);if(te===RegExp)return m(M,C,L);if(te===Map)return c(M,C,L);if(te===Set)return y(M,C,L);const Y=aA.call(M);if(Y===ZN)return s(M,C,L);if(Y===rA)return m(M,C,L);if(Y===eA)return c(M,C,L);if(Y===sA)return y(M,C,L);if(Y===nA)return typeof M.then!="function"&&typeof C.then!="function"&&d(M,C,L);if(Y===oA)return v(M,C,L);if(Y===WN)return l(M,C,L);if(Y===JN)return d(M,C,L);if(lA[Y])return x(M,C,L);if(Y===FN)return n(M,C,L);if(Y===QN)return t(M,C,L);if(Y===XN||Y===tA||Y===iA)return h(M,C,L);if(k){let J=k[Y];if(!J){const V=jN(M);V&&(J=k[V])}if(J)return J(M,C,L)}return!1}}function uA({circular:n,createCustomConfig:e,strict:t}){let s={areArrayBuffersEqual:BN,areArraysEqual:t?lo:HN,areDataViewsEqual:UN,areDatesEqual:IN,areErrorsEqual:qN,areFunctionsEqual:VN,areMapsEqual:t?yh(yx,lo):yx,areNumbersEqual:$N,areObjectsEqual:t?lo:GN,arePrimitiveWrappersEqual:YN,areRegExpsEqual:KN,areSetsEqual:t?yh(bx,lo):bx,areTypedArraysEqual:t?yh(Bc,lo):Bc,areUrlsEqual:PN,unknownTagComparators:void 0};if(e&&(s=Object.assign({},s,e(s))),n){const l=fc(s.areArraysEqual),o=fc(s.areMapsEqual),c=fc(s.areObjectsEqual),f=fc(s.areSetsEqual);s=Object.assign({},s,{areArraysEqual:l,areMapsEqual:o,areObjectsEqual:c,areSetsEqual:f})}return s}function fA(n){return function(e,t,s,l,o,c,f){return n(e,t,f)}}function dA({circular:n,comparator:e,createState:t,equals:s,strict:l}){if(t)return function(f,d){const{cache:h=n?new WeakMap:void 0,meta:m}=t();return e(f,d,{cache:h,equals:s,meta:m,strict:l})};if(n)return function(f,d){return e(f,d,{cache:new WeakMap,equals:s,meta:void 0,strict:l})};const o={cache:void 0,equals:s,meta:void 0,strict:l};return function(f,d){return e(f,d,o)}}const hA=Ss();Ss({strict:!0});Ss({circular:!0});Ss({circular:!0,strict:!0});Ss({createInternalComparator:()=>oi});Ss({strict:!0,createInternalComparator:()=>oi});Ss({circular:!0,createInternalComparator:()=>oi});Ss({circular:!0,createInternalComparator:()=>oi,strict:!0});function Ss(n={}){const{circular:e=!1,createInternalComparator:t,createState:s,strict:l=!1}=n,o=uA(n),c=cA(o),f=t?t(c):fA(c);return dA({circular:e,comparator:c,createState:s,equals:f,strict:l})}var bh={exports:{}},xh={};var xx;function pA(){if(xx)return xh;xx=1;var n=Lo(),e=Yx();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var s=typeof Object.is=="function"?Object.is:t,l=e.useSyncExternalStore,o=n.useRef,c=n.useEffect,f=n.useMemo,d=n.useDebugValue;return xh.useSyncExternalStoreWithSelector=function(h,m,y,x,v){var k=o(null);if(k.current===null){var E={hasValue:!1,value:null};k.current=E}else E=k.current;k=f(function(){function C(J){if(!L){if(L=!0,$=J,J=x(J),v!==void 0&&E.hasValue){var V=E.value;if(v(V,J))return te=V}return te=J}if(V=te,s($,J))return V;var le=x(J);return v!==void 0&&v(V,le)?($=J,V):($=J,te=le)}var L=!1,$,te,Y=y===void 0?null:y;return[function(){return C(m())},Y===null?void 0:function(){return C(Y())}]},[m,y,x,v]);var M=l(h,k[0],k[1]);return c(function(){E.hasValue=!0,E.value=M},[M]),d(M),M},xh}var vx;function mA(){return vx||(vx=1,bh.exports=pA()),bh.exports}var gA=mA(),yA=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},bA=({contentComponent:n})=>{const e=Kx.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return b.jsx(b.Fragment,{children:Object.values(e)})};function xA(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,s){e={...e,[t]:kE.createPortal(s.reactElement,s.element,t)},n.forEach(l=>l())},removeRenderer(t){const s={...e};delete s[t],e=s,n.forEach(l=>l())}}}var vA=class extends Xn.Component{constructor(n){var e;super(n),this.editorContentRef=Xn.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=n.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var n;const e=this.props.editor;if(e&&!e.isDestroyed&&((n=e.view.dom)!=null&&n.parentNode)){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t}),e.contentComponent=xA(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(s=>s.hasContentComponentInitialized?s:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((n=e.view.dom)!=null&&n.parentNode))return;const t=document.createElement("div");t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t})}catch{}}}render(){const{editor:n,innerRef:e,...t}=this.props;return b.jsxs(b.Fragment,{children:[b.jsx("div",{ref:yA(e,this.editorContentRef),...t}),n?.contentComponent&&b.jsx(bA,{contentComponent:n.contentComponent})]})}},SA=Q.forwardRef((n,e)=>{const t=Xn.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Xn.createElement(vA,{key:t,innerRef:e,...n})}),tS=Xn.memo(SA),kA=typeof window<"u"?Q.useLayoutEffect:Q.useEffect,TA=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function EA(n){var e;const[t]=Q.useState(()=>new TA(n.editor)),s=gA.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!=null?e:hA);return kA(()=>t.watch(n.editor),[n.editor,t]),Q.useDebugValue(s),s}var MA=!1,Xh=typeof window>"u",CA=Xh||!!(typeof window<"u"&&window.next),wA=class nS{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Xh||CA?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...s)=>{var l,o;return(o=(l=this.options.current).onBeforeCreate)==null?void 0:o.call(l,...s)},onBlur:(...s)=>{var l,o;return(o=(l=this.options.current).onBlur)==null?void 0:o.call(l,...s)},onCreate:(...s)=>{var l,o;return(o=(l=this.options.current).onCreate)==null?void 0:o.call(l,...s)},onDestroy:(...s)=>{var l,o;return(o=(l=this.options.current).onDestroy)==null?void 0:o.call(l,...s)},onFocus:(...s)=>{var l,o;return(o=(l=this.options.current).onFocus)==null?void 0:o.call(l,...s)},onSelectionUpdate:(...s)=>{var l,o;return(o=(l=this.options.current).onSelectionUpdate)==null?void 0:o.call(l,...s)},onTransaction:(...s)=>{var l,o;return(o=(l=this.options.current).onTransaction)==null?void 0:o.call(l,...s)},onUpdate:(...s)=>{var l,o;return(o=(l=this.options.current).onUpdate)==null?void 0:o.call(l,...s)},onContentError:(...s)=>{var l,o;return(o=(l=this.options.current).onContentError)==null?void 0:o.call(l,...s)},onDrop:(...s)=>{var l,o;return(o=(l=this.options.current).onDrop)==null?void 0:o.call(l,...s)},onPaste:(...s)=>{var l,o;return(o=(l=this.options.current).onPaste)==null?void 0:o.call(l,...s)},onDelete:(...s)=>{var l,o;return(o=(l=this.options.current).onDelete)==null?void 0:o.call(l,...s)}};return new xN(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(s=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(s)?!0:s==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((l,o)=>{var c;return l===((c=t.extensions)==null?void 0:c[o])}):e[s]===t[s])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?nS.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((s,l)=>s===e[l]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function NA(n={},e=[]){const t=Q.useRef(n);t.current=n;const[s]=Q.useState(()=>new wA(t)),l=Kx.useSyncExternalStore(s.subscribe,s.getEditor,s.getServerSnapshot);return Q.useDebugValue(l),Q.useEffect(s.onRender(e)),EA({editor:l,selector:({transactionNumber:o})=>n.shouldRerenderOnTransaction===!1||n.shouldRerenderOnTransaction===void 0?null:n.immediatelyRender&&o===0?0:o+1}),l}var rS=Q.createContext({editor:null});rS.Consumer;var AA=Q.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),OA=()=>Q.useContext(AA);Xn.forwardRef((n,e)=>{const{onDragStart:t}=OA(),s=n.as||"div";return b.jsx(s,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});Xn.createContext({markViewContentRef:()=>{}});var Hp=Q.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});Hp.displayName="TiptapContext";var DA=()=>Q.useContext(Hp);function sS({editor:n,instance:e,children:t}){const s=n??e;if(!s)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const l=Q.useMemo(()=>({editor:s}),[s]),o=Q.useMemo(()=>({editor:s}),[s]);return b.jsx(rS.Provider,{value:o,children:b.jsx(Hp.Provider,{value:l,children:t})})}sS.displayName="Tiptap";function iS({...n}){const{editor:e}=DA();return b.jsx(tS,{editor:e,...n})}iS.displayName="Tiptap.Content";Object.assign(sS,{Content:iS});var Hc=(n,e)=>{if(n==="slot")return 0;if(n instanceof Function)return n(e);const{children:t,...s}=e??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,s,t]},jA=/^\s*>\s$/,RA=Sn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return Hc("blockquote",{...Mt(this.options.HTMLAttributes,n),children:Hc("slot",{})})},parseMarkdown:(n,e)=>e.createNode("blockquote",void 0,e.parseChildren(n.tokens||[])),renderMarkdown:(n,e)=>{if(!n.content)return"";const t=">",s=[];return n.content.forEach(l=>{const f=e.renderChildren([l]).split(`
`).map(d=>d.trim()===""?t:`${t} ${d}`);s.push(f.join(`
`))}),s.join(`
${t}
`)},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[al({find:jA,type:this.type})]}}),zA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,LA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,_A=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,BA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,HA=li.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return Hc("strong",{...Mt(this.options.HTMLAttributes,n),children:Hc("slot",{})})},markdownTokenName:"strong",parseMarkdown:(n,e)=>e.applyMark("bold",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`**${e.renderChildren(n)}**`,addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ol({find:zA,type:this.type}),ol({find:_A,type:this.type})]},addPasteRules(){return[si({find:LA,type:this.type}),si({find:BA,type:this.type})]}}),UA=/(^|[^`])`([^`]+)`(?!`)$/,IA=/(^|[^`])`([^`]+)`(?!`)/g,qA=li.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Mt(this.options.HTMLAttributes,n),0]},markdownTokenName:"codespan",parseMarkdown:(n,e)=>e.applyMark("code",[{type:"text",text:n.text||""}]),renderMarkdown:(n,e)=>n.content?`\`${e.renderChildren(n.content)}\``:"",addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ol({find:UA,type:this.type})]},addPasteRules(){return[si({find:IA,type:this.type})]}}),vh=4,VA=/^```([a-z]+)?[\s\n]$/,$A=/^~~~([a-z]+)?[\s\n]$/,GA=Sn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:vh,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options;if(!t)return null;const o=[...((e=n.firstElementChild)==null?void 0:e.classList)||[]].filter(c=>c.startsWith(t)).map(c=>c.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Mt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(n,e)=>{var t;return((t=n.raw)==null?void 0:t.startsWith("```"))===!1&&n.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:n.lang||null},n.text?[e.createTextNode(n.text)]:[])},renderMarkdown:(n,e)=>{var t;let s="";const l=((t=n.attrs)==null?void 0:t.language)||"";return n.content?s=[`\`\`\`${l}`,e.renderChildren(n.content),"```"].join(`
`):s=`\`\`\`${l}

\`\`\``,s},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:vh,{state:s}=n,{selection:l}=s,{$from:o,empty:c}=l;if(o.parent.type!==this.type)return!1;const f=" ".repeat(t);return c?n.commands.insertContent(f):n.commands.command(({tr:d})=>{const{from:h,to:m}=l,v=s.doc.textBetween(h,m,`
`,`
`).split(`
`).map(k=>f+k).join(`
`);return d.replaceWith(h,m,s.schema.text(v)),!0})},"Shift-Tab":({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:vh,{state:s}=n,{selection:l}=s,{$from:o,empty:c}=l;return o.parent.type!==this.type?!1:c?n.commands.command(({tr:f})=>{var d;const{pos:h}=o,m=o.start(),y=o.end(),v=s.doc.textBetween(m,y,`
`,`
`).split(`
`);let k=0,E=0;const M=h-m;for(let J=0;J<v.length;J+=1){if(E+v[J].length>=M){k=J;break}E+=v[J].length+1}const L=((d=v[k].match(/^ */))==null?void 0:d[0])||"",$=Math.min(L.length,t);if($===0)return!0;let te=m;for(let J=0;J<k;J+=1)te+=v[J].length+1;return f.delete(te,te+$),h-te<=$&&f.setSelection(ve.create(f.doc,te)),!0}):n.commands.command(({tr:f})=>{const{from:d,to:h}=l,x=s.doc.textBetween(d,h,`
`,`
`).split(`
`).map(v=>{var k;const E=((k=v.match(/^ */))==null?void 0:k[0])||"",M=Math.min(E.length,t);return v.slice(M)}).join(`
`);return f.replaceWith(d,h,s.schema.text(x)),!0})},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:s,empty:l}=t;if(!l||s.parent.type!==this.type)return!1;const o=s.parentOffset===s.parent.nodeSize-2,c=s.parent.textContent.endsWith(`

`);return!o||!c?!1:n.chain().command(({tr:f})=>(f.delete(s.pos-2,s.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:s}=e,{$from:l,empty:o}=t;if(!o||l.parent.type!==this.type||!(l.parentOffset===l.parent.nodeSize-2))return!1;const f=l.after();return f===void 0?!1:s.nodeAt(f)?n.commands.command(({tr:h})=>(h.setSelection(De.near(s.resolve(f))),!0)):n.commands.exitCode()}}},addInputRules(){return[Fh({find:VA,type:this.type,getAttributes:n=>({language:n[1]})}),Fh({find:$A,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new ct({key:new wt("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),s=e.clipboardData.getData("vscode-editor-data"),l=s?JSON.parse(s):void 0,o=l?.mode;if(!t||!o)return!1;const{tr:c,schema:f}=n.state,d=f.text(t.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:o},d)),c.selection.$from.parent.type!==this.type&&c.setSelection(ve.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),n.dispatch(c),!0}}})]}}),YA=Sn.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`

`):""}),KA=Sn.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Mt(this.options.HTMLAttributes,n)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:s})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:l,storedMarks:o}=t;if(l.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:f}=s.extensionManager,d=o||l.$to.parentOffset&&l.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:m})=>{if(m&&d&&c){const y=d.filter(x=>f.includes(x.type.name));h.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),PA=Sn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Mt(this.options.HTMLAttributes,e),0]},parseMarkdown:(n,e)=>e.createNode("heading",{level:n.depth||1},e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>{var t;const s=(t=n.attrs)!=null&&t.level?parseInt(n.attrs.level,10):1,l="#".repeat(s);return n.content?`${l} ${e.renderChildren(n.content)}`:""},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Fh({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),FA=Sn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Mt(this.options.HTMLAttributes,n)]},markdownTokenName:"hr",parseMarkdown:(n,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!SN(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:s}=t,l=n();return _v(t)?l.insertContentAt(s.pos,{type:this.name}):l.insertContent({type:this.name}),l.command(({state:o,tr:c,dispatch:f})=>{if(f){const{$to:d}=c.selection,h=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?c.setSelection(ve.create(c.doc,d.pos+1)):d.nodeAfter.isBlock?c.setSelection(ye.create(c.doc,d.pos)):c.setSelection(ve.create(c.doc,d.pos));else{const m=o.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,y=m?.create();y&&(c.insert(h,y),c.setSelection(ve.create(c.doc,h+1)))}c.scrollIntoView()}return!0}).run()}}},addInputRules(){return[vN({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),JA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,XA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,QA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ZA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,WA=li.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Mt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(n,e)=>e.applyMark("italic",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`*${e.renderChildren(n)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ol({find:JA,type:this.type}),ol({find:QA,type:this.type})]},addPasteRules(){return[si({find:XA,type:this.type}),si({find:ZA,type:this.type})]}});const e3="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",t3="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Qh="numeric",Zh="ascii",Wh="alpha",bo="asciinumeric",ho="alphanumeric",ep="domain",lS="emoji",n3="scheme",r3="slashscheme",Sh="whitespace";function s3(n,e){return n in e||(e[n]=[]),e[n]}function Fs(n,e,t){e[Qh]&&(e[bo]=!0,e[ho]=!0),e[Zh]&&(e[bo]=!0,e[Wh]=!0),e[bo]&&(e[ho]=!0),e[Wh]&&(e[ho]=!0),e[ho]&&(e[ep]=!0),e[lS]&&(e[ep]=!0);for(const s in e){const l=s3(s,t);l.indexOf(n)<0&&l.push(n)}}function i3(n,e){const t={};for(const s in e)e[s].indexOf(n)>=0&&(t[s]=!0);return t}function ln(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}ln.groups={};ln.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let s=0;s<e.jr.length;s++){const l=e.jr[s][0],o=e.jr[s][1];if(o&&l.test(n))return o}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,s){for(let l=0;l<n.length;l++)this.tt(n[l],e,t,s)},tr(n,e,t,s){s=s||ln.groups;let l;return e&&e.j?l=e:(l=new ln(e),t&&s&&Fs(e,t,s)),this.jr.push([n,l]),l},ts(n,e,t,s){let l=this;const o=n.length;if(!o)return l;for(let c=0;c<o-1;c++)l=l.tt(n[c]);return l.tt(n[o-1],e,t,s)},tt(n,e,t,s){s=s||ln.groups;const l=this;if(e&&e.j)return l.j[n]=e,e;const o=e;let c,f=l.go(n);if(f?(c=new ln,Object.assign(c.j,f.j),c.jr.push.apply(c.jr,f.jr),c.jd=f.jd,c.t=f.t):c=new ln,o){if(s)if(c.t&&typeof c.t=="string"){const d=Object.assign(i3(c.t,s),t);Fs(o,d,s)}else t&&Fs(o,t,s);c.t=o}return l.j[n]=c,c}};const Oe=(n,e,t,s,l)=>n.ta(e,t,s,l),ht=(n,e,t,s,l)=>n.tr(e,t,s,l),Sx=(n,e,t,s,l)=>n.ts(e,t,s,l),re=(n,e,t,s,l)=>n.tt(e,t,s,l),Sr="WORD",tp="UWORD",oS="ASCIINUMERICAL",aS="ALPHANUMERICAL",Ro="LOCALHOST",np="TLD",rp="UTLD",xc="SCHEME",Qi="SLASH_SCHEME",Up="NUM",sp="WS",Ip="NL",xo="OPENBRACE",vo="CLOSEBRACE",Uc="OPENBRACKET",Ic="CLOSEBRACKET",qc="OPENPAREN",Vc="CLOSEPAREN",$c="OPENANGLEBRACKET",Gc="CLOSEANGLEBRACKET",Yc="FULLWIDTHLEFTPAREN",Kc="FULLWIDTHRIGHTPAREN",Pc="LEFTCORNERBRACKET",Fc="RIGHTCORNERBRACKET",Jc="LEFTWHITECORNERBRACKET",Xc="RIGHTWHITECORNERBRACKET",Qc="FULLWIDTHLESSTHAN",Zc="FULLWIDTHGREATERTHAN",Wc="AMPERSAND",eu="APOSTROPHE",tu="ASTERISK",ss="AT",nu="BACKSLASH",ru="BACKTICK",su="CARET",as="COLON",qp="COMMA",iu="DOLLAR",Pn="DOT",lu="EQUALS",Vp="EXCLAMATION",Rn="HYPHEN",So="PERCENT",ou="PIPE",au="PLUS",cu="POUND",ko="QUERY",$p="QUOTE",cS="FULLWIDTHMIDDLEDOT",Gp="SEMI",Fn="SLASH",To="TILDE",uu="UNDERSCORE",uS="EMOJI",fu="SYM";var fS=Object.freeze({__proto__:null,ALPHANUMERICAL:aS,AMPERSAND:Wc,APOSTROPHE:eu,ASCIINUMERICAL:oS,ASTERISK:tu,AT:ss,BACKSLASH:nu,BACKTICK:ru,CARET:su,CLOSEANGLEBRACKET:Gc,CLOSEBRACE:vo,CLOSEBRACKET:Ic,CLOSEPAREN:Vc,COLON:as,COMMA:qp,DOLLAR:iu,DOT:Pn,EMOJI:uS,EQUALS:lu,EXCLAMATION:Vp,FULLWIDTHGREATERTHAN:Zc,FULLWIDTHLEFTPAREN:Yc,FULLWIDTHLESSTHAN:Qc,FULLWIDTHMIDDLEDOT:cS,FULLWIDTHRIGHTPAREN:Kc,HYPHEN:Rn,LEFTCORNERBRACKET:Pc,LEFTWHITECORNERBRACKET:Jc,LOCALHOST:Ro,NL:Ip,NUM:Up,OPENANGLEBRACKET:$c,OPENBRACE:xo,OPENBRACKET:Uc,OPENPAREN:qc,PERCENT:So,PIPE:ou,PLUS:au,POUND:cu,QUERY:ko,QUOTE:$p,RIGHTCORNERBRACKET:Fc,RIGHTWHITECORNERBRACKET:Xc,SCHEME:xc,SEMI:Gp,SLASH:Fn,SLASH_SCHEME:Qi,SYM:fu,TILDE:To,TLD:np,UNDERSCORE:uu,UTLD:rp,UWORD:tp,WORD:Sr,WS:sp});const xr=/[a-z]/,oo=new RegExp("\\p{L}","u"),kh=new RegExp("\\p{Emoji}","u"),vr=/\d/,Th=/\s/,kx="\r",Eh=`
`,l3="",o3="",Mh="";let dc=null,hc=null;function a3(n=[]){const e={};ln.groups=e;const t=new ln;dc==null&&(dc=Tx(e3)),hc==null&&(hc=Tx(t3)),re(t,"'",eu),re(t,"{",xo),re(t,"}",vo),re(t,"[",Uc),re(t,"]",Ic),re(t,"(",qc),re(t,")",Vc),re(t,"<",$c),re(t,">",Gc),re(t,"",Yc),re(t,"",Kc),re(t,"",Pc),re(t,"",Fc),re(t,"",Jc),re(t,"",Xc),re(t,"",Qc),re(t,"",Zc),re(t,"&",Wc),re(t,"*",tu),re(t,"@",ss),re(t,"`",ru),re(t,"^",su),re(t,":",as),re(t,",",qp),re(t,"$",iu),re(t,".",Pn),re(t,"=",lu),re(t,"!",Vp),re(t,"-",Rn),re(t,"%",So),re(t,"|",ou),re(t,"+",au),re(t,"#",cu),re(t,"?",ko),re(t,'"',$p),re(t,"/",Fn),re(t,";",Gp),re(t,"~",To),re(t,"_",uu),re(t,"\\",nu),re(t,"",cS);const s=ht(t,vr,Up,{[Qh]:!0});ht(s,vr,s);const l=ht(s,xr,oS,{[bo]:!0}),o=ht(s,oo,aS,{[ho]:!0}),c=ht(t,xr,Sr,{[Zh]:!0});ht(c,vr,l),ht(c,xr,c),ht(l,vr,l),ht(l,xr,l);const f=ht(t,oo,tp,{[Wh]:!0});ht(f,xr),ht(f,vr,o),ht(f,oo,f),ht(o,vr,o),ht(o,xr),ht(o,oo,o);const d=re(t,Eh,Ip,{[Sh]:!0}),h=re(t,kx,sp,{[Sh]:!0}),m=ht(t,Th,sp,{[Sh]:!0});re(t,Mh,m),re(h,Eh,d),re(h,Mh,m),ht(h,Th,m),re(m,kx),re(m,Eh),ht(m,Th,m),re(m,Mh,m);const y=ht(t,kh,uS,{[lS]:!0});re(y,"#"),ht(y,kh,y),re(y,l3,y);const x=re(y,o3);re(x,"#"),ht(x,kh,y);const v=[[xr,c],[vr,l]],k=[[xr,null],[oo,f],[vr,o]];for(let E=0;E<dc.length;E++)es(t,dc[E],np,Sr,v);for(let E=0;E<hc.length;E++)es(t,hc[E],rp,tp,k);Fs(np,{tld:!0,ascii:!0},e),Fs(rp,{utld:!0,alpha:!0},e),es(t,"file",xc,Sr,v),es(t,"mailto",xc,Sr,v),es(t,"http",Qi,Sr,v),es(t,"https",Qi,Sr,v),es(t,"ftp",Qi,Sr,v),es(t,"ftps",Qi,Sr,v),Fs(xc,{scheme:!0,ascii:!0},e),Fs(Qi,{slashscheme:!0,ascii:!0},e),n=n.sort((E,M)=>E[0]>M[0]?1:-1);for(let E=0;E<n.length;E++){const M=n[E][0],L=n[E][1]?{[n3]:!0}:{[r3]:!0};M.indexOf("-")>=0?L[ep]=!0:xr.test(M)?vr.test(M)?L[bo]=!0:L[Zh]=!0:L[Qh]=!0,Sx(t,M,M,L)}return Sx(t,"localhost",Ro,{ascii:!0}),t.jd=new ln(fu),{start:t,tokens:Object.assign({groups:e},fS)}}function dS(n,e){const t=c3(e.replace(/[A-Z]/g,f=>f.toLowerCase())),s=t.length,l=[];let o=0,c=0;for(;c<s;){let f=n,d=null,h=0,m=null,y=-1,x=-1;for(;c<s&&(d=f.go(t[c]));)f=d,f.accepts()?(y=0,x=0,m=f):y>=0&&(y+=t[c].length,x++),h+=t[c].length,o+=t[c].length,c++;o-=y,c-=x,h-=y,l.push({t:m.t,v:e.slice(o-h,o),s:o-h,e:o})}return l}function c3(n){const e=[],t=n.length;let s=0;for(;s<t;){let l=n.charCodeAt(s),o,c=l<55296||l>56319||s+1===t||(o=n.charCodeAt(s+1))<56320||o>57343?n[s]:n.slice(s,s+2);e.push(c),s+=c.length}return e}function es(n,e,t,s,l){let o;const c=e.length;for(let f=0;f<c-1;f++){const d=e[f];n.j[d]?o=n.j[d]:(o=new ln(s),o.jr=l.slice(),n.j[d]=o),n=o}return o=new ln(t),o.jr=l.slice(),n.j[e[c-1]]=o,o}function Tx(n){const e=[],t=[];let s=0,l="0123456789";for(;s<n.length;){let o=0;for(;l.indexOf(n[s+o])>=0;)o++;if(o>0){e.push(t.join(""));for(let c=parseInt(n.substring(s,s+o),10);c>0;c--)t.pop();s+=o}else t.push(n[s]),s++}return e}const zo={defaultProtocol:"http",events:null,format:Ex,formatHref:Ex,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Yp(n,e=null){let t=Object.assign({},zo);n&&(t=Object.assign(t,n instanceof Yp?n.o:n));const s=t.ignoreTags,l=[];for(let o=0;o<s.length;o++)l.push(s[o].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=l}Yp.prototype={o:zo,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const s=e!=null;let l=this.o[n];return l&&(typeof l=="object"?(l=t.t in l?l[t.t]:zo[n],typeof l=="function"&&s&&(l=l(e,t))):typeof l=="function"&&s&&(l=l(e,t.t,t)),l)},getObj(n,e,t){let s=this.o[n];return typeof s=="function"&&e!=null&&(s=s(e,t.t,t)),s},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function Ex(n){return n}function hS(n,e){this.t="token",this.v=n,this.tk=e}hS.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),s=n.get("format",e,this);return t&&s.length>t?s.substring(0,t)+"":s},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=zo.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),s=n.get("formatHref",t,this),l=n.get("tagName",t,e),o=this.toFormattedString(n),c={},f=n.get("className",t,e),d=n.get("target",t,e),h=n.get("rel",t,e),m=n.getObj("attributes",t,e),y=n.getObj("events",t,e);return c.href=s,f&&(c.class=f),d&&(c.target=d),h&&(c.rel=h),m&&Object.assign(c,m),{tagName:l,attributes:c,content:o,eventListeners:y}}};function wu(n,e){class t extends hS{constructor(l,o){super(l,o),this.t=n}}for(const s in e)t.prototype[s]=e[s];return t.t=n,t}const Mx=wu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Cx=wu("text"),u3=wu("nl"),pc=wu("url",{isLink:!0,toHref(n=zo.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Ro&&n[1].t===as}}),jn=n=>new ln(n);function f3({groups:n}){const e=n.domain.concat([Wc,tu,ss,nu,ru,su,iu,lu,Rn,Up,So,ou,au,cu,Fn,fu,To,uu]),t=[eu,as,qp,Pn,Vp,So,ko,$p,Gp,$c,Gc,xo,vo,Ic,Uc,qc,Vc,Yc,Kc,Pc,Fc,Jc,Xc,Qc,Zc],s=[Wc,eu,tu,nu,ru,su,iu,lu,Rn,xo,vo,So,ou,au,cu,ko,Fn,fu,To,uu],l=jn(),o=re(l,To);Oe(o,s,o),Oe(o,n.domain,o);const c=jn(),f=jn(),d=jn();Oe(l,n.domain,c),Oe(l,n.scheme,f),Oe(l,n.slashscheme,d),Oe(c,s,o),Oe(c,n.domain,c);const h=re(c,ss);re(o,ss,h),re(f,ss,h),re(d,ss,h);const m=re(o,Pn);Oe(m,s,o),Oe(m,n.domain,o);const y=jn();Oe(h,n.domain,y),Oe(y,n.domain,y);const x=re(y,Pn);Oe(x,n.domain,y);const v=jn(Mx);Oe(x,n.tld,v),Oe(x,n.utld,v),re(h,Ro,v);const k=re(y,Rn);re(k,Rn,k),Oe(k,n.domain,y),Oe(v,n.domain,y),re(v,Pn,x),re(v,Rn,k);const E=re(v,as);Oe(E,n.numeric,Mx);const M=re(c,Rn),C=re(c,Pn);re(M,Rn,M),Oe(M,n.domain,c),Oe(C,s,o),Oe(C,n.domain,c);const L=jn(pc);Oe(C,n.tld,L),Oe(C,n.utld,L),Oe(L,n.domain,c),Oe(L,s,o),re(L,Pn,C),re(L,Rn,M),re(L,ss,h);const $=re(L,as),te=jn(pc);Oe($,n.numeric,te);const Y=jn(pc),J=jn();Oe(Y,e,Y),Oe(Y,t,J),Oe(J,e,Y),Oe(J,t,J),re(L,Fn,Y),re(te,Fn,Y);const V=re(f,as),le=re(d,as),ue=re(le,Fn),Ne=re(ue,Fn);Oe(f,n.domain,c),re(f,Pn,C),re(f,Rn,M),Oe(d,n.domain,c),re(d,Pn,C),re(d,Rn,M),Oe(V,n.domain,Y),re(V,Fn,Y),re(V,ko,Y),Oe(Ne,n.domain,Y),Oe(Ne,e,Y),re(Ne,Fn,Y);const et=[[xo,vo],[Uc,Ic],[qc,Vc],[$c,Gc],[Yc,Kc],[Pc,Fc],[Jc,Xc],[Qc,Zc]];for(let ze=0;ze<et.length;ze++){const[nt,Ie]=et[ze],ke=re(Y,nt);re(J,nt,ke),re(ke,Ie,Y);const U=jn(pc);Oe(ke,e,U);const ee=jn();Oe(ke,t),Oe(U,e,U),Oe(U,t,ee),Oe(ee,e,U),Oe(ee,t,ee),re(U,Ie,Y),re(ee,Ie,Y)}return re(l,Ro,L),re(l,Ip,u3),{start:l,tokens:fS}}function d3(n,e,t){let s=t.length,l=0,o=[],c=[];for(;l<s;){let f=n,d=null,h=null,m=0,y=null,x=-1;for(;l<s&&!(d=f.go(t[l].t));)c.push(t[l++]);for(;l<s&&(h=d||f.go(t[l].t));)d=null,f=h,f.accepts()?(x=0,y=f):x>=0&&x++,l++,m++;if(x<0)l-=m,l<s&&(c.push(t[l]),l++);else{c.length>0&&(o.push(Ch(Cx,e,c)),c=[]),l-=x,m-=x;const v=y.t,k=t.slice(l-m,l);o.push(Ch(v,e,k))}}return c.length>0&&o.push(Ch(Cx,e,c)),o}function Ch(n,e,t){const s=t[0].s,l=t[t.length-1].e,o=e.slice(s,l);return new n(o,t)}const h3=typeof console<"u"&&console&&console.warn||(()=>{}),p3="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",it={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function m3(){return ln.groups={},it.scanner=null,it.parser=null,it.tokenQueue=[],it.pluginQueue=[],it.customSchemes=[],it.initialized=!1,it}function wx(n,e=!1){if(it.initialized&&h3(`linkifyjs: already initialized - will not register custom scheme "${n}" ${p3}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);it.customSchemes.push([n,e])}function g3(){it.scanner=a3(it.customSchemes);for(let n=0;n<it.tokenQueue.length;n++)it.tokenQueue[n][1]({scanner:it.scanner});it.parser=f3(it.scanner.tokens);for(let n=0;n<it.pluginQueue.length;n++)it.pluginQueue[n][1]({scanner:it.scanner,parser:it.parser});return it.initialized=!0,it}function Kp(n){return it.initialized||g3(),d3(it.parser.start,n,dS(it.scanner.start,n))}Kp.scan=dS;function pS(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const s=new Yp(t),l=Kp(n),o=[];for(let c=0;c<l.length;c++){const f=l[c];f.isLink&&(!e||f.t===e)&&s.check(f)&&o.push(f.toFormattedObject(s))}return o}var Pp="[\0- -\u2029]",y3=new RegExp(Pp),b3=new RegExp(`${Pp}$`),x3=new RegExp(Pp,"g");function v3(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function S3(n){return new ct({key:new wt("autolink"),appendTransaction:(e,t,s)=>{const l=e.some(h=>h.docChanged)&&!t.doc.eq(s.doc),o=e.some(h=>h.getMeta("preventAutolink"));if(!l||o)return;const{tr:c}=s,f=Nv(t.doc,[...e]);if(Lv(f).forEach(({newRange:h})=>{const m=S2(s.doc,h,v=>v.isTextblock);let y,x;if(m.length>1)y=m[0],x=s.doc.textBetween(y.pos,y.pos+y.node.nodeSize,void 0," ");else if(m.length){const v=s.doc.textBetween(h.from,h.to," "," ");if(!b3.test(v))return;y=m[0],x=s.doc.textBetween(y.pos,h.to,void 0," ")}if(y&&x){const v=x.split(y3).filter(Boolean);if(v.length<=0)return!1;const k=v[v.length-1],E=y.pos+x.lastIndexOf(k);if(!k)return!1;const M=Kp(k).map(C=>C.toObject(n.defaultProtocol));if(!v3(M))return!1;M.filter(C=>C.isLink).map(C=>({...C,from:E+C.start+1,to:E+C.end+1})).filter(C=>s.schema.marks.code?!s.doc.rangeHasMark(C.from,C.to,s.schema.marks.code):!0).filter(C=>n.validate(C.value)).filter(C=>n.shouldAutoLink(C.value)).forEach(C=>{Rp(C.from,C.to,s.doc).some(L=>L.mark.type===n.type)||c.addMark(C.from,C.to,n.type.create({href:C.href}))})}}),!!c.steps.length)return c}})}function k3(n){return new ct({key:new wt("handleClickLink"),props:{handleClick:(e,t,s)=>{var l,o;if(s.button!==0||!e.editable)return!1;let c=null;if(s.target instanceof HTMLAnchorElement)c=s.target;else{const d=s.target;if(!d)return!1;const h=n.editor.view.dom;c=d.closest("a"),c&&!h.contains(c)&&(c=null)}if(!c)return!1;let f=!1;if(n.enableClickSelection&&(f=n.editor.commands.extendMarkRange(n.type.name)),n.openOnClick){const d=zv(e.state,n.type.name),h=(l=c.href)!=null?l:d.href,m=(o=c.target)!=null?o:d.target;h&&(window.open(h,m),f=!0)}return f}}})}function T3(n){return new ct({key:new wt("handlePasteLink"),props:{handlePaste:(e,t,s)=>{const{shouldAutoLink:l}=n,{state:o}=e,{selection:c}=o,{empty:f}=c;if(f)return!1;let d="";s.content.forEach(m=>{d+=m.textContent});const h=pS(d,{defaultProtocol:n.defaultProtocol}).find(m=>m.isLink&&m.value===d);return!d||!h||l!==void 0&&!l(h.value)?!1:n.editor.commands.setMark(n.type,{href:h.href})}}})}function Vs(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(s=>{const l=typeof s=="string"?s:s.scheme;l&&t.push(l)}),!n||n.replace(x3,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var E3=li.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){wx(n);return}wx(n.scheme,n.optionalSlashes)})},onDestroy(){m3()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Vs(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(n),t=/^[a-z][a-z0-9+.-]*:/i.test(n);if(e||t&&!n.includes("@"))return!0;const l=(n.includes("@")?n.split("@").pop():n).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(l)||!/\./.test(l))}}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Vs(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Vs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Mt(this.options.HTMLAttributes,n),0]:["a",Mt(this.options.HTMLAttributes,{...n,href:""}),0]},markdownTokenName:"link",parseMarkdown:(n,e)=>e.applyMark("link",e.parseInline(n.tokens||[]),{href:n.href,title:n.title||null}),renderMarkdown:(n,e)=>{var t,s,l,o;const c=(s=(t=n.attrs)==null?void 0:t.href)!=null?s:"",f=(o=(l=n.attrs)==null?void 0:l.title)!=null?o:"",d=e.renderChildren(n);return f?`[${d}](${c} "${f}")`:`[${d}](${c})`},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:s=>!!Vs(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:s=>!!Vs(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[si({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:s}=this.options,l=pS(n).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:c=>!!Vs(c,t),protocols:t,defaultProtocol:s}));l.length&&l.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(S3({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:s=>this.options.isAllowedUri(s,{defaultValidate:l=>!!Vs(l,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),n.push(k3({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(T3({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),n}}),M3=Object.defineProperty,C3=(n,e)=>{for(var t in e)M3(n,t,{get:e[t],enumerable:!0})},w3="listItem",Nx="textStyle",Ax=/^\s*([-+*])\s$/,mS=Sn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Mt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>n.type!=="list"||n.ordered?[]:{type:"bulletList",content:n.items?e.parseChildren(n.items):[]},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(w3,this.editor.getAttributes(Nx)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=al({find:Ax,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=al({find:Ax,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Nx),editor:this.editor})),[n]}}),gS=Sn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Mt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list_item",parseMarkdown:(n,e)=>{if(n.type!=="list_item")return[];let t=[];if(n.tokens&&n.tokens.length>0)if(n.tokens.some(l=>l.type==="paragraph"))t=e.parseChildren(n.tokens);else{const l=n.tokens[0];if(l&&l.type==="text"&&l.tokens&&l.tokens.length>0){if(t=[{type:"paragraph",content:e.parseInline(l.tokens)}],n.tokens.length>1){const c=n.tokens.slice(1),f=e.parseChildren(c);t.push(...f)}}else t=e.parseChildren(n.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(n,e,t)=>Bp(n,e,s=>{var l,o;return s.parentType==="bulletList"?"- ":s.parentType==="orderedList"?`${(((o=(l=s.meta)==null?void 0:l.parentAttrs)==null?void 0:o.start)||1)+s.index}. `:"- "},t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),N3={};C3(N3,{findListItemPos:()=>Io,getNextListDepth:()=>Fp,handleBackspace:()=>ip,handleDelete:()=>lp,hasListBefore:()=>yS,hasListItemAfter:()=>A3,hasListItemBefore:()=>bS,listItemHasSubList:()=>xS,nextListIsDeeper:()=>vS,nextListIsHigher:()=>SS});var Io=(n,e)=>{const{$from:t}=e.selection,s=Et(n,e.schema);let l=null,o=t.depth,c=t.pos,f=null;for(;o>0&&f===null;)l=t.node(o),l.type===s?f=o:(o-=1,c-=1);return f===null?null:{$pos:e.doc.resolve(c),depth:f}},Fp=(n,e)=>{const t=Io(n,e);if(!t)return!1;const[,s]=D2(e,n,t.$pos.pos+4);return s},yS=(n,e,t)=>{const{$anchor:s}=n.selection,l=Math.max(0,s.pos-2),o=n.doc.resolve(l).node();return!(!o||!t.includes(o.type.name))},bS=(n,e)=>{var t;const{$anchor:s}=e.selection,l=e.doc.resolve(s.pos-2);return!(l.index()===0||((t=l.nodeBefore)==null?void 0:t.type.name)!==n)},xS=(n,e,t)=>{if(!t)return!1;const s=Et(n,e.schema);let l=!1;return t.descendants(o=>{o.type===s&&(l=!0)}),l},ip=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!bs(n.state,e)&&yS(n.state,e,t)){const{$anchor:f}=n.state.selection,d=n.state.doc.resolve(f.before()-1),h=[];d.node().descendants((x,v)=>{x.type.name===e&&h.push({node:x,pos:v})});const m=h.at(-1);if(!m)return!1;const y=n.state.doc.resolve(d.start()+m.pos+1);return n.chain().cut({from:f.start()-1,to:f.end()+1},y.end()).joinForward().run()}if(!bs(n.state,e)||!L2(n.state))return!1;const s=Io(e,n.state);if(!s)return!1;const o=n.state.doc.resolve(s.$pos.pos-2).node(s.depth),c=xS(e,n.state,o);return bS(e,n.state)&&!c?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},vS=(n,e)=>{const t=Fp(n,e),s=Io(n,e);return!s||!t?!1:t>s.depth},SS=(n,e)=>{const t=Fp(n,e),s=Io(n,e);return!s||!t?!1:t<s.depth},lp=(n,e)=>{if(!bs(n.state,e)||!z2(n.state,e))return!1;const{selection:t}=n.state,{$from:s,$to:l}=t;return!t.empty&&s.sameParent(l)?!1:vS(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():SS(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},A3=(n,e)=>{var t;const{$anchor:s}=e.selection,l=e.doc.resolve(s.pos-s.parentOffset-2);return!(l.index()===l.parent.childCount-1||((t=l.nodeAfter)==null?void 0:t.type.name)!==n)},kS=yt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&lp(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&lp(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:s})=>{n.state.schema.nodes[t]!==void 0&&ip(n,t,s)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:s})=>{n.state.schema.nodes[t]!==void 0&&ip(n,t,s)&&(e=!0)}),e}}}}),Ox=/^(\s*)(\d+)\.\s+(.*)$/,O3=/^\s/;function D3(n){const e=[];let t=0,s=0;for(;t<n.length;){const l=n[t],o=l.match(Ox);if(!o)break;const[,c,f,d]=o,h=c.length;let m=d,y=t+1;const x=[l];for(;y<n.length;){const v=n[y];if(v.match(Ox))break;if(v.trim()==="")x.push(v),m+=`
`,y+=1;else if(v.match(O3))x.push(v),m+=`
${v.slice(h+2)}`,y+=1;else break}e.push({indent:h,number:parseInt(f,10),content:m.trim(),raw:x.join(`
`)}),s=y,t=y}return[e,s]}function TS(n,e,t){var s;const l=[];let o=0;for(;o<n.length;){const c=n[o];if(c.indent===e){const f=c.content.split(`
`),d=((s=f[0])==null?void 0:s.trim())||"",h=[];d&&h.push({type:"paragraph",raw:d,tokens:t.inlineTokens(d)});const m=f.slice(1).join(`
`).trim();if(m){const v=t.blockTokens(m);h.push(...v)}let y=o+1;const x=[];for(;y<n.length&&n[y].indent>e;)x.push(n[y]),y+=1;if(x.length>0){const v=Math.min(...x.map(E=>E.indent)),k=TS(x,v,t);h.push({type:"list",ordered:!0,start:x[0].number,items:k,raw:x.map(E=>E.raw).join(`
`)})}l.push({type:"list_item",raw:c.raw,tokens:h}),o=y}else o+=1}return l}function j3(n,e){return n.map(t=>{if(t.type!=="list_item")return e.parseChildren([t])[0];const s=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(l=>{if(l.type==="paragraph"||l.type==="list"||l.type==="blockquote"||l.type==="code")s.push(...e.parseChildren([l]));else if(l.type==="text"&&l.tokens){const o=e.parseChildren([l]);s.push({type:"paragraph",content:o})}else{const o=e.parseChildren([l]);o.length>0&&s.push(...o)}}),{type:"listItem",content:s}})}var R3="listItem",Dx="textStyle",jx=/^(\d+)\.\s$/,ES=Sn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Mt(this.options.HTMLAttributes,t),0]:["ol",Mt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>{if(n.type!=="list"||!n.ordered)return[];const t=n.start||1,s=n.items?j3(n.items,e):[];return t!==1?{type:"orderedList",attrs:{start:t},content:s}:{type:"orderedList",content:s}},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:n=>{const e=n.match(/^(\s*)(\d+)\.\s+/),t=e?.index;return t!==void 0?t:-1},tokenize:(n,e,t)=>{var s;const l=n.split(`
`),[o,c]=D3(l);if(o.length===0)return;const f=TS(o,0,t);return f.length===0?void 0:{type:"list",ordered:!0,start:((s=o[0])==null?void 0:s.number)||1,items:f,raw:l.slice(0,c).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(R3,this.editor.getAttributes(Dx)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=al({find:jx,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=al({find:jx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Dx)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),z3=/^\s*(\[([( |x])?\])\s$/,MS=Sn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",Mt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(n,e)=>{const t=[];if(n.tokens&&n.tokens.length>0?t.push(e.createNode("paragraph",{},e.parseInline(n.tokens))):n.text?t.push(e.createNode("paragraph",{},[e.createNode("text",{text:n.text})])):t.push(e.createNode("paragraph",{},[])),n.nestedTokens&&n.nestedTokens.length>0){const s=e.parseChildren(n.nestedTokens);t.push(...s)}return e.createNode("taskItem",{checked:n.checked||!1},t)},renderMarkdown:(n,e)=>{var t;const l=`- [${(t=n.attrs)!=null&&t.checked?"x":" "}] `;return Bp(n,e,l)},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:s})=>{const l=document.createElement("li"),o=document.createElement("label"),c=document.createElement("span"),f=document.createElement("input"),d=document.createElement("div"),h=y=>{var x,v;f.ariaLabel=((v=(x=this.options.a11y)==null?void 0:x.checkboxLabel)==null?void 0:v.call(x,y,f.checked))||`Task item checkbox for ${y.textContent||"empty task item"}`};h(n),o.contentEditable="false",f.type="checkbox",f.addEventListener("mousedown",y=>y.preventDefault()),f.addEventListener("change",y=>{if(!s.isEditable&&!this.options.onReadOnlyChecked){f.checked=!f.checked;return}const{checked:x}=y.target;s.isEditable&&typeof t=="function"&&s.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:v})=>{const k=t();if(typeof k!="number")return!1;const E=v.doc.nodeAt(k);return v.setNodeMarkup(k,void 0,{...E?.attrs,checked:x}),!0}).run(),!s.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,x)||(f.checked=!f.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([y,x])=>{l.setAttribute(y,x)}),l.dataset.checked=n.attrs.checked,f.checked=n.attrs.checked,o.append(f,c),l.append(o,d),Object.entries(e).forEach(([y,x])=>{l.setAttribute(y,x)});let m=new Set(Object.keys(e));return{dom:l,contentDOM:d,update:y=>{if(y.type!==this.type)return!1;l.dataset.checked=y.attrs.checked,f.checked=y.attrs.checked,h(y);const x=s.extensionManager.attributes,v=jo(y,x),k=new Set(Object.keys(v)),E=this.options.HTMLAttributes;return m.forEach(M=>{k.has(M)||(M in E?l.setAttribute(M,E[M]):l.removeAttribute(M))}),Object.entries(v).forEach(([M,C])=>{C==null?M in E?l.setAttribute(M,E[M]):l.removeAttribute(M):l.setAttribute(M,C)}),m=k,!0}}}},addInputRules(){return[al({find:z3,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),CS=Sn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",Mt(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},parseMarkdown:(n,e)=>e.createNode("taskList",{},e.parseChildren(n.items||[])),renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(n){var e;const t=(e=n.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return t!==void 0?t:-1},tokenize(n,e,t){const s=o=>{const c=Jh(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:f=>({indentLevel:f[1].length,mainContent:f[4],checked:f[3].toLowerCase()==="x"}),createToken:(f,d)=>({type:"taskItem",raw:"",mainContent:f.mainContent,indentLevel:f.indentLevel,checked:f.checked,text:f.mainContent,tokens:t.inlineTokens(f.mainContent),nestedTokens:d}),customNestedParser:s},t);return c?[{type:"taskList",raw:c.raw,items:c.items}]:t.blockTokens(o)},l=Jh(n,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,c)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:t.inlineTokens(o.mainContent),nestedTokens:c}),customNestedParser:s},t);if(l)return{type:"taskList",raw:l.raw,items:l.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});yt.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(mS.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push(gS.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(kS.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(ES.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(MS.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(CS.configure(this.options.taskList)),n}});var Rx="&nbsp;",L3="",_3=Sn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Mt(this.options.HTMLAttributes,n),0]},parseMarkdown:(n,e)=>{const t=n.tokens||[];if(t.length===1&&t[0].type==="image")return e.parseChildren([t[0]]);const s=e.parseInline(t);return s.length===1&&s[0].type==="text"&&(s[0].text===Rx||s[0].text===L3)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,s)},renderMarkdown:(n,e)=>{if(!n)return"";const t=Array.isArray(n.content)?n.content:[];return t.length===0?Rx:e.renderChildren(t)},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),B3=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,H3=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,U3=li.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Mt(this.options.HTMLAttributes,n),0]},markdownTokenName:"del",parseMarkdown:(n,e)=>e.applyMark("strike",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`~~${e.renderChildren(n)}~~`,addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ol({find:B3,type:this.type})]},addPasteRules(){return[si({find:H3,type:this.type})]}}),I3=Sn.create({name:"text",group:"inline",parseMarkdown:n=>({type:"text",text:n.text||""}),renderMarkdown:n=>n.text||""}),q3=li.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",Mt(this.options.HTMLAttributes,n),0]},parseMarkdown(n,e){return e.applyMark(this.name||"underline",e.parseInline(n.tokens||[]))},renderMarkdown(n,e){return`++${e.renderChildren(n)}++`},markdownTokenizer:{name:"underline",level:"inline",start(n){return n.indexOf("++")},tokenize(n,e,t){const l=/^(\+\+)([\s\S]+?)(\+\+)/.exec(n);if(!l)return;const o=l[2].trim();return{type:"underline",raw:l[0],text:o,tokens:t.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function V3(n={}){return new ct({view(e){return new $3(e,n)}})}class $3{constructor(e,t){var s;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(s=t.width)!==null&&s!==void 0?s:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(l=>{let o=c=>{this[l](c)};return e.dom.addEventListener(l,o),{name:l,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,s,l=this.editorView.dom,o=l.getBoundingClientRect(),c=o.width/l.offsetWidth,f=o.height/l.offsetHeight;if(t){let y=e.nodeBefore,x=e.nodeAfter;if(y||x){let v=this.editorView.nodeDOM(this.cursorPos-(y?y.nodeSize:0));if(v){let k=v.getBoundingClientRect(),E=y?k.bottom:k.top;y&&x&&(E=(E+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let M=this.width/2*f;s={left:k.left,right:k.right,top:E-M,bottom:E+M}}}}if(!s){let y=this.editorView.coordsAtPos(this.cursorPos),x=this.width/2*c;s={left:y.left-x,right:y.left+x,top:y.top,bottom:y.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,m;if(!d||d==document.body&&getComputedStyle(d).position=="static")h=-pageXOffset,m=-pageYOffset;else{let y=d.getBoundingClientRect(),x=y.width/d.offsetWidth,v=y.height/d.offsetHeight;h=y.left-d.scrollLeft*x,m=y.top-d.scrollTop*v}this.element.style.left=(s.left-h)/c+"px",this.element.style.top=(s.top-m)/f+"px",this.element.style.width=(s.right-s.left)/c+"px",this.element.style.height=(s.bottom-s.top)/f+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),s=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),l=s&&s.type.spec.disableDropCursor,o=typeof l=="function"?l(this.editorView,t,e):l;if(t&&!o){let c=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let f=x1(this.editorView.state.doc,c,this.editorView.dragging.slice);f!=null&&(c=f)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class pt extends De{constructor(e){super(e,e)}map(e,t){let s=e.resolve(t.map(this.head));return pt.valid(s)?new pt(s):De.near(s)}content(){return ae.empty}eq(e){return e instanceof pt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new pt(e.resolve(t.pos))}getBookmark(){return new Jp(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!G3(e)||!Y3(e))return!1;let s=t.type.spec.allowGapCursor;if(s!=null)return s;let l=t.contentMatchAt(e.index()).defaultType;return l&&l.isTextblock}static findGapCursorFrom(e,t,s=!1){e:for(;;){if(!s&&pt.valid(e))return e;let l=e.pos,o=null;for(let c=e.depth;;c--){let f=e.node(c);if(t>0?e.indexAfter(c)<f.childCount:e.index(c)>0){o=f.child(t>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;l+=t;let d=e.doc.resolve(l);if(pt.valid(d))return d}for(;;){let c=t>0?o.firstChild:o.lastChild;if(!c){if(o.isAtom&&!o.isText&&!ye.isSelectable(o)){e=e.doc.resolve(l+o.nodeSize*t),s=!1;continue e}break}o=c,l+=t;let f=e.doc.resolve(l);if(pt.valid(f))return f}return null}}}pt.prototype.visible=!1;pt.findFrom=pt.findGapCursorFrom;De.jsonID("gapcursor",pt);class Jp{constructor(e){this.pos=e}map(e){return new Jp(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return pt.valid(t)?new pt(t):De.near(t)}}function wS(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function G3(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),s=n.node(e);if(t==0){if(s.type.spec.isolating)return!0;continue}for(let l=s.child(t-1);;l=l.lastChild){if(l.childCount==0&&!l.inlineContent||wS(l.type))return!0;if(l.inlineContent)return!1}}return!0}function Y3(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),s=n.node(e);if(t==s.childCount){if(s.type.spec.isolating)return!0;continue}for(let l=s.child(t);;l=l.firstChild){if(l.childCount==0&&!l.inlineContent||wS(l.type))return!0;if(l.inlineContent)return!1}}return!0}function K3(){return new ct({props:{decorations:X3,createSelectionBetween(n,e,t){return e.pos==t.pos&&pt.valid(t)?new pt(t):null},handleClick:F3,handleKeyDown:P3,handleDOMEvents:{beforeinput:J3}}})}const P3=vv({ArrowLeft:mc("horiz",-1),ArrowRight:mc("horiz",1),ArrowUp:mc("vert",-1),ArrowDown:mc("vert",1)});function mc(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(s,l,o){let c=s.selection,f=e>0?c.$to:c.$from,d=c.empty;if(c instanceof ve){if(!o.endOfTextblock(t)||f.depth==0)return!1;d=!1,f=s.doc.resolve(e>0?f.after():f.before())}let h=pt.findGapCursorFrom(f,e,d);return h?(l&&l(s.tr.setSelection(new pt(h))),!0):!1}}function F3(n,e,t){if(!n||!n.editable)return!1;let s=n.state.doc.resolve(e);if(!pt.valid(s))return!1;let l=n.posAtCoords({left:t.clientX,top:t.clientY});return l&&l.inside>-1&&ye.isSelectable(n.state.doc.nodeAt(l.inside))?!1:(n.dispatch(n.state.tr.setSelection(new pt(s))),!0)}function J3(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof pt))return!1;let{$from:t}=n.state.selection,s=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!s)return!1;let l=Z.empty;for(let c=s.length-1;c>=0;c--)l=Z.from(s[c].createAndFill(null,l));let o=n.state.tr.replace(t.pos,t.pos,new ae(l,0,0));return o.setSelection(ve.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function X3(n){if(!(n.selection instanceof pt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",at.create(n.doc,[Ft.widget(n.selection.head,e,{key:"gapcursor"})])}var du=200,jt=function(){};jt.prototype.append=function(e){return e.length?(e=jt.from(e),!this.length&&e||e.length<du&&this.leafAppend(e)||this.length<du&&e.leafPrepend(this)||this.appendInner(e)):this};jt.prototype.prepend=function(e){return e.length?jt.from(e).append(this):this};jt.prototype.appendInner=function(e){return new Q3(this,e)};jt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?jt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};jt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};jt.prototype.forEach=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length),t<=s?this.forEachInner(e,t,s,0):this.forEachInvertedInner(e,t,s,0)};jt.prototype.map=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length);var l=[];return this.forEach(function(o,c){return l.push(e(o,c))},t,s),l};jt.from=function(e){return e instanceof jt?e:e&&e.length?new NS(e):jt.empty};var NS=(function(n){function e(s){n.call(this),this.values=s}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(l,o){return l==0&&o==this.length?this:new e(this.values.slice(l,o))},e.prototype.getInner=function(l){return this.values[l]},e.prototype.forEachInner=function(l,o,c,f){for(var d=o;d<c;d++)if(l(this.values[d],f+d)===!1)return!1},e.prototype.forEachInvertedInner=function(l,o,c,f){for(var d=o-1;d>=c;d--)if(l(this.values[d],f+d)===!1)return!1},e.prototype.leafAppend=function(l){if(this.length+l.length<=du)return new e(this.values.concat(l.flatten()))},e.prototype.leafPrepend=function(l){if(this.length+l.length<=du)return new e(l.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e})(jt);jt.empty=new NS([]);var Q3=(function(n){function e(t,s){n.call(this),this.left=t,this.right=s,this.length=t.length+s.length,this.depth=Math.max(t.depth,s.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(s){return s<this.left.length?this.left.get(s):this.right.get(s-this.left.length)},e.prototype.forEachInner=function(s,l,o,c){var f=this.left.length;if(l<f&&this.left.forEachInner(s,l,Math.min(o,f),c)===!1||o>f&&this.right.forEachInner(s,Math.max(l-f,0),Math.min(this.length,o)-f,c+f)===!1)return!1},e.prototype.forEachInvertedInner=function(s,l,o,c){var f=this.left.length;if(l>f&&this.right.forEachInvertedInner(s,l-f,Math.max(o,f)-f,c+f)===!1||o<f&&this.left.forEachInvertedInner(s,Math.min(l,f),o,c)===!1)return!1},e.prototype.sliceInner=function(s,l){if(s==0&&l==this.length)return this;var o=this.left.length;return l<=o?this.left.slice(s,l):s>=o?this.right.slice(s-o,l-o):this.left.slice(s,o).append(this.right.slice(0,l-o))},e.prototype.leafAppend=function(s){var l=this.right.leafAppend(s);if(l)return new e(this.left,l)},e.prototype.leafPrepend=function(s){var l=this.left.leafPrepend(s);if(l)return new e(l,this.right)},e.prototype.appendInner=function(s){return this.left.depth>=Math.max(this.right.depth,s.depth)+1?new e(this.left,new e(this.right,s)):new e(this,s)},e})(jt);const Z3=500;class qn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}let l,o;t&&(l=this.remapping(s,this.items.length),o=l.maps.length);let c=e.tr,f,d,h=[],m=[];return this.items.forEach((y,x)=>{if(!y.step){l||(l=this.remapping(s,x+1),o=l.maps.length),o--,m.push(y);return}if(l){m.push(new Jn(y.map));let v=y.step.map(l.slice(o)),k;v&&c.maybeStep(v).doc&&(k=c.mapping.maps[c.mapping.maps.length-1],h.push(new Jn(k,void 0,void 0,h.length+m.length))),o--,k&&l.appendMap(k,o)}else c.maybeStep(y.step);if(y.selection)return f=l?y.selection.map(l.slice(o)):y.selection,d=new qn(this.items.slice(0,s).append(m.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:c,selection:f}}addTransform(e,t,s,l){let o=[],c=this.eventCount,f=this.items,d=!l&&f.length?f.get(f.length-1):null;for(let m=0;m<e.steps.length;m++){let y=e.steps[m].invert(e.docs[m]),x=new Jn(e.mapping.maps[m],y,t),v;(v=d&&d.merge(x))&&(x=v,m?o.pop():f=f.slice(0,f.length-1)),o.push(x),t&&(c++,t=void 0),l||(d=x)}let h=c-s.depth;return h>eO&&(f=W3(f,h),c-=h),new qn(f.append(o),c)}remapping(e,t){let s=new Co;return this.items.forEach((l,o)=>{let c=l.mirrorOffset!=null&&o-l.mirrorOffset>=e?s.maps.length-l.mirrorOffset:void 0;s.appendMap(l.map,c)},e,t),s}addMaps(e){return this.eventCount==0?this:new qn(this.items.append(e.map(t=>new Jn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let s=[],l=Math.max(0,this.items.length-t),o=e.mapping,c=e.steps.length,f=this.eventCount;this.items.forEach(x=>{x.selection&&f--},l);let d=t;this.items.forEach(x=>{let v=o.getMirror(--d);if(v==null)return;c=Math.min(c,v);let k=o.maps[v];if(x.step){let E=e.steps[v].invert(e.docs[v]),M=x.selection&&x.selection.map(o.slice(d+1,v));M&&f++,s.push(new Jn(k,E,M))}else s.push(new Jn(k))},l);let h=[];for(let x=t;x<c;x++)h.push(new Jn(o.maps[x]));let m=this.items.slice(0,l).append(h).append(s),y=new qn(m,f);return y.emptyItemCount()>Z3&&(y=y.compress(this.items.length-s.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),s=t.maps.length,l=[],o=0;return this.items.forEach((c,f)=>{if(f>=e)l.push(c),c.selection&&o++;else if(c.step){let d=c.step.map(t.slice(s)),h=d&&d.getMap();if(s--,h&&t.appendMap(h,s),d){let m=c.selection&&c.selection.map(t.slice(s));m&&o++;let y=new Jn(h.invert(),d,m),x,v=l.length-1;(x=l.length&&l[v].merge(y))?l[v]=x:l.push(y)}}else c.map&&s--},this.items.length,0),new qn(jt.from(l.reverse()),o)}}qn.empty=new qn(jt.empty,0);function W3(n,e){let t;return n.forEach((s,l)=>{if(s.selection&&e--==0)return t=l,!1}),n.slice(t)}class Jn{constructor(e,t,s,l){this.map=e,this.step=t,this.selection=s,this.mirrorOffset=l}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Jn(t.getMap().invert(),t,this.selection)}}}class is{constructor(e,t,s,l,o){this.done=e,this.undone=t,this.prevRanges=s,this.prevTime=l,this.prevComposition=o}}const eO=20;function tO(n,e,t,s){let l=t.getMeta(Ws),o;if(l)return l.historyState;t.getMeta(sO)&&(n=new is(n.done,n.undone,null,0,-1));let c=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(c&&c.getMeta(Ws))return c.getMeta(Ws).redo?new is(n.done.addTransform(t,void 0,s,vc(e)),n.undone,zx(t.mapping.maps),n.prevTime,n.prevComposition):new is(n.done,n.undone.addTransform(t,void 0,s,vc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let f=t.getMeta("composition"),d=n.prevTime==0||!c&&n.prevComposition!=f&&(n.prevTime<(t.time||0)-s.newGroupDelay||!nO(t,n.prevRanges)),h=c?wh(n.prevRanges,t.mapping):zx(t.mapping.maps);return new is(n.done.addTransform(t,d?e.selection.getBookmark():void 0,s,vc(e)),qn.empty,h,t.time,f??n.prevComposition)}else return(o=t.getMeta("rebased"))?new is(n.done.rebased(t,o),n.undone.rebased(t,o),wh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new is(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),wh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function nO(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((s,l)=>{for(let o=0;o<e.length;o+=2)s<=e[o+1]&&l>=e[o]&&(t=!0)}),t}function zx(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((s,l,o,c)=>e.push(o,c));return e}function wh(n,e){if(!n)return null;let t=[];for(let s=0;s<n.length;s+=2){let l=e.map(n[s],1),o=e.map(n[s+1],-1);l<=o&&t.push(l,o)}return t}function rO(n,e,t){let s=vc(e),l=Ws.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,s);if(!o)return null;let c=o.selection.resolve(o.transform.doc),f=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),l,s),d=new is(t?f:o.remaining,t?o.remaining:f,null,0,-1);return o.transform.setSelection(c).setMeta(Ws,{redo:t,historyState:d})}let Nh=!1,Lx=null;function vc(n){let e=n.plugins;if(Lx!=e){Nh=!1,Lx=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Nh=!0;break}}return Nh}const Ws=new wt("history"),sO=new wt("closeHistory");function iO(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new ct({key:Ws,state:{init(){return new is(qn.empty,qn.empty,null,0,-1)},apply(e,t,s){return tO(t,s,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let s=t.inputType,l=s=="historyUndo"?OS:s=="historyRedo"?DS:null;return!l||!e.editable?!1:(t.preventDefault(),l(e.state,e.dispatch))}}}})}function AS(n,e){return(t,s)=>{let l=Ws.getState(t);if(!l||(n?l.undone:l.done).eventCount==0)return!1;if(s){let o=rO(l,t,n);o&&s(e?o.scrollIntoView():o)}return!0}}const OS=AS(!1,!0),DS=AS(!0,!0);yt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=n?.node||this.editor.state.doc;if((n?.mode||this.options.mode)==="textSize"){const s=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(s)}return e.nodeSize},this.storage.words=n=>{const e=n?.node||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new ct({key:new wt("characterCount"),appendTransaction:(e,t,s)=>{if(n)return;const l=this.options.limit;if(l==null||l===0){n=!0;return}const o=this.storage.characters({node:s.doc});if(o>l){const c=o-l,f=0,d=c;console.warn(`[CharacterCount] Initial content exceeded limit of ${l} characters. Content was automatically trimmed.`);const h=s.tr.deleteRange(f,d);return n=!0,h}n=!0},filterTransaction:(e,t)=>{const s=this.options.limit;if(!e.docChanged||s===0||s===null||s===void 0)return!0;const l=this.storage.characters({node:t.doc}),o=this.storage.characters({node:e.doc});if(o<=s||l>s&&o>s&&o<=l)return!0;if(l>s&&o>s&&o>l||!e.getMeta("paste"))return!1;const f=e.selection.$head.pos,d=o-s,h=f-d,m=f;return e.deleteRange(h,m),!(this.storage.characters({node:e.doc})>s)}})]}});var lO=yt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[V3(this.options)]}});yt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new ct({key:new wt("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:s}=this.editor,{anchor:l}=e,o=[];if(!t||!s)return at.create(n,[]);let c=0;this.options.mode==="deepest"&&n.descendants((d,h)=>{if(d.isText)return;if(!(l>=h&&l<=h+d.nodeSize-1))return!1;c+=1});let f=0;return n.descendants((d,h)=>{if(d.isText||!(l>=h&&l<=h+d.nodeSize-1))return!1;if(f+=1,this.options.mode==="deepest"&&c-f>0||this.options.mode==="shallowest"&&f>1)return this.options.mode==="deepest";o.push(Ft.node(h,h+d.nodeSize,{class:this.options.className}))}),at.create(n,o)}}})]}});var oO=yt.create({name:"gapCursor",addProseMirrorPlugins(){return[K3()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Pe(pe(n,"allowGapCursor",t)))!=null?e:null}}}),_x="placeholder";function aO(n){return n.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}yt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:_x,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const n=this.options.dataAttribute?`data-${aO(this.options.dataAttribute)}`:`data-${_x}`;return[new ct({key:new wt("placeholder"),props:{decorations:({doc:e,selection:t})=>{const s=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:l}=t,o=[];if(!s)return null;const c=this.editor.isEmpty;return e.descendants((f,d)=>{const h=l>=d&&l<=d+f.nodeSize,m=!f.isLeaf&&Eu(f);if((h||!this.options.showOnlyCurrent)&&m){const y=[this.options.emptyNodeClass];c&&y.push(this.options.emptyEditorClass);const x=Ft.node(d,d+f.nodeSize,{class:y.join(" "),[n]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:f,pos:d,hasAnchor:h}):this.options.placeholder});o.push(x)}return this.options.includeChildren}),at.create(e,o)}}})]}});yt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:e}=this;return[new ct({key:new wt("selection"),props:{decorations(t){return t.selection.empty||n.isFocused||!n.isEditable||_v(t.selection)||n.view.dragging?null:at.create(t.doc,[Ft.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function Bx({types:n,node:e}){return e&&Array.isArray(n)&&n.includes(e.type)||e?.type===n}var cO=yt.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var n;const e=new wt(this.name),t=this.options.node||((n=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:n.name)||"paragraph",s=Object.entries(this.editor.schema.nodes).map(([,l])=>l).filter(l=>(this.options.notAfter||[]).concat(t).includes(l.name));return[new ct({key:e,appendTransaction:(l,o,c)=>{const{doc:f,tr:d,schema:h}=c,m=e.getState(c),y=f.content.size,x=h.nodes[t];if(m)return d.insert(y,x.create())},state:{init:(l,o)=>{const c=o.tr.doc.lastChild;return!Bx({node:c,types:s})},apply:(l,o)=>{if(!l.docChanged||l.getMeta("__uniqueIDTransaction"))return o;const c=l.doc.lastChild;return!Bx({node:c,types:s})}}})]}}),uO=yt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>OS(n,e),redo:()=>({state:n,dispatch:e})=>DS(n,e)}},addProseMirrorPlugins(){return[iO(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),fO=yt.create({name:"starterKit",addExtensions(){var n,e,t,s;const l=[];return this.options.bold!==!1&&l.push(HA.configure(this.options.bold)),this.options.blockquote!==!1&&l.push(RA.configure(this.options.blockquote)),this.options.bulletList!==!1&&l.push(mS.configure(this.options.bulletList)),this.options.code!==!1&&l.push(qA.configure(this.options.code)),this.options.codeBlock!==!1&&l.push(GA.configure(this.options.codeBlock)),this.options.document!==!1&&l.push(YA.configure(this.options.document)),this.options.dropcursor!==!1&&l.push(lO.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&l.push(oO.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&l.push(KA.configure(this.options.hardBreak)),this.options.heading!==!1&&l.push(PA.configure(this.options.heading)),this.options.undoRedo!==!1&&l.push(uO.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&l.push(FA.configure(this.options.horizontalRule)),this.options.italic!==!1&&l.push(WA.configure(this.options.italic)),this.options.listItem!==!1&&l.push(gS.configure(this.options.listItem)),this.options.listKeymap!==!1&&l.push(kS.configure((n=this.options)==null?void 0:n.listKeymap)),this.options.link!==!1&&l.push(E3.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&l.push(ES.configure(this.options.orderedList)),this.options.paragraph!==!1&&l.push(_3.configure(this.options.paragraph)),this.options.strike!==!1&&l.push(U3.configure(this.options.strike)),this.options.text!==!1&&l.push(I3.configure(this.options.text)),this.options.underline!==!1&&l.push(q3.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&l.push(cO.configure((s=this.options)==null?void 0:s.trailingNode)),l}}),dO=fO,hO=CS,pO=MS;const ts=({onClick:n,active:e,title:t,children:s})=>b.jsx("button",{type:"button",onClick:n,title:t,className:`
      w-8 h-8 flex items-center justify-center rounded
      text-sm font-bold transition-colors cursor-pointer
      ${e?"bg-[var(--color-border-main)] text-[var(--color-bg-card)]":"text-[var(--color-text-muted)] hover:text-[var(--color-text-main)] hover:bg-[var(--color-bg-white)]"}
    `,children:s}),mO=({editor:n,isFullscreen:e,onToggleFullscreen:t})=>n?b.jsxs("div",{className:"flex gap-1 p-2 border-b border-[var(--color-border-gray-300)] bg-[var(--color-bg-gray-50)]",children:[b.jsx(ts,{onClick:()=>n.chain().focus().toggleHeading({level:1}).run(),active:n.isActive("heading",{level:1}),title:"Heading (Ctrl+Alt+1)",children:"H"}),b.jsx(ts,{onClick:()=>n.chain().focus().toggleBold().run(),active:n.isActive("bold"),title:"Bold (Ctrl+B)",children:"B"}),b.jsx(ts,{onClick:()=>n.chain().focus().toggleItalic().run(),active:n.isActive("italic"),title:"Italic (Ctrl+I)",children:b.jsx("span",{className:"italic",children:"I"})}),b.jsx("div",{className:"w-px bg-[var(--color-border-gray-300)] mx-1"}),b.jsx(ts,{onClick:()=>n.chain().focus().toggleBulletList().run(),active:n.isActive("bulletList"),title:"Bullet List",children:""}),b.jsx(ts,{onClick:()=>n.chain().focus().toggleOrderedList().run(),active:n.isActive("orderedList"),title:"Numbered List",children:"1."}),b.jsx(ts,{onClick:()=>n.chain().focus().toggleTaskList().run(),active:n.isActive("taskList"),title:"Checkbox List",children:""}),b.jsx("div",{className:"w-px bg-[var(--color-border-gray-300)] mx-1"}),b.jsx(ts,{onClick:()=>n.chain().focus().setHorizontalRule().run(),active:!1,title:"Horizontal Rule",children:""}),b.jsx("div",{className:"flex-1"}),b.jsx(ts,{onClick:t,active:e,title:e?"Exit Fullscreen (Esc)":"Fullscreen",children:e?"":""})]}):null,gO=({value:n,onChange:e})=>{const[t,s]=Q.useState(!1),l=NA({extensions:[dO.configure({heading:{levels:[1]},codeBlock:!1,code:!1,blockquote:!1,strike:!1}),hO,pO.configure({nested:!1})],content:n?Hx(n):"",onUpdate:({editor:c})=>{const f=Ux(c.getHTML());e(f)},editorProps:{attributes:{class:"prose prose-sm max-w-none p-3 min-h-[120px] focus:outline-none font-mono text-sm"}}});Xn.useEffect(()=>{l&&n!==void 0&&Ux(l.getHTML())!==n&&l.commands.setContent(Hx(n))},[n,l]),Xn.useEffect(()=>{const c=f=>{f.key==="Escape"&&t&&s(!1)};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[t]);const o=t?"fixed inset-0 z-50 flex flex-col bg-[var(--color-bg-base)]":"border-2 border-[var(--color-border-gray-300)] rounded-lg overflow-hidden bg-[var(--color-bg-input)] focus-within:border-[var(--color-border-main)] transition-colors";return b.jsxs("div",{className:o,children:[b.jsx(mO,{editor:l,isFullscreen:t,onToggleFullscreen:()=>s(!t)}),b.jsx("div",{className:t?"flex-1 overflow-auto":"",children:b.jsx(tS,{editor:l})}),b.jsx("style",{children:`
        .ProseMirror {
          min-height: ${t?"calc(100vh - 60px)":"120px"};
          font-family: 'IBM Plex Mono', monospace;
          font-size: 14px;
          color: var(--color-text-main);
        }
        .ProseMirror:focus {
          outline: none;
        }
        .ProseMirror p {
          margin: 0.5em 0;
        }
        .ProseMirror h1 {
          font-size: 1.25em;
          font-weight: 700;
          margin: 0.75em 0 0.5em;
        }
        .ProseMirror strong {
          font-weight: 700;
        }
        .ProseMirror em {
          font-style: italic;
        }
        .ProseMirror ul, .ProseMirror.prose ul {
          list-style-type: disc !important;
          list-style-position: outside !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
        }
        .ProseMirror ol, .ProseMirror.prose ol {
          list-style-type: decimal !important;
          list-style-position: outside !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
        }
        .ProseMirror li, .ProseMirror.prose li {
          margin: 0.25em 0 !important;
          display: list-item !important;
        }
        .ProseMirror hr {
          border: none;
          border-top: 2px dashed var(--color-border-gray-400);
          margin: 1em 0;
        }
        /* Task List Styles */
        .ProseMirror ul[data-type="taskList"] {
          list-style: none !important;
          padding-left: 0 !important;
        }
        .ProseMirror ul[data-type="taskList"] li {
          display: flex !important;
          align-items: center;
          gap: 0.5em;
        }
        .ProseMirror ul[data-type="taskList"] li > label {
          flex-shrink: 0;
          margin-top: 0.15em;
        }
        .ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"] {
          width: 1em;
          height: 1em;
          cursor: pointer;
        }
        .ProseMirror ul[data-type="taskList"] li > div {
          flex: 1;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          color: var(--color-text-muted);
          pointer-events: none;
          float: left;
          height: 0;
        }
      `})]})};function Hx(n){return n?n.replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(new RegExp("(?<!\\*)\\*([^*]+)\\*(?!\\*)","g"),"<em>$1</em>").replace(/_(.+?)_/g,"<em>$1</em>").replace(/^---$/gm,"<hr>").replace(/^- \[x\] (.+)$/gm,"<taskitem checked>$1</taskitem>").replace(/^- \[ \] (.+)$/gm,"<taskitem>$1</taskitem>").replace(/^[*-] (.+)$/gm,"<li>$1</li>").replace(/^\d+\. (.+)$/gm,"<oli>$1</oli>").replace(/(<taskitem[^>]*>.*<\/taskitem>\n?)+/g,'<ul data-type="taskList">$&</ul>').replace(/<taskitem checked>/g,'<li data-type="taskItem" data-checked="true"><label><input type="checkbox" checked></label><div><p>').replace(/<taskitem>/g,'<li data-type="taskItem" data-checked="false"><label><input type="checkbox"></label><div><p>').replace(/<\/taskitem>/g,"</p></div></li>").replace(/(<li>.*<\/li>\n?)+/g,"<ul>$&</ul>").replace(/(<oli>.*<\/oli>\n?)+/g,"<ol>$&</ol>").replace(/<\/?oli>/g,t=>t.replace("oli","li")).split(`
`).map(t=>t.match(/^<(h1|ul|ol|hr|li)/)?t:t.trim()===""?"":t.match(/^<[a-z]/)?t:`<p>${t}</p>`).join(`
`):""}function Ux(n){if(!n)return"";const e=document.createElement("div");e.innerHTML=n;let t="";const s=l=>{if(l.nodeType===Node.TEXT_NODE)return l.textContent;if(l.nodeType!==Node.ELEMENT_NODE)return"";const o=Array.from(l.childNodes).map(s).join("");switch(l.tagName.toLowerCase()){case"h1":return`# ${o}
`;case"p":return`${o}
`;case"strong":return`**${o}**`;case"em":return`*${o}*`;case"ul":return o;case"ol":return o;case"li":const c=l.parentElement;if(l.dataset?.type==="taskItem"||l.getAttribute("data-type")==="taskItem"){const d=l.dataset?.checked==="true"||l.getAttribute("data-checked")==="true"?"[x]":"[ ]",h=l.querySelector("div"),m=h?h.textContent.trim():o.trim();return`- ${d} ${m}
`}return c&&c.tagName.toLowerCase()==="ol"?`${Array.from(c.children).indexOf(l)+1}. ${o}
`:`- ${o}
`;case"hr":return`---
`;case"br":return`
`;case"label":return"";case"input":return"";default:return o}};return t=Array.from(e.childNodes).map(s).join(""),t.replace(/\n{3,}/g,`

`).trim()}const yO=({schema:n,uiSchema:e={},formData:t={},onChange:s,moduleId:l,onActionComplete:o})=>n?b.jsx("div",{className:"space-y-4",children:b.jsx(op,{schema:n,uiSchema:e,value:t,onChange:c=>s(c),path:[],rootValue:t,onRootChange:s,moduleId:l,onActionComplete:o})}):null,op=({schema:n,uiSchema:e,value:t,onChange:s,path:l,label:o,required:c,compact:f,rootValue:d,onRootChange:h,moduleId:m,onActionComplete:y})=>{const x=n.type,v=n.title||o,k=n.description,E=e?.["ui:options"]||{},M=e?.["ui:widget"];if(M==="location-search")return b.jsxs("div",{className:"mb-4",children:[v&&b.jsx("label",{className:Ue.label,children:v}),b.jsx(Vx,{value:t,onChange:s}),k&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});if(M==="key-value-list")return b.jsxs("div",{className:"mb-4",children:[v&&b.jsx("label",{className:Ue.label,children:v}),b.jsx(pE,{value:t,onChange:s}),k&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});if(M==="preset-select"){const C=E.presets||{};return b.jsxs("div",{className:"mb-4",children:[v&&b.jsx("label",{className:Ue.label,children:v}),b.jsx(gE,{value:t,onChange:s,presets:C,onPresetSelect:L=>{h&&d&&h({...d,...L})}}),k&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]})}if(M==="webhook-test")return b.jsx("div",{className:"mb-4",children:b.jsx(xE,{formData:d})});if(M==="action-button")return b.jsx(vE,{schema:n,uiSchema:e,moduleId:m,onActionComplete:y});if(M==="richtext")return b.jsxs("div",{className:"mb-4",children:[v&&b.jsx("label",{className:Ue.label,children:v}),b.jsx(gO,{value:t,onChange:s}),k&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});if(x==="object"){const C=E.layout==="inline"||E.layout==="compact";return b.jsxs("div",{className:C?"flex flex-wrap gap-x-4 gap-y-2 items-end":"space-y-3",children:[v&&!C&&b.jsx("h3",{className:"font-bold text-sm text-zinc-700 uppercase tracking-wider",children:v}),k&&!C&&b.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:k}),Object.entries(n.properties||{}).map(([L,$])=>{const te=e?.[L]||{},Y=t?.[L],J=C||te["ui:options"]?.compact,V=te["ui:showWhen"];return V&&t?.[V.field]!==V.value?null:b.jsx("div",{className:C?"flex-1 min-w-[120px]":"",children:b.jsx(op,{schema:$,uiSchema:te,value:Y,onChange:le=>{const ue={...t,[L]:le};s(ue)},path:[...l,L],label:$.title||L,required:n.required&&n.required.includes(L),compact:J,rootValue:d,onRootChange:h,moduleId:m,onActionComplete:y})},L)})]})}if(x==="array"){const C=t||[],L=n.items,$=e?.items||{};if(M==="checklist")return b.jsxs("div",{className:"space-y-2",children:[v&&b.jsx("label",{className:Ue.label,children:v}),b.jsx(mE,{value:C,onChange:s}),k&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});const te=()=>{const V=jS(L);s([...C,V])},Y=V=>{const le=[...C];le.splice(V,1),s(le)},J=(V,le)=>{const ue=[...C];ue[V]=le,s(ue)};return b.jsxs("div",{className:"space-y-2",children:[b.jsx("div",{className:"flex justify-between items-center",children:v&&b.jsx("label",{className:Ue.label,children:v})}),k&&b.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:k}),b.jsx("div",{className:"space-y-2",children:C.map((V,le)=>b.jsxs("div",{className:"flex gap-2 items-center p-3 border border-zinc-200 rounded-lg bg-white relative group",children:[b.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-zinc-100 flex items-center justify-center text-xs font-mono font-bold text-zinc-500",children:le+1}),b.jsx("div",{className:"flex-1",children:b.jsx(op,{schema:L,uiSchema:$,value:V,onChange:ue=>J(le,ue),path:[...l,le],moduleId:m})}),b.jsx("button",{type:"button",onClick:()=>Y(le),className:"text-gray-400 hover:text-red-500 transition-colors p-1",title:"Remove Item",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 256 256",children:b.jsx("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"})})})]},le))}),(!n.maxItems||C.length<n.maxItems)&&b.jsxs("button",{type:"button",onClick:te,className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs font-bold tracking-wider cursor-pointer",children:["+ ",e?.["ui:addLabel"]||"Add Item"]}),n.maxItems&&C.length>=n.maxItems&&b.jsxs("div",{className:"text-center text-xs text-zinc-400 py-2",children:["Maximum limit of ",n.maxItems," reached"]})]})}return x==="boolean"?b.jsxs("div",{className:`flex items-center gap-2 ${f?"py-0":"py-1"}`,children:[b.jsx("input",{type:"checkbox",checked:t||!1,onChange:C=>s(C.target.checked),className:"w-4 h-4 text-black rounded border-2 border-zinc-300 focus:ring-0 focus:ring-offset-0",style:{accentColor:"black"}}),b.jsx("label",{className:`text-sm text-black select-none cursor-pointer ${f?"font-medium":""}`,onClick:()=>s(!t),children:v})]}):b.jsxs("div",{className:f?"mb-0":"mb-2",children:[v&&b.jsxs("div",{className:"flex justify-between items-center mb-1",children:[b.jsxs("label",{className:f?Ue.labelSmall:Ue.label,children:[v," ",c&&b.jsx("span",{className:"text-red-500 ml-1",title:"Required",children:"*"})]}),e?.["ui:randomExample"]&&b.jsx("button",{type:"button",onClick:()=>{const C=e["ui:randomExample"];if(Array.isArray(C)&&C.length>0){const L=C.filter($=>$!==t);if(L.length===0){const $=C[Math.floor(Math.random()*C.length)];s($)}else{const $=L[Math.floor(Math.random()*L.length)];s($)}}},className:"text-xs text-zinc-400 hover:text-black hover:underline cursor-pointer transition-colors",title:"Insert random example",children:"Generate Example"})]}),n.enum?b.jsxs("select",{value:t??"",onChange:C=>s(C.target.value),className:f?Ue.inputSmall:Ue.input,children:[!c&&b.jsx("option",{value:"",children:"Select..."}),n.enum.map(C=>b.jsx("option",{value:C,children:C},C))]}):M==="textarea"?b.jsx("textarea",{value:t||"",onChange:C=>s(C.target.value),className:`${f?Ue.inputSmall:Ue.input} min-h-[100px] text-sm`,placeholder:e?.["ui:placeholder"],rows:E.rows||3}):b.jsx("input",{type:M==="password"?"password":x==="number"||x==="integer"?"number":"text",value:t??"",onChange:C=>{const L=C.target.value;s(x==="number"||x==="integer"?L===""?void 0:parseFloat(L):L)},className:f?Ue.inputSmall:Ue.input,placeholder:e?.["ui:placeholder"]}),k&&!f&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]})},jS=n=>{if(n.default!==void 0)return n.default;switch(n.type){case"string":return"";case"number":case"integer":return 0;case"boolean":return!1;case"array":return[];case"object":const e={};return n.properties&&Object.keys(n.properties).forEach(t=>{e[t]=jS(n.properties[t])}),e;default:return null}},bO=({value:n,onChange:e,onBlur:t,className:s})=>{const[l,o]=Q.useState(JSON.stringify(n||{},null,2)),[c,f]=Q.useState(!0),d=Q.useRef(null),h=Q.useRef(!1);Q.useEffect(()=>{h.current||o(JSON.stringify(n||{},null,2))},[n]);const m=v=>{const k=v.trim();return k===""?{}:JSON.parse(k)},y=v=>{const k=v.target.value;o(k);try{const E=m(k);f(!0),e(E)}catch{f(!1)}},x=v=>{h.current=!1;try{const k=m(l);f(!0),l.trim()===""&&o("{}"),t(k)}catch{o(JSON.stringify(n||{},null,2)),f(!0)}};return b.jsx("textarea",{ref:d,value:l,onChange:y,onFocus:()=>h.current=!0,onBlur:x,className:`${s} ${c?"":"border-red-500"}`})},xO=({module:n,updateConfig:e,onRefresh:t})=>{const{moduleTypes:s,loading:l}=_o(),o=n.config||{},c=s.find(h=>h.id===n.type),f=c?.configSchema,d=c?.uiSchema;if(f){const h=m=>{Object.keys(m).forEach(y=>{m[y]!==o[y]&&e(y,m[y])})};return b.jsx(yO,{schema:f,uiSchema:d,formData:o,onChange:h,moduleId:n.id,onActionComplete:t})}return l?b.jsx("div",{className:"p-4 text-center text-gray-500 italic",children:"Loading configuration schema..."}):b.jsxs("div",{className:"space-y-3",children:[b.jsx("p",{className:`${Ue.textSubtle} mb-2`,children:"This module does not have a configuration schema. You can edit the raw JSON configuration below."}),b.jsx(bO,{config:o,updateConfig:(h,m)=>e(h,m)})]})},vO=({className:n,title:e="delete",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("path",{d:"M2.5,5.5V14c0,.828,.672,1.5,1.5,1.5H12c.828,0,1.5-.672,1.5-1.5V5.5",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:".5",x2:"15.5",y1:"3.5",y2:"3.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"8",x2:"8",y1:"7.5",y2:"12.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"10.5",x2:"10.5",y1:"7.5",y2:"12.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"5.5",x2:"5.5",y1:"7.5",y2:"12.5"}),b.jsx("polyline",{fill:"none",points:"5.5 3.5 5.5 .5 10.5 .5 10.5 3.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),SO=({moduleId:n,module:e,setModule:t,onClose:s,onSave:l,onDelete:o})=>{const c=Q.useRef(null),{moduleTypes:f}=_o();return n===null||!e?null:b.jsx("div",{className:Ue.modalBackdrop,onMouseDown:d=>{d.target===d.currentTarget&&(c.current="backdrop")},onClick:d=>{d.target===d.currentTarget&&c.current==="backdrop"&&(l(n,e,!0),s()),c.current=null},children:b.jsxs("div",{className:Ue.modalContent,onClick:d=>d.stopPropagation(),children:[b.jsxs("div",{className:"flex justify-between items-start mb-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-bold text-black mb-1 ",children:"Edit Module"}),b.jsx("div",{className:"text-gray-600 text-sm ",children:b.jsxs("span",{className:"font-mono",children:["Type: ",f.find(d=>d.id===e?.type)?.label]})})]}),b.jsx(cp,{onClick:()=>{l(n,e,!0),s()}})]}),b.jsxs("div",{className:"mb-6",children:[b.jsx("label",{className:Ue.label,children:"Module Name"}),b.jsx("input",{type:"text",value:e?.name||"",onChange:d=>{t(h=>h&&{...h,name:d.target.value})},className:Ue.input})]}),e&&b.jsx(xO,{module:e,updateConfig:(d,h)=>{t(m=>m&&{...m,config:{...m.config,[d]:h}})},onRefresh:async()=>{try{const m=(await(await fetch("/api/settings")).json()).modules?.[n];m&&t(m)}catch(d){console.error("Failed to refresh module:",d)}}}),b.jsxs("div",{className:"mt-8 pt-6 border-t-2 border-gray-300 flex justify-end gap-3",children:[b.jsxs("button",{type:"button",onClick:()=>o(n),className:"px-4 py-2 bg-transparent border-0 rounded-lg transition-all cursor-pointer flex items-center gap-2",style:{color:"var(--color-error-light)"},onMouseEnter:d=>{d.currentTarget.style.color="var(--color-error)"},onMouseLeave:d=>{d.currentTarget.style.color="var(--color-error-light)"},children:[b.jsx(vO,{className:"w-4 h-4"}),"Delete Module"]}),b.jsx($s,{onClick:()=>{l(n,e,!0),s()},children:"Save"})]})]})})},kO=({position:n,channel:e,onClose:t,onUpdate:s,timeFormat:l})=>{const o=Q.useRef(null);return n===null?null:b.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onMouseDown:c=>{c.target===c.currentTarget&&(o.current="backdrop")},onClick:c=>{c.target===c.currentTarget&&o.current==="backdrop"&&t(),o.current=null},children:b.jsxs("div",{className:"border-4 rounded-xl p-4 sm:p-6 max-w-md w-full shadow-lg",style:{backgroundColor:"var(--color-bg-card)",borderColor:"var(--color-border-main)"},onClick:c=>c.stopPropagation(),children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsxs("h3",{className:"text-xl font-bold text-black ",children:["Schedule Channel ",n]}),b.jsx(cp,{onClick:t})]}),b.jsxs("div",{className:"space-y-4",children:[b.jsx("div",{className:"text-sm text-gray-600 mb-4 ",children:"Add times when this channel should automatically print."}),b.jsxs("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:[(e?.schedule||[]).map((c,f)=>b.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border-2 border-gray-300 hover:border-black",style:{backgroundColor:"var(--color-bg-card)"},children:[b.jsx("span",{className:"text-black  text-lg",children:Ah(c,l)}),b.jsx("button",{onClick:()=>{const d=[...e?.schedule||[]];d.splice(f,1),s(d)},className:"text-red-600 hover:text-red-700 px-2  font-bold cursor-pointer hover-shimmer",children:""})]},f)),(!e?.schedule||e.schedule.length===0)&&b.jsx("div",{className:"text-gray-500 text-center py-4 italic ",children:"No scheduled times."})]}),b.jsx("div",{className:"pt-4 border-t-2 border-gray-300",children:b.jsxs("form",{onSubmit:c=>{c.preventDefault();const f=c.target.elements.timeInput,d=f.value;if(d){const h=e?.schedule||[];if(!h.includes(d)){const m=[...h,d].sort();s(m),f.value=""}}},className:"flex gap-2",children:[b.jsx("input",{name:"timeInput",type:"time",required:!0,className:"flex-1 border-2 border-gray-300 rounded-lg px-3 py-2 text-black focus:outline-none focus:border-black ",style:{backgroundColor:"var(--color-bg-card)"}}),b.jsx($s,{type:"submit",children:"Add"})]})})]})]})})},TO=({show:n,wifiStatus:e})=>{if(!n)return null;const t=e?.ap_ssid||"PC-1-Setup-<device>",s=e?.ap_password||"Check printed instructions";return b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:b.jsxs("div",{className:"bg-white border-4 border-black rounded-xl p-4 sm:p-6 md:p-8 max-w-md w-full text-center shadow-lg",children:[b.jsx("div",{className:"text-6xl mb-4",children:""}),b.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:"Setup Mode Activating..."}),b.jsxs("div",{className:"text-left space-y-4 bg-gray-50 p-4 rounded-lg border-2 border-gray-300 mb-6",children:[b.jsxs("div",{className:"flex gap-3",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"1"}),b.jsx("p",{className:"text-black text-sm",children:"Wait for the printer to print setup instructions."})]}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"2"}),b.jsxs("p",{className:"text-black text-sm",children:["Connect your device to the ",b.jsx("span",{className:"text-black bg-gray-200 px-1 rounded border border-gray-300",children:t})," ","WiFi network."]})]}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"3"}),b.jsxs("p",{className:"text-black text-sm",children:["Password: ",b.jsx("span",{className:"text-black bg-gray-200 px-1 rounded border border-gray-300",children:s})]})]}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"4"}),b.jsxs("p",{className:"text-black text-sm",children:["Navigate to ",b.jsx("span",{className:"text-black bg-gray-200 px-1 rounded border border-gray-300",children:"http://10.42.0.1"})," to configure WiFi."]})]})]}),b.jsx("p",{className:"text-yellow-600 text-xs italic",children:"Note: This page will stop responding as the device switches networks."})]})})},EO=({status:n})=>n.message?b.jsx("div",{className:`fixed bottom-8 left-1/2 -translate-x-1/2 z-50 px-6 py-3 rounded-full shadow-xl text-sm font-medium transition-all transform duration-300 ${n.type==="success"?"text-gray-200 shadow-black/50":"text-red-400 shadow-black/50"}`,style:{backgroundColor:"var(--color-bg-dark)"},children:n.message}):null,MO=({setSettings:n,setModules:e,setStatus:t})=>{const s=async()=>{if(confirm("Are you sure you want to reset ALL settings to default? This cannot be undone."))try{const o=await(await fetch("/api/settings/reset",{method:"POST"})).json();n(o.config),e({}),t({type:"success",message:"Settings reset to defaults."})}catch(l){console.error(l),t({type:"error",message:"Failed to reset settings."})}};return b.jsx("button",{onClick:s,className:"text-xs text-red-400 hover:text-red-300 border border-red-800/40 hover:border-red-700/60 rounded px-3 py-1.5 bg-transparent transition-colors cursor-pointer",children:"Reset All Settings to Default"})},CO=({className:n="w-4 h-4"})=>b.jsx("svg",{className:n,fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),wO=({className:n,title:e="border width",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("rect",{height:"3",width:"15",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:".5",y:"2.5"}),b.jsx("rect",{height:"2",width:"15",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:".5",y:"8.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:".5",x2:"15.5",y1:"13.5",y2:"13.5"})]})]}),NO=({className:n,title:e="preferences",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"12.5",x2:"15.5",y1:"12.5",y2:"12.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"0.5",x2:"3.5",y1:"3.5",y2:"3.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"9.5",x2:"15.5",y1:"3.5",y2:"3.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"0.5",x2:"6.5",y1:"12.5",y2:"12.5"}),b.jsx("rect",{height:"6",width:"3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"3.5",y:"0.5"}),b.jsx("rect",{height:"6",width:"3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"9.5",y:"9.5"})]})]});function AO(){const[n,e]=Q.useState(null),[t,s]=Q.useState(null),{moduleTypes:l}=_o(),[o,c]=Q.useState({timezone:"",latitude:0,longitude:0,city_name:"",time_format:"12h",modules:{},channels:{}}),[f,d]=Q.useState({}),[h,m]=Q.useState({type:"",message:""}),[y,x]=Q.useState(!0),[v,k]=Q.useState(""),[E,M]=Q.useState([]),[C,L]=Q.useState(!1),[$,te]=Q.useState("channels"),[Y,J]=Q.useState(null),[V,le]=Q.useState(!1),[ue,Ne]=Q.useState(null),[et,ze]=Q.useState(null),[nt,Ie]=Q.useState(null),[ke,U]=Q.useState(!1),ee=Q.useRef(null);Q.useEffect(()=>{let O=!0;const I=async()=>{try{const B=await(await fetch("/api/wifi/status")).json();if(s(B),e(B.mode),B.mode==="ap"){O&&x(!1);return}if(O){try{const[se,W]=await Promise.all([fetch("/api/settings").then(ne=>ne.json()),fetch("/api/modules").then(ne=>ne.json())]);c(se),d(W.modules||{}),x(!1)}catch(se){console.error("Error fetching data:",se),m({type:"error",message:"Failed to load settings. Is the backend running?"}),x(!1)}O=!1}}catch(K){console.error("Error fetching WiFi status:",K),O&&x(!1)}};I();const z=setInterval(I,1e4);return()=>{clearInterval(z),ee.current&&clearTimeout(ee.current)}},[]);const he=async O=>{if(k(O),O.length<2){M([]),L(!1),ee.current&&(clearTimeout(ee.current),ee.current=null);return}ee.current&&clearTimeout(ee.current),L(!0),ee.current=setTimeout(async()=>{try{console.log("Searching for:",O);const I=new AbortController,z=setTimeout(()=>I.abort(),15e3),K=await fetch(`/api/location/search?q=${encodeURIComponent(O)}&limit=20&use_api=false`,{signal:I.signal});if(clearTimeout(z),!K.ok)throw new Error(`HTTP error! status: ${K.status}`);const B=await K.json();console.log("Search results:",B.results?.length||0),B.results?M(B.results):M([])}catch(I){I.name==="AbortError"?console.warn("Location search timed out"):(console.error("Error fetching locations:",I),M([]))}finally{L(!1),ee.current=null}},500)},Te=async(O,I)=>{try{const z=await fetch(`/api/channels/${O}/schedule`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(!z.ok)throw new Error("Failed to update schedule");const K=await z.json();c(B=>({...B,channels:{...B.channels,[O]:K.channel}})),m({type:"success",message:"Schedule updated!"}),setTimeout(()=>m({type:"",message:""}),3e3)}catch(z){console.error("Error updating schedule:",z),m({type:"error",message:"Failed to update schedule"})}},Be=async O=>{try{if(!(await fetch(`/action/print-channel/${O}`,{method:"POST"})).ok)throw new Error("Failed to trigger print");m({type:"success",message:`Printing Channel ${O}...`}),setTimeout(()=>m({type:"",message:""}),3e3)}catch(I){console.error("Error triggering print:",I),m({type:"error",message:"Failed to trigger print"})}},N=async O=>{try{const I=await fetch(`/debug/print-module/${O}`,{method:"POST"});if(!I.ok){const K=await I.json().catch(()=>({detail:"Failed to trigger print"}));throw new Error(K.detail||"Failed to trigger print")}const z=await I.json();m({type:"success",message:z.message||"Printing module..."}),setTimeout(()=>m({type:"",message:""}),3e3)}catch(I){console.error("Error triggering module print:",I),m({type:"error",message:I.message||"Failed to trigger print"}),setTimeout(()=>m({type:"",message:""}),3e3)}},q=async O=>{c(I=>({...I,...O}));try{const I={...o,channels:o.channels||{},modules:f,...O};if(console.log("Auto-saving settings:",O),!(await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).ok)throw new Error("Failed to save settings")}catch(I){console.error("Error auto-saving settings:",I),m({type:"error",message:"Failed to save settings automatically."})}},ie=O=>{const z={city_name:O.city||O.name,state:O.state,latitude:O.latitude,longitude:O.longitude,timezone:O.timezone};k(""),M([]),q(z)},oe=O=>({news:{news_api_key:""},rss:{rss_feeds:[]},weather:{},email:{email_host:"imap.gmail.com",email_user:"",email_password:"",polling_interval:60},games:{difficulty:"medium"},astronomy:{},calendar:{ical_sources:[],days_to_show:2},webhook:{url:"",method:"GET",headers:{},json_path:""},text:{content:""}})[O]||{},be=async(O,I="")=>{try{const z=await fetch("/api/modules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:O,name:I||`${l.find(B=>B.id===O)?.label||O}`,config:oe(O)})});if(!z.ok)throw new Error("Failed to create module");const K=await z.json();return d(B=>({...B,[K.module.id]:K.module})),m({type:"success",message:"Module created successfully!"}),setTimeout(()=>m({type:"",message:""}),3e3),K.module}catch(z){return console.error("Error creating module:",z),m({type:"error",message:"Failed to create module"}),null}},ge=async(O,I)=>{try{const z=f[O];if(!z){console.error(`[UPDATE] Module ${O} not found`);return}if(I.type&&I.type!==z.type){console.error(`[UPDATE] Type mismatch! Target module is ${z.type}, but update has type ${I.type}. Rejecting update.`);return}if(I.id&&I.id!==O){console.error(`[UPDATE] ID mismatch! Target module ID is ${O}, but update has ID ${I.id}. Rejecting update.`);return}if(I.config){const W={...I.config};z.type==="news"?(W.rss_feeds&&delete W.rss_feeds,delete W.enable_newsapi):z.type==="rss"&&(W.news_api_key&&delete W.news_api_key,delete W.enable_newsapi),I.config=W}d(W=>{const ne=W[O];return ne?{...W,[O]:{...ne,...I}}:W});const K={...z,...I};K.id=O;const B=await fetch(`/api/modules/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)});if(!B.ok)throw new Error("Failed to update module");const se=await B.json();d(W=>({...W,[O]:se.module})),m({type:"success",message:"Module updated successfully!"}),setTimeout(()=>m({type:"",message:""}),3e3)}catch(z){console.error("Error updating module:",z),m({type:"error",message:"Failed to update module"});const K=await fetch(`/api/modules/${O}`);if(K.ok){const B=await K.json();d(se=>({...se,[O]:B.module}))}}},Ae=async O=>{if(confirm("Are you sure you want to delete this module?"))try{const I=[];for(const[K,B]of Object.entries(o.channels))B.modules&&B.modules.some(se=>se.module_id===O)&&I.push(K);for(const K of I)await fetch(`/api/channels/${K}/modules/${O}`,{method:"DELETE"});const z=await fetch(`/api/modules/${O}`,{method:"DELETE"});if(!z.ok){const K=await z.json();throw new Error(K.detail||"Failed to delete module")}d(K=>{const B={...K};return delete B[O],B}),c(K=>{const B={...K.channels};for(const se in B)B[se].modules&&(B[se].modules=B[se].modules.filter(W=>W.module_id!==O));return{...K,channels:B}}),m({type:"success",message:"Module deleted successfully!"}),setTimeout(()=>m({type:"",message:""}),3e3),ue===O&&(Ne(null),ze(null))}catch(I){console.error("Error deleting module:",I),m({type:"error",message:I.message||"Failed to delete module"})}},Qe=async(O,I,z=null,K={})=>{try{K?.optimistic&&c(W=>{const ne={...W.channels||{}},de=ne[O]?{...ne[O]}:{modules:[]},Ee=(de.modules||[]).filter(bt=>bt.module_id!==I).sort((bt,cn)=>bt.order-cn.order),Me=z===null?Ee.length:Math.max(0,Math.min(z,Ee.length)),ut=[...Ee];return ut.splice(Me,0,{module_id:I,order:Me}),de.modules=ut.map((bt,cn)=>({...bt,order:cn})),ne[O]=de,{...W,channels:ne}});const B=await fetch(`/api/channels/${O}/modules?module_id=${I}${z!==null?`&order=${z}`:""}`,{method:"POST"});if(!B.ok)throw new Error("Failed to assign module");const se=await B.json();return c(W=>({...W,channels:{...W.channels,[O]:se.channel}})),K?.silent||(m({type:"success",message:"Module assigned to channel!"}),setTimeout(()=>m({type:"",message:""}),3e3)),se.channel}catch(B){return console.error("Error assigning module:",B),m({type:"error",message:B.message||"Failed to assign module"}),null}},qe=async(O,I,z={})=>{try{z?.optimistic&&c(se=>{const W=se.channels?.[O];if(!W||!W.modules)return se;const ne=W.modules.filter(de=>de.module_id!==I).sort((de,Ee)=>de.order-Ee.order).map((de,Ee)=>({...de,order:Ee}));return{...se,channels:{...se.channels,[O]:{...W,modules:ne}}}});const K=await fetch(`/api/channels/${O}/modules/${I}`,{method:"DELETE"});if(!K.ok)throw new Error("Failed to remove module");const B=await K.json();return c(se=>({...se,channels:{...se.channels,[O]:B.channel}})),z?.silent||(m({type:"success",message:"Module removed from channel!"}),setTimeout(()=>m({type:"",message:""}),3e3)),B.channel}catch(K){return console.error("Error removing module:",K),m({type:"error",message:K.message||"Failed to remove module"}),null}},Qt=async(O,I,z={})=>{try{z?.optimistic&&c(se=>{const W=se.channels?.[O];if(!W||!W.modules)return se;const ne=W.modules.map(tt=>tt.module_id),de=new Set(ne),Ee=I||{},Me=Object.entries(Ee).sort((tt,Wn)=>tt[1]-Wn[1]).map(([tt])=>tt).filter(tt=>de.has(tt)),ut=ne.filter(tt=>!Object.prototype.hasOwnProperty.call(Ee,tt)),cn=[...Me,...ut].map((tt,Wn)=>({module_id:tt,order:Wn}));return{...se,channels:{...se.channels,[O]:{...W,modules:cn}}}});const K=await fetch(`/api/channels/${O}/modules/reorder`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(!K.ok)throw new Error("Failed to reorder modules");const B=await K.json();return c(se=>({...se,channels:{...se.channels,[O]:B.channel}})),B.channel}catch(K){return console.error("Error reordering modules:",K),m({type:"error",message:"Failed to reorder modules"}),null}},Vt=(O,I,z)=>{const K=o.channels[O];if(!K||!K.modules)return;const B=[...K.modules].sort((Ee,Me)=>Ee.order-Me.order),se=B.findIndex(Ee=>Ee.module_id===I);if(se===-1)return;const W=z==="up"?se-1:se+1;if(W<0||W>=B.length)return;const ne=B[se].order;B[se].order=B[W].order,B[W].order=ne;const de={};B.forEach(Ee=>{de[Ee.module_id]=Ee.order}),Qt(O,de,{optimistic:!0})},an=(O,I)=>{const z=o.channels[O],K=o.channels[I],B={...o.channels,[O]:K||{modules:[]},[I]:z||{modules:[]}};q({channels:B})},P=async()=>{try{await fetch("/api/wifi/ap-mode",{method:"POST"}),m({type:"success",message:"AP mode activating..."}),U(!0)}catch{m({type:"error",message:"Failed to activate AP mode"})}};return y?b.jsx("div",{className:"max-w-[800px] w-full p-8 text-center",children:"Loading settings..."}):n==="ap"?b.jsx(lE,{wifiStatus:t}):b.jsxs("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 min-h-screen",style:{backgroundColor:"var(--color-bg-base)",color:"var(--color-text-main)"},children:[b.jsx("div",{className:"mb-8 pt-4 pb-2",children:b.jsx("h1",{className:"text-3xl sm:text-4xl leading-none font-bold tracking-tighter",style:{color:"var(--color-text-main)"},children:"PC-1 SETTINGS"})}),b.jsxs("div",{className:"flex gap-2 mb-8 border-b-2 border-dashed",style:{borderColor:"var(--color-border-main)"},children:[b.jsxs("button",{type:"button",onClick:()=>te("general"),className:`px-6 py-2 font-bold tracking-wider transition-all text-sm flex items-center gap-2 ${$==="general"?"border-b-2 translate-y-[2px]":"border-b-2 border-transparent"}`,style:$==="general"?{borderColor:"var(--color-border-main)",color:"var(--color-text-main)"}:{color:"var(--color-text-muted)"},onMouseEnter:O=>{$!=="general"&&(O.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:O=>{$!=="general"&&(O.currentTarget.style.color="var(--color-text-muted)")},children:[b.jsx(NO,{className:"w-4 h-4"}),"GENERAL"]}),b.jsxs("button",{type:"button",onClick:()=>te("channels"),className:`px-6 py-2 font-bold tracking-wider transition-all text-sm flex items-center gap-2 ${$==="channels"?"border-b-2 translate-y-[2px]":"border-b-2 border-transparent"}`,style:$==="channels"?{borderColor:"var(--color-border-main)",color:"var(--color-text-main)"}:{color:"var(--color-text-muted)"},onMouseEnter:O=>{$!=="channels"&&(O.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:O=>{$!=="channels"&&(O.currentTarget.style.color="var(--color-text-muted)")},children:[b.jsx(wO,{className:"w-4 h-4"}),"CHANNELS"]})]}),b.jsxs("div",{className:"contents",children:[$==="general"&&b.jsxs(b.Fragment,{children:[b.jsx(uE,{searchTerm:v,searchResults:E,isSearching:C,handleSearch:he,selectLocation:ie,settings:o,saveGlobalSettings:q,triggerAPMode:P,wifiStatus:t}),b.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[b.jsxs("a",{href:"https://github.com/travmiller/paper-console",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-gray-600 hover:text-black transition-colors",children:[b.jsx(CO,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-mono",children:"paper-console"})]}),b.jsx(MO,{setSettings:c,setModules:d,setStatus:m})]})]}),$==="channels"&&b.jsx(hE,{settings:o,modules:f,triggerChannelPrint:Be,triggerModulePrint:N,setShowScheduleModal:Ie,swapChannels:an,setShowEditModuleModal:Ne,setEditingModule:ze,moveModuleInChannel:Vt,assignModuleToChannel:Qe,reorderChannelModules:Qt,removeModuleFromChannel:qe,setShowAddModuleModal:J,setShowCreateUnassignedModal:le,wifiStatus:t}),b.jsx(rb,{channelPosition:Y,onClose:()=>J(null),onCreateModule:be,onAssignModule:Qe,onOpenEdit:(O,I)=>{Ne(O),ze(I)}}),V&&b.jsx(rb,{channelPosition:null,isUnassigned:!0,onClose:()=>le(!1),onCreateModule:async O=>{const I=await be(O);return I&&(le(!1),Ne(I.id),ze(JSON.parse(JSON.stringify(I)))),I},onAssignModule:async()=>{},onOpenEdit:(O,I)=>{Ne(O),ze(I)}}),b.jsx(SO,{moduleId:ue,module:et,setModule:ze,onClose:()=>{Ne(null),ze(null)},onSave:ge,onDelete:Ae}),b.jsx(kO,{position:nt,channel:o.channels[nt]||{},onClose:()=>Ie(null),onUpdate:O=>Te(nt,O),timeFormat:o.time_format}),b.jsx(TO,{show:ke,wifiStatus:t}),b.jsx(EO,{status:h})]})]})}iE.createRoot(document.getElementById("root")).render(b.jsx(Xn.StrictMode,{children:b.jsx(AO,{})}));
