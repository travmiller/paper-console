(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=t(l);fetch(l.href,o)}})();function lp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hd={exports:{}},to={};var Y0;function FT(){if(Y0)return to;Y0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,o){var c=null;if(o!==void 0&&(c=""+o),l.key!==void 0&&(c=""+l.key),"key"in l){o={};for(var f in l)f!=="key"&&(o[f]=l[f])}else o=l;return l=o.ref,{$$typeof:n,type:s,key:c,ref:l!==void 0?l:null,props:o}}return to.Fragment=e,to.jsx=t,to.jsxs=t,to}var K0;function JT(){return K0||(K0=1,Hd.exports=FT()),Hd.exports}var b=JT(),Ud={exports:{}},Te={};var P0;function XT(){if(P0)return Te;P0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function v(N){return N===null||typeof N!="object"?null:(N=x&&N[x]||N["@@iterator"],typeof N=="function"?N:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,M={};function C(N,V,se){this.props=N,this.context=V,this.refs=M,this.updater=se||k}C.prototype.isReactComponent={},C.prototype.setState=function(N,V){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,V,"setState")},C.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function z(){}z.prototype=C.prototype;function q(N,V,se){this.props=N,this.context=V,this.refs=M,this.updater=se||k}var W=q.prototype=new z;W.constructor=q,E(W,C.prototype),W.isPureReactComponent=!0;var G=Array.isArray;function P(){}var I={H:null,A:null,T:null,S:null},ie=Object.prototype.hasOwnProperty;function ce(N,V,se){var le=se.ref;return{$$typeof:n,type:N,key:V,ref:le!==void 0?le:null,props:se}}function De(N,V){return ce(N.type,V,N.props)}function rt(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function _e(N){var V={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(se){return V[se]})}var st=/\/+/g;function $e(N,V){return typeof N=="object"&&N!==null&&N.key!=null?_e(""+N.key):V.toString(36)}function Ee(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(P,P):(N.status="pending",N.then(function(V){N.status==="pending"&&(N.status="fulfilled",N.value=V)},function(V){N.status==="pending"&&(N.status="rejected",N.reason=V)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function U(N,V,se,le,ve){var be=typeof N;(be==="undefined"||be==="boolean")&&(N=null);var Ce=!1;if(N===null)Ce=!0;else switch(be){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(N.$$typeof){case n:case e:Ce=!0;break;case m:return Ce=N._init,U(Ce(N._payload),V,se,le,ve)}}if(Ce)return ve=ve(N),Ce=le===""?"."+$e(N,0):le,G(ve)?(se="",Ce!=null&&(se=Ce.replace(st,"$&/")+"/"),U(ve,V,se,"",function(fe){return fe})):ve!=null&&(rt(ve)&&(ve=De(ve,se+(ve.key==null||N&&N.key===ve.key?"":(""+ve.key).replace(st,"$&/")+"/")+Ce)),V.push(ve)),1;Ce=0;var et=le===""?".":le+":";if(G(N))for(var Ke=0;Ke<N.length;Ke++)le=N[Ke],be=et+$e(le,Ke),Ce+=U(le,V,se,be,ve);else if(Ke=v(N),typeof Ke=="function")for(N=Ke.call(N),Ke=0;!(le=N.next()).done;)le=le.value,be=et+$e(le,Ke++),Ce+=U(le,V,se,be,ve);else if(be==="object"){if(typeof N.then=="function")return U(Ee(N),V,se,le,ve);throw V=String(N),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function Z(N,V,se){if(N==null)return N;var le=[],ve=0;return U(N,le,"","",function(be){return V.call(se,be,ve++)}),le}function pe(N){if(N._status===-1){var V=N._result;V=V(),V.then(function(se){(N._status===0||N._status===-1)&&(N._status=1,N._result=se)},function(se){(N._status===0||N._status===-1)&&(N._status=2,N._result=se)}),N._status===-1&&(N._status=0,N._result=V)}if(N._status===1)return N._result.default;throw N._result}var Me=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Ue={map:Z,forEach:function(N,V,se){Z(N,function(){V.apply(this,arguments)},se)},count:function(N){var V=0;return Z(N,function(){V++}),V},toArray:function(N){return Z(N,function(V){return V})||[]},only:function(N){if(!rt(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Te.Activity=y,Te.Children=Ue,Te.Component=C,Te.Fragment=t,Te.Profiler=l,Te.PureComponent=q,Te.StrictMode=s,Te.Suspense=d,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Te.__COMPILER_RUNTIME={__proto__:null,c:function(N){return I.H.useMemoCache(N)}},Te.cache=function(N){return function(){return N.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(N,V,se){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var le=E({},N.props),ve=N.key;if(V!=null)for(be in V.key!==void 0&&(ve=""+V.key),V)!ie.call(V,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&V.ref===void 0||(le[be]=V[be]);var be=arguments.length-2;if(be===1)le.children=se;else if(1<be){for(var Ce=Array(be),et=0;et<be;et++)Ce[et]=arguments[et+2];le.children=Ce}return ce(N.type,ve,le)},Te.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:o,_context:N},N},Te.createElement=function(N,V,se){var le,ve={},be=null;if(V!=null)for(le in V.key!==void 0&&(be=""+V.key),V)ie.call(V,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ve[le]=V[le]);var Ce=arguments.length-2;if(Ce===1)ve.children=se;else if(1<Ce){for(var et=Array(Ce),Ke=0;Ke<Ce;Ke++)et[Ke]=arguments[Ke+2];ve.children=et}if(N&&N.defaultProps)for(le in Ce=N.defaultProps,Ce)ve[le]===void 0&&(ve[le]=Ce[le]);return ce(N,be,ve)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(N){return{$$typeof:f,render:N}},Te.isValidElement=rt,Te.lazy=function(N){return{$$typeof:m,_payload:{_status:-1,_result:N},_init:pe}},Te.memo=function(N,V){return{$$typeof:h,type:N,compare:V===void 0?null:V}},Te.startTransition=function(N){var V=I.T,se={};I.T=se;try{var le=N(),ve=I.S;ve!==null&&ve(se,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(P,Me)}catch(be){Me(be)}finally{V!==null&&se.types!==null&&(V.types=se.types),I.T=V}},Te.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Te.use=function(N){return I.H.use(N)},Te.useActionState=function(N,V,se){return I.H.useActionState(N,V,se)},Te.useCallback=function(N,V){return I.H.useCallback(N,V)},Te.useContext=function(N){return I.H.useContext(N)},Te.useDebugValue=function(){},Te.useDeferredValue=function(N,V){return I.H.useDeferredValue(N,V)},Te.useEffect=function(N,V){return I.H.useEffect(N,V)},Te.useEffectEvent=function(N){return I.H.useEffectEvent(N)},Te.useId=function(){return I.H.useId()},Te.useImperativeHandle=function(N,V,se){return I.H.useImperativeHandle(N,V,se)},Te.useInsertionEffect=function(N,V){return I.H.useInsertionEffect(N,V)},Te.useLayoutEffect=function(N,V){return I.H.useLayoutEffect(N,V)},Te.useMemo=function(N,V){return I.H.useMemo(N,V)},Te.useOptimistic=function(N,V){return I.H.useOptimistic(N,V)},Te.useReducer=function(N,V,se){return I.H.useReducer(N,V,se)},Te.useRef=function(N){return I.H.useRef(N)},Te.useState=function(N){return I.H.useState(N)},Te.useSyncExternalStore=function(N,V,se){return I.H.useSyncExternalStore(N,V,se)},Te.useTransition=function(){return I.H.useTransition()},Te.version="19.2.1",Te}var F0;function Ro(){return F0||(F0=1,Ud.exports=XT()),Ud.exports}var J=Ro();const Xn=lp(J);var Id={exports:{}},no={},Vd={exports:{}},qd={};var J0;function QT(){return J0||(J0=1,(function(n){function e(U,Z){var pe=U.length;U.push(Z);e:for(;0<pe;){var Me=pe-1>>>1,Ue=U[Me];if(0<l(Ue,Z))U[Me]=Z,U[pe]=Ue,pe=Me;else break e}}function t(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var Z=U[0],pe=U.pop();if(pe!==Z){U[0]=pe;e:for(var Me=0,Ue=U.length,N=Ue>>>1;Me<N;){var V=2*(Me+1)-1,se=U[V],le=V+1,ve=U[le];if(0>l(se,pe))le<Ue&&0>l(ve,se)?(U[Me]=ve,U[le]=pe,Me=le):(U[Me]=se,U[V]=pe,Me=V);else if(le<Ue&&0>l(ve,pe))U[Me]=ve,U[le]=pe,Me=le;else break e}}return Z}function l(U,Z){var pe=U.sortIndex-Z.sortIndex;return pe!==0?pe:U.id-Z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var d=[],h=[],m=1,y=null,x=3,v=!1,k=!1,E=!1,M=!1,C=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function W(U){for(var Z=t(h);Z!==null;){if(Z.callback===null)s(h);else if(Z.startTime<=U)s(h),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=t(h)}}function G(U){if(E=!1,W(U),!k)if(t(d)!==null)k=!0,P||(P=!0,_e());else{var Z=t(h);Z!==null&&Ee(G,Z.startTime-U)}}var P=!1,I=-1,ie=5,ce=-1;function De(){return M?!0:!(n.unstable_now()-ce<ie)}function rt(){if(M=!1,P){var U=n.unstable_now();ce=U;var Z=!0;try{e:{k=!1,E&&(E=!1,z(I),I=-1),v=!0;var pe=x;try{t:{for(W(U),y=t(d);y!==null&&!(y.expirationTime>U&&De());){var Me=y.callback;if(typeof Me=="function"){y.callback=null,x=y.priorityLevel;var Ue=Me(y.expirationTime<=U);if(U=n.unstable_now(),typeof Ue=="function"){y.callback=Ue,W(U),Z=!0;break t}y===t(d)&&s(d),W(U)}else s(d);y=t(d)}if(y!==null)Z=!0;else{var N=t(h);N!==null&&Ee(G,N.startTime-U),Z=!1}}break e}finally{y=null,x=pe,v=!1}Z=void 0}}finally{Z?_e():P=!1}}}var _e;if(typeof q=="function")_e=function(){q(rt)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,$e=st.port2;st.port1.onmessage=rt,_e=function(){$e.postMessage(null)}}else _e=function(){C(rt,0)};function Ee(U,Z){I=C(function(){U(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(U){switch(x){case 1:case 2:case 3:var Z=3;break;default:Z=x}var pe=x;x=Z;try{return U()}finally{x=pe}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var pe=x;x=U;try{return Z()}finally{x=pe}},n.unstable_scheduleCallback=function(U,Z,pe){var Me=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Me+pe:Me):pe=Me,U){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=pe+Ue,U={id:m++,callback:Z,priorityLevel:U,startTime:pe,expirationTime:Ue,sortIndex:-1},pe>Me?(U.sortIndex=pe,e(h,U),t(d)===null&&U===t(h)&&(E?(z(I),I=-1):E=!0,Ee(G,pe-Me))):(U.sortIndex=Ue,e(d,U),k||v||(k=!0,P||(P=!0,_e()))),U},n.unstable_shouldYield=De,n.unstable_wrapCallback=function(U){var Z=x;return function(){var pe=x;x=Z;try{return U.apply(this,arguments)}finally{x=pe}}}})(qd)),qd}var X0;function ZT(){return X0||(X0=1,Vd.exports=QT()),Vd.exports}var $d={exports:{}},Yt={};var Q0;function WT(){if(Q0)return Yt;Q0=1;var n=Ro();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(d,h,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:d,containerInfo:h,implementation:m}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Yt.createPortal=function(d,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(d,h,null,m)},Yt.flushSync=function(d){var h=c.T,m=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=h,s.p=m,s.d.f()}},Yt.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(d,h))},Yt.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Yt.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var m=h.as,y=f(m,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?s.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:v}):m==="script"&&s.d.X(d,{crossOrigin:y,integrity:x,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Yt.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=f(h.as,h.crossOrigin);s.d.M(d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(d)},Yt.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,y=f(m,h.crossOrigin);s.d.L(d,m,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Yt.preloadModule=function(d,h){if(typeof d=="string")if(h){var m=f(h.as,h.crossOrigin);s.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(d)},Yt.requestFormReset=function(d){s.d.r(d)},Yt.unstable_batchedUpdates=function(d,h){return d(h)},Yt.useFormState=function(d,h,m){return c.H.useFormState(d,h,m)},Yt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Yt.version="19.2.1",Yt}var Z0;function U1(){if(Z0)return $d.exports;Z0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$d.exports=WT(),$d.exports}var W0;function eE(){if(W0)return no;W0=1;var n=ZT(),e=Ro(),t=U1();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function f(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(s(188))}function h(r){var i=r.alternate;if(!i){if(i=o(r),i===null)throw Error(s(188));return i!==r?null:r}for(var a=r,u=i;;){var p=a.return;if(p===null)break;var g=p.alternate;if(g===null){if(u=p.return,u!==null){a=u;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===a)return d(p),r;if(g===u)return d(p),i;g=g.sibling}throw Error(s(188))}if(a.return!==u.return)a=p,u=g;else{for(var S=!1,T=p.child;T;){if(T===a){S=!0,a=p,u=g;break}if(T===u){S=!0,u=p,a=g;break}T=T.sibling}if(!S){for(T=g.child;T;){if(T===a){S=!0,a=g,u=p;break}if(T===u){S=!0,u=g,a=p;break}T=T.sibling}if(!S)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?r:i}function m(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=m(r),i!==null)return i;r=r.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),q=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),ce=Symbol.for("react.activity"),De=Symbol.for("react.memo_cache_sentinel"),rt=Symbol.iterator;function _e(r){return r===null||typeof r!="object"?null:(r=rt&&r[rt]||r["@@iterator"],typeof r=="function"?r:null)}var st=Symbol.for("react.client.reference");function $e(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===st?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case E:return"Fragment";case C:return"Profiler";case M:return"StrictMode";case G:return"Suspense";case P:return"SuspenseList";case ce:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case q:return r.displayName||"Context";case z:return(r._context.displayName||"Context")+".Consumer";case W:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return i=r.displayName||null,i!==null?i:$e(r.type)||"Memo";case ie:i=r._payload,r=r._init;try{return $e(r(i))}catch{}}return null}var Ee=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Me=[],Ue=-1;function N(r){return{current:r}}function V(r){0>Ue||(r.current=Me[Ue],Me[Ue]=null,Ue--)}function se(r,i){Ue++,Me[Ue]=r.current,r.current=i}var le=N(null),ve=N(null),be=N(null),Ce=N(null);function et(r,i){switch(se(be,i),se(ve,r),se(le,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?p0(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=p0(i),r=m0(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}V(le),se(le,r)}function Ke(){V(le),V(ve),V(be)}function fe(r){r.memoizedState!==null&&se(Ce,r);var i=le.current,a=m0(i,r.type);i!==a&&(se(ve,r),se(le,a))}function ge(r){ve.current===r&&(V(le),V(ve)),Ce.current===r&&(V(Ce),Ql._currentValue=pe)}var Ve,B;function O(r){if(Ve===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ve=i&&i[1]||"",B=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ve+r+B}var _=!1;function X(r,i){if(!r||_)return"";_=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(H){var L=H}Reflect.construct(r,[],F)}else{try{F.call()}catch(H){L=H}r.call(F.prototype)}}else{try{throw Error()}catch(H){L=H}(F=r())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(H){if(H&&L&&typeof H.stack=="string")return[H.stack,L.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),S=g[0],T=g[1];if(S&&T){var w=S.split(`
`),R=T.split(`
`);for(p=u=0;u<w.length&&!w[u].includes("DetermineComponentFrameRoot");)u++;for(;p<R.length&&!R[p].includes("DetermineComponentFrameRoot");)p++;if(u===w.length||p===R.length)for(u=w.length-1,p=R.length-1;1<=u&&0<=p&&w[u]!==R[p];)p--;for(;1<=u&&0<=p;u--,p--)if(w[u]!==R[p]){if(u!==1||p!==1)do if(u--,p--,0>p||w[u]!==R[p]){var $=`
`+w[u].replace(" at new "," at ");return r.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",r.displayName)),$}while(1<=u&&0<=p);break}}}finally{_=!1,Error.prepareStackTrace=a}return(a=r?r.displayName||r.name:"")?O(a):""}function ne(r,i){switch(r.tag){case 26:case 27:case 5:return O(r.type);case 16:return O("Lazy");case 13:return r.child!==i&&i!==null?O("Suspense Fallback"):O("Suspense");case 19:return O("SuspenseList");case 0:case 15:return X(r.type,!1);case 11:return X(r.type.render,!1);case 1:return X(r.type,!0);case 31:return O("Activity");default:return""}}function K(r){try{var i="",a=null;do i+=ne(r,a),a=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ue=Object.prototype.hasOwnProperty,re=n.unstable_scheduleCallback,te=n.unstable_cancelCallback,he=n.unstable_shouldYield,Ne=n.unstable_requestPaint,Ae=n.unstable_now,ut=n.unstable_getCurrentPriorityLevel,$t=n.unstable_ImmediatePriority,qn=n.unstable_UserBlockingPriority,Gt=n.unstable_NormalPriority,al=n.unstable_LowPriority,Fp=n.unstable_IdlePriority,OS=n.log,DS=n.unstable_setDisableYieldValue,cl=null,cn=null;function Cr(r){if(typeof OS=="function"&&DS(r),cn&&typeof cn.setStrictMode=="function")try{cn.setStrictMode(cl,r)}catch{}}var un=Math.clz32?Math.clz32:zS,jS=Math.log,RS=Math.LN2;function zS(r){return r>>>=0,r===0?32:31-(jS(r)/RS|0)|0}var Uo=256,Io=262144,Vo=4194304;function Ss(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function qo(r,i,a){var u=r.pendingLanes;if(u===0)return 0;var p=0,g=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var T=u&134217727;return T!==0?(u=T&~g,u!==0?p=Ss(u):(S&=T,S!==0?p=Ss(S):a||(a=T&~r,a!==0&&(p=Ss(a))))):(T=u&~g,T!==0?p=Ss(T):S!==0?p=Ss(S):a||(a=u&~r,a!==0&&(p=Ss(a)))),p===0?0:i!==0&&i!==p&&(i&g)===0&&(g=p&-p,a=i&-i,g>=a||g===32&&(a&4194048)!==0)?i:p}function ul(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function LS(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jp(){var r=Vo;return Vo<<=1,(Vo&62914560)===0&&(Vo=4194304),r}function Mu(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function fl(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function _S(r,i,a,u,p,g){var S=r.pendingLanes;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=a,r.entangledLanes&=a,r.errorRecoveryDisabledLanes&=a,r.shellSuspendCounter=0;var T=r.entanglements,w=r.expirationTimes,R=r.hiddenUpdates;for(a=S&~a;0<a;){var $=31-un(a),F=1<<$;T[$]=0,w[$]=-1;var L=R[$];if(L!==null)for(R[$]=null,$=0;$<L.length;$++){var H=L[$];H!==null&&(H.lane&=-536870913)}a&=~F}u!==0&&Xp(r,u,0),g!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=g&~(S&~i))}function Xp(r,i,a){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-un(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|a&261930}function Qp(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var u=31-un(a),p=1<<u;p&i|r[u]&i&&(r[u]|=i),a&=~p}}function Zp(r,i){var a=i&-i;return a=(a&42)!==0?1:Cu(a),(a&(r.suspendedLanes|i))!==0?0:a}function Cu(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function wu(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Wp(){var r=Z.p;return r!==0?r:(r=window.event,r===void 0?32:H0(r.type))}function em(r,i){var a=Z.p;try{return Z.p=r,i()}finally{Z.p=a}}var wr=Math.random().toString(36).slice(2),zt="__reactFiber$"+wr,Wt="__reactProps$"+wr,li="__reactContainer$"+wr,Nu="__reactEvents$"+wr,BS="__reactListeners$"+wr,HS="__reactHandles$"+wr,tm="__reactResources$"+wr,dl="__reactMarker$"+wr;function Au(r){delete r[zt],delete r[Wt],delete r[Nu],delete r[BS],delete r[HS]}function oi(r){var i=r[zt];if(i)return i;for(var a=r.parentNode;a;){if(i=a[li]||a[zt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=k0(r);r!==null;){if(a=r[zt])return a;r=k0(r)}return i}r=a,a=r.parentNode}return null}function ai(r){if(r=r[zt]||r[li]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function hl(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function ci(r){var i=r[tm];return i||(i=r[tm]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function At(r){r[dl]=!0}var nm=new Set,rm={};function ks(r,i){ui(r,i),ui(r+"Capture",i)}function ui(r,i){for(rm[r]=i,r=0;r<i.length;r++)nm.add(i[r])}var US=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sm={},im={};function IS(r){return ue.call(im,r)?!0:ue.call(sm,r)?!1:US.test(r)?im[r]=!0:(sm[r]=!0,!1)}function $o(r,i,a){if(IS(i))if(a===null)r.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+a)}}function Go(r,i,a){if(a===null)r.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+a)}}function Wn(r,i,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttributeNS(i,a,""+u)}}function Sn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function lm(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function VS(r,i,a){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,g=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return p.call(this)},set:function(S){a=""+S,g.call(this,S)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Ou(r){if(!r._valueTracker){var i=lm(r)?"checked":"value";r._valueTracker=VS(r,i,""+r[i])}}function om(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return r&&(u=lm(r)?r.checked?"true":"false":r.value),r=u,r!==a?(i.setValue(r),!0):!1}function Yo(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var qS=/[\n"\\]/g;function kn(r){return r.replace(qS,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Du(r,i,a,u,p,g,S,T){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),i!=null?S==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Sn(i)):r.value!==""+Sn(i)&&(r.value=""+Sn(i)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),i!=null?ju(r,S,Sn(i)):a!=null?ju(r,S,Sn(a)):u!=null&&r.removeAttribute("value"),p==null&&g!=null&&(r.defaultChecked=!!g),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.name=""+Sn(T):r.removeAttribute("name")}function am(r,i,a,u,p,g,S,T){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),i!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){Ou(r);return}a=a!=null?""+Sn(a):"",i=i!=null?""+Sn(i):a,T||i===r.value||(r.value=i),r.defaultValue=i}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=T?r.checked:!!u,r.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S),Ou(r)}function ju(r,i,a){i==="number"&&Yo(r.ownerDocument)===r||r.defaultValue===""+a||(r.defaultValue=""+a)}function fi(r,i,a,u){if(r=r.options,i){i={};for(var p=0;p<a.length;p++)i["$"+a[p]]=!0;for(a=0;a<r.length;a++)p=i.hasOwnProperty("$"+r[a].value),r[a].selected!==p&&(r[a].selected=p),p&&u&&(r[a].defaultSelected=!0)}else{for(a=""+Sn(a),i=null,p=0;p<r.length;p++){if(r[p].value===a){r[p].selected=!0,u&&(r[p].defaultSelected=!0);return}i!==null||r[p].disabled||(i=r[p])}i!==null&&(i.selected=!0)}}function cm(r,i,a){if(i!=null&&(i=""+Sn(i),i!==r.value&&(r.value=i),a==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=a!=null?""+Sn(a):""}function um(r,i,a,u){if(i==null){if(u!=null){if(a!=null)throw Error(s(92));if(Ee(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),i=a}a=Sn(i),r.defaultValue=a,u=r.textContent,u===a&&u!==""&&u!==null&&(r.value=u),Ou(r)}function di(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var $S=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fm(r,i,a){var u=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,a):typeof a!="number"||a===0||$S.has(i)?i==="float"?r.cssFloat=a:r[i]=(""+a).trim():r[i]=a+"px"}function dm(r,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var p in i)u=i[p],i.hasOwnProperty(p)&&a[p]!==u&&fm(r,p,u)}else for(var g in i)i.hasOwnProperty(g)&&fm(r,g,i[g])}function Ru(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var GS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),YS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(r){return YS.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function er(){}var zu=null;function Lu(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var hi=null,pi=null;function hm(r){var i=ai(r);if(i&&(r=i.stateNode)){var a=r[Wt]||null;e:switch(r=i.stateNode,i.type){case"input":if(Du(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+kn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==r&&u.form===r.form){var p=u[Wt]||null;if(!p)throw Error(s(90));Du(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<a.length;i++)u=a[i],u.form===r.form&&om(u)}break e;case"textarea":cm(r,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&fi(r,!!a.multiple,i,!1)}}}var _u=!1;function pm(r,i,a){if(_u)return r(i,a);_u=!0;try{var u=r(i);return u}finally{if(_u=!1,(hi!==null||pi!==null)&&(Ra(),hi&&(i=hi,r=pi,pi=hi=null,hm(i),r)))for(i=0;i<r.length;i++)hm(r[i])}}function pl(r,i){var a=r.stateNode;if(a===null)return null;var u=a[Wt]||null;if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bu=!1;if(tr)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){Bu=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{Bu=!1}var Nr=null,Hu=null,Po=null;function mm(){if(Po)return Po;var r,i=Hu,a=i.length,u,p="value"in Nr?Nr.value:Nr.textContent,g=p.length;for(r=0;r<a&&i[r]===p[r];r++);var S=a-r;for(u=1;u<=S&&i[a-u]===p[g-u];u++);return Po=p.slice(r,1<u?1-u:void 0)}function Fo(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Jo(){return!0}function gm(){return!1}function en(r){function i(a,u,p,g,S){this._reactName=a,this._targetInst=p,this.type=u,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(a=r[T],this[T]=a?a(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Jo:gm,this.isPropagationStopped=gm,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Jo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Jo)},persist:function(){},isPersistent:Jo}),i}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xo=en(Ts),gl=y({},Ts,{view:0,detail:0}),KS=en(gl),Uu,Iu,yl,Qo=y({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==yl&&(yl&&r.type==="mousemove"?(Uu=r.screenX-yl.screenX,Iu=r.screenY-yl.screenY):Iu=Uu=0,yl=r),Uu)},movementY:function(r){return"movementY"in r?r.movementY:Iu}}),ym=en(Qo),PS=y({},Qo,{dataTransfer:0}),FS=en(PS),JS=y({},gl,{relatedTarget:0}),Vu=en(JS),XS=y({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),QS=en(XS),ZS=y({},Ts,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),WS=en(ZS),ek=y({},Ts,{data:0}),bm=en(ek),tk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sk(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=rk[r])?!!i[r]:!1}function qu(){return sk}var ik=y({},gl,{key:function(r){if(r.key){var i=tk[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Fo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?nk[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qu,charCode:function(r){return r.type==="keypress"?Fo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Fo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),lk=en(ik),ok=y({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xm=en(ok),ak=y({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qu}),ck=en(ak),uk=y({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),fk=en(uk),dk=y({},Qo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),hk=en(dk),pk=y({},Ts,{newState:0,oldState:0}),mk=en(pk),gk=[9,13,27,32],$u=tr&&"CompositionEvent"in window,bl=null;tr&&"documentMode"in document&&(bl=document.documentMode);var yk=tr&&"TextEvent"in window&&!bl,vm=tr&&(!$u||bl&&8<bl&&11>=bl),Sm=" ",km=!1;function Tm(r,i){switch(r){case"keyup":return gk.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Em(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var mi=!1;function bk(r,i){switch(r){case"compositionend":return Em(i);case"keypress":return i.which!==32?null:(km=!0,Sm);case"textInput":return r=i.data,r===Sm&&km?null:r;default:return null}}function xk(r,i){if(mi)return r==="compositionend"||!$u&&Tm(r,i)?(r=mm(),Po=Hu=Nr=null,mi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return vm&&i.locale!=="ko"?null:i.data;default:return null}}var vk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mm(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!vk[r.type]:i==="textarea"}function Cm(r,i,a,u){hi?pi?pi.push(u):pi=[u]:hi=u,i=Ia(i,"onChange"),0<i.length&&(a=new Xo("onChange","change",null,a,u),r.push({event:a,listeners:i}))}var xl=null,vl=null;function Sk(r){a0(r,0)}function Zo(r){var i=hl(r);if(om(i))return r}function wm(r,i){if(r==="change")return i}var Nm=!1;if(tr){var Gu;if(tr){var Yu="oninput"in document;if(!Yu){var Am=document.createElement("div");Am.setAttribute("oninput","return;"),Yu=typeof Am.oninput=="function"}Gu=Yu}else Gu=!1;Nm=Gu&&(!document.documentMode||9<document.documentMode)}function Om(){xl&&(xl.detachEvent("onpropertychange",Dm),vl=xl=null)}function Dm(r){if(r.propertyName==="value"&&Zo(vl)){var i=[];Cm(i,vl,r,Lu(r)),pm(Sk,i)}}function kk(r,i,a){r==="focusin"?(Om(),xl=i,vl=a,xl.attachEvent("onpropertychange",Dm)):r==="focusout"&&Om()}function Tk(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Zo(vl)}function Ek(r,i){if(r==="click")return Zo(i)}function Mk(r,i){if(r==="input"||r==="change")return Zo(i)}function Ck(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var fn=typeof Object.is=="function"?Object.is:Ck;function Sl(r,i){if(fn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var p=a[u];if(!ue.call(i,p)||!fn(r[p],i[p]))return!1}return!0}function jm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Rm(r,i){var a=jm(r);r=0;for(var u;a;){if(a.nodeType===3){if(u=r+a.textContent.length,r<=i&&u>=i)return{node:a,offset:i-r};r=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jm(a)}}function zm(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?zm(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Lm(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Yo(r.document);i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=Yo(r.document)}return i}function Ku(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var wk=tr&&"documentMode"in document&&11>=document.documentMode,gi=null,Pu=null,kl=null,Fu=!1;function _m(r,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Fu||gi==null||gi!==Yo(u)||(u=gi,"selectionStart"in u&&Ku(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),kl&&Sl(kl,u)||(kl=u,u=Ia(Pu,"onSelect"),0<u.length&&(i=new Xo("onSelect","select",null,i,a),r.push({event:i,listeners:u}),i.target=gi)))}function Es(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var yi={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionrun:Es("Transition","TransitionRun"),transitionstart:Es("Transition","TransitionStart"),transitioncancel:Es("Transition","TransitionCancel"),transitionend:Es("Transition","TransitionEnd")},Ju={},Bm={};tr&&(Bm=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);function Ms(r){if(Ju[r])return Ju[r];if(!yi[r])return r;var i=yi[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in Bm)return Ju[r]=i[a];return r}var Hm=Ms("animationend"),Um=Ms("animationiteration"),Im=Ms("animationstart"),Nk=Ms("transitionrun"),Ak=Ms("transitionstart"),Ok=Ms("transitioncancel"),Vm=Ms("transitionend"),qm=new Map,Xu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xu.push("scrollEnd");function Bn(r,i){qm.set(r,i),ks(i,[r])}var Wo=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Tn=[],bi=0,Qu=0;function ea(){for(var r=bi,i=Qu=bi=0;i<r;){var a=Tn[i];Tn[i++]=null;var u=Tn[i];Tn[i++]=null;var p=Tn[i];Tn[i++]=null;var g=Tn[i];if(Tn[i++]=null,u!==null&&p!==null){var S=u.pending;S===null?p.next=p:(p.next=S.next,S.next=p),u.pending=p}g!==0&&$m(a,p,g)}}function ta(r,i,a,u){Tn[bi++]=r,Tn[bi++]=i,Tn[bi++]=a,Tn[bi++]=u,Qu|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Zu(r,i,a,u){return ta(r,i,a,u),na(r)}function Cs(r,i){return ta(r,null,null,i),na(r)}function $m(r,i,a){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a);for(var p=!1,g=r.return;g!==null;)g.childLanes|=a,u=g.alternate,u!==null&&(u.childLanes|=a),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(p=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,p&&i!==null&&(p=31-un(a),r=g.hiddenUpdates,u=r[p],u===null?r[p]=[i]:u.push(i),i.lane=a|536870912),g):null}function na(r){if(50<Gl)throw Gl=0,ad=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var xi={};function Dk(r,i,a,u){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(r,i,a,u){return new Dk(r,i,a,u)}function Wu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function nr(r,i){var a=r.alternate;return a===null?(a=dn(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&65011712,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a.refCleanup=r.refCleanup,a}function Gm(r,i){r.flags&=65011714;var a=r.alternate;return a===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,i=a.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function ra(r,i,a,u,p,g){var S=0;if(u=r,typeof r=="function")Wu(r)&&(S=1);else if(typeof r=="string")S=_T(r,a,le.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case ce:return r=dn(31,a,i,p),r.elementType=ce,r.lanes=g,r;case E:return ws(a.children,p,g,i);case M:S=8,p|=24;break;case C:return r=dn(12,a,i,p|2),r.elementType=C,r.lanes=g,r;case G:return r=dn(13,a,i,p),r.elementType=G,r.lanes=g,r;case P:return r=dn(19,a,i,p),r.elementType=P,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case q:S=10;break e;case z:S=9;break e;case W:S=11;break e;case I:S=14;break e;case ie:S=16,u=null;break e}S=29,a=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=dn(S,a,i,p),i.elementType=r,i.type=u,i.lanes=g,i}function ws(r,i,a,u){return r=dn(7,r,u,i),r.lanes=a,r}function ef(r,i,a){return r=dn(6,r,null,i),r.lanes=a,r}function Ym(r){var i=dn(18,null,null,0);return i.stateNode=r,i}function tf(r,i,a){return i=dn(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Km=new WeakMap;function En(r,i){if(typeof r=="object"&&r!==null){var a=Km.get(r);return a!==void 0?a:(i={value:r,source:i,stack:K(i)},Km.set(r,i),i)}return{value:r,source:i,stack:K(i)}}var vi=[],Si=0,sa=null,Tl=0,Mn=[],Cn=0,Ar=null,$n=1,Gn="";function rr(r,i){vi[Si++]=Tl,vi[Si++]=sa,sa=r,Tl=i}function Pm(r,i,a){Mn[Cn++]=$n,Mn[Cn++]=Gn,Mn[Cn++]=Ar,Ar=r;var u=$n;r=Gn;var p=32-un(u)-1;u&=~(1<<p),a+=1;var g=32-un(i)+p;if(30<g){var S=p-p%5;g=(u&(1<<S)-1).toString(32),u>>=S,p-=S,$n=1<<32-un(i)+p|a<<p|u,Gn=g+r}else $n=1<<g|a<<p|u,Gn=r}function nf(r){r.return!==null&&(rr(r,1),Pm(r,1,0))}function rf(r){for(;r===sa;)sa=vi[--Si],vi[Si]=null,Tl=vi[--Si],vi[Si]=null;for(;r===Ar;)Ar=Mn[--Cn],Mn[Cn]=null,Gn=Mn[--Cn],Mn[Cn]=null,$n=Mn[--Cn],Mn[Cn]=null}function Fm(r,i){Mn[Cn++]=$n,Mn[Cn++]=Gn,Mn[Cn++]=Ar,$n=i.id,Gn=i.overflow,Ar=r}var Lt=null,it=null,Ie=!1,Or=null,wn=!1,sf=Error(s(519));function Dr(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw El(En(i,r)),sf}function Jm(r){var i=r.stateNode,a=r.type,u=r.memoizedProps;switch(i[zt]=r,i[Wt]=u,a){case"dialog":Le("cancel",i),Le("close",i);break;case"iframe":case"object":case"embed":Le("load",i);break;case"video":case"audio":for(a=0;a<Kl.length;a++)Le(Kl[a],i);break;case"source":Le("error",i);break;case"img":case"image":case"link":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"input":Le("invalid",i),am(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Le("invalid",i);break;case"textarea":Le("invalid",i),um(i,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||u.suppressHydrationWarning===!0||d0(i.textContent,a)?(u.popover!=null&&(Le("beforetoggle",i),Le("toggle",i)),u.onScroll!=null&&Le("scroll",i),u.onScrollEnd!=null&&Le("scrollend",i),u.onClick!=null&&(i.onclick=er),i=!0):i=!1,i||Dr(r,!0)}function Xm(r){for(Lt=r.return;Lt;)switch(Lt.tag){case 5:case 31:case 13:wn=!1;return;case 27:case 3:wn=!0;return;default:Lt=Lt.return}}function ki(r){if(r!==Lt)return!1;if(!Ie)return Xm(r),Ie=!0,!1;var i=r.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=r.type,a=!(a!=="form"&&a!=="button")||Td(r.type,r.memoizedProps)),a=!a),a&&it&&Dr(r),Xm(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));it=S0(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));it=S0(r)}else i===27?(i=it,Yr(r.type)?(r=Nd,Nd=null,it=r):it=i):it=Lt?An(r.stateNode.nextSibling):null;return!0}function Ns(){it=Lt=null,Ie=!1}function lf(){var r=Or;return r!==null&&(sn===null?sn=r:sn.push.apply(sn,r),Or=null),r}function El(r){Or===null?Or=[r]:Or.push(r)}var of=N(null),As=null,sr=null;function jr(r,i,a){se(of,i._currentValue),i._currentValue=a}function ir(r){r._currentValue=of.current,V(of)}function af(r,i,a){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===a)break;r=r.return}}function cf(r,i,a,u){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var g=p.dependencies;if(g!==null){var S=p.child;g=g.firstContext;e:for(;g!==null;){var T=g;g=p;for(var w=0;w<i.length;w++)if(T.context===i[w]){g.lanes|=a,T=g.alternate,T!==null&&(T.lanes|=a),af(g.return,a,r),u||(S=null);break e}g=T.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(s(341));S.lanes|=a,g=S.alternate,g!==null&&(g.lanes|=a),af(S,a,r),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===r){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function Ti(r,i,a,u){r=null;for(var p=i,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var T=p.type;fn(p.pendingProps.value,S.value)||(r!==null?r.push(T):r=[T])}}else if(p===Ce.current){if(S=p.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Ql):r=[Ql])}p=p.return}r!==null&&cf(i,r,a,u),i.flags|=262144}function ia(r){for(r=r.firstContext;r!==null;){if(!fn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Os(r){As=r,sr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function _t(r){return Qm(As,r)}function la(r,i){return As===null&&Os(r),Qm(r,i)}function Qm(r,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},sr===null){if(r===null)throw Error(s(308));sr=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else sr=sr.next=i;return a}var jk=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(a,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(a){return a()})}},Rk=n.unstable_scheduleCallback,zk=n.unstable_NormalPriority,vt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uf(){return{controller:new jk,data:new Map,refCount:0}}function Ml(r){r.refCount--,r.refCount===0&&Rk(zk,function(){r.controller.abort()})}var Cl=null,ff=0,Ei=0,Mi=null;function Lk(r,i){if(Cl===null){var a=Cl=[];ff=0,Ei=pd(),Mi={status:"pending",value:void 0,then:function(u){a.push(u)}}}return ff++,i.then(Zm,Zm),i}function Zm(){if(--ff===0&&Cl!==null){Mi!==null&&(Mi.status="fulfilled");var r=Cl;Cl=null,Ei=0,Mi=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function _k(r,i){var a=[],u={status:"pending",value:null,reason:null,then:function(p){a.push(p)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var p=0;p<a.length;p++)(0,a[p])(i)},function(p){for(u.status="rejected",u.reason=p,p=0;p<a.length;p++)(0,a[p])(void 0)}),u}var Wm=U.S;U.S=function(r,i){_y=Ae(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Lk(r,i),Wm!==null&&Wm(r,i)};var Ds=N(null);function df(){var r=Ds.current;return r!==null?r:tt.pooledCache}function oa(r,i){i===null?se(Ds,Ds.current):se(Ds,i.pool)}function eg(){var r=df();return r===null?null:{parent:vt._currentValue,pool:r}}var Ci=Error(s(460)),hf=Error(s(474)),aa=Error(s(542)),ca={then:function(){}};function tg(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ng(r,i,a){switch(a=r[a],a===void 0?r.push(i):a!==i&&(i.then(er,er),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,sg(r),r;default:if(typeof i.status=="string")i.then(er,er);else{if(r=tt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=u}},function(u){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,sg(r),r}throw Rs=i,Ci}}function js(r){try{var i=r._init;return i(r._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Rs=a,Ci):a}}var Rs=null;function rg(){if(Rs===null)throw Error(s(459));var r=Rs;return Rs=null,r}function sg(r){if(r===Ci||r===aa)throw Error(s(483))}var wi=null,wl=0;function ua(r){var i=wl;return wl+=1,wi===null&&(wi=[]),ng(wi,r,i)}function Nl(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function fa(r,i){throw i.$$typeof===x?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function ig(r){function i(D,A){if(r){var j=D.deletions;j===null?(D.deletions=[A],D.flags|=16):j.push(A)}}function a(D,A){if(!r)return null;for(;A!==null;)i(D,A),A=A.sibling;return null}function u(D){for(var A=new Map;D!==null;)D.key!==null?A.set(D.key,D):A.set(D.index,D),D=D.sibling;return A}function p(D,A){return D=nr(D,A),D.index=0,D.sibling=null,D}function g(D,A,j){return D.index=j,r?(j=D.alternate,j!==null?(j=j.index,j<A?(D.flags|=67108866,A):j):(D.flags|=67108866,A)):(D.flags|=1048576,A)}function S(D){return r&&D.alternate===null&&(D.flags|=67108866),D}function T(D,A,j,Y){return A===null||A.tag!==6?(A=ef(j,D.mode,Y),A.return=D,A):(A=p(A,j),A.return=D,A)}function w(D,A,j,Y){var ye=j.type;return ye===E?$(D,A,j.props.children,Y,j.key):A!==null&&(A.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===ie&&js(ye)===A.type)?(A=p(A,j.props),Nl(A,j),A.return=D,A):(A=ra(j.type,j.key,j.props,null,D.mode,Y),Nl(A,j),A.return=D,A)}function R(D,A,j,Y){return A===null||A.tag!==4||A.stateNode.containerInfo!==j.containerInfo||A.stateNode.implementation!==j.implementation?(A=tf(j,D.mode,Y),A.return=D,A):(A=p(A,j.children||[]),A.return=D,A)}function $(D,A,j,Y,ye){return A===null||A.tag!==7?(A=ws(j,D.mode,Y,ye),A.return=D,A):(A=p(A,j),A.return=D,A)}function F(D,A,j){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=ef(""+A,D.mode,j),A.return=D,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case v:return j=ra(A.type,A.key,A.props,null,D.mode,j),Nl(j,A),j.return=D,j;case k:return A=tf(A,D.mode,j),A.return=D,A;case ie:return A=js(A),F(D,A,j)}if(Ee(A)||_e(A))return A=ws(A,D.mode,j,null),A.return=D,A;if(typeof A.then=="function")return F(D,ua(A),j);if(A.$$typeof===q)return F(D,la(D,A),j);fa(D,A)}return null}function L(D,A,j,Y){var ye=A!==null?A.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ye!==null?null:T(D,A,""+j,Y);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case v:return j.key===ye?w(D,A,j,Y):null;case k:return j.key===ye?R(D,A,j,Y):null;case ie:return j=js(j),L(D,A,j,Y)}if(Ee(j)||_e(j))return ye!==null?null:$(D,A,j,Y,null);if(typeof j.then=="function")return L(D,A,ua(j),Y);if(j.$$typeof===q)return L(D,A,la(D,j),Y);fa(D,j)}return null}function H(D,A,j,Y,ye){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return D=D.get(j)||null,T(A,D,""+Y,ye);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return D=D.get(Y.key===null?j:Y.key)||null,w(A,D,Y,ye);case k:return D=D.get(Y.key===null?j:Y.key)||null,R(A,D,Y,ye);case ie:return Y=js(Y),H(D,A,j,Y,ye)}if(Ee(Y)||_e(Y))return D=D.get(j)||null,$(A,D,Y,ye,null);if(typeof Y.then=="function")return H(D,A,j,ua(Y),ye);if(Y.$$typeof===q)return H(D,A,j,la(A,Y),ye);fa(A,Y)}return null}function ae(D,A,j,Y){for(var ye=null,Ge=null,de=A,Oe=A=0,He=null;de!==null&&Oe<j.length;Oe++){de.index>Oe?(He=de,de=null):He=de.sibling;var Ye=L(D,de,j[Oe],Y);if(Ye===null){de===null&&(de=He);break}r&&de&&Ye.alternate===null&&i(D,de),A=g(Ye,A,Oe),Ge===null?ye=Ye:Ge.sibling=Ye,Ge=Ye,de=He}if(Oe===j.length)return a(D,de),Ie&&rr(D,Oe),ye;if(de===null){for(;Oe<j.length;Oe++)de=F(D,j[Oe],Y),de!==null&&(A=g(de,A,Oe),Ge===null?ye=de:Ge.sibling=de,Ge=de);return Ie&&rr(D,Oe),ye}for(de=u(de);Oe<j.length;Oe++)He=H(de,D,Oe,j[Oe],Y),He!==null&&(r&&He.alternate!==null&&de.delete(He.key===null?Oe:He.key),A=g(He,A,Oe),Ge===null?ye=He:Ge.sibling=He,Ge=He);return r&&de.forEach(function(Xr){return i(D,Xr)}),Ie&&rr(D,Oe),ye}function Se(D,A,j,Y){if(j==null)throw Error(s(151));for(var ye=null,Ge=null,de=A,Oe=A=0,He=null,Ye=j.next();de!==null&&!Ye.done;Oe++,Ye=j.next()){de.index>Oe?(He=de,de=null):He=de.sibling;var Xr=L(D,de,Ye.value,Y);if(Xr===null){de===null&&(de=He);break}r&&de&&Xr.alternate===null&&i(D,de),A=g(Xr,A,Oe),Ge===null?ye=Xr:Ge.sibling=Xr,Ge=Xr,de=He}if(Ye.done)return a(D,de),Ie&&rr(D,Oe),ye;if(de===null){for(;!Ye.done;Oe++,Ye=j.next())Ye=F(D,Ye.value,Y),Ye!==null&&(A=g(Ye,A,Oe),Ge===null?ye=Ye:Ge.sibling=Ye,Ge=Ye);return Ie&&rr(D,Oe),ye}for(de=u(de);!Ye.done;Oe++,Ye=j.next())Ye=H(de,D,Oe,Ye.value,Y),Ye!==null&&(r&&Ye.alternate!==null&&de.delete(Ye.key===null?Oe:Ye.key),A=g(Ye,A,Oe),Ge===null?ye=Ye:Ge.sibling=Ye,Ge=Ye);return r&&de.forEach(function(PT){return i(D,PT)}),Ie&&rr(D,Oe),ye}function We(D,A,j,Y){if(typeof j=="object"&&j!==null&&j.type===E&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case v:e:{for(var ye=j.key;A!==null;){if(A.key===ye){if(ye=j.type,ye===E){if(A.tag===7){a(D,A.sibling),Y=p(A,j.props.children),Y.return=D,D=Y;break e}}else if(A.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===ie&&js(ye)===A.type){a(D,A.sibling),Y=p(A,j.props),Nl(Y,j),Y.return=D,D=Y;break e}a(D,A);break}else i(D,A);A=A.sibling}j.type===E?(Y=ws(j.props.children,D.mode,Y,j.key),Y.return=D,D=Y):(Y=ra(j.type,j.key,j.props,null,D.mode,Y),Nl(Y,j),Y.return=D,D=Y)}return S(D);case k:e:{for(ye=j.key;A!==null;){if(A.key===ye)if(A.tag===4&&A.stateNode.containerInfo===j.containerInfo&&A.stateNode.implementation===j.implementation){a(D,A.sibling),Y=p(A,j.children||[]),Y.return=D,D=Y;break e}else{a(D,A);break}else i(D,A);A=A.sibling}Y=tf(j,D.mode,Y),Y.return=D,D=Y}return S(D);case ie:return j=js(j),We(D,A,j,Y)}if(Ee(j))return ae(D,A,j,Y);if(_e(j)){if(ye=_e(j),typeof ye!="function")throw Error(s(150));return j=ye.call(j),Se(D,A,j,Y)}if(typeof j.then=="function")return We(D,A,ua(j),Y);if(j.$$typeof===q)return We(D,A,la(D,j),Y);fa(D,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,A!==null&&A.tag===6?(a(D,A.sibling),Y=p(A,j),Y.return=D,D=Y):(a(D,A),Y=ef(j,D.mode,Y),Y.return=D,D=Y),S(D)):a(D,A)}return function(D,A,j,Y){try{wl=0;var ye=We(D,A,j,Y);return wi=null,ye}catch(de){if(de===Ci||de===aa)throw de;var Ge=dn(29,de,null,D.mode);return Ge.lanes=Y,Ge.return=D,Ge}finally{}}}var zs=ig(!0),lg=ig(!1),Rr=!1;function pf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mf(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function zr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Lr(r,i,a){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Pe&2)!==0){var p=u.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),u.pending=i,i=na(r),$m(r,null,a),i}return ta(r,u,i,a),na(r)}function Al(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,a|=u,i.lanes=a,Qp(r,a)}}function gf(r,i){var a=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var p=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?p=g=S:g=g.next=S,a=a.next}while(a!==null);g===null?p=g=i:g=g.next=i}else p=g=i;a={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}var yf=!1;function Ol(){if(yf){var r=Mi;if(r!==null)throw r}}function Dl(r,i,a,u){yf=!1;var p=r.updateQueue;Rr=!1;var g=p.firstBaseUpdate,S=p.lastBaseUpdate,T=p.shared.pending;if(T!==null){p.shared.pending=null;var w=T,R=w.next;w.next=null,S===null?g=R:S.next=R,S=w;var $=r.alternate;$!==null&&($=$.updateQueue,T=$.lastBaseUpdate,T!==S&&(T===null?$.firstBaseUpdate=R:T.next=R,$.lastBaseUpdate=w))}if(g!==null){var F=p.baseState;S=0,$=R=w=null,T=g;do{var L=T.lane&-536870913,H=L!==T.lane;if(H?(Be&L)===L:(u&L)===L){L!==0&&L===Ei&&(yf=!0),$!==null&&($=$.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ae=r,Se=T;L=i;var We=a;switch(Se.tag){case 1:if(ae=Se.payload,typeof ae=="function"){F=ae.call(We,F,L);break e}F=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=Se.payload,L=typeof ae=="function"?ae.call(We,F,L):ae,L==null)break e;F=y({},F,L);break e;case 2:Rr=!0}}L=T.callback,L!==null&&(r.flags|=64,H&&(r.flags|=8192),H=p.callbacks,H===null?p.callbacks=[L]:H.push(L))}else H={lane:L,tag:T.tag,payload:T.payload,callback:T.callback,next:null},$===null?(R=$=H,w=F):$=$.next=H,S|=L;if(T=T.next,T===null){if(T=p.shared.pending,T===null)break;H=T,T=H.next,H.next=null,p.lastBaseUpdate=H,p.shared.pending=null}}while(!0);$===null&&(w=F),p.baseState=w,p.firstBaseUpdate=R,p.lastBaseUpdate=$,g===null&&(p.shared.lanes=0),Ir|=S,r.lanes=S,r.memoizedState=F}}function og(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function ag(r,i){var a=r.callbacks;if(a!==null)for(r.callbacks=null,r=0;r<a.length;r++)og(a[r],i)}var Ni=N(null),da=N(0);function cg(r,i){r=pr,se(da,r),se(Ni,i),pr=r|i.baseLanes}function bf(){se(da,pr),se(Ni,Ni.current)}function xf(){pr=da.current,V(Ni),V(da)}var hn=N(null),Nn=null;function _r(r){var i=r.alternate;se(yt,yt.current&1),se(hn,r),Nn===null&&(i===null||Ni.current!==null||i.memoizedState!==null)&&(Nn=r)}function vf(r){se(yt,yt.current),se(hn,r),Nn===null&&(Nn=r)}function ug(r){r.tag===22?(se(yt,yt.current),se(hn,r),Nn===null&&(Nn=r)):Br()}function Br(){se(yt,yt.current),se(hn,hn.current)}function pn(r){V(hn),Nn===r&&(Nn=null),V(yt)}var yt=N(0);function ha(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Cd(a)||wd(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var lr=0,we=null,Qe=null,St=null,pa=!1,Ai=!1,Ls=!1,ma=0,jl=0,Oi=null,Bk=0;function ht(){throw Error(s(321))}function Sf(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!fn(r[a],i[a]))return!1;return!0}function kf(r,i,a,u,p,g){return lr=g,we=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,U.H=r===null||r.memoizedState===null?Pg:Bf,Ls=!1,g=a(u,p),Ls=!1,Ai&&(g=dg(i,a,u,p)),fg(r),g}function fg(r){U.H=Ll;var i=Qe!==null&&Qe.next!==null;if(lr=0,St=Qe=we=null,pa=!1,jl=0,Oi=null,i)throw Error(s(300));r===null||kt||(r=r.dependencies,r!==null&&ia(r)&&(kt=!0))}function dg(r,i,a,u){we=r;var p=0;do{if(Ai&&(Oi=null),jl=0,Ai=!1,25<=p)throw Error(s(301));if(p+=1,St=Qe=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}U.H=Fg,g=i(a,u)}while(Ai);return g}function Hk(){var r=U.H,i=r.useState()[0];return i=typeof i.then=="function"?Rl(i):i,r=r.useState()[0],(Qe!==null?Qe.memoizedState:null)!==r&&(we.flags|=1024),i}function Tf(){var r=ma!==0;return ma=0,r}function Ef(r,i,a){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~a}function Mf(r){if(pa){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pa=!1}lr=0,St=Qe=we=null,Ai=!1,jl=ma=0,Oi=null}function Jt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?we.memoizedState=St=r:St=St.next=r,St}function bt(){if(Qe===null){var r=we.alternate;r=r!==null?r.memoizedState:null}else r=Qe.next;var i=St===null?we.memoizedState:St.next;if(i!==null)St=i,Qe=r;else{if(r===null)throw we.alternate===null?Error(s(467)):Error(s(310));Qe=r,r={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},St===null?we.memoizedState=St=r:St=St.next=r}return St}function ga(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(r){var i=jl;return jl+=1,Oi===null&&(Oi=[]),r=ng(Oi,r,i),i=we,(St===null?i.memoizedState:St.next)===null&&(i=i.alternate,U.H=i===null||i.memoizedState===null?Pg:Bf),r}function ya(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Rl(r);if(r.$$typeof===q)return _t(r)}throw Error(s(438,String(r)))}function Cf(r){var i=null,a=we.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var u=we.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=ga(),we.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(r),u=0;u<r;u++)a[u]=De;return i.index++,a}function or(r,i){return typeof i=="function"?i(r):i}function ba(r){var i=bt();return wf(i,Qe,r)}function wf(r,i,a){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var p=r.baseQueue,g=u.pending;if(g!==null){if(p!==null){var S=p.next;p.next=g.next,g.next=S}i.baseQueue=p=g,u.pending=null}if(g=r.baseState,p===null)r.memoizedState=g;else{i=p.next;var T=S=null,w=null,R=i,$=!1;do{var F=R.lane&-536870913;if(F!==R.lane?(Be&F)===F:(lr&F)===F){var L=R.revertLane;if(L===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),F===Ei&&($=!0);else if((lr&L)===L){R=R.next,L===Ei&&($=!0);continue}else F={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},w===null?(T=w=F,S=g):w=w.next=F,we.lanes|=L,Ir|=L;F=R.action,Ls&&a(g,F),g=R.hasEagerState?R.eagerState:a(g,F)}else L={lane:F,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},w===null?(T=w=L,S=g):w=w.next=L,we.lanes|=F,Ir|=F;R=R.next}while(R!==null&&R!==i);if(w===null?S=g:w.next=T,!fn(g,r.memoizedState)&&(kt=!0,$&&(a=Mi,a!==null)))throw a;r.memoizedState=g,r.baseState=S,r.baseQueue=w,u.lastRenderedState=g}return p===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Nf(r){var i=bt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var u=a.dispatch,p=a.pending,g=i.memoizedState;if(p!==null){a.pending=null;var S=p=p.next;do g=r(g,S.action),S=S.next;while(S!==p);fn(g,i.memoizedState)||(kt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,u]}function hg(r,i,a){var u=we,p=bt(),g=Ie;if(g){if(a===void 0)throw Error(s(407));a=a()}else a=i();var S=!fn((Qe||p).memoizedState,a);if(S&&(p.memoizedState=a,kt=!0),p=p.queue,Df(gg.bind(null,u,p,r),[r]),p.getSnapshot!==i||S||St!==null&&St.memoizedState.tag&1){if(u.flags|=2048,Di(9,{destroy:void 0},mg.bind(null,u,p,a,i),null),tt===null)throw Error(s(349));g||(lr&127)!==0||pg(u,i,a)}return a}function pg(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=we.updateQueue,i===null?(i=ga(),we.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function mg(r,i,a,u){i.value=a,i.getSnapshot=u,yg(i)&&bg(r)}function gg(r,i,a){return a(function(){yg(i)&&bg(r)})}function yg(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!fn(r,a)}catch{return!0}}function bg(r){var i=Cs(r,2);i!==null&&ln(i,r,2)}function Af(r){var i=Jt();if(typeof r=="function"){var a=r;if(r=a(),Ls){Cr(!0);try{a()}finally{Cr(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:r},i}function xg(r,i,a,u){return r.baseState=a,wf(r,Qe,typeof u=="function"?u:or)}function Uk(r,i,a,u,p){if(Sa(r))throw Error(s(485));if(r=i.action,r!==null){var g={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};U.T!==null?a(!0):g.isTransition=!1,u(g),a=i.pending,a===null?(g.next=i.pending=g,vg(i,g)):(g.next=a.next,i.pending=a.next=g)}}function vg(r,i){var a=i.action,u=i.payload,p=r.state;if(i.isTransition){var g=U.T,S={};U.T=S;try{var T=a(p,u),w=U.S;w!==null&&w(S,T),Sg(r,i,T)}catch(R){Of(r,i,R)}finally{g!==null&&S.types!==null&&(g.types=S.types),U.T=g}}else try{g=a(p,u),Sg(r,i,g)}catch(R){Of(r,i,R)}}function Sg(r,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){kg(r,i,u)},function(u){return Of(r,i,u)}):kg(r,i,a)}function kg(r,i,a){i.status="fulfilled",i.value=a,Tg(i),r.state=a,i=r.pending,i!==null&&(a=i.next,a===i?r.pending=null:(a=a.next,i.next=a,vg(r,a)))}function Of(r,i,a){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=a,Tg(i),i=i.next;while(i!==u)}r.action=null}function Tg(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function Eg(r,i){return i}function Mg(r,i){if(Ie){var a=tt.formState;if(a!==null){e:{var u=we;if(Ie){if(it){t:{for(var p=it,g=wn;p.nodeType!==8;){if(!g){p=null;break t}if(p=An(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){it=An(p.nextSibling),u=p.data==="F!";break e}}Dr(u)}u=!1}u&&(i=a[0])}}return a=Jt(),a.memoizedState=a.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eg,lastRenderedState:i},a.queue=u,a=Gg.bind(null,we,u),u.dispatch=a,u=Af(!1),g=_f.bind(null,we,!1,u.queue),u=Jt(),p={state:i,dispatch:null,action:r,pending:null},u.queue=p,a=Uk.bind(null,we,p,g,a),p.dispatch=a,u.memoizedState=r,[i,a,!1]}function Cg(r){var i=bt();return wg(i,Qe,r)}function wg(r,i,a){if(i=wf(r,i,Eg)[0],r=ba(or)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Rl(i)}catch(S){throw S===Ci?aa:S}else u=i;i=bt();var p=i.queue,g=p.dispatch;return a!==i.memoizedState&&(we.flags|=2048,Di(9,{destroy:void 0},Ik.bind(null,p,a),null)),[u,g,r]}function Ik(r,i){r.action=i}function Ng(r){var i=bt(),a=Qe;if(a!==null)return wg(i,a,r);bt(),i=i.memoizedState,a=bt();var u=a.queue.dispatch;return a.memoizedState=r,[i,u,!1]}function Di(r,i,a,u){return r={tag:r,create:a,deps:u,inst:i,next:null},i=we.updateQueue,i===null&&(i=ga(),we.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=r.next=r:(u=a.next,a.next=r,r.next=u,i.lastEffect=r),r}function Ag(){return bt().memoizedState}function xa(r,i,a,u){var p=Jt();we.flags|=r,p.memoizedState=Di(1|i,{destroy:void 0},a,u===void 0?null:u)}function va(r,i,a,u){var p=bt();u=u===void 0?null:u;var g=p.memoizedState.inst;Qe!==null&&u!==null&&Sf(u,Qe.memoizedState.deps)?p.memoizedState=Di(i,g,a,u):(we.flags|=r,p.memoizedState=Di(1|i,g,a,u))}function Og(r,i){xa(8390656,8,r,i)}function Df(r,i){va(2048,8,r,i)}function Vk(r){we.flags|=4;var i=we.updateQueue;if(i===null)i=ga(),we.updateQueue=i,i.events=[r];else{var a=i.events;a===null?i.events=[r]:a.push(r)}}function Dg(r){var i=bt().memoizedState;return Vk({ref:i,nextImpl:r}),function(){if((Pe&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function jg(r,i){return va(4,2,r,i)}function Rg(r,i){return va(4,4,r,i)}function zg(r,i){if(typeof i=="function"){r=r();var a=i(r);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Lg(r,i,a){a=a!=null?a.concat([r]):null,va(4,4,zg.bind(null,i,r),a)}function jf(){}function _g(r,i){var a=bt();i=i===void 0?null:i;var u=a.memoizedState;return i!==null&&Sf(i,u[1])?u[0]:(a.memoizedState=[r,i],r)}function Bg(r,i){var a=bt();i=i===void 0?null:i;var u=a.memoizedState;if(i!==null&&Sf(i,u[1]))return u[0];if(u=r(),Ls){Cr(!0);try{r()}finally{Cr(!1)}}return a.memoizedState=[u,i],u}function Rf(r,i,a){return a===void 0||(lr&1073741824)!==0&&(Be&261930)===0?r.memoizedState=i:(r.memoizedState=a,r=Hy(),we.lanes|=r,Ir|=r,a)}function Hg(r,i,a,u){return fn(a,i)?a:Ni.current!==null?(r=Rf(r,a,u),fn(r,i)||(kt=!0),r):(lr&42)===0||(lr&1073741824)!==0&&(Be&261930)===0?(kt=!0,r.memoizedState=a):(r=Hy(),we.lanes|=r,Ir|=r,i)}function Ug(r,i,a,u,p){var g=Z.p;Z.p=g!==0&&8>g?g:8;var S=U.T,T={};U.T=T,_f(r,!1,i,a);try{var w=p(),R=U.S;if(R!==null&&R(T,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var $=_k(w,u);zl(r,i,$,yn(r))}else zl(r,i,u,yn(r))}catch(F){zl(r,i,{then:function(){},status:"rejected",reason:F},yn())}finally{Z.p=g,S!==null&&T.types!==null&&(S.types=T.types),U.T=S}}function qk(){}function zf(r,i,a,u){if(r.tag!==5)throw Error(s(476));var p=Ig(r).queue;Ug(r,p,i,pe,a===null?qk:function(){return Vg(r),a(u)})}function Ig(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:pe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:a},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Vg(r){var i=Ig(r);i.next===null&&(i=r.alternate.memoizedState),zl(r,i.next.queue,{},yn())}function Lf(){return _t(Ql)}function qg(){return bt().memoizedState}function $g(){return bt().memoizedState}function $k(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var a=yn();r=zr(a);var u=Lr(i,r,a);u!==null&&(ln(u,i,a),Al(u,i,a)),i={cache:uf()},r.payload=i;return}i=i.return}}function Gk(r,i,a){var u=yn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Sa(r)?Yg(i,a):(a=Zu(r,i,a,u),a!==null&&(ln(a,r,u),Kg(a,i,u)))}function Gg(r,i,a){var u=yn();zl(r,i,a,u)}function zl(r,i,a,u){var p={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Sa(r))Yg(i,p);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var S=i.lastRenderedState,T=g(S,a);if(p.hasEagerState=!0,p.eagerState=T,fn(T,S))return ta(r,i,p,0),tt===null&&ea(),!1}catch{}finally{}if(a=Zu(r,i,p,u),a!==null)return ln(a,r,u),Kg(a,i,u),!0}return!1}function _f(r,i,a,u){if(u={lane:2,revertLane:pd(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Sa(r)){if(i)throw Error(s(479))}else i=Zu(r,a,u,2),i!==null&&ln(i,r,2)}function Sa(r){var i=r.alternate;return r===we||i!==null&&i===we}function Yg(r,i){Ai=pa=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function Kg(r,i,a){if((a&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,a|=u,i.lanes=a,Qp(r,a)}}var Ll={readContext:_t,use:ya,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht,useHostTransitionStatus:ht,useFormState:ht,useActionState:ht,useOptimistic:ht,useMemoCache:ht,useCacheRefresh:ht};Ll.useEffectEvent=ht;var Pg={readContext:_t,use:ya,useCallback:function(r,i){return Jt().memoizedState=[r,i===void 0?null:i],r},useContext:_t,useEffect:Og,useImperativeHandle:function(r,i,a){a=a!=null?a.concat([r]):null,xa(4194308,4,zg.bind(null,i,r),a)},useLayoutEffect:function(r,i){return xa(4194308,4,r,i)},useInsertionEffect:function(r,i){xa(4,2,r,i)},useMemo:function(r,i){var a=Jt();i=i===void 0?null:i;var u=r();if(Ls){Cr(!0);try{r()}finally{Cr(!1)}}return a.memoizedState=[u,i],u},useReducer:function(r,i,a){var u=Jt();if(a!==void 0){var p=a(i);if(Ls){Cr(!0);try{a(i)}finally{Cr(!1)}}}else p=i;return u.memoizedState=u.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},u.queue=r,r=r.dispatch=Gk.bind(null,we,r),[u.memoizedState,r]},useRef:function(r){var i=Jt();return r={current:r},i.memoizedState=r},useState:function(r){r=Af(r);var i=r.queue,a=Gg.bind(null,we,i);return i.dispatch=a,[r.memoizedState,a]},useDebugValue:jf,useDeferredValue:function(r,i){var a=Jt();return Rf(a,r,i)},useTransition:function(){var r=Af(!1);return r=Ug.bind(null,we,r.queue,!0,!1),Jt().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,a){var u=we,p=Jt();if(Ie){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),tt===null)throw Error(s(349));(Be&127)!==0||pg(u,i,a)}p.memoizedState=a;var g={value:a,getSnapshot:i};return p.queue=g,Og(gg.bind(null,u,g,r),[r]),u.flags|=2048,Di(9,{destroy:void 0},mg.bind(null,u,g,a,i),null),a},useId:function(){var r=Jt(),i=tt.identifierPrefix;if(Ie){var a=Gn,u=$n;a=(u&~(1<<32-un(u)-1)).toString(32)+a,i="_"+i+"R_"+a,a=ma++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Bk++,i="_"+i+"r_"+a.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Lf,useFormState:Mg,useActionState:Mg,useOptimistic:function(r){var i=Jt();i.memoizedState=i.baseState=r;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=_f.bind(null,we,!0,a),a.dispatch=i,[r,i]},useMemoCache:Cf,useCacheRefresh:function(){return Jt().memoizedState=$k.bind(null,we)},useEffectEvent:function(r){var i=Jt(),a={impl:r};return i.memoizedState=a,function(){if((Pe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Bf={readContext:_t,use:ya,useCallback:_g,useContext:_t,useEffect:Df,useImperativeHandle:Lg,useInsertionEffect:jg,useLayoutEffect:Rg,useMemo:Bg,useReducer:ba,useRef:Ag,useState:function(){return ba(or)},useDebugValue:jf,useDeferredValue:function(r,i){var a=bt();return Hg(a,Qe.memoizedState,r,i)},useTransition:function(){var r=ba(or)[0],i=bt().memoizedState;return[typeof r=="boolean"?r:Rl(r),i]},useSyncExternalStore:hg,useId:qg,useHostTransitionStatus:Lf,useFormState:Cg,useActionState:Cg,useOptimistic:function(r,i){var a=bt();return xg(a,Qe,r,i)},useMemoCache:Cf,useCacheRefresh:$g};Bf.useEffectEvent=Dg;var Fg={readContext:_t,use:ya,useCallback:_g,useContext:_t,useEffect:Df,useImperativeHandle:Lg,useInsertionEffect:jg,useLayoutEffect:Rg,useMemo:Bg,useReducer:Nf,useRef:Ag,useState:function(){return Nf(or)},useDebugValue:jf,useDeferredValue:function(r,i){var a=bt();return Qe===null?Rf(a,r,i):Hg(a,Qe.memoizedState,r,i)},useTransition:function(){var r=Nf(or)[0],i=bt().memoizedState;return[typeof r=="boolean"?r:Rl(r),i]},useSyncExternalStore:hg,useId:qg,useHostTransitionStatus:Lf,useFormState:Ng,useActionState:Ng,useOptimistic:function(r,i){var a=bt();return Qe!==null?xg(a,Qe,r,i):(a.baseState=r,[r,a.queue.dispatch])},useMemoCache:Cf,useCacheRefresh:$g};Fg.useEffectEvent=Dg;function Hf(r,i,a,u){i=r.memoizedState,a=a(u,i),a=a==null?i:y({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Uf={enqueueSetState:function(r,i,a){r=r._reactInternals;var u=yn(),p=zr(u);p.payload=i,a!=null&&(p.callback=a),i=Lr(r,p,u),i!==null&&(ln(i,r,u),Al(i,r,u))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var u=yn(),p=zr(u);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=Lr(r,p,u),i!==null&&(ln(i,r,u),Al(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=yn(),u=zr(a);u.tag=2,i!=null&&(u.callback=i),i=Lr(r,u,a),i!==null&&(ln(i,r,a),Al(i,r,a))}};function Jg(r,i,a,u,p,g,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,S):i.prototype&&i.prototype.isPureReactComponent?!Sl(a,u)||!Sl(p,g):!0}function Xg(r,i,a,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==r&&Uf.enqueueReplaceState(i,i.state,null)}function _s(r,i){var a=i;if("ref"in i){a={};for(var u in i)u!=="ref"&&(a[u]=i[u])}if(r=r.defaultProps){a===i&&(a=y({},a));for(var p in r)a[p]===void 0&&(a[p]=r[p])}return a}function Qg(r){Wo(r)}function Zg(r){console.error(r)}function Wg(r){Wo(r)}function ka(r,i){try{var a=r.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function ey(r,i,a){try{var u=r.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function If(r,i,a){return a=zr(a),a.tag=3,a.payload={element:null},a.callback=function(){ka(r,i)},a}function ty(r){return r=zr(r),r.tag=3,r}function ny(r,i,a,u){var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var g=u.value;r.payload=function(){return p(g)},r.callback=function(){ey(i,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){ey(i,a,u),typeof p!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function Yk(r,i,a,u,p){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=a.alternate,i!==null&&Ti(i,a,p,!0),a=hn.current,a!==null){switch(a.tag){case 31:case 13:return Nn===null?za():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=p,u===ca?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([u]):i.add(u),fd(r,u,p)),!1;case 22:return a.flags|=65536,u===ca?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([u]):a.add(u)),fd(r,u,p)),!1}throw Error(s(435,a.tag))}return fd(r,u,p),za(),!1}if(Ie)return i=hn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,u!==sf&&(r=Error(s(422),{cause:u}),El(En(r,a)))):(u!==sf&&(i=Error(s(423),{cause:u}),El(En(i,a))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,u=En(u,a),p=If(r.stateNode,u,p),gf(r,p),pt!==4&&(pt=2)),!1;var g=Error(s(520),{cause:u});if(g=En(g,a),$l===null?$l=[g]:$l.push(g),pt!==4&&(pt=2),i===null)return!0;u=En(u,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,r=p&-p,a.lanes|=r,r=If(a.stateNode,u,r),gf(a,r),!1;case 1:if(i=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Vr===null||!Vr.has(g))))return a.flags|=65536,p&=-p,a.lanes|=p,p=ty(p),ny(p,r,a,u),gf(a,p),!1}a=a.return}while(a!==null);return!1}var Vf=Error(s(461)),kt=!1;function Bt(r,i,a,u){i.child=r===null?lg(i,null,a,u):zs(i,r.child,a,u)}function ry(r,i,a,u,p){a=a.render;var g=i.ref;if("ref"in u){var S={};for(var T in u)T!=="ref"&&(S[T]=u[T])}else S=u;return Os(i),u=kf(r,i,a,S,g,p),T=Tf(),r!==null&&!kt?(Ef(r,i,p),ar(r,i,p)):(Ie&&T&&nf(i),i.flags|=1,Bt(r,i,u,p),i.child)}function sy(r,i,a,u,p){if(r===null){var g=a.type;return typeof g=="function"&&!Wu(g)&&g.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=g,iy(r,i,g,u,p)):(r=ra(a.type,null,u,i,i.mode,p),r.ref=i.ref,r.return=i,i.child=r)}if(g=r.child,!Jf(r,p)){var S=g.memoizedProps;if(a=a.compare,a=a!==null?a:Sl,a(S,u)&&r.ref===i.ref)return ar(r,i,p)}return i.flags|=1,r=nr(g,u),r.ref=i.ref,r.return=i,i.child=r}function iy(r,i,a,u,p){if(r!==null){var g=r.memoizedProps;if(Sl(g,u)&&r.ref===i.ref)if(kt=!1,i.pendingProps=u=g,Jf(r,p))(r.flags&131072)!==0&&(kt=!0);else return i.lanes=r.lanes,ar(r,i,p)}return qf(r,i,a,u,p)}function ly(r,i,a,u){var p=u.children,g=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|a:a,r!==null){for(u=i.child=r.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~g}else u=0,i.child=null;return oy(r,i,g,a,u)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&oa(i,g!==null?g.cachePool:null),g!==null?cg(i,g):bf(),ug(i);else return u=i.lanes=536870912,oy(r,i,g!==null?g.baseLanes|a:a,a,u)}else g!==null?(oa(i,g.cachePool),cg(i,g),Br(),i.memoizedState=null):(r!==null&&oa(i,null),bf(),Br());return Bt(r,i,p,a),i.child}function _l(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function oy(r,i,a,u,p){var g=df();return g=g===null?null:{parent:vt._currentValue,pool:g},i.memoizedState={baseLanes:a,cachePool:g},r!==null&&oa(i,null),bf(),ug(i),r!==null&&Ti(r,i,u,!0),i.childLanes=p,null}function Ta(r,i){return i=Ma({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function ay(r,i,a){return zs(i,r.child,null,a),r=Ta(i,i.pendingProps),r.flags|=2,pn(i),i.memoizedState=null,r}function Kk(r,i,a){var u=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(Ie){if(u.mode==="hidden")return r=Ta(i,u),i.lanes=536870912,_l(null,r);if(vf(i),(r=it)?(r=v0(r,wn),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Ar!==null?{id:$n,overflow:Gn}:null,retryLane:536870912,hydrationErrors:null},a=Ym(r),a.return=i,i.child=a,Lt=i,it=null)):r=null,r===null)throw Dr(i);return i.lanes=536870912,null}return Ta(i,u)}var g=r.memoizedState;if(g!==null){var S=g.dehydrated;if(vf(i),p)if(i.flags&256)i.flags&=-257,i=ay(r,i,a);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(kt||Ti(r,i,a,!1),p=(a&r.childLanes)!==0,kt||p){if(u=tt,u!==null&&(S=Zp(u,a),S!==0&&S!==g.retryLane))throw g.retryLane=S,Cs(r,S),ln(u,r,S),Vf;za(),i=ay(r,i,a)}else r=g.treeContext,it=An(S.nextSibling),Lt=i,Ie=!0,Or=null,wn=!1,r!==null&&Fm(i,r),i=Ta(i,u),i.flags|=4096;return i}return r=nr(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Ea(r,i){var a=i.ref;if(a===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(r===null||r.ref!==a)&&(i.flags|=4194816)}}function qf(r,i,a,u,p){return Os(i),a=kf(r,i,a,u,void 0,p),u=Tf(),r!==null&&!kt?(Ef(r,i,p),ar(r,i,p)):(Ie&&u&&nf(i),i.flags|=1,Bt(r,i,a,p),i.child)}function cy(r,i,a,u,p,g){return Os(i),i.updateQueue=null,a=dg(i,u,a,p),fg(r),u=Tf(),r!==null&&!kt?(Ef(r,i,g),ar(r,i,g)):(Ie&&u&&nf(i),i.flags|=1,Bt(r,i,a,g),i.child)}function uy(r,i,a,u,p){if(Os(i),i.stateNode===null){var g=xi,S=a.contextType;typeof S=="object"&&S!==null&&(g=_t(S)),g=new a(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Uf,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},pf(i),S=a.contextType,g.context=typeof S=="object"&&S!==null?_t(S):xi,g.state=i.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Hf(i,a,S,u),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&Uf.enqueueReplaceState(g,g.state,null),Dl(i,u,g,p),Ol(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){g=i.stateNode;var T=i.memoizedProps,w=_s(a,T);g.props=w;var R=g.context,$=a.contextType;S=xi,typeof $=="object"&&$!==null&&(S=_t($));var F=a.getDerivedStateFromProps;$=typeof F=="function"||typeof g.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,$||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T||R!==S)&&Xg(i,g,u,S),Rr=!1;var L=i.memoizedState;g.state=L,Dl(i,u,g,p),Ol(),R=i.memoizedState,T||L!==R||Rr?(typeof F=="function"&&(Hf(i,a,F,u),R=i.memoizedState),(w=Rr||Jg(i,a,w,u,L,R,S))?($||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=R),g.props=u,g.state=R,g.context=S,u=w):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,mf(r,i),S=i.memoizedProps,$=_s(a,S),g.props=$,F=i.pendingProps,L=g.context,R=a.contextType,w=xi,typeof R=="object"&&R!==null&&(w=_t(R)),T=a.getDerivedStateFromProps,(R=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==F||L!==w)&&Xg(i,g,u,w),Rr=!1,L=i.memoizedState,g.state=L,Dl(i,u,g,p),Ol();var H=i.memoizedState;S!==F||L!==H||Rr||r!==null&&r.dependencies!==null&&ia(r.dependencies)?(typeof T=="function"&&(Hf(i,a,T,u),H=i.memoizedState),($=Rr||Jg(i,a,$,u,L,H,w)||r!==null&&r.dependencies!==null&&ia(r.dependencies))?(R||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,H,w),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,H,w)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===r.memoizedProps&&L===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&L===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=H),g.props=u,g.state=H,g.context=w,u=$):(typeof g.componentDidUpdate!="function"||S===r.memoizedProps&&L===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&L===r.memoizedState||(i.flags|=1024),u=!1)}return g=u,Ea(r,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,r!==null&&u?(i.child=zs(i,r.child,null,p),i.child=zs(i,null,a,p)):Bt(r,i,a,p),i.memoizedState=g.state,r=i.child):r=ar(r,i,p),r}function fy(r,i,a,u){return Ns(),i.flags|=256,Bt(r,i,a,u),i.child}var $f={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gf(r){return{baseLanes:r,cachePool:eg()}}function Yf(r,i,a){return r=r!==null?r.childLanes&~a:0,i&&(r|=gn),r}function dy(r,i,a){var u=i.pendingProps,p=!1,g=(i.flags&128)!==0,S;if((S=g)||(S=r!==null&&r.memoizedState===null?!1:(yt.current&2)!==0),S&&(p=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,r===null){if(Ie){if(p?_r(i):Br(),(r=it)?(r=v0(r,wn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Ar!==null?{id:$n,overflow:Gn}:null,retryLane:536870912,hydrationErrors:null},a=Ym(r),a.return=i,i.child=a,Lt=i,it=null)):r=null,r===null)throw Dr(i);return wd(r)?i.lanes=32:i.lanes=536870912,null}var T=u.children;return u=u.fallback,p?(Br(),p=i.mode,T=Ma({mode:"hidden",children:T},p),u=ws(u,p,a,null),T.return=i,u.return=i,T.sibling=u,i.child=T,u=i.child,u.memoizedState=Gf(a),u.childLanes=Yf(r,S,a),i.memoizedState=$f,_l(null,u)):(_r(i),Kf(i,T))}var w=r.memoizedState;if(w!==null&&(T=w.dehydrated,T!==null)){if(g)i.flags&256?(_r(i),i.flags&=-257,i=Pf(r,i,a)):i.memoizedState!==null?(Br(),i.child=r.child,i.flags|=128,i=null):(Br(),T=u.fallback,p=i.mode,u=Ma({mode:"visible",children:u.children},p),T=ws(T,p,a,null),T.flags|=2,u.return=i,T.return=i,u.sibling=T,i.child=u,zs(i,r.child,null,a),u=i.child,u.memoizedState=Gf(a),u.childLanes=Yf(r,S,a),i.memoizedState=$f,i=_l(null,u));else if(_r(i),wd(T)){if(S=T.nextSibling&&T.nextSibling.dataset,S)var R=S.dgst;S=R,u=Error(s(419)),u.stack="",u.digest=S,El({value:u,source:null,stack:null}),i=Pf(r,i,a)}else if(kt||Ti(r,i,a,!1),S=(a&r.childLanes)!==0,kt||S){if(S=tt,S!==null&&(u=Zp(S,a),u!==0&&u!==w.retryLane))throw w.retryLane=u,Cs(r,u),ln(S,r,u),Vf;Cd(T)||za(),i=Pf(r,i,a)}else Cd(T)?(i.flags|=192,i.child=r.child,i=null):(r=w.treeContext,it=An(T.nextSibling),Lt=i,Ie=!0,Or=null,wn=!1,r!==null&&Fm(i,r),i=Kf(i,u.children),i.flags|=4096);return i}return p?(Br(),T=u.fallback,p=i.mode,w=r.child,R=w.sibling,u=nr(w,{mode:"hidden",children:u.children}),u.subtreeFlags=w.subtreeFlags&65011712,R!==null?T=nr(R,T):(T=ws(T,p,a,null),T.flags|=2),T.return=i,u.return=i,u.sibling=T,i.child=u,_l(null,u),u=i.child,T=r.child.memoizedState,T===null?T=Gf(a):(p=T.cachePool,p!==null?(w=vt._currentValue,p=p.parent!==w?{parent:w,pool:w}:p):p=eg(),T={baseLanes:T.baseLanes|a,cachePool:p}),u.memoizedState=T,u.childLanes=Yf(r,S,a),i.memoizedState=$f,_l(r.child,u)):(_r(i),a=r.child,r=a.sibling,a=nr(a,{mode:"visible",children:u.children}),a.return=i,a.sibling=null,r!==null&&(S=i.deletions,S===null?(i.deletions=[r],i.flags|=16):S.push(r)),i.child=a,i.memoizedState=null,a)}function Kf(r,i){return i=Ma({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Ma(r,i){return r=dn(22,r,null,i),r.lanes=0,r}function Pf(r,i,a){return zs(i,r.child,null,a),r=Kf(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function hy(r,i,a){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),af(r.return,i,a)}function Ff(r,i,a,u,p,g){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:p,treeForkCount:g}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=p,S.treeForkCount=g)}function py(r,i,a){var u=i.pendingProps,p=u.revealOrder,g=u.tail;u=u.children;var S=yt.current,T=(S&2)!==0;if(T?(S=S&1|2,i.flags|=128):S&=1,se(yt,S),Bt(r,i,u,a),u=Ie?Tl:0,!T&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&hy(r,a,i);else if(r.tag===19)hy(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(p){case"forwards":for(a=i.child,p=null;a!==null;)r=a.alternate,r!==null&&ha(r)===null&&(p=a),a=a.sibling;a=p,a===null?(p=i.child,i.child=null):(p=a.sibling,a.sibling=null),Ff(i,!1,p,a,g,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,p=i.child,i.child=null;p!==null;){if(r=p.alternate,r!==null&&ha(r)===null){i.child=p;break}r=p.sibling,p.sibling=a,a=p,p=r}Ff(i,!0,a,null,g,u);break;case"together":Ff(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function ar(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),Ir|=i.lanes,(a&i.childLanes)===0)if(r!==null){if(Ti(r,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,a=nr(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=nr(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function Jf(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&ia(r)))}function Pk(r,i,a){switch(i.tag){case 3:et(i,i.stateNode.containerInfo),jr(i,vt,r.memoizedState.cache),Ns();break;case 27:case 5:fe(i);break;case 4:et(i,i.stateNode.containerInfo);break;case 10:jr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,vf(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(_r(i),i.flags|=128,null):(a&i.child.childLanes)!==0?dy(r,i,a):(_r(i),r=ar(r,i,a),r!==null?r.sibling:null);_r(i);break;case 19:var p=(r.flags&128)!==0;if(u=(a&i.childLanes)!==0,u||(Ti(r,i,a,!1),u=(a&i.childLanes)!==0),p){if(u)return py(r,i,a);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),se(yt,yt.current),u)break;return null;case 22:return i.lanes=0,ly(r,i,a,i.pendingProps);case 24:jr(i,vt,r.memoizedState.cache)}return ar(r,i,a)}function my(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps)kt=!0;else{if(!Jf(r,a)&&(i.flags&128)===0)return kt=!1,Pk(r,i,a);kt=(r.flags&131072)!==0}else kt=!1,Ie&&(i.flags&1048576)!==0&&Pm(i,Tl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=js(i.elementType),i.type=r,typeof r=="function")Wu(r)?(u=_s(r,u),i.tag=1,i=uy(null,i,r,u,a)):(i.tag=0,i=qf(null,i,r,u,a));else{if(r!=null){var p=r.$$typeof;if(p===W){i.tag=11,i=ry(null,i,r,u,a);break e}else if(p===I){i.tag=14,i=sy(null,i,r,u,a);break e}}throw i=$e(r)||r,Error(s(306,i,""))}}return i;case 0:return qf(r,i,i.type,i.pendingProps,a);case 1:return u=i.type,p=_s(u,i.pendingProps),uy(r,i,u,p,a);case 3:e:{if(et(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var g=i.memoizedState;p=g.element,mf(r,i),Dl(i,u,null,a);var S=i.memoizedState;if(u=S.cache,jr(i,vt,u),u!==g.cache&&cf(i,[vt],a,!0),Ol(),u=S.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=fy(r,i,u,a);break e}else if(u!==p){p=En(Error(s(424)),i),El(p),i=fy(r,i,u,a);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(it=An(r.firstChild),Lt=i,Ie=!0,Or=null,wn=!0,a=lg(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ns(),u===p){i=ar(r,i,a);break e}Bt(r,i,u,a)}i=i.child}return i;case 26:return Ea(r,i),r===null?(a=C0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ie||(a=i.type,r=i.pendingProps,u=Va(be.current).createElement(a),u[zt]=i,u[Wt]=r,Ht(u,a,r),At(u),i.stateNode=u):i.memoizedState=C0(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return fe(i),r===null&&Ie&&(u=i.stateNode=T0(i.type,i.pendingProps,be.current),Lt=i,wn=!0,p=it,Yr(i.type)?(Nd=p,it=An(u.firstChild)):it=p),Bt(r,i,i.pendingProps.children,a),Ea(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&Ie&&((p=u=it)&&(u=TT(u,i.type,i.pendingProps,wn),u!==null?(i.stateNode=u,Lt=i,it=An(u.firstChild),wn=!1,p=!0):p=!1),p||Dr(i)),fe(i),p=i.type,g=i.pendingProps,S=r!==null?r.memoizedProps:null,u=g.children,Td(p,g)?u=null:S!==null&&Td(p,S)&&(i.flags|=32),i.memoizedState!==null&&(p=kf(r,i,Hk,null,null,a),Ql._currentValue=p),Ea(r,i),Bt(r,i,u,a),i.child;case 6:return r===null&&Ie&&((r=a=it)&&(a=ET(a,i.pendingProps,wn),a!==null?(i.stateNode=a,Lt=i,it=null,r=!0):r=!1),r||Dr(i)),null;case 13:return dy(r,i,a);case 4:return et(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=zs(i,null,u,a):Bt(r,i,u,a),i.child;case 11:return ry(r,i,i.type,i.pendingProps,a);case 7:return Bt(r,i,i.pendingProps,a),i.child;case 8:return Bt(r,i,i.pendingProps.children,a),i.child;case 12:return Bt(r,i,i.pendingProps.children,a),i.child;case 10:return u=i.pendingProps,jr(i,i.type,u.value),Bt(r,i,u.children,a),i.child;case 9:return p=i.type._context,u=i.pendingProps.children,Os(i),p=_t(p),u=u(p),i.flags|=1,Bt(r,i,u,a),i.child;case 14:return sy(r,i,i.type,i.pendingProps,a);case 15:return iy(r,i,i.type,i.pendingProps,a);case 19:return py(r,i,a);case 31:return Kk(r,i,a);case 22:return ly(r,i,a,i.pendingProps);case 24:return Os(i),u=_t(vt),r===null?(p=df(),p===null&&(p=tt,g=uf(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=a),p=g),i.memoizedState={parent:u,cache:p},pf(i),jr(i,vt,p)):((r.lanes&a)!==0&&(mf(r,i),Dl(i,null,null,a),Ol()),p=r.memoizedState,g=i.memoizedState,p.parent!==u?(p={parent:u,cache:u},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),jr(i,vt,u)):(u=g.cache,jr(i,vt,u),u!==p.cache&&cf(i,[vt],a,!0))),Bt(r,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function cr(r){r.flags|=4}function Xf(r,i,a,u,p){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(p&335544128)===p)if(r.stateNode.complete)r.flags|=8192;else if(qy())r.flags|=8192;else throw Rs=ca,hf}else r.flags&=-16777217}function gy(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!D0(i))if(qy())r.flags|=8192;else throw Rs=ca,hf}function Ca(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Jp():536870912,r.lanes|=i,Li|=i)}function Bl(r,i){if(!Ie)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function lt(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,u=0;if(i)for(var p=r.child;p!==null;)a|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)a|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=u,r.childLanes=a,i}function Fk(r,i,a){var u=i.pendingProps;switch(rf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return lt(i),null;case 3:return a=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ir(vt),Ke(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(r===null||r.child===null)&&(ki(i)?cr(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,lf())),lt(i),null;case 26:var p=i.type,g=i.memoizedState;return r===null?(cr(i),g!==null?(lt(i),gy(i,g)):(lt(i),Xf(i,p,null,u,a))):g?g!==r.memoizedState?(cr(i),lt(i),gy(i,g)):(lt(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&cr(i),lt(i),Xf(i,p,r,u,a)),null;case 27:if(ge(i),a=be.current,p=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&cr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return lt(i),null}r=le.current,ki(i)?Jm(i):(r=T0(p,u,a),i.stateNode=r,cr(i))}return lt(i),null;case 5:if(ge(i),p=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&cr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return lt(i),null}if(g=le.current,ki(i))Jm(i);else{var S=Va(be.current);switch(g){case 1:g=S.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=S.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=S.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?S.createElement(p,{is:u.is}):S.createElement(p)}}g[zt]=i,g[Wt]=u;e:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)g.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break e;for(;S.sibling===null;){if(S.return===null||S.return===i)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=g;e:switch(Ht(g,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&cr(i)}}return lt(i),Xf(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,a),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&cr(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=be.current,ki(i)){if(r=i.stateNode,a=i.memoizedProps,u=null,p=Lt,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}r[zt]=i,r=!!(r.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||d0(r.nodeValue,a)),r||Dr(i,!0)}else r=Va(r).createTextNode(u),r[zt]=i,i.stateNode=r}return lt(i),null;case 31:if(a=i.memoizedState,r===null||r.memoizedState!==null){if(u=ki(i),a!==null){if(r===null){if(!u)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[zt]=i}else Ns(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),r=!1}else a=lf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=a),r=!0;if(!r)return i.flags&256?(pn(i),i):(pn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return lt(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=ki(i),u!==null&&u.dehydrated!==null){if(r===null){if(!p)throw Error(s(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[zt]=i}else Ns(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),p=!1}else p=lf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(pn(i),i):(pn(i),null)}return pn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=u!==null,r=r!==null&&r.memoizedState!==null,a&&(u=i.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==p&&(u.flags|=2048)),a!==r&&a&&(i.child.flags|=8192),Ca(i,i.updateQueue),lt(i),null);case 4:return Ke(),r===null&&bd(i.stateNode.containerInfo),lt(i),null;case 10:return ir(i.type),lt(i),null;case 19:if(V(yt),u=i.memoizedState,u===null)return lt(i),null;if(p=(i.flags&128)!==0,g=u.rendering,g===null)if(p)Bl(u,!1);else{if(pt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(g=ha(r),g!==null){for(i.flags|=128,Bl(u,!1),r=g.updateQueue,i.updateQueue=r,Ca(i,r),i.subtreeFlags=0,r=a,a=i.child;a!==null;)Gm(a,r),a=a.sibling;return se(yt,yt.current&1|2),Ie&&rr(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&Ae()>Da&&(i.flags|=128,p=!0,Bl(u,!1),i.lanes=4194304)}else{if(!p)if(r=ha(g),r!==null){if(i.flags|=128,p=!0,r=r.updateQueue,i.updateQueue=r,Ca(i,r),Bl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!Ie)return lt(i),null}else 2*Ae()-u.renderingStartTime>Da&&a!==536870912&&(i.flags|=128,p=!0,Bl(u,!1),i.lanes=4194304);u.isBackwards?(g.sibling=i.child,i.child=g):(r=u.last,r!==null?r.sibling=g:i.child=g,u.last=g)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Ae(),r.sibling=null,a=yt.current,se(yt,p?a&1|2:a&1),Ie&&rr(i,u.treeForkCount),r):(lt(i),null);case 22:case 23:return pn(i),xf(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(a&536870912)!==0&&(i.flags&128)===0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),a=i.updateQueue,a!==null&&Ca(i,a.retryQueue),a=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==a&&(i.flags|=2048),r!==null&&V(Ds),null;case 24:return a=null,r!==null&&(a=r.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ir(vt),lt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Jk(r,i){switch(rf(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return ir(vt),Ke(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return ge(i),null;case 31:if(i.memoizedState!==null){if(pn(i),i.alternate===null)throw Error(s(340));Ns()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(pn(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ns()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return V(yt),null;case 4:return Ke(),null;case 10:return ir(i.type),null;case 22:case 23:return pn(i),xf(),r!==null&&V(Ds),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return ir(vt),null;case 25:return null;default:return null}}function yy(r,i){switch(rf(i),i.tag){case 3:ir(vt),Ke();break;case 26:case 27:case 5:ge(i);break;case 4:Ke();break;case 31:i.memoizedState!==null&&pn(i);break;case 13:pn(i);break;case 19:V(yt);break;case 10:ir(i.type);break;case 22:case 23:pn(i),xf(),r!==null&&V(Ds);break;case 24:ir(vt)}}function Hl(r,i){try{var a=i.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var p=u.next;a=p;do{if((a.tag&r)===r){u=void 0;var g=a.create,S=a.inst;u=g(),S.destroy=u}a=a.next}while(a!==p)}}catch(T){Je(i,i.return,T)}}function Hr(r,i,a){try{var u=i.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var g=p.next;u=g;do{if((u.tag&r)===r){var S=u.inst,T=S.destroy;if(T!==void 0){S.destroy=void 0,p=i;var w=a,R=T;try{R()}catch($){Je(p,w,$)}}}u=u.next}while(u!==g)}}catch($){Je(i,i.return,$)}}function by(r){var i=r.updateQueue;if(i!==null){var a=r.stateNode;try{ag(i,a)}catch(u){Je(r,r.return,u)}}}function xy(r,i,a){a.props=_s(r.type,r.memoizedProps),a.state=r.memoizedState;try{a.componentWillUnmount()}catch(u){Je(r,i,u)}}function Ul(r,i){try{var a=r.ref;if(a!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof a=="function"?r.refCleanup=a(u):a.current=u}}catch(p){Je(r,i,p)}}function Yn(r,i){var a=r.ref,u=r.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(p){Je(r,i,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(p){Je(r,i,p)}else a.current=null}function vy(r){var i=r.type,a=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(p){Je(r,r.return,p)}}function Qf(r,i,a){try{var u=r.stateNode;yT(u,r.type,a,i),u[Wt]=i}catch(p){Je(r,r.return,p)}}function Sy(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Yr(r.type)||r.tag===4}function Zf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Sy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Yr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Wf(r,i,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(r,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(r),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=er));else if(u!==4&&(u===27&&Yr(r.type)&&(a=r.stateNode,i=null),r=r.child,r!==null))for(Wf(r,i,a),r=r.sibling;r!==null;)Wf(r,i,a),r=r.sibling}function wa(r,i,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(u!==4&&(u===27&&Yr(r.type)&&(a=r.stateNode),r=r.child,r!==null))for(wa(r,i,a),r=r.sibling;r!==null;)wa(r,i,a),r=r.sibling}function ky(r){var i=r.stateNode,a=r.memoizedProps;try{for(var u=r.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Ht(i,u,a),i[zt]=r,i[Wt]=a}catch(g){Je(r,r.return,g)}}var ur=!1,Tt=!1,ed=!1,Ty=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function Xk(r,i){if(r=r.containerInfo,Sd=Fa,r=Lm(r),Ku(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var p=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var S=0,T=-1,w=-1,R=0,$=0,F=r,L=null;t:for(;;){for(var H;F!==a||p!==0&&F.nodeType!==3||(T=S+p),F!==g||u!==0&&F.nodeType!==3||(w=S+u),F.nodeType===3&&(S+=F.nodeValue.length),(H=F.firstChild)!==null;)L=F,F=H;for(;;){if(F===r)break t;if(L===a&&++R===p&&(T=S),L===g&&++$===u&&(w=S),(H=F.nextSibling)!==null)break;F=L,L=F.parentNode}F=H}a=T===-1||w===-1?null:{start:T,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(kd={focusedElem:r,selectionRange:a},Fa=!1,Ot=i;Ot!==null;)if(i=Ot,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Ot=r;else for(;Ot!==null;){switch(i=Ot,g=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(a=0;a<r.length;a++)p=r[a],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,a=i,p=g.memoizedProps,g=g.memoizedState,u=a.stateNode;try{var ae=_s(a.type,p);r=u.getSnapshotBeforeUpdate(ae,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(Se){Je(a,a.return,Se)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,a=r.nodeType,a===9)Md(r);else if(a===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Md(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Ot=r;break}Ot=i.return}}function Ey(r,i,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:dr(r,a),u&4&&Hl(5,a);break;case 1:if(dr(r,a),u&4)if(r=a.stateNode,i===null)try{r.componentDidMount()}catch(S){Je(a,a.return,S)}else{var p=_s(a.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(p,i,r.__reactInternalSnapshotBeforeUpdate)}catch(S){Je(a,a.return,S)}}u&64&&by(a),u&512&&Ul(a,a.return);break;case 3:if(dr(r,a),u&64&&(r=a.updateQueue,r!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{ag(r,i)}catch(S){Je(a,a.return,S)}}break;case 27:i===null&&u&4&&ky(a);case 26:case 5:dr(r,a),i===null&&u&4&&vy(a),u&512&&Ul(a,a.return);break;case 12:dr(r,a);break;case 31:dr(r,a),u&4&&wy(r,a);break;case 13:dr(r,a),u&4&&Ny(r,a),u&64&&(r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(a=iT.bind(null,a),MT(r,a))));break;case 22:if(u=a.memoizedState!==null||ur,!u){i=i!==null&&i.memoizedState!==null||Tt,p=ur;var g=Tt;ur=u,(Tt=i)&&!g?hr(r,a,(a.subtreeFlags&8772)!==0):dr(r,a),ur=p,Tt=g}break;case 30:break;default:dr(r,a)}}function My(r){var i=r.alternate;i!==null&&(r.alternate=null,My(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Au(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var at=null,tn=!1;function fr(r,i,a){for(a=a.child;a!==null;)Cy(r,i,a),a=a.sibling}function Cy(r,i,a){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(cl,a)}catch{}switch(a.tag){case 26:Tt||Yn(a,i),fr(r,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Tt||Yn(a,i);var u=at,p=tn;Yr(a.type)&&(at=a.stateNode,tn=!1),fr(r,i,a),Fl(a.stateNode),at=u,tn=p;break;case 5:Tt||Yn(a,i);case 6:if(u=at,p=tn,at=null,fr(r,i,a),at=u,tn=p,at!==null)if(tn)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(a.stateNode)}catch(g){Je(a,i,g)}else try{at.removeChild(a.stateNode)}catch(g){Je(a,i,g)}break;case 18:at!==null&&(tn?(r=at,b0(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.stateNode),$i(r)):b0(at,a.stateNode));break;case 4:u=at,p=tn,at=a.stateNode.containerInfo,tn=!0,fr(r,i,a),at=u,tn=p;break;case 0:case 11:case 14:case 15:Hr(2,a,i),Tt||Hr(4,a,i),fr(r,i,a);break;case 1:Tt||(Yn(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"&&xy(a,i,u)),fr(r,i,a);break;case 21:fr(r,i,a);break;case 22:Tt=(u=Tt)||a.memoizedState!==null,fr(r,i,a),Tt=u;break;default:fr(r,i,a)}}function wy(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{$i(r)}catch(a){Je(i,i.return,a)}}}function Ny(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{$i(r)}catch(a){Je(i,i.return,a)}}function Qk(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Ty),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Ty),i;default:throw Error(s(435,r.tag))}}function Na(r,i){var a=Qk(r);i.forEach(function(u){if(!a.has(u)){a.add(u);var p=lT.bind(null,r,u);u.then(p,p)}})}function nn(r,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var p=a[u],g=r,S=i,T=S;e:for(;T!==null;){switch(T.tag){case 27:if(Yr(T.type)){at=T.stateNode,tn=!1;break e}break;case 5:at=T.stateNode,tn=!1;break e;case 3:case 4:at=T.stateNode.containerInfo,tn=!0;break e}T=T.return}if(at===null)throw Error(s(160));Cy(g,S,p),at=null,tn=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Ay(i,r),i=i.sibling}var Hn=null;function Ay(r,i){var a=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:nn(i,r),rn(r),u&4&&(Hr(3,r,r.return),Hl(3,r),Hr(5,r,r.return));break;case 1:nn(i,r),rn(r),u&512&&(Tt||a===null||Yn(a,a.return)),u&64&&ur&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(a=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var p=Hn;if(nn(i,r),rn(r),u&512&&(Tt||a===null||Yn(a,a.return)),u&4){var g=a!==null?a.memoizedState:null;if(u=r.memoizedState,a===null)if(u===null)if(r.stateNode===null){e:{u=r.type,a=r.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":g=p.getElementsByTagName("title")[0],(!g||g[dl]||g[zt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(u),p.head.insertBefore(g,p.querySelector("head > title"))),Ht(g,u,a),g[zt]=r,At(g),u=g;break e;case"link":var S=A0("link","href",p).get(u+(a.href||""));if(S){for(var T=0;T<S.length;T++)if(g=S[T],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(T,1);break t}}g=p.createElement(u),Ht(g,u,a),p.head.appendChild(g);break;case"meta":if(S=A0("meta","content",p).get(u+(a.content||""))){for(T=0;T<S.length;T++)if(g=S[T],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(T,1);break t}}g=p.createElement(u),Ht(g,u,a),p.head.appendChild(g);break;default:throw Error(s(468,u))}g[zt]=r,At(g),u=g}r.stateNode=u}else O0(p,r.type,r.stateNode);else r.stateNode=N0(p,u,r.memoizedProps);else g!==u?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,u===null?O0(p,r.type,r.stateNode):N0(p,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Qf(r,r.memoizedProps,a.memoizedProps)}break;case 27:nn(i,r),rn(r),u&512&&(Tt||a===null||Yn(a,a.return)),a!==null&&u&4&&Qf(r,r.memoizedProps,a.memoizedProps);break;case 5:if(nn(i,r),rn(r),u&512&&(Tt||a===null||Yn(a,a.return)),r.flags&32){p=r.stateNode;try{di(p,"")}catch(ae){Je(r,r.return,ae)}}u&4&&r.stateNode!=null&&(p=r.memoizedProps,Qf(r,p,a!==null?a.memoizedProps:p)),u&1024&&(ed=!0);break;case 6:if(nn(i,r),rn(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,a=r.stateNode;try{a.nodeValue=u}catch(ae){Je(r,r.return,ae)}}break;case 3:if(Ga=null,p=Hn,Hn=qa(i.containerInfo),nn(i,r),Hn=p,rn(r),u&4&&a!==null&&a.memoizedState.isDehydrated)try{$i(i.containerInfo)}catch(ae){Je(r,r.return,ae)}ed&&(ed=!1,Oy(r));break;case 4:u=Hn,Hn=qa(r.stateNode.containerInfo),nn(i,r),rn(r),Hn=u;break;case 12:nn(i,r),rn(r);break;case 31:nn(i,r),rn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Na(r,u)));break;case 13:nn(i,r),rn(r),r.child.flags&8192&&r.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Oa=Ae()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Na(r,u)));break;case 22:p=r.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,R=ur,$=Tt;if(ur=R||p,Tt=$||w,nn(i,r),Tt=$,ur=R,rn(r),u&8192)e:for(i=r.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(a===null||w||ur||Tt||Bs(r)),a=null,i=r;;){if(i.tag===5||i.tag===26){if(a===null){w=a=i;try{if(g=w.stateNode,p)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{T=w.stateNode;var F=w.memoizedProps.style,L=F!=null&&F.hasOwnProperty("display")?F.display:null;T.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(ae){Je(w,w.return,ae)}}}else if(i.tag===6){if(a===null){w=i;try{w.stateNode.nodeValue=p?"":w.memoizedProps}catch(ae){Je(w,w.return,ae)}}}else if(i.tag===18){if(a===null){w=i;try{var H=w.stateNode;p?x0(H,!0):x0(w.stateNode,!1)}catch(ae){Je(w,w.return,ae)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Na(r,a))));break;case 19:nn(i,r),rn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Na(r,u)));break;case 30:break;case 21:break;default:nn(i,r),rn(r)}}function rn(r){var i=r.flags;if(i&2){try{for(var a,u=r.return;u!==null;){if(Sy(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var p=a.stateNode,g=Zf(r);wa(r,g,p);break;case 5:var S=a.stateNode;a.flags&32&&(di(S,""),a.flags&=-33);var T=Zf(r);wa(r,T,S);break;case 3:case 4:var w=a.stateNode.containerInfo,R=Zf(r);Wf(r,R,w);break;default:throw Error(s(161))}}catch($){Je(r,r.return,$)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Oy(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;Oy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function dr(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ey(r,i.alternate,i),i=i.sibling}function Bs(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Hr(4,i,i.return),Bs(i);break;case 1:Yn(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&xy(i,i.return,a),Bs(i);break;case 27:Fl(i.stateNode);case 26:case 5:Yn(i,i.return),Bs(i);break;case 22:i.memoizedState===null&&Bs(i);break;case 30:Bs(i);break;default:Bs(i)}r=r.sibling}}function hr(r,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,p=r,g=i,S=g.flags;switch(g.tag){case 0:case 11:case 15:hr(p,g,a),Hl(4,g);break;case 1:if(hr(p,g,a),u=g,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(R){Je(u,u.return,R)}if(u=g,p=u.updateQueue,p!==null){var T=u.stateNode;try{var w=p.shared.hiddenCallbacks;if(w!==null)for(p.shared.hiddenCallbacks=null,p=0;p<w.length;p++)og(w[p],T)}catch(R){Je(u,u.return,R)}}a&&S&64&&by(g),Ul(g,g.return);break;case 27:ky(g);case 26:case 5:hr(p,g,a),a&&u===null&&S&4&&vy(g),Ul(g,g.return);break;case 12:hr(p,g,a);break;case 31:hr(p,g,a),a&&S&4&&wy(p,g);break;case 13:hr(p,g,a),a&&S&4&&Ny(p,g);break;case 22:g.memoizedState===null&&hr(p,g,a),Ul(g,g.return);break;case 30:break;default:hr(p,g,a)}i=i.sibling}}function td(r,i){var a=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==a&&(r!=null&&r.refCount++,a!=null&&Ml(a))}function nd(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Ml(r))}function Un(r,i,a,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Dy(r,i,a,u),i=i.sibling}function Dy(r,i,a,u){var p=i.flags;switch(i.tag){case 0:case 11:case 15:Un(r,i,a,u),p&2048&&Hl(9,i);break;case 1:Un(r,i,a,u);break;case 3:Un(r,i,a,u),p&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Ml(r)));break;case 12:if(p&2048){Un(r,i,a,u),r=i.stateNode;try{var g=i.memoizedProps,S=g.id,T=g.onPostCommit;typeof T=="function"&&T(S,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(w){Je(i,i.return,w)}}else Un(r,i,a,u);break;case 31:Un(r,i,a,u);break;case 13:Un(r,i,a,u);break;case 23:break;case 22:g=i.stateNode,S=i.alternate,i.memoizedState!==null?g._visibility&2?Un(r,i,a,u):Il(r,i):g._visibility&2?Un(r,i,a,u):(g._visibility|=2,ji(r,i,a,u,(i.subtreeFlags&10256)!==0||!1)),p&2048&&td(S,i);break;case 24:Un(r,i,a,u),p&2048&&nd(i.alternate,i);break;default:Un(r,i,a,u)}}function ji(r,i,a,u,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=r,S=i,T=a,w=u,R=S.flags;switch(S.tag){case 0:case 11:case 15:ji(g,S,T,w,p),Hl(8,S);break;case 23:break;case 22:var $=S.stateNode;S.memoizedState!==null?$._visibility&2?ji(g,S,T,w,p):Il(g,S):($._visibility|=2,ji(g,S,T,w,p)),p&&R&2048&&td(S.alternate,S);break;case 24:ji(g,S,T,w,p),p&&R&2048&&nd(S.alternate,S);break;default:ji(g,S,T,w,p)}i=i.sibling}}function Il(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=r,u=i,p=u.flags;switch(u.tag){case 22:Il(a,u),p&2048&&td(u.alternate,u);break;case 24:Il(a,u),p&2048&&nd(u.alternate,u);break;default:Il(a,u)}i=i.sibling}}var Vl=8192;function Ri(r,i,a){if(r.subtreeFlags&Vl)for(r=r.child;r!==null;)jy(r,i,a),r=r.sibling}function jy(r,i,a){switch(r.tag){case 26:Ri(r,i,a),r.flags&Vl&&r.memoizedState!==null&&BT(a,Hn,r.memoizedState,r.memoizedProps);break;case 5:Ri(r,i,a);break;case 3:case 4:var u=Hn;Hn=qa(r.stateNode.containerInfo),Ri(r,i,a),Hn=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Vl,Vl=16777216,Ri(r,i,a),Vl=u):Ri(r,i,a));break;default:Ri(r,i,a)}}function Ry(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function ql(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];Ot=u,Ly(u,r)}Ry(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zy(r),r=r.sibling}function zy(r){switch(r.tag){case 0:case 11:case 15:ql(r),r.flags&2048&&Hr(9,r,r.return);break;case 3:ql(r);break;case 12:ql(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Aa(r)):ql(r);break;default:ql(r)}}function Aa(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];Ot=u,Ly(u,r)}Ry(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Hr(8,i,i.return),Aa(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Aa(i));break;default:Aa(i)}r=r.sibling}}function Ly(r,i){for(;Ot!==null;){var a=Ot;switch(a.tag){case 0:case 11:case 15:Hr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ml(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ot=u;else e:for(a=r;Ot!==null;){u=Ot;var p=u.sibling,g=u.return;if(My(u),u===a){Ot=null;break e}if(p!==null){p.return=g,Ot=p;break e}Ot=g}}}var Zk={getCacheForType:function(r){var i=_t(vt),a=i.data.get(r);return a===void 0&&(a=r(),i.data.set(r,a)),a},cacheSignal:function(){return _t(vt).controller.signal}},Wk=typeof WeakMap=="function"?WeakMap:Map,Pe=0,tt=null,ze=null,Be=0,Fe=0,mn=null,Ur=!1,zi=!1,rd=!1,pr=0,pt=0,Ir=0,Hs=0,sd=0,gn=0,Li=0,$l=null,sn=null,id=!1,Oa=0,_y=0,Da=1/0,ja=null,Vr=null,wt=0,qr=null,_i=null,mr=0,ld=0,od=null,By=null,Gl=0,ad=null;function yn(){return(Pe&2)!==0&&Be!==0?Be&-Be:U.T!==null?pd():Wp()}function Hy(){if(gn===0)if((Be&536870912)===0||Ie){var r=Io;Io<<=1,(Io&3932160)===0&&(Io=262144),gn=r}else gn=536870912;return r=hn.current,r!==null&&(r.flags|=32),gn}function ln(r,i,a){(r===tt&&(Fe===2||Fe===9)||r.cancelPendingCommit!==null)&&(Bi(r,0),$r(r,Be,gn,!1)),fl(r,a),((Pe&2)===0||r!==tt)&&(r===tt&&((Pe&2)===0&&(Hs|=a),pt===4&&$r(r,Be,gn,!1)),Kn(r))}function Uy(r,i,a){if((Pe&6)!==0)throw Error(s(327));var u=!a&&(i&127)===0&&(i&r.expiredLanes)===0||ul(r,i),p=u?nT(r,i):ud(r,i,!0),g=u;do{if(p===0){zi&&!u&&$r(r,i,0,!1);break}else{if(a=r.current.alternate,g&&!eT(a)){p=ud(r,i,!1),g=!1;continue}if(p===2){if(g=i,r.errorRecoveryDisabledLanes&g)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var T=r;p=$l;var w=T.current.memoizedState.isDehydrated;if(w&&(Bi(T,S).flags|=256),S=ud(T,S,!1),S!==2){if(rd&&!w){T.errorRecoveryDisabledLanes|=g,Hs|=g,p=4;break e}g=sn,sn=p,g!==null&&(sn===null?sn=g:sn.push.apply(sn,g))}p=S}if(g=!1,p!==2)continue}}if(p===1){Bi(r,0),$r(r,i,0,!0);break}e:{switch(u=r,g=p,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:$r(u,i,gn,!Ur);break e;case 2:sn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(p=Oa+300-Ae(),10<p)){if($r(u,i,gn,!Ur),qo(u,0,!0)!==0)break e;mr=i,u.timeoutHandle=g0(Iy.bind(null,u,a,sn,ja,id,i,gn,Hs,Li,Ur,g,"Throttled",-0,0),p);break e}Iy(u,a,sn,ja,id,i,gn,Hs,Li,Ur,g,null,-0,0)}}break}while(!0);Kn(r)}function Iy(r,i,a,u,p,g,S,T,w,R,$,F,L,H){if(r.timeoutHandle=-1,F=i.subtreeFlags,F&8192||(F&16785408)===16785408){F={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:er},jy(i,g,F);var ae=(g&62914560)===g?Oa-Ae():(g&4194048)===g?_y-Ae():0;if(ae=HT(F,ae),ae!==null){mr=g,r.cancelPendingCommit=ae(Fy.bind(null,r,i,g,a,u,p,S,T,w,$,F,null,L,H)),$r(r,g,S,!R);return}}Fy(r,i,g,a,u,p,S,T,w)}function eT(r){for(var i=r;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var p=a[u],g=p.getSnapshot;p=p.value;try{if(!fn(g(),p))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $r(r,i,a,u){i&=~sd,i&=~Hs,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var p=i;0<p;){var g=31-un(p),S=1<<g;u[g]=-1,p&=~S}a!==0&&Xp(r,a,i)}function Ra(){return(Pe&6)===0?(Yl(0),!1):!0}function cd(){if(ze!==null){if(Fe===0)var r=ze.return;else r=ze,sr=As=null,Mf(r),wi=null,wl=0,r=ze;for(;r!==null;)yy(r.alternate,r),r=r.return;ze=null}}function Bi(r,i){var a=r.timeoutHandle;a!==-1&&(r.timeoutHandle=-1,vT(a)),a=r.cancelPendingCommit,a!==null&&(r.cancelPendingCommit=null,a()),mr=0,cd(),tt=r,ze=a=nr(r.current,null),Be=i,Fe=0,mn=null,Ur=!1,zi=ul(r,i),rd=!1,Li=gn=sd=Hs=Ir=pt=0,sn=$l=null,id=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var p=31-un(u),g=1<<p;i|=r[p],u&=~g}return pr=i,ea(),a}function Vy(r,i){we=null,U.H=Ll,i===Ci||i===aa?(i=rg(),Fe=3):i===hf?(i=rg(),Fe=4):Fe=i===Vf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,mn=i,ze===null&&(pt=1,ka(r,En(i,r.current)))}function qy(){var r=hn.current;return r===null?!0:(Be&4194048)===Be?Nn===null:(Be&62914560)===Be||(Be&536870912)!==0?r===Nn:!1}function $y(){var r=U.H;return U.H=Ll,r===null?Ll:r}function Gy(){var r=U.A;return U.A=Zk,r}function za(){pt=4,Ur||(Be&4194048)!==Be&&hn.current!==null||(zi=!0),(Ir&134217727)===0&&(Hs&134217727)===0||tt===null||$r(tt,Be,gn,!1)}function ud(r,i,a){var u=Pe;Pe|=2;var p=$y(),g=Gy();(tt!==r||Be!==i)&&(ja=null,Bi(r,i)),i=!1;var S=pt;e:do try{if(Fe!==0&&ze!==null){var T=ze,w=mn;switch(Fe){case 8:cd(),S=6;break e;case 3:case 2:case 9:case 6:hn.current===null&&(i=!0);var R=Fe;if(Fe=0,mn=null,Hi(r,T,w,R),a&&zi){S=0;break e}break;default:R=Fe,Fe=0,mn=null,Hi(r,T,w,R)}}tT(),S=pt;break}catch($){Vy(r,$)}while(!0);return i&&r.shellSuspendCounter++,sr=As=null,Pe=u,U.H=p,U.A=g,ze===null&&(tt=null,Be=0,ea()),S}function tT(){for(;ze!==null;)Yy(ze)}function nT(r,i){var a=Pe;Pe|=2;var u=$y(),p=Gy();tt!==r||Be!==i?(ja=null,Da=Ae()+500,Bi(r,i)):zi=ul(r,i);e:do try{if(Fe!==0&&ze!==null){i=ze;var g=mn;t:switch(Fe){case 1:Fe=0,mn=null,Hi(r,i,g,1);break;case 2:case 9:if(tg(g)){Fe=0,mn=null,Ky(i);break}i=function(){Fe!==2&&Fe!==9||tt!==r||(Fe=7),Kn(r)},g.then(i,i);break e;case 3:Fe=7;break e;case 4:Fe=5;break e;case 7:tg(g)?(Fe=0,mn=null,Ky(i)):(Fe=0,mn=null,Hi(r,i,g,7));break;case 5:var S=null;switch(ze.tag){case 26:S=ze.memoizedState;case 5:case 27:var T=ze;if(S?D0(S):T.stateNode.complete){Fe=0,mn=null;var w=T.sibling;if(w!==null)ze=w;else{var R=T.return;R!==null?(ze=R,La(R)):ze=null}break t}}Fe=0,mn=null,Hi(r,i,g,5);break;case 6:Fe=0,mn=null,Hi(r,i,g,6);break;case 8:cd(),pt=6;break e;default:throw Error(s(462))}}rT();break}catch($){Vy(r,$)}while(!0);return sr=As=null,U.H=u,U.A=p,Pe=a,ze!==null?0:(tt=null,Be=0,ea(),pt)}function rT(){for(;ze!==null&&!he();)Yy(ze)}function Yy(r){var i=my(r.alternate,r,pr);r.memoizedProps=r.pendingProps,i===null?La(r):ze=i}function Ky(r){var i=r,a=i.alternate;switch(i.tag){case 15:case 0:i=cy(a,i,i.pendingProps,i.type,void 0,Be);break;case 11:i=cy(a,i,i.pendingProps,i.type.render,i.ref,Be);break;case 5:Mf(i);default:yy(a,i),i=ze=Gm(i,pr),i=my(a,i,pr)}r.memoizedProps=r.pendingProps,i===null?La(r):ze=i}function Hi(r,i,a,u){sr=As=null,Mf(i),wi=null,wl=0;var p=i.return;try{if(Yk(r,p,i,a,Be)){pt=1,ka(r,En(a,r.current)),ze=null;return}}catch(g){if(p!==null)throw ze=p,g;pt=1,ka(r,En(a,r.current)),ze=null;return}i.flags&32768?(Ie||u===1?r=!0:zi||(Be&536870912)!==0?r=!1:(Ur=r=!0,(u===2||u===9||u===3||u===6)&&(u=hn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Py(i,r)):La(i)}function La(r){var i=r;do{if((i.flags&32768)!==0){Py(i,Ur);return}r=i.return;var a=Fk(i.alternate,i,pr);if(a!==null){ze=a;return}if(i=i.sibling,i!==null){ze=i;return}ze=i=r}while(i!==null);pt===0&&(pt=5)}function Py(r,i){do{var a=Jk(r.alternate,r);if(a!==null){a.flags&=32767,ze=a;return}if(a=r.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(r=r.sibling,r!==null)){ze=r;return}ze=r=a}while(r!==null);pt=6,ze=null}function Fy(r,i,a,u,p,g,S,T,w){r.cancelPendingCommit=null;do _a();while(wt!==0);if((Pe&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=Qu,_S(r,a,g,S,T,w),r===tt&&(ze=tt=null,Be=0),_i=i,qr=r,mr=a,ld=g,od=p,By=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,oT(Gt,function(){return Wy(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=U.T,U.T=null,p=Z.p,Z.p=2,S=Pe,Pe|=4;try{Xk(r,i,a)}finally{Pe=S,Z.p=p,U.T=u}}wt=1,Jy(),Xy(),Qy()}}function Jy(){if(wt===1){wt=0;var r=qr,i=_i,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var u=Z.p;Z.p=2;var p=Pe;Pe|=4;try{Ay(i,r);var g=kd,S=Lm(r.containerInfo),T=g.focusedElem,w=g.selectionRange;if(S!==T&&T&&T.ownerDocument&&zm(T.ownerDocument.documentElement,T)){if(w!==null&&Ku(T)){var R=w.start,$=w.end;if($===void 0&&($=R),"selectionStart"in T)T.selectionStart=R,T.selectionEnd=Math.min($,T.value.length);else{var F=T.ownerDocument||document,L=F&&F.defaultView||window;if(L.getSelection){var H=L.getSelection(),ae=T.textContent.length,Se=Math.min(w.start,ae),We=w.end===void 0?Se:Math.min(w.end,ae);!H.extend&&Se>We&&(S=We,We=Se,Se=S);var D=Rm(T,Se),A=Rm(T,We);if(D&&A&&(H.rangeCount!==1||H.anchorNode!==D.node||H.anchorOffset!==D.offset||H.focusNode!==A.node||H.focusOffset!==A.offset)){var j=F.createRange();j.setStart(D.node,D.offset),H.removeAllRanges(),Se>We?(H.addRange(j),H.extend(A.node,A.offset)):(j.setEnd(A.node,A.offset),H.addRange(j))}}}}for(F=[],H=T;H=H.parentNode;)H.nodeType===1&&F.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<F.length;T++){var Y=F[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Fa=!!Sd,kd=Sd=null}finally{Pe=p,Z.p=u,U.T=a}}r.current=i,wt=2}}function Xy(){if(wt===2){wt=0;var r=qr,i=_i,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var u=Z.p;Z.p=2;var p=Pe;Pe|=4;try{Ey(r,i.alternate,i)}finally{Pe=p,Z.p=u,U.T=a}}wt=3}}function Qy(){if(wt===4||wt===3){wt=0,Ne();var r=qr,i=_i,a=mr,u=By;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?wt=5:(wt=0,_i=qr=null,Zy(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(Vr=null),wu(a),i=i.stateNode,cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(cl,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=U.T,p=Z.p,Z.p=2,U.T=null;try{for(var g=r.onRecoverableError,S=0;S<u.length;S++){var T=u[S];g(T.value,{componentStack:T.stack})}}finally{U.T=i,Z.p=p}}(mr&3)!==0&&_a(),Kn(r),p=r.pendingLanes,(a&261930)!==0&&(p&42)!==0?r===ad?Gl++:(Gl=0,ad=r):Gl=0,Yl(0)}}function Zy(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Ml(i)))}function _a(){return Jy(),Xy(),Qy(),Wy()}function Wy(){if(wt!==5)return!1;var r=qr,i=ld;ld=0;var a=wu(mr),u=U.T,p=Z.p;try{Z.p=32>a?32:a,U.T=null,a=od,od=null;var g=qr,S=mr;if(wt=0,_i=qr=null,mr=0,(Pe&6)!==0)throw Error(s(331));var T=Pe;if(Pe|=4,zy(g.current),Dy(g,g.current,S,a),Pe=T,Yl(0,!1),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(cl,g)}catch{}return!0}finally{Z.p=p,U.T=u,Zy(r,i)}}function e0(r,i,a){i=En(a,i),i=If(r.stateNode,i,2),r=Lr(r,i,2),r!==null&&(fl(r,2),Kn(r))}function Je(r,i,a){if(r.tag===3)e0(r,r,a);else for(;i!==null;){if(i.tag===3){e0(i,r,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Vr===null||!Vr.has(u))){r=En(a,r),a=ty(2),u=Lr(i,a,2),u!==null&&(ny(a,u,i,r),fl(u,2),Kn(u));break}}i=i.return}}function fd(r,i,a){var u=r.pingCache;if(u===null){u=r.pingCache=new Wk;var p=new Set;u.set(i,p)}else p=u.get(i),p===void 0&&(p=new Set,u.set(i,p));p.has(a)||(rd=!0,p.add(a),r=sT.bind(null,r,i,a),i.then(r,r))}function sT(r,i,a){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&a,r.warmLanes&=~a,tt===r&&(Be&a)===a&&(pt===4||pt===3&&(Be&62914560)===Be&&300>Ae()-Oa?(Pe&2)===0&&Bi(r,0):sd|=a,Li===Be&&(Li=0)),Kn(r)}function t0(r,i){i===0&&(i=Jp()),r=Cs(r,i),r!==null&&(fl(r,i),Kn(r))}function iT(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),t0(r,a)}function lT(r,i){var a=0;switch(r.tag){case 31:case 13:var u=r.stateNode,p=r.memoizedState;p!==null&&(a=p.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),t0(r,a)}function oT(r,i){return re(r,i)}var Ba=null,Ui=null,dd=!1,Ha=!1,hd=!1,Gr=0;function Kn(r){r!==Ui&&r.next===null&&(Ui===null?Ba=Ui=r:Ui=Ui.next=r),Ha=!0,dd||(dd=!0,cT())}function Yl(r,i){if(!hd&&Ha){hd=!0;do for(var a=!1,u=Ba;u!==null;){if(r!==0){var p=u.pendingLanes;if(p===0)var g=0;else{var S=u.suspendedLanes,T=u.pingedLanes;g=(1<<31-un(42|r)+1)-1,g&=p&~(S&~T),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,i0(u,g))}else g=Be,g=qo(u,u===tt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||ul(u,g)||(a=!0,i0(u,g));u=u.next}while(a);hd=!1}}function aT(){n0()}function n0(){Ha=dd=!1;var r=0;Gr!==0&&xT()&&(r=Gr);for(var i=Ae(),a=null,u=Ba;u!==null;){var p=u.next,g=r0(u,i);g===0?(u.next=null,a===null?Ba=p:a.next=p,p===null&&(Ui=a)):(a=u,(r!==0||(g&3)!==0)&&(Ha=!0)),u=p}wt!==0&&wt!==5||Yl(r),Gr!==0&&(Gr=0)}function r0(r,i){for(var a=r.suspendedLanes,u=r.pingedLanes,p=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var S=31-un(g),T=1<<S,w=p[S];w===-1?((T&a)===0||(T&u)!==0)&&(p[S]=LS(T,i)):w<=i&&(r.expiredLanes|=T),g&=~T}if(i=tt,a=Be,a=qo(r,r===i?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,a===0||r===i&&(Fe===2||Fe===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&te(u),r.callbackNode=null,r.callbackPriority=0;if((a&3)===0||ul(r,a)){if(i=a&-a,i===r.callbackPriority)return i;switch(u!==null&&te(u),wu(a)){case 2:case 8:a=qn;break;case 32:a=Gt;break;case 268435456:a=Fp;break;default:a=Gt}return u=s0.bind(null,r),a=re(a,u),r.callbackPriority=i,r.callbackNode=a,i}return u!==null&&u!==null&&te(u),r.callbackPriority=2,r.callbackNode=null,2}function s0(r,i){if(wt!==0&&wt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var a=r.callbackNode;if(_a()&&r.callbackNode!==a)return null;var u=Be;return u=qo(r,r===tt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(Uy(r,u,i),r0(r,Ae()),r.callbackNode!=null&&r.callbackNode===a?s0.bind(null,r):null)}function i0(r,i){if(_a())return null;Uy(r,i,!0)}function cT(){ST(function(){(Pe&6)!==0?re($t,aT):n0()})}function pd(){if(Gr===0){var r=Ei;r===0&&(r=Uo,Uo<<=1,(Uo&261888)===0&&(Uo=256)),Gr=r}return Gr}function l0(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ko(""+r)}function o0(r,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,r.id&&a.setAttribute("form",r.id),i.parentNode.insertBefore(a,i),r=new FormData(r),a.parentNode.removeChild(a),r}function uT(r,i,a,u,p){if(i==="submit"&&a&&a.stateNode===p){var g=l0((p[Wt]||null).action),S=u.submitter;S&&(i=(i=S[Wt]||null)?l0(i.formAction):S.getAttribute("formAction"),i!==null&&(g=i,S=null));var T=new Xo("action","action",null,u,p);r.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Gr!==0){var w=S?o0(p,S):new FormData(p);zf(a,{pending:!0,data:w,method:p.method,action:g},null,w)}}else typeof g=="function"&&(T.preventDefault(),w=S?o0(p,S):new FormData(p),zf(a,{pending:!0,data:w,method:p.method,action:g},g,w))},currentTarget:p}]})}}for(var md=0;md<Xu.length;md++){var gd=Xu[md],fT=gd.toLowerCase(),dT=gd[0].toUpperCase()+gd.slice(1);Bn(fT,"on"+dT)}Bn(Hm,"onAnimationEnd"),Bn(Um,"onAnimationIteration"),Bn(Im,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(Nk,"onTransitionRun"),Bn(Ak,"onTransitionStart"),Bn(Ok,"onTransitionCancel"),Bn(Vm,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ks("onBeforeInput",["compositionend","keypress","textInput","paste"]),ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kl));function a0(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var u=r[a],p=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var S=u.length-1;0<=S;S--){var T=u[S],w=T.instance,R=T.currentTarget;if(T=T.listener,w!==g&&p.isPropagationStopped())break e;g=T,p.currentTarget=R;try{g(p)}catch($){Wo($)}p.currentTarget=null,g=w}else for(S=0;S<u.length;S++){if(T=u[S],w=T.instance,R=T.currentTarget,T=T.listener,w!==g&&p.isPropagationStopped())break e;g=T,p.currentTarget=R;try{g(p)}catch($){Wo($)}p.currentTarget=null,g=w}}}}function Le(r,i){var a=i[Nu];a===void 0&&(a=i[Nu]=new Set);var u=r+"__bubble";a.has(u)||(c0(i,r,2,!1),a.add(u))}function yd(r,i,a){var u=0;i&&(u|=4),c0(a,r,u,i)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function bd(r){if(!r[Ua]){r[Ua]=!0,nm.forEach(function(a){a!=="selectionchange"&&(hT.has(a)||yd(a,!1,r),yd(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Ua]||(i[Ua]=!0,yd("selectionchange",!1,i))}}function c0(r,i,a,u){switch(H0(i)){case 2:var p=VT;break;case 8:p=qT;break;default:p=Rd}a=p.bind(null,i,a,r),p=void 0,!Bu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),u?p!==void 0?r.addEventListener(i,a,{capture:!0,passive:p}):r.addEventListener(i,a,!0):p!==void 0?r.addEventListener(i,a,{passive:p}):r.addEventListener(i,a,!1)}function xd(r,i,a,u,p){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var T=u.stateNode.containerInfo;if(T===p)break;if(S===4)for(S=u.return;S!==null;){var w=S.tag;if((w===3||w===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;T!==null;){if(S=oi(T),S===null)return;if(w=S.tag,w===5||w===6||w===26||w===27){u=g=S;continue e}T=T.parentNode}}u=u.return}pm(function(){var R=g,$=Lu(a),F=[];e:{var L=qm.get(r);if(L!==void 0){var H=Xo,ae=r;switch(r){case"keypress":if(Fo(a)===0)break e;case"keydown":case"keyup":H=lk;break;case"focusin":ae="focus",H=Vu;break;case"focusout":ae="blur",H=Vu;break;case"beforeblur":case"afterblur":H=Vu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=ym;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=FS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=ck;break;case Hm:case Um:case Im:H=QS;break;case Vm:H=fk;break;case"scroll":case"scrollend":H=KS;break;case"wheel":H=hk;break;case"copy":case"cut":case"paste":H=WS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=xm;break;case"toggle":case"beforetoggle":H=mk}var Se=(i&4)!==0,We=!Se&&(r==="scroll"||r==="scrollend"),D=Se?L!==null?L+"Capture":null:L;Se=[];for(var A=R,j;A!==null;){var Y=A;if(j=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||j===null||D===null||(Y=pl(A,D),Y!=null&&Se.push(Pl(A,Y,j))),We)break;A=A.return}0<Se.length&&(L=new H(L,ae,null,a,$),F.push({event:L,listeners:Se}))}}if((i&7)===0){e:{if(L=r==="mouseover"||r==="pointerover",H=r==="mouseout"||r==="pointerout",L&&a!==zu&&(ae=a.relatedTarget||a.fromElement)&&(oi(ae)||ae[li]))break e;if((H||L)&&(L=$.window===$?$:(L=$.ownerDocument)?L.defaultView||L.parentWindow:window,H?(ae=a.relatedTarget||a.toElement,H=R,ae=ae?oi(ae):null,ae!==null&&(We=o(ae),Se=ae.tag,ae!==We||Se!==5&&Se!==27&&Se!==6)&&(ae=null)):(H=null,ae=R),H!==ae)){if(Se=ym,Y="onMouseLeave",D="onMouseEnter",A="mouse",(r==="pointerout"||r==="pointerover")&&(Se=xm,Y="onPointerLeave",D="onPointerEnter",A="pointer"),We=H==null?L:hl(H),j=ae==null?L:hl(ae),L=new Se(Y,A+"leave",H,a,$),L.target=We,L.relatedTarget=j,Y=null,oi($)===R&&(Se=new Se(D,A+"enter",ae,a,$),Se.target=j,Se.relatedTarget=We,Y=Se),We=Y,H&&ae)t:{for(Se=pT,D=H,A=ae,j=0,Y=D;Y;Y=Se(Y))j++;Y=0;for(var ye=A;ye;ye=Se(ye))Y++;for(;0<j-Y;)D=Se(D),j--;for(;0<Y-j;)A=Se(A),Y--;for(;j--;){if(D===A||A!==null&&D===A.alternate){Se=D;break t}D=Se(D),A=Se(A)}Se=null}else Se=null;H!==null&&u0(F,L,H,Se,!1),ae!==null&&We!==null&&u0(F,We,ae,Se,!0)}}e:{if(L=R?hl(R):window,H=L.nodeName&&L.nodeName.toLowerCase(),H==="select"||H==="input"&&L.type==="file")var Ge=wm;else if(Mm(L))if(Nm)Ge=Mk;else{Ge=Tk;var de=kk}else H=L.nodeName,!H||H.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?R&&Ru(R.elementType)&&(Ge=wm):Ge=Ek;if(Ge&&(Ge=Ge(r,R))){Cm(F,Ge,a,$);break e}de&&de(r,L,R),r==="focusout"&&R&&L.type==="number"&&R.memoizedProps.value!=null&&ju(L,"number",L.value)}switch(de=R?hl(R):window,r){case"focusin":(Mm(de)||de.contentEditable==="true")&&(gi=de,Pu=R,kl=null);break;case"focusout":kl=Pu=gi=null;break;case"mousedown":Fu=!0;break;case"contextmenu":case"mouseup":case"dragend":Fu=!1,_m(F,a,$);break;case"selectionchange":if(wk)break;case"keydown":case"keyup":_m(F,a,$)}var Oe;if($u)e:{switch(r){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else mi?Tm(r,a)&&(He="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(He="onCompositionStart");He&&(vm&&a.locale!=="ko"&&(mi||He!=="onCompositionStart"?He==="onCompositionEnd"&&mi&&(Oe=mm()):(Nr=$,Hu="value"in Nr?Nr.value:Nr.textContent,mi=!0)),de=Ia(R,He),0<de.length&&(He=new bm(He,r,null,a,$),F.push({event:He,listeners:de}),Oe?He.data=Oe:(Oe=Em(a),Oe!==null&&(He.data=Oe)))),(Oe=yk?bk(r,a):xk(r,a))&&(He=Ia(R,"onBeforeInput"),0<He.length&&(de=new bm("onBeforeInput","beforeinput",null,a,$),F.push({event:de,listeners:He}),de.data=Oe)),uT(F,r,R,a,$)}a0(F,i)})}function Pl(r,i,a){return{instance:r,listener:i,currentTarget:a}}function Ia(r,i){for(var a=i+"Capture",u=[];r!==null;){var p=r,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=pl(r,a),p!=null&&u.unshift(Pl(r,p,g)),p=pl(r,i),p!=null&&u.push(Pl(r,p,g))),r.tag===3)return u;r=r.return}return[]}function pT(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function u0(r,i,a,u,p){for(var g=i._reactName,S=[];a!==null&&a!==u;){var T=a,w=T.alternate,R=T.stateNode;if(T=T.tag,w!==null&&w===u)break;T!==5&&T!==26&&T!==27||R===null||(w=R,p?(R=pl(a,g),R!=null&&S.unshift(Pl(a,R,w))):p||(R=pl(a,g),R!=null&&S.push(Pl(a,R,w)))),a=a.return}S.length!==0&&r.push({event:i,listeners:S})}var mT=/\r\n?/g,gT=/\u0000|\uFFFD/g;function f0(r){return(typeof r=="string"?r:""+r).replace(mT,`
`).replace(gT,"")}function d0(r,i){return i=f0(i),f0(r)===i}function Ze(r,i,a,u,p,g){switch(a){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||di(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&di(r,""+u);break;case"className":Go(r,"class",u);break;case"tabIndex":Go(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Go(r,a,u);break;case"style":dm(r,u,g);break;case"data":if(i!=="object"){Go(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||a!=="href")){r.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=Ko(""+u),r.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(i!=="input"&&Ze(r,i,"name",p.name,p,null),Ze(r,i,"formEncType",p.formEncType,p,null),Ze(r,i,"formMethod",p.formMethod,p,null),Ze(r,i,"formTarget",p.formTarget,p,null)):(Ze(r,i,"encType",p.encType,p,null),Ze(r,i,"method",p.method,p,null),Ze(r,i,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=Ko(""+u),r.setAttribute(a,u);break;case"onClick":u!=null&&(r.onclick=er);break;case"onScroll":u!=null&&Le("scroll",r);break;case"onScrollEnd":u!=null&&Le("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(p.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}a=Ko(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""+u):r.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""):r.removeAttribute(a);break;case"capture":case"download":u===!0?r.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,u):r.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(a,u):r.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(a):r.setAttribute(a,u);break;case"popover":Le("beforetoggle",r),Le("toggle",r),$o(r,"popover",u);break;case"xlinkActuate":Wn(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Wn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Wn(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Wn(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Wn(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Wn(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Wn(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Wn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Wn(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":$o(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=GS.get(a)||a,$o(r,a,u))}}function vd(r,i,a,u,p,g){switch(a){case"style":dm(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(p.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"children":typeof u=="string"?di(r,u):(typeof u=="number"||typeof u=="bigint")&&di(r,""+u);break;case"onScroll":u!=null&&Le("scroll",r);break;case"onScrollEnd":u!=null&&Le("scrollend",r);break;case"onClick":u!=null&&(r.onclick=er);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rm.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(p=a.endsWith("Capture"),i=a.slice(2,p?a.length-7:void 0),g=r[Wt]||null,g=g!=null?g[a]:null,typeof g=="function"&&r.removeEventListener(i,g,p),typeof u=="function")){typeof g!="function"&&g!==null&&(a in r?r[a]=null:r.hasAttribute(a)&&r.removeAttribute(a)),r.addEventListener(i,u,p);break e}a in r?r[a]=u:u===!0?r.setAttribute(a,""):$o(r,a,u)}}}function Ht(r,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",r),Le("load",r);var u=!1,p=!1,g;for(g in a)if(a.hasOwnProperty(g)){var S=a[g];if(S!=null)switch(g){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ze(r,i,g,S,a,null)}}p&&Ze(r,i,"srcSet",a.srcSet,a,null),u&&Ze(r,i,"src",a.src,a,null);return;case"input":Le("invalid",r);var T=g=S=p=null,w=null,R=null;for(u in a)if(a.hasOwnProperty(u)){var $=a[u];if($!=null)switch(u){case"name":p=$;break;case"type":S=$;break;case"checked":w=$;break;case"defaultChecked":R=$;break;case"value":g=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:Ze(r,i,u,$,a,null)}}am(r,g,T,w,R,S,p,!1);return;case"select":Le("invalid",r),u=S=g=null;for(p in a)if(a.hasOwnProperty(p)&&(T=a[p],T!=null))switch(p){case"value":g=T;break;case"defaultValue":S=T;break;case"multiple":u=T;default:Ze(r,i,p,T,a,null)}i=g,a=S,r.multiple=!!u,i!=null?fi(r,!!u,i,!1):a!=null&&fi(r,!!u,a,!0);return;case"textarea":Le("invalid",r),g=p=u=null;for(S in a)if(a.hasOwnProperty(S)&&(T=a[S],T!=null))switch(S){case"value":u=T;break;case"defaultValue":p=T;break;case"children":g=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Ze(r,i,S,T,a,null)}um(r,u,p,g);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(u=a[w],u!=null))switch(w){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ze(r,i,w,u,a,null)}return;case"dialog":Le("beforetoggle",r),Le("toggle",r),Le("cancel",r),Le("close",r);break;case"iframe":case"object":Le("load",r);break;case"video":case"audio":for(u=0;u<Kl.length;u++)Le(Kl[u],r);break;case"image":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"embed":case"source":case"link":Le("error",r),Le("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in a)if(a.hasOwnProperty(R)&&(u=a[R],u!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ze(r,i,R,u,a,null)}return;default:if(Ru(i)){for($ in a)a.hasOwnProperty($)&&(u=a[$],u!==void 0&&vd(r,i,$,u,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(u=a[T],u!=null&&Ze(r,i,T,u,a,null))}function yT(r,i,a,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,S=null,T=null,w=null,R=null,$=null;for(H in a){var F=a[H];if(a.hasOwnProperty(H)&&F!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":w=F;default:u.hasOwnProperty(H)||Ze(r,i,H,null,u,F)}}for(var L in u){var H=u[L];if(F=a[L],u.hasOwnProperty(L)&&(H!=null||F!=null))switch(L){case"type":g=H;break;case"name":p=H;break;case"checked":R=H;break;case"defaultChecked":$=H;break;case"value":S=H;break;case"defaultValue":T=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:H!==F&&Ze(r,i,L,H,u,F)}}Du(r,S,T,w,R,$,g,p);return;case"select":H=S=T=L=null;for(g in a)if(w=a[g],a.hasOwnProperty(g)&&w!=null)switch(g){case"value":break;case"multiple":H=w;default:u.hasOwnProperty(g)||Ze(r,i,g,null,u,w)}for(p in u)if(g=u[p],w=a[p],u.hasOwnProperty(p)&&(g!=null||w!=null))switch(p){case"value":L=g;break;case"defaultValue":T=g;break;case"multiple":S=g;default:g!==w&&Ze(r,i,p,g,u,w)}i=T,a=S,u=H,L!=null?fi(r,!!a,L,!1):!!u!=!!a&&(i!=null?fi(r,!!a,i,!0):fi(r,!!a,a?[]:"",!1));return;case"textarea":H=L=null;for(T in a)if(p=a[T],a.hasOwnProperty(T)&&p!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ze(r,i,T,null,u,p)}for(S in u)if(p=u[S],g=a[S],u.hasOwnProperty(S)&&(p!=null||g!=null))switch(S){case"value":L=p;break;case"defaultValue":H=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==g&&Ze(r,i,S,p,u,g)}cm(r,L,H);return;case"option":for(var ae in a)if(L=a[ae],a.hasOwnProperty(ae)&&L!=null&&!u.hasOwnProperty(ae))switch(ae){case"selected":r.selected=!1;break;default:Ze(r,i,ae,null,u,L)}for(w in u)if(L=u[w],H=a[w],u.hasOwnProperty(w)&&L!==H&&(L!=null||H!=null))switch(w){case"selected":r.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Ze(r,i,w,L,u,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)L=a[Se],a.hasOwnProperty(Se)&&L!=null&&!u.hasOwnProperty(Se)&&Ze(r,i,Se,null,u,L);for(R in u)if(L=u[R],H=a[R],u.hasOwnProperty(R)&&L!==H&&(L!=null||H!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(137,i));break;default:Ze(r,i,R,L,u,H)}return;default:if(Ru(i)){for(var We in a)L=a[We],a.hasOwnProperty(We)&&L!==void 0&&!u.hasOwnProperty(We)&&vd(r,i,We,void 0,u,L);for($ in u)L=u[$],H=a[$],!u.hasOwnProperty($)||L===H||L===void 0&&H===void 0||vd(r,i,$,L,u,H);return}}for(var D in a)L=a[D],a.hasOwnProperty(D)&&L!=null&&!u.hasOwnProperty(D)&&Ze(r,i,D,null,u,L);for(F in u)L=u[F],H=a[F],!u.hasOwnProperty(F)||L===H||L==null&&H==null||Ze(r,i,F,L,u,H)}function h0(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bT(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var p=a[u],g=p.transferSize,S=p.initiatorType,T=p.duration;if(g&&T&&h0(S)){for(S=0,T=p.responseEnd,u+=1;u<a.length;u++){var w=a[u],R=w.startTime;if(R>T)break;var $=w.transferSize,F=w.initiatorType;$&&h0(F)&&(w=w.responseEnd,S+=$*(w<T?1:(T-R)/(w-R)))}if(--u,i+=8*(g+S)/(p.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Sd=null,kd=null;function Va(r){return r.nodeType===9?r:r.ownerDocument}function p0(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m0(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Td(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ed=null;function xT(){var r=window.event;return r&&r.type==="popstate"?r===Ed?!1:(Ed=r,!0):(Ed=null,!1)}var g0=typeof setTimeout=="function"?setTimeout:void 0,vT=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,ST=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(r){return y0.resolve(null).then(r).catch(kT)}:g0;function kT(r){setTimeout(function(){throw r})}function Yr(r){return r==="head"}function b0(r,i){var a=i,u=0;do{var p=a.nextSibling;if(r.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"||a==="/&"){if(u===0){r.removeChild(p),$i(i);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Fl(r.ownerDocument.documentElement);else if(a==="head"){a=r.ownerDocument.head,Fl(a);for(var g=a.firstChild;g;){var S=g.nextSibling,T=g.nodeName;g[dl]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&g.rel.toLowerCase()==="stylesheet"||a.removeChild(g),g=S}}else a==="body"&&Fl(r.ownerDocument.body);a=p}while(a);$i(i)}function x0(r,i){var a=r;r=0;do{var u=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(r===0)break;r--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||r++;a=u}while(a)}function Md(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Md(a),Au(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}r.removeChild(a)}}function TT(r,i,a,u){for(;r.nodeType===1;){var p=a;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[dl])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=An(r.nextSibling),r===null)break}return null}function ET(r,i,a){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=An(r.nextSibling),r===null))return null;return r}function v0(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=An(r.nextSibling),r===null))return null;return r}function Cd(r){return r.data==="$?"||r.data==="$~"}function wd(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function MT(r,i){var a=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||a.readyState!=="loading")i();else{var u=function(){i(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function An(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Nd=null;function S0(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"||a==="/&"){if(i===0)return An(r.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}r=r.nextSibling}return null}function k0(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return r;i--}else a!=="/$"&&a!=="/&"||i++}r=r.previousSibling}return null}function T0(r,i,a){switch(i=Va(a),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Fl(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Au(r)}var On=new Map,E0=new Set;function qa(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var gr=Z.d;Z.d={f:CT,r:wT,D:NT,C:AT,L:OT,m:DT,X:RT,S:jT,M:zT};function CT(){var r=gr.f(),i=Ra();return r||i}function wT(r){var i=ai(r);i!==null&&i.tag===5&&i.type==="form"?Vg(i):gr.r(r)}var Ii=typeof document>"u"?null:document;function M0(r,i,a){var u=Ii;if(u&&typeof i=="string"&&i){var p=kn(i);p='link[rel="'+r+'"][href="'+p+'"]',typeof a=="string"&&(p+='[crossorigin="'+a+'"]'),E0.has(p)||(E0.add(p),r={rel:r,crossOrigin:a,href:i},u.querySelector(p)===null&&(i=u.createElement("link"),Ht(i,"link",r),At(i),u.head.appendChild(i)))}}function NT(r){gr.D(r),M0("dns-prefetch",r,null)}function AT(r,i){gr.C(r,i),M0("preconnect",r,i)}function OT(r,i,a){gr.L(r,i,a);var u=Ii;if(u&&r&&i){var p='link[rel="preload"][as="'+kn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(p+='[imagesrcset="'+kn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(p+='[imagesizes="'+kn(a.imageSizes)+'"]')):p+='[href="'+kn(r)+'"]';var g=p;switch(i){case"style":g=Vi(r);break;case"script":g=qi(r)}On.has(g)||(r=y({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:r,as:i},a),On.set(g,r),u.querySelector(p)!==null||i==="style"&&u.querySelector(Jl(g))||i==="script"&&u.querySelector(Xl(g))||(i=u.createElement("link"),Ht(i,"link",r),At(i),u.head.appendChild(i)))}}function DT(r,i){gr.m(r,i);var a=Ii;if(a&&r){var u=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+kn(u)+'"][href="'+kn(r)+'"]',g=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=qi(r)}if(!On.has(g)&&(r=y({rel:"modulepreload",href:r},i),On.set(g,r),a.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Xl(g)))return}u=a.createElement("link"),Ht(u,"link",r),At(u),a.head.appendChild(u)}}}function jT(r,i,a){gr.S(r,i,a);var u=Ii;if(u&&r){var p=ci(u).hoistableStyles,g=Vi(r);i=i||"default";var S=p.get(g);if(!S){var T={loading:0,preload:null};if(S=u.querySelector(Jl(g)))T.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":i},a),(a=On.get(g))&&Ad(r,a);var w=S=u.createElement("link");At(w),Ht(w,"link",r),w._p=new Promise(function(R,$){w.onload=R,w.onerror=$}),w.addEventListener("load",function(){T.loading|=1}),w.addEventListener("error",function(){T.loading|=2}),T.loading|=4,$a(S,i,u)}S={type:"stylesheet",instance:S,count:1,state:T},p.set(g,S)}}}function RT(r,i){gr.X(r,i);var a=Ii;if(a&&r){var u=ci(a).hoistableScripts,p=qi(r),g=u.get(p);g||(g=a.querySelector(Xl(p)),g||(r=y({src:r,async:!0},i),(i=On.get(p))&&Od(r,i),g=a.createElement("script"),At(g),Ht(g,"link",r),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function zT(r,i){gr.M(r,i);var a=Ii;if(a&&r){var u=ci(a).hoistableScripts,p=qi(r),g=u.get(p);g||(g=a.querySelector(Xl(p)),g||(r=y({src:r,async:!0,type:"module"},i),(i=On.get(p))&&Od(r,i),g=a.createElement("script"),At(g),Ht(g,"link",r),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function C0(r,i,a,u){var p=(p=be.current)?qa(p):null;if(!p)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Vi(a.href),a=ci(p).hoistableStyles,u=a.get(i),u||(u={type:"style",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){r=Vi(a.href);var g=ci(p).hoistableStyles,S=g.get(r);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,S),(g=p.querySelector(Jl(r)))&&!g._p&&(S.instance=g,S.state.loading=5),On.has(r)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},On.set(r,a),g||LT(p,r,a,S.state))),i&&u===null)throw Error(s(528,""));return S}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=qi(a),a=ci(p).hoistableScripts,u=a.get(i),u||(u={type:"script",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Vi(r){return'href="'+kn(r)+'"'}function Jl(r){return'link[rel="stylesheet"]['+r+"]"}function w0(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function LT(r,i,a,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Ht(i,"link",a),At(i),r.head.appendChild(i))}function qi(r){return'[src="'+kn(r)+'"]'}function Xl(r){return"script[async]"+r}function N0(r,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+kn(a.href)+'"]');if(u)return i.instance=u,At(u),u;var p=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),At(u),Ht(u,"style",p),$a(u,a.precedence,r),i.instance=u;case"stylesheet":p=Vi(a.href);var g=r.querySelector(Jl(p));if(g)return i.state.loading|=4,i.instance=g,At(g),g;u=w0(a),(p=On.get(p))&&Ad(u,p),g=(r.ownerDocument||r).createElement("link"),At(g);var S=g;return S._p=new Promise(function(T,w){S.onload=T,S.onerror=w}),Ht(g,"link",u),i.state.loading|=4,$a(g,a.precedence,r),i.instance=g;case"script":return g=qi(a.src),(p=r.querySelector(Xl(g)))?(i.instance=p,At(p),p):(u=a,(p=On.get(g))&&(u=y({},a),Od(u,p)),r=r.ownerDocument||r,p=r.createElement("script"),At(p),Ht(p,"link",u),r.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,$a(u,a.precedence,r));return i.instance}function $a(r,i,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,g=p,S=0;S<u.length;S++){var T=u[S];if(T.dataset.precedence===i)g=T;else if(g!==p)break}g?g.parentNode.insertBefore(r,g.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(r,i.firstChild))}function Ad(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Od(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Ga=null;function A0(r,i,a){if(Ga===null){var u=new Map,p=Ga=new Map;p.set(a,u)}else p=Ga,u=p.get(a),u||(u=new Map,p.set(a,u));if(u.has(r))return u;for(u.set(r,null),a=a.getElementsByTagName(r),p=0;p<a.length;p++){var g=a[p];if(!(g[dl]||g[zt]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(i)||"";S=r+S;var T=u.get(S);T?T.push(g):u.set(S,[g])}}return u}function O0(r,i,a){r=r.ownerDocument||r,r.head.insertBefore(a,i==="title"?r.querySelector("head > title"):null)}function _T(r,i,a){if(a===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function D0(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function BT(r,i,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Vi(u.href),g=i.querySelector(Jl(p));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Ya.bind(r),i.then(r,r)),a.state.loading|=4,a.instance=g,At(g);return}g=i.ownerDocument||i,u=w0(u),(p=On.get(p))&&Ad(u,p),g=g.createElement("link"),At(g);var S=g;S._p=new Promise(function(T,w){S.onload=T,S.onerror=w}),Ht(g,"link",u),a.instance=g}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(r.count++,a=Ya.bind(r),i.addEventListener("load",a),i.addEventListener("error",a))}}var Dd=0;function HT(r,i){return r.stylesheets&&r.count===0&&Pa(r,r.stylesheets),0<r.count||0<r.imgCount?function(a){var u=setTimeout(function(){if(r.stylesheets&&Pa(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4+i);0<r.imgBytes&&Dd===0&&(Dd=62500*bT());var p=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Pa(r,r.stylesheets),r.unsuspend)){var g=r.unsuspend;r.unsuspend=null,g()}},(r.imgBytes>Dd?50:800)+i);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Ya(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pa(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ka=null;function Pa(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ka=new Map,i.forEach(UT,r),Ka=null,Ya.call(r))}function UT(r,i){if(!(i.state.loading&4)){var a=Ka.get(r);if(a)var u=a.get(null);else{a=new Map,Ka.set(r,a);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var S=p[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}p=i.instance,S=p.getAttribute("data-precedence"),g=a.get(S)||u,g===u&&a.set(null,p),a.set(S,p),this.count++,u=Ya.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),g?g.parentNode.insertBefore(p,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),i.state.loading|=4}}var Ql={$$typeof:q,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function IT(r,i,a,u,p,g,S,T,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mu(0),this.hiddenUpdates=Mu(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function j0(r,i,a,u,p,g,S,T,w,R,$,F){return r=new IT(r,i,a,S,w,R,$,F,T),i=1,g===!0&&(i|=24),g=dn(3,null,null,i),r.current=g,g.stateNode=r,i=uf(),i.refCount++,r.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:a,cache:i},pf(g),r}function R0(r){return r?(r=xi,r):xi}function z0(r,i,a,u,p,g){p=R0(p),u.context===null?u.context=p:u.pendingContext=p,u=zr(i),u.payload={element:a},g=g===void 0?null:g,g!==null&&(u.callback=g),a=Lr(r,u,i),a!==null&&(ln(a,r,i),Al(a,r,i))}function L0(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function jd(r,i){L0(r,i),(r=r.alternate)&&L0(r,i)}function _0(r){if(r.tag===13||r.tag===31){var i=Cs(r,67108864);i!==null&&ln(i,r,67108864),jd(r,67108864)}}function B0(r){if(r.tag===13||r.tag===31){var i=yn();i=Cu(i);var a=Cs(r,i);a!==null&&ln(a,r,i),jd(r,i)}}var Fa=!0;function VT(r,i,a,u){var p=U.T;U.T=null;var g=Z.p;try{Z.p=2,Rd(r,i,a,u)}finally{Z.p=g,U.T=p}}function qT(r,i,a,u){var p=U.T;U.T=null;var g=Z.p;try{Z.p=8,Rd(r,i,a,u)}finally{Z.p=g,U.T=p}}function Rd(r,i,a,u){if(Fa){var p=zd(u);if(p===null)xd(r,i,u,Ja,a),U0(r,u);else if(GT(p,r,i,a,u))u.stopPropagation();else if(U0(r,u),i&4&&-1<$T.indexOf(r)){for(;p!==null;){var g=ai(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=Ss(g.pendingLanes);if(S!==0){var T=g;for(T.pendingLanes|=2,T.entangledLanes|=2;S;){var w=1<<31-un(S);T.entanglements[1]|=w,S&=~w}Kn(g),(Pe&6)===0&&(Da=Ae()+500,Yl(0))}}break;case 31:case 13:T=Cs(g,2),T!==null&&ln(T,g,2),Ra(),jd(g,2)}if(g=zd(u),g===null&&xd(r,i,u,Ja,a),g===p)break;p=g}p!==null&&u.stopPropagation()}else xd(r,i,u,null,a)}}function zd(r){return r=Lu(r),Ld(r)}var Ja=null;function Ld(r){if(Ja=null,r=oi(r),r!==null){var i=o(r);if(i===null)r=null;else{var a=i.tag;if(a===13){if(r=c(i),r!==null)return r;r=null}else if(a===31){if(r=f(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Ja=r,null}function H0(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ut()){case $t:return 2;case qn:return 8;case Gt:case al:return 32;case Fp:return 268435456;default:return 32}default:return 32}}var _d=!1,Kr=null,Pr=null,Fr=null,Zl=new Map,Wl=new Map,Jr=[],$T="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U0(r,i){switch(r){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Zl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wl.delete(i.pointerId)}}function eo(r,i,a,u,p,g){return r===null||r.nativeEvent!==g?(r={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:g,targetContainers:[p]},i!==null&&(i=ai(i),i!==null&&_0(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),r)}function GT(r,i,a,u,p){switch(i){case"focusin":return Kr=eo(Kr,r,i,a,u,p),!0;case"dragenter":return Pr=eo(Pr,r,i,a,u,p),!0;case"mouseover":return Fr=eo(Fr,r,i,a,u,p),!0;case"pointerover":var g=p.pointerId;return Zl.set(g,eo(Zl.get(g)||null,r,i,a,u,p)),!0;case"gotpointercapture":return g=p.pointerId,Wl.set(g,eo(Wl.get(g)||null,r,i,a,u,p)),!0}return!1}function I0(r){var i=oi(r.target);if(i!==null){var a=o(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){r.blockedOn=i,em(r.priority,function(){B0(a)});return}}else if(i===31){if(i=f(a),i!==null){r.blockedOn=i,em(r.priority,function(){B0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Xa(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=zd(r.nativeEvent);if(a===null){a=r.nativeEvent;var u=new a.constructor(a.type,a);zu=u,a.target.dispatchEvent(u),zu=null}else return i=ai(a),i!==null&&_0(i),r.blockedOn=a,!1;i.shift()}return!0}function V0(r,i,a){Xa(r)&&a.delete(i)}function YT(){_d=!1,Kr!==null&&Xa(Kr)&&(Kr=null),Pr!==null&&Xa(Pr)&&(Pr=null),Fr!==null&&Xa(Fr)&&(Fr=null),Zl.forEach(V0),Wl.forEach(V0)}function Qa(r,i){r.blockedOn===i&&(r.blockedOn=null,_d||(_d=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,YT)))}var Za=null;function q0(r){Za!==r&&(Za=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Za===r&&(Za=null);for(var i=0;i<r.length;i+=3){var a=r[i],u=r[i+1],p=r[i+2];if(typeof u!="function"){if(Ld(u||a)===null)continue;break}var g=ai(a);g!==null&&(r.splice(i,3),i-=3,zf(g,{pending:!0,data:p,method:a.method,action:u},u,p))}}))}function $i(r){function i(w){return Qa(w,r)}Kr!==null&&Qa(Kr,r),Pr!==null&&Qa(Pr,r),Fr!==null&&Qa(Fr,r),Zl.forEach(i),Wl.forEach(i);for(var a=0;a<Jr.length;a++){var u=Jr[a];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Jr.length&&(a=Jr[0],a.blockedOn===null);)I0(a),a.blockedOn===null&&Jr.shift();if(a=(r.ownerDocument||r).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var p=a[u],g=a[u+1],S=p[Wt]||null;if(typeof g=="function")S||q0(a);else if(S){var T=null;if(g&&g.hasAttribute("formAction")){if(p=g,S=g[Wt]||null)T=S.formAction;else if(Ld(p)!==null)continue}else T=S.action;typeof T=="function"?a[u+1]=T:(a.splice(u,3),u-=3),q0(a)}}}function $0(){function r(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(S){return p=S})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function Bd(r){this._internalRoot=r}Wa.prototype.render=Bd.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,u=yn();z0(a,u,r,i,null,null)},Wa.prototype.unmount=Bd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;z0(r.current,2,null,r,null,null),Ra(),i[li]=null}};function Wa(r){this._internalRoot=r}Wa.prototype.unstable_scheduleHydration=function(r){if(r){var i=Wp();r={blockedOn:null,target:r,priority:i};for(var a=0;a<Jr.length&&i!==0&&i<Jr[a].priority;a++);Jr.splice(a,0,r),a===0&&I0(r)}};var G0=e.version;if(G0!=="19.2.1")throw Error(s(527,G0,"19.2.1"));Z.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=h(i),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var KT={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{cl=ec.inject(KT),cn=ec}catch{}}return no.createRoot=function(r,i){if(!l(r))throw Error(s(299));var a=!1,u="",p=Qg,g=Zg,S=Wg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=j0(r,1,!1,null,null,a,u,null,p,g,S,$0),r[li]=i.current,bd(r),new Bd(i)},no.hydrateRoot=function(r,i,a){if(!l(r))throw Error(s(299));var u=!1,p="",g=Qg,S=Zg,T=Wg,w=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(w=a.formState)),i=j0(r,1,!0,i,a??null,u,p,w,g,S,T,$0),i.context=R0(null),a=i.current,u=yn(),u=Cu(u),p=zr(u),p.callback=null,Lr(a,p,u),a=u,i.current.lanes=a,fl(i,a),Kn(i),r[li]=i.current,bd(r),new Wa(i)},no.version="19.2.1",no}var eb;function tE(){if(eb)return Id.exports;eb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Id.exports=eE(),Id.exports}var nE=tE();const rE=lp(nE);function sE({wifiStatus:n}){const[e,t]=J.useState([]),[s,l]=J.useState(""),[o,c]=J.useState(""),[f,d]=J.useState(!1),[h,m]=J.useState(!1),[y,x]=J.useState(!1),[v,k]=J.useState(""),[E,M]=J.useState(!1);J.useEffect(()=>{C()},[]);const C=async()=>{d(!0),k("");try{const P=await(await fetch("/api/wifi/networks")).json();t(P.networks||[])}catch(G){k("Failed to scan networks"),console.error(G)}finally{d(!1)}},z=async G=>{if(G.preventDefault(),!s){k("Please select a network");return}m(!0),k("");try{const P=await fetch("/api/wifi/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ssid:s,password:o||null})});if(P.ok)x(!0),m(!1);else{const I=await P.json();k(I.detail||"Failed to connect"),m(!1)}}catch{x(!0),m(!1)}},q="w-full p-3 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border",W="w-full py-3 px-4 rounded-lg font-bold transition-all";return y?b.jsx("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 bg-white min-h-screen",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-6xl mb-6",children:""}),b.jsx("h1",{className:"text-3xl mb-4 font-bold text-black",children:"Connecting to WiFi..."}),b.jsxs("p",{className:"text-gray-600 mb-6",children:["Your PC-1 is now connecting to ",b.jsx("strong",{className:"text-black",children:s})]}),b.jsxs("div",{className:"bg-bg-card border-4 border-black rounded-xl p-6 text-left mb-6 shadow-lg",children:[b.jsx("h2",{className:"font-bold text-black mb-4",children:"Next Steps:"}),b.jsxs("ol",{className:"space-y-3 text-black",children:[b.jsxs("li",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"1"}),b.jsxs("span",{children:["Disconnect from ",b.jsx("strong",{children:n?.ap_ssid||"PC-1 Setup network"})," on your phone"]})]}),b.jsxs("li",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"2"}),b.jsxs("span",{children:["Connect your phone to ",b.jsx("strong",{children:s})]})]}),b.jsxs("li",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"3"}),b.jsx("span",{children:"Wait about 30 seconds for the device to connect"})]}),b.jsxs("li",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"4"}),b.jsxs("span",{children:["Visit ",b.jsx("strong",{className:"text-black",children:"http://pc-1.local"})," to access settings"]})]})]})]}),b.jsx("p",{className:"text-sm text-gray-600",children:"If the connection fails, the PC-1 will re-create the setup network automatically."})]})}):b.jsxs("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 bg-white min-h-screen",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("h1",{className:"text-3xl sm:text-4xl mb-4 font-bold text-black",children:"WiFi Setup"}),b.jsx("p",{className:"text-gray-600",children:"Connect your PC-1 to your home WiFi network"})]}),v&&b.jsxs("div",{className:"bg-white border-2 border-red-500 text-red-600 p-4 rounded-lg mb-6",children:[b.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),v]}),b.jsx("div",{className:"bg-bg-card border-4 border-black rounded-xl p-4 flex flex-col shadow-lg mb-6",children:b.jsxs("form",{onSubmit:z,className:"space-y-6",children:[E?b.jsxs(b.Fragment,{children:[b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 font-bold text-black",children:"Network Name (SSID)"}),b.jsx("input",{type:"text",value:s,onChange:G=>l(G.target.value),className:q,placeholder:"Enter WiFi network name",required:!0,disabled:h})]}),b.jsx("button",{type:"button",onClick:()=>{M(!1),l("")},className:"text-sm text-gray-600 hover:text-black underline cursor-pointer",children:" Back to network list"})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b.jsx("label",{className:"block font-bold text-black",children:"Available Networks"}),b.jsx("button",{type:"button",onClick:C,disabled:f,className:"text-sm px-3 py-1 bg-transparent border-2 border-gray-300 hover:border-black rounded-lg text-black transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:f?"Scanning...":"Refresh"})]}),b.jsxs("select",{value:s,onChange:G=>l(G.target.value),className:q,required:!0,disabled:h,children:[b.jsx("option",{value:"",children:"-- Select a network --"}),e.map(G=>b.jsxs("option",{value:G.ssid,children:[G.ssid," (",G.signal,"%) ",G.secure?"":""]},G.ssid))]})]}),b.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-sm text-gray-600 hover:text-black underline cursor-pointer",children:"Enter network name manually"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 font-bold text-black",children:"Password"}),b.jsx("input",{type:"password",value:o,onChange:G=>c(G.target.value),className:q,placeholder:"Enter WiFi password (leave blank if open network)",disabled:h})]}),b.jsx("button",{type:"submit",disabled:h||!s,className:`${W} bg-transparent border-2 border-black text-black hover:bg-black hover:text-white disabled:opacity-50 disabled:cursor-not-allowed disabled:border-gray-300 disabled:text-gray-400 cursor-pointer`,children:h?"Connecting...":"Connect to WiFi"})]})}),b.jsxs("div",{className:"mt-8 p-4 bg-bg-card border-4 border-black rounded-xl shadow-lg",children:[b.jsxs("p",{className:"text-sm text-black mb-2",children:[b.jsx("strong",{children:"Note:"})," After clicking Connect, this device will disconnect from the setup network and join your home WiFi."]}),b.jsx("p",{className:"text-sm text-gray-600",children:"You'll need to reconnect your phone to your home WiFi to access the settings page."})]})]})}const Ch=(n,e="12h")=>{if(!n)return"";if(e==="24h")return n;const[t,s]=n.split(":"),l=parseInt(t,10),o=l>=12?"PM":"AM";return`${l%12||12}:${s} ${o}`},ct="#000000",Qr="#3a3a3a",Us="#4a4a4a",Gd="#525252",I1=[`radial-gradient(circle at 20% 30%, ${ct} 0%, ${Qr} 25%, ${ct} 50%, ${Us} 75%, ${ct} 100%)`,`radial-gradient(circle at 80% 70%, ${ct} 0%, ${Us} 20%, ${ct} 40%, ${Qr} 60%, ${ct} 80%, ${Gd} 100%)`,`radial-gradient(ellipse at 50% 20%, ${ct} 0%, ${Qr} 30%, ${ct} 60%, ${Us} 90%, ${ct} 100%)`,`radial-gradient(circle at 70% 50%, ${ct} 0%, ${Gd} 15%, ${ct} 35%, ${Qr} 55%, ${ct} 75%, ${Us} 100%)`,`radial-gradient(ellipse at 30% 80%, ${ct} 0%, ${Us} 25%, ${ct} 50%, ${Qr} 75%, ${ct} 100%)`,`radial-gradient(circle at 60% 40%, ${ct} 0%, ${Qr} 20%, ${ct} 45%, ${Gd} 70%, ${ct} 100%)`,`radial-gradient(ellipse at 40% 60%, ${ct} 0%, ${Us} 30%, ${ct} 60%, ${Qr} 90%, ${ct} 100%)`,`radial-gradient(circle at 50% 50%, ${ct} 0%, ${Qr} 25%, ${ct} 50%, ${Us} 75%, ${ct} 100%)`],Ji=({children:n,onClick:e,disabled:t=!1,className:s="",type:l="button",loading:o=!1,...c})=>{const d={className:`px-6 py-2 bg-transparent border-2 rounded-lg font-bold transition-all cursor-pointer flex items-center gap-2 ${s}`,style:{borderColor:"var(--color-text-muted)",color:"var(--color-text-muted)"},onMouseEnter:h=>{!t&&!o&&(h.currentTarget.style.backgroundColor="var(--color-bg-white)",h.currentTarget.style.borderColor="var(--color-border-main)",h.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:h=>{!t&&!o&&(h.currentTarget.style.backgroundColor="transparent",h.currentTarget.style.borderColor="var(--color-text-muted)",h.currentTarget.style.color="var(--color-text-muted)")}};return b.jsx("button",{type:l,onClick:e,disabled:t||o,className:d.className,style:d.style,onMouseEnter:d.onMouseEnter,onMouseLeave:d.onMouseLeave,...c,children:o?"Loading...":n})},Qi=({className:n})=>b.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:[b.jsx("title",{children:"wifi"}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("circle",{fill:"currentColor",cx:"8",cy:"12.5",r:"1.5"}),b.jsx("path",{fill:"currentColor",d:"M11.5,10C10.6,9,9.3,8.5,8,8.5S5.4,9,4.5,10L3.1,8.6C4.4,7.2,6.1,6.5,8,6.5s3.6,0.7,4.9,2.1 L11.5,10z"}),b.jsx("path",{fill:"currentColor",d:"M8,2C5,2,2.2,3.1,0,5.2l1.4,1.4C3.2,4.9,5.5,4,8,4s4.8,0.9,6.6,2.7L16,5.2C13.8,3.1,11,2,8,2z"})]})]}),xc=({className:n,style:e,...t})=>b.jsxs("svg",{className:n,style:e,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",...t,children:[b.jsx("title",{children:"wifi-off"}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("path",{fill:"currentColor",d:"M8.142,7.507C8.094,7.506,8.048,7.5,8,7.5c-1.9,0-3.6,0.7-4.9,2.1L4.5,11 c0.798-0.886,1.912-1.357,3.06-1.457L8.142,7.507z"}),b.jsx("path",{fill:"currentColor",d:"M10.13,7.827L9.573,9.776c0.724,0.242,1.398,0.636,1.927,1.224l1.4-1.4 C12.11,8.749,11.171,8.161,10.13,7.827z"}),b.jsx("path",{fill:"currentColor",d:"M8.848,5.039l0.557-1.946C8.942,3.037,8.475,3,8,3C5,3,2.2,4.1,0,6.2l1.4,1.4C3.2,5.9,5.5,5,8,5 C8.286,5,8.568,5.015,8.848,5.039z"}),b.jsx("path",{fill:"currentColor",d:"M11.368,3.493l-0.55,1.924c1.4,0.428,2.684,1.186,3.781,2.283L16,6.2 C14.651,4.913,13.076,4.005,11.368,3.493z"}),b.jsx("path",{fill:"currentColor",d:"M6.001,16c-0.092,0-0.184-0.013-0.275-0.039c-0.531-0.152-0.839-0.705-0.688-1.236l4-14 c0.152-0.532,0.711-0.839,1.236-0.687c0.531,0.152,0.839,0.705,0.688,1.236l-4,14C6.836,15.714,6.436,16,6.001,16z"})]})]}),qe={input:"w-full p-3 text-base bg-white border-2 border-zinc-300 rounded-lg text-black focus:border-black focus:outline-none ",inputSmall:"w-full p-2 text-sm bg-white border-2 border-zinc-300 rounded-lg text-black focus:border-black focus:outline-none ",label:"block mb-2 text-sm text-black  font-bold",labelSmall:"block mb-1 text-xs text-black  font-bold",buttonPrimary:"px-6 py-2 bg-transparent border-2 border-black text-black  font-bold rounded-lg hover:bg-black hover:text-white transition-all cursor-pointer",buttonDanger:"px-4 py-2 text-xs bg-transparent border-2 border-red-500 text-red-600 rounded-lg hover:bg-red-600 hover:text-white  font-bold transition-colors cursor-pointer",buttonGhost:"text-xs px-2 py-0.5 rounded border-2 bg-transparent text-zinc-500 border-zinc-400 hover:text-black hover:border-black  transition-colors cursor-pointer hover-shimmer",modalBackdrop:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",modalContent:"bg-white border-4 border-black rounded-xl p-4 sm:p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-lg",textSubtle:"text-xs text-zinc-500 "},V1=({value:n={},onChange:e,placeholder:t="Type city name (e.g. Boston, London, Tokyo)"})=>{const[s,l]=J.useState(""),[o,c]=J.useState([]),[f,d]=J.useState(!1),h=J.useRef(null),m=J.useRef(null);J.useEffect(()=>{const k=E=>{h.current&&!h.current.contains(E.target)&&c([])};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const y=async k=>{if(l(k),m.current&&clearTimeout(m.current),k.length<2){c([]),d(!1);return}m.current=setTimeout(async()=>{d(!0);try{const E=new AbortController,M=setTimeout(()=>E.abort(),15e3),C=await fetch(`/api/location/search?q=${encodeURIComponent(k)}&limit=20&use_api=false`,{signal:E.signal});clearTimeout(M);const z=await C.json();z.results?c(z.results):c([])}catch(E){E.name==="AbortError"?console.warn("Location search timed out"):(console.error("Error fetching locations:",E),c([]))}finally{d(!1)}},500)},x=k=>{const M={city_name:k.city||k.name,latitude:k.latitude,longitude:k.longitude,timezone:k.timezone,state:k.state,zipcode:k.zipcode};e(M),l(""),c([])},v=n&&n.city_name;return b.jsxs("div",{className:"space-y-3",ref:h,children:[b.jsxs("div",{className:"relative",children:[b.jsx("input",{type:"text",value:s,onChange:k=>y(k.target.value),placeholder:t,className:qe.input,autoComplete:"off"}),f&&b.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:b.jsx("div",{className:"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin"})}),o.length>0&&b.jsx("ul",{className:"absolute w-full z-10 max-h-[300px] overflow-y-auto bg-white border-2 border-gray-300 border-t-0 rounded-b-lg shadow-lg list-none p-0 m-0",children:o.map(k=>b.jsx("li",{onClick:()=>x(k),className:"p-3 cursor-pointer border-b-2 border-gray-200 last:border-0 hover:bg-gray-50 transition-colors group",children:b.jsx("div",{className:"flex items-start justify-between",children:b.jsx("div",{className:"flex-1 min-w-0",children:b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("strong",{className:"text-black transition-colors",children:k.name}),k.state&&b.jsx("span",{className:"text-gray-500 text-xs",children:k.state}),k.zipcode&&b.jsxs("span",{className:"text-gray-500 text-xs",children:["(",k.zipcode,")"]}),k.population&&k.population>0&&b.jsx("span",{className:"text-xs text-gray-600",children:k.population>=1e6?`${(k.population/1e6).toFixed(1)}M`:k.population>=1e3?`${(k.population/1e3).toFixed(0)}K`:k.population}),k.country_code&&k.country_code!=="US"&&b.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-gray-100 text-gray-700 rounded border border-gray-300",children:k.country_code})]})})})},k.id))})]}),v?b.jsxs("div",{className:"bg-gray-50 border-2 border-gray-300 rounded-lg p-3 space-y-2",children:[b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:qe.textSubtle,children:"City"}),b.jsxs("span",{className:"text-sm font-medium",children:[n.city_name,n.state&&`, ${n.state}`]})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:qe.textSubtle,children:"Timezone"}),b.jsx("span",{className:"text-sm",children:n.timezone||"Not set"})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:qe.textSubtle,children:"Coordinates"}),b.jsxs("span",{className:"text-sm",children:[n.latitude?.toFixed(4),", ",n.longitude?.toFixed(4)]})]})]}):b.jsx("p",{className:`${qe.textSubtle} mt-1`,children:"Unless set, uses global location."})]})},wh="pc1_admin_token",iE="X-PC1-Auth-Required",lE="X-PC1-Admin-Token";function oE(){return window.localStorage.getItem(wh)||""}function aE(n){const e=(n||"").trim();if(!e){window.localStorage.removeItem(wh);return}window.localStorage.setItem(wh,e)}function tb(n={},e=""){return e?{...n,[lE]:e}:n}async function Is(n,e={}){const t=oE(),s=tb(e.headers||{},t);let l=await fetch(n,{...e,headers:s});const o=l.headers.get(iE)==="true";if(l.status!==401||!o)return l;const c=window.prompt("Enter PC-1 admin token");if(!c)return l;const f=c.trim();if(!f)return l;aE(f);const d=tb(e.headers||{},f);return l=await fetch(n,{...e,headers:d}),l}const cE=({settings:n,saveGlobalSettings:e,triggerAPMode:t,wifiStatus:s})=>{const l="w-full p-3 text-base border-2 border-gray-300 rounded-lg focus:outline-none box-border",o="block mb-2 font-bold",c=I1,[f,d]=J.useState(null),[h,m]=J.useState(""),[y,x]=J.useState(""),[v,k]=J.useState({type:"",message:""}),[E,M]=J.useState(!1),[C,z]=J.useState(null),[q,W]=J.useState(!1),[G,P]=J.useState({type:"",message:""}),[I,ie]=J.useState(!1),[ce,De]=J.useState(""),[rt,_e]=J.useState(""),[st,$e]=J.useState(!1),[Ee,U]=J.useState(null),[Z,pe]=J.useState(!1),[Me,Ue]=J.useState(!1),[N,V]=J.useState({type:"",message:""}),[se,le]=J.useState(null),[ve,be]=J.useState({stage:"",progress:0});J.useEffect(()=>{const fe=async()=>{try{const B=await(await fetch("/api/system/time")).json();B.datetime&&(d(B),m(O=>O||B.date),x(O=>O||B.time.substring(0,5)))}catch(Ve){console.error("Error fetching system time:",Ve)}};fe();const ge=setInterval(fe,3e4);return()=>clearInterval(ge)},[]),J.useEffect(()=>{if(n&&(n.timezone||n.city_name||n.time_sync_mode!==void 0)){const fe=n.time_sync_mode||"manual";console.log("[TimeSync] Loading preference:",{syncMode:fe,time_sync_mode:n.time_sync_mode}),M(fe==="automatic")}},[n]),J.useEffect(()=>{const fe=async()=>{try{const B=await(await fetch("/api/system/ssh/status")).json();z(B)}catch(Ve){console.error("Error fetching SSH status:",Ve)}};fe();const ge=setInterval(fe,3e4);return()=>clearInterval(ge)},[]),J.useEffect(()=>{(async()=>{try{const Ve=await(await fetch("/api/system/version")).json();Ve.version&&le(Ve.version)}catch(ge){console.error("Error fetching current version:",ge)}})()},[]);const Ce=(fe,ge)=>fe?.detail||fe?.message||fe?.error||ge,et=async()=>{if(!s?.connected){k({type:"error",message:"Internet connection required for automatic time sync"}),setTimeout(()=>k({type:"",message:""}),5e3);return}k({type:"",message:""});try{const ge=await(await Is("/api/system/time/sync",{method:"POST"})).json();if(ge.success){k({type:"success",message:ge.message||"Time synchronized successfully"});const B=await(await fetch("/api/system/time")).json();B.datetime&&(d(B),m(B.date),x(B.time.substring(0,5)))}else k({type:"error",message:Ce(ge,"Failed to sync time")})}catch(fe){k({type:"error",message:"Error syncing time: "+fe.message})}setTimeout(()=>k({type:"",message:""}),5e3)},Ke=async()=>{if(!h||!y){k({type:"error",message:"Please enter both date and time"}),setTimeout(()=>k({type:"",message:""}),5e3);return}const fe=h.trim();if(!/^\d{4}-\d{2}-\d{2}$/.test(fe)){k({type:"error",message:"Invalid date format. Please use YYYY-MM-DD format."}),setTimeout(()=>k({type:"",message:""}),5e3);return}let Ve=String(y||"").trim();if(!Ve||Ve.length===0){k({type:"error",message:"Please enter a valid time"}),setTimeout(()=>k({type:"",message:""}),5e3);return}const B=/^(\d{1,2}):(\d{2})(:(\d{2}))?$/,O=Ve.match(B);if(!O){console.error("Time validation failed:",{normalizedTime:Ve,original:y,type:typeof y,length:Ve.length,charCodes:Ve.split("").map(he=>`${he}(${he.charCodeAt(0)})`)}),k({type:"error",message:`Invalid time format: "${Ve}". Please use HH:MM format (e.g., 14:30).`}),setTimeout(()=>k({type:"",message:""}),5e3);return}const _=O[1].padStart(2,"0"),X=O[2],ne=O[4]||"00",K=parseInt(_,10),ue=parseInt(X,10),re=parseInt(ne,10);if(isNaN(K)||K<0||K>23){k({type:"error",message:`Invalid hours: ${_}. Must be between 00 and 23.`}),setTimeout(()=>k({type:"",message:""}),5e3);return}if(isNaN(ue)||ue<0||ue>59){k({type:"error",message:`Invalid minutes: ${X}. Must be between 00 and 59.`}),setTimeout(()=>k({type:"",message:""}),5e3);return}if(isNaN(re)||re<0||re>59){k({type:"error",message:`Invalid seconds: ${ne}. Must be between 00 and 59.`}),setTimeout(()=>k({type:"",message:""}),5e3);return}const te=`${_}:${X}:${ne}`;k({type:"",message:""});try{console.log("Setting time:",{date:fe,time:te});const he=await Is("/api/system/time",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:fe,time:te})});if(!he.ok)throw new Error(`HTTP error! status: ${he.status}`);const Ne=await he.json();Ne.success?(k({type:"success",message:Ne.message||"System time set successfully"}),M(!1),setTimeout(async()=>{try{const ut=await(await fetch("/api/system/time")).json();ut.datetime&&(d(ut),m(ut.date),x(ut.time.substring(0,5)))}catch(Ae){console.error("Error refreshing time:",Ae)}},1e3)):k({type:"error",message:Ce(Ne,"Failed to set system time. The application may need sudo privileges.")})}catch(he){console.error("Error setting system time:",he),k({type:"error",message:`Error setting system time: ${he.message}. Make sure the backend is running and has proper permissions.`})}setTimeout(()=>k({type:"",message:""}),5e3)};return b.jsxs("div",{className:"space-y-4",children:[b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[5]||c[0]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Updates"}),b.jsx("p",{className:"text-sm text-gray-600 mb-4 ",children:"Check for software updates and keep your PC-1 running the latest version."}),se&&b.jsxs("div",{className:"mb-4 text-sm",children:[b.jsx("span",{className:"text-gray-600 font-bold",children:"Current Version: "}),b.jsx("span",{className:"font-mono font-bold text-black",children:se})]}),Ee&&!Me&&b.jsxs("div",{className:`mb-4 p-3 rounded-lg text-sm ${Ee.up_to_date?"bg-gray-100 text-black":"bg-white text-black border-2 border-gray-300 border-dashed"}`,children:[b.jsx("div",{className:"font-bold mb-1",children:Ee.message}),b.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Ee.up_to_date?b.jsxs(b.Fragment,{children:["Current version: ",b.jsx("span",{className:"font-mono",children:Ee.current_version||"unknown"})]}):b.jsxs(b.Fragment,{children:["Current: ",b.jsx("span",{className:"font-mono",children:Ee.current_version||"unknown"}),"  Latest: ",b.jsx("span",{className:"font-mono",children:Ee.latest_version||"unknown"}),Ee.commits_behind>0&&b.jsxs(b.Fragment,{children:[" (",Ee.commits_behind," ",Ee.commits_behind===1?"update":"updates",")"]})]})})]}),N.message&&!Me&&N.type==="error"&&b.jsxs("div",{className:"mb-4 p-3 rounded-lg text-sm border-2 bg-white text-black border-black border-dashed",children:[b.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),N.message]}),Me&&b.jsxs("div",{className:"mb-4 p-4 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[b.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b.jsx("span",{className:"text-sm font-bold text-black",children:ve.stage||"Installing update..."}),b.jsxs("span",{className:"text-xs text-gray-600 font-mono",children:[ve.progress,"%"]})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:b.jsx("div",{className:"bg-black h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:`${ve.progress}%`}})})]}),!Me&&b.jsxs("div",{className:"flex gap-3",children:[b.jsx(Ji,{onClick:async()=>{pe(!0),V({type:"",message:""});try{const ge=await(await fetch("/api/system/updates/check")).json();U(ge),ge.error&&(V({type:"error",message:ge.error}),setTimeout(()=>V({type:"",message:""}),5e3))}catch{V({type:"error",message:"Could not check for updates. Check your internet connection."}),setTimeout(()=>V({type:"",message:""}),5e3)}finally{pe(!1)}},disabled:Z,loading:Z,className:"flex-1",children:"Check for Updates"}),Ee&&Ee.available&&!Me&&b.jsx(Ji,{onClick:async()=>{if(!confirm("Install the update now? The device will restart automatically. The page will refresh automatically once the update is complete."))return;Ue(!0),V({type:"",message:""}),be({stage:"Installing update...",progress:10});try{const ge=setInterval(()=>{be(O=>O.progress<50?{...O,progress:Math.min(O.progress+2,50)}:O)},500),Ve=await Is("/api/system/updates/install",{method:"POST"});clearInterval(ge),be({stage:"Update installed! Restarting service...",progress:60});const B=await Ve.json();if(B.success)be({stage:"Service restarting...",progress:70}),U(null);else{be({stage:"",progress:0}),V({type:"error",message:Ce(B,"Update failed. Please try again.")}),Ue(!1);return}}catch{be({stage:"Service restarting...",progress:70}),U(null)}const fe=setTimeout(()=>{window.location.reload()},45e3);setTimeout(()=>{be({stage:"Waiting for service to restart...",progress:75});let ge=0;const Ve=30,B=async()=>{ge++;const O=Math.min(75+Math.floor(ge/Ve*20),95);be({stage:"Waiting for service to restart...",progress:O});const _=new AbortController,X=setTimeout(()=>_.abort(),2e3);try{const ne=await fetch("/api/health",{method:"GET",signal:_.signal});if(clearTimeout(X),ne.ok){be({stage:"Service ready! Reloading page...",progress:100}),clearTimeout(fe),setTimeout(()=>window.location.reload(),500);return}else ge<Ve?setTimeout(B,1e3):(be({stage:"Reloading page...",progress:100}),clearTimeout(fe),setTimeout(()=>window.location.reload(),500))}catch{clearTimeout(X),ge<Ve?setTimeout(B,1e3):(be({stage:"Reloading page...",progress:100}),clearTimeout(fe),setTimeout(()=>window.location.reload(),500))}};B()},5e3)},disabled:Me,className:"flex-1",children:"Install Update"})]})]})}),s&&b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[0]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Network"}),b.jsx("div",{className:"flex items-center justify-between",children:b.jsxs("div",{className:"flex-1",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[s.connected?b.jsx(Qi,{className:"w-4 h-4",style:{color:"var(--color-text-muted)"}}):b.jsx(xc,{className:"w-4 h-4",style:{color:"var(--color-error)"}}),b.jsx("span",{className:"font-bold text-black ",children:s.connected&&s.ssid?s.ssid:s.mode==="ap"?"Setup Mode (AP)":"Not Connected"}),b.jsx("button",{type:"button",onClick:t,className:"text-xs underline ml-2 cursor-pointer font-bold",style:{color:"var(--color-brass)"},onMouseEnter:fe=>fe.currentTarget.style.color="var(--color-text-main)",onMouseLeave:fe=>fe.currentTarget.style.color="var(--color-brass)",children:"Reset WiFi"})]}),s.connected&&s.ip&&b.jsxs("div",{className:"text-xs text-gray-600 mt-1 ",children:["IP: ",s.ip]})]})})]})}),b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[1]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Time Settings"}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block mb-2 text-sm text-gray-600  font-bold",children:"Time Format"}),b.jsxs("select",{value:n.time_format||"12h",onChange:fe=>e({time_format:fe.target.value}),className:l,children:[b.jsx("option",{value:"12h",children:"12-hour (3:45 PM)"}),b.jsx("option",{value:"24h",children:"24-hour (15:45)"})]}),b.jsx("p",{className:"text-xs text-gray-600 mt-1 ",children:"Choose how times are displayed across all modules"})]}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block mb-3 text-sm font-medium text-black  font-bold",children:"Set Time"}),b.jsxs("div",{className:"flex gap-0 mb-0",children:[b.jsxs("label",{className:`relative flex flex-col items-center px-4 py-2 border-t-2 border-l-2 border-r-2 cursor-pointer transition-all rounded-tl-lg ${E?"border-gray-300 border-b-2 border-b-black bg-white hover:border-black z-0":"border-black border-b-0 bg-white z-10"}`,children:[b.jsx("input",{type:"radio",name:"timeMode",checked:!E,onChange:async()=>{console.log("[TimeSync] Switching to manual mode"),M(!1),e({time_sync_mode:"manual"});try{await Is("/api/system/time/sync/disable",{method:"POST"}).catch(()=>{})}catch{}f&&(!h&&f.date&&m(f.date),!y&&f.time&&x(f.time.substring(0,5)))},className:"sr-only"}),b.jsx("span",{className:`text-sm font-medium  ${E?"text-gray-600":"text-black font-bold"}`,children:"Manual"})]}),b.jsxs("label",{className:`relative flex flex-col items-center px-4 py-2 border-t-2 border-l-2 border-r-2 cursor-pointer transition-all rounded-tr-lg ${E?"border-black border-b-0 bg-white z-10":"border-gray-300 border-b-2 border-b-black bg-white hover:border-black z-0"}`,children:[b.jsx("input",{type:"radio",name:"timeMode",checked:E,onChange:()=>{console.log("[TimeSync] Switching to automatic mode"),M(!0),e({time_sync_mode:"automatic"}),s?.connected&&et()},className:"sr-only"}),b.jsxs("div",{className:"flex items-baseline justify-center gap-1.5",children:[b.jsx(Qi,{className:`w-3 h-3 flex-shrink-0 ${E?"text-black":"text-gray-600"}`,style:{transform:"translateY(0.125rem)"}}),b.jsx("span",{className:`text-sm font-medium  ${E?"text-black font-bold":"text-gray-600"}`,children:"Automatic"})]})]})]}),E&&b.jsx("div",{className:"p-4 border-2 border-black rounded-b-lg -mt-[2px]",children:s?.connected?b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-bold text-black mb-2 ",children:"Time Set Automatically"}),f&&b.jsxs("div",{className:"p-3 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[b.jsx("div",{className:"text-xs text-gray-600 mb-1 uppercase font-bold",children:"Current Time"}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("div",{className:"text-lg font-bold text-black",children:[f.date," ",Ch(f.time,n.time_format||"12h")]}),b.jsx(Qi,{className:"w-3.5 h-3.5",style:{color:"var(--color-text-muted)"}})]})]})]}):b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-bold text-black mb-2 ",children:"Not Syncing"}),b.jsx("p",{className:"text-sm text-yellow-700 mb-3 ",children:"Internet connection required for automatic time synchronization. Connect to WiFi or use manual mode."}),f&&b.jsxs("div",{className:"p-3 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[b.jsx("div",{className:"text-xs text-gray-600 mb-1 uppercase font-bold",children:"Current Time"}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("div",{className:"text-lg font-bold text-black",children:[f.date," ",Ch(f.time,n.time_format||"12h")]}),b.jsx(xc,{className:"w-3.5 h-3.5",style:{color:"var(--color-error)"}})]})]})]})}),!E&&b.jsxs("div",{className:"p-4 border-2 border-black rounded-b-lg -mt-[2px]",children:[b.jsxs("div",{className:"grid grid-cols-1 min-[340px]:grid-cols-2 gap-3 mb-3",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Date"}),b.jsx("input",{type:"date",value:h,onChange:fe=>m(fe.target.value),className:"w-full py-3 px-2 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border "})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Time"}),b.jsx("input",{type:"time",value:y||"",onChange:fe=>{const ge=fe.target.value;x(ge),console.log("Time input changed:",ge,"Type:",typeof ge)},className:"w-full py-3 px-2 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border ",step:"1",required:!0})]})]}),b.jsx(Ji,{onClick:Ke,className:"w-full",children:"Set System Time"}),b.jsx("p",{className:"text-xs text-gray-600 mt-2 text-center ",children:"Use this when offline or to set a specific time"})]}),v.message&&b.jsxs("div",{className:`mt-4 p-3 rounded-lg text-sm  border-2 ${v.type==="success"?"bg-gray-100 text-black border-black":"bg-white text-black border-black border-dashed"}`,children:[v.type==="error"&&b.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),v.message]})]})]})}),b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[2]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Location"}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block mb-2 text-sm text-gray-600 font-bold",children:"Set Location"}),b.jsx(V1,{value:n,onChange:fe=>e(fe)})]})]})}),b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[3]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Printer Settings"}),b.jsxs("div",{children:[b.jsx("label",{className:o,children:"Maximum Print Lines"}),b.jsx("input",{type:"number",min:"0",max:"1000",value:n.max_print_lines??200,onChange:fe=>e({max_print_lines:parseInt(fe.target.value)||0}),className:l}),b.jsx("p",{className:"text-xs text-gray-600 mt-1 ",children:"Maximum lines per print job to prevent endless prints. Set to 0 for no limit (default: 200)"})]})]})}),b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[4]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"SSH Access"}),b.jsx("p",{className:"text-sm text-gray-600 mb-4 ",children:"Manage SSH (Secure Shell) access to your PC-1 device. SSH allows advanced users to access the device via command line."}),C&&C.available?b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:[b.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b.jsx("span",{className:"text-sm font-medium text-black  font-bold",children:"SSH Service"}),b.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium  border-2 ${C.enabled&&C.active?"bg-white text-black border-black":C.enabled?"bg-gray-200 text-black border-gray-400":"bg-white text-gray-500 border-gray-300"}`,children:C.enabled&&C.active?"Enabled & Active":C.enabled?"Enabled":C.active?"Active":"Disabled"})]}),C.username&&b.jsxs("p",{className:"text-xs text-gray-600 mt-1 ",children:["Username: ",b.jsx("span",{className:"text-black ",children:C.username})]}),C.enabled&&b.jsxs("p",{className:"text-xs text-gray-600 mt-1 ",children:["Connect via: ",b.jsxs("span",{className:"text-black ",children:["ssh ",C.username||"admin","@pc-1.local"]})]})]}),b.jsxs("div",{className:"flex gap-3",children:[C.enabled?b.jsx("button",{type:"button",onClick:async()=>{if(confirm("Are you sure you want to disable SSH? You may lose remote access to the device.")){W(!0),P({type:"",message:""});try{const ge=await(await Is("/api/system/ssh/disable",{method:"POST"})).json();if(ge.success){P({type:"success",message:ge.message});const B=await(await fetch("/api/system/ssh/status")).json();z(B)}else P({type:"error",message:Ce(ge,"Failed to disable SSH")})}catch{P({type:"error",message:"Error disabling SSH"})}finally{W(!1),setTimeout(()=>P({type:"",message:""}),5e3)}}},disabled:q,className:"flex-1 py-2.5 px-4 bg-transparent border-0 rounded-lg transition-all cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed font-bold",style:{color:"var(--color-error-light)"},onMouseEnter:fe=>{q||(fe.currentTarget.style.color="var(--color-error)")},onMouseLeave:fe=>{q||(fe.currentTarget.style.color="var(--color-error-light)")},children:q?"Disabling...":"Disable SSH"}):b.jsx("button",{type:"button",onClick:async()=>{W(!0),P({type:"",message:""});try{const ge=await(await Is("/api/system/ssh/enable",{method:"POST"})).json();if(ge.success){P({type:"success",message:ge.message});const B=await(await fetch("/api/system/ssh/status")).json();z(B)}else P({type:"error",message:Ce(ge,"Failed to enable SSH")})}catch{P({type:"error",message:"Error enabling SSH"})}finally{W(!1),setTimeout(()=>P({type:"",message:""}),5e3)}},disabled:q,className:"flex-1 py-2.5 px-4 bg-transparent border-2 border-black text-black disabled:border-gray-300 disabled:text-gray-400 disabled:cursor-not-allowed rounded-lg  font-bold hover:bg-black hover:text-white transition-all cursor-pointer",children:q?"Enabling...":"Enable SSH"}),C.enabled&&b.jsx("button",{type:"button",onClick:()=>ie(!I),className:"flex-1 py-2.5 px-4 bg-transparent border-2 border-gray-400 text-black rounded-lg  font-bold hover:border-black hover:bg-white transition-all cursor-pointer",children:I?"Cancel":"Change Password"})]}),I&&C.enabled&&b.jsxs("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:[b.jsx("h4",{className:"text-sm font-medium text-black mb-3  font-bold",children:"Change SSH Password"}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"New Password"}),b.jsx("input",{type:"password",value:ce,onChange:fe=>De(fe.target.value),placeholder:"Minimum 8 characters",className:l,minLength:8})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Confirm Password"}),b.jsx("input",{type:"password",value:rt,onChange:fe=>_e(fe.target.value),placeholder:"Re-enter password",className:l,minLength:8})]}),b.jsx(Ji,{onClick:async()=>{if(!ce||ce.length<8){P({type:"error",message:"Password must be at least 8 characters"}),setTimeout(()=>P({type:"",message:""}),5e3);return}if(ce!==rt){P({type:"error",message:"Passwords do not match"}),setTimeout(()=>P({type:"",message:""}),5e3);return}$e(!0),P({type:"",message:""});try{const ge=await(await Is("/api/system/ssh/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({new_password:ce})})).json();ge.success?(P({type:"success",message:ge.message}),De(""),_e(""),ie(!1)):P({type:"error",message:Ce(ge,"Failed to change password")})}catch{P({type:"error",message:"Error changing password"})}finally{$e(!1),setTimeout(()=>P({type:"",message:""}),5e3)}},disabled:st||!ce||!rt,loading:st,className:"w-full",children:"Change Password"})]})]}),G.message&&b.jsxs("div",{className:`p-3 rounded-lg text-sm  border-2 ${G.type==="success"?"bg-gray-100 text-black border-black":"bg-white text-black border-black border-dashed"}`,children:[G.type==="error"&&b.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),G.message]})]}):b.jsx("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:b.jsx("p",{className:"text-sm text-gray-500 ",children:"SSH isn't available in testing mode"})})]})})]})},uE=[{id:"news",label:"News API",offline:!1,icon:"newspaper"},{id:"weather",label:"Weather",offline:!1,icon:"cloud-sun"}];let Zr=null,Yd=null;function zo(){const[n,e]=J.useState(Zr||[]),[t,s]=J.useState(!Zr),[l,o]=J.useState(null);return J.useEffect(()=>{if(Zr){e(Zr),s(!1);return}Yd||(Yd=fetch("/api/module-types").then(c=>{if(!c.ok)throw new Error("Failed to load module types");return c.json()}).then(c=>(Zr=c.moduleTypes||[],Zr)).catch(c=>(console.error("Error loading module types:",c),Zr=uE,Zr))),Yd.then(c=>{e(c),s(!1)})},[]),{moduleTypes:n,loading:t,error:l}}const Kd=({className:n,title:e="print",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("polyline",{fill:"none",points:"3.5 3.5 3.5 0.5 12.5 0.5 12.5 3.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),b.jsx("path",{d:"M3.5,12.5H.5v-4a3,3,0,0,1,3-3h9a3,3,0,0,1,3,3v4h-3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),b.jsx("rect",{height:"6",width:"9",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"3.5",y:"9.5"})]})]}),fE=({className:n,title:e="schedule",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"11.5",x2:"15.5",y1:"0.5",y2:"4.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"7",x2:"7",y1:"5.5",y2:"8.5"}),b.jsx("circle",{cx:"7",cy:"9",fill:"none",r:"6.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),Pd=({className:n,title:e="arrow up",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsx("g",{fill:"currentColor",children:b.jsx("polyline",{fill:"none",points:"15.5,10.5 8,5.5 0.5,10.5 ",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),Fd=({className:n,title:e="arrow down",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsx("g",{fill:"currentColor",children:b.jsx("polyline",{fill:"none",points:"15.5,5.5 8,10.5 0.5,5.5 ",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),dE=({settings:n,modules:e,triggerChannelPrint:t,triggerModulePrint:s,setShowScheduleModal:l,swapChannels:o,setShowEditModuleModal:c,setEditingModule:f,moveModuleInChannel:d,assignModuleToChannel:h,reorderChannelModules:m,removeModuleFromChannel:y,setShowAddModuleModal:x,setShowCreateUnassignedModal:v,wifiStatus:k})=>{const{moduleTypes:E}=zo(),M=J.useRef({}),C=J.useRef(null),z=J.useRef(!1),q=J.useRef(null),[W,G]=J.useState(null),[P,I]=J.useState(null),ie=J.useRef(null),ce=J.useRef(new Map),De=B=>typeof B=="string"&&B.trim().length>0,rt=B=>{const O=B?.config||{};switch(B?.type){case"news":return De(O.news_api_key);case"rss":return Array.isArray(O.rss_feeds)&&O.rss_feeds.some(_=>De(String(_||"")));case"email":return De(O.email_user)&&De(O.email_password);case"calendar":return Array.isArray(O.ical_sources)&&O.ical_sources.some(_=>De(_?.url));case"webhook":return De(O.url);case"text":return De(O.content);case"weather":return De(O.city_name)||De(n?.city_name);default:return!0}},_e=B=>`channel:${B}`,st=B=>{if(B==="unassigned")return{type:"unassigned"};if(B?.startsWith("channel:")){const O=Number(B.split(":")[1]);if(Number.isFinite(O))return{type:"channel",position:O}}return null},$e=B=>{const O={};return B.forEach((_,X)=>{O[_]=X}),O},Ee=(B,O,_)=>{const X=[...B],[ne]=X.splice(O,1);return X.splice(_,0,ne),X},U=B=>{I(O=>B?O&&O.listId===B.listId&&O.index===B.index&&Math.abs(O.top-B.top)<1?O:B:O&&null),ie.current=B,B?.listId&&ce.current.set(B.listId,B)},Z=(B,O)=>{const _=M.current[B];if(!_)return null;const X=Array.from(_.querySelectorAll('[data-dnd-item="true"]')),ne=_.getBoundingClientRect();if(X.length===0)return{listId:B,index:0,top:Math.max(8,Math.floor(ne.height/2))};let K=X.length;for(let te=0;te<X.length;te+=1){const he=X[te].getBoundingClientRect(),Ne=he.top+he.height/2;if(O<Ne){K=te;break}}let ue;if(K===0){const te=X[0].getBoundingClientRect(),he=Math.max(0,te.top-ne.top);ue=te.top-ne.top-he/2}else if(K>=X.length){const te=X[X.length-1].getBoundingClientRect(),he=Math.max(0,ne.bottom-te.bottom);ue=te.bottom-ne.top+he/2-1}else{const te=X[K-1].getBoundingClientRect(),he=X[K].getBoundingClientRect(),Ne=Math.max(0,he.top-te.bottom);ue=te.bottom-ne.top+Ne/2-1}const re=Math.max(6,Math.min(ue,ne.height-6));return{listId:B,index:K,top:re}},pe=(B,O)=>{if(B.target.closest('[data-no-drag="true"]')){B.preventDefault();return}const _=B.currentTarget?.getBoundingClientRect?.();O.itemHeight=_?.height||44,z.current=!0,B.dataTransfer.effectAllowed="move",B.dataTransfer.setData("text/plain",O.moduleId),C.current=O,G(O)},Me=(B,O)=>{if(!C.current||(B.preventDefault(),q.current))return;const _=B.clientY;q.current=requestAnimationFrame(()=>{q.current=null;const X=Z(O,_);U(X)})},Ue=(B,O)=>{B.currentTarget.contains(B.relatedTarget)},N=()=>{q.current&&(cancelAnimationFrame(q.current),q.current=null),I(null),G(null),C.current=null,ie.current=null,ce.current.clear(),setTimeout(()=>{z.current=!1},0)},V=B=>{const O=st(B);return O?O.type==="unassigned"?ge.map(_=>_.id):(ve[O.position]||[]).map(_=>_.module_id):[]},se=(B,O)=>{z.current||(c(B),f(JSON.parse(JSON.stringify(O))))},le=(B,O)=>{B.preventDefault();const _=C.current;if(!_)return;const ne=ce.current.get(O)||Z(O,B.clientY)||P,K=ne?ne.index:0,ue=_.listId,re=st(ue),te=st(O);if(!re||!te){N();return}if(ue===O){const he=V(ue),Ne=he.indexOf(_.moduleId);if(Ne===-1){N();return}let Ae=K;if(Ae>Ne&&(Ae-=1),Ae===Ne){N();return}const ut=Ee(he,Ne,Ae);re.type==="unassigned"?et(ut):m(re.position,$e(ut),{optimistic:!0}),N();return}if(re.type==="unassigned"&&te.type==="channel"){const he=V(O),Ne=Math.max(0,Math.min(K,he.length)),Ae=[...he];Ae.splice(Ne,0,_.moduleId),et(ut=>ut.filter($t=>$t!==_.moduleId)),N(),(async()=>await h(te.position,_.moduleId,Ne,{silent:!0,optimistic:!0})&&await m(te.position,$e(Ae),{optimistic:!0}))();return}if(re.type==="channel"&&te.type==="unassigned"){const he=Math.max(0,Math.min(K,ge.length));et(Ne=>{const Ae=Ne.filter(ut=>ut!==_.moduleId);return Ae.splice(he,0,_.moduleId),Ae}),y(re.position,_.moduleId,{silent:!0,optimistic:!0}),N();return}if(re.type==="channel"&&te.type==="channel"){const he=V(O),Ne=Math.max(0,Math.min(K,he.length)),Ae=[...he];Ae.splice(Ne,0,_.moduleId),N(),(async()=>!await y(re.position,_.moduleId,{silent:!0,optimistic:!0})||!await h(te.position,_.moduleId,Ne,{silent:!0,optimistic:!0})||await m(te.position,$e(Ae),{optimistic:!0}))();return}N()},ve=J.useMemo(()=>{const B={};for(let O=1;O<=8;O+=1){const X=((n.channels?.[O]||{modules:[]}).modules||[]).map(ne=>({...ne,module:e[ne.module_id]})).filter(ne=>ne.module).sort((ne,K)=>ne.order-K.order);B[O]=X}return B},[e,n.channels]),be=J.useMemo(()=>{const B=new Set;return Object.values(n.channels||{}).forEach(O=>{(O.modules||[]).forEach(_=>{B.add(_.module_id)})}),Object.values(e||{}).filter(O=>!B.has(O.id))},[e,n.channels]),[Ce,et]=J.useState([]),Ke=J.useMemo(()=>be.map(B=>B.id),[be]),fe=J.useMemo(()=>new Set(Ke),[Ke]);J.useEffect(()=>{et(B=>{const O=new Set(Ke),_=B.filter(K=>O.has(K)),X=new Set(_),ne=Ke.filter(K=>!X.has(K));return ne.length===0&&_.length===B.length?B:[..._,...ne]})},[Ke]);const ge=Ce.filter(B=>fe.has(B)).map(B=>e[B]).filter(Boolean),Ve=(B,O)=>{const _=Ce.findIndex(ne=>ne===B);if(_===-1)return;const X=[...Ce];O==="up"&&_>0?([X[_],X[_-1]]=[X[_-1],X[_]],et(X)):O==="down"&&_<X.length-1&&([X[_],X[_+1]]=[X[_+1],X[_]],et(X))};return b.jsxs("div",{className:"space-y-4",children:[b.jsx("div",{className:"space-y-4",children:[1,2,3,4,5,6,7,8].map(B=>{const O=n.channels?.[B]||{},_=ve[B]||[],X=_e(B),ne=I1;return b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:ne[B-1]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col h-full",children:[b.jsxs("div",{className:"flex items-center justify-between mb-3 gap-4",children:[b.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight",children:B}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx("button",{type:"button",onClick:()=>t(B),className:"group flex items-center justify-center px-2 py-1 rounded border-2 bg-transparent border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer",title:"Print Channel",children:b.jsx(Kd,{className:"w-3.5 h-3.5 text-gray-400 group-hover:text-black transition-all"})}),b.jsxs("button",{type:"button",onClick:()=>l(B),className:`group flex items-center gap-1 px-2 py-1 rounded border-2 transition-all cursor-pointer ${O.schedule&&O.schedule.length>0?"bg-transparent shadow-sm":"bg-transparent border-gray-300 hover:border-black hover:bg-white"}`,style:O.schedule&&O.schedule.length>0?{color:"var(--color-brass)",borderColor:"var(--color-brass)"}:{},onMouseEnter:K=>{O.schedule&&O.schedule.length>0&&(K.currentTarget.style.backgroundColor="var(--color-brass-10)")},onMouseLeave:K=>{O.schedule&&O.schedule.length>0&&(K.currentTarget.style.backgroundColor="transparent")},title:"Configure Schedule",children:[b.jsx(fE,{className:`w-3.5 h-3.5 transition-all ${O.schedule?.length>0?"":"text-gray-400 group-hover:text-black"}`,style:O.schedule?.length>0?{color:"var(--color-brass)"}:{}}),b.jsx("span",{className:`text-xs font-bold ${O.schedule?.length>0?"":"text-gray-400 group-hover:text-black"}`,style:O.schedule?.length>0?{color:"var(--color-brass)"}:{},children:O.schedule?.length||0})]})]})]}),b.jsxs("div",{className:"flex gap-1",children:[b.jsx("button",{type:"button",onClick:K=>{K.preventDefault(),o(B,B-1)},disabled:B===1,className:"px-2 py-1 text-xs  border-2 border-gray-300 hover:border-black rounded text-gray-600 hover:text-black transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer hover:bg-white",title:"Move channel up",children:b.jsx(Pd,{className:"w-3 h-3"})}),b.jsx("button",{type:"button",onClick:K=>{K.preventDefault(),o(B,B+1)},disabled:B===8,className:"px-2 py-1 text-xs  border-2 border-gray-300 hover:border-black rounded text-gray-600 hover:text-black transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer hover:bg-white",title:"Move channel down",children:b.jsx(Fd,{className:"w-3 h-3"})})]})]}),b.jsxs("div",{ref:K=>{M.current[X]=K},onDragOver:K=>Me(K,X),onDragLeave:K=>Ue(K),onDrop:K=>le(K,X),"data-drop-active":P?.listId===X,className:"space-y-2 mb-2 flex-grow min-h-[36px] dnd-list",role:"list",children:[_.map((K,ue)=>b.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border-2 border-gray-600 hover:border-black group transition-all dnd-item cursor-pointer",style:{backgroundColor:"var(--color-bg-card)"},onMouseEnter:re=>re.currentTarget.style.setProperty("background-color","var(--color-bg-white)","important"),onMouseLeave:re=>re.currentTarget.style.setProperty("background-color","var(--color-bg-card)","important"),onClick:()=>se(K.module_id,e[K.module_id]),onDragOver:re=>Me(re,X),onDrop:re=>le(re,X),draggable:!0,"data-dnd-item":"true","data-dragging":W?.moduleId===K.module_id?"true":"false",onDragStart:re=>pe(re,{moduleId:K.module_id,listId:X,index:ue}),onDragEnd:N,role:"listitem",children:[b.jsx("div",{className:"flex-1 min-w-0 mr-2",children:(()=>{const re=E.find(qn=>qn.id===K.module.type),te=re?!re.offline:!1,he=rt(K.module),Ae=te&&!he,ut=k?.connected;let $t="var(--color-text-muted)";return ut?Ae&&($t="var(--color-brass)"):$t="var(--color-error)",b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"text-sm font-bold text-gray-700 group-hover:text-black  truncate transition-colors",children:K.module.name}),b.jsxs("div",{className:`text-[10px]  truncate flex items-baseline gap-1 ${Ae?"":"text-gray-700"}`,style:Ae?{color:"var(--color-brass)"}:{},children:[te&&(ut?b.jsx(Qi,{className:"w-2.5 h-2.5 flex-shrink-0 group-hover:text-black transition-colors",style:{transform:"translateY(0.125rem)",color:$t}}):b.jsx(xc,{className:"w-2.5 h-2.5 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-error)"}})),b.jsx("span",{className:"truncate font-mono group-hover:text-black transition-colors",style:{color:"var(--color-text-muted)"},children:re?.label?.toUpperCase()})]})]})})()}),b.jsxs("div",{className:"flex gap-2 items-center",onClick:re=>re.stopPropagation(),"data-no-drag":"true",children:[b.jsx("button",{type:"button",onClick:()=>s(K.module_id),className:"px-1.5 py-1 rounded border border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer",title:"Print this module",children:b.jsx(Kd,{className:"w-3 h-3 text-gray-400 hover:text-black transition-colors"})}),b.jsxs("div",{className:"flex flex-col gap-0.5",children:[b.jsx("button",{type:"button",onClick:()=>d(B,K.module_id,"up"),disabled:ue===0,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:re=>{const te=re.currentTarget.querySelector("svg");te&&(te.style.color="var(--color-text-main)")},onMouseLeave:re=>{const te=re.currentTarget.querySelector("svg");te&&(te.style.color="var(--color-text-muted)")},children:b.jsx(Pd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})}),b.jsx("button",{type:"button",onClick:()=>d(B,K.module_id,"down"),disabled:ue===_.length-1,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:re=>{const te=re.currentTarget.querySelector("svg");te&&(te.style.color="var(--color-text-main)")},onMouseLeave:re=>{const te=re.currentTarget.querySelector("svg");te&&(te.style.color="var(--color-text-muted)")},children:b.jsx(Fd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})})]})]})]},K.module_id)),P?.listId===X&&b.jsx("div",{className:"dnd-indicator",style:{top:P.top}})]}),b.jsx("div",{className:"mt-auto",children:b.jsx("button",{type:"button",onClick:()=>x(B),onDragOver:K=>Me(K,X),onDrop:K=>le(K,X),className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs  font-bold tracking-wider cursor-pointer",style:{backgroundColor:"transparent"},onMouseEnter:K=>K.currentTarget.style.backgroundColor="var(--color-bg-white)",onMouseLeave:K=>K.currentTarget.style.backgroundColor="transparent",title:"Add a module to this channel",children:"+ ADD MODULE"})})]})},B)})}),b.jsxs("div",{className:"mt-8",children:[b.jsx("h3",{className:"text-lg font-bold text-black mb-4 tracking-tight border-b-2 border-dashed border-gray-300 pb-2",children:"UNASSIGNED MODULES"}),b.jsxs("div",{ref:B=>{M.current.unassigned=B},onDragOver:B=>Me(B,"unassigned"),onDragLeave:B=>Ue(B),onDrop:B=>le(B,"unassigned"),"data-drop-active":P?.listId==="unassigned",className:"space-y-2 min-h-[36px] dnd-list",role:"list",children:[ge.length===0?b.jsx("div",{className:"text-sm text-gray-500 italic py-4",children:"No unassigned modules. Create a module below or assign existing modules to channels."}):ge.map((B,O)=>{const _=E.find(te=>te.id===B.type),X=_?!_.offline:!1,ne=rt(B),K=X&&!ne,ue=k?.connected;let re="var(--color-text-muted)";return ue?K&&(re="var(--color-brass)"):re="var(--color-error)",b.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border-2 border-gray-300 hover:border-black group transition-all dnd-item cursor-pointer",style:{backgroundColor:"var(--color-bg-card)"},onMouseEnter:te=>te.currentTarget.style.setProperty("background-color","var(--color-bg-white)","important"),onMouseLeave:te=>te.currentTarget.style.setProperty("background-color","var(--color-bg-card)","important"),onClick:()=>se(B.id,B),onDragOver:te=>Me(te,"unassigned"),onDrop:te=>le(te,"unassigned"),draggable:!0,"data-dnd-item":"true","data-dragging":W?.moduleId===B.id?"true":"false",onDragStart:te=>pe(te,{moduleId:B.id,listId:"unassigned",index:O}),onDragEnd:N,role:"listitem",children:[b.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[b.jsx("div",{className:"text-sm font-bold text-gray-700 group-hover:text-black truncate transition-colors",children:B.name}),b.jsxs("div",{className:`text-[10px] truncate flex items-baseline gap-1 ${K?"":"text-gray-700"}`,style:K?{color:"var(--color-brass)"}:{},children:[X&&(ue?b.jsx(Qi,{className:"w-2.5 h-2.5 flex-shrink-0 group-hover:text-black transition-colors",style:{transform:"translateY(0.125rem)",color:re}}):b.jsx(xc,{className:"w-2.5 h-2.5 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-error)"}})),b.jsx("span",{className:"truncate font-mono group-hover:text-black transition-colors",style:{color:"var(--color-text-muted)"},children:_?.label?.toUpperCase()})]})]}),b.jsxs("div",{className:"flex gap-2 items-center",onClick:te=>te.stopPropagation(),"data-no-drag":"true",children:[b.jsx("button",{type:"button",onClick:()=>s(B.id),className:"px-1.5 py-1 rounded border border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer",title:"Print this module",children:b.jsx(Kd,{className:"w-3 h-3 text-gray-400 hover:text-black transition-colors"})}),b.jsxs("div",{className:"flex flex-col gap-0.5",children:[b.jsx("button",{type:"button",onClick:()=>Ve(B.id,"up"),disabled:ge.findIndex(te=>te.id===B.id)===0,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:te=>{const he=te.currentTarget.querySelector("svg");he&&(he.style.color="var(--color-text-main)")},onMouseLeave:te=>{const he=te.currentTarget.querySelector("svg");he&&(he.style.color="var(--color-text-muted)")},children:b.jsx(Pd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})}),b.jsx("button",{type:"button",onClick:()=>Ve(B.id,"down"),disabled:ge.findIndex(te=>te.id===B.id)===ge.length-1,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",onMouseEnter:te=>{const he=te.currentTarget.querySelector("svg");he&&(he.style.color="var(--color-text-main)")},onMouseLeave:te=>{const he=te.currentTarget.querySelector("svg");he&&(he.style.color="var(--color-text-muted)")},children:b.jsx(Fd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})})]})]})]},B.id)}),P?.listId==="unassigned"&&b.jsx("div",{className:"dnd-indicator",style:{top:P.top}})]}),b.jsx("div",{className:"mt-4",children:b.jsx("button",{type:"button",onClick:()=>{v&&v(!0)},className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs font-bold tracking-wider cursor-pointer",style:{backgroundColor:"transparent"},onMouseEnter:B=>B.currentTarget.style.backgroundColor="var(--color-bg-white)",onMouseLeave:B=>B.currentTarget.style.backgroundColor="transparent",title:"Add a new unassigned module",children:"+ ADD MODULE"})})]})]})},op=({onClick:n,className:e="",...t})=>b.jsx("button",{onClick:n,className:`text-gray-500 hover:text-black text-2xl cursor-pointer hover-shimmer ${e}`,type:"button",...t,children:""}),nb=({channelPosition:n,onClose:e,onCreateModule:t,onAssignModule:s,onOpenEdit:l,isUnassigned:o=!1})=>{const c=J.useRef(null),{moduleTypes:f}=zo();return n===null&&!o?null:b.jsx("div",{className:qe.modalBackdrop,onMouseDown:d=>{d.target===d.currentTarget&&(c.current="backdrop")},onClick:d=>{d.target===d.currentTarget&&c.current==="backdrop"&&e(),c.current=null},children:b.jsxs("div",{className:qe.modalContent,onClick:d=>d.stopPropagation(),children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h3",{className:"text-xl font-bold text-black ",children:n?`Add Module to Channel ${n}`:"Create Module"}),b.jsx(op,{onClick:e})]}),b.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[...f].sort((d,h)=>d.offline&&!h.offline?-1:!d.offline&&h.offline?1:d.label.localeCompare(h.label)).map(d=>b.jsx("button",{type:"button",onClick:async()=>{const h=await t(d.id);h&&(n&&await s(n,h.id),e(),l(h.id,h))},className:"flex flex-col items-center p-4 bg-white border-2 border-gray-300 hover:border-black rounded-lg transition-colors text-center group cursor-pointer hover-shimmer",children:b.jsxs("div",{className:"flex items-baseline justify-center gap-1.5",children:[!d.offline&&b.jsx(Qi,{className:"w-3 h-3 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-text-muted)"}}),b.jsx("span",{className:"font-bold text-black group-hover:text-black ",children:d.label})]})},d.id))})]})})},hE=({value:n={},onChange:e})=>{const[t,s]=J.useState(()=>Object.entries(n||{}).map(([d,h])=>({key:d,value:h})));J.useEffect(()=>{const d=new Map(Object.entries(n||{})),h=new Map(t.map(m=>[m.key,m.value]));d.size!==h.size&&s(Object.entries(n||{}).map(([m,y])=>({key:m,value:y})))},[n]);const l=d=>{const h={};d.forEach(m=>{m.key.trim()&&(h[m.key.trim()]=m.value)}),e(h)},o=(d,h,m)=>{const y=[...t];y[d]={...y[d],[h]:m},s(y),l(y)},c=()=>{s([...t,{key:"",value:""}])},f=d=>{const h=t.filter((m,y)=>y!==d);s(h),l(h)};return b.jsxs("div",{className:"space-y-2",children:[t.map((d,h)=>b.jsxs("div",{className:"flex gap-2 items-center",children:[b.jsx("input",{type:"text",value:d.key,onChange:m=>o(h,"key",m.target.value),placeholder:"Key",className:`${qe.inputSmall} flex-1`}),b.jsx("input",{type:"text",value:d.value,onChange:m=>o(h,"value",m.target.value),placeholder:"Value",className:`${qe.inputSmall} flex-1`}),b.jsx("button",{type:"button",onClick:()=>f(h),className:`${qe.buttonDanger} flex-shrink-0 px-2`,children:""})]},h)),b.jsx("button",{type:"button",onClick:c,className:`${qe.buttonGhost} text-xs w-full border-dashed border-2 border-gray-200 py-1`,children:"+ Add Entry"})]})},pE=({value:n=[],onChange:e})=>{const t=Array.isArray(n)?n:[],s=J.useRef([]),l=(d,h,m)=>{const y=[...t];y[d]={...y[d],[h]:m},e(y)},o=d=>{const h=[...t],m={text:"",checked:!1};h.splice(d+1,0,m),e(h),setTimeout(()=>{s.current[d+1]&&s.current[d+1].focus()},0)},c=d=>{if(t.length<=1){l(0,"text","");return}const h=t.filter((y,x)=>x!==d);e(h);const m=Math.max(0,d-1);setTimeout(()=>{if(s.current[m]){s.current[m].focus();const y=s.current[m].value.length;s.current[m].setSelectionRange(y,y)}},0)},f=(d,h)=>{d.key==="Enter"?(d.preventDefault(),o(h)):d.key==="Backspace"&&t[h].text===""&&t.length>1?(d.preventDefault(),c(h)):d.key==="ArrowUp"&&h>0?(d.preventDefault(),s.current[h-1].focus()):d.key==="ArrowDown"&&h<t.length-1&&(d.preventDefault(),s.current[h+1].focus())};return J.useEffect(()=>{t.length===0&&e([{text:"",checked:!1}])},[t.length]),b.jsxs("div",{className:"space-y-0 bg-white",children:[t.map((d,h)=>b.jsxs("div",{className:"flex items-center gap-3 group px-1 py-1 transition-all",children:[b.jsx("input",{type:"checkbox",checked:d.checked||!1,onChange:m=>l(h,"checked",m.target.checked),className:"w-5 h-5 text-black rounded border-2 border-zinc-300 focus:ring-0 cursor-pointer flex-shrink-0",style:{accentColor:"black"}}),b.jsx("input",{ref:m=>s.current[h]=m,type:"text",value:d.text||"",onChange:m=>l(h,"text",m.target.value),onKeyDown:m=>f(m,h),placeholder:"New checklist item...",className:"flex-1 bg-transparent border-none focus:outline-none focus:ring-0 py-1 text-base placeholder-zinc-300 transition-colors"}),b.jsx("button",{type:"button",onClick:()=>c(h),className:"opacity-0 group-hover:opacity-100 text-gray-300 hover:text-red-500 transition-all p-1",title:"Remove Item",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 256 256",children:b.jsx("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"})})})]},h)),b.jsx("div",{className:"pt-2",children:b.jsxs("button",{type:"button",onClick:()=>o(t.length-1),className:"text-xs text-gray-400 hover:text-gray-600 flex items-center gap-1 px-2",children:[b.jsx("span",{className:"text-sm",children:"+"})," Add another item"]})})]})},mE=({value:n,onChange:e,presets:t={},onPresetSelect:s})=>{const l=o=>{const c=o.target.value;if(e(c),c&&t[c]&&s){const f=t[c];let d={};if(f.values)d=f.values;else{const{label:h,...m}=f;d=m}s(d)}};return b.jsx("select",{value:n||"custom",onChange:l,className:qe.input,children:Object.entries(t).map(([o,c])=>b.jsx("option",{value:o,children:c.label||o},o))})},gE=({className:n,title:e="check",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsx("g",{fill:"currentColor",children:b.jsx("path",{d:"M0.5,7l4,4.5 c0,0,2.5-5.5,11-8.5",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),yE=({className:n,title:e="warning",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsx("path",{fill:"currentColor",d:"M236.8,188.09,149.35,36.22h0a24.76,24.76,0,0,0-42.7,0L19.2,188.09a23.51,23.51,0,0,0,0,23.72A24.35,24.35,0,0,0,40.55,224h174.9a24.35,24.35,0,0,0,21.33-12.19A23.51,23.51,0,0,0,236.8,188.09ZM120,104a8,8,0,0,1,16,0v40a8,8,0,0,1-16,0Zm8,88a12,12,0,1,1,12-12A12,12,0,0,1,128,192Z"})]}),bE=({formData:n={}})=>{const[e,t]=J.useState(!1),[s,l]=J.useState(null),o=async()=>{t(!0),l(null);try{const f=await(await fetch("/api/webhook/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();l(f)}catch(c){l({success:!1,error:c.message})}finally{t(!1)}};return b.jsxs("div",{className:"space-y-3",children:[b.jsx("button",{type:"button",onClick:o,disabled:e||!n.url,className:"text-sm px-3 py-1.5 border-2 border-gray-300 rounded-lg hover:border-black disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e?b.jsxs("span",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"w-3 h-3 border-2 border-black border-t-transparent rounded-full animate-spin"}),"Testing..."]}):"Test Webhook"}),s&&b.jsx("div",{className:`p-3 rounded-lg text-sm border-2 ${s.success?"bg-gray-50 border-gray-300":"bg-white border-black border-dashed"}`,children:s.success?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex items-center gap-2 text-black font-bold mb-2",children:[b.jsx(gE,{className:"w-4 h-4"}),b.jsx("span",{children:"Success"}),s.status_code&&b.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["(HTTP ",s.status_code,")"]})]}),s.json_path&&b.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Extracted from: ",b.jsx("code",{className:"bg-gray-200 px-1 rounded",children:s.json_path})]}),b.jsx("div",{className:"bg-white border border-gray-200 rounded p-2 font-mono text-xs whitespace-pre-wrap break-words max-h-32 overflow-y-auto",children:s.content})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex items-center gap-2 text-black font-bold mb-2",children:[b.jsx(yE,{className:"w-4 h-4"}),b.jsx("span",{children:"Error"})]}),b.jsx("div",{className:"text-gray-600 text-xs",children:s.error}),s.raw_response&&b.jsxs("details",{className:"mt-2",children:[b.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"Show raw response"}),b.jsx("div",{className:"bg-gray-100 border border-gray-200 rounded p-2 font-mono text-xs whitespace-pre-wrap break-words max-h-32 overflow-y-auto mt-1",children:s.raw_response})]})]})})]})},xE=({value:n,onChange:e,schema:t,uiSchema:s={},moduleId:l,onActionComplete:o})=>{const[c,f]=J.useState(!1),[d,h]=J.useState(null),m=s["ui:options"]||{},y=m.action||"default",x=m.label||t?.title||"Action",v=m.confirmMessage,k=m.style||"primary",E=async()=>{if(!(v&&!window.confirm(v))){if(!l){console.error("ActionButton: moduleId is required"),h("error");return}f(!0),h(null);try{const C=await fetch(`/api/modules/${l}/actions/${y}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(C.ok){const z=await C.json();h("success"),z.reload&&o?setTimeout(()=>o(),300):setTimeout(()=>h(null),2e3)}else h("error")}catch(C){console.error("ActionButton error:",C),h("error")}finally{f(!1)}}};let M=qe.buttonPrimary;return k==="danger"?M="px-4 py-2 rounded-lg font-medium bg-red-600 text-white hover:bg-red-700 transition-colors disabled:opacity-50":k==="ghost"?M=qe.buttonGhost:k==="link"&&(M="text-black hover:text-zinc-600 underline text-sm font-bold disabled:opacity-50"),b.jsxs("div",{className:"mb-4",children:[b.jsx("button",{type:"button",onClick:E,disabled:c,className:M,children:c?"Processing...":x}),d==="success"&&b.jsx("span",{className:"ml-3 text-green-600 text-sm",children:" Done"}),d==="error"&&b.jsx("span",{className:"ml-3 text-red-600 text-sm",children:" Failed"})]})};var vE=U1();const SE=lp(vE);var Jd={exports:{}},Xd={};var rb;function kE(){if(rb)return Xd;rb=1;var n=Ro();function e(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,l=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function f(y,x){var v=x(),k=s({inst:{value:v,getSnapshot:x}}),E=k[0].inst,M=k[1];return o(function(){E.value=v,E.getSnapshot=x,d(E)&&M({inst:E})},[y,v,x]),l(function(){return d(E)&&M({inst:E}),y(function(){d(E)&&M({inst:E})})},[y]),c(v),v}function d(y){var x=y.getSnapshot;y=y.value;try{var v=x();return!t(y,v)}catch{return!0}}function h(y,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:f;return Xd.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,Xd}var sb;function q1(){return sb||(sb=1,Jd.exports=kE()),Jd.exports}var $1=q1();function Ut(n){this.content=n}Ut.prototype={constructor:Ut,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var s=t&&t!=n?this.remove(t):this,l=s.find(n),o=s.content.slice();return l==-1?o.push(t||n,e):(o[l+1]=e,t&&(o[l]=t)),new Ut(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Ut(t)},addToStart:function(n,e){return new Ut([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Ut(t)},addBefore:function(n,e,t){var s=this.remove(e),l=s.content.slice(),o=s.find(n);return l.splice(o==-1?l.length:o,0,e,t),new Ut(l)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Ut.from(n),n.size?new Ut(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Ut.from(n),n.size?new Ut(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Ut.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Ut.from=function(n){if(n instanceof Ut)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Ut(e)};function G1(n,e,t){for(let s=0;;s++){if(s==n.childCount||s==e.childCount)return n.childCount==e.childCount?null:t;let l=n.child(s),o=e.child(s);if(l==o){t+=l.nodeSize;continue}if(!l.sameMarkup(o))return t;if(l.isText&&l.text!=o.text){for(let c=0;l.text[c]==o.text[c];c++)t++;return t}if(l.content.size||o.content.size){let c=G1(l.content,o.content,t+1);if(c!=null)return c}t+=l.nodeSize}}function Y1(n,e,t,s){for(let l=n.childCount,o=e.childCount;;){if(l==0||o==0)return l==o?null:{a:t,b:s};let c=n.child(--l),f=e.child(--o),d=c.nodeSize;if(c==f){t-=d,s-=d;continue}if(!c.sameMarkup(f))return{a:t,b:s};if(c.isText&&c.text!=f.text){let h=0,m=Math.min(c.text.length,f.text.length);for(;h<m&&c.text[c.text.length-h-1]==f.text[f.text.length-h-1];)h++,t--,s--;return{a:t,b:s}}if(c.content.size||f.content.size){let h=Y1(c.content,f.content,t-1,s-1);if(h)return h}t-=d,s-=d}}class Q{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let s=0;s<e.length;s++)this.size+=e[s].nodeSize}nodesBetween(e,t,s,l=0,o){for(let c=0,f=0;f<t;c++){let d=this.content[c],h=f+d.nodeSize;if(h>e&&s(d,l+f,o||null,c)!==!1&&d.content.size){let m=f+1;d.nodesBetween(Math.max(0,e-m),Math.min(d.content.size,t-m),s,l+m)}f=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,s,l){let o="",c=!0;return this.nodesBetween(e,t,(f,d)=>{let h=f.isText?f.text.slice(Math.max(e,d)-d,t-d):f.isLeaf?l?typeof l=="function"?l(f):l:f.type.spec.leafText?f.type.spec.leafText(f):"":"";f.isBlock&&(f.isLeaf&&h||f.isTextblock)&&s&&(c?c=!1:o+=s),o+=h},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,s=e.firstChild,l=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(s)&&(l[l.length-1]=t.withText(t.text+s.text),o=1);o<e.content.length;o++)l.push(e.content[o]);return new Q(l,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let s=[],l=0;if(t>e)for(let o=0,c=0;c<t;o++){let f=this.content[o],d=c+f.nodeSize;d>e&&((c<e||d>t)&&(f.isText?f=f.cut(Math.max(0,e-c),Math.min(f.text.length,t-c)):f=f.cut(Math.max(0,e-c-1),Math.min(f.content.size,t-c-1))),s.push(f),l+=f.nodeSize),c=d}return new Q(s,l)}cutByIndex(e,t){return e==t?Q.empty:e==0&&t==this.content.length?this:new Q(this.content.slice(e,t))}replaceChild(e,t){let s=this.content[e];if(s==t)return this;let l=this.content.slice(),o=this.size+t.nodeSize-s.nodeSize;return l[e]=t,new Q(l,o)}addToStart(e){return new Q([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Q(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,s=0;t<this.content.length;t++){let l=this.content[t];e(l,s,t),s+=l.nodeSize}}findDiffStart(e,t=0){return G1(this,e,t)}findDiffEnd(e,t=this.size,s=e.size){return Y1(this,e,t,s)}findIndex(e){if(e==0)return tc(0,e);if(e==this.size)return tc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,s=0;;t++){let l=this.child(t),o=s+l.nodeSize;if(o>=e)return o==e?tc(t+1,o):tc(t,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Q.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Q(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Q.empty;let t,s=0;for(let l=0;l<e.length;l++){let o=e[l];s+=o.nodeSize,l&&o.isText&&e[l-1].sameMarkup(o)?(t||(t=e.slice(0,l)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new Q(t||e,s)}static from(e){if(!e)return Q.empty;if(e instanceof Q)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Q([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Q.empty=new Q([],0);const Qd={index:0,offset:0};function tc(n,e){return Qd.index=n,Qd.offset=e,Qd}function vc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let s=0;s<n.length;s++)if(!vc(n[s],e[s]))return!1}else{for(let s in n)if(!(s in e)||!vc(n[s],e[s]))return!1;for(let s in e)if(!(s in n))return!1}return!0}let nt=class Nh{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,s=!1;for(let l=0;l<e.length;l++){let o=e[l];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,l));else{if(o.type.excludes(this.type))return e;!s&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,l)),t.push(this),s=!0),t&&t.push(o)}}return t||(t=e.slice()),s||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&vc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let s=e.marks[t.type];if(!s)throw new RangeError(`There is no mark type ${t.type} in this schema`);let l=s.create(t.attrs);return s.checkAttrs(l.attrs),l}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++)if(!e[s].eq(t[s]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Nh.none;if(e instanceof Nh)return[e];let t=e.slice();return t.sort((s,l)=>s.type.rank-l.type.rank),t}};nt.none=[];class Sc extends Error{}class oe{constructor(e,t,s){this.content=e,this.openStart=t,this.openEnd=s}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let s=P1(this.content,e+this.openStart,t);return s&&new oe(s,this.openStart,this.openEnd)}removeBetween(e,t){return new oe(K1(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return oe.empty;let s=t.openStart||0,l=t.openEnd||0;if(typeof s!="number"||typeof l!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new oe(Q.fromJSON(e,t.content),s,l)}static maxOpen(e,t=!0){let s=0,l=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)s++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)l++;return new oe(e,s,l)}}oe.empty=new oe(Q.empty,0,0);function K1(n,e,t){let{index:s,offset:l}=n.findIndex(e),o=n.maybeChild(s),{index:c,offset:f}=n.findIndex(t);if(l==e||o.isText){if(f!=t&&!n.child(c).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(s!=c)throw new RangeError("Removing non-flat range");return n.replaceChild(s,o.copy(K1(o.content,e-l-1,t-l-1)))}function P1(n,e,t,s){let{index:l,offset:o}=n.findIndex(e),c=n.maybeChild(l);if(o==e||c.isText)return s&&!s.canReplace(l,l,t)?null:n.cut(0,e).append(t).append(n.cut(e));let f=P1(c.content,e-o-1,t,c);return f&&n.replaceChild(l,c.copy(f))}function TE(n,e,t){if(t.openStart>n.depth)throw new Sc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Sc("Inconsistent open depths");return F1(n,e,t,0)}function F1(n,e,t,s){let l=n.index(s),o=n.node(s);if(l==e.index(s)&&s<n.depth-t.openStart){let c=F1(n,e,t,s+1);return o.copy(o.content.replaceChild(l,c))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==s&&e.depth==s){let c=n.parent,f=c.content;return Fs(c,f.cut(0,n.parentOffset).append(t.content).append(f.cut(e.parentOffset)))}else{let{start:c,end:f}=EE(t,n);return Fs(o,X1(n,c,f,e,s))}else return Fs(o,kc(n,e,s))}function J1(n,e){if(!e.type.compatibleContent(n.type))throw new Sc("Cannot join "+e.type.name+" onto "+n.type.name)}function Ah(n,e,t){let s=n.node(t);return J1(s,e.node(t)),s}function Ps(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function fo(n,e,t,s){let l=(e||n).node(t),o=0,c=e?e.index(t):l.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(Ps(n.nodeAfter,s),o++));for(let f=o;f<c;f++)Ps(l.child(f),s);e&&e.depth==t&&e.textOffset&&Ps(e.nodeBefore,s)}function Fs(n,e){return n.type.checkContent(e),n.copy(e)}function X1(n,e,t,s,l){let o=n.depth>l&&Ah(n,e,l+1),c=s.depth>l&&Ah(t,s,l+1),f=[];return fo(null,n,l,f),o&&c&&e.index(l)==t.index(l)?(J1(o,c),Ps(Fs(o,X1(n,e,t,s,l+1)),f)):(o&&Ps(Fs(o,kc(n,e,l+1)),f),fo(e,t,l,f),c&&Ps(Fs(c,kc(t,s,l+1)),f)),fo(s,null,l,f),new Q(f)}function kc(n,e,t){let s=[];if(fo(null,n,t,s),n.depth>t){let l=Ah(n,e,t+1);Ps(Fs(l,kc(n,e,t+1)),s)}return fo(e,null,t,s),new Q(s)}function EE(n,e){let t=e.depth-n.openStart,l=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)l=e.node(o).copy(Q.from(l));return{start:l.resolveNoCache(n.openStart+t),end:l.resolveNoCache(l.content.size-n.openEnd-t)}}class ko{constructor(e,t,s){this.pos=e,this.path=t,this.parentOffset=s,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let s=this.pos-this.path[this.path.length-1],l=e.child(t);return s?e.child(t).cut(s):l}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let s=this.path[t*3],l=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)l+=s.child(o).nodeSize;return l}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return nt.none;if(this.textOffset)return e.child(t).marks;let s=e.maybeChild(t-1),l=e.maybeChild(t);if(!s){let f=s;s=l,l=f}let o=s.marks;for(var c=0;c<o.length;c++)o[c].type.spec.inclusive===!1&&(!l||!o[c].isInSet(l.marks))&&(o=o[c--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let s=t.marks,l=e.parent.maybeChild(e.index());for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!l||!s[o].isInSet(l.marks))&&(s=s[o--].removeFromSet(s));return s}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let s=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);s>=0;s--)if(e.pos<=this.end(s)&&(!t||t(this.node(s))))return new Tc(this,e,s);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let s=[],l=0,o=t;for(let c=e;;){let{index:f,offset:d}=c.content.findIndex(o),h=o-d;if(s.push(c,f,l+d),!h||(c=c.child(f),c.isText))break;o=h-1,l+=d+1}return new ko(t,s,o)}static resolveCached(e,t){let s=ib.get(e);if(s)for(let o=0;o<s.elts.length;o++){let c=s.elts[o];if(c.pos==t)return c}else ib.set(e,s=new ME);let l=s.elts[s.i]=ko.resolve(e,t);return s.i=(s.i+1)%CE,l}}class ME{constructor(){this.elts=[],this.i=0}}const CE=12,ib=new WeakMap;class Tc{constructor(e,t,s){this.$from=e,this.$to=t,this.depth=s}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const wE=Object.create(null);let fs=class Oh{constructor(e,t,s,l=nt.none){this.type=e,this.attrs=t,this.marks=l,this.content=s||Q.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,s,l=0){this.content.nodesBetween(e,t,s,l,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,s,l){return this.content.textBetween(e,t,s,l)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,s){return this.type==e&&vc(this.attrs,t||e.defaultAttrs||wE)&&nt.sameSet(this.marks,s||nt.none)}copy(e=null){return e==this.content?this:new Oh(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Oh(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,s=!1){if(e==t)return oe.empty;let l=this.resolve(e),o=this.resolve(t),c=s?0:l.sharedDepth(t),f=l.start(c),h=l.node(c).content.cut(l.pos-f,o.pos-f);return new oe(h,l.depth-c,o.depth-c)}replace(e,t,s){return TE(this.resolve(e),this.resolve(t),s)}nodeAt(e){for(let t=this;;){let{index:s,offset:l}=t.content.findIndex(e);if(t=t.maybeChild(s),!t)return null;if(l==e||t.isText)return t;e-=l+1}}childAfter(e){let{index:t,offset:s}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:s}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:s}=this.content.findIndex(e);if(s<e)return{node:this.content.child(t),index:t,offset:s};let l=this.content.child(t-1);return{node:l,index:t-1,offset:s-l.nodeSize}}resolve(e){return ko.resolveCached(this,e)}resolveNoCache(e){return ko.resolve(this,e)}rangeHasMark(e,t,s){let l=!1;return t>e&&this.nodesBetween(e,t,o=>(s.isInSet(o.marks)&&(l=!0),!l)),l}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Q1(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,s=Q.empty,l=0,o=s.childCount){let c=this.contentMatchAt(e).matchFragment(s,l,o),f=c&&c.matchFragment(this.content,t);if(!f||!f.validEnd)return!1;for(let d=l;d<o;d++)if(!this.type.allowsMarks(s.child(d).marks))return!1;return!0}canReplaceWith(e,t,s,l){if(l&&!this.type.allowsMarks(l))return!1;let o=this.contentMatchAt(e).matchType(s),c=o&&o.matchFragment(this.content,t);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=nt.none;for(let t=0;t<this.marks.length;t++){let s=this.marks[t];s.type.checkAttrs(s.attrs),e=s.addToSet(e)}if(!nt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let s;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");s=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,s)}let l=Q.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,l,s);return o.type.checkAttrs(o.attrs),o}};fs.prototype.text=void 0;class Ec extends fs{constructor(e,t,s,l){if(super(e,t,null,l),!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Q1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ec(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ec(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Q1(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Zs{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let s=new NE(e,t);if(s.next==null)return Zs.empty;let l=Z1(s);s.next&&s.err("Unexpected trailing text");let o=LE(zE(l));return _E(o,s),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,s=e.childCount){let l=this;for(let o=t;l&&o<s;o++)l=l.matchType(e.child(o).type);return l}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let s=0;s<e.next.length;s++)if(this.next[t].type==e.next[s].type)return!0;return!1}fillBefore(e,t=!1,s=0){let l=[this];function o(c,f){let d=c.matchFragment(e,s);if(d&&(!t||d.validEnd))return Q.from(f.map(h=>h.createAndFill()));for(let h=0;h<c.next.length;h++){let{type:m,next:y}=c.next[h];if(!(m.isText||m.hasRequiredAttrs())&&l.indexOf(y)==-1){l.push(y);let x=o(y,f.concat(m));if(x)return x}}return null}return o(this,[])}findWrapping(e){for(let s=0;s<this.wrapCache.length;s+=2)if(this.wrapCache[s]==e)return this.wrapCache[s+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),s=[{match:this,type:null,via:null}];for(;s.length;){let l=s.shift(),o=l.match;if(o.matchType(e)){let c=[];for(let f=l;f.type;f=f.via)c.push(f.type);return c.reverse()}for(let c=0;c<o.next.length;c++){let{type:f,next:d}=o.next[c];!f.isLeaf&&!f.hasRequiredAttrs()&&!(f.name in t)&&(!l.type||d.validEnd)&&(s.push({match:f.contentMatch,type:f,via:l}),t[f.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(s){e.push(s);for(let l=0;l<s.next.length;l++)e.indexOf(s.next[l].next)==-1&&t(s.next[l].next)}return t(this),e.map((s,l)=>{let o=l+(s.validEnd?"*":" ")+" ";for(let c=0;c<s.next.length;c++)o+=(c?", ":"")+s.next[c].type.name+"->"+e.indexOf(s.next[c].next);return o}).join(`
`)}}Zs.empty=new Zs(!0);class NE{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Z1(n){let e=[];do e.push(AE(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function AE(n){let e=[];do e.push(OE(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function OE(n){let e=RE(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=DE(n,e);else break;return e}function lb(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function DE(n,e){let t=lb(n),s=t;return n.eat(",")&&(n.next!="}"?s=lb(n):s=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:s,expr:e}}function jE(n,e){let t=n.nodeTypes,s=t[e];if(s)return[s];let l=[];for(let o in t){let c=t[o];c.isInGroup(e)&&l.push(c)}return l.length==0&&n.err("No node type or group '"+e+"' found"),l}function RE(n){if(n.eat("(")){let e=Z1(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=jE(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function zE(n){let e=[[]];return l(o(n,0),t()),e;function t(){return e.push([])-1}function s(c,f,d){let h={term:d,to:f};return e[c].push(h),h}function l(c,f){c.forEach(d=>d.to=f)}function o(c,f){if(c.type=="choice")return c.exprs.reduce((d,h)=>d.concat(o(h,f)),[]);if(c.type=="seq")for(let d=0;;d++){let h=o(c.exprs[d],f);if(d==c.exprs.length-1)return h;l(h,f=t())}else if(c.type=="star"){let d=t();return s(f,d),l(o(c.expr,d),d),[s(d)]}else if(c.type=="plus"){let d=t();return l(o(c.expr,f),d),l(o(c.expr,d),d),[s(d)]}else{if(c.type=="opt")return[s(f)].concat(o(c.expr,f));if(c.type=="range"){let d=f;for(let h=0;h<c.min;h++){let m=t();l(o(c.expr,d),m),d=m}if(c.max==-1)l(o(c.expr,d),d);else for(let h=c.min;h<c.max;h++){let m=t();s(d,m),l(o(c.expr,d),m),d=m}return[s(d)]}else{if(c.type=="name")return[s(f,void 0,c.value)];throw new Error("Unknown expr type")}}}}function W1(n,e){return e-n}function ob(n,e){let t=[];return s(e),t.sort(W1);function s(l){let o=n[l];if(o.length==1&&!o[0].term)return s(o[0].to);t.push(l);for(let c=0;c<o.length;c++){let{term:f,to:d}=o[c];!f&&t.indexOf(d)==-1&&s(d)}}}function LE(n){let e=Object.create(null);return t(ob(n,0));function t(s){let l=[];s.forEach(c=>{n[c].forEach(({term:f,to:d})=>{if(!f)return;let h;for(let m=0;m<l.length;m++)l[m][0]==f&&(h=l[m][1]);ob(n,d).forEach(m=>{h||l.push([f,h=[]]),h.indexOf(m)==-1&&h.push(m)})})});let o=e[s.join(",")]=new Zs(s.indexOf(n.length-1)>-1);for(let c=0;c<l.length;c++){let f=l[c][1].sort(W1);o.next.push({type:l[c][0],next:e[f.join(",")]||t(f)})}return o}}function _E(n,e){for(let t=0,s=[n];t<s.length;t++){let l=s[t],o=!l.validEnd,c=[];for(let f=0;f<l.next.length;f++){let{type:d,next:h}=l.next[f];c.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),s.indexOf(h)==-1&&s.push(h)}o&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function ex(n){let e=Object.create(null);for(let t in n){let s=n[t];if(!s.hasDefault)return null;e[t]=s.default}return e}function tx(n,e){let t=Object.create(null);for(let s in n){let l=e&&e[s];if(l===void 0){let o=n[s];if(o.hasDefault)l=o.default;else throw new RangeError("No value supplied for attribute "+s)}t[s]=l}return t}function nx(n,e,t,s){for(let l in e)if(!(l in n))throw new RangeError(`Unsupported attribute ${l} for ${t} of type ${l}`);for(let l in n){let o=n[l];o.validate&&o.validate(e[l])}}function rx(n,e){let t=Object.create(null);if(e)for(let s in e)t[s]=new HE(n,s,e[s]);return t}let ab=class sx{constructor(e,t,s){this.name=e,this.schema=t,this.spec=s,this.markSet=null,this.groups=s.group?s.group.split(" "):[],this.attrs=rx(e,s.attrs),this.defaultAttrs=ex(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(s.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Zs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:tx(this.attrs,e)}create(e=null,t,s){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new fs(this,this.computeAttrs(e),Q.from(t),nt.setFrom(s))}createChecked(e=null,t,s){return t=Q.from(t),this.checkContent(t),new fs(this,this.computeAttrs(e),t,nt.setFrom(s))}createAndFill(e=null,t,s){if(e=this.computeAttrs(e),t=Q.from(t),t.size){let c=this.contentMatch.fillBefore(t);if(!c)return null;t=c.append(t)}let l=this.contentMatch.matchFragment(t),o=l&&l.fillBefore(Q.empty,!0);return o?new fs(this,e,t.append(o),nt.setFrom(s)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let s=0;s<e.childCount;s++)if(!this.allowsMarks(e.child(s).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){nx(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let s=0;s<e.length;s++)this.allowsMarkType(e[s].type)?t&&t.push(e[s]):t||(t=e.slice(0,s));return t?t.length?t:nt.none:e}static compile(e,t){let s=Object.create(null);e.forEach((o,c)=>s[o]=new sx(o,t,c));let l=t.spec.topNode||"doc";if(!s[l])throw new RangeError("Schema is missing its top node type ('"+l+"')");if(!s.text)throw new RangeError("Every schema needs a 'text' type");for(let o in s.text.attrs)throw new RangeError("The text node type should not have attributes");return s}};function BE(n,e,t){let s=t.split("|");return l=>{let o=l===null?"null":typeof l;if(s.indexOf(o)<0)throw new RangeError(`Expected value of type ${s} for attribute ${e} on type ${n}, got ${o}`)}}class HE{constructor(e,t,s){this.hasDefault=Object.prototype.hasOwnProperty.call(s,"default"),this.default=s.default,this.validate=typeof s.validate=="string"?BE(e,t,s.validate):s.validate}get isRequired(){return!this.hasDefault}}class uu{constructor(e,t,s,l){this.name=e,this.rank=t,this.schema=s,this.spec=l,this.attrs=rx(e,l.attrs),this.excluded=null;let o=ex(this.attrs);this.instance=o?new nt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new nt(this,tx(this.attrs,e))}static compile(e,t){let s=Object.create(null),l=0;return e.forEach((o,c)=>s[o]=new uu(o,l++,t,c)),s}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){nx(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class ix{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let l in e)t[l]=e[l];t.nodes=Ut.from(e.nodes),t.marks=Ut.from(e.marks||{}),this.nodes=ab.compile(this.spec.nodes,this),this.marks=uu.compile(this.spec.marks,this);let s=Object.create(null);for(let l in this.nodes){if(l in this.marks)throw new RangeError(l+" can not be both a node and a mark");let o=this.nodes[l],c=o.spec.content||"",f=o.spec.marks;if(o.contentMatch=s[c]||(s[c]=Zs.parse(c,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=f=="_"?null:f?cb(this,f.split(" ")):f==""||!o.inlineContent?[]:null}for(let l in this.marks){let o=this.marks[l],c=o.spec.excludes;o.excluded=c==null?[o]:c==""?[]:cb(this,c.split(" "))}this.nodeFromJSON=l=>fs.fromJSON(this,l),this.markFromJSON=l=>nt.fromJSON(this,l),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,s,l){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof ab){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,s,l)}text(e,t){let s=this.nodes.text;return new Ec(s,s.defaultAttrs,e,nt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function cb(n,e){let t=[];for(let s=0;s<e.length;s++){let l=e[s],o=n.marks[l],c=o;if(o)t.push(o);else for(let f in n.marks){let d=n.marks[f];(l=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(l)>-1)&&t.push(c=d)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[s]+"'")}return t}function UE(n){return n.tag!=null}function IE(n){return n.style!=null}class ds{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let s=this.matchedStyles=[];t.forEach(l=>{if(UE(l))this.tags.push(l);else if(IE(l)){let o=/[^=]*/.exec(l.style)[0];s.indexOf(o)<0&&s.push(o),this.styles.push(l)}}),this.normalizeLists=!this.tags.some(l=>{if(!/^(ul|ol)\b/.test(l.tag)||!l.node)return!1;let o=e.nodes[l.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let s=new fb(this,t,!1);return s.addAll(e,nt.none,t.from,t.to),s.finish()}parseSlice(e,t={}){let s=new fb(this,t,!0);return s.addAll(e,nt.none,t.from,t.to),oe.maxOpen(s.finish())}matchTag(e,t,s){for(let l=s?this.tags.indexOf(s)+1:0;l<this.tags.length;l++){let o=this.tags[l];if($E(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let c=o.getAttrs(e);if(c===!1)continue;o.attrs=c||void 0}return o}}}matchStyle(e,t,s,l){for(let o=l?this.styles.indexOf(l)+1:0;o<this.styles.length;o++){let c=this.styles[o],f=c.style;if(!(f.indexOf(e)!=0||c.context&&!s.matchesContext(c.context)||f.length>e.length&&(f.charCodeAt(e.length)!=61||f.slice(e.length+1)!=t))){if(c.getAttrs){let d=c.getAttrs(t);if(d===!1)continue;c.attrs=d||void 0}return c}}}static schemaRules(e){let t=[];function s(l){let o=l.priority==null?50:l.priority,c=0;for(;c<t.length;c++){let f=t[c];if((f.priority==null?50:f.priority)<o)break}t.splice(c,0,l)}for(let l in e.marks){let o=e.marks[l].spec.parseDOM;o&&o.forEach(c=>{s(c=db(c)),c.mark||c.ignore||c.clearMark||(c.mark=l)})}for(let l in e.nodes){let o=e.nodes[l].spec.parseDOM;o&&o.forEach(c=>{s(c=db(c)),c.node||c.ignore||c.mark||(c.node=l)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ds(e,ds.schemaRules(e)))}}const lx={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},VE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ox={ol:!0,ul:!0},To=1,Dh=2,ho=4;function ub(n,e,t){return e!=null?(e?To:0)|(e==="full"?Dh:0):n&&n.whitespace=="pre"?To|Dh:t&~ho}class nc{constructor(e,t,s,l,o,c){this.type=e,this.attrs=t,this.marks=s,this.solid=l,this.options=c,this.content=[],this.activeMarks=nt.none,this.match=o||(c&ho?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Q.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let s=this.type.contentMatch,l;return(l=s.findWrapping(e.type))?(this.match=s,l):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&To)){let s=this.content[this.content.length-1],l;if(s&&s.isText&&(l=/[ \t\r\n\u000c]+$/.exec(s.text))){let o=s;s.text.length==l[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-l[0].length))}}let t=Q.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Q.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!lx.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class fb{constructor(e,t,s){this.parser=e,this.options=t,this.isOpen=s,this.open=0,this.localPreserveWS=!1;let l=t.topNode,o,c=ub(null,t.preserveWhitespace,0)|(s?ho:0);l?o=new nc(l.type,l.attrs,nt.none,!0,t.topMatch||l.type.contentMatch,c):s?o=new nc(null,null,nt.none,!0,null,c):o=new nc(e.schema.topNodeType,null,nt.none,!0,null,c),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let s=e.nodeValue,l=this.top,o=l.options&Dh?"full":this.localPreserveWS||(l.options&To)>0,{schema:c}=this.parser;if(o==="full"||l.inlineContext(e)||/[^ \t\r\n\u000c]/.test(s)){if(o)if(o==="full")s=s.replace(/\r\n?/g,`
`);else if(c.linebreakReplacement&&/[\r\n]/.test(s)&&this.top.findWrapping(c.linebreakReplacement.create())){let f=s.split(/\r?\n|\r/);for(let d=0;d<f.length;d++)d&&this.insertNode(c.linebreakReplacement.create(),t,!0),f[d]&&this.insertNode(c.text(f[d]),t,!/\S/.test(f[d]));s=""}else s=s.replace(/\r?\n|\r/g," ");else if(s=s.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(s)&&this.open==this.nodes.length-1){let f=l.content[l.content.length-1],d=e.previousSibling;(!f||d&&d.nodeName=="BR"||f.isText&&/[ \t\r\n\u000c]$/.test(f.text))&&(s=s.slice(1))}s&&this.insertNode(c.text(s),t,!/\S/.test(s)),this.findInText(e)}else this.findInside(e)}addElement(e,t,s){let l=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),f;ox.hasOwnProperty(c)&&this.parser.normalizeLists&&qE(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(f=this.parser.matchTag(e,this,s));e:if(d?d.ignore:VE.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let h,m=this.needsBlock;if(lx.hasOwnProperty(c))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=d&&d.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),h&&this.sync(o),this.needsBlock=m}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,d,h,d.consuming===!1?f:void 0)}this.localPreserveWS=l}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let s=e.style;if(s&&s.length)for(let l=0;l<this.parser.matchedStyles.length;l++){let o=this.parser.matchedStyles[l],c=s.getPropertyValue(o);if(c)for(let f=void 0;;){let d=this.parser.matchStyle(o,c,this,f);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(h=>!d.clearMark(h)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)f=d;else break}}return t}addElementByRule(e,t,s,l){let o,c;if(t.node)if(c=this.parser.schema.nodes[t.node],c.isLeaf)this.insertNode(c.create(t.attrs),s,e.nodeName=="BR")||this.leafFallback(e,s);else{let d=this.enter(c,t.attrs||null,s,t.preserveWhitespace);d&&(o=!0,s=d)}else{let d=this.parser.schema.marks[t.mark];s=s.concat(d.create(t.attrs))}let f=this.top;if(c&&c.isLeaf)this.findInside(e);else if(l)this.addElement(e,s,l);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,s,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,s),this.findAround(e,d,!1)}o&&this.sync(f)&&this.open--}addAll(e,t,s,l){let o=s||0;for(let c=s?e.childNodes[s]:e.firstChild,f=l==null?null:e.childNodes[l];c!=f;c=c.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(c,t);this.findAtPoint(e,o)}findPlace(e,t,s){let l,o;for(let c=this.open,f=0;c>=0;c--){let d=this.nodes[c],h=d.findWrapping(e);if(h&&(!l||l.length>h.length+f)&&(l=h,o=d,!h.length))break;if(d.solid){if(s)break;f+=2}}if(!l)return null;this.sync(o);for(let c=0;c<l.length;c++)t=this.enterInner(l[c],null,t,!1);return t}insertNode(e,t,s){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let l=this.findPlace(e,t,s);if(l){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let c=nt.none;for(let f of l.concat(e.marks))(o.type?o.type.allowsMarkType(f.type):hb(f.type,e.type))&&(c=f.addToSet(c));return o.content.push(e.mark(c)),!0}return!1}enter(e,t,s,l){let o=this.findPlace(e.create(t),s,!1);return o&&(o=this.enterInner(e,t,s,!0,l)),o}enterInner(e,t,s,l=!1,o){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let f=ub(e,o,c.options);c.options&ho&&c.content.length==0&&(f|=ho);let d=nt.none;return s=s.filter(h=>(c.type?c.type.allowsMarkType(h.type):hb(h.type,e))?(d=h.addToSet(d),!1):!0),this.nodes.push(new nc(e,t,d,l,null,f)),this.open++,s}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=To)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let s=this.nodes[t].content;for(let l=s.length-1;l>=0;l--)e+=s[l].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==e&&this.find[s].offset==t&&(this.find[s].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,s){if(e!=t&&this.find)for(let l=0;l<this.find.length;l++)this.find[l].pos==null&&e.nodeType==1&&e.contains(this.find[l].node)&&t.compareDocumentPosition(this.find[l].node)&(s?2:4)&&(this.find[l].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),s=this.options.context,l=!this.isOpen&&(!s||s.parent.type==this.nodes[0].type),o=-(s?s.depth+1:0)+(l?0:1),c=(f,d)=>{for(;f>=0;f--){let h=t[f];if(h==""){if(f==t.length-1||f==0)continue;for(;d>=o;d--)if(c(f-1,d))return!0;return!1}else{let m=d>0||d==0&&l?this.nodes[d].type:s&&d>=o?s.node(d-o).type:null;if(!m||m.name!=h&&!m.isInGroup(h))return!1;d--}}return!0};return c(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(s&&s.isTextblock&&s.defaultAttrs)return s}for(let t in this.parser.schema.nodes){let s=this.parser.schema.nodes[t];if(s.isTextblock&&s.defaultAttrs)return s}}}function qE(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let s=e.nodeType==1?e.nodeName.toLowerCase():null;s&&ox.hasOwnProperty(s)&&t?(t.appendChild(e),e=t):s=="li"?t=e:s&&(t=null)}}function $E(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function db(n){let e={};for(let t in n)e[t]=n[t];return e}function hb(n,e){let t=e.schema.nodes;for(let s in t){let l=t[s];if(!l.allowsMarkType(n))continue;let o=[],c=f=>{o.push(f);for(let d=0;d<f.edgeCount;d++){let{type:h,next:m}=f.edge(d);if(h==e||o.indexOf(m)<0&&c(m))return!0}};if(c(l.contentMatch))return!0}}class ri{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},s){s||(s=Zd(t).createDocumentFragment());let l=s,o=[];return e.forEach(c=>{if(o.length||c.marks.length){let f=0,d=0;for(;f<o.length&&d<c.marks.length;){let h=c.marks[d];if(!this.marks[h.type.name]){d++;continue}if(!h.eq(o[f][0])||h.type.spec.spanning===!1)break;f++,d++}for(;f<o.length;)l=o.pop()[1];for(;d<c.marks.length;){let h=c.marks[d++],m=this.serializeMark(h,c.isInline,t);m&&(o.push([h,l]),l.appendChild(m.dom),l=m.contentDOM||m.dom)}}l.appendChild(this.serializeNodeInner(c,t))}),s}serializeNodeInner(e,t){let{dom:s,contentDOM:l}=pc(Zd(t),this.nodes[e.type.name](e),null,e.attrs);if(l){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,l)}return s}serializeNode(e,t={}){let s=this.serializeNodeInner(e,t);for(let l=e.marks.length-1;l>=0;l--){let o=this.serializeMark(e.marks[l],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(s),s=o.dom)}return s}serializeMark(e,t,s={}){let l=this.marks[e.type.name];return l&&pc(Zd(s),l(e,t),null,e.attrs)}static renderSpec(e,t,s=null,l){return pc(e,t,s,l)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ri(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=pb(e.nodes);return t.text||(t.text=s=>s.text),t}static marksFromSchema(e){return pb(e.marks)}}function pb(n){let e={};for(let t in n){let s=n[t].spec.toDOM;s&&(e[t]=s)}return e}function Zd(n){return n.document||window.document}const mb=new WeakMap;function GE(n){let e=mb.get(n);return e===void 0&&mb.set(n,e=YE(n)),e}function YE(n){let e=null;function t(s){if(s&&typeof s=="object")if(Array.isArray(s))if(typeof s[0]=="string")e||(e=[]),e.push(s);else for(let l=0;l<s.length;l++)t(s[l]);else for(let l in s)t(s[l])}return t(n),e}function pc(n,e,t,s){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let l=e[0],o;if(typeof l!="string")throw new RangeError("Invalid array passed to renderSpec");if(s&&(o=GE(s))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=l.indexOf(" ");c>0&&(t=l.slice(0,c),l=l.slice(c+1));let f,d=t?n.createElementNS(t,l):n.createElement(l),h=e[1],m=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){m=2;for(let y in h)if(h[y]!=null){let x=y.indexOf(" ");x>0?d.setAttributeNS(y.slice(0,x),y.slice(x+1),h[y]):y=="style"&&d.style?d.style.cssText=h[y]:d.setAttribute(y,h[y])}}for(let y=m;y<e.length;y++){let x=e[y];if(x===0){if(y<e.length-1||y>m)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:v,contentDOM:k}=pc(n,x,t,s);if(d.appendChild(v),k){if(f)throw new RangeError("Multiple content holes");f=k}}}return{dom:d,contentDOM:f}}const ax=65535,cx=Math.pow(2,16);function KE(n,e){return n+e*cx}function gb(n){return n&ax}function PE(n){return(n-(n&ax))/cx}const ux=1,fx=2,mc=4,dx=8;class jh{constructor(e,t,s){this.pos=e,this.delInfo=t,this.recover=s}get deleted(){return(this.delInfo&dx)>0}get deletedBefore(){return(this.delInfo&(ux|mc))>0}get deletedAfter(){return(this.delInfo&(fx|mc))>0}get deletedAcross(){return(this.delInfo&mc)>0}}class bn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&bn.empty)return bn.empty}recover(e){let t=0,s=gb(e);if(!this.inverted)for(let l=0;l<s;l++)t+=this.ranges[l*3+2]-this.ranges[l*3+1];return this.ranges[s*3]+t+PE(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,s){let l=0,o=this.inverted?2:1,c=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?l:0);if(d>e)break;let h=this.ranges[f+o],m=this.ranges[f+c],y=d+h;if(e<=y){let x=h?e==d?-1:e==y?1:t:t,v=d+l+(x<0?0:m);if(s)return v;let k=e==(t<0?d:y)?null:KE(f/3,e-d),E=e==d?fx:e==y?ux:mc;return(t<0?e!=d:e!=y)&&(E|=dx),new jh(v,E,k)}l+=m-h}return s?e+l:new jh(e+l,0,null)}touches(e,t){let s=0,l=gb(t),o=this.inverted?2:1,c=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?s:0);if(d>e)break;let h=this.ranges[f+o],m=d+h;if(e<=m&&f==l*3)return!0;s+=this.ranges[f+c]-h}return!1}forEach(e){let t=this.inverted?2:1,s=this.inverted?1:2;for(let l=0,o=0;l<this.ranges.length;l+=3){let c=this.ranges[l],f=c-(this.inverted?o:0),d=c+(this.inverted?0:o),h=this.ranges[l+t],m=this.ranges[l+s];e(f,f+h,d,d+m),o+=m-h}}invert(){return new bn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?bn.empty:new bn(e<0?[0,-e,0]:[0,0,e])}}bn.empty=new bn([]);class Eo{constructor(e,t,s=0,l=e?e.length:0){this.mirror=t,this.from=s,this.to=l,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Eo(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,s=this._maps.length;t<e._maps.length;t++){let l=e.getMirror(t);this.appendMap(e._maps[t],l!=null&&l<t?s+l:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,s=this._maps.length+e._maps.length;t>=0;t--){let l=e.getMirror(t);this.appendMap(e._maps[t].invert(),l!=null&&l>t?s-l-1:void 0)}}invert(){let e=new Eo;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let s=this.from;s<this.to;s++)e=this._maps[s].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,s){let l=0;for(let o=this.from;o<this.to;o++){let c=this._maps[o],f=c.mapResult(e,t);if(f.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,e=this._maps[d].recover(f.recover);continue}}l|=f.delInfo,e=f.pos}return s?e:new jh(e,l,null)}}const Wd=Object.create(null);class Ft{getMap(){return bn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let s=Wd[t.stepType];if(!s)throw new RangeError(`No step type ${t.stepType} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in Wd)throw new RangeError("Duplicate use of step JSON ID "+e);return Wd[e]=t,t.prototype.jsonID=e,t}}class Et{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Et(e,null)}static fail(e){return new Et(null,e)}static fromReplace(e,t,s,l){try{return Et.ok(e.replace(t,s,l))}catch(o){if(o instanceof Sc)return Et.fail(o.message);throw o}}}function ap(n,e,t){let s=[];for(let l=0;l<n.childCount;l++){let o=n.child(l);o.content.size&&(o=o.copy(ap(o.content,e,o))),o.isInline&&(o=e(o,t,l)),s.push(o)}return Q.fromArray(s)}class as extends Ft{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=e.resolve(this.from),l=s.node(s.sharedDepth(this.to)),o=new oe(ap(t.content,(c,f)=>!c.isAtom||!f.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),l),t.openStart,t.openEnd);return Et.fromReplace(e,this.from,this.to,o)}invert(){return new Vn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new as(t.pos,s.pos,this.mark)}merge(e){return e instanceof as&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new as(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new as(t.from,t.to,e.markFromJSON(t.mark))}}Ft.jsonID("addMark",as);class Vn extends Ft{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=new oe(ap(t.content,l=>l.mark(this.mark.removeFromSet(l.marks)),e),t.openStart,t.openEnd);return Et.fromReplace(e,this.from,this.to,s)}invert(){return new as(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new Vn(t.pos,s.pos,this.mark)}merge(e){return e instanceof Vn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Vn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Vn(t.from,t.to,e.markFromJSON(t.mark))}}Ft.jsonID("removeMark",Vn);class cs extends Ft{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Et.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Et.fromReplace(e,this.pos,this.pos+1,new oe(Q.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let s=this.mark.addToSet(t.marks);if(s.length==t.marks.length){for(let l=0;l<t.marks.length;l++)if(!t.marks[l].isInSet(s))return new cs(this.pos,t.marks[l]);return new cs(this.pos,this.mark)}}return new Ws(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new cs(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new cs(t.pos,e.markFromJSON(t.mark))}}Ft.jsonID("addNodeMark",cs);class Ws extends Ft{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Et.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Et.fromReplace(e,this.pos,this.pos+1,new oe(Q.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new cs(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ws(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ws(t.pos,e.markFromJSON(t.mark))}}Ft.jsonID("removeNodeMark",Ws);class Dt extends Ft{constructor(e,t,s,l=!1){super(),this.from=e,this.to=t,this.slice=s,this.structure=l}apply(e){return this.structure&&Rh(e,this.from,this.to)?Et.fail("Structure replace would overwrite content"):Et.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new bn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Dt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deletedAcross&&s.deletedAcross?null:new Dt(t.pos,Math.max(t.pos,s.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Dt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?oe.empty:new oe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Dt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?oe.empty:new oe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Dt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Dt(t.from,t.to,oe.fromJSON(e,t.slice),!!t.structure)}}Ft.jsonID("replace",Dt);class jt extends Ft{constructor(e,t,s,l,o,c,f=!1){super(),this.from=e,this.to=t,this.gapFrom=s,this.gapTo=l,this.slice=o,this.insert=c,this.structure=f}apply(e){if(this.structure&&(Rh(e,this.from,this.gapFrom)||Rh(e,this.gapTo,this.to)))return Et.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Et.fail("Gap is not a flat range");let s=this.slice.insertAt(this.insert,t.content);return s?Et.fromReplace(e,this.from,this.to,s):Et.fail("Content does not fit in gap")}getMap(){return new bn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new jt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1),l=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?s.pos:e.map(this.gapTo,1);return t.deletedAcross&&s.deletedAcross||l<t.pos||o>s.pos?null:new jt(t.pos,s.pos,l,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new jt(t.from,t.to,t.gapFrom,t.gapTo,oe.fromJSON(e,t.slice),t.insert,!!t.structure)}}Ft.jsonID("replaceAround",jt);function Rh(n,e,t){let s=n.resolve(e),l=t-e,o=s.depth;for(;l>0&&o>0&&s.indexAfter(o)==s.node(o).childCount;)o--,l--;if(l>0){let c=s.node(o).maybeChild(s.indexAfter(o));for(;l>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,l--}}return!1}function FE(n,e,t,s){let l=[],o=[],c,f;n.doc.nodesBetween(e,t,(d,h,m)=>{if(!d.isInline)return;let y=d.marks;if(!s.isInSet(y)&&m.type.allowsMarkType(s.type)){let x=Math.max(h,e),v=Math.min(h+d.nodeSize,t),k=s.addToSet(y);for(let E=0;E<y.length;E++)y[E].isInSet(k)||(c&&c.to==x&&c.mark.eq(y[E])?c.to=v:l.push(c=new Vn(x,v,y[E])));f&&f.to==x?f.to=v:o.push(f=new as(x,v,s))}}),l.forEach(d=>n.step(d)),o.forEach(d=>n.step(d))}function JE(n,e,t,s){let l=[],o=0;n.doc.nodesBetween(e,t,(c,f)=>{if(!c.isInline)return;o++;let d=null;if(s instanceof uu){let h=c.marks,m;for(;m=s.isInSet(h);)(d||(d=[])).push(m),h=m.removeFromSet(h)}else s?s.isInSet(c.marks)&&(d=[s]):d=c.marks;if(d&&d.length){let h=Math.min(f+c.nodeSize,t);for(let m=0;m<d.length;m++){let y=d[m],x;for(let v=0;v<l.length;v++){let k=l[v];k.step==o-1&&y.eq(l[v].style)&&(x=k)}x?(x.to=h,x.step=o):l.push({style:y,from:Math.max(f,e),to:h,step:o})}}}),l.forEach(c=>n.step(new Vn(c.from,c.to,c.style)))}function cp(n,e,t,s=t.contentMatch,l=!0){let o=n.doc.nodeAt(e),c=[],f=e+1;for(let d=0;d<o.childCount;d++){let h=o.child(d),m=f+h.nodeSize,y=s.matchType(h.type);if(!y)c.push(new Dt(f,m,oe.empty));else{s=y;for(let x=0;x<h.marks.length;x++)t.allowsMarkType(h.marks[x].type)||n.step(new Vn(f,m,h.marks[x]));if(l&&h.isText&&t.whitespace!="pre"){let x,v=/\r?\n|\r/g,k;for(;x=v.exec(h.text);)k||(k=new oe(Q.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),c.push(new Dt(f+x.index,f+x.index+x[0].length,k))}}f=m}if(!s.validEnd){let d=s.fillBefore(Q.empty,!0);n.replace(f,f,new oe(d,0,0))}for(let d=c.length-1;d>=0;d--)n.step(c[d])}function XE(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function ol(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let s=n.depth,l=0,o=0;;--s){let c=n.$from.node(s),f=n.$from.index(s)+l,d=n.$to.indexAfter(s)-o;if(s<n.depth&&c.canReplace(f,d,t))return s;if(s==0||c.type.spec.isolating||!XE(c,f,d))break;f&&(l=1),d<c.childCount&&(o=1)}return null}function QE(n,e,t){let{$from:s,$to:l,depth:o}=e,c=s.before(o+1),f=l.after(o+1),d=c,h=f,m=Q.empty,y=0;for(let k=o,E=!1;k>t;k--)E||s.index(k)>0?(E=!0,m=Q.from(s.node(k).copy(m)),y++):d--;let x=Q.empty,v=0;for(let k=o,E=!1;k>t;k--)E||l.after(k+1)<l.end(k)?(E=!0,x=Q.from(l.node(k).copy(x)),v++):h++;n.step(new jt(d,h,c,f,new oe(m.append(x),y,v),m.size-y,!0))}function up(n,e,t=null,s=n){let l=ZE(n,e),o=l&&WE(s,e);return o?l.map(yb).concat({type:e,attrs:t}).concat(o.map(yb)):null}function yb(n){return{type:n,attrs:null}}function ZE(n,e){let{parent:t,startIndex:s,endIndex:l}=n,o=t.contentMatchAt(s).findWrapping(e);if(!o)return null;let c=o.length?o[0]:e;return t.canReplaceWith(s,l,c)?o:null}function WE(n,e){let{parent:t,startIndex:s,endIndex:l}=n,o=t.child(s),c=e.contentMatch.findWrapping(o.type);if(!c)return null;let d=(c.length?c[c.length-1]:e).contentMatch;for(let h=s;d&&h<l;h++)d=d.matchType(t.child(h).type);return!d||!d.validEnd?null:c}function eM(n,e,t){let s=Q.empty;for(let c=t.length-1;c>=0;c--){if(s.size){let f=t[c].type.contentMatch.matchFragment(s);if(!f||!f.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}s=Q.from(t[c].type.create(t[c].attrs,s))}let l=e.start,o=e.end;n.step(new jt(l,o,l,o,new oe(s,0,0),t.length,!0))}function tM(n,e,t,s,l){if(!s.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(c,f)=>{let d=typeof l=="function"?l(c):l;if(c.isTextblock&&!c.hasMarkup(s,d)&&nM(n.doc,n.mapping.slice(o).map(f),s)){let h=null;if(s.schema.linebreakReplacement){let v=s.whitespace=="pre",k=!!s.contentMatch.matchType(s.schema.linebreakReplacement);v&&!k?h=!1:!v&&k&&(h=!0)}h===!1&&px(n,c,f,o),cp(n,n.mapping.slice(o).map(f,1),s,void 0,h===null);let m=n.mapping.slice(o),y=m.map(f,1),x=m.map(f+c.nodeSize,1);return n.step(new jt(y,x,y+1,x-1,new oe(Q.from(s.create(d,null,c.marks)),0,0),1,!0)),h===!0&&hx(n,c,f,o),!1}})}function hx(n,e,t,s){e.forEach((l,o)=>{if(l.isText){let c,f=/\r?\n|\r/g;for(;c=f.exec(l.text);){let d=n.mapping.slice(s).map(t+1+o+c.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function px(n,e,t,s){e.forEach((l,o)=>{if(l.type==l.type.schema.linebreakReplacement){let c=n.mapping.slice(s).map(t+1+o);n.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function nM(n,e,t){let s=n.resolve(e),l=s.index();return s.parent.canReplaceWith(l,l+1,t)}function rM(n,e,t,s,l){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let c=t.create(s,null,l||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,c);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new jt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new oe(Q.from(c),0,0),1,!0))}function Tr(n,e,t=1,s){let l=n.resolve(e),o=l.depth-t,c=s&&s[s.length-1]||l.parent;if(o<0||l.parent.type.spec.isolating||!l.parent.canReplace(l.index(),l.parent.childCount)||!c.type.validContent(l.parent.content.cutByIndex(l.index(),l.parent.childCount)))return!1;for(let h=l.depth-1,m=t-2;h>o;h--,m--){let y=l.node(h),x=l.index(h);if(y.type.spec.isolating)return!1;let v=y.content.cutByIndex(x,y.childCount),k=s&&s[m+1];k&&(v=v.replaceChild(0,k.type.create(k.attrs)));let E=s&&s[m]||y;if(!y.canReplace(x+1,y.childCount)||!E.type.validContent(v))return!1}let f=l.indexAfter(o),d=s&&s[0];return l.node(o).canReplaceWith(f,f,d?d.type:l.node(o+1).type)}function sM(n,e,t=1,s){let l=n.doc.resolve(e),o=Q.empty,c=Q.empty;for(let f=l.depth,d=l.depth-t,h=t-1;f>d;f--,h--){o=Q.from(l.node(f).copy(o));let m=s&&s[h];c=Q.from(m?m.type.create(m.attrs,c):l.node(f).copy(c))}n.step(new Dt(e,e,new oe(o.append(c),t,t),!0))}function bs(n,e){let t=n.resolve(e),s=t.index();return mx(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(s,s+1)}function iM(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:s}=n.type.schema;for(let l=0;l<e.childCount;l++){let o=e.child(l),c=o.type==s?n.type.schema.nodes.text:o.type;if(t=t.matchType(c),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function mx(n,e){return!!(n&&e&&!n.isLeaf&&iM(n,e))}function fu(n,e,t=-1){let s=n.resolve(e);for(let l=s.depth;;l--){let o,c,f=s.index(l);if(l==s.depth?(o=s.nodeBefore,c=s.nodeAfter):t>0?(o=s.node(l+1),f++,c=s.node(l).maybeChild(f)):(o=s.node(l).maybeChild(f-1),c=s.node(l+1)),o&&!o.isTextblock&&mx(o,c)&&s.node(l).canReplace(f,f+1))return e;if(l==0)break;e=t<0?s.before(l):s.after(l)}}function lM(n,e,t){let s=null,{linebreakReplacement:l}=n.doc.type.schema,o=n.doc.resolve(e-t),c=o.node().type;if(l&&c.inlineContent){let m=c.whitespace=="pre",y=!!c.contentMatch.matchType(l);m&&!y?s=!1:!m&&y&&(s=!0)}let f=n.steps.length;if(s===!1){let m=n.doc.resolve(e+t);px(n,m.node(),m.before(),f)}c.inlineContent&&cp(n,e+t-1,c,o.node().contentMatchAt(o.index()),s==null);let d=n.mapping.slice(f),h=d.map(e-t);if(n.step(new Dt(h,d.map(e+t,-1),oe.empty,!0)),s===!0){let m=n.doc.resolve(h);hx(n,m.node(),m.before(),n.steps.length)}return n}function oM(n,e,t){let s=n.resolve(e);if(s.parent.canReplaceWith(s.index(),s.index(),t))return e;if(s.parentOffset==0)for(let l=s.depth-1;l>=0;l--){let o=s.index(l);if(s.node(l).canReplaceWith(o,o,t))return s.before(l+1);if(o>0)return null}if(s.parentOffset==s.parent.content.size)for(let l=s.depth-1;l>=0;l--){let o=s.indexAfter(l);if(s.node(l).canReplaceWith(o,o,t))return s.after(l+1);if(o<s.node(l).childCount)return null}return null}function gx(n,e,t){let s=n.resolve(e);if(!t.content.size)return e;let l=t.content;for(let o=0;o<t.openStart;o++)l=l.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let c=s.depth;c>=0;c--){let f=c==s.depth?0:s.pos<=(s.start(c+1)+s.end(c+1))/2?-1:1,d=s.index(c)+(f>0?1:0),h=s.node(c),m=!1;if(o==1)m=h.canReplace(d,d,l);else{let y=h.contentMatchAt(d).findWrapping(l.firstChild.type);m=y&&h.canReplaceWith(d,d,y[0])}if(m)return f==0?s.pos:f<0?s.before(c+1):s.after(c+1)}return null}function du(n,e,t=e,s=oe.empty){if(e==t&&!s.size)return null;let l=n.resolve(e),o=n.resolve(t);return yx(l,o,s)?new Dt(e,t,s):new aM(l,o,s).fit()}function yx(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class aM{constructor(e,t,s){this.$from=e,this.$to=t,this.unplaced=s,this.frontier=[],this.placed=Q.empty;for(let l=0;l<=e.depth;l++){let o=e.node(l);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(l))})}for(let l=e.depth;l>0;l--)this.placed=Q.from(e.node(l).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,s=this.$from,l=this.close(e<0?this.$to:s.doc.resolve(e));if(!l)return null;let o=this.placed,c=s.depth,f=l.depth;for(;c&&f&&o.childCount==1;)o=o.firstChild.content,c--,f--;let d=new oe(o,c,f);return e>-1?new jt(s.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||s.pos!=this.$to.pos?new Dt(s.pos,l.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,s=0,l=this.unplaced.openEnd;s<e;s++){let o=t.firstChild;if(t.childCount>1&&(l=0),o.type.spec.isolating&&l<=s){e=s;break}t=o.content}for(let t=1;t<=2;t++)for(let s=t==1?e:this.unplaced.openStart;s>=0;s--){let l,o=null;s?(o=eh(this.unplaced.content,s-1).firstChild,l=o.content):l=this.unplaced.content;let c=l.firstChild;for(let f=this.depth;f>=0;f--){let{type:d,match:h}=this.frontier[f],m,y=null;if(t==1&&(c?h.matchType(c.type)||(y=h.fillBefore(Q.from(c),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:s,frontierDepth:f,parent:o,inject:y};if(t==2&&c&&(m=h.findWrapping(c.type)))return{sliceDepth:s,frontierDepth:f,parent:o,wrap:m};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:s}=this.unplaced,l=eh(e,t);return!l.childCount||l.firstChild.isLeaf?!1:(this.unplaced=new oe(e,t+1,Math.max(s,l.size+t>=e.size-s?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:s}=this.unplaced,l=eh(e,t);if(l.childCount<=1&&t>0){let o=e.size-t<=t+l.size;this.unplaced=new oe(lo(e,t-1,1),t-1,o?t-1:s)}else this.unplaced=new oe(lo(e,t,1),t,s)}placeNodes({sliceDepth:e,frontierDepth:t,parent:s,inject:l,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let E=0;E<o.length;E++)this.openFrontierNode(o[E]);let c=this.unplaced,f=s?s.content:c.content,d=c.openStart-e,h=0,m=[],{match:y,type:x}=this.frontier[t];if(l){for(let E=0;E<l.childCount;E++)m.push(l.child(E));y=y.matchFragment(l)}let v=f.size+e-(c.content.size-c.openEnd);for(;h<f.childCount;){let E=f.child(h),M=y.matchType(E.type);if(!M)break;h++,(h>1||d==0||E.content.size)&&(y=M,m.push(bx(E.mark(x.allowedMarks(E.marks)),h==1?d:0,h==f.childCount?v:-1)))}let k=h==f.childCount;k||(v=-1),this.placed=oo(this.placed,t,Q.from(m)),this.frontier[t].match=y,k&&v<0&&s&&s.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,M=f;E<v;E++){let C=M.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),M=C.content}this.unplaced=k?e==0?oe.empty:new oe(lo(c.content,e-1,1),e-1,v<0?c.openEnd:e-1):new oe(lo(c.content,e,h),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!th(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:s}=this.$to,l=this.$to.after(s);for(;s>1&&l==this.$to.end(--s);)++l;return l}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:s,type:l}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),c=th(e,t,l,s,o);if(c){for(let f=t-1;f>=0;f--){let{match:d,type:h}=this.frontier[f],m=th(e,f,h,d,!0);if(!m||m.childCount)continue e}return{depth:t,fit:c,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=oo(this.placed,t.depth,t.fit)),e=t.move;for(let s=t.depth+1;s<=e.depth;s++){let l=e.node(s),o=l.type.contentMatch.fillBefore(l.content,!0,e.index(s));this.openFrontierNode(l.type,l.attrs,o)}return e}openFrontierNode(e,t=null,s){let l=this.frontier[this.depth];l.match=l.match.matchType(e),this.placed=oo(this.placed,this.depth,Q.from(e.create(t,s))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Q.empty,!0);t.childCount&&(this.placed=oo(this.placed,this.frontier.length,t))}}function lo(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(lo(n.firstChild.content,e-1,t)))}function oo(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(oo(n.lastChild.content,e-1,t)))}function eh(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function bx(n,e,t){if(e<=0)return n;let s=n.content;return e>1&&(s=s.replaceChild(0,bx(s.firstChild,e-1,s.childCount==1?t-1:0))),e>0&&(s=n.type.contentMatch.fillBefore(s).append(s),t<=0&&(s=s.append(n.type.contentMatch.matchFragment(s).fillBefore(Q.empty,!0)))),n.copy(s)}function th(n,e,t,s,l){let o=n.node(e),c=l?n.indexAfter(e):n.index(e);if(c==o.childCount&&!t.compatibleContent(o.type))return null;let f=s.fillBefore(o.content,!0,c);return f&&!cM(t,o.content,c)?f:null}function cM(n,e,t){for(let s=t;s<e.childCount;s++)if(!n.allowsMarks(e.child(s).marks))return!0;return!1}function uM(n){return n.spec.defining||n.spec.definingForContent}function fM(n,e,t,s){if(!s.size)return n.deleteRange(e,t);let l=n.doc.resolve(e),o=n.doc.resolve(t);if(yx(l,o,s))return n.step(new Dt(e,t,s));let c=vx(l,o);c[c.length-1]==0&&c.pop();let f=-(l.depth+1);c.unshift(f);for(let x=l.depth,v=l.pos-1;x>0;x--,v--){let k=l.node(x).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;c.indexOf(x)>-1?f=x:l.before(x)==v&&c.splice(1,0,-x)}let d=c.indexOf(f),h=[],m=s.openStart;for(let x=s.content,v=0;;v++){let k=x.firstChild;if(h.push(k),v==s.openStart)break;x=k.content}for(let x=m-1;x>=0;x--){let v=h[x],k=uM(v.type);if(k&&!v.sameMarkup(l.node(Math.abs(f)-1)))m=x;else if(k||!v.type.isTextblock)break}for(let x=s.openStart;x>=0;x--){let v=(x+m+1)%(s.openStart+1),k=h[v];if(k)for(let E=0;E<c.length;E++){let M=c[(E+d)%c.length],C=!0;M<0&&(C=!1,M=-M);let z=l.node(M-1),q=l.index(M-1);if(z.canReplaceWith(q,q,k.type,k.marks))return n.replace(l.before(M),C?o.after(M):t,new oe(xx(s.content,0,s.openStart,v),v,s.openEnd))}}let y=n.steps.length;for(let x=c.length-1;x>=0&&(n.replace(e,t,s),!(n.steps.length>y));x--){let v=c[x];v<0||(e=l.before(v),t=o.after(v))}}function xx(n,e,t,s,l){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(xx(o.content,e+1,t,s,o)))}if(e>s){let o=l.contentMatchAt(0),c=o.fillBefore(n).append(n);n=c.append(o.matchFragment(c).fillBefore(Q.empty,!0))}return n}function dM(n,e,t,s){if(!s.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let l=oM(n.doc,e,s.type);l!=null&&(e=t=l)}n.replaceRange(e,t,new oe(Q.from(s),0,0))}function hM(n,e,t){let s=n.doc.resolve(e),l=n.doc.resolve(t),o=vx(s,l);for(let c=0;c<o.length;c++){let f=o[c],d=c==o.length-1;if(d&&f==0||s.node(f).type.contentMatch.validEnd)return n.delete(s.start(f),l.end(f));if(f>0&&(d||s.node(f-1).canReplace(s.index(f-1),l.indexAfter(f-1))))return n.delete(s.before(f),l.after(f))}for(let c=1;c<=s.depth&&c<=l.depth;c++)if(e-s.start(c)==s.depth-c&&t>s.end(c)&&l.end(c)-t!=l.depth-c&&s.start(c-1)==l.start(c-1)&&s.node(c-1).canReplace(s.index(c-1),l.index(c-1)))return n.delete(s.before(c),t);n.delete(e,t)}function vx(n,e){let t=[],s=Math.min(n.depth,e.depth);for(let l=s;l>=0;l--){let o=n.start(l);if(o<n.pos-(n.depth-l)||e.end(l)>e.pos+(e.depth-l)||n.node(l).type.spec.isolating||e.node(l).type.spec.isolating)break;(o==e.start(l)||l==n.depth&&l==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&l&&e.start(l-1)==o-1)&&t.push(l)}return t}class Zi extends Ft{constructor(e,t,s){super(),this.pos=e,this.attr=t,this.value=s}apply(e){let t=e.nodeAt(this.pos);if(!t)return Et.fail("No node at attribute step's position");let s=Object.create(null);for(let o in t.attrs)s[o]=t.attrs[o];s[this.attr]=this.value;let l=t.type.create(s,null,t.marks);return Et.fromReplace(e,this.pos,this.pos+1,new oe(Q.from(l),0,t.isLeaf?0:1))}getMap(){return bn.empty}invert(e){return new Zi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Zi(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Zi(t.pos,t.attr,t.value)}}Ft.jsonID("attr",Zi);class Mo extends Ft{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let l in e.attrs)t[l]=e.attrs[l];t[this.attr]=this.value;let s=e.type.create(t,e.content,e.marks);return Et.ok(s)}getMap(){return bn.empty}invert(e){return new Mo(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Mo(t.attr,t.value)}}Ft.jsonID("docAttr",Mo);let el=class extends Error{};el=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};el.prototype=Object.create(Error.prototype);el.prototype.constructor=el;el.prototype.name="TransformError";class Sx{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Eo}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new el(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,t=-1e9;for(let s=0;s<this.mapping.maps.length;s++){let l=this.mapping.maps[s];s&&(e=l.map(e,1),t=l.map(t,-1)),l.forEach((o,c,f,d)=>{e=Math.min(e,f),t=Math.max(t,d)})}return e==1e9?null:{from:e,to:t}}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,s=oe.empty){let l=du(this.doc,e,t,s);return l&&this.step(l),this}replaceWith(e,t,s){return this.replace(e,t,new oe(Q.from(s),0,0))}delete(e,t){return this.replace(e,t,oe.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,s){return fM(this,e,t,s),this}replaceRangeWith(e,t,s){return dM(this,e,t,s),this}deleteRange(e,t){return hM(this,e,t),this}lift(e,t){return QE(this,e,t),this}join(e,t=1){return lM(this,e,t),this}wrap(e,t){return eM(this,e,t),this}setBlockType(e,t=e,s,l=null){return tM(this,e,t,s,l),this}setNodeMarkup(e,t,s=null,l){return rM(this,e,t,s,l),this}setNodeAttribute(e,t,s){return this.step(new Zi(e,t,s)),this}setDocAttribute(e,t){return this.step(new Mo(e,t)),this}addNodeMark(e,t){return this.step(new cs(e,t)),this}removeNodeMark(e,t){let s=this.doc.nodeAt(e);if(!s)throw new RangeError("No node at position "+e);if(t instanceof nt)t.isInSet(s.marks)&&this.step(new Ws(e,t));else{let l=s.marks,o,c=[];for(;o=t.isInSet(l);)c.push(new Ws(e,o)),l=o.removeFromSet(l);for(let f=c.length-1;f>=0;f--)this.step(c[f])}return this}split(e,t=1,s){return sM(this,e,t,s),this}addMark(e,t,s){return FE(this,e,t,s),this}removeMark(e,t,s){return JE(this,e,t,s),this}clearIncompatible(e,t,s){return cp(this,e,t,s),this}}const nh=Object.create(null);class Re{constructor(e,t,s){this.$anchor=e,this.$head=t,this.ranges=s||[new pM(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=oe.empty){let s=t.content.lastChild,l=null;for(let f=0;f<t.openEnd;f++)l=s,s=s.lastChild;let o=e.steps.length,c=this.ranges;for(let f=0;f<c.length;f++){let{$from:d,$to:h}=c[f],m=e.mapping.slice(o);e.replaceRange(m.map(d.pos),m.map(h.pos),f?oe.empty:t),f==0&&vb(e,o,(s?s.isInline:l&&l.isTextblock)?-1:1)}}replaceWith(e,t){let s=e.steps.length,l=this.ranges;for(let o=0;o<l.length;o++){let{$from:c,$to:f}=l[o],d=e.mapping.slice(s),h=d.map(c.pos),m=d.map(f.pos);o?e.deleteRange(h,m):(e.replaceRangeWith(h,m,t),vb(e,s,t.isInline?-1:1))}}static findFrom(e,t,s=!1){let l=e.parent.inlineContent?new ke(e):Ki(e.node(0),e.parent,e.pos,e.index(),t,s);if(l)return l;for(let o=e.depth-1;o>=0;o--){let c=t<0?Ki(e.node(0),e.node(o),e.before(o+1),e.index(o),t,s):Ki(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,s);if(c)return c}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new xn(e.node(0))}static atStart(e){return Ki(e,e,0,0,1)||new xn(e)}static atEnd(e){return Ki(e,e,e.content.size,e.childCount,-1)||new xn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let s=nh[t.type];if(!s)throw new RangeError(`No selection type ${t.type} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in nh)throw new RangeError("Duplicate use of selection JSON ID "+e);return nh[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ke.between(this.$anchor,this.$head).getBookmark()}}Re.prototype.visible=!0;class pM{constructor(e,t){this.$from=e,this.$to=t}}let bb=!1;function xb(n){!bb&&!n.parent.inlineContent&&(bb=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class ke extends Re{constructor(e,t=e){xb(e),xb(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let s=e.resolve(t.map(this.head));if(!s.parent.inlineContent)return Re.near(s);let l=e.resolve(t.map(this.anchor));return new ke(l.parent.inlineContent?l:s,s)}replace(e,t=oe.empty){if(super.replace(e,t),t==oe.empty){let s=this.$from.marksAcross(this.$to);s&&e.ensureMarks(s)}}eq(e){return e instanceof ke&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new hu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ke(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,s=t){let l=e.resolve(t);return new this(l,s==t?l:e.resolve(s))}static between(e,t,s){let l=e.pos-t.pos;if((!s||l)&&(s=l>=0?1:-1),!t.parent.inlineContent){let o=Re.findFrom(t,s,!0)||Re.findFrom(t,-s,!0);if(o)t=o.$head;else return Re.near(t,s)}return e.parent.inlineContent||(l==0?e=t:(e=(Re.findFrom(e,-s,!0)||Re.findFrom(e,s,!0)).$anchor,e.pos<t.pos!=l<0&&(e=t))),new ke(e,t)}}Re.jsonID("text",ke);class hu{constructor(e,t){this.anchor=e,this.head=t}map(e){return new hu(e.map(this.anchor),e.map(this.head))}resolve(e){return ke.between(e.resolve(this.anchor),e.resolve(this.head))}}class xe extends Re{constructor(e){let t=e.nodeAfter,s=e.node(0).resolve(e.pos+t.nodeSize);super(e,s),this.node=t}map(e,t){let{deleted:s,pos:l}=t.mapResult(this.anchor),o=e.resolve(l);return s?Re.near(o):new xe(o)}content(){return new oe(Q.from(this.node),0,0)}eq(e){return e instanceof xe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new fp(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new xe(e.resolve(t.anchor))}static create(e,t){return new xe(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}xe.prototype.visible=!1;Re.jsonID("node",xe);class fp{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:s}=e.mapResult(this.anchor);return t?new hu(s,s):new fp(s)}resolve(e){let t=e.resolve(this.anchor),s=t.nodeAfter;return s&&xe.isSelectable(s)?new xe(t):Re.near(t)}}class xn extends Re{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=oe.empty){if(t==oe.empty){e.delete(0,e.doc.content.size);let s=Re.atStart(e.doc);s.eq(e.selection)||e.setSelection(s)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new xn(e)}map(e){return new xn(e)}eq(e){return e instanceof xn}getBookmark(){return mM}}Re.jsonID("all",xn);const mM={map(){return this},resolve(n){return new xn(n)}};function Ki(n,e,t,s,l,o=!1){if(e.inlineContent)return ke.create(n,t);for(let c=s-(l>0?0:1);l>0?c<e.childCount:c>=0;c+=l){let f=e.child(c);if(f.isAtom){if(!o&&xe.isSelectable(f))return xe.create(n,t-(l<0?f.nodeSize:0))}else{let d=Ki(n,f,t+l,l<0?f.childCount:0,l,o);if(d)return d}t+=f.nodeSize*l}return null}function vb(n,e,t){let s=n.steps.length-1;if(s<e)return;let l=n.steps[s];if(!(l instanceof Dt||l instanceof jt))return;let o=n.mapping.maps[s],c;o.forEach((f,d,h,m)=>{c==null&&(c=m)}),n.setSelection(Re.near(n.doc.resolve(c),t))}const Sb=1,rc=2,kb=4;class gM extends Sx{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Sb)&~rc,this.storedMarks=null,this}get selectionSet(){return(this.updated&Sb)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=rc,this}ensureMarks(e){return nt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&rc)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~rc,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let s=this.selection;return t&&(e=e.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||nt.none))),s.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,s){let l=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(l.text(e),!0):this.deleteSelection();{if(s==null&&(s=t),!e)return this.deleteRange(t,s);let o=this.storedMarks;if(!o){let c=this.doc.resolve(t);o=s==t?c.marks():c.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(t,s,l.text(e,o)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(Re.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=kb,this}get scrolledIntoView(){return(this.updated&kb)>0}}function Tb(n,e){return!e||!n?n:n.bind(e)}class ao{constructor(e,t,s){this.name=e,this.init=Tb(t.init,s),this.apply=Tb(t.apply,s)}}const yM=[new ao("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new ao("selection",{init(n,e){return n.selection||Re.atStart(e.doc)},apply(n){return n.selection}}),new ao("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,s){return s.selection.$cursor?n.storedMarks:null}}),new ao("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class rh{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=yM.slice(),t&&t.forEach(s=>{if(this.pluginsByKey[s.key])throw new RangeError("Adding different instances of a keyed plugin ("+s.key+")");this.plugins.push(s),this.pluginsByKey[s.key]=s,s.spec.state&&this.fields.push(new ao(s.key,s.spec.state,s))})}}class Xi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let s=0;s<this.config.plugins.length;s++)if(s!=t){let l=this.config.plugins[s];if(l.spec.filterTransaction&&!l.spec.filterTransaction.call(l,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],s=this.applyInner(e),l=null;for(;;){let o=!1;for(let c=0;c<this.config.plugins.length;c++){let f=this.config.plugins[c];if(f.spec.appendTransaction){let d=l?l[c].n:0,h=l?l[c].state:this,m=d<t.length&&f.spec.appendTransaction.call(f,d?t.slice(d):t,h,s);if(m&&s.filterTransaction(m,c)){if(m.setMeta("appendedTransaction",e),!l){l=[];for(let y=0;y<this.config.plugins.length;y++)l.push(y<c?{state:s,n:t.length}:{state:this,n:0})}t.push(m),s=s.applyInner(m),o=!0}l&&(l[c]={state:s,n:t.length})}}if(!o)return{state:s,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Xi(this.config),s=this.config.fields;for(let l=0;l<s.length;l++){let o=s[l];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new gM(this)}static create(e){let t=new rh(e.doc?e.doc.type.schema:e.schema,e.plugins),s=new Xi(t);for(let l=0;l<t.fields.length;l++)s[t.fields[l].name]=t.fields[l].init(e,s);return s}reconfigure(e){let t=new rh(this.schema,e.plugins),s=t.fields,l=new Xi(t);for(let o=0;o<s.length;o++){let c=s[o].name;l[c]=this.hasOwnProperty(c)?this[c]:s[o].init(e,l)}return l}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(s=>s.toJSON())),e&&typeof e=="object")for(let s in e){if(s=="doc"||s=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let l=e[s],o=l.spec.state;o&&o.toJSON&&(t[s]=o.toJSON.call(l,this[l.key]))}return t}static fromJSON(e,t,s){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let l=new rh(e.schema,e.plugins),o=new Xi(l);return l.fields.forEach(c=>{if(c.name=="doc")o.doc=fs.fromJSON(e.schema,t.doc);else if(c.name=="selection")o.selection=Re.fromJSON(o.doc,t.selection);else if(c.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(s)for(let f in s){let d=s[f],h=d.spec.state;if(d.key==c.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,f)){o[c.name]=h.fromJSON.call(d,e,t[f],o);return}}o[c.name]=c.init(e,o)}}),o}}function kx(n,e,t){for(let s in n){let l=n[s];l instanceof Function?l=l.bind(e):s=="handleDOMEvents"&&(l=kx(l,e,{})),t[s]=l}return t}class dt{constructor(e){this.spec=e,this.props={},e.props&&kx(e.props,this,this.props),this.key=e.key?e.key.key:Tx("plugin")}getState(e){return e[this.key]}}const sh=Object.create(null);function Tx(n){return n in sh?n+"$"+ ++sh[n]:(sh[n]=0,n+"$")}class Nt{constructor(e="key"){this.key=Tx(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const dp=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Ex(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const Mx=(n,e,t)=>{let s=Ex(n,t);if(!s)return!1;let l=hp(s);if(!l){let c=s.blockRange(),f=c&&ol(c);return f==null?!1:(e&&e(n.tr.lift(c,f).scrollIntoView()),!0)}let o=l.nodeBefore;if(zx(n,l,e,-1))return!0;if(s.parent.content.size==0&&(tl(o,"end")||xe.isSelectable(o)))for(let c=s.depth;;c--){let f=du(n.doc,s.before(c),s.after(c),oe.empty);if(f&&f.slice.size<f.to-f.from){if(e){let d=n.tr.step(f);d.setSelection(tl(o,"end")?Re.findFrom(d.doc.resolve(d.mapping.map(l.pos,-1)),-1):xe.create(d.doc,l.pos-o.nodeSize)),e(d.scrollIntoView())}return!0}if(c==1||s.node(c-1).childCount>1)break}return o.isAtom&&l.depth==s.depth-1?(e&&e(n.tr.delete(l.pos-o.nodeSize,l.pos).scrollIntoView()),!0):!1},bM=(n,e,t)=>{let s=Ex(n,t);if(!s)return!1;let l=hp(s);return l?Cx(n,l,e):!1},xM=(n,e,t)=>{let s=Nx(n,t);if(!s)return!1;let l=pp(s);return l?Cx(n,l,e):!1};function Cx(n,e,t){let s=e.nodeBefore,l=s,o=e.pos-1;for(;!l.isTextblock;o--){if(l.type.spec.isolating)return!1;let m=l.lastChild;if(!m)return!1;l=m}let c=e.nodeAfter,f=c,d=e.pos+1;for(;!f.isTextblock;d++){if(f.type.spec.isolating)return!1;let m=f.firstChild;if(!m)return!1;f=m}let h=du(n.doc,o,d,oe.empty);if(!h||h.from!=o||h instanceof Dt&&h.slice.size>=d-o)return!1;if(t){let m=n.tr.step(h);m.setSelection(ke.create(m.doc,o)),t(m.scrollIntoView())}return!0}function tl(n,e,t=!1){for(let s=n;s;s=e=="start"?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(t&&s.childCount!=1)return!1}return!1}const wx=(n,e,t)=>{let{$head:s,empty:l}=n.selection,o=s;if(!l)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):s.parentOffset>0)return!1;o=hp(s)}let c=o&&o.nodeBefore;return!c||!xe.isSelectable(c)?!1:(e&&e(n.tr.setSelection(xe.create(n.doc,o.pos-c.nodeSize)).scrollIntoView()),!0)};function hp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Nx(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Ax=(n,e,t)=>{let s=Nx(n,t);if(!s)return!1;let l=pp(s);if(!l)return!1;let o=l.nodeAfter;if(zx(n,l,e,1))return!0;if(s.parent.content.size==0&&(tl(o,"start")||xe.isSelectable(o))){let c=du(n.doc,s.before(),s.after(),oe.empty);if(c&&c.slice.size<c.to-c.from){if(e){let f=n.tr.step(c);f.setSelection(tl(o,"start")?Re.findFrom(f.doc.resolve(f.mapping.map(l.pos)),1):xe.create(f.doc,f.mapping.map(l.pos))),e(f.scrollIntoView())}return!0}}return o.isAtom&&l.depth==s.depth-1?(e&&e(n.tr.delete(l.pos,l.pos+o.nodeSize).scrollIntoView()),!0):!1},Ox=(n,e,t)=>{let{$head:s,empty:l}=n.selection,o=s;if(!l)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):s.parentOffset<s.parent.content.size)return!1;o=pp(s)}let c=o&&o.nodeAfter;return!c||!xe.isSelectable(c)?!1:(e&&e(n.tr.setSelection(xe.create(n.doc,o.pos)).scrollIntoView()),!0)};function pp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const vM=(n,e)=>{let t=n.selection,s=t instanceof xe,l;if(s){if(t.node.isTextblock||!bs(n.doc,t.from))return!1;l=t.from}else if(l=fu(n.doc,t.from,-1),l==null)return!1;if(e){let o=n.tr.join(l);s&&o.setSelection(xe.create(o.doc,l-n.doc.resolve(l).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},SM=(n,e)=>{let t=n.selection,s;if(t instanceof xe){if(t.node.isTextblock||!bs(n.doc,t.to))return!1;s=t.to}else if(s=fu(n.doc,t.to,1),s==null)return!1;return e&&e(n.tr.join(s).scrollIntoView()),!0},kM=(n,e)=>{let{$from:t,$to:s}=n.selection,l=t.blockRange(s),o=l&&ol(l);return o==null?!1:(e&&e(n.tr.lift(l,o).scrollIntoView()),!0)},Dx=(n,e)=>{let{$head:t,$anchor:s}=n.selection;return!t.parent.type.spec.code||!t.sameParent(s)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function mp(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const TM=(n,e)=>{let{$head:t,$anchor:s}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(s))return!1;let l=t.node(-1),o=t.indexAfter(-1),c=mp(l.contentMatchAt(o));if(!c||!l.canReplaceWith(o,o,c))return!1;if(e){let f=t.after(),d=n.tr.replaceWith(f,f,c.createAndFill());d.setSelection(Re.near(d.doc.resolve(f),1)),e(d.scrollIntoView())}return!0},jx=(n,e)=>{let t=n.selection,{$from:s,$to:l}=t;if(t instanceof xn||s.parent.inlineContent||l.parent.inlineContent)return!1;let o=mp(l.parent.contentMatchAt(l.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let c=(!s.parentOffset&&l.index()<l.parent.childCount?s:l).pos,f=n.tr.insert(c,o.createAndFill());f.setSelection(ke.create(f.doc,c+1)),e(f.scrollIntoView())}return!0},Rx=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(Tr(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let s=t.blockRange(),l=s&&ol(s);return l==null?!1:(e&&e(n.tr.lift(s,l).scrollIntoView()),!0)};function EM(n){return(e,t)=>{let{$from:s,$to:l}=e.selection;if(e.selection instanceof xe&&e.selection.node.isBlock)return!s.parentOffset||!Tr(e.doc,s.pos)?!1:(t&&t(e.tr.split(s.pos).scrollIntoView()),!0);if(!s.depth)return!1;let o=[],c,f,d=!1,h=!1;for(let v=s.depth;;v--)if(s.node(v).isBlock){d=s.end(v)==s.pos+(s.depth-v),h=s.start(v)==s.pos-(s.depth-v),f=mp(s.node(v-1).contentMatchAt(s.indexAfter(v-1))),o.unshift(d&&f?{type:f}:null),c=v;break}else{if(v==1)return!1;o.unshift(null)}let m=e.tr;(e.selection instanceof ke||e.selection instanceof xn)&&m.deleteSelection();let y=m.mapping.map(s.pos),x=Tr(m.doc,y,o.length,o);if(x||(o[0]=f?{type:f}:null,x=Tr(m.doc,y,o.length,o)),!x)return!1;if(m.split(y,o.length,o),!d&&h&&s.node(c).type!=f){let v=m.mapping.map(s.before(c)),k=m.doc.resolve(v);f&&s.node(c-1).canReplaceWith(k.index(),k.index()+1,f)&&m.setNodeMarkup(m.mapping.map(s.before(c)),f)}return t&&t(m.scrollIntoView()),!0}}const MM=EM(),CM=(n,e)=>{let{$from:t,to:s}=n.selection,l,o=t.sharedDepth(s);return o==0?!1:(l=t.before(o),e&&e(n.tr.setSelection(xe.create(n.doc,l))),!0)};function wM(n,e,t){let s=e.nodeBefore,l=e.nodeAfter,o=e.index();return!s||!l||!s.type.compatibleContent(l.type)?!1:!s.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-s.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(l.isTextblock||bs(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function zx(n,e,t,s){let l=e.nodeBefore,o=e.nodeAfter,c,f,d=l.type.spec.isolating||o.type.spec.isolating;if(!d&&wM(n,e,t))return!0;let h=!d&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(c=(f=l.contentMatchAt(l.childCount)).findWrapping(o.type))&&f.matchType(c[0]||o.type).validEnd){if(t){let v=e.pos+o.nodeSize,k=Q.empty;for(let C=c.length-1;C>=0;C--)k=Q.from(c[C].create(null,k));k=Q.from(l.copy(k));let E=n.tr.step(new jt(e.pos-1,v,e.pos,v,new oe(k,1,0),c.length,!0)),M=E.doc.resolve(v+2*c.length);M.nodeAfter&&M.nodeAfter.type==l.type&&bs(E.doc,M.pos)&&E.join(M.pos),t(E.scrollIntoView())}return!0}let m=o.type.spec.isolating||s>0&&d?null:Re.findFrom(e,1),y=m&&m.$from.blockRange(m.$to),x=y&&ol(y);if(x!=null&&x>=e.depth)return t&&t(n.tr.lift(y,x).scrollIntoView()),!0;if(h&&tl(o,"start",!0)&&tl(l,"end")){let v=l,k=[];for(;k.push(v),!v.isTextblock;)v=v.lastChild;let E=o,M=1;for(;!E.isTextblock;E=E.firstChild)M++;if(v.canReplace(v.childCount,v.childCount,E.content)){if(t){let C=Q.empty;for(let q=k.length-1;q>=0;q--)C=Q.from(k[q].copy(C));let z=n.tr.step(new jt(e.pos-k.length,e.pos+o.nodeSize,e.pos+M,e.pos+o.nodeSize-M,new oe(C,k.length,0),0,!0));t(z.scrollIntoView())}return!0}}return!1}function Lx(n){return function(e,t){let s=e.selection,l=n<0?s.$from:s.$to,o=l.depth;for(;l.node(o).isInline;){if(!o)return!1;o--}return l.node(o).isTextblock?(t&&t(e.tr.setSelection(ke.create(e.doc,n<0?l.start(o):l.end(o)))),!0):!1}}const NM=Lx(-1),AM=Lx(1);function OM(n,e=null){return function(t,s){let{$from:l,$to:o}=t.selection,c=l.blockRange(o),f=c&&up(c,n,e);return f?(s&&s(t.tr.wrap(c,f).scrollIntoView()),!0):!1}}function Eb(n,e=null){return function(t,s){let l=!1;for(let o=0;o<t.selection.ranges.length&&!l;o++){let{$from:{pos:c},$to:{pos:f}}=t.selection.ranges[o];t.doc.nodesBetween(c,f,(d,h)=>{if(l)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)l=!0;else{let m=t.doc.resolve(h),y=m.index();l=m.parent.canReplaceWith(y,y+1,n)}})}if(!l)return!1;if(s){let o=t.tr;for(let c=0;c<t.selection.ranges.length;c++){let{$from:{pos:f},$to:{pos:d}}=t.selection.ranges[c];o.setBlockType(f,d,n,e)}s(o.scrollIntoView())}return!0}}function gp(...n){return function(e,t,s){for(let l=0;l<n.length;l++)if(n[l](e,t,s))return!0;return!1}}gp(dp,Mx,wx);gp(dp,Ax,Ox);gp(Dx,jx,Rx,MM);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function DM(n,e=null){return function(t,s){let{$from:l,$to:o}=t.selection,c=l.blockRange(o);if(!c)return!1;let f=s?t.tr:null;return jM(f,c,n,e)?(s&&s(f.scrollIntoView()),!0):!1}}function jM(n,e,t,s=null){let l=!1,o=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=c.resolve(e.start-2);o=new Tc(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Tc(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),l=!0}let f=up(o,t,s,e);return f?(n&&RM(n,e,f,l,t),!0):!1}function RM(n,e,t,s,l){let o=Q.empty;for(let m=t.length-1;m>=0;m--)o=Q.from(t[m].type.create(t[m].attrs,o));n.step(new jt(e.start-(s?2:0),e.end,e.start,e.end,new oe(o,0,0),t.length,!0));let c=0;for(let m=0;m<t.length;m++)t[m].type==l&&(c=m+1);let f=t.length-c,d=e.start+t.length-(s?2:0),h=e.parent;for(let m=e.startIndex,y=e.endIndex,x=!0;m<y;m++,x=!1)!x&&Tr(n.doc,d,f)&&(n.split(d,f),d+=2*f),d+=h.child(m).nodeSize;return n}function zM(n){return function(e,t){let{$from:s,$to:l}=e.selection,o=s.blockRange(l,c=>c.childCount>0&&c.firstChild.type==n);return o?t?s.node(o.depth-1).type==n?LM(e,t,n,o):_M(e,t,o):!0:!1}}function LM(n,e,t,s){let l=n.tr,o=s.end,c=s.$to.end(s.depth);o<c&&(l.step(new jt(o-1,c,o,c,new oe(Q.from(t.create(null,s.parent.copy())),1,0),1,!0)),s=new Tc(l.doc.resolve(s.$from.pos),l.doc.resolve(c),s.depth));const f=ol(s);if(f==null)return!1;l.lift(s,f);let d=l.doc.resolve(l.mapping.map(o,-1)-1);return bs(l.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&l.join(d.pos),e(l.scrollIntoView()),!0}function _M(n,e,t){let s=n.tr,l=t.parent;for(let v=t.end,k=t.endIndex-1,E=t.startIndex;k>E;k--)v-=l.child(k).nodeSize,s.delete(v-1,v+1);let o=s.doc.resolve(t.start),c=o.nodeAfter;if(s.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let f=t.startIndex==0,d=t.endIndex==l.childCount,h=o.node(-1),m=o.index(-1);if(!h.canReplace(m+(f?0:1),m+1,c.content.append(d?Q.empty:Q.from(l))))return!1;let y=o.pos,x=y+c.nodeSize;return s.step(new jt(y-(f?1:0),x+(d?1:0),y+1,x-1,new oe((f?Q.empty:Q.from(l.copy(Q.empty))).append(d?Q.empty:Q.from(l.copy(Q.empty))),f?0:1,d?0:1),f?0:1)),e(s.scrollIntoView()),!0}function BM(n){return function(e,t){let{$from:s,$to:l}=e.selection,o=s.blockRange(l,h=>h.childCount>0&&h.firstChild.type==n);if(!o)return!1;let c=o.startIndex;if(c==0)return!1;let f=o.parent,d=f.child(c-1);if(d.type!=n)return!1;if(t){let h=d.lastChild&&d.lastChild.type==f.type,m=Q.from(h?n.create():null),y=new oe(Q.from(n.create(null,Q.from(f.type.create(null,m)))),h?3:1,0),x=o.start,v=o.end;t(e.tr.step(new jt(x-(h?3:1),v,x,v,y,1,!0)).scrollIntoView())}return!0}}const It=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},nl=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let zh=null;const Sr=function(n,e,t){let s=zh||(zh=document.createRange());return s.setEnd(n,t??n.nodeValue.length),s.setStart(n,e||0),s},HM=function(){zh=null},ei=function(n,e,t,s){return t&&(Mb(n,e,t,s,-1)||Mb(n,e,t,s,1))},UM=/^(img|br|input|textarea|hr)$/i;function Mb(n,e,t,s,l){for(var o;;){if(n==t&&e==s)return!0;if(e==(l<0?0:zn(n))){let c=n.parentNode;if(!c||c.nodeType!=1||Lo(n)||UM.test(n.nodeName)||n.contentEditable=="false")return!1;e=It(n)+(l<0?0:1),n=c}else if(n.nodeType==1){let c=n.childNodes[e+(l<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((o=c.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=l;else return!1;else n=c,e=l<0?zn(n):0}else return!1}}function zn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function IM(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=zn(n)}else if(n.parentNode&&!Lo(n))e=It(n),n=n.parentNode;else return null}}function VM(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Lo(n))e=It(n)+1,n=n.parentNode;else return null}}function qM(n,e,t){for(let s=e==0,l=e==zn(n);s||l;){if(n==t)return!0;let o=It(n);if(n=n.parentNode,!n)return!1;s=s&&o==0,l=l&&o==zn(n)}}function Lo(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const pu=function(n){return n.focusNode&&ei(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function qs(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function $M(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function GM(n,e,t){if(n.caretPositionFromPoint)try{let s=n.caretPositionFromPoint(e,t);if(s)return{node:s.offsetNode,offset:Math.min(zn(s.offsetNode),s.offset)}}catch{}if(n.caretRangeFromPoint){let s=n.caretRangeFromPoint(e,t);if(s)return{node:s.startContainer,offset:Math.min(zn(s.startContainer),s.startOffset)}}}const Qn=typeof navigator<"u"?navigator:null,Cb=typeof document<"u"?document:null,xs=Qn&&Qn.userAgent||"",Lh=/Edge\/(\d+)/.exec(xs),_x=/MSIE \d/.exec(xs),_h=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(xs),an=!!(_x||_h||Lh),hs=_x?document.documentMode:_h?+_h[1]:Lh?+Lh[1]:0,Ln=!an&&/gecko\/(\d+)/i.test(xs);Ln&&+(/Firefox\/(\d+)/.exec(xs)||[0,0])[1];const Bh=!an&&/Chrome\/(\d+)/.exec(xs),qt=!!Bh,Bx=Bh?+Bh[1]:0,Pt=!an&&!!Qn&&/Apple Computer/.test(Qn.vendor),rl=Pt&&(/Mobile\/\w+/.test(xs)||!!Qn&&Qn.maxTouchPoints>2),Rn=rl||(Qn?/Mac/.test(Qn.platform):!1),Hx=Qn?/Win/.test(Qn.platform):!1,kr=/Android \d/.test(xs),_o=!!Cb&&"webkitFontSmoothing"in Cb.documentElement.style,YM=_o?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function KM(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function yr(n,e){return typeof n=="number"?n:n[e]}function PM(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,s=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*s}}function wb(n,e,t){let s=n.someProp("scrollThreshold")||0,l=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let c=t||n.dom;c;){if(c.nodeType!=1){c=nl(c);continue}let f=c,d=f==o.body,h=d?KM(o):PM(f),m=0,y=0;if(e.top<h.top+yr(s,"top")?y=-(h.top-e.top+yr(l,"top")):e.bottom>h.bottom-yr(s,"bottom")&&(y=e.bottom-e.top>h.bottom-h.top?e.top+yr(l,"top")-h.top:e.bottom-h.bottom+yr(l,"bottom")),e.left<h.left+yr(s,"left")?m=-(h.left-e.left+yr(l,"left")):e.right>h.right-yr(s,"right")&&(m=e.right-h.right+yr(l,"right")),m||y)if(d)o.defaultView.scrollBy(m,y);else{let v=f.scrollLeft,k=f.scrollTop;y&&(f.scrollTop+=y),m&&(f.scrollLeft+=m);let E=f.scrollLeft-v,M=f.scrollTop-k;e={left:e.left-E,top:e.top-M,right:e.right-E,bottom:e.bottom-M}}let x=d?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(x))break;c=x=="absolute"?c.offsetParent:nl(c)}}function FM(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),s,l;for(let o=(e.left+e.right)/2,c=t+1;c<Math.min(innerHeight,e.bottom);c+=5){let f=n.root.elementFromPoint(o,c);if(!f||f==n.dom||!n.dom.contains(f))continue;let d=f.getBoundingClientRect();if(d.top>=t-20){s=f,l=d.top;break}}return{refDOM:s,refTop:l,stack:Ux(n.dom)}}function Ux(n){let e=[],t=n.ownerDocument;for(let s=n;s&&(e.push({dom:s,top:s.scrollTop,left:s.scrollLeft}),n!=t);s=nl(s));return e}function JM({refDOM:n,refTop:e,stack:t}){let s=n?n.getBoundingClientRect().top:0;Ix(t,s==0?0:s-e)}function Ix(n,e){for(let t=0;t<n.length;t++){let{dom:s,top:l,left:o}=n[t];s.scrollTop!=l+e&&(s.scrollTop=l+e),s.scrollLeft!=o&&(s.scrollLeft=o)}}let Gi=null;function XM(n){if(n.setActive)return n.setActive();if(Gi)return n.focus(Gi);let e=Ux(n);n.focus(Gi==null?{get preventScroll(){return Gi={preventScroll:!0},!0}}:void 0),Gi||(Gi=!1,Ix(e,0))}function Vx(n,e){let t,s=2e8,l,o=0,c=e.top,f=e.top,d,h;for(let m=n.firstChild,y=0;m;m=m.nextSibling,y++){let x;if(m.nodeType==1)x=m.getClientRects();else if(m.nodeType==3)x=Sr(m).getClientRects();else continue;for(let v=0;v<x.length;v++){let k=x[v];if(k.top<=c&&k.bottom>=f){c=Math.max(k.bottom,c),f=Math.min(k.top,f);let E=k.left>e.left?k.left-e.left:k.right<e.left?e.left-k.right:0;if(E<s){t=m,s=E,l=E&&t.nodeType==3?{left:k.right<e.left?k.right:k.left,top:e.top}:e,m.nodeType==1&&E&&(o=y+(e.left>=(k.left+k.right)/2?1:0));continue}}else k.top>e.top&&!d&&k.left<=e.left&&k.right>=e.left&&(d=m,h={left:Math.max(k.left,Math.min(k.right,e.left)),top:k.top});!t&&(e.left>=k.right&&e.top>=k.top||e.left>=k.left&&e.top>=k.bottom)&&(o=y+1)}}return!t&&d&&(t=d,l=h,s=0),t&&t.nodeType==3?QM(t,l):!t||s&&t.nodeType==1?{node:n,offset:o}:Vx(t,l)}function QM(n,e){let t=n.nodeValue.length,s=document.createRange(),l;for(let o=0;o<t;o++){s.setEnd(n,o+1),s.setStart(n,o);let c=ts(s,1);if(c.top!=c.bottom&&yp(e,c)){l={node:n,offset:o+(e.left>=(c.left+c.right)/2?1:0)};break}}return s.detach(),l||{node:n,offset:0}}function yp(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function ZM(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function WM(n,e,t){let{node:s,offset:l}=Vx(e,t),o=-1;if(s.nodeType==1&&!s.firstChild){let c=s.getBoundingClientRect();o=c.left!=c.right&&t.left>(c.left+c.right)/2?1:-1}return n.docView.posFromDOM(s,l,o)}function eC(n,e,t,s){let l=-1;for(let o=e,c=!1;o!=n.dom;){let f=n.docView.nearestDesc(o,!0),d;if(!f)return null;if(f.dom.nodeType==1&&(f.node.isBlock&&f.parent||!f.contentDOM)&&((d=f.dom.getBoundingClientRect()).width||d.height)&&(f.node.isBlock&&f.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(f.dom.nodeName)&&(!c&&d.left>s.left||d.top>s.top?l=f.posBefore:(!c&&d.right<s.left||d.bottom<s.top)&&(l=f.posAfter),c=!0),!f.contentDOM&&l<0&&!f.node.isText))return(f.node.isBlock?s.top<(d.top+d.bottom)/2:s.left<(d.left+d.right)/2)?f.posBefore:f.posAfter;o=f.dom.parentNode}return l>-1?l:n.docView.posFromDOM(e,t,-1)}function qx(n,e,t){let s=n.childNodes.length;if(s&&t.top<t.bottom)for(let l=Math.max(0,Math.min(s-1,Math.floor(s*(e.top-t.top)/(t.bottom-t.top))-2)),o=l;;){let c=n.childNodes[o];if(c.nodeType==1){let f=c.getClientRects();for(let d=0;d<f.length;d++){let h=f[d];if(yp(e,h))return qx(c,e,h)}}if((o=(o+1)%s)==l)break}return n}function tC(n,e){let t=n.dom.ownerDocument,s,l=0,o=GM(t,e.left,e.top);o&&({node:s,offset:l}=o);let c=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),f;if(!c||!n.dom.contains(c.nodeType!=1?c.parentNode:c)){let h=n.dom.getBoundingClientRect();if(!yp(e,h)||(c=qx(n.dom,e,h),!c))return null}if(Pt)for(let h=c;s&&h;h=nl(h))h.draggable&&(s=void 0);if(c=ZM(c,e),s){if(Ln&&s.nodeType==1&&(l=Math.min(l,s.childNodes.length),l<s.childNodes.length)){let m=s.childNodes[l],y;m.nodeName=="IMG"&&(y=m.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&l++}let h;_o&&l&&s.nodeType==1&&(h=s.childNodes[l-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&l--,s==n.dom&&l==s.childNodes.length-1&&s.lastChild.nodeType==1&&e.top>s.lastChild.getBoundingClientRect().bottom?f=n.state.doc.content.size:(l==0||s.nodeType!=1||s.childNodes[l-1].nodeName!="BR")&&(f=eC(n,s,l,e))}f==null&&(f=WM(n,c,e));let d=n.docView.nearestDesc(c,!0);return{pos:f,inside:d?d.posAtStart-d.border:-1}}function Nb(n){return n.top<n.bottom||n.left<n.right}function ts(n,e){let t=n.getClientRects();if(t.length){let s=t[e<0?0:t.length-1];if(Nb(s))return s}return Array.prototype.find.call(t,Nb)||n.getBoundingClientRect()}const nC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function $x(n,e,t){let{node:s,offset:l,atom:o}=n.docView.domFromPos(e,t<0?-1:1),c=_o||Ln;if(s.nodeType==3)if(c&&(nC.test(s.nodeValue)||(t<0?!l:l==s.nodeValue.length))){let d=ts(Sr(s,l,l),t);if(Ln&&l&&/\s/.test(s.nodeValue[l-1])&&l<s.nodeValue.length){let h=ts(Sr(s,l-1,l-1),-1);if(h.top==d.top){let m=ts(Sr(s,l,l+1),-1);if(m.top!=d.top)return ro(m,m.left<h.left)}}return d}else{let d=l,h=l,m=t<0?1:-1;return t<0&&!l?(h++,m=-1):t>=0&&l==s.nodeValue.length?(d--,m=1):t<0?d--:h++,ro(ts(Sr(s,d,h),m),m<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&l&&(t<0||l==zn(s))){let d=s.childNodes[l-1];if(d.nodeType==1)return ih(d.getBoundingClientRect(),!1)}if(o==null&&l<zn(s)){let d=s.childNodes[l];if(d.nodeType==1)return ih(d.getBoundingClientRect(),!0)}return ih(s.getBoundingClientRect(),t>=0)}if(o==null&&l&&(t<0||l==zn(s))){let d=s.childNodes[l-1],h=d.nodeType==3?Sr(d,zn(d)-(c?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(h)return ro(ts(h,1),!1)}if(o==null&&l<zn(s)){let d=s.childNodes[l];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let h=d?d.nodeType==3?Sr(d,0,c?0:1):d.nodeType==1?d:null:null;if(h)return ro(ts(h,-1),!0)}return ro(ts(s.nodeType==3?Sr(s):s,-t),t>=0)}function ro(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function ih(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Gx(n,e,t){let s=n.state,l=n.root.activeElement;s!=e&&n.updateState(e),l!=n.dom&&n.focus();try{return t()}finally{s!=e&&n.updateState(s),l!=n.dom&&l&&l.focus()}}function rC(n,e,t){let s=e.selection,l=t=="up"?s.$from:s.$to;return Gx(n,e,()=>{let{node:o}=n.docView.domFromPos(l.pos,t=="up"?-1:1);for(;;){let f=n.docView.nearestDesc(o,!0);if(!f)break;if(f.node.isBlock){o=f.contentDOM||f.dom;break}o=f.dom.parentNode}let c=$x(n,l.pos,1);for(let f=o.firstChild;f;f=f.nextSibling){let d;if(f.nodeType==1)d=f.getClientRects();else if(f.nodeType==3)d=Sr(f,0,f.nodeValue.length).getClientRects();else continue;for(let h=0;h<d.length;h++){let m=d[h];if(m.bottom>m.top+1&&(t=="up"?c.top-m.top>(m.bottom-c.top)*2:m.bottom-c.bottom>(c.bottom-m.top)*2))return!1}}return!0})}const sC=/[\u0590-\u08ac]/;function iC(n,e,t){let{$head:s}=e.selection;if(!s.parent.isTextblock)return!1;let l=s.parentOffset,o=!l,c=l==s.parent.content.size,f=n.domSelection();return f?!sC.test(s.parent.textContent)||!f.modify?t=="left"||t=="backward"?o:c:Gx(n,e,()=>{let{focusNode:d,focusOffset:h,anchorNode:m,anchorOffset:y}=n.domSelectionRange(),x=f.caretBidiLevel;f.modify("move",t,"character");let v=s.depth?n.docView.domAfterPos(s.before()):n.dom,{focusNode:k,focusOffset:E}=n.domSelectionRange(),M=k&&!v.contains(k.nodeType==1?k:k.parentNode)||d==k&&h==E;try{f.collapse(m,y),d&&(d!=m||h!=y)&&f.extend&&f.extend(d,h)}catch{}return x!=null&&(f.caretBidiLevel=x),M}):s.pos==s.start()||s.pos==s.end()}let Ab=null,Ob=null,Db=!1;function lC(n,e,t){return Ab==e&&Ob==t?Db:(Ab=e,Ob=t,Db=t=="up"||t=="down"?rC(n,e,t):iC(n,e,t))}const _n=0,jb=1,$s=2,Zn=3;class Bo{constructor(e,t,s,l){this.parent=e,this.children=t,this.dom=s,this.contentDOM=l,this.dirty=_n,s.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,s){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,s=this.posAtStart;;t++){let l=this.children[t];if(l==e)return s;s+=l.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,s){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(s<0){let o,c;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((c=o.pmViewDesc)&&c.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(c)+c.size:this.posAtStart}else{let o,c;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((c=o.pmViewDesc)&&c.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(c):this.posAtEnd}let l;if(e==this.dom&&this.contentDOM)l=t>It(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))l=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){l=!1;break}if(o.previousSibling)break}if(l==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){l=!0;break}if(o.nextSibling)break}}return l??s>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let s=!0,l=e;l;l=l.parentNode){let o=this.getDesc(l),c;if(o&&(!t||o.node))if(s&&(c=o.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))s=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let s=t;s;s=s.parent)if(s==this)return t}posFromDOM(e,t,s){for(let l=e;l;l=l.parentNode){let o=this.getDesc(l);if(o)return o.localPosFromDOM(e,t,s)}return-1}descAt(e){for(let t=0,s=0;t<this.children.length;t++){let l=this.children[t],o=s+l.size;if(s==e&&o!=s){for(;!l.border&&l.children.length;)for(let c=0;c<l.children.length;c++){let f=l.children[c];if(f.size){l=f;break}}return l}if(e<o)return l.descAt(e-s-l.border);s=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let s=0,l=0;for(let o=0;s<this.children.length;s++){let c=this.children[s],f=o+c.size;if(f>e||c instanceof Kx){l=e-o;break}o=f}if(l)return this.children[s].domFromPos(l-this.children[s].border,t);for(let o;s&&!(o=this.children[s-1]).size&&o instanceof Yx&&o.side>=0;s--);if(t<=0){let o,c=!0;for(;o=s?this.children[s-1]:null,!(!o||o.dom.parentNode==this.contentDOM);s--,c=!1);return o&&t&&c&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?It(o.dom)+1:0}}else{let o,c=!0;for(;o=s<this.children.length?this.children[s]:null,!(!o||o.dom.parentNode==this.contentDOM);s++,c=!1);return o&&c&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?It(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,s=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let l=-1,o=-1;for(let c=s,f=0;;f++){let d=this.children[f],h=c+d.size;if(l==-1&&e<=h){let m=c+d.border;if(e>=m&&t<=h-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,m);e=c;for(let y=f;y>0;y--){let x=this.children[y-1];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(1)){l=It(x.dom)+1;break}e-=x.size}l==-1&&(l=0)}if(l>-1&&(h>t||f==this.children.length-1)){t=h;for(let m=f+1;m<this.children.length;m++){let y=this.children[m];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){o=It(y.dom);break}t+=y.size}o==-1&&(o=this.contentDOM.childNodes.length);break}c=h}return{node:this.contentDOM,from:e,to:t,fromOffset:l,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:s}=this.domFromPos(e,0);if(t.nodeType!=1||s==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[s]}setSelection(e,t,s,l=!1){let o=Math.min(e,t),c=Math.max(e,t);for(let v=0,k=0;v<this.children.length;v++){let E=this.children[v],M=k+E.size;if(o>k&&c<M)return E.setSelection(e-k-E.border,t-k-E.border,s,l);k=M}let f=this.domFromPos(e,e?-1:1),d=t==e?f:this.domFromPos(t,t?-1:1),h=s.root.getSelection(),m=s.domSelectionRange(),y=!1;if((Ln||Pt)&&e==t){let{node:v,offset:k}=f;if(v.nodeType==3){if(y=!!(k&&v.nodeValue[k-1]==`
`),y&&k==v.nodeValue.length)for(let E=v,M;E;E=E.parentNode){if(M=E.nextSibling){M.nodeName=="BR"&&(f=d={node:M.parentNode,offset:It(M)+1});break}let C=E.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let E=v.childNodes[k-1];y=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(Ln&&m.focusNode&&m.focusNode!=d.node&&m.focusNode.nodeType==1){let v=m.focusNode.childNodes[m.focusOffset];v&&v.contentEditable=="false"&&(l=!0)}if(!(l||y&&Pt)&&ei(f.node,f.offset,m.anchorNode,m.anchorOffset)&&ei(d.node,d.offset,m.focusNode,m.focusOffset))return;let x=!1;if((h.extend||e==t)&&!(y&&Ln)){h.collapse(f.node,f.offset);try{e!=t&&h.extend(d.node,d.offset),x=!0}catch{}}if(!x){if(e>t){let k=f;f=d,d=k}let v=document.createRange();v.setEnd(d.node,d.offset),v.setStart(f.node,f.offset),h.removeAllRanges(),h.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let s=0,l=0;l<this.children.length;l++){let o=this.children[l],c=s+o.size;if(s==c?e<=c&&t>=s:e<c&&t>s){let f=s+o.border,d=c-o.border;if(e>=f&&t<=d){this.dirty=e==s||t==c?$s:jb,e==f&&t==d&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Zn:o.markDirty(e-f,t-f);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?$s:Zn}s=c}this.dirty=$s}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let s=e==1?$s:jb;t.dirty<s&&(t.dirty=s)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Yx extends Bo{constructor(e,t,s,l){let o,c=t.type.toDOM;if(typeof c=="function"&&(c=c(s,()=>{if(!o)return l;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(c.nodeType!=1){let f=document.createElement("span");f.appendChild(c),c=f}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==_n&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class oC extends Bo{constructor(e,t,s,l){super(e,[],t,null),this.textDOM=s,this.text=l}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ti extends Bo{constructor(e,t,s,l,o){super(e,[],s,l),this.mark=t,this.spec=o}static create(e,t,s,l){let o=l.nodeViews[t.type.name],c=o&&o(t,l,s);return(!c||!c.dom)&&(c=ri.renderSpec(document,t.type.spec.toDOM(t,s),null,t.attrs)),new ti(e,t,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&Zn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Zn&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=_n){let s=this.parent;for(;!s.node;)s=s.parent;s.dirty<this.dirty&&(s.dirty=this.dirty),this.dirty=_n}}slice(e,t,s){let l=ti.create(this.parent,this.mark,!0,s),o=this.children,c=this.size;t<c&&(o=Uh(o,t,c,s)),e>0&&(o=Uh(o,0,e,s));for(let f=0;f<o.length;f++)o[f].parent=l;return l.children=o,l}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ps extends Bo{constructor(e,t,s,l,o,c,f,d,h){super(e,[],o,c),this.node=t,this.outerDeco=s,this.innerDeco=l,this.nodeDOM=f}static create(e,t,s,l,o,c){let f=o.nodeViews[t.type.name],d,h=f&&f(t,o,()=>{if(!d)return c;if(d.parent)return d.parent.posBeforeChild(d)},s,l),m=h&&h.dom,y=h&&h.contentDOM;if(t.isText){if(!m)m=document.createTextNode(t.text);else if(m.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else m||({dom:m,contentDOM:y}=ri.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&m.nodeName!="BR"&&(m.hasAttribute("contenteditable")||(m.contentEditable="false"),t.type.spec.draggable&&(m.draggable=!0));let x=m;return m=Jx(m,s,t),h?d=new aC(e,t,s,l,m,y||null,x,h,o,c+1):t.isText?new mu(e,t,s,l,m,x,o):new ps(e,t,s,l,m,y||null,x,o,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let s=this.children[t];if(this.dom.contains(s.dom.parentNode)){e.contentElement=s.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Q.empty)}return e}matchesNode(e,t,s){return this.dirty==_n&&e.eq(this.node)&&Mc(t,this.outerDeco)&&s.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let s=this.node.inlineContent,l=t,o=e.composing?this.localCompositionInfo(e,t):null,c=o&&o.pos>-1?o:null,f=o&&o.pos<0,d=new uC(this,c&&c.node,e);hC(this.node,this.innerDeco,(h,m,y)=>{h.spec.marks?d.syncToMarks(h.spec.marks,s,e,m):h.type.side>=0&&!y&&d.syncToMarks(m==this.node.childCount?nt.none:this.node.child(m).marks,s,e,m),d.placeWidget(h,e,l)},(h,m,y,x)=>{d.syncToMarks(h.marks,s,e,x);let v;d.findNodeMatch(h,m,y,x)||f&&e.state.selection.from>l&&e.state.selection.to<l+h.nodeSize&&(v=d.findIndexWithChild(o.node))>-1&&d.updateNodeAt(h,m,y,v,e)||d.updateNextNode(h,m,y,e,x,l)||d.addNode(h,m,y,e,l),l+=h.nodeSize}),d.syncToMarks([],s,e,0),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==$s)&&(c&&this.protectLocalComposition(e,c),Px(this.contentDOM,this.children,e),rl&&pC(this.dom))}localCompositionInfo(e,t){let{from:s,to:l}=e.state.selection;if(!(e.state.selection instanceof ke)||s<t||l>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let c=o.nodeValue,f=mC(this.node.content,c,s-t,l-t);return f<0?null:{node:o,pos:f,text:c}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:s,text:l}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let c=new oC(this,o,t,l);e.input.compositionNodes.push(c),this.children=Uh(this.children,s,s+l.length,e,c)}update(e,t,s,l){return this.dirty==Zn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,s,l),!0)}updateInner(e,t,s,l){this.updateOuterDeco(t),this.node=e,this.innerDeco=s,this.contentDOM&&this.updateChildren(l,this.posAtStart),this.dirty=_n}updateOuterDeco(e){if(Mc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,s=this.dom;this.dom=Fx(this.dom,this.nodeDOM,Hh(this.outerDeco,this.node,t),Hh(e,this.node,t)),this.dom!=s&&(s.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Rb(n,e,t,s,l){Jx(s,e,n);let o=new ps(void 0,n,e,t,s,s,s,l,0);return o.contentDOM&&o.updateChildren(l,0),o}class mu extends ps{constructor(e,t,s,l,o,c,f){super(e,t,s,l,o,null,c,f,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,s,l){return this.dirty==Zn||this.dirty!=_n&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=_n||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,l.trackWrites==this.nodeDOM&&(l.trackWrites=null)),this.node=e,this.dirty=_n,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,s){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,s)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,s){let l=this.node.cut(e,t),o=document.createTextNode(l.text);return new mu(this.parent,l,this.outerDeco,this.innerDeco,o,o,s)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Zn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Kx extends Bo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==_n&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class aC extends ps{constructor(e,t,s,l,o,c,f,d,h,m){super(e,t,s,l,o,c,f,h,m),this.spec=d}update(e,t,s,l){if(this.dirty==Zn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,s);return o&&this.updateInner(e,t,s,l),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,s,l)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,s,l){this.spec.setSelection?this.spec.setSelection(e,t,s.root):super.setSelection(e,t,s,l)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Px(n,e,t){let s=n.firstChild,l=!1;for(let o=0;o<e.length;o++){let c=e[o],f=c.dom;if(f.parentNode==n){for(;f!=s;)s=zb(s),l=!0;s=s.nextSibling}else l=!0,n.insertBefore(f,s);if(c instanceof ti){let d=s?s.previousSibling:n.lastChild;Px(c.contentDOM,c.children,t),s=d?d.nextSibling:n.firstChild}}for(;s;)s=zb(s),l=!0;l&&t.trackWrites==n&&(t.trackWrites=null)}const po=function(n){n&&(this.nodeName=n)};po.prototype=Object.create(null);const Gs=[new po];function Hh(n,e,t){if(n.length==0)return Gs;let s=t?Gs[0]:new po,l=[s];for(let o=0;o<n.length;o++){let c=n[o].type.attrs;if(c){c.nodeName&&l.push(s=new po(c.nodeName));for(let f in c){let d=c[f];d!=null&&(t&&l.length==1&&l.push(s=new po(e.isInline?"span":"div")),f=="class"?s.class=(s.class?s.class+" ":"")+d:f=="style"?s.style=(s.style?s.style+";":"")+d:f!="nodeName"&&(s[f]=d))}}}return l}function Fx(n,e,t,s){if(t==Gs&&s==Gs)return e;let l=e;for(let o=0;o<s.length;o++){let c=s[o],f=t[o];if(o){let d;f&&f.nodeName==c.nodeName&&l!=n&&(d=l.parentNode)&&d.nodeName.toLowerCase()==c.nodeName||(d=document.createElement(c.nodeName),d.pmIsDeco=!0,d.appendChild(l),f=Gs[0]),l=d}cC(l,f||Gs[0],c)}return l}function cC(n,e,t){for(let s in e)s!="class"&&s!="style"&&s!="nodeName"&&!(s in t)&&n.removeAttribute(s);for(let s in t)s!="class"&&s!="style"&&s!="nodeName"&&t[s]!=e[s]&&n.setAttribute(s,t[s]);if(e.class!=t.class){let s=e.class?e.class.split(" ").filter(Boolean):[],l=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<s.length;o++)l.indexOf(s[o])==-1&&n.classList.remove(s[o]);for(let o=0;o<l.length;o++)s.indexOf(l[o])==-1&&n.classList.add(l[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let s=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,l;for(;l=s.exec(e.style);)n.style.removeProperty(l[1])}t.style&&(n.style.cssText+=t.style)}}function Jx(n,e,t){return Fx(n,n,Gs,Hh(e,t,n.nodeType!=1))}function Mc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function zb(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class uC{constructor(e,t,s){this.lock=t,this.view=s,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=fC(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let s=e;s<t;s++)this.top.children[s].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,s,l){let o=0,c=this.stack.length>>1,f=Math.min(c,e.length);for(;o<f&&(o==c-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<c;)this.destroyRest(),this.top.dirty=_n,this.index=this.stack.pop(),this.top=this.stack.pop(),c--;for(;c<e.length;){this.stack.push(this.top,this.index+1);let d=-1,h=this.top.children.length;l<this.preMatch.index&&(h=Math.min(this.index+3,h));for(let m=this.index;m<h;m++){let y=this.top.children[m];if(y.matchesMark(e[c])&&!this.isLocked(y.dom)){d=m;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let m=ti.create(this.top,e[c],t,s);this.top.children.splice(this.index,0,m),this.top=m,this.changed=!0}this.index=0,c++}}findNodeMatch(e,t,s,l){let o=-1,c;if(l>=this.preMatch.index&&(c=this.preMatch.matches[l-this.preMatch.index]).parent==this.top&&c.matchesNode(e,t,s))o=this.top.children.indexOf(c,this.index);else for(let f=this.index,d=Math.min(this.top.children.length,f+5);f<d;f++){let h=this.top.children[f];if(h.matchesNode(e,t,s)&&!this.preMatch.matched.has(h)){o=f;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,s,l,o){let c=this.top.children[l];return c.dirty==Zn&&c.dom==c.contentDOM&&(c.dirty=$s),c.update(e,t,s,o)?(this.destroyBetween(this.index,l),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let s=e.pmViewDesc;if(s){for(let l=this.index;l<this.top.children.length;l++)if(this.top.children[l]==s)return l}return-1}e=t}}updateNextNode(e,t,s,l,o,c){for(let f=this.index;f<this.top.children.length;f++){let d=this.top.children[f];if(d instanceof ps){let h=this.preMatch.matched.get(d);if(h!=null&&h!=o)return!1;let m=d.dom,y,x=this.isLocked(m)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Zn&&Mc(t,d.outerDeco));if(!x&&d.update(e,t,s,l))return this.destroyBetween(this.index,f),d.dom!=m&&(this.changed=!0),this.index++,!0;if(!x&&(y=this.recreateWrapper(d,e,t,s,l,c)))return this.destroyBetween(this.index,f),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=$s,y.updateChildren(l,c+1),y.dirty=_n),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,s,l,o,c){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Mc(s,e.outerDeco)||!l.eq(e.innerDeco))return null;let f=ps.create(this.top,t,s,l,o,c);if(f.contentDOM){f.children=e.children,e.children=[];for(let d of f.children)d.parent=f}return e.destroy(),f}addNode(e,t,s,l,o){let c=ps.create(this.top,e,t,s,l,o);c.contentDOM&&c.updateChildren(l,o+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,t,s){let l=this.index<this.top.children.length?this.top.children[this.index]:null;if(l&&l.matchesWidget(e)&&(e==l.widget||!l.widget.type.toDOM.parentNode))this.index++;else{let o=new Yx(this.top,e,t,s);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ti;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof mu)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Pt||qt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let s=document.createElement(e);e=="IMG"&&(s.className="ProseMirror-separator",s.alt=""),e=="BR"&&(s.className="ProseMirror-trailingBreak");let l=new Kx(this.top,[],s,null);t!=this.top?t.children.push(l):t.children.splice(this.index++,0,l),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function fC(n,e){let t=e,s=t.children.length,l=n.childCount,o=new Map,c=[];e:for(;l>0;){let f;for(;;)if(s){let h=t.children[s-1];if(h instanceof ti)t=h,s=h.children.length;else{f=h,s--;break}}else{if(t==e)break e;s=t.parent.children.indexOf(t),t=t.parent}let d=f.node;if(d){if(d!=n.child(l-1))break;--l,o.set(f,l),c.push(f)}}return{index:l,matched:o,matches:c.reverse()}}function dC(n,e){return n.type.side-e.type.side}function hC(n,e,t,s){let l=e.locals(n),o=0;if(l.length==0){for(let h=0;h<n.childCount;h++){let m=n.child(h);s(m,l,e.forChild(o,m),h),o+=m.nodeSize}return}let c=0,f=[],d=null;for(let h=0;;){let m,y;for(;c<l.length&&l[c].to==o;){let M=l[c++];M.widget&&(m?(y||(y=[m])).push(M):m=M)}if(m)if(y){y.sort(dC);for(let M=0;M<y.length;M++)t(y[M],h,!!d)}else t(m,h,!!d);let x,v;if(d)v=-1,x=d,d=null;else if(h<n.childCount)v=h,x=n.child(h++);else break;for(let M=0;M<f.length;M++)f[M].to<=o&&f.splice(M--,1);for(;c<l.length&&l[c].from<=o&&l[c].to>o;)f.push(l[c++]);let k=o+x.nodeSize;if(x.isText){let M=k;c<l.length&&l[c].from<M&&(M=l[c].from);for(let C=0;C<f.length;C++)f[C].to<M&&(M=f[C].to);M<k&&(d=x.cut(M-o),x=x.cut(0,M-o),k=M,v=-1)}else for(;c<l.length&&l[c].to<k;)c++;let E=x.isInline&&!x.isLeaf?f.filter(M=>!M.inline):f.slice();s(x,E,e.forChild(o,x),v),o=k}}function pC(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function mC(n,e,t,s){for(let l=0,o=0;l<n.childCount&&o<=s;){let c=n.child(l++),f=o;if(o+=c.nodeSize,!c.isText)continue;let d=c.text;for(;l<n.childCount;){let h=n.child(l++);if(o+=h.nodeSize,!h.isText)break;d+=h.text}if(o>=t){if(o>=s&&d.slice(s-e.length-f,s-f)==e)return s-e.length;let h=f<s?d.lastIndexOf(e,s-f-1):-1;if(h>=0&&h+e.length+f>=t)return f+h;if(t==s&&d.length>=s+e.length-f&&d.slice(s-f,s-f+e.length)==e)return s}}return-1}function Uh(n,e,t,s,l){let o=[];for(let c=0,f=0;c<n.length;c++){let d=n[c],h=f,m=f+=d.size;h>=t||m<=e?o.push(d):(h<e&&o.push(d.slice(0,e-h,s)),l&&(o.push(l),l=void 0),m>t&&o.push(d.slice(t-h,d.size,s)))}return o}function bp(n,e=null){let t=n.domSelectionRange(),s=n.state.doc;if(!t.focusNode)return null;let l=n.docView.nearestDesc(t.focusNode),o=l&&l.size==0,c=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(c<0)return null;let f=s.resolve(c),d,h;if(pu(t)){for(d=c;l&&!l.node;)l=l.parent;let y=l.node;if(l&&y.isAtom&&xe.isSelectable(y)&&l.parent&&!(y.isInline&&qM(t.focusNode,t.focusOffset,l.dom))){let x=l.posBefore;h=new xe(c==x?f:s.resolve(x))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=c,x=c;for(let v=0;v<t.rangeCount;v++){let k=t.getRangeAt(v);y=Math.min(y,n.docView.posFromDOM(k.startContainer,k.startOffset,1)),x=Math.max(x,n.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(y<0)return null;[d,c]=x==n.state.selection.anchor?[x,y]:[y,x],f=s.resolve(c)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let m=s.resolve(d);if(!h){let y=e=="pointer"||n.state.selection.head<f.pos&&!o?1:-1;h=xp(n,m,f,y)}return h}function Xx(n){return n.editable?n.hasFocus():Zx(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Er(n,e=!1){let t=n.state.selection;if(Qx(n,t),!!Xx(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&qt){let s=n.domSelectionRange(),l=n.domObserver.currentSelection;if(s.anchorNode&&l.anchorNode&&ei(s.anchorNode,s.anchorOffset,l.anchorNode,l.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)yC(n);else{let{anchor:s,head:l}=t,o,c;Lb&&!(t instanceof ke)&&(t.$from.parent.inlineContent||(o=_b(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(c=_b(n,t.to))),n.docView.setSelection(s,l,n,e),Lb&&(o&&Bb(o),c&&Bb(c)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&gC(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Lb=Pt||qt&&Bx<63;function _b(n,e){let{node:t,offset:s}=n.docView.domFromPos(e,0),l=s<t.childNodes.length?t.childNodes[s]:null,o=s?t.childNodes[s-1]:null;if(Pt&&l&&l.contentEditable=="false")return lh(l);if((!l||l.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(l)return lh(l);if(o)return lh(o)}}function lh(n){return n.contentEditable="true",Pt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Bb(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function gC(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),s=t.anchorNode,l=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=s||t.anchorOffset!=l)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Xx(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function yC(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,s=t.nodeName=="IMG";s?e.collapse(t.parentNode,It(t)+1):e.collapse(t,0),!s&&!n.state.selection.visible&&an&&hs<=11&&(t.disabled=!0,t.disabled=!1)}function Qx(n,e){if(e instanceof xe){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Hb(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Hb(n)}function Hb(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function xp(n,e,t,s){return n.someProp("createSelectionBetween",l=>l(n,e,t))||ke.between(e,t,s)}function Ub(n){return n.editable&&!n.hasFocus()?!1:Zx(n)}function Zx(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function bC(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return ei(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Ih(n,e){let{$anchor:t,$head:s}=n.selection,l=e>0?t.max(s):t.min(s),o=l.parent.inlineContent?l.depth?n.doc.resolve(e>0?l.after():l.before()):null:l;return o&&Re.findFrom(o,e)}function ns(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Ib(n,e,t){let s=n.state.selection;if(s instanceof ke)if(t.indexOf("s")>-1){let{$head:l}=s,o=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let c=n.state.doc.resolve(l.pos+o.nodeSize*(e<0?-1:1));return ns(n,new ke(s.$anchor,c))}else if(s.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let l=Ih(n.state,e);return l&&l instanceof xe?ns(n,l):!1}else if(!(Rn&&t.indexOf("m")>-1)){let l=s.$head,o=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter,c;if(!o||o.isText)return!1;let f=e<0?l.pos-o.nodeSize:l.pos;return o.isAtom||(c=n.docView.descAt(f))&&!c.contentDOM?xe.isSelectable(o)?ns(n,new xe(e<0?n.state.doc.resolve(l.pos-o.nodeSize):l)):_o?ns(n,new ke(n.state.doc.resolve(e<0?f:f+o.nodeSize))):!1:!1}}else return!1;else{if(s instanceof xe&&s.node.isInline)return ns(n,new ke(e>0?s.$to:s.$from));{let l=Ih(n.state,e);return l?ns(n,l):!1}}}function Cc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function mo(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Yi(n,e){return e<0?xC(n):vC(n)}function xC(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let l,o,c=!1;for(Ln&&t.nodeType==1&&s<Cc(t)&&mo(t.childNodes[s],-1)&&(c=!0);;)if(s>0){if(t.nodeType!=1)break;{let f=t.childNodes[s-1];if(mo(f,-1))l=t,o=--s;else if(f.nodeType==3)t=f,s=t.nodeValue.length;else break}}else{if(Wx(t))break;{let f=t.previousSibling;for(;f&&mo(f,-1);)l=t.parentNode,o=It(f),f=f.previousSibling;if(f)t=f,s=Cc(t);else{if(t=t.parentNode,t==n.dom)break;s=0}}}c?Vh(n,t,s):l&&Vh(n,l,o)}function vC(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let l=Cc(t),o,c;for(;;)if(s<l){if(t.nodeType!=1)break;let f=t.childNodes[s];if(mo(f,1))o=t,c=++s;else break}else{if(Wx(t))break;{let f=t.nextSibling;for(;f&&mo(f,1);)o=f.parentNode,c=It(f)+1,f=f.nextSibling;if(f)t=f,s=0,l=Cc(t);else{if(t=t.parentNode,t==n.dom)break;s=l=0}}}o&&Vh(n,o,c)}function Wx(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function SC(n,e){for(;n&&e==n.childNodes.length&&!Lo(n);)e=It(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function kC(n,e){for(;n&&!e&&!Lo(n);)e=It(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Vh(n,e,t){if(e.nodeType!=3){let o,c;(c=SC(e,t))?(e=c,t=0):(o=kC(e,t))&&(e=o,t=o.nodeValue.length)}let s=n.domSelection();if(!s)return;if(pu(s)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),s.removeAllRanges(),s.addRange(o)}else s.extend&&s.extend(e,t);n.domObserver.setCurSelection();let{state:l}=n;setTimeout(()=>{n.state==l&&Er(n)},50)}function Vb(n,e){let t=n.state.doc.resolve(e);if(!(qt||Hx)&&t.parent.inlineContent){let l=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),c=(o.top+o.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(o.left-l.left)>1)return o.left<l.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),c=(o.top+o.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(o.left-l.left)>1)return o.left>l.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function qb(n,e,t){let s=n.state.selection;if(s instanceof ke&&!s.empty||t.indexOf("s")>-1||Rn&&t.indexOf("m")>-1)return!1;let{$from:l,$to:o}=s;if(!l.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let c=Ih(n.state,e);if(c&&c instanceof xe)return ns(n,c)}if(!l.parent.inlineContent){let c=e<0?l:o,f=s instanceof xn?Re.near(c,e):Re.findFrom(c,e);return f?ns(n,f):!1}return!1}function $b(n,e){if(!(n.state.selection instanceof ke))return!0;let{$head:t,$anchor:s,empty:l}=n.state.selection;if(!t.sameParent(s))return!0;if(!l)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let c=n.state.tr;return e<0?c.delete(t.pos-o.nodeSize,t.pos):c.delete(t.pos,t.pos+o.nodeSize),n.dispatch(c),!0}return!1}function Gb(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function TC(n){if(!Pt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let s=e.firstChild;Gb(n,s,"true"),setTimeout(()=>Gb(n,s,"false"),20)}return!1}function EC(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function MC(n,e){let t=e.keyCode,s=EC(e);if(t==8||Rn&&t==72&&s=="c")return $b(n,-1)||Yi(n,-1);if(t==46&&!e.shiftKey||Rn&&t==68&&s=="c")return $b(n,1)||Yi(n,1);if(t==13||t==27)return!0;if(t==37||Rn&&t==66&&s=="c"){let l=t==37?Vb(n,n.state.selection.from)=="ltr"?-1:1:-1;return Ib(n,l,s)||Yi(n,l)}else if(t==39||Rn&&t==70&&s=="c"){let l=t==39?Vb(n,n.state.selection.from)=="ltr"?1:-1:1;return Ib(n,l,s)||Yi(n,l)}else{if(t==38||Rn&&t==80&&s=="c")return qb(n,-1,s)||Yi(n,-1);if(t==40||Rn&&t==78&&s=="c")return TC(n)||qb(n,1,s)||Yi(n,1);if(s==(Rn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function vp(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:s,openStart:l,openEnd:o}=e;for(;l>1&&o>1&&s.childCount==1&&s.firstChild.childCount==1;){l--,o--;let v=s.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),s=v.content}let c=n.someProp("clipboardSerializer")||ri.fromSchema(n.state.schema),f=iv(),d=f.createElement("div");d.appendChild(c.serializeFragment(s,{document:f}));let h=d.firstChild,m,y=0;for(;h&&h.nodeType==1&&(m=sv[h.nodeName.toLowerCase()]);){for(let v=m.length-1;v>=0;v--){let k=f.createElement(m[v]);for(;d.firstChild;)k.appendChild(d.firstChild);d.appendChild(k),y++}h=d.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${l} ${o}${y?` -${y}`:""} ${JSON.stringify(t)}`);let x=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:x,slice:e}}function ev(n,e,t,s,l){let o=l.parent.type.spec.code,c,f;if(!t&&!e)return null;let d=!!e&&(s||o||!t);if(d){if(n.someProp("transformPastedText",x=>{e=x(e,o||s,n)}),o)return f=new oe(Q.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",x=>{f=x(f,n,!0)}),f;let y=n.someProp("clipboardTextParser",x=>x(e,l,s,n));if(y)f=y;else{let x=l.marks(),{schema:v}=n.state,k=ri.fromSchema(v);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let M=c.appendChild(document.createElement("p"));E&&M.appendChild(k.serializeNode(v.text(E,x)))})}}else n.someProp("transformPastedHTML",y=>{t=y(t,n)}),c=AC(t),_o&&OC(c);let h=c&&c.querySelector("[data-pm-slice]"),m=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(m&&m[3])for(let y=+m[3];y>0;y--){let x=c.firstChild;for(;x&&x.nodeType!=1;)x=x.nextSibling;if(!x)break;c=x}if(f||(f=(n.someProp("clipboardParser")||n.someProp("domParser")||ds.fromSchema(n.state.schema)).parseSlice(c,{preserveWhitespace:!!(d||m),context:l,ruleFromNode(x){return x.nodeName=="BR"&&!x.nextSibling&&x.parentNode&&!CC.test(x.parentNode.nodeName)?{ignore:!0}:null}})),m)f=DC(Yb(f,+m[1],+m[2]),m[4]);else if(f=oe.maxOpen(wC(f.content,l),!0),f.openStart||f.openEnd){let y=0,x=0;for(let v=f.content.firstChild;y<f.openStart&&!v.type.spec.isolating;y++,v=v.firstChild);for(let v=f.content.lastChild;x<f.openEnd&&!v.type.spec.isolating;x++,v=v.lastChild);f=Yb(f,y,x)}return n.someProp("transformPasted",y=>{f=y(f,n,d)}),f}const CC=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function wC(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let l=e.node(t).contentMatchAt(e.index(t)),o,c=[];if(n.forEach(f=>{if(!c)return;let d=l.findWrapping(f.type),h;if(!d)return c=null;if(h=c.length&&o.length&&nv(d,o,f,c[c.length-1],0))c[c.length-1]=h;else{c.length&&(c[c.length-1]=rv(c[c.length-1],o.length));let m=tv(f,d);c.push(m),l=l.matchType(m.type),o=d}}),c)return Q.from(c)}return n}function tv(n,e,t=0){for(let s=e.length-1;s>=t;s--)n=e[s].create(null,Q.from(n));return n}function nv(n,e,t,s,l){if(l<n.length&&l<e.length&&n[l]==e[l]){let o=nv(n,e,t,s.lastChild,l+1);if(o)return s.copy(s.content.replaceChild(s.childCount-1,o));if(s.contentMatchAt(s.childCount).matchType(l==n.length-1?t.type:n[l+1]))return s.copy(s.content.append(Q.from(tv(t,n,l+1))))}}function rv(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,rv(n.lastChild,e-1)),s=n.contentMatchAt(n.childCount).fillBefore(Q.empty,!0);return n.copy(t.append(s))}function qh(n,e,t,s,l,o){let c=e<0?n.firstChild:n.lastChild,f=c.content;return n.childCount>1&&(o=0),l<s-1&&(f=qh(f,e,t,s,l+1,o)),l>=t&&(f=e<0?c.contentMatchAt(0).fillBefore(f,o<=l).append(f):f.append(c.contentMatchAt(c.childCount).fillBefore(Q.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,c.copy(f))}function Yb(n,e,t){return e<n.openStart&&(n=new oe(qh(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new oe(qh(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const sv={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Kb=null;function iv(){return Kb||(Kb=document.implementation.createHTMLDocument("title"))}let oh=null;function NC(n){let e=window.trustedTypes;return e?(oh||(oh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),oh.createHTML(n)):n}function AC(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=iv().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(n),l;if((l=s&&sv[s[1].toLowerCase()])&&(n=l.map(o=>"<"+o+">").join("")+n+l.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=NC(n),l)for(let o=0;o<l.length;o++)t=t.querySelector(l[o])||t;return t}function OC(n){let e=n.querySelectorAll(qt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let s=e[t];s.childNodes.length==1&&s.textContent==""&&s.parentNode&&s.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),s)}}function DC(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,s;try{s=JSON.parse(e)}catch{return n}let{content:l,openStart:o,openEnd:c}=n;for(let f=s.length-2;f>=0;f-=2){let d=t.nodes[s[f]];if(!d||d.hasRequiredAttrs())break;l=Q.from(d.create(s[f+1],l)),o++,c++}return new oe(l,o,c)}const Qt={},Zt={},jC={touchstart:!0,touchmove:!0};class RC{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function zC(n){for(let e in Qt){let t=Qt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=s=>{_C(n,s)&&!Sp(n,s)&&(n.editable||!(s.type in Zt))&&t(n,s)},jC[e]?{passive:!0}:void 0)}Pt&&n.dom.addEventListener("input",()=>null),$h(n)}function us(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function LC(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function $h(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=s=>Sp(n,s))})}function Sp(n,e){return n.someProp("handleDOMEvents",t=>{let s=t[e.type];return s?s(n,e)||e.defaultPrevented:!1})}function _C(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function BC(n,e){!Sp(n,e)&&Qt[e.type]&&(n.editable||!(e.type in Zt))&&Qt[e.type](n,e)}Zt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!ov(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(kr&&qt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),rl&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let s=Date.now();n.input.lastIOSEnter=s,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==s&&(n.someProp("handleKeyDown",l=>l(n,qs(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",s=>s(n,t))||MC(n,t)?t.preventDefault():us(n,"key")};Zt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Zt.keypress=(n,e)=>{let t=e;if(ov(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Rn&&t.metaKey)return;if(n.someProp("handleKeyPress",l=>l(n,t))){t.preventDefault();return}let s=n.state.selection;if(!(s instanceof ke)||!s.$from.sameParent(s.$to)){let l=String.fromCharCode(t.charCode),o=()=>n.state.tr.insertText(l).scrollIntoView();!/[\r\n]/.test(l)&&!n.someProp("handleTextInput",c=>c(n,s.$from.pos,s.$to.pos,l,o))&&n.dispatch(o()),t.preventDefault()}};function gu(n){return{left:n.clientX,top:n.clientY}}function HC(n,e){let t=e.x-n.clientX,s=e.y-n.clientY;return t*t+s*s<100}function kp(n,e,t,s,l){if(s==-1)return!1;let o=n.state.doc.resolve(s);for(let c=o.depth+1;c>0;c--)if(n.someProp(e,f=>c>o.depth?f(n,t,o.nodeAfter,o.before(c),l,!0):f(n,t,o.node(c),o.before(c),l,!1)))return!0;return!1}function Wi(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let s=n.state.tr.setSelection(e);s.setMeta("pointer",!0),n.dispatch(s)}function UC(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),s=t.nodeAfter;return s&&s.isAtom&&xe.isSelectable(s)?(Wi(n,new xe(t)),!0):!1}function IC(n,e){if(e==-1)return!1;let t=n.state.selection,s,l;t instanceof xe&&(s=t.node);let o=n.state.doc.resolve(e);for(let c=o.depth+1;c>0;c--){let f=c>o.depth?o.nodeAfter:o.node(c);if(xe.isSelectable(f)){s&&t.$from.depth>0&&c>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?l=o.before(t.$from.depth):l=o.before(c);break}}return l!=null?(Wi(n,xe.create(n.state.doc,l)),!0):!1}function VC(n,e,t,s,l){return kp(n,"handleClickOn",e,t,s)||n.someProp("handleClick",o=>o(n,e,s))||(l?IC(n,t):UC(n,t))}function qC(n,e,t,s){return kp(n,"handleDoubleClickOn",e,t,s)||n.someProp("handleDoubleClick",l=>l(n,e,s))}function $C(n,e,t,s){return kp(n,"handleTripleClickOn",e,t,s)||n.someProp("handleTripleClick",l=>l(n,e,s))||GC(n,t,s)}function GC(n,e,t){if(t.button!=0)return!1;let s=n.state.doc;if(e==-1)return s.inlineContent?(Wi(n,ke.create(s,0,s.content.size)),!0):!1;let l=s.resolve(e);for(let o=l.depth+1;o>0;o--){let c=o>l.depth?l.nodeAfter:l.node(o),f=l.before(o);if(c.inlineContent)Wi(n,ke.create(s,f+1,f+1+c.content.size));else if(xe.isSelectable(c))Wi(n,xe.create(s,f));else continue;return!0}}function Tp(n){return wc(n)}const lv=Rn?"metaKey":"ctrlKey";Qt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let s=Tp(n),l=Date.now(),o="singleClick";l-n.input.lastClick.time<500&&HC(t,n.input.lastClick)&&!t[lv]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:l,x:t.clientX,y:t.clientY,type:o,button:t.button};let c=n.posAtCoords(gu(t));c&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new YC(n,c,t,!!s)):(o=="doubleClick"?qC:$C)(n,c.pos,c.inside,t)?t.preventDefault():us(n,"pointer"))};class YC{constructor(e,t,s,l){this.view=e,this.pos=t,this.event=s,this.flushed=l,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!s[lv],this.allowDefault=s.shiftKey;let o,c;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),c=t.inside;else{let m=e.state.doc.resolve(t.pos);o=m.parent,c=m.depth?m.before():0}const f=l?null:s.target,d=f?e.docView.nearestDesc(f,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:h}=e.state;(s.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof xe&&h.from<=c&&h.to>c)&&(this.mightDrag={node:o,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ln&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),us(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Er(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(gu(e))),this.updateAllowDefault(e),this.allowDefault||!t?us(this.view,"pointer"):VC(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Pt&&this.mightDrag&&!this.mightDrag.node.isAtom||qt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Wi(this.view,Re.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):us(this.view,"pointer")}move(e){this.updateAllowDefault(e),us(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Qt.touchstart=n=>{n.input.lastTouch=Date.now(),Tp(n),us(n,"pointer")};Qt.touchmove=n=>{n.input.lastTouch=Date.now(),us(n,"pointer")};Qt.contextmenu=n=>Tp(n);function ov(n,e){return n.composing?!0:Pt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const KC=kr?5e3:-1;Zt.compositionstart=Zt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof ke&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(s=>s.type.spec.inclusive===!1)||qt&&Hx&&PC(n)))n.markCursor=n.state.storedMarks||t.marks(),wc(n,!0),n.markCursor=null;else if(wc(n,!e.selection.empty),Ln&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let s=n.domSelectionRange();for(let l=s.focusNode,o=s.focusOffset;l&&l.nodeType==1&&o!=0;){let c=o<0?l.lastChild:l.childNodes[o-1];if(!c)break;if(c.nodeType==3){let f=n.domSelection();f&&f.collapse(c,c.nodeValue.length);break}else l=c,o=-1}}n.input.composing=!0}av(n,KC)};function PC(n){let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(!e||e.nodeType!=1||t>=e.childNodes.length)return!1;let s=e.childNodes[t];return s.nodeType==1&&s.contentEditable=="false"}Zt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.badSafariComposition?n.domObserver.forceFlush():n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,av(n,20))};function av(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>wc(n),e))}function cv(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=JC());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function FC(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=IM(e.focusNode,e.focusOffset),s=VM(e.focusNode,e.focusOffset);if(t&&s&&t!=s){let l=s.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||s==o)return o;if(!l||!l.isText(s.nodeValue))return s;if(n.input.compositionNode==s){let c=t.pmViewDesc;if(!(!c||!c.isText(t.nodeValue)))return s}}return t||s}function JC(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function wc(n,e=!1){if(!(kr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),cv(n),e||n.docView&&n.docView.dirty){let t=bp(n),s=n.state.selection;return t&&!t.eq(s)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!s.$from.node(s.$from.sharedDepth(s.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function XC(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let s=getSelection(),l=document.createRange();l.selectNodeContents(e),n.dom.blur(),s.removeAllRanges(),s.addRange(l),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Co=an&&hs<15||rl&&YM<604;Qt.copy=Zt.cut=(n,e)=>{let t=e,s=n.state.selection,l=t.type=="cut";if(s.empty)return;let o=Co?null:t.clipboardData,c=s.content(),{dom:f,text:d}=vp(n,c);o?(t.preventDefault(),o.clearData(),o.setData("text/html",f.innerHTML),o.setData("text/plain",d)):XC(n,f),l&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function QC(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function ZC(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,s=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(s.contentEditable="true"),s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus();let l=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),s.parentNode&&s.parentNode.removeChild(s),t?wo(n,s.value,null,l,e):wo(n,s.textContent,s.innerHTML,l,e)},50)}function wo(n,e,t,s,l){let o=ev(n,e,t,s,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,l,o||oe.empty)))return!0;if(!o)return!1;let c=QC(o),f=c?n.state.tr.replaceSelectionWith(c,s):n.state.tr.replaceSelection(o);return n.dispatch(f.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function uv(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Zt.paste=(n,e)=>{let t=e;if(n.composing&&!kr)return;let s=Co?null:t.clipboardData,l=n.input.shiftKey&&n.input.lastKeyCode!=45;s&&wo(n,uv(s),s.getData("text/html"),l,t)?t.preventDefault():ZC(n,t)};class fv{constructor(e,t,s){this.slice=e,this.move=t,this.node=s}}const WC=Rn?"altKey":"ctrlKey";function dv(n,e){let t=n.someProp("dragCopies",s=>!s(e));return t??!e[WC]}Qt.dragstart=(n,e)=>{let t=e,s=n.input.mouseDown;if(s&&s.done(),!t.dataTransfer)return;let l=n.state.selection,o=l.empty?null:n.posAtCoords(gu(t)),c;if(!(o&&o.pos>=l.from&&o.pos<=(l instanceof xe?l.to-1:l.to))){if(s&&s.mightDrag)c=xe.create(n.state.doc,s.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=n.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=n.docView&&(c=xe.create(n.state.doc,y.posBefore))}}let f=(c||n.state.selection).content(),{dom:d,text:h,slice:m}=vp(n,f);(!t.dataTransfer.files.length||!qt||Bx>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Co?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",Co||t.dataTransfer.setData("text/plain",h),n.dragging=new fv(m,dv(n,t),c)};Qt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Zt.dragover=Zt.dragenter=(n,e)=>e.preventDefault();Zt.drop=(n,e)=>{try{ew(n,e,n.dragging)}finally{n.dragging=null}};function ew(n,e,t){if(!e.dataTransfer)return;let s=n.posAtCoords(gu(e));if(!s)return;let l=n.state.doc.resolve(s.pos),o=t&&t.slice;o?n.someProp("transformPasted",v=>{o=v(o,n,!1)}):o=ev(n,uv(e.dataTransfer),Co?null:e.dataTransfer.getData("text/html"),!1,l);let c=!!(t&&dv(n,e));if(n.someProp("handleDrop",v=>v(n,e,o||oe.empty,c))){e.preventDefault();return}if(!o)return;e.preventDefault();let f=o?gx(n.state.doc,l.pos,o):l.pos;f==null&&(f=l.pos);let d=n.state.tr;if(c){let{node:v}=t;v?v.replace(d):d.deleteSelection()}let h=d.mapping.map(f),m=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,y=d.doc;if(m?d.replaceRangeWith(h,h,o.content.firstChild):d.replaceRange(h,h,o),d.doc.eq(y))return;let x=d.doc.resolve(h);if(m&&xe.isSelectable(o.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new xe(x));else{let v=d.mapping.map(f);d.mapping.maps[d.mapping.maps.length-1].forEach((k,E,M,C)=>v=C),d.setSelection(xp(n,x,d.doc.resolve(v)))}n.focus(),n.dispatch(d.setMeta("uiEvent","drop"))}Qt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Er(n)},20))};Qt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Qt.beforeinput=(n,e)=>{if(qt&&kr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:s}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=s||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,qs(8,"Backspace")))))return;let{$cursor:l}=n.state.selection;l&&l.pos>0&&n.dispatch(n.state.tr.delete(l.pos-1,l.pos).scrollIntoView())},50)}};for(let n in Zt)Qt[n]=Zt[n];function No(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Nc{constructor(e,t){this.toDOM=e,this.spec=t||Js,this.side=this.spec.side||0}map(e,t,s,l){let{pos:o,deleted:c}=e.mapResult(t.from+l,this.side<0?-1:1);return c?null:new Xt(o-s,o-s,this)}valid(){return!0}eq(e){return this==e||e instanceof Nc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&No(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ms{constructor(e,t){this.attrs=e,this.spec=t||Js}map(e,t,s,l){let o=e.map(t.from+l,this.spec.inclusiveStart?-1:1)-s,c=e.map(t.to+l,this.spec.inclusiveEnd?1:-1)-s;return o>=c?null:new Xt(o,c,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ms&&No(this.attrs,e.attrs)&&No(this.spec,e.spec)}static is(e){return e.type instanceof ms}destroy(){}}class Ep{constructor(e,t){this.attrs=e,this.spec=t||Js}map(e,t,s,l){let o=e.mapResult(t.from+l,1);if(o.deleted)return null;let c=e.mapResult(t.to+l,-1);return c.deleted||c.pos<=o.pos?null:new Xt(o.pos-s,c.pos-s,this)}valid(e,t){let{index:s,offset:l}=e.content.findIndex(t.from),o;return l==t.from&&!(o=e.child(s)).isText&&l+o.nodeSize==t.to}eq(e){return this==e||e instanceof Ep&&No(this.attrs,e.attrs)&&No(this.spec,e.spec)}destroy(){}}class Xt{constructor(e,t,s){this.from=e,this.to=t,this.type=s}copy(e,t){return new Xt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,s){return this.type.map(e,this,t,s)}static widget(e,t,s){return new Xt(e,e,new Nc(t,s))}static inline(e,t,s,l){return new Xt(e,t,new ms(s,l))}static node(e,t,s,l){return new Xt(e,t,new Ep(s,l))}get spec(){return this.type.spec}get inline(){return this.type instanceof ms}get widget(){return this.type instanceof Nc}}const Pi=[],Js={};class ft{constructor(e,t){this.local=e.length?e:Pi,this.children=t.length?t:Pi}static create(e,t){return t.length?Ac(t,e,0,Js):Kt}find(e,t,s){let l=[];return this.findInner(e??0,t??1e9,l,0,s),l}findInner(e,t,s,l,o){for(let c=0;c<this.local.length;c++){let f=this.local[c];f.from<=t&&f.to>=e&&(!o||o(f.spec))&&s.push(f.copy(f.from+l,f.to+l))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<t&&this.children[c+1]>e){let f=this.children[c]+1;this.children[c+2].findInner(e-f,t-f,s,l+f,o)}}map(e,t,s){return this==Kt||e.maps.length==0?this:this.mapInner(e,t,0,0,s||Js)}mapInner(e,t,s,l,o){let c;for(let f=0;f<this.local.length;f++){let d=this.local[f].map(e,s,l);d&&d.type.valid(t,d)?(c||(c=[])).push(d):o.onRemove&&o.onRemove(this.local[f].spec)}return this.children.length?tw(this.children,c||[],e,t,s,l,o):c?new ft(c.sort(Xs),Pi):Kt}add(e,t){return t.length?this==Kt?ft.create(e,t):this.addInner(e,t,0):this}addInner(e,t,s){let l,o=0;e.forEach((f,d)=>{let h=d+s,m;if(m=pv(t,f,h)){for(l||(l=this.children.slice());o<l.length&&l[o]<d;)o+=3;l[o]==d?l[o+2]=l[o+2].addInner(f,m,h+1):l.splice(o,0,d,d+f.nodeSize,Ac(m,f,h+1,Js)),o+=3}});let c=hv(o?mv(t):t,-s);for(let f=0;f<c.length;f++)c[f].type.valid(e,c[f])||c.splice(f--,1);return new ft(c.length?this.local.concat(c).sort(Xs):this.local,l||this.children)}remove(e){return e.length==0||this==Kt?this:this.removeInner(e,0)}removeInner(e,t){let s=this.children,l=this.local;for(let o=0;o<s.length;o+=3){let c,f=s[o]+t,d=s[o+1]+t;for(let m=0,y;m<e.length;m++)(y=e[m])&&y.from>f&&y.to<d&&(e[m]=null,(c||(c=[])).push(y));if(!c)continue;s==this.children&&(s=this.children.slice());let h=s[o+2].removeInner(c,f+1);h!=Kt?s[o+2]=h:(s.splice(o,3),o-=3)}if(l.length){for(let o=0,c;o<e.length;o++)if(c=e[o])for(let f=0;f<l.length;f++)l[f].eq(c,t)&&(l==this.local&&(l=this.local.slice()),l.splice(f--,1))}return s==this.children&&l==this.local?this:l.length||s.length?new ft(l,s):Kt}forChild(e,t){if(this==Kt)return this;if(t.isLeaf)return ft.empty;let s,l;for(let f=0;f<this.children.length;f+=3)if(this.children[f]>=e){this.children[f]==e&&(s=this.children[f+2]);break}let o=e+1,c=o+t.content.size;for(let f=0;f<this.local.length;f++){let d=this.local[f];if(d.from<c&&d.to>o&&d.type instanceof ms){let h=Math.max(o,d.from)-o,m=Math.min(c,d.to)-o;h<m&&(l||(l=[])).push(d.copy(h,m))}}if(l){let f=new ft(l.sort(Xs),Pi);return s?new is([f,s]):f}return s||Kt}eq(e){if(this==e)return!0;if(!(e instanceof ft)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Mp(this.localsInner(e))}localsInner(e){if(this==Kt)return Pi;if(e.inlineContent||!this.local.some(ms.is))return this.local;let t=[];for(let s=0;s<this.local.length;s++)this.local[s].type instanceof ms||t.push(this.local[s]);return t}forEachSet(e){e(this)}}ft.empty=new ft([],[]);ft.removeOverlap=Mp;const Kt=ft.empty;class is{constructor(e){this.members=e}map(e,t){const s=this.members.map(l=>l.map(e,t,Js));return is.from(s)}forChild(e,t){if(t.isLeaf)return ft.empty;let s=[];for(let l=0;l<this.members.length;l++){let o=this.members[l].forChild(e,t);o!=Kt&&(o instanceof is?s=s.concat(o.members):s.push(o))}return is.from(s)}eq(e){if(!(e instanceof is)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,s=!0;for(let l=0;l<this.members.length;l++){let o=this.members[l].localsInner(e);if(o.length)if(!t)t=o;else{s&&(t=t.slice(),s=!1);for(let c=0;c<o.length;c++)t.push(o[c])}}return t?Mp(s?t:t.sort(Xs)):Pi}static from(e){switch(e.length){case 0:return Kt;case 1:return e[0];default:return new is(e.every(t=>t instanceof ft)?e:e.reduce((t,s)=>t.concat(s instanceof ft?s:s.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function tw(n,e,t,s,l,o,c){let f=n.slice();for(let h=0,m=o;h<t.maps.length;h++){let y=0;t.maps[h].forEach((x,v,k,E)=>{let M=E-k-(v-x);for(let C=0;C<f.length;C+=3){let z=f[C+1];if(z<0||x>z+m-y)continue;let q=f[C]+m-y;v>=q?f[C+1]=x<=q?-2:-1:x>=m&&M&&(f[C]+=M,f[C+1]+=M)}y+=M}),m=t.maps[h].map(m,-1)}let d=!1;for(let h=0;h<f.length;h+=3)if(f[h+1]<0){if(f[h+1]==-2){d=!0,f[h+1]=-1;continue}let m=t.map(n[h]+o),y=m-l;if(y<0||y>=s.content.size){d=!0;continue}let x=t.map(n[h+1]+o,-1),v=x-l,{index:k,offset:E}=s.content.findIndex(y),M=s.maybeChild(k);if(M&&E==y&&E+M.nodeSize==v){let C=f[h+2].mapInner(t,M,m+1,n[h]+o+1,c);C!=Kt?(f[h]=y,f[h+1]=v,f[h+2]=C):(f[h+1]=-2,d=!0)}else d=!0}if(d){let h=nw(f,n,e,t,l,o,c),m=Ac(h,s,0,c);e=m.local;for(let y=0;y<f.length;y+=3)f[y+1]<0&&(f.splice(y,3),y-=3);for(let y=0,x=0;y<m.children.length;y+=3){let v=m.children[y];for(;x<f.length&&f[x]<v;)x+=3;f.splice(x,0,m.children[y],m.children[y+1],m.children[y+2])}}return new ft(e.sort(Xs),f)}function hv(n,e){if(!e||!n.length)return n;let t=[];for(let s=0;s<n.length;s++){let l=n[s];t.push(new Xt(l.from+e,l.to+e,l.type))}return t}function nw(n,e,t,s,l,o,c){function f(d,h){for(let m=0;m<d.local.length;m++){let y=d.local[m].map(s,l,h);y?t.push(y):c.onRemove&&c.onRemove(d.local[m].spec)}for(let m=0;m<d.children.length;m+=3)f(d.children[m+2],d.children[m]+h+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&f(n[d+2],e[d]+o+1);return t}function pv(n,e,t){if(e.isLeaf)return null;let s=t+e.nodeSize,l=null;for(let o=0,c;o<n.length;o++)(c=n[o])&&c.from>t&&c.to<s&&((l||(l=[])).push(c),n[o]=null);return l}function mv(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Ac(n,e,t,s){let l=[],o=!1;e.forEach((f,d)=>{let h=pv(n,f,d+t);if(h){o=!0;let m=Ac(h,f,t+d+1,s);m!=Kt&&l.push(d,d+f.nodeSize,m)}});let c=hv(o?mv(n):n,-t).sort(Xs);for(let f=0;f<c.length;f++)c[f].type.valid(e,c[f])||(s.onRemove&&s.onRemove(c[f].spec),c.splice(f--,1));return c.length||l.length?new ft(c,l):Kt}function Xs(n,e){return n.from-e.from||n.to-e.to}function Mp(n){let e=n;for(let t=0;t<e.length-1;t++){let s=e[t];if(s.from!=s.to)for(let l=t+1;l<e.length;l++){let o=e[l];if(o.from==s.from){o.to!=s.to&&(e==n&&(e=n.slice()),e[l]=o.copy(o.from,s.to),Pb(e,l+1,o.copy(s.to,o.to)));continue}else{o.from<s.to&&(e==n&&(e=n.slice()),e[t]=s.copy(s.from,o.from),Pb(e,l,s.copy(o.from,s.to)));break}}}return e}function Pb(n,e,t){for(;e<n.length&&Xs(t,n[e])>0;)e++;n.splice(e,0,t)}function ah(n){let e=[];return n.someProp("decorations",t=>{let s=t(n.state);s&&s!=Kt&&e.push(s)}),n.cursorWrapper&&e.push(ft.create(n.state.doc,[n.cursorWrapper.deco])),is.from(e)}const rw={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},sw=an&&hs<=11;class iw{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class lw{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new iw,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(s=>{for(let l=0;l<s.length;l++)this.queue.push(s[l]);an&&hs<=11&&s.some(l=>l.type=="childList"&&l.removedNodes.length||l.type=="characterData"&&l.oldValue.length>l.target.nodeValue.length)?this.flushSoon():Pt&&e.composing&&s.some(l=>l.type=="childList"&&l.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),sw&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,rw)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ub(this.view)){if(this.suppressingSelectionUpdates)return Er(this.view);if(an&&hs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ei(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,s;for(let o=e.focusNode;o;o=nl(o))t.add(o);for(let o=e.anchorNode;o;o=nl(o))if(t.has(o)){s=o;break}let l=s&&this.view.docView.nearestDesc(s);if(l&&l.ignoreMutation({type:"selection",target:s.nodeType==3?s.parentNode:s}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let s=e.domSelectionRange(),l=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(s)&&Ub(e)&&!this.ignoreSelectionChange(s),o=-1,c=-1,f=!1,d=[];if(e.editable)for(let m=0;m<t.length;m++){let y=this.registerMutation(t[m],d);y&&(o=o<0?y.from:Math.min(y.from,o),c=c<0?y.to:Math.max(y.to,c),y.typeOver&&(f=!0))}if(d.some(m=>m.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let m of d)if(m.nodeName=="BR"&&m.parentNode){let y=m.nextSibling;y&&y.nodeType==1&&y.contentEditable=="false"&&m.parentNode.removeChild(m)}}else if(Ln&&d.length){let m=d.filter(y=>y.nodeName=="BR");if(m.length==2){let[y,x]=m;y.parentNode&&y.parentNode.parentNode==x.parentNode?x.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let x of m){let v=x.parentNode;v&&v.nodeName=="LI"&&(!y||cw(e,y)!=v)&&x.remove()}}}let h=null;o<0&&l&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&pu(s)&&(h=bp(e))&&h.eq(Re.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Er(e),this.currentSelection.set(s),e.scrollToSelection()):(o>-1||l)&&(o>-1&&(e.docView.markDirty(o,c),ow(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,uw(e,d)),this.handleDOMChange(o,c,f,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(s)||Er(e),this.currentSelection.set(s))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let s=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(s==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!s||s.ignoreMutation(e))return null;if(e.type=="childList"){for(let m=0;m<e.addedNodes.length;m++){let y=e.addedNodes[m];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(s.contentDOM&&s.contentDOM!=s.dom&&!s.contentDOM.contains(e.target))return{from:s.posBefore,to:s.posAfter};let l=e.previousSibling,o=e.nextSibling;if(an&&hs<=11&&e.addedNodes.length)for(let m=0;m<e.addedNodes.length;m++){let{previousSibling:y,nextSibling:x}=e.addedNodes[m];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(l=y),(!x||Array.prototype.indexOf.call(e.addedNodes,x)<0)&&(o=x)}let c=l&&l.parentNode==e.target?It(l)+1:0,f=s.localPosFromDOM(e.target,c,-1),d=o&&o.parentNode==e.target?It(o):e.target.childNodes.length,h=s.localPosFromDOM(e.target,d,1);return{from:f,to:h}}else return e.type=="attributes"?{from:s.posAtStart-s.border,to:s.posAtEnd+s.border}:(this.lastChangedTextNode=e.target,{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Fb=new WeakMap,Jb=!1;function ow(n){if(!Fb.has(n)&&(Fb.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Ln,Jb)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Jb=!0}}function Xb(n,e){let t=e.startContainer,s=e.startOffset,l=e.endContainer,o=e.endOffset,c=n.domAtPos(n.state.selection.anchor);return ei(c.node,c.offset,l,o)&&([t,s,l,o]=[l,o,t,s]),{anchorNode:t,anchorOffset:s,focusNode:l,focusOffset:o}}function aw(n,e){if(e.getComposedRanges){let l=e.getComposedRanges(n.root)[0];if(l)return Xb(n,l)}let t;function s(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",s,!0),t?Xb(n,t):null}function cw(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let s=n.docView.nearestDesc(t,!0);if(s&&s.node.isBlock)return t}return null}function uw(n,e){var t;let{focusNode:s,focusOffset:l}=n.domSelectionRange();for(let o of e)if(((t=o.parentNode)===null||t===void 0?void 0:t.nodeName)=="TR"){let c=o.nextSibling;for(;c&&c.nodeName!="TD"&&c.nodeName!="TH";)c=c.nextSibling;if(c){let f=c;for(;;){let d=f.firstChild;if(!d||d.nodeType!=1||d.contentEditable=="false"||/^(BR|IMG)$/.test(d.nodeName))break;f=d}f.insertBefore(o,f.firstChild),s==o&&n.domSelection().collapse(o,l)}else o.parentNode.removeChild(o)}}function fw(n,e,t){let{node:s,fromOffset:l,toOffset:o,from:c,to:f}=n.docView.parseRange(e,t),d=n.domSelectionRange(),h,m=d.anchorNode;if(m&&n.dom.contains(m.nodeType==1?m:m.parentNode)&&(h=[{node:m,offset:d.anchorOffset}],pu(d)||h.push({node:d.focusNode,offset:d.focusOffset})),qt&&n.input.lastKeyCode===8)for(let M=o;M>l;M--){let C=s.childNodes[M-1],z=C.pmViewDesc;if(C.nodeName=="BR"&&!z){o=M;break}if(!z||z.size)break}let y=n.state.doc,x=n.someProp("domParser")||ds.fromSchema(n.state.schema),v=y.resolve(c),k=null,E=x.parse(s,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:l,to:o,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:dw,context:v});if(h&&h[0].pos!=null){let M=h[0].pos,C=h[1]&&h[1].pos;C==null&&(C=M),k={anchor:M+c,head:C+c}}return{doc:E,sel:k,from:c,to:f}}function dw(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Pt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Pt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const hw=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function pw(n,e,t,s,l){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let I=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,ie=bp(n,I);if(ie&&!n.state.selection.eq(ie)){if(qt&&kr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",De=>De(n,qs(13,"Enter"))))return;let ce=n.state.tr.setSelection(ie);I=="pointer"?ce.setMeta("pointer",!0):I=="key"&&ce.scrollIntoView(),o&&ce.setMeta("composition",o),n.dispatch(ce)}return}let c=n.state.doc.resolve(e),f=c.sharedDepth(t);e=c.before(f+1),t=n.state.doc.resolve(t).after(f+1);let d=n.state.selection,h=fw(n,e,t),m=n.state.doc,y=m.slice(h.from,h.to),x,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(x=n.state.selection.to,v="end"):(x=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let k=yw(y.content,h.doc.content,h.from,x,v);if(k&&n.input.domChangeCount++,(rl&&n.input.lastIOSEnter>Date.now()-225||kr)&&l.some(I=>I.nodeType==1&&!hw.test(I.nodeName))&&(!k||k.endA>=k.endB)&&n.someProp("handleKeyDown",I=>I(n,qs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!k)if(s&&d instanceof ke&&!d.empty&&d.$head.sameParent(d.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))k={start:d.from,endA:d.to,endB:d.to};else{if(h.sel){let I=Qb(n,n.state.doc,h.sel);if(I&&!I.eq(n.state.selection)){let ie=n.state.tr.setSelection(I);o&&ie.setMeta("composition",o),n.dispatch(ie)}}return}n.state.selection.from<n.state.selection.to&&k.start==k.endB&&n.state.selection instanceof ke&&(k.start>n.state.selection.from&&k.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?k.start=n.state.selection.from:k.endA<n.state.selection.to&&k.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(k.endB+=n.state.selection.to-k.endA,k.endA=n.state.selection.to)),an&&hs<=11&&k.endB==k.start+1&&k.endA==k.start&&k.start>h.from&&h.doc.textBetween(k.start-h.from-1,k.start-h.from+1)==" "&&(k.start--,k.endA--,k.endB--);let E=h.doc.resolveNoCache(k.start-h.from),M=h.doc.resolveNoCache(k.endB-h.from),C=m.resolve(k.start),z=E.sameParent(M)&&E.parent.inlineContent&&C.end()>=k.endA;if((rl&&n.input.lastIOSEnter>Date.now()-225&&(!z||l.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!z&&E.pos<h.doc.content.size&&(!E.sameParent(M)||!E.parent.inlineContent)&&E.pos<M.pos&&!/\S/.test(h.doc.textBetween(E.pos,M.pos,"","")))&&n.someProp("handleKeyDown",I=>I(n,qs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>k.start&&gw(m,k.start,k.endA,E,M)&&n.someProp("handleKeyDown",I=>I(n,qs(8,"Backspace")))){kr&&qt&&n.domObserver.suppressSelectionUpdates();return}qt&&k.endB==k.start&&(n.input.lastChromeDelete=Date.now()),kr&&!z&&E.start()!=M.start()&&M.parentOffset==0&&E.depth==M.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==k.endA&&(k.endB-=2,M=h.doc.resolveNoCache(k.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(I){return I(n,qs(13,"Enter"))})},20));let q=k.start,W=k.endA,G=I=>{let ie=I||n.state.tr.replace(q,W,h.doc.slice(k.start-h.from,k.endB-h.from));if(h.sel){let ce=Qb(n,ie.doc,h.sel);ce&&!(qt&&n.composing&&ce.empty&&(k.start!=k.endB||n.input.lastChromeDelete<Date.now()-100)&&(ce.head==q||ce.head==ie.mapping.map(W)-1)||an&&ce.empty&&ce.head==q)&&ie.setSelection(ce)}return o&&ie.setMeta("composition",o),ie.scrollIntoView()},P;if(z)if(E.pos==M.pos){an&&hs<=11&&E.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Er(n),20));let I=G(n.state.tr.delete(q,W)),ie=m.resolve(k.start).marksAcross(m.resolve(k.endA));ie&&I.ensureMarks(ie),n.dispatch(I)}else if(k.endA==k.endB&&(P=mw(E.parent.content.cut(E.parentOffset,M.parentOffset),C.parent.content.cut(C.parentOffset,k.endA-C.start())))){let I=G(n.state.tr);P.type=="add"?I.addMark(q,W,P.mark):I.removeMark(q,W,P.mark),n.dispatch(I)}else if(E.parent.child(E.index()).isText&&E.index()==M.index()-(M.textOffset?0:1)){let I=E.parent.textBetween(E.parentOffset,M.parentOffset),ie=()=>G(n.state.tr.insertText(I,q,W));n.someProp("handleTextInput",ce=>ce(n,q,W,I,ie))||n.dispatch(ie())}else n.dispatch(G());else n.dispatch(G())}function Qb(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:xp(n,e.resolve(t.anchor),e.resolve(t.head))}function mw(n,e){let t=n.firstChild.marks,s=e.firstChild.marks,l=t,o=s,c,f,d;for(let m=0;m<s.length;m++)l=s[m].removeFromSet(l);for(let m=0;m<t.length;m++)o=t[m].removeFromSet(o);if(l.length==1&&o.length==0)f=l[0],c="add",d=m=>m.mark(f.addToSet(m.marks));else if(l.length==0&&o.length==1)f=o[0],c="remove",d=m=>m.mark(f.removeFromSet(m.marks));else return null;let h=[];for(let m=0;m<e.childCount;m++)h.push(d(e.child(m)));if(Q.from(h).eq(n))return{mark:f,type:c}}function gw(n,e,t,s,l){if(t-e<=l.pos-s.pos||ch(s,!0,!1)<l.pos)return!1;let o=n.resolve(e);if(!s.parent.isTextblock){let f=o.nodeAfter;return f!=null&&t==e+f.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let c=n.resolve(ch(o,!0,!0));return!c.parent.isTextblock||c.pos>t||ch(c,!0,!1)<t?!1:s.parent.content.cut(s.parentOffset).eq(c.parent.content)}function ch(n,e,t){let s=n.depth,l=e?n.end():n.pos;for(;s>0&&(e||n.indexAfter(s)==n.node(s).childCount);)s--,l++,e=!1;if(t){let o=n.node(s).maybeChild(n.indexAfter(s));for(;o&&!o.isLeaf;)o=o.firstChild,l++}return l}function yw(n,e,t,s,l){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:c,b:f}=n.findDiffEnd(e,t+n.size,t+e.size);if(l=="end"){let d=Math.max(0,o-Math.min(c,f));s-=c+d-o}if(c<o&&n.size<e.size){let d=s<=o&&s>=c?o-s:0;o-=d,o&&o<e.size&&Zb(e.textBetween(o-1,o+1))&&(o+=d?1:-1),f=o+(f-c),c=o}else if(f<o){let d=s<=o&&s>=f?o-s:0;o-=d,o&&o<n.size&&Zb(n.textBetween(o-1,o+1))&&(o+=d?1:-1),c=o+(c-f),f=o}return{start:o,endA:c,endB:f}}function Zb(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class gv{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new RC,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(r1),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=t1(this),e1(this),this.nodeViews=n1(this),this.docView=Rb(this.state.doc,Wb(this),ah(this),this.dom,this),this.domObserver=new lw(this,(s,l,o,c)=>pw(this,s,l,o,c)),this.domObserver.start(),zC(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&$h(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(r1),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let s in this._props)t[s]=this._props[s];t.state=this.state;for(let s in e)t[s]=e[s];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var s;let l=this.state,o=!1,c=!1;e.storedMarks&&this.composing&&(cv(this),c=!0),this.state=e;let f=l.plugins!=e.plugins||this._props.plugins!=t.plugins;if(f||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=n1(this);xw(v,this.nodeViews)&&(this.nodeViews=v,o=!0)}(f||t.handleDOMEvents!=this._props.handleDOMEvents)&&$h(this),this.editable=t1(this),e1(this);let d=ah(this),h=Wb(this),m=l.plugins!=e.plugins&&!l.doc.eq(e.doc)?"reset":e.scrollToSelection>l.scrollToSelection?"to selection":"preserve",y=o||!this.docView.matchesNode(e.doc,h,d);(y||!e.selection.eq(l.selection))&&(c=!0);let x=m=="preserve"&&c&&this.dom.style.overflowAnchor==null&&FM(this);if(c){this.domObserver.stop();let v=y&&(an||qt)&&!this.composing&&!l.selection.empty&&!e.selection.empty&&bw(l.selection,e.selection);if(y){let k=qt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=FC(this)),(o||!this.docView.update(e.doc,h,d,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=Rb(e.doc,h,d,this.dom,this)),k&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&bC(this))?Er(this,v):(Qx(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(l),!((s=this.dragging)===null||s===void 0)&&s.node&&!l.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,l),m=="reset"?this.dom.scrollTop=0:m=="to selection"?this.scrollToSelection():x&&JM(x)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof xe){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&wb(this,t.getBoundingClientRect(),e)}else wb(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let s=this.directPlugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let s=this.state.plugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let s=this.pluginViews[t];s.update&&s.update(this,e)}}updateDraggedNode(e,t){let s=e.node,l=-1;if(this.state.doc.nodeAt(s.from)==s.node)l=s.from;else{let o=s.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==s.node&&(l=o)}this.dragging=new fv(e.slice,e.move,l<0?void 0:xe.create(this.state.doc,l))}someProp(e,t){let s=this._props&&this._props[e],l;if(s!=null&&(l=t?t(s):s))return l;for(let c=0;c<this.directPlugins.length;c++){let f=this.directPlugins[c].props[e];if(f!=null&&(l=t?t(f):f))return l}let o=this.state.plugins;if(o)for(let c=0;c<o.length;c++){let f=o[c].props[e];if(f!=null&&(l=t?t(f):f))return l}}hasFocus(){if(an){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&XM(this.dom),Er(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return tC(this,e)}coordsAtPos(e,t=1){return $x(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,s=-1){let l=this.docView.posFromDOM(e,t,s);if(l==null)throw new RangeError("DOM position not inside the editor");return l}endOfTextblock(e,t){return lC(this,t||this.state,e)}pasteHTML(e,t){return wo(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return wo(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return vp(this,e)}destroy(){this.docView&&(LC(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ah(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,HM())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return BC(this,e)}domSelectionRange(){let e=this.domSelection();return e?Pt&&this.root.nodeType===11&&$M(this.dom.ownerDocument)==this.dom&&aw(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}gv.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function Wb(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let s in t)s=="class"?e.class+=" "+t[s]:s=="style"?e.style=(e.style?e.style+";":"")+t[s]:!e[s]&&s!="contenteditable"&&s!="nodeName"&&(e[s]=String(t[s]))}),e.translate||(e.translate="no"),[Xt.node(0,n.state.doc.content.size,e)]}function e1(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Xt.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function t1(n){return!n.someProp("editable",e=>e(n.state)===!1)}function bw(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function n1(n){let e=Object.create(null);function t(s){for(let l in s)Object.prototype.hasOwnProperty.call(e,l)||(e[l]=s[l])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function xw(n,e){let t=0,s=0;for(let l in n){if(n[l]!=e[l])return!0;t++}for(let l in e)s++;return t!=s}function r1(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var gs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Oc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},vw=typeof navigator<"u"&&/Mac/.test(navigator.platform),Sw=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Vt=0;Vt<10;Vt++)gs[48+Vt]=gs[96+Vt]=String(Vt);for(var Vt=1;Vt<=24;Vt++)gs[Vt+111]="F"+Vt;for(var Vt=65;Vt<=90;Vt++)gs[Vt]=String.fromCharCode(Vt+32),Oc[Vt]=String.fromCharCode(Vt);for(var uh in gs)Oc.hasOwnProperty(uh)||(Oc[uh]=gs[uh]);function kw(n){var e=vw&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||Sw&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Oc:gs)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const Tw=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Ew=typeof navigator<"u"&&/Win/.test(navigator.platform);function Mw(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let s,l,o,c;for(let f=0;f<e.length-1;f++){let d=e[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))Tw?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(t="Alt-"+t),l&&(t="Ctrl-"+t),c&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function Cw(n){let e=Object.create(null);for(let t in n)e[Mw(t)]=n[t];return e}function fh(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function ww(n){return new dt({props:{handleKeyDown:yv(n)}})}function yv(n){let e=Cw(n);return function(t,s){let l=kw(s),o,c=e[fh(l,s)];if(c&&c(t.state,t.dispatch,t))return!0;if(l.length==1&&l!=" "){if(s.shiftKey){let f=e[fh(l,s,!1)];if(f&&f(t.state,t.dispatch,t))return!0}if((s.altKey||s.metaKey||s.ctrlKey)&&!(Ew&&s.ctrlKey&&s.altKey)&&(o=gs[s.keyCode])&&o!=l){let f=e[fh(o,s)];if(f&&f(t.state,t.dispatch,t))return!0}}return!1}}var Nw=Object.defineProperty,Cp=(n,e)=>{for(var t in e)Nw(n,t,{get:e[t],enumerable:!0})};function yu(n){const{state:e,transaction:t}=n;let{selection:s}=t,{doc:l}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return s},get doc(){return l},get tr(){return s=t.selection,l=t.doc,o=t.storedMarks,t}}}var bu=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:e,state:t}=this,{view:s}=e,{tr:l}=t,o=this.buildProps(l);return Object.fromEntries(Object.entries(n).map(([c,f])=>[c,(...h)=>{const m=f(...h)(o);return!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,e=!0){const{rawCommands:t,editor:s,state:l}=this,{view:o}=s,c=[],f=!!n,d=n||l.tr,h=()=>(!f&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(d),c.every(y=>y===!0)),m={...Object.fromEntries(Object.entries(t).map(([y,x])=>[y,(...k)=>{const E=this.buildProps(d,e),M=x(...k)(E);return c.push(M),m}])),run:h};return m}createCan(n){const{rawCommands:e,state:t}=this,s=!1,l=n||t.tr,o=this.buildProps(l,s);return{...Object.fromEntries(Object.entries(e).map(([f,d])=>[f,(...h)=>d(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(l,s)}}buildProps(n,e=!0){const{rawCommands:t,editor:s,state:l}=this,{view:o}=s,c={tr:n,editor:s,view:o,state:yu({state:l,transaction:n}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(n,e),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,(...h)=>d(...h)(c)]))}};return c}},bv={};Cp(bv,{blur:()=>Aw,clearContent:()=>Ow,clearNodes:()=>Dw,command:()=>jw,createParagraphNear:()=>Rw,cut:()=>zw,deleteCurrentNode:()=>Lw,deleteNode:()=>_w,deleteRange:()=>Bw,deleteSelection:()=>Hw,enter:()=>Uw,exitCode:()=>Iw,extendMarkRange:()=>Vw,first:()=>qw,focus:()=>Gw,forEach:()=>Yw,insertContent:()=>Kw,insertContentAt:()=>Jw,joinBackward:()=>Zw,joinDown:()=>Qw,joinForward:()=>Ww,joinItemBackward:()=>e2,joinItemForward:()=>t2,joinTextblockBackward:()=>n2,joinTextblockForward:()=>r2,joinUp:()=>Xw,keyboardShortcut:()=>i2,lift:()=>l2,liftEmptyBlock:()=>o2,liftListItem:()=>a2,newlineInCode:()=>c2,resetAttributes:()=>u2,scrollIntoView:()=>f2,selectAll:()=>d2,selectNodeBackward:()=>h2,selectNodeForward:()=>p2,selectParentNode:()=>m2,selectTextblockEnd:()=>g2,selectTextblockStart:()=>y2,setContent:()=>b2,setMark:()=>H2,setMeta:()=>U2,setNode:()=>I2,setNodeSelection:()=>V2,setTextDirection:()=>q2,setTextSelection:()=>$2,sinkListItem:()=>G2,splitBlock:()=>Y2,splitListItem:()=>K2,toggleList:()=>P2,toggleMark:()=>F2,toggleNode:()=>J2,toggleWrap:()=>X2,undoInputRule:()=>Q2,unsetAllMarks:()=>Z2,unsetMark:()=>W2,unsetTextDirection:()=>eN,updateAttributes:()=>tN,wrapIn:()=>nN,wrapInList:()=>rN});var Aw=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window?.getSelection())==null||t.removeAllRanges())}),!0),Ow=(n=!0)=>({commands:e})=>e.setContent("",{emitUpdate:n}),Dw=()=>({state:n,tr:e,dispatch:t})=>{const{selection:s}=e,{ranges:l}=s;return t&&l.forEach(({$from:o,$to:c})=>{n.doc.nodesBetween(o.pos,c.pos,(f,d)=>{if(f.type.isText)return;const{doc:h,mapping:m}=e,y=h.resolve(m.map(d)),x=h.resolve(m.map(d+f.nodeSize)),v=y.blockRange(x);if(!v)return;const k=ol(v);if(f.type.isTextblock){const{defaultType:E}=y.parent.contentMatchAt(y.index());e.setNodeMarkup(v.start,E)}(k||k===0)&&e.lift(v,k)})}),!0},jw=n=>e=>n(e),Rw=()=>({state:n,dispatch:e})=>jx(n,e),zw=(n,e)=>({editor:t,tr:s})=>{const{state:l}=t,o=l.doc.slice(n.from,n.to);s.deleteRange(n.from,n.to);const c=s.mapping.map(e);return s.insert(c,o.content),s.setSelection(new ke(s.doc.resolve(Math.max(c-1,0)))),!0},Lw=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,s=t.$anchor.node();if(s.content.size>0)return!1;const l=n.selection.$anchor;for(let o=l.depth;o>0;o-=1)if(l.node(o).type===s.type){if(e){const f=l.before(o),d=l.after(o);n.delete(f,d).scrollIntoView()}return!0}return!1};function Mt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}var _w=n=>({tr:e,state:t,dispatch:s})=>{const l=Mt(n,t.schema),o=e.selection.$anchor;for(let c=o.depth;c>0;c-=1)if(o.node(c).type===l){if(s){const d=o.before(c),h=o.after(c);e.delete(d,h).scrollIntoView()}return!0}return!1},Bw=n=>({tr:e,dispatch:t})=>{const{from:s,to:l}=n;return t&&e.delete(s,l),!0},Hw=()=>({state:n,dispatch:e})=>dp(n,e),Uw=()=>({commands:n})=>n.keyboardShortcut("Enter"),Iw=()=>({state:n,dispatch:e})=>TM(n,e);function wp(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function Dc(n,e,t={strict:!0}){const s=Object.keys(e);return s.length?s.every(l=>t.strict?e[l]===n[l]:wp(e[l])?e[l].test(n[l]):e[l]===n[l]):!0}function xv(n,e,t={}){return n.find(s=>s.type===e&&Dc(Object.fromEntries(Object.keys(t).map(l=>[l,s.attrs[l]])),t))}function s1(n,e,t={}){return!!xv(n,e,t)}function Np(n,e,t){var s;if(!n||!e)return;let l=n.parent.childAfter(n.parentOffset);if((!l.node||!l.node.marks.some(m=>m.type===e))&&(l=n.parent.childBefore(n.parentOffset)),!l.node||!l.node.marks.some(m=>m.type===e)||(t=t||((s=l.node.marks[0])==null?void 0:s.attrs),!xv([...l.node.marks],e,t)))return;let c=l.index,f=n.start()+l.offset,d=c+1,h=f+l.node.nodeSize;for(;c>0&&s1([...n.parent.child(c-1).marks],e,t);)c-=1,f-=n.parent.child(c).nodeSize;for(;d<n.parent.childCount&&s1([...n.parent.child(d).marks],e,t);)h+=n.parent.child(d).nodeSize,d+=1;return{from:f,to:h}}function Mr(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}var Vw=(n,e={})=>({tr:t,state:s,dispatch:l})=>{const o=Mr(n,s.schema),{doc:c,selection:f}=t,{$from:d,from:h,to:m}=f;if(l){const y=Np(d,o,e);if(y&&y.from<=h&&y.to>=m){const x=ke.create(c,y.from,y.to);t.setSelection(x)}}return!0},qw=n=>e=>{const t=typeof n=="function"?n(e):n;for(let s=0;s<t.length;s+=1)if(t[s](e))return!0;return!1};function vv(n){return n instanceof ke}function Ys(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Sv(n,e=null){if(!e)return null;const t=Re.atStart(n),s=Re.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return s;const l=t.from,o=s.to;return e==="all"?ke.create(n,Ys(0,l,o),Ys(n.content.size,l,o)):ke.create(n,Ys(e,l,o),Ys(e,l,o))}function i1(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function jc(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function $w(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Gw=(n=null,e={})=>({editor:t,view:s,tr:l,dispatch:o})=>{e={scrollIntoView:!0,...e};const c=()=>{(jc()||i1())&&s.dom.focus(),$w()&&!jc()&&!i1()&&s.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{t.isDestroyed||(s.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};try{if(s.hasFocus()&&n===null||n===!1)return!0}catch{return!1}if(o&&n===null&&!vv(t.state.selection))return c(),!0;const f=Sv(l.doc,n)||t.state.selection,d=t.state.selection.eq(f);return o&&(d||l.setSelection(f),d&&l.storedMarks&&l.setStoredMarks(l.storedMarks),c()),!0},Yw=(n,e)=>t=>n.every((s,l)=>e(s,{...t,index:l})),Kw=(n,e)=>({tr:t,commands:s})=>s.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),kv=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const s=e[t];s.nodeType===3&&s.nodeValue&&/^(\n\s\s|\n)$/.test(s.nodeValue)?n.removeChild(s):s.nodeType===1&&kv(s)}return n};function sc(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return kv(t)}function Ao(n,e,t){if(n instanceof fs||n instanceof Q)return n;t={slice:!0,parseOptions:{},...t};const s=typeof n=="object"&&n!==null,l=typeof n=="string";if(s)try{if(Array.isArray(n)&&n.length>0)return Q.fromArray(n.map(f=>e.nodeFromJSON(f)));const c=e.nodeFromJSON(n);return t.errorOnInvalidContent&&c.check(),c}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),Ao("",e,t)}if(l){if(t.errorOnInvalidContent){let c=!1,f="";const d=new ix({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(c=!0,f=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?ds.fromSchema(d).parseSlice(sc(n),t.parseOptions):ds.fromSchema(d).parse(sc(n),t.parseOptions),t.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${f}`)})}const o=ds.fromSchema(e);return t.slice?o.parseSlice(sc(n),t.parseOptions).content:o.parse(sc(n),t.parseOptions)}return Ao("",e,t)}function Pw(n,e,t){const s=n.steps.length-1;if(s<e)return;const l=n.steps[s];if(!(l instanceof Dt||l instanceof jt))return;const o=n.mapping.maps[s];let c=0;o.forEach((f,d,h,m)=>{c===0&&(c=m)}),n.setSelection(Re.near(n.doc.resolve(c),t))}var Fw=n=>!("type"in n),Jw=(n,e,t)=>({tr:s,dispatch:l,editor:o})=>{var c;if(l){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let f;const d=M=>{o.emit("contentError",{editor:o,error:M,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Ao(e,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(M){d(M)}try{f=Ao(e,o.schema,{parseOptions:h,errorOnInvalidContent:(c=t.errorOnInvalidContent)!=null?c:o.options.enableContentCheck})}catch(M){return d(M),!1}let{from:m,to:y}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},x=!0,v=!0;if((Fw(f)?f:[f]).forEach(M=>{M.check(),x=x?M.isText&&M.marks.length===0:!1,v=v?M.isBlock:!1}),m===y&&v){const{parent:M}=s.doc.resolve(m);M.isTextblock&&!M.type.spec.code&&!M.childCount&&(m-=1,y+=1)}let E;if(x){if(Array.isArray(e))E=e.map(M=>M.text||"").join("");else if(e instanceof Q){let M="";e.forEach(C=>{C.text&&(M+=C.text)}),E=M}else typeof e=="object"&&e&&e.text?E=e.text:E=e;s.insertText(E,m,y)}else{E=f;const M=s.doc.resolve(m),C=M.node(),z=M.parentOffset===0,q=C.isText||C.isTextblock,W=C.content.size>0;z&&q&&W&&(m=Math.max(0,m-1)),s.replaceWith(m,y,E)}t.updateSelection&&Pw(s,s.steps.length-1,-1),t.applyInputRules&&s.setMeta("applyInputRules",{from:m,text:E}),t.applyPasteRules&&s.setMeta("applyPasteRules",{from:m,text:E})}return!0},Xw=()=>({state:n,dispatch:e})=>vM(n,e),Qw=()=>({state:n,dispatch:e})=>SM(n,e),Zw=()=>({state:n,dispatch:e})=>Mx(n,e),Ww=()=>({state:n,dispatch:e})=>Ax(n,e),e2=()=>({state:n,dispatch:e,tr:t})=>{try{const s=fu(n.doc,n.selection.$from.pos,-1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},t2=()=>({state:n,dispatch:e,tr:t})=>{try{const s=fu(n.doc,n.selection.$from.pos,1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},n2=()=>({state:n,dispatch:e})=>bM(n,e),r2=()=>({state:n,dispatch:e})=>xM(n,e);function Tv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function s2(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let s,l,o,c;for(let f=0;f<e.length-1;f+=1){const d=e[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))jc()||Tv()?c=!0:l=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return s&&(t=`Alt-${t}`),l&&(t=`Ctrl-${t}`),c&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}var i2=n=>({editor:e,view:t,tr:s,dispatch:l})=>{const o=s2(n).split(/-(?!$)/),c=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),f=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,f))});return d?.steps.forEach(h=>{const m=h.map(s.mapping);m&&l&&s.maybeStep(m)}),!0};function ys(n,e,t={}){const{from:s,to:l,empty:o}=n.selection,c=e?Mt(e,n.schema):null,f=[];n.doc.nodesBetween(s,l,(y,x)=>{if(y.isText)return;const v=Math.max(s,x),k=Math.min(l,x+y.nodeSize);f.push({node:y,from:v,to:k})});const d=l-s,h=f.filter(y=>c?c.name===y.node.type.name:!0).filter(y=>Dc(y.node.attrs,t,{strict:!1}));return o?!!h.length:h.reduce((y,x)=>y+x.to-x.from,0)>=d}var l2=(n,e={})=>({state:t,dispatch:s})=>{const l=Mt(n,t.schema);return ys(t,l,e)?kM(t,s):!1},o2=()=>({state:n,dispatch:e})=>Rx(n,e),a2=n=>({state:e,dispatch:t})=>{const s=Mt(n,e.schema);return zM(s)(e,t)},c2=()=>({state:n,dispatch:e})=>Dx(n,e);function xu(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function l1(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((s,l)=>(t.includes(l)||(s[l]=n[l]),s),{})}var u2=(n,e)=>({tr:t,state:s,dispatch:l})=>{let o=null,c=null;const f=xu(typeof n=="string"?n:n.name,s.schema);if(!f)return!1;f==="node"&&(o=Mt(n,s.schema)),f==="mark"&&(c=Mr(n,s.schema));let d=!1;return t.selection.ranges.forEach(h=>{s.doc.nodesBetween(h.$from.pos,h.$to.pos,(m,y)=>{o&&o===m.type&&(d=!0,l&&t.setNodeMarkup(y,void 0,l1(m.attrs,e))),c&&m.marks.length&&m.marks.forEach(x=>{c===x.type&&(d=!0,l&&t.addMark(y,y+m.nodeSize,c.create(l1(x.attrs,e))))})})}),d},f2=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),d2=()=>({tr:n,dispatch:e})=>{if(e){const t=new xn(n.doc);n.setSelection(t)}return!0},h2=()=>({state:n,dispatch:e})=>wx(n,e),p2=()=>({state:n,dispatch:e})=>Ox(n,e),m2=()=>({state:n,dispatch:e})=>CM(n,e),g2=()=>({state:n,dispatch:e})=>AM(n,e),y2=()=>({state:n,dispatch:e})=>NM(n,e);function Gh(n,e,t={},s={}){return Ao(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:s.errorOnInvalidContent})}var b2=(n,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:s={}}={})=>({editor:l,tr:o,dispatch:c,commands:f})=>{const{doc:d}=o;if(s.preserveWhitespace!=="full"){const h=Gh(n,l.schema,s,{errorOnInvalidContent:e??l.options.enableContentCheck});return c&&o.replaceWith(0,d.content.size,h).setMeta("preventUpdate",!t),!0}return c&&o.setMeta("preventUpdate",!t),f.insertContentAt({from:0,to:d.content.size},n,{parseOptions:s,errorOnInvalidContent:e??l.options.enableContentCheck})};function Ev(n,e){const t=Mr(e,n.schema),{from:s,to:l,empty:o}=n.selection,c=[];o?(n.storedMarks&&c.push(...n.storedMarks),c.push(...n.selection.$head.marks())):n.doc.nodesBetween(s,l,d=>{c.push(...d.marks)});const f=c.find(d=>d.type.name===t.name);return f?{...f.attrs}:{}}function Mv(n,e){const t=new Sx(n);return e.forEach(s=>{s.steps.forEach(l=>{t.step(l)})}),t}function x2(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function v2(n,e,t){const s=[];return n.nodesBetween(e.from,e.to,(l,o)=>{t(l)&&s.push({node:l,pos:o})}),s}function S2(n,e){for(let t=n.depth;t>0;t-=1){const s=n.node(t);if(e(s))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:s}}}function vu(n){return e=>S2(e.$from,n)}function me(n,e,t){return n.config[e]===void 0&&n.parent?me(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?me(n.parent,e,t):null}):n.config[e]}function Ap(n){return n.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},s=me(e,"addExtensions",t);return s?[e,...Ap(s())]:e}).flat(10)}function Op(n,e){const t=ri.fromSchema(e).serializeFragment(n),l=document.implementation.createHTMLDocument().createElement("div");return l.appendChild(t),l.innerHTML}function Cv(n){return typeof n=="function"}function Xe(n,e=void 0,...t){return Cv(n)?e?n.bind(e)(...t):n(...t):n}function k2(n={}){return Object.keys(n).length===0&&n.constructor===Object}function sl(n){const e=n.filter(l=>l.type==="extension"),t=n.filter(l=>l.type==="node"),s=n.filter(l=>l.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:s}}function wv(n){const e=[],{nodeExtensions:t,markExtensions:s}=sl(n),l=[...t,...s],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(c=>{const f={name:c.name,options:c.options,storage:c.storage,extensions:l},d=me(c,"addGlobalAttributes",f);if(!d)return;d().forEach(m=>{m.types.forEach(y=>{Object.entries(m.attributes).forEach(([x,v])=>{e.push({type:y,name:x,attribute:{...o,...v}})})})})}),l.forEach(c=>{const f={name:c.name,options:c.options,storage:c.storage},d=me(c,"addAttributes",f);if(!d)return;const h=d();Object.entries(h).forEach(([m,y])=>{const x={...o,...y};typeof x?.default=="function"&&(x.default=x.default()),x?.isRequired&&x?.default===void 0&&delete x.default,e.push({type:c.name,name:m,attribute:x})})}),e}function Ct(...n){return n.filter(e=>!!e).reduce((e,t)=>{const s={...e};return Object.entries(t).forEach(([l,o])=>{if(!s[l]){s[l]=o;return}if(l==="class"){const f=o?String(o).split(" "):[],d=s[l]?s[l].split(" "):[],h=f.filter(m=>!d.includes(m));s[l]=[...d,...h].join(" ")}else if(l==="style"){const f=o?o.split(";").map(m=>m.trim()).filter(Boolean):[],d=s[l]?s[l].split(";").map(m=>m.trim()).filter(Boolean):[],h=new Map;d.forEach(m=>{const[y,x]=m.split(":").map(v=>v.trim());h.set(y,x)}),f.forEach(m=>{const[y,x]=m.split(":").map(v=>v.trim());h.set(y,x)}),s[l]=Array.from(h.entries()).map(([m,y])=>`${m}: ${y}`).join("; ")}else s[l]=o}),s},{})}function Oo(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,s)=>Ct(t,s),{})}function T2(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function o1(n,e){return"style"in n?n:{...n,getAttrs:t=>{const s=n.getAttrs?n.getAttrs(t):n.attrs;if(s===!1)return!1;const l=e.reduce((o,c)=>{const f=c.attribute.parseHTML?c.attribute.parseHTML(t):T2(t.getAttribute(c.name));return f==null?o:{...o,[c.name]:f}},{});return{...s,...l}}}}function a1(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&k2(t)?!1:t!=null))}function c1(n){var e,t;const s={};return!((e=n?.attribute)!=null&&e.isRequired)&&"default"in(n?.attribute||{})&&(s.default=n.attribute.default),((t=n?.attribute)==null?void 0:t.validate)!==void 0&&(s.validate=n.attribute.validate),[n.name,s]}function E2(n,e){var t;const s=wv(n),{nodeExtensions:l,markExtensions:o}=sl(n),c=(t=l.find(h=>me(h,"topNode")))==null?void 0:t.name,f=Object.fromEntries(l.map(h=>{const m=s.filter(C=>C.type===h.name),y={name:h.name,options:h.options,storage:h.storage,editor:e},x=n.reduce((C,z)=>{const q=me(z,"extendNodeSchema",y);return{...C,...q?q(h):{}}},{}),v=a1({...x,content:Xe(me(h,"content",y)),marks:Xe(me(h,"marks",y)),group:Xe(me(h,"group",y)),inline:Xe(me(h,"inline",y)),atom:Xe(me(h,"atom",y)),selectable:Xe(me(h,"selectable",y)),draggable:Xe(me(h,"draggable",y)),code:Xe(me(h,"code",y)),whitespace:Xe(me(h,"whitespace",y)),linebreakReplacement:Xe(me(h,"linebreakReplacement",y)),defining:Xe(me(h,"defining",y)),isolating:Xe(me(h,"isolating",y)),attrs:Object.fromEntries(m.map(c1))}),k=Xe(me(h,"parseHTML",y));k&&(v.parseDOM=k.map(C=>o1(C,m)));const E=me(h,"renderHTML",y);E&&(v.toDOM=C=>E({node:C,HTMLAttributes:Oo(C,m)}));const M=me(h,"renderText",y);return M&&(v.toText=M),[h.name,v]})),d=Object.fromEntries(o.map(h=>{const m=s.filter(M=>M.type===h.name),y={name:h.name,options:h.options,storage:h.storage,editor:e},x=n.reduce((M,C)=>{const z=me(C,"extendMarkSchema",y);return{...M,...z?z(h):{}}},{}),v=a1({...x,inclusive:Xe(me(h,"inclusive",y)),excludes:Xe(me(h,"excludes",y)),group:Xe(me(h,"group",y)),spanning:Xe(me(h,"spanning",y)),code:Xe(me(h,"code",y)),attrs:Object.fromEntries(m.map(c1))}),k=Xe(me(h,"parseHTML",y));k&&(v.parseDOM=k.map(M=>o1(M,m)));const E=me(h,"renderHTML",y);return E&&(v.toDOM=M=>E({mark:M,HTMLAttributes:Oo(M,m)})),[h.name,v]}));return new ix({topNode:c,nodes:f,marks:d})}function M2(n){const e=n.filter((t,s)=>n.indexOf(t)!==s);return Array.from(new Set(e))}function Rc(n){return n.sort((t,s)=>{const l=me(t,"priority")||100,o=me(s,"priority")||100;return l>o?-1:l<o?1:0})}function Nv(n){const e=Rc(Ap(n)),t=M2(e.map(s=>s.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),e}function Av(n,e,t){const{from:s,to:l}=e,{blockSeparator:o=`

`,textSerializers:c={}}=t||{};let f="";return n.nodesBetween(s,l,(d,h,m,y)=>{var x;d.isBlock&&h>s&&(f+=o);const v=c?.[d.type.name];if(v)return m&&(f+=v({node:d,pos:h,parent:m,index:y,range:e})),!1;d.isText&&(f+=(x=d?.text)==null?void 0:x.slice(Math.max(s,h)-h,l-h))}),f}function C2(n,e){const t={from:0,to:n.content.size};return Av(n,t,e)}function Ov(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function w2(n,e){const t=Mt(e,n.schema),{from:s,to:l}=n.selection,o=[];n.doc.nodesBetween(s,l,f=>{o.push(f)});const c=o.reverse().find(f=>f.type.name===t.name);return c?{...c.attrs}:{}}function Dv(n,e){const t=xu(typeof e=="string"?e:e.name,n.schema);return t==="node"?w2(n,e):t==="mark"?Ev(n,e):{}}function N2(n,e=JSON.stringify){const t={};return n.filter(s=>{const l=e(s);return Object.prototype.hasOwnProperty.call(t,l)?!1:t[l]=!0})}function A2(n){const e=N2(n);return e.length===1?e:e.filter((t,s)=>!e.filter((o,c)=>c!==s).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function jv(n){const{mapping:e,steps:t}=n,s=[];return e.maps.forEach((l,o)=>{const c=[];if(l.ranges.length)l.forEach((f,d)=>{c.push({from:f,to:d})});else{const{from:f,to:d}=t[o];if(f===void 0||d===void 0)return;c.push({from:f,to:d})}c.forEach(({from:f,to:d})=>{const h=e.slice(o).map(f,-1),m=e.slice(o).map(d),y=e.invert().map(h,-1),x=e.invert().map(m);s.push({oldRange:{from:y,to:x},newRange:{from:h,to:m}})})}),A2(s)}function Dp(n,e,t){const s=[];return n===e?t.resolve(n).marks().forEach(l=>{const o=t.resolve(n),c=Np(o,l.type);c&&s.push({mark:l,...c})}):t.nodesBetween(n,e,(l,o)=>{!l||l?.nodeSize===void 0||s.push(...l.marks.map(c=>({from:o,to:o+l.nodeSize,mark:c})))}),s}var O2=(n,e,t,s=20)=>{const l=n.doc.resolve(t);let o=s,c=null;for(;o>0&&c===null;){const f=l.node(o);f?.type.name===e?c=f:o-=1}return[c,o]};function ic(n,e){return e.nodes[n]||e.marks[n]||null}function gc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([s])=>{const l=n.find(o=>o.type===e&&o.name===s);return l?l.attribute.keepOnSplit:!1}))}var D2=(n,e=500)=>{let t="";const s=n.parentOffset;return n.parent.nodesBetween(Math.max(0,s-e),s,(l,o,c,f)=>{var d,h;const m=((h=(d=l.type.spec).toText)==null?void 0:h.call(d,{node:l,pos:o,parent:c,index:f}))||l.textContent||"%leaf%";t+=l.isAtom&&!l.isText?m:m.slice(0,Math.max(0,s-o))}),t};function Yh(n,e,t={}){const{empty:s,ranges:l}=n.selection,o=e?Mr(e,n.schema):null;if(s)return!!(n.storedMarks||n.selection.$from.marks()).filter(y=>o?o.name===y.type.name:!0).find(y=>Dc(y.attrs,t,{strict:!1}));let c=0;const f=[];if(l.forEach(({$from:y,$to:x})=>{const v=y.pos,k=x.pos;n.doc.nodesBetween(v,k,(E,M)=>{if(!E.isText&&!E.marks.length)return;const C=Math.max(v,M),z=Math.min(k,M+E.nodeSize),q=z-C;c+=q,f.push(...E.marks.map(W=>({mark:W,from:C,to:z})))})}),c===0)return!1;const d=f.filter(y=>o?o.name===y.mark.type.name:!0).filter(y=>Dc(y.mark.attrs,t,{strict:!1})).reduce((y,x)=>y+x.to-x.from,0),h=f.filter(y=>o?y.mark.type!==o&&y.mark.type.excludes(o):!0).reduce((y,x)=>y+x.to-x.from,0);return(d>0?d+h:d)>=c}function j2(n,e,t={}){if(!e)return ys(n,null,t)||Yh(n,null,t);const s=xu(e,n.schema);return s==="node"?ys(n,e,t):s==="mark"?Yh(n,e,t):!1}var R2=(n,e)=>{const{$from:t,$to:s,$anchor:l}=n.selection;if(e){const o=vu(f=>f.type.name===e)(n.selection);if(!o)return!1;const c=n.doc.resolve(o.pos+1);return l.pos+1===c.end()}return!(s.parentOffset<s.parent.nodeSize-2||t.pos!==s.pos)},z2=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function u1(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function f1(n,e){const{nodeExtensions:t}=sl(e),s=t.find(c=>c.name===n);if(!s)return!1;const l={name:s.name,options:s.options,storage:s.storage},o=Xe(me(s,"group",l));return typeof o!="string"?!1:o.split(" ").includes("list")}function Su(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var s;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((s=n.text)!=null?s:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let l=!0;return n.content.forEach(o=>{l!==!1&&(Su(o,{ignoreWhitespace:t,checkChildren:e})||(l=!1))}),l}return!1}function Rv(n){return n instanceof xe}var zv=class Lv{constructor(e){this.position=e}static fromJSON(e){return new Lv(e.position)}toJSON(){return{position:this.position}}};function L2(n,e){const t=e.mapping.mapResult(n.position);return{position:new zv(t.pos),mapResult:t}}function _2(n){return new zv(n)}function B2(n,e,t){var s;const{selection:l}=e;let o=null;if(vv(l)&&(o=l.$cursor),o){const f=(s=n.storedMarks)!=null?s:o.marks();return o.parent.type.allowsMarkType(t)&&(!!t.isInSet(f)||!f.some(h=>h.type.excludes(t)))}const{ranges:c}=l;return c.some(({$from:f,$to:d})=>{let h=f.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(f.pos,d.pos,(m,y,x)=>{if(h)return!1;if(m.isInline){const v=!x||x.type.allowsMarkType(t),k=!!t.isInSet(m.marks)||!m.marks.some(E=>E.type.excludes(t));h=v&&k}return!h}),h})}var H2=(n,e={})=>({tr:t,state:s,dispatch:l})=>{const{selection:o}=t,{empty:c,ranges:f}=o,d=Mr(n,s.schema);if(l)if(c){const h=Ev(s,d);t.addStoredMark(d.create({...h,...e}))}else f.forEach(h=>{const m=h.$from.pos,y=h.$to.pos;s.doc.nodesBetween(m,y,(x,v)=>{const k=Math.max(v,m),E=Math.min(v+x.nodeSize,y);x.marks.find(C=>C.type===d)?x.marks.forEach(C=>{d===C.type&&t.addMark(k,E,d.create({...C.attrs,...e}))}):t.addMark(k,E,d.create(e))})});return B2(s,t,d)},U2=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),I2=(n,e={})=>({state:t,dispatch:s,chain:l})=>{const o=Mt(n,t.schema);let c;return t.selection.$anchor.sameParent(t.selection.$head)&&(c=t.selection.$anchor.parent.attrs),o.isTextblock?l().command(({commands:f})=>Eb(o,{...c,...e})(t)?!0:f.clearNodes()).command(({state:f})=>Eb(o,{...c,...e})(f,s)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},V2=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,l=Ys(n,0,s.content.size),o=xe.create(s,l);e.setSelection(o)}return!0},q2=(n,e)=>({tr:t,state:s,dispatch:l})=>{const{selection:o}=s;let c,f;return typeof e=="number"?(c=e,f=e):e&&"from"in e&&"to"in e?(c=e.from,f=e.to):(c=o.from,f=o.to),l&&t.doc.nodesBetween(c,f,(d,h)=>{d.isText||t.setNodeMarkup(h,void 0,{...d.attrs,dir:n})}),!0},$2=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,{from:l,to:o}=typeof n=="number"?{from:n,to:n}:n,c=ke.atStart(s).from,f=ke.atEnd(s).to,d=Ys(l,c,f),h=Ys(o,c,f),m=ke.create(s,d,h);e.setSelection(m)}return!0},G2=n=>({state:e,dispatch:t})=>{const s=Mt(n,e.schema);return BM(s)(e,t)};function d1(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const s=t.filter(l=>e?.includes(l.type.name));n.tr.ensureMarks(s)}}var Y2=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:s,editor:l})=>{const{selection:o,doc:c}=e,{$from:f,$to:d}=o,h=l.extensionManager.attributes,m=gc(h,f.node().type.name,f.node().attrs);if(o instanceof xe&&o.node.isBlock)return!f.parentOffset||!Tr(c,f.pos)?!1:(s&&(n&&d1(t,l.extensionManager.splittableMarks),e.split(f.pos).scrollIntoView()),!0);if(!f.parent.isBlock)return!1;const y=d.parentOffset===d.parent.content.size,x=f.depth===0?void 0:x2(f.node(-1).contentMatchAt(f.indexAfter(-1)));let v=y&&x?[{type:x,attrs:m}]:void 0,k=Tr(e.doc,e.mapping.map(f.pos),1,v);if(!v&&!k&&Tr(e.doc,e.mapping.map(f.pos),1,x?[{type:x}]:void 0)&&(k=!0,v=x?[{type:x,attrs:m}]:void 0),s){if(k&&(o instanceof ke&&e.deleteSelection(),e.split(e.mapping.map(f.pos),1,v),x&&!y&&!f.parentOffset&&f.parent.type!==x)){const E=e.mapping.map(f.before()),M=e.doc.resolve(E);f.node(-1).canReplaceWith(M.index(),M.index()+1,x)&&e.setNodeMarkup(e.mapping.map(f.before()),x)}n&&d1(t,l.extensionManager.splittableMarks),e.scrollIntoView()}return k},K2=(n,e={})=>({tr:t,state:s,dispatch:l,editor:o})=>{var c;const f=Mt(n,s.schema),{$from:d,$to:h}=s.selection,m=s.selection.node;if(m&&m.isBlock||d.depth<2||!d.sameParent(h))return!1;const y=d.node(-1);if(y.type!==f)return!1;const x=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==f||d.index(-2)!==d.node(-2).childCount-1)return!1;if(l){let C=Q.empty;const z=d.index(-1)?1:d.index(-2)?2:3;for(let ie=d.depth-z;ie>=d.depth-3;ie-=1)C=Q.from(d.node(ie).copy(C));const q=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,W={...gc(x,d.node().type.name,d.node().attrs),...e},G=((c=f.contentMatch.defaultType)==null?void 0:c.createAndFill(W))||void 0;C=C.append(Q.from(f.createAndFill(null,G)||void 0));const P=d.before(d.depth-(z-1));t.replace(P,d.after(-q),new oe(C,4-z,0));let I=-1;t.doc.nodesBetween(P,t.doc.content.size,(ie,ce)=>{if(I>-1)return!1;ie.isTextblock&&ie.content.size===0&&(I=ce+1)}),I>-1&&t.setSelection(ke.near(t.doc.resolve(I))),t.scrollIntoView()}return!0}const v=h.pos===d.end()?y.contentMatchAt(0).defaultType:null,k={...gc(x,y.type.name,y.attrs),...e},E={...gc(x,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,h.pos);const M=v?[{type:f,attrs:k},{type:v,attrs:E}]:[{type:f,attrs:k}];if(!Tr(t.doc,d.pos,2))return!1;if(l){const{selection:C,storedMarks:z}=s,{splittableMarks:q}=o.extensionManager,W=z||C.$to.parentOffset&&C.$from.marks();if(t.split(d.pos,2,M).scrollIntoView(),!W||!l)return!0;const G=W.filter(P=>q.includes(P.type.name));t.ensureMarks(G)}return!0},dh=(n,e)=>{const t=vu(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(s===void 0)return!0;const l=n.doc.nodeAt(s);return t.node.type===l?.type&&bs(n.doc,t.pos)&&n.join(t.pos),!0},hh=(n,e)=>{const t=vu(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(t.start).after(t.depth);if(s===void 0)return!0;const l=n.doc.nodeAt(s);return t.node.type===l?.type&&bs(n.doc,s)&&n.join(s),!0},P2=(n,e,t,s={})=>({editor:l,tr:o,state:c,dispatch:f,chain:d,commands:h,can:m})=>{const{extensions:y,splittableMarks:x}=l.extensionManager,v=Mt(n,c.schema),k=Mt(e,c.schema),{selection:E,storedMarks:M}=c,{$from:C,$to:z}=E,q=C.blockRange(z),W=M||E.$to.parentOffset&&E.$from.marks();if(!q)return!1;const G=vu(P=>f1(P.type.name,y))(E);if(q.depth>=1&&G&&q.depth-G.depth<=1){if(G.node.type===v)return h.liftListItem(k);if(f1(G.node.type.name,y)&&v.validContent(G.node.content)&&f)return d().command(()=>(o.setNodeMarkup(G.pos,v),!0)).command(()=>dh(o,v)).command(()=>hh(o,v)).run()}return!t||!W||!f?d().command(()=>m().wrapInList(v,s)?!0:h.clearNodes()).wrapInList(v,s).command(()=>dh(o,v)).command(()=>hh(o,v)).run():d().command(()=>{const P=m().wrapInList(v,s),I=W.filter(ie=>x.includes(ie.type.name));return o.ensureMarks(I),P?!0:h.clearNodes()}).wrapInList(v,s).command(()=>dh(o,v)).command(()=>hh(o,v)).run()},F2=(n,e={},t={})=>({state:s,commands:l})=>{const{extendEmptyMarkRange:o=!1}=t,c=Mr(n,s.schema);return Yh(s,c,e)?l.unsetMark(c,{extendEmptyMarkRange:o}):l.setMark(c,e)},J2=(n,e,t={})=>({state:s,commands:l})=>{const o=Mt(n,s.schema),c=Mt(e,s.schema),f=ys(s,o,t);let d;return s.selection.$anchor.sameParent(s.selection.$head)&&(d=s.selection.$anchor.parent.attrs),f?l.setNode(c,d):l.setNode(o,{...d,...t})},X2=(n,e={})=>({state:t,commands:s})=>{const l=Mt(n,t.schema);return ys(t,l,e)?s.lift(l):s.wrapIn(l,e)},Q2=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let s=0;s<t.length;s+=1){const l=t[s];let o;if(l.spec.isInputRules&&(o=l.getState(n))){if(e){const c=n.tr,f=o.transform;for(let d=f.steps.length-1;d>=0;d-=1)c.step(f.steps[d].invert(f.docs[d]));if(o.text){const d=c.doc.resolve(o.from).marks();c.replaceWith(o.from,o.to,n.schema.text(o.text,d))}else c.delete(o.from,o.to)}return!0}}return!1},Z2=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:s,ranges:l}=t;return s||e&&l.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},W2=(n,e={})=>({tr:t,state:s,dispatch:l})=>{var o;const{extendEmptyMarkRange:c=!1}=e,{selection:f}=t,d=Mr(n,s.schema),{$from:h,empty:m,ranges:y}=f;if(!l)return!0;if(m&&c){let{from:x,to:v}=f;const k=(o=h.marks().find(M=>M.type===d))==null?void 0:o.attrs,E=Np(h,d,k);E&&(x=E.from,v=E.to),t.removeMark(x,v,d)}else y.forEach(x=>{t.removeMark(x.$from.pos,x.$to.pos,d)});return t.removeStoredMark(d),!0},eN=n=>({tr:e,state:t,dispatch:s})=>{const{selection:l}=t;let o,c;return typeof n=="number"?(o=n,c=n):n&&"from"in n&&"to"in n?(o=n.from,c=n.to):(o=l.from,c=l.to),s&&e.doc.nodesBetween(o,c,(f,d)=>{if(f.isText)return;const h={...f.attrs};delete h.dir,e.setNodeMarkup(d,void 0,h)}),!0},tN=(n,e={})=>({tr:t,state:s,dispatch:l})=>{let o=null,c=null;const f=xu(typeof n=="string"?n:n.name,s.schema);if(!f)return!1;f==="node"&&(o=Mt(n,s.schema)),f==="mark"&&(c=Mr(n,s.schema));let d=!1;return t.selection.ranges.forEach(h=>{const m=h.$from.pos,y=h.$to.pos;let x,v,k,E;t.selection.empty?s.doc.nodesBetween(m,y,(M,C)=>{o&&o===M.type&&(d=!0,k=Math.max(C,m),E=Math.min(C+M.nodeSize,y),x=C,v=M)}):s.doc.nodesBetween(m,y,(M,C)=>{C<m&&o&&o===M.type&&(d=!0,k=Math.max(C,m),E=Math.min(C+M.nodeSize,y),x=C,v=M),C>=m&&C<=y&&(o&&o===M.type&&(d=!0,l&&t.setNodeMarkup(C,void 0,{...M.attrs,...e})),c&&M.marks.length&&M.marks.forEach(z=>{if(c===z.type&&(d=!0,l)){const q=Math.max(C,m),W=Math.min(C+M.nodeSize,y);t.addMark(q,W,c.create({...z.attrs,...e}))}}))}),v&&(x!==void 0&&l&&t.setNodeMarkup(x,void 0,{...v.attrs,...e}),c&&v.marks.length&&v.marks.forEach(M=>{c===M.type&&l&&t.addMark(k,E,c.create({...M.attrs,...e}))}))}),d},nN=(n,e={})=>({state:t,dispatch:s})=>{const l=Mt(n,t.schema);return OM(l,e)(t,s)},rN=(n,e={})=>({state:t,dispatch:s})=>{const l=Mt(n,t.schema);return DM(l,e)(t,s)},sN=class{constructor(){this.callbacks={}}on(n,e){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(e),this}emit(n,...e){const t=this.callbacks[n];return t&&t.forEach(s=>s.apply(this,e)),this}off(n,e){const t=this.callbacks[n];return t&&(e?this.callbacks[n]=t.filter(s=>s!==e):delete this.callbacks[n]),this}once(n,e){const t=(...s)=>{this.off(n,t),e.apply(this,s)};return this.on(n,t)}removeAllListeners(){this.callbacks={}}},ku=class{constructor(n){var e;this.find=n.find,this.handler=n.handler,this.undoable=(e=n.undoable)!=null?e:!0}},iN=(n,e)=>{if(wp(e))return e.exec(n);const t=e(n);if(!t)return null;const s=[t.text];return s.index=t.index,s.input=n,s.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),s.push(t.replaceWith)),s};function lc(n){var e;const{editor:t,from:s,to:l,text:o,rules:c,plugin:f}=n,{view:d}=t;if(d.composing)return!1;const h=d.state.doc.resolve(s);if(h.parent.type.spec.code||(e=h.nodeBefore||h.nodeAfter)!=null&&e.marks.find(x=>x.type.spec.code))return!1;let m=!1;const y=D2(h)+o;return c.forEach(x=>{if(m)return;const v=iN(y,x.find);if(!v)return;const k=d.state.tr,E=yu({state:d.state,transaction:k}),M={from:s-(v[0].length-o.length),to:l},{commands:C,chain:z,can:q}=new bu({editor:t,state:E});x.handler({state:E,range:M,match:v,commands:C,chain:z,can:q})===null||!k.steps.length||(x.undoable&&k.setMeta(f,{transform:k,from:s,to:l,text:o}),d.dispatch(k),m=!0)}),m}function lN(n){const{editor:e,rules:t}=n,s=new dt({state:{init(){return null},apply(l,o,c){const f=l.getMeta(s);if(f)return f;const d=l.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:m}=d;typeof m=="string"?m=m:m=Op(Q.from(m),c.schema);const{from:y}=d,x=y+m.length;lc({editor:e,from:y,to:x,text:m,rules:t,plugin:s})}),l.selectionSet||l.docChanged?null:o}},props:{handleTextInput(l,o,c,f){return lc({editor:e,from:o,to:c,text:f,rules:t,plugin:s})},handleDOMEvents:{compositionend:l=>(setTimeout(()=>{const{$cursor:o}=l.state.selection;o&&lc({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:s})}),!1)},handleKeyDown(l,o){if(o.key!=="Enter")return!1;const{$cursor:c}=l.state.selection;return c?lc({editor:e,from:c.pos,to:c.pos,text:`
`,rules:t,plugin:s}):!1}},isInputRules:!0});return s}function oN(n){return Object.prototype.toString.call(n).slice(8,-1)}function oc(n){return oN(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function _v(n,e){const t={...n};return oc(n)&&oc(e)&&Object.keys(e).forEach(s=>{oc(e[s])&&oc(n[s])?t[s]=_v(n[s],e[s]):t[s]=e[s]}),t}var jp=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...Xe(me(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Xe(me(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const e=this.extend({...this.config,addOptions:()=>_v(this.options,n)});return e.name=this.name,e.parent=this.parent,e}extend(n={}){const e=new this.constructor({...this.config,...n});return e.parent=this,this.child=e,e.name="name"in n?n.name:e.parent.name,e}},si=class Bv extends jp{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new Bv(t)}static handleExit({editor:e,mark:t}){const{tr:s}=e.state,l=e.state.selection.$from;if(l.pos===l.end()){const c=l.marks();if(!!!c.find(h=>h?.type.name===t.name))return!1;const d=c.find(h=>h?.type.name===t.name);return d&&s.removeStoredMark(d),s.insertText(" ",l.pos),e.view.dispatch(s),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function aN(n){return typeof n=="number"}var cN=class{constructor(n){this.find=n.find,this.handler=n.handler}},uN=(n,e,t)=>{if(wp(e))return[...n.matchAll(e)];const s=e(n,t);return s?s.map(l=>{const o=[l.text];return o.index=l.index,o.input=n,o.data=l.data,l.replaceWith&&(l.text.includes(l.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(l.replaceWith)),o}):[]};function fN(n){const{editor:e,state:t,from:s,to:l,rule:o,pasteEvent:c,dropEvent:f}=n,{commands:d,chain:h,can:m}=new bu({editor:e,state:t}),y=[];return t.doc.nodesBetween(s,l,(v,k)=>{var E,M,C,z,q;if((M=(E=v.type)==null?void 0:E.spec)!=null&&M.code||!(v.isText||v.isTextblock||v.isInline))return;const W=(q=(z=(C=v.content)==null?void 0:C.size)!=null?z:v.nodeSize)!=null?q:0,G=Math.max(s,k),P=Math.min(l,k+W);if(G>=P)return;const I=v.isText?v.text||"":v.textBetween(G-k,P-k,void 0,"");uN(I,o.find,c).forEach(ce=>{if(ce.index===void 0)return;const De=G+ce.index+1,rt=De+ce[0].length,_e={from:t.tr.mapping.map(De),to:t.tr.mapping.map(rt)},st=o.handler({state:t,range:_e,match:ce,commands:d,chain:h,can:m,pasteEvent:c,dropEvent:f});y.push(st)})}),y.every(v=>v!==null)}var ac=null,dN=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",n),t};function hN(n){const{editor:e,rules:t}=n;let s=null,l=!1,o=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,f;try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}const d=({state:m,from:y,to:x,rule:v,pasteEvt:k})=>{const E=m.tr,M=yu({state:m,transaction:E});if(!(!fN({editor:e,state:M,from:Math.max(y-1,0),to:x.b-1,rule:v,pasteEvent:k,dropEvent:f})||!E.steps.length)){try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,E}};return t.map(m=>new dt({view(y){const x=k=>{var E;s=(E=y.dom.parentElement)!=null&&E.contains(k.target)?y.dom.parentElement:null,s&&(ac=e)},v=()=>{ac&&(ac=null)};return window.addEventListener("dragstart",x),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",x),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(y,x)=>{if(o=s===y.dom.parentElement,f=x,!o){const v=ac;v?.isEditable&&setTimeout(()=>{const k=v.state.selection;k&&v.commands.deleteRange({from:k.from,to:k.to})},10)}return!1},paste:(y,x)=>{var v;const k=(v=x.clipboardData)==null?void 0:v.getData("text/html");return c=x,l=!!k?.includes("data-pm-slice"),!1}}},appendTransaction:(y,x,v)=>{const k=y[0],E=k.getMeta("uiEvent")==="paste"&&!l,M=k.getMeta("uiEvent")==="drop"&&!o,C=k.getMeta("applyPasteRules"),z=!!C;if(!E&&!M&&!z)return;if(z){let{text:G}=C;typeof G=="string"?G=G:G=Op(Q.from(G),v.schema);const{from:P}=C,I=P+G.length,ie=dN(G);return d({rule:m,state:v,from:P,to:{b:I},pasteEvt:ie})}const q=x.doc.content.findDiffStart(v.doc.content),W=x.doc.content.findDiffEnd(v.doc.content);if(!(!aN(q)||!W||q===W.b))return d({rule:m,state:v,from:q,to:W,pasteEvt:c})}}))}var Tu=class{constructor(n,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=n,this.extensions=Nv(n),this.schema=E2(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((n,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ic(e.name,this.schema)},s=me(e,"addCommands",t);return s?{...n,...s()}:n},{})}get plugins(){const{editor:n}=this;return Rc([...this.extensions].reverse()).flatMap(s=>{const l={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:n,type:ic(s.name,this.schema)},o=[],c=me(s,"addKeyboardShortcuts",l);let f={};if(s.type==="mark"&&me(s,"exitable",l)&&(f.ArrowRight=()=>si.handleExit({editor:n,mark:s})),c){const x=Object.fromEntries(Object.entries(c()).map(([v,k])=>[v,()=>k({editor:n})]));f={...f,...x}}const d=ww(f);o.push(d);const h=me(s,"addInputRules",l);if(u1(s,n.options.enableInputRules)&&h){const x=h();if(x&&x.length){const v=lN({editor:n,rules:x}),k=Array.isArray(v)?v:[v];o.push(...k)}}const m=me(s,"addPasteRules",l);if(u1(s,n.options.enablePasteRules)&&m){const x=m();if(x&&x.length){const v=hN({editor:n,rules:x});o.push(...v)}}const y=me(s,"addProseMirrorPlugins",l);if(y){const x=y();o.push(...x)}return o})}get attributes(){return wv(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:e}=sl(this.extensions);return Object.fromEntries(e.filter(t=>!!me(t,"addNodeView")).map(t=>{const s=this.attributes.filter(d=>d.type===t.name),l={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:Mt(t.name,this.schema)},o=me(t,"addNodeView",l);if(!o)return[];const c=o();if(!c)return[];const f=(d,h,m,y,x)=>{const v=Oo(d,s);return c({node:d,view:h,getPos:m,decorations:y,innerDecorations:x,editor:n,extension:t,HTMLAttributes:v})};return[t.name,f]}))}dispatchTransaction(n){const{editor:e}=this;return Rc([...this.extensions].reverse()).reduceRight((s,l)=>{const o={name:l.name,options:l.options,storage:this.editor.extensionStorage[l.name],editor:e,type:ic(l.name,this.schema)},c=me(l,"dispatchTransaction",o);return c?f=>{c.call(o,{transaction:f,next:s})}:s},n)}get markViews(){const{editor:n}=this,{markExtensions:e}=sl(this.extensions);return Object.fromEntries(e.filter(t=>!!me(t,"addMarkView")).map(t=>{const s=this.attributes.filter(f=>f.type===t.name),l={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:Mr(t.name,this.schema)},o=me(t,"addMarkView",l);if(!o)return[];const c=(f,d,h)=>{const m=Oo(f,s);return o()({mark:f,view:d,inline:h,editor:n,extension:t,HTMLAttributes:m,updateAttributes:y=>{wN(f,n,y)}})};return[t.name,c]}))}setupExtensions(){const n=this.extensions;this.editor.extensionStorage=Object.fromEntries(n.map(e=>[e.name,e.storage])),n.forEach(e=>{var t;const s={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ic(e.name,this.schema)};e.type==="mark"&&((t=Xe(me(e,"keepOnSplit",s)))==null||t)&&this.splittableMarks.push(e.name);const l=me(e,"onBeforeCreate",s),o=me(e,"onCreate",s),c=me(e,"onUpdate",s),f=me(e,"onSelectionUpdate",s),d=me(e,"onTransaction",s),h=me(e,"onFocus",s),m=me(e,"onBlur",s),y=me(e,"onDestroy",s);l&&this.editor.on("beforeCreate",l),o&&this.editor.on("create",o),c&&this.editor.on("update",c),f&&this.editor.on("selectionUpdate",f),d&&this.editor.on("transaction",d),h&&this.editor.on("focus",h),m&&this.editor.on("blur",m),y&&this.editor.on("destroy",y)})}};Tu.resolve=Nv;Tu.sort=Rc;Tu.flatten=Ap;var pN={};Cp(pN,{ClipboardTextSerializer:()=>Uv,Commands:()=>Iv,Delete:()=>Vv,Drop:()=>qv,Editable:()=>$v,FocusEvents:()=>Yv,Keymap:()=>Kv,Paste:()=>Pv,Tabindex:()=>Fv,TextDirection:()=>Jv,focusEventsPluginKey:()=>Gv});var xt=class Hv extends jp{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new Hv(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},Uv=xt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new dt({key:new Nt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:s,selection:l}=e,{ranges:o}=l,c=Math.min(...o.map(m=>m.$from.pos)),f=Math.max(...o.map(m=>m.$to.pos)),d=Ov(t);return Av(s,{from:c,to:f},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),Iv=xt.create({name:"commands",addCommands(){return{...bv}}}),Vv=xt.create({name:"delete",onUpdate({transaction:n,appendedTransactions:e}){var t,s,l;const o=()=>{var c,f,d,h;if((h=(d=(f=(c=this.editor.options.coreExtensionOptions)==null?void 0:c.delete)==null?void 0:f.filterTransaction)==null?void 0:d.call(f,n))!=null?h:n.getMeta("y-sync$"))return;const m=Mv(n.before,[n,...e]);jv(m).forEach(v=>{m.mapping.mapResult(v.oldRange.from).deletedAfter&&m.mapping.mapResult(v.oldRange.to).deletedBefore&&m.before.nodesBetween(v.oldRange.from,v.oldRange.to,(k,E)=>{const M=E+k.nodeSize-2,C=v.oldRange.from<=E&&M<=v.oldRange.to;this.editor.emit("delete",{type:"node",node:k,from:E,to:M,newFrom:m.mapping.map(E),newTo:m.mapping.map(M),deletedRange:v.oldRange,newRange:v.newRange,partial:!C,editor:this.editor,transaction:n,combinedTransform:m})})});const x=m.mapping;m.steps.forEach((v,k)=>{var E,M;if(v instanceof Vn){const C=x.slice(k).map(v.from,-1),z=x.slice(k).map(v.to),q=x.invert().map(C,-1),W=x.invert().map(z),G=(E=m.doc.nodeAt(C-1))==null?void 0:E.marks.some(I=>I.eq(v.mark)),P=(M=m.doc.nodeAt(z))==null?void 0:M.marks.some(I=>I.eq(v.mark));this.editor.emit("delete",{type:"mark",mark:v.mark,from:v.from,to:v.to,deletedRange:{from:q,to:W},newRange:{from:C,to:z},partial:!!(P||G),editor:this.editor,transaction:n,combinedTransform:m})}})};(l=(s=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:s.async)==null||l?setTimeout(o,0):o()}}),qv=xt.create({name:"drop",addProseMirrorPlugins(){return[new dt({key:new Nt("tiptapDrop"),props:{handleDrop:(n,e,t,s)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:s})}}})]}}),$v=xt.create({name:"editable",addProseMirrorPlugins(){return[new dt({key:new Nt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Gv=new Nt("focusEvents"),Yv=xt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new dt({key:Gv,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const s=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1},blur:(e,t)=>{n.isFocused=!1;const s=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1}}}})]}}),Kv=xt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:f})=>{const{selection:d,doc:h}=f,{empty:m,$anchor:y}=d,{pos:x,parent:v}=y,k=y.parent.isTextblock&&x>0?f.doc.resolve(x-1):y,E=k.parent.type.spec.isolating,M=y.pos-y.parentOffset,C=E&&k.parent.childCount===1?M===y.pos:Re.atStart(h).from===x;return!m||!v.type.isTextblock||v.textContent.length||!C||C&&y.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),s={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},l={...s},o={...s,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return jc()||Tv()?o:l},addProseMirrorPlugins(){return[new dt({key:new Nt("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(E=>E.getMeta("composition")))return;const s=n.some(E=>E.docChanged)&&!e.doc.eq(t.doc),l=n.some(E=>E.getMeta("preventClearDocument"));if(!s||l)return;const{empty:o,from:c,to:f}=e.selection,d=Re.atStart(e.doc).from,h=Re.atEnd(e.doc).to;if(o||!(c===d&&f===h)||!Su(t.doc))return;const x=t.tr,v=yu({state:t,transaction:x}),{commands:k}=new bu({editor:this.editor,state:v});if(k.clearNodes(),!!x.steps.length)return x}})]}}),Pv=xt.create({name:"paste",addProseMirrorPlugins(){return[new dt({key:new Nt("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),Fv=xt.create({name:"tabindex",addProseMirrorPlugins(){return[new dt({key:new Nt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Jv=xt.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:n}=sl(this.extensions);return[{types:n.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const t=e.getAttribute("dir");return t&&(t==="ltr"||t==="rtl"||t==="auto")?t:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new dt({key:new Nt("textDirection"),props:{attributes:()=>{const n=this.options.direction;return n?{dir:n}:{}}}})]}}),mN=class co{constructor(e,t,s=!1,l=null){this.currentNode=null,this.actualDepth=null,this.isBlock=s,this.resolvedPos=e,this.editor=t,this.currentNode=l}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,s=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,s=this.to-1}this.editor.commands.insertContentAt({from:t,to:s},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new co(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new co(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new co(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,s)=>{const l=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,c=t.isInline,f=this.pos+s+(o?0:1);if(f<0||f>this.resolvedPos.doc.nodeSize-2)return;const d=this.resolvedPos.doc.resolve(f);if(!l&&!c&&d.depth<=this.depth)return;const h=new co(d,this.editor,l,l||c?t:null);l&&(h.actualDepth=this.depth+1),e.push(h)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let s=null,l=this.parent;for(;l&&!s;){if(l.node.type.name===e)if(Object.keys(t).length>0){const o=l.node.attrs,c=Object.keys(t);for(let f=0;f<c.length;f+=1){const d=c[f];if(o[d]!==t[d])break}}else s=l;l=l.parent}return s}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},s=!1){let l=[];if(!this.children||this.children.length===0)return l;const o=Object.keys(t);return this.children.forEach(c=>{s&&l.length>0||(c.node.type.name===e&&o.every(d=>t[d]===c.node.attrs[d])&&l.push(c),!(s&&l.length>0)&&(l=l.concat(c.querySelectorAll(e,t,s))))}),l}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},gN=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function yN(n,e,t){const s=document.querySelector("style[data-tiptap-style]");if(s!==null)return s;const l=document.createElement("style");return e&&l.setAttribute("nonce",e),l.setAttribute("data-tiptap-style",""),l.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(l),l}var bN=class extends sN{constructor(n={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:s})=>{throw s},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:L2,createMappablePosition:_2},this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:s,slice:l,moved:o})=>this.options.onDrop(s,l,o)),this.on("paste",({event:s,slice:l})=>this.options.onPaste(s,l)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=Sv(e,this.options.autofocus);this.editorState=Xi.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n?.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=yN(gN,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,e=!0){this.setOptions({editable:n}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.dispatchTransaction(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in n)return Reflect.get(n,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,e){const t=Cv(e)?e(n,[...this.state.plugins]):[...this.state.plugins,n],s=this.state.reconfigure({plugins:t});return this.view.updateState(s),s}unregisterPlugin(n){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(n).forEach(l=>{const o=typeof l=="string"?`${l}$`:l.key;t=t.filter(c=>!c.key.startsWith(o))}),e.length===t.length)return;const s=this.state.reconfigure({plugins:t});return this.view.updateState(s),s}createExtensionManager(){var n,e;const s=[...this.options.enableCoreExtensions?[$v,Uv.configure({blockSeparator:(e=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Iv,Yv,Kv,Fv,qv,Pv,Vv,Jv.configure({direction:this.options.textDirection})].filter(l=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[l.name]!==!1:!0):[],...this.options.extensions].filter(l=>["extension","node","mark"].includes(l?.type));this.extensionManager=new Tu(s,this)}createCommandManager(){this.commandManager=new bu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=Gh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),n=Gh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){const{editorProps:e,enableExtensionDispatchTransaction:t}=this.options,s=e.dispatchTransaction||this.dispatchTransaction.bind(this),l=t?this.extensionManager.dispatchTransaction(s):s;this.editorView=new gv(n,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:l,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.prependClass(),this.injectCSS();const c=this.view.dom;c.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(h=>{var m;return(m=this.capturedTransaction)==null?void 0:m.step(h)});return}const{state:e,transactions:t}=this.state.applyTransaction(n),s=!this.state.selection.eq(e.selection),l=t.includes(n),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:e}),!l)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:t.slice(1)}),s&&this.emit("selectionUpdate",{editor:this,transaction:n});const c=t.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),f=c?.getMeta("focus"),d=c?.getMeta("blur");f&&this.emit("focus",{editor:this,event:f.event,transaction:c}),d&&this.emit("blur",{editor:this,event:d.event,transaction:c}),!(n.getMeta("preventUpdate")||!t.some(h=>h.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:t.slice(1)})}getAttributes(n){return Dv(this.state,n)}isActive(n,e){const t=typeof n=="string"?n:null,s=typeof n=="string"?e:n;return j2(this.state,t,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Op(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:e=`

`,textSerializers:t={}}=n||{};return C2(this.state.doc,{blockSeparator:e,textSerializers:{...Ov(this.schema),...t}})}get isEmpty(){return Su(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,e;return(e=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?e:!0}$node(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(n,e))||null}$nodes(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(n,e))||null}$pos(n){const e=this.state.doc.resolve(n);return new mN(e,this)}get $doc(){return this.$pos(0)}};function il(n){return new ku({find:n.find,handler:({state:e,range:t,match:s})=>{const l=Xe(n.getAttributes,void 0,s);if(l===!1||l===null)return null;const{tr:o}=e,c=s[s.length-1],f=s[0];if(c){const d=f.search(/\S/),h=t.from+f.indexOf(c),m=h+c.length;if(Dp(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(E=>E===n.type&&E!==v.mark.type)).filter(v=>v.to>h).length)return null;m<t.to&&o.delete(m,t.to),h>t.from&&o.delete(t.from+d,h);const x=t.from+d+c.length;o.addMark(t.from+d,x,n.type.create(l||{})),o.removeStoredMark(n.type)}},undoable:n.undoable})}function xN(n){return new ku({find:n.find,handler:({state:e,range:t,match:s})=>{const l=Xe(n.getAttributes,void 0,s)||{},{tr:o}=e,c=t.from;let f=t.to;const d=n.type.create(l);if(s[1]){const h=s[0].lastIndexOf(s[1]);let m=c+h;m>f?m=f:f=m+s[1].length;const y=s[0][s[0].length-1];o.insertText(y,c+s[0].length-1),o.replaceWith(m,f,d)}else if(s[0]){const h=n.type.isInline?c:c-1;o.insert(h,n.type.create(l)).delete(o.mapping.map(c),o.mapping.map(f))}o.scrollIntoView()},undoable:n.undoable})}function Kh(n){return new ku({find:n.find,handler:({state:e,range:t,match:s})=>{const l=e.doc.resolve(t.from),o=Xe(n.getAttributes,void 0,s)||{};if(!l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)},undoable:n.undoable})}function ll(n){return new ku({find:n.find,handler:({state:e,range:t,match:s,chain:l})=>{const o=Xe(n.getAttributes,void 0,s)||{},c=e.tr.delete(t.from,t.to),d=c.doc.resolve(t.from).blockRange(),h=d&&up(d,n.type,o);if(!h)return null;if(c.wrap(d,h),n.keepMarks&&n.editor){const{selection:y,storedMarks:x}=e,{splittableMarks:v}=n.editor.extensionManager,k=x||y.$to.parentOffset&&y.$from.marks();if(k){const E=k.filter(M=>v.includes(M.type.name));c.ensureMarks(E)}}if(n.keepAttributes){const y=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";l().updateAttributes(y,o).run()}const m=c.doc.resolve(t.from-1).nodeBefore;m&&m.type===n.type&&bs(c.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(s,m))&&c.join(t.from-1)},undoable:n.undoable})}function vN(n,e){const{selection:t}=n,{$from:s}=t;if(t instanceof xe){const o=s.index();return s.parent.canReplaceWith(o,o+1,e)}let l=s.depth;for(;l>=0;){const o=s.index(l);if(s.node(l).contentMatchAt(o).matchType(e))return!0;l-=1}return!1}var SN={};Cp(SN,{createAtomBlockMarkdownSpec:()=>kN,createBlockMarkdownSpec:()=>TN,createInlineMarkdownSpec:()=>CN,parseAttributes:()=>Rp,parseIndentedBlocks:()=>Ph,renderNestedMarkdownContent:()=>Lp,serializeAttributes:()=>zp});function Rp(n){if(!n?.trim())return{};const e={},t=[],s=n.replace(/["']([^"']*)["']/g,h=>(t.push(h),`__QUOTED_${t.length-1}__`)),l=s.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(l){const h=l.map(m=>m.trim().slice(1));e.class=h.join(" ")}const o=s.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const c=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(s.matchAll(c)).forEach(([,h,m])=>{var y;const x=parseInt(((y=m.match(/__QUOTED_(\d+)__/))==null?void 0:y[1])||"0",10),v=t[x];v&&(e[h]=v.slice(1,-1))});const d=s.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(m=>{m.match(/^[a-zA-Z][\w-]*$/)&&(e[m]=!0)}),e}function zp(n){if(!n||Object.keys(n).length===0)return"";const e=[];return n.class&&String(n.class).split(/\s+/).filter(Boolean).forEach(s=>e.push(`.${s}`)),n.id&&e.push(`#${n.id}`),Object.entries(n).forEach(([t,s])=>{t==="class"||t==="id"||(s===!0?e.push(t):s!==!1&&s!=null&&e.push(`${t}="${String(s)}"`))}),e.join(" ")}function kN(n){const{nodeName:e,name:t,parseAttributes:s=Rp,serializeAttributes:l=zp,defaultAttributes:o={},requiredAttributes:c=[],allowedAttributes:f}=n,d=t||e,h=m=>{if(!f)return m;const y={};return f.forEach(x=>{x in m&&(y[x]=m[x])}),y};return{parseMarkdown:(m,y)=>{const x={...o,...m.attributes};return y.createNode(e,x,[])},markdownTokenizer:{name:e,level:"block",start(m){var y;const x=new RegExp(`^:::${d}(?:\\s|$)`,"m"),v=(y=m.match(x))==null?void 0:y.index;return v!==void 0?v:-1},tokenize(m,y,x){const v=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),k=m.match(v);if(!k)return;const E=k[1]||"",M=s(E);if(!c.find(z=>!(z in M)))return{type:e,raw:k[0],attributes:M}}},renderMarkdown:m=>{const y=h(m.attrs||{}),x=l(y),v=x?` {${x}}`:"";return`:::${d}${v} :::`}}}function TN(n){const{nodeName:e,name:t,getContent:s,parseAttributes:l=Rp,serializeAttributes:o=zp,defaultAttributes:c={},content:f="block",allowedAttributes:d}=n,h=t||e,m=y=>{if(!d)return y;const x={};return d.forEach(v=>{v in y&&(x[v]=y[v])}),x};return{parseMarkdown:(y,x)=>{let v;if(s){const E=s(y);v=typeof E=="string"?[{type:"text",text:E}]:E}else f==="block"?v=x.parseChildren(y.tokens||[]):v=x.parseInline(y.tokens||[]);const k={...c,...y.attributes};return x.createNode(e,k,v)},markdownTokenizer:{name:e,level:"block",start(y){var x;const v=new RegExp(`^:::${h}`,"m"),k=(x=y.match(v))==null?void 0:x.index;return k!==void 0?k:-1},tokenize(y,x,v){var k;const E=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),M=y.match(E);if(!M)return;const[C,z=""]=M,q=l(z);let W=1;const G=C.length;let P="";const I=/^:::([\w-]*)(\s.*)?/gm,ie=y.slice(G);for(I.lastIndex=0;;){const ce=I.exec(ie);if(ce===null)break;const De=ce.index,rt=ce[1];if(!((k=ce[2])!=null&&k.endsWith(":::"))){if(rt)W+=1;else if(W-=1,W===0){const _e=ie.slice(0,De);P=_e.trim();const st=y.slice(0,G+De+ce[0].length);let $e=[];if(P)if(f==="block")for($e=v.blockTokens(_e),$e.forEach(Ee=>{Ee.text&&(!Ee.tokens||Ee.tokens.length===0)&&(Ee.tokens=v.inlineTokens(Ee.text))});$e.length>0;){const Ee=$e[$e.length-1];if(Ee.type==="paragraph"&&(!Ee.text||Ee.text.trim()===""))$e.pop();else break}else $e=v.inlineTokens(P);return{type:e,raw:st,attributes:q,content:P,tokens:$e}}}}}},renderMarkdown:(y,x)=>{const v=m(y.attrs||{}),k=o(v),E=k?` {${k}}`:"",M=x.renderChildren(y.content||[],`

`);return`:::${h}${E}

${M}

:::`}}}function EN(n){if(!n.trim())return{};const e={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let s=t.exec(n);for(;s!==null;){const[,l,o,c]=s;e[l]=o||c,s=t.exec(n)}return e}function MN(n){return Object.entries(n).filter(([,e])=>e!=null).map(([e,t])=>`${e}="${t}"`).join(" ")}function CN(n){const{nodeName:e,name:t,getContent:s,parseAttributes:l=EN,serializeAttributes:o=MN,defaultAttributes:c={},selfClosing:f=!1,allowedAttributes:d}=n,h=t||e,m=x=>{if(!d)return x;const v={};return d.forEach(k=>{const E=typeof k=="string"?k:k.name,M=typeof k=="string"?void 0:k.skipIfDefault;if(E in x){const C=x[E];if(M!==void 0&&C===M)return;v[E]=C}}),v},y=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(x,v)=>{const k={...c,...x.attributes};if(f)return v.createNode(e,k);const E=s?s(x):x.content||"";return E?v.createNode(e,k,[v.createTextNode(E)]):v.createNode(e,k,[])},markdownTokenizer:{name:e,level:"inline",start(x){const v=f?new RegExp(`\\[${y}\\s*[^\\]]*\\]`):new RegExp(`\\[${y}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${y}\\]`),k=x.match(v),E=k?.index;return E!==void 0?E:-1},tokenize(x,v,k){const E=f?new RegExp(`^\\[${y}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${y}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${y}\\]`),M=x.match(E);if(!M)return;let C="",z="";if(f){const[,W]=M;z=W}else{const[,W,G]=M;z=W,C=G||""}const q=l(z.trim());return{type:e,raw:M[0],content:C.trim(),attributes:q}}},renderMarkdown:x=>{let v="";s?v=s(x):x.content&&x.content.length>0&&(v=x.content.filter(C=>C.type==="text").map(C=>C.text).join(""));const k=m(x.attrs||{}),E=o(k),M=E?` ${E}`:"";return f?`[${h}${M}]`:`[${h}${M}]${v}[/${h}]`}}}function Ph(n,e,t){var s,l,o,c;const f=n.split(`
`),d=[];let h="",m=0;const y=e.baseIndentSize||2;for(;m<f.length;){const x=f[m],v=x.match(e.itemPattern);if(!v){if(d.length>0)break;if(x.trim()===""){m+=1,h=`${h}${x}
`;continue}else return}const k=e.extractItemData(v),{indentLevel:E,mainContent:M}=k;h=`${h}${x}
`;const C=[M];for(m+=1;m<f.length;){const G=f[m];if(G.trim()===""){const I=f.slice(m+1).findIndex(De=>De.trim()!=="");if(I===-1)break;if((((l=(s=f[m+1+I].match(/^(\s*)/))==null?void 0:s[1])==null?void 0:l.length)||0)>E){C.push(G),h=`${h}${G}
`,m+=1;continue}else break}if((((c=(o=G.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:c.length)||0)>E)C.push(G),h=`${h}${G}
`,m+=1;else break}let z;const q=C.slice(1);if(q.length>0){const G=q.map(P=>P.slice(E+y)).join(`
`);G.trim()&&(e.customNestedParser?z=e.customNestedParser(G):z=t.blockTokens(G))}const W=e.createToken(k,z);d.push(W)}if(d.length!==0)return{items:d,raw:h}}function Lp(n,e,t,s){if(!n||!Array.isArray(n.content))return"";const l=typeof t=="function"?t(s):t,[o,...c]=n.content,f=e.renderChildren([o]),d=[`${l}${f}`];return c&&c.length>0&&c.forEach(h=>{const m=e.renderChildren([h]);if(m){const y=m.split(`
`).map(x=>x?e.indent(x):"").join(`
`);d.push(y)}}),d.join(`
`)}function wN(n,e,t={}){const{state:s}=e,{doc:l,tr:o}=s,c=n;l.descendants((f,d)=>{const h=o.mapping.map(d),m=o.mapping.map(d)+f.nodeSize;let y=null;if(f.marks.forEach(v=>{if(v!==c)return!1;y=v}),!y)return;let x=!1;if(Object.keys(t).forEach(v=>{t[v]!==y.attrs[v]&&(x=!0)}),x){const v=n.type.create({...n.attrs,...t});o.removeMark(h,m,n.type),o.addMark(h,m,v)}}),o.docChanged&&e.view.dispatch(o)}var vn=class Xv extends jp{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new Xv(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function ni(n){return new cN({find:n.find,handler:({state:e,range:t,match:s,pasteEvent:l})=>{const o=Xe(n.getAttributes,void 0,s,l);if(o===!1||o===null)return null;const{tr:c}=e,f=s[s.length-1],d=s[0];let h=t.to;if(f){const m=d.search(/\S/),y=t.from+d.indexOf(f),x=y+f.length;if(Dp(t.from,t.to,e.doc).filter(k=>k.mark.type.excluded.find(M=>M===n.type&&M!==k.mark.type)).filter(k=>k.to>y).length)return null;x<t.to&&c.delete(x,t.to),y>t.from&&c.delete(t.from+m,y),h=t.from+m+f.length,c.addMark(t.from+m,h,n.type.create(o||{})),c.removeStoredMark(n.type)}}})}const{getOwnPropertyNames:NN,getOwnPropertySymbols:AN}=Object,{hasOwnProperty:ON}=Object.prototype;function ph(n,e){return function(s,l,o){return n(s,l,o)&&e(s,l,o)}}function cc(n){return function(t,s,l){if(!t||!s||typeof t!="object"||typeof s!="object")return n(t,s,l);const{cache:o}=l,c=o.get(t),f=o.get(s);if(c&&f)return c===s&&f===t;o.set(t,s),o.set(s,t);const d=n(t,s,l);return o.delete(t),o.delete(s),d}}function DN(n){return n?.[Symbol.toStringTag]}function h1(n){return NN(n).concat(AN(n))}const jN=Object.hasOwn||((n,e)=>ON.call(n,e));function ii(n,e){return n===e||!n&&!e&&n!==n&&e!==e}const RN="__v",zN="__o",LN="_owner",{getOwnPropertyDescriptor:p1,keys:m1}=Object;function _N(n,e){return n.byteLength===e.byteLength&&zc(new Uint8Array(n),new Uint8Array(e))}function BN(n,e,t){let s=n.length;if(e.length!==s)return!1;for(;s-- >0;)if(!t.equals(n[s],e[s],s,s,n,e,t))return!1;return!0}function HN(n,e){return n.byteLength===e.byteLength&&zc(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function UN(n,e){return ii(n.getTime(),e.getTime())}function IN(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function VN(n,e){return n===e}function g1(n,e,t){const s=n.size;if(s!==e.size)return!1;if(!s)return!0;const l=new Array(s),o=n.entries();let c,f,d=0;for(;(c=o.next())&&!c.done;){const h=e.entries();let m=!1,y=0;for(;(f=h.next())&&!f.done;){if(l[y]){y++;continue}const x=c.value,v=f.value;if(t.equals(x[0],v[0],d,y,n,e,t)&&t.equals(x[1],v[1],x[0],v[0],n,e,t)){m=l[y]=!0;break}y++}if(!m)return!1;d++}return!0}const qN=ii;function $N(n,e,t){const s=m1(n);let l=s.length;if(m1(e).length!==l)return!1;for(;l-- >0;)if(!Qv(n,e,t,s[l]))return!1;return!0}function so(n,e,t){const s=h1(n);let l=s.length;if(h1(e).length!==l)return!1;let o,c,f;for(;l-- >0;)if(o=s[l],!Qv(n,e,t,o)||(c=p1(n,o),f=p1(e,o),(c||f)&&(!c||!f||c.configurable!==f.configurable||c.enumerable!==f.enumerable||c.writable!==f.writable)))return!1;return!0}function GN(n,e){return ii(n.valueOf(),e.valueOf())}function YN(n,e){return n.source===e.source&&n.flags===e.flags}function y1(n,e,t){const s=n.size;if(s!==e.size)return!1;if(!s)return!0;const l=new Array(s),o=n.values();let c,f;for(;(c=o.next())&&!c.done;){const d=e.values();let h=!1,m=0;for(;(f=d.next())&&!f.done;){if(!l[m]&&t.equals(c.value,f.value,c.value,f.value,n,e,t)){h=l[m]=!0;break}m++}if(!h)return!1}return!0}function zc(n,e){let t=n.byteLength;if(e.byteLength!==t||n.byteOffset!==e.byteOffset)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function KN(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function Qv(n,e,t,s){return(s===LN||s===zN||s===RN)&&(n.$$typeof||e.$$typeof)?!0:jN(e,s)&&t.equals(n[s],e[s],s,s,n,e,t)}const PN="[object ArrayBuffer]",FN="[object Arguments]",JN="[object Boolean]",XN="[object DataView]",QN="[object Date]",ZN="[object Error]",WN="[object Map]",eA="[object Number]",tA="[object Object]",nA="[object RegExp]",rA="[object Set]",sA="[object String]",iA={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},lA="[object URL]",oA=Object.prototype.toString;function aA({areArrayBuffersEqual:n,areArraysEqual:e,areDataViewsEqual:t,areDatesEqual:s,areErrorsEqual:l,areFunctionsEqual:o,areMapsEqual:c,areNumbersEqual:f,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:m,areSetsEqual:y,areTypedArraysEqual:x,areUrlsEqual:v,unknownTagComparators:k}){return function(M,C,z){if(M===C)return!0;if(M==null||C==null)return!1;const q=typeof M;if(q!==typeof C)return!1;if(q!=="object")return q==="number"?f(M,C,z):q==="function"?o(M,C,z):!1;const W=M.constructor;if(W!==C.constructor)return!1;if(W===Object)return d(M,C,z);if(Array.isArray(M))return e(M,C,z);if(W===Date)return s(M,C,z);if(W===RegExp)return m(M,C,z);if(W===Map)return c(M,C,z);if(W===Set)return y(M,C,z);const G=oA.call(M);if(G===QN)return s(M,C,z);if(G===nA)return m(M,C,z);if(G===WN)return c(M,C,z);if(G===rA)return y(M,C,z);if(G===tA)return typeof M.then!="function"&&typeof C.then!="function"&&d(M,C,z);if(G===lA)return v(M,C,z);if(G===ZN)return l(M,C,z);if(G===FN)return d(M,C,z);if(iA[G])return x(M,C,z);if(G===PN)return n(M,C,z);if(G===XN)return t(M,C,z);if(G===JN||G===eA||G===sA)return h(M,C,z);if(k){let P=k[G];if(!P){const I=DN(M);I&&(P=k[I])}if(P)return P(M,C,z)}return!1}}function cA({circular:n,createCustomConfig:e,strict:t}){let s={areArrayBuffersEqual:_N,areArraysEqual:t?so:BN,areDataViewsEqual:HN,areDatesEqual:UN,areErrorsEqual:IN,areFunctionsEqual:VN,areMapsEqual:t?ph(g1,so):g1,areNumbersEqual:qN,areObjectsEqual:t?so:$N,arePrimitiveWrappersEqual:GN,areRegExpsEqual:YN,areSetsEqual:t?ph(y1,so):y1,areTypedArraysEqual:t?ph(zc,so):zc,areUrlsEqual:KN,unknownTagComparators:void 0};if(e&&(s=Object.assign({},s,e(s))),n){const l=cc(s.areArraysEqual),o=cc(s.areMapsEqual),c=cc(s.areObjectsEqual),f=cc(s.areSetsEqual);s=Object.assign({},s,{areArraysEqual:l,areMapsEqual:o,areObjectsEqual:c,areSetsEqual:f})}return s}function uA(n){return function(e,t,s,l,o,c,f){return n(e,t,f)}}function fA({circular:n,comparator:e,createState:t,equals:s,strict:l}){if(t)return function(f,d){const{cache:h=n?new WeakMap:void 0,meta:m}=t();return e(f,d,{cache:h,equals:s,meta:m,strict:l})};if(n)return function(f,d){return e(f,d,{cache:new WeakMap,equals:s,meta:void 0,strict:l})};const o={cache:void 0,equals:s,meta:void 0,strict:l};return function(f,d){return e(f,d,o)}}const dA=vs();vs({strict:!0});vs({circular:!0});vs({circular:!0,strict:!0});vs({createInternalComparator:()=>ii});vs({strict:!0,createInternalComparator:()=>ii});vs({circular:!0,createInternalComparator:()=>ii});vs({circular:!0,createInternalComparator:()=>ii,strict:!0});function vs(n={}){const{circular:e=!1,createInternalComparator:t,createState:s,strict:l=!1}=n,o=cA(n),c=aA(o),f=t?t(c):uA(c);return fA({circular:e,comparator:c,createState:s,equals:f,strict:l})}var mh={exports:{}},gh={};var b1;function hA(){if(b1)return gh;b1=1;var n=Ro(),e=q1();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var s=typeof Object.is=="function"?Object.is:t,l=e.useSyncExternalStore,o=n.useRef,c=n.useEffect,f=n.useMemo,d=n.useDebugValue;return gh.useSyncExternalStoreWithSelector=function(h,m,y,x,v){var k=o(null);if(k.current===null){var E={hasValue:!1,value:null};k.current=E}else E=k.current;k=f(function(){function C(P){if(!z){if(z=!0,q=P,P=x(P),v!==void 0&&E.hasValue){var I=E.value;if(v(I,P))return W=I}return W=P}if(I=W,s(q,P))return I;var ie=x(P);return v!==void 0&&v(I,ie)?(q=P,I):(q=P,W=ie)}var z=!1,q,W,G=y===void 0?null:y;return[function(){return C(m())},G===null?void 0:function(){return C(G())}]},[m,y,x,v]);var M=l(h,k[0],k[1]);return c(function(){E.hasValue=!0,E.value=M},[M]),d(M),M},gh}var x1;function pA(){return x1||(x1=1,mh.exports=hA()),mh.exports}var mA=pA(),gA=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},yA=({contentComponent:n})=>{const e=$1.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return b.jsx(b.Fragment,{children:Object.values(e)})};function bA(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,s){e={...e,[t]:SE.createPortal(s.reactElement,s.element,t)},n.forEach(l=>l())},removeRenderer(t){const s={...e};delete s[t],e=s,n.forEach(l=>l())}}}var xA=class extends Xn.Component{constructor(n){var e;super(n),this.editorContentRef=Xn.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=n.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var n;const e=this.props.editor;if(e&&!e.isDestroyed&&((n=e.view.dom)!=null&&n.parentNode)){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t}),e.contentComponent=bA(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(s=>s.hasContentComponentInitialized?s:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((n=e.view.dom)!=null&&n.parentNode))return;const t=document.createElement("div");t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t})}catch{}}}render(){const{editor:n,innerRef:e,...t}=this.props;return b.jsxs(b.Fragment,{children:[b.jsx("div",{ref:gA(e,this.editorContentRef),...t}),n?.contentComponent&&b.jsx(yA,{contentComponent:n.contentComponent})]})}},vA=J.forwardRef((n,e)=>{const t=Xn.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Xn.createElement(xA,{key:t,innerRef:e,...n})}),Zv=Xn.memo(vA),SA=typeof window<"u"?J.useLayoutEffect:J.useEffect,kA=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function TA(n){var e;const[t]=J.useState(()=>new kA(n.editor)),s=mA.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!=null?e:dA);return SA(()=>t.watch(n.editor),[n.editor,t]),J.useDebugValue(s),s}var EA=!1,Fh=typeof window>"u",MA=Fh||!!(typeof window<"u"&&window.next),CA=class Wv{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Fh||MA?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...s)=>{var l,o;return(o=(l=this.options.current).onBeforeCreate)==null?void 0:o.call(l,...s)},onBlur:(...s)=>{var l,o;return(o=(l=this.options.current).onBlur)==null?void 0:o.call(l,...s)},onCreate:(...s)=>{var l,o;return(o=(l=this.options.current).onCreate)==null?void 0:o.call(l,...s)},onDestroy:(...s)=>{var l,o;return(o=(l=this.options.current).onDestroy)==null?void 0:o.call(l,...s)},onFocus:(...s)=>{var l,o;return(o=(l=this.options.current).onFocus)==null?void 0:o.call(l,...s)},onSelectionUpdate:(...s)=>{var l,o;return(o=(l=this.options.current).onSelectionUpdate)==null?void 0:o.call(l,...s)},onTransaction:(...s)=>{var l,o;return(o=(l=this.options.current).onTransaction)==null?void 0:o.call(l,...s)},onUpdate:(...s)=>{var l,o;return(o=(l=this.options.current).onUpdate)==null?void 0:o.call(l,...s)},onContentError:(...s)=>{var l,o;return(o=(l=this.options.current).onContentError)==null?void 0:o.call(l,...s)},onDrop:(...s)=>{var l,o;return(o=(l=this.options.current).onDrop)==null?void 0:o.call(l,...s)},onPaste:(...s)=>{var l,o;return(o=(l=this.options.current).onPaste)==null?void 0:o.call(l,...s)},onDelete:(...s)=>{var l,o;return(o=(l=this.options.current).onDelete)==null?void 0:o.call(l,...s)}};return new bN(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(s=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(s)?!0:s==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((l,o)=>{var c;return l===((c=t.extensions)==null?void 0:c[o])}):e[s]===t[s])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Wv.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((s,l)=>s===e[l]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function wA(n={},e=[]){const t=J.useRef(n);t.current=n;const[s]=J.useState(()=>new CA(t)),l=$1.useSyncExternalStore(s.subscribe,s.getEditor,s.getServerSnapshot);return J.useDebugValue(l),J.useEffect(s.onRender(e)),TA({editor:l,selector:({transactionNumber:o})=>n.shouldRerenderOnTransaction===!1||n.shouldRerenderOnTransaction===void 0?null:n.immediatelyRender&&o===0?0:o+1}),l}var eS=J.createContext({editor:null});eS.Consumer;var NA=J.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),AA=()=>J.useContext(NA);Xn.forwardRef((n,e)=>{const{onDragStart:t}=AA(),s=n.as||"div";return b.jsx(s,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});Xn.createContext({markViewContentRef:()=>{}});var _p=J.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});_p.displayName="TiptapContext";var OA=()=>J.useContext(_p);function tS({editor:n,instance:e,children:t}){const s=n??e;if(!s)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const l=J.useMemo(()=>({editor:s}),[s]),o=J.useMemo(()=>({editor:s}),[s]);return b.jsx(eS.Provider,{value:o,children:b.jsx(_p.Provider,{value:l,children:t})})}tS.displayName="Tiptap";function nS({...n}){const{editor:e}=OA();return b.jsx(Zv,{editor:e,...n})}nS.displayName="Tiptap.Content";Object.assign(tS,{Content:nS});var Lc=(n,e)=>{if(n==="slot")return 0;if(n instanceof Function)return n(e);const{children:t,...s}=e??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,s,t]},DA=/^\s*>\s$/,jA=vn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return Lc("blockquote",{...Ct(this.options.HTMLAttributes,n),children:Lc("slot",{})})},parseMarkdown:(n,e)=>e.createNode("blockquote",void 0,e.parseChildren(n.tokens||[])),renderMarkdown:(n,e)=>{if(!n.content)return"";const t=">",s=[];return n.content.forEach(l=>{const f=e.renderChildren([l]).split(`
`).map(d=>d.trim()===""?t:`${t} ${d}`);s.push(f.join(`
`))}),s.join(`
${t}
`)},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ll({find:DA,type:this.type})]}}),RA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,zA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,LA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,_A=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,BA=si.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return Lc("strong",{...Ct(this.options.HTMLAttributes,n),children:Lc("slot",{})})},markdownTokenName:"strong",parseMarkdown:(n,e)=>e.applyMark("bold",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`**${e.renderChildren(n)}**`,addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[il({find:RA,type:this.type}),il({find:LA,type:this.type})]},addPasteRules(){return[ni({find:zA,type:this.type}),ni({find:_A,type:this.type})]}}),HA=/(^|[^`])`([^`]+)`(?!`)$/,UA=/(^|[^`])`([^`]+)`(?!`)/g,IA=si.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Ct(this.options.HTMLAttributes,n),0]},markdownTokenName:"codespan",parseMarkdown:(n,e)=>e.applyMark("code",[{type:"text",text:n.text||""}]),renderMarkdown:(n,e)=>n.content?`\`${e.renderChildren(n.content)}\``:"",addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[il({find:HA,type:this.type})]},addPasteRules(){return[ni({find:UA,type:this.type})]}}),yh=4,VA=/^```([a-z]+)?[\s\n]$/,qA=/^~~~([a-z]+)?[\s\n]$/,$A=vn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:yh,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options;if(!t)return null;const o=[...((e=n.firstElementChild)==null?void 0:e.classList)||[]].filter(c=>c.startsWith(t)).map(c=>c.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Ct(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(n,e)=>{var t;return((t=n.raw)==null?void 0:t.startsWith("```"))===!1&&n.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:n.lang||null},n.text?[e.createTextNode(n.text)]:[])},renderMarkdown:(n,e)=>{var t;let s="";const l=((t=n.attrs)==null?void 0:t.language)||"";return n.content?s=[`\`\`\`${l}`,e.renderChildren(n.content),"```"].join(`
`):s=`\`\`\`${l}

\`\`\``,s},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:yh,{state:s}=n,{selection:l}=s,{$from:o,empty:c}=l;if(o.parent.type!==this.type)return!1;const f=" ".repeat(t);return c?n.commands.insertContent(f):n.commands.command(({tr:d})=>{const{from:h,to:m}=l,v=s.doc.textBetween(h,m,`
`,`
`).split(`
`).map(k=>f+k).join(`
`);return d.replaceWith(h,m,s.schema.text(v)),!0})},"Shift-Tab":({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:yh,{state:s}=n,{selection:l}=s,{$from:o,empty:c}=l;return o.parent.type!==this.type?!1:c?n.commands.command(({tr:f})=>{var d;const{pos:h}=o,m=o.start(),y=o.end(),v=s.doc.textBetween(m,y,`
`,`
`).split(`
`);let k=0,E=0;const M=h-m;for(let P=0;P<v.length;P+=1){if(E+v[P].length>=M){k=P;break}E+=v[P].length+1}const z=((d=v[k].match(/^ */))==null?void 0:d[0])||"",q=Math.min(z.length,t);if(q===0)return!0;let W=m;for(let P=0;P<k;P+=1)W+=v[P].length+1;return f.delete(W,W+q),h-W<=q&&f.setSelection(ke.create(f.doc,W)),!0}):n.commands.command(({tr:f})=>{const{from:d,to:h}=l,x=s.doc.textBetween(d,h,`
`,`
`).split(`
`).map(v=>{var k;const E=((k=v.match(/^ */))==null?void 0:k[0])||"",M=Math.min(E.length,t);return v.slice(M)}).join(`
`);return f.replaceWith(d,h,s.schema.text(x)),!0})},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:s,empty:l}=t;if(!l||s.parent.type!==this.type)return!1;const o=s.parentOffset===s.parent.nodeSize-2,c=s.parent.textContent.endsWith(`

`);return!o||!c?!1:n.chain().command(({tr:f})=>(f.delete(s.pos-2,s.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:s}=e,{$from:l,empty:o}=t;if(!o||l.parent.type!==this.type||!(l.parentOffset===l.parent.nodeSize-2))return!1;const f=l.after();return f===void 0?!1:s.nodeAt(f)?n.commands.command(({tr:h})=>(h.setSelection(Re.near(s.resolve(f))),!0)):n.commands.exitCode()}}},addInputRules(){return[Kh({find:VA,type:this.type,getAttributes:n=>({language:n[1]})}),Kh({find:qA,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new dt({key:new Nt("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),s=e.clipboardData.getData("vscode-editor-data"),l=s?JSON.parse(s):void 0,o=l?.mode;if(!t||!o)return!1;const{tr:c,schema:f}=n.state,d=f.text(t.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:o},d)),c.selection.$from.parent.type!==this.type&&c.setSelection(ke.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),n.dispatch(c),!0}}})]}}),GA=vn.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`

`):""}),YA=vn.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Ct(this.options.HTMLAttributes,n)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:s})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:l,storedMarks:o}=t;if(l.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:f}=s.extensionManager,d=o||l.$to.parentOffset&&l.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:m})=>{if(m&&d&&c){const y=d.filter(x=>f.includes(x.type.name));h.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),KA=vn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Ct(this.options.HTMLAttributes,e),0]},parseMarkdown:(n,e)=>e.createNode("heading",{level:n.depth||1},e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>{var t;const s=(t=n.attrs)!=null&&t.level?parseInt(n.attrs.level,10):1,l="#".repeat(s);return n.content?`${l} ${e.renderChildren(n.content)}`:""},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Kh({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),PA=vn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Ct(this.options.HTMLAttributes,n)]},markdownTokenName:"hr",parseMarkdown:(n,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!vN(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:s}=t,l=n();return Rv(t)?l.insertContentAt(s.pos,{type:this.name}):l.insertContent({type:this.name}),l.command(({state:o,tr:c,dispatch:f})=>{if(f){const{$to:d}=c.selection,h=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?c.setSelection(ke.create(c.doc,d.pos+1)):d.nodeAfter.isBlock?c.setSelection(xe.create(c.doc,d.pos)):c.setSelection(ke.create(c.doc,d.pos));else{const m=o.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,y=m?.create();y&&(c.insert(h,y),c.setSelection(ke.create(c.doc,h+1)))}c.scrollIntoView()}return!0}).run()}}},addInputRules(){return[xN({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),FA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,JA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,XA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,QA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,ZA=si.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Ct(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(n,e)=>e.applyMark("italic",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`*${e.renderChildren(n)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[il({find:FA,type:this.type}),il({find:XA,type:this.type})]},addPasteRules(){return[ni({find:JA,type:this.type}),ni({find:QA,type:this.type})]}});const WA="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",eO="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Jh="numeric",Xh="ascii",Qh="alpha",go="asciinumeric",uo="alphanumeric",Zh="domain",rS="emoji",tO="scheme",nO="slashscheme",bh="whitespace";function rO(n,e){return n in e||(e[n]=[]),e[n]}function Ks(n,e,t){e[Jh]&&(e[go]=!0,e[uo]=!0),e[Xh]&&(e[go]=!0,e[Qh]=!0),e[go]&&(e[uo]=!0),e[Qh]&&(e[uo]=!0),e[uo]&&(e[Zh]=!0),e[rS]&&(e[Zh]=!0);for(const s in e){const l=rO(s,t);l.indexOf(n)<0&&l.push(n)}}function sO(n,e){const t={};for(const s in e)e[s].indexOf(n)>=0&&(t[s]=!0);return t}function on(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}on.groups={};on.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let s=0;s<e.jr.length;s++){const l=e.jr[s][0],o=e.jr[s][1];if(o&&l.test(n))return o}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,s){for(let l=0;l<n.length;l++)this.tt(n[l],e,t,s)},tr(n,e,t,s){s=s||on.groups;let l;return e&&e.j?l=e:(l=new on(e),t&&s&&Ks(e,t,s)),this.jr.push([n,l]),l},ts(n,e,t,s){let l=this;const o=n.length;if(!o)return l;for(let c=0;c<o-1;c++)l=l.tt(n[c]);return l.tt(n[o-1],e,t,s)},tt(n,e,t,s){s=s||on.groups;const l=this;if(e&&e.j)return l.j[n]=e,e;const o=e;let c,f=l.go(n);if(f?(c=new on,Object.assign(c.j,f.j),c.jr.push.apply(c.jr,f.jr),c.jd=f.jd,c.t=f.t):c=new on,o){if(s)if(c.t&&typeof c.t=="string"){const d=Object.assign(sO(c.t,s),t);Ks(o,d,s)}else t&&Ks(o,t,s);c.t=o}return l.j[n]=c,c}};const je=(n,e,t,s,l)=>n.ta(e,t,s,l),mt=(n,e,t,s,l)=>n.tr(e,t,s,l),v1=(n,e,t,s,l)=>n.ts(e,t,s,l),ee=(n,e,t,s,l)=>n.tt(e,t,s,l),vr="WORD",Wh="UWORD",sS="ASCIINUMERICAL",iS="ALPHANUMERICAL",Do="LOCALHOST",ep="TLD",tp="UTLD",yc="SCHEME",Fi="SLASH_SCHEME",Bp="NUM",np="WS",Hp="NL",yo="OPENBRACE",bo="CLOSEBRACE",_c="OPENBRACKET",Bc="CLOSEBRACKET",Hc="OPENPAREN",Uc="CLOSEPAREN",Ic="OPENANGLEBRACKET",Vc="CLOSEANGLEBRACKET",qc="FULLWIDTHLEFTPAREN",$c="FULLWIDTHRIGHTPAREN",Gc="LEFTCORNERBRACKET",Yc="RIGHTCORNERBRACKET",Kc="LEFTWHITECORNERBRACKET",Pc="RIGHTWHITECORNERBRACKET",Fc="FULLWIDTHLESSTHAN",Jc="FULLWIDTHGREATERTHAN",Xc="AMPERSAND",Qc="APOSTROPHE",Zc="ASTERISK",rs="AT",Wc="BACKSLASH",eu="BACKTICK",tu="CARET",ls="COLON",Up="COMMA",nu="DOLLAR",Pn="DOT",ru="EQUALS",Ip="EXCLAMATION",jn="HYPHEN",xo="PERCENT",su="PIPE",iu="PLUS",lu="POUND",vo="QUERY",Vp="QUOTE",lS="FULLWIDTHMIDDLEDOT",qp="SEMI",Fn="SLASH",So="TILDE",ou="UNDERSCORE",oS="EMOJI",au="SYM";var aS=Object.freeze({__proto__:null,ALPHANUMERICAL:iS,AMPERSAND:Xc,APOSTROPHE:Qc,ASCIINUMERICAL:sS,ASTERISK:Zc,AT:rs,BACKSLASH:Wc,BACKTICK:eu,CARET:tu,CLOSEANGLEBRACKET:Vc,CLOSEBRACE:bo,CLOSEBRACKET:Bc,CLOSEPAREN:Uc,COLON:ls,COMMA:Up,DOLLAR:nu,DOT:Pn,EMOJI:oS,EQUALS:ru,EXCLAMATION:Ip,FULLWIDTHGREATERTHAN:Jc,FULLWIDTHLEFTPAREN:qc,FULLWIDTHLESSTHAN:Fc,FULLWIDTHMIDDLEDOT:lS,FULLWIDTHRIGHTPAREN:$c,HYPHEN:jn,LEFTCORNERBRACKET:Gc,LEFTWHITECORNERBRACKET:Kc,LOCALHOST:Do,NL:Hp,NUM:Bp,OPENANGLEBRACKET:Ic,OPENBRACE:yo,OPENBRACKET:_c,OPENPAREN:Hc,PERCENT:xo,PIPE:su,PLUS:iu,POUND:lu,QUERY:vo,QUOTE:Vp,RIGHTCORNERBRACKET:Yc,RIGHTWHITECORNERBRACKET:Pc,SCHEME:yc,SEMI:qp,SLASH:Fn,SLASH_SCHEME:Fi,SYM:au,TILDE:So,TLD:ep,UNDERSCORE:ou,UTLD:tp,UWORD:Wh,WORD:vr,WS:np});const br=/[a-z]/,io=new RegExp("\\p{L}","u"),xh=new RegExp("\\p{Emoji}","u"),xr=/\d/,vh=/\s/,S1="\r",Sh=`
`,iO="",lO="",kh="";let uc=null,fc=null;function oO(n=[]){const e={};on.groups=e;const t=new on;uc==null&&(uc=k1(WA)),fc==null&&(fc=k1(eO)),ee(t,"'",Qc),ee(t,"{",yo),ee(t,"}",bo),ee(t,"[",_c),ee(t,"]",Bc),ee(t,"(",Hc),ee(t,")",Uc),ee(t,"<",Ic),ee(t,">",Vc),ee(t,"",qc),ee(t,"",$c),ee(t,"",Gc),ee(t,"",Yc),ee(t,"",Kc),ee(t,"",Pc),ee(t,"",Fc),ee(t,"",Jc),ee(t,"&",Xc),ee(t,"*",Zc),ee(t,"@",rs),ee(t,"`",eu),ee(t,"^",tu),ee(t,":",ls),ee(t,",",Up),ee(t,"$",nu),ee(t,".",Pn),ee(t,"=",ru),ee(t,"!",Ip),ee(t,"-",jn),ee(t,"%",xo),ee(t,"|",su),ee(t,"+",iu),ee(t,"#",lu),ee(t,"?",vo),ee(t,'"',Vp),ee(t,"/",Fn),ee(t,";",qp),ee(t,"~",So),ee(t,"_",ou),ee(t,"\\",Wc),ee(t,"",lS);const s=mt(t,xr,Bp,{[Jh]:!0});mt(s,xr,s);const l=mt(s,br,sS,{[go]:!0}),o=mt(s,io,iS,{[uo]:!0}),c=mt(t,br,vr,{[Xh]:!0});mt(c,xr,l),mt(c,br,c),mt(l,xr,l),mt(l,br,l);const f=mt(t,io,Wh,{[Qh]:!0});mt(f,br),mt(f,xr,o),mt(f,io,f),mt(o,xr,o),mt(o,br),mt(o,io,o);const d=ee(t,Sh,Hp,{[bh]:!0}),h=ee(t,S1,np,{[bh]:!0}),m=mt(t,vh,np,{[bh]:!0});ee(t,kh,m),ee(h,Sh,d),ee(h,kh,m),mt(h,vh,m),ee(m,S1),ee(m,Sh),mt(m,vh,m),ee(m,kh,m);const y=mt(t,xh,oS,{[rS]:!0});ee(y,"#"),mt(y,xh,y),ee(y,iO,y);const x=ee(y,lO);ee(x,"#"),mt(x,xh,y);const v=[[br,c],[xr,l]],k=[[br,null],[io,f],[xr,o]];for(let E=0;E<uc.length;E++)Wr(t,uc[E],ep,vr,v);for(let E=0;E<fc.length;E++)Wr(t,fc[E],tp,Wh,k);Ks(ep,{tld:!0,ascii:!0},e),Ks(tp,{utld:!0,alpha:!0},e),Wr(t,"file",yc,vr,v),Wr(t,"mailto",yc,vr,v),Wr(t,"http",Fi,vr,v),Wr(t,"https",Fi,vr,v),Wr(t,"ftp",Fi,vr,v),Wr(t,"ftps",Fi,vr,v),Ks(yc,{scheme:!0,ascii:!0},e),Ks(Fi,{slashscheme:!0,ascii:!0},e),n=n.sort((E,M)=>E[0]>M[0]?1:-1);for(let E=0;E<n.length;E++){const M=n[E][0],z=n[E][1]?{[tO]:!0}:{[nO]:!0};M.indexOf("-")>=0?z[Zh]=!0:br.test(M)?xr.test(M)?z[go]=!0:z[Xh]=!0:z[Jh]=!0,v1(t,M,M,z)}return v1(t,"localhost",Do,{ascii:!0}),t.jd=new on(au),{start:t,tokens:Object.assign({groups:e},aS)}}function cS(n,e){const t=aO(e.replace(/[A-Z]/g,f=>f.toLowerCase())),s=t.length,l=[];let o=0,c=0;for(;c<s;){let f=n,d=null,h=0,m=null,y=-1,x=-1;for(;c<s&&(d=f.go(t[c]));)f=d,f.accepts()?(y=0,x=0,m=f):y>=0&&(y+=t[c].length,x++),h+=t[c].length,o+=t[c].length,c++;o-=y,c-=x,h-=y,l.push({t:m.t,v:e.slice(o-h,o),s:o-h,e:o})}return l}function aO(n){const e=[],t=n.length;let s=0;for(;s<t;){let l=n.charCodeAt(s),o,c=l<55296||l>56319||s+1===t||(o=n.charCodeAt(s+1))<56320||o>57343?n[s]:n.slice(s,s+2);e.push(c),s+=c.length}return e}function Wr(n,e,t,s,l){let o;const c=e.length;for(let f=0;f<c-1;f++){const d=e[f];n.j[d]?o=n.j[d]:(o=new on(s),o.jr=l.slice(),n.j[d]=o),n=o}return o=new on(t),o.jr=l.slice(),n.j[e[c-1]]=o,o}function k1(n){const e=[],t=[];let s=0,l="0123456789";for(;s<n.length;){let o=0;for(;l.indexOf(n[s+o])>=0;)o++;if(o>0){e.push(t.join(""));for(let c=parseInt(n.substring(s,s+o),10);c>0;c--)t.pop();s+=o}else t.push(n[s]),s++}return e}const jo={defaultProtocol:"http",events:null,format:T1,formatHref:T1,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function $p(n,e=null){let t=Object.assign({},jo);n&&(t=Object.assign(t,n instanceof $p?n.o:n));const s=t.ignoreTags,l=[];for(let o=0;o<s.length;o++)l.push(s[o].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=l}$p.prototype={o:jo,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const s=e!=null;let l=this.o[n];return l&&(typeof l=="object"?(l=t.t in l?l[t.t]:jo[n],typeof l=="function"&&s&&(l=l(e,t))):typeof l=="function"&&s&&(l=l(e,t.t,t)),l)},getObj(n,e,t){let s=this.o[n];return typeof s=="function"&&e!=null&&(s=s(e,t.t,t)),s},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function T1(n){return n}function uS(n,e){this.t="token",this.v=n,this.tk=e}uS.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),s=n.get("format",e,this);return t&&s.length>t?s.substring(0,t)+"":s},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=jo.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),s=n.get("formatHref",t,this),l=n.get("tagName",t,e),o=this.toFormattedString(n),c={},f=n.get("className",t,e),d=n.get("target",t,e),h=n.get("rel",t,e),m=n.getObj("attributes",t,e),y=n.getObj("events",t,e);return c.href=s,f&&(c.class=f),d&&(c.target=d),h&&(c.rel=h),m&&Object.assign(c,m),{tagName:l,attributes:c,content:o,eventListeners:y}}};function Eu(n,e){class t extends uS{constructor(l,o){super(l,o),this.t=n}}for(const s in e)t.prototype[s]=e[s];return t.t=n,t}const E1=Eu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),M1=Eu("text"),cO=Eu("nl"),dc=Eu("url",{isLink:!0,toHref(n=jo.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Do&&n[1].t===ls}}),Dn=n=>new on(n);function uO({groups:n}){const e=n.domain.concat([Xc,Zc,rs,Wc,eu,tu,nu,ru,jn,Bp,xo,su,iu,lu,Fn,au,So,ou]),t=[Qc,ls,Up,Pn,Ip,xo,vo,Vp,qp,Ic,Vc,yo,bo,Bc,_c,Hc,Uc,qc,$c,Gc,Yc,Kc,Pc,Fc,Jc],s=[Xc,Qc,Zc,Wc,eu,tu,nu,ru,jn,yo,bo,xo,su,iu,lu,vo,Fn,au,So,ou],l=Dn(),o=ee(l,So);je(o,s,o),je(o,n.domain,o);const c=Dn(),f=Dn(),d=Dn();je(l,n.domain,c),je(l,n.scheme,f),je(l,n.slashscheme,d),je(c,s,o),je(c,n.domain,c);const h=ee(c,rs);ee(o,rs,h),ee(f,rs,h),ee(d,rs,h);const m=ee(o,Pn);je(m,s,o),je(m,n.domain,o);const y=Dn();je(h,n.domain,y),je(y,n.domain,y);const x=ee(y,Pn);je(x,n.domain,y);const v=Dn(E1);je(x,n.tld,v),je(x,n.utld,v),ee(h,Do,v);const k=ee(y,jn);ee(k,jn,k),je(k,n.domain,y),je(v,n.domain,y),ee(v,Pn,x),ee(v,jn,k);const E=ee(v,ls);je(E,n.numeric,E1);const M=ee(c,jn),C=ee(c,Pn);ee(M,jn,M),je(M,n.domain,c),je(C,s,o),je(C,n.domain,c);const z=Dn(dc);je(C,n.tld,z),je(C,n.utld,z),je(z,n.domain,c),je(z,s,o),ee(z,Pn,C),ee(z,jn,M),ee(z,rs,h);const q=ee(z,ls),W=Dn(dc);je(q,n.numeric,W);const G=Dn(dc),P=Dn();je(G,e,G),je(G,t,P),je(P,e,G),je(P,t,P),ee(z,Fn,G),ee(W,Fn,G);const I=ee(f,ls),ie=ee(d,ls),ce=ee(ie,Fn),De=ee(ce,Fn);je(f,n.domain,c),ee(f,Pn,C),ee(f,jn,M),je(d,n.domain,c),ee(d,Pn,C),ee(d,jn,M),je(I,n.domain,G),ee(I,Fn,G),ee(I,vo,G),je(De,n.domain,G),je(De,e,G),ee(De,Fn,G);const rt=[[yo,bo],[_c,Bc],[Hc,Uc],[Ic,Vc],[qc,$c],[Gc,Yc],[Kc,Pc],[Fc,Jc]];for(let _e=0;_e<rt.length;_e++){const[st,$e]=rt[_e],Ee=ee(G,st);ee(P,st,Ee),ee(Ee,$e,G);const U=Dn(dc);je(Ee,e,U);const Z=Dn();je(Ee,t),je(U,e,U),je(U,t,Z),je(Z,e,U),je(Z,t,Z),ee(U,$e,G),ee(Z,$e,G)}return ee(l,Do,z),ee(l,Hp,cO),{start:l,tokens:aS}}function fO(n,e,t){let s=t.length,l=0,o=[],c=[];for(;l<s;){let f=n,d=null,h=null,m=0,y=null,x=-1;for(;l<s&&!(d=f.go(t[l].t));)c.push(t[l++]);for(;l<s&&(h=d||f.go(t[l].t));)d=null,f=h,f.accepts()?(x=0,y=f):x>=0&&x++,l++,m++;if(x<0)l-=m,l<s&&(c.push(t[l]),l++);else{c.length>0&&(o.push(Th(M1,e,c)),c=[]),l-=x,m-=x;const v=y.t,k=t.slice(l-m,l);o.push(Th(v,e,k))}}return c.length>0&&o.push(Th(M1,e,c)),o}function Th(n,e,t){const s=t[0].s,l=t[t.length-1].e,o=e.slice(s,l);return new n(o,t)}const dO=typeof console<"u"&&console&&console.warn||(()=>{}),hO="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ot={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function pO(){return on.groups={},ot.scanner=null,ot.parser=null,ot.tokenQueue=[],ot.pluginQueue=[],ot.customSchemes=[],ot.initialized=!1,ot}function C1(n,e=!1){if(ot.initialized&&dO(`linkifyjs: already initialized - will not register custom scheme "${n}" ${hO}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);ot.customSchemes.push([n,e])}function mO(){ot.scanner=oO(ot.customSchemes);for(let n=0;n<ot.tokenQueue.length;n++)ot.tokenQueue[n][1]({scanner:ot.scanner});ot.parser=uO(ot.scanner.tokens);for(let n=0;n<ot.pluginQueue.length;n++)ot.pluginQueue[n][1]({scanner:ot.scanner,parser:ot.parser});return ot.initialized=!0,ot}function Gp(n){return ot.initialized||mO(),fO(ot.parser.start,n,cS(ot.scanner.start,n))}Gp.scan=cS;function fS(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const s=new $p(t),l=Gp(n),o=[];for(let c=0;c<l.length;c++){const f=l[c];f.isLink&&(!e||f.t===e)&&s.check(f)&&o.push(f.toFormattedObject(s))}return o}var Yp="[\0- -\u2029]",gO=new RegExp(Yp),yO=new RegExp(`${Yp}$`),bO=new RegExp(Yp,"g");function xO(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function vO(n){return new dt({key:new Nt("autolink"),appendTransaction:(e,t,s)=>{const l=e.some(h=>h.docChanged)&&!t.doc.eq(s.doc),o=e.some(h=>h.getMeta("preventAutolink"));if(!l||o)return;const{tr:c}=s,f=Mv(t.doc,[...e]);if(jv(f).forEach(({newRange:h})=>{const m=v2(s.doc,h,v=>v.isTextblock);let y,x;if(m.length>1)y=m[0],x=s.doc.textBetween(y.pos,y.pos+y.node.nodeSize,void 0," ");else if(m.length){const v=s.doc.textBetween(h.from,h.to," "," ");if(!yO.test(v))return;y=m[0],x=s.doc.textBetween(y.pos,h.to,void 0," ")}if(y&&x){const v=x.split(gO).filter(Boolean);if(v.length<=0)return!1;const k=v[v.length-1],E=y.pos+x.lastIndexOf(k);if(!k)return!1;const M=Gp(k).map(C=>C.toObject(n.defaultProtocol));if(!xO(M))return!1;M.filter(C=>C.isLink).map(C=>({...C,from:E+C.start+1,to:E+C.end+1})).filter(C=>s.schema.marks.code?!s.doc.rangeHasMark(C.from,C.to,s.schema.marks.code):!0).filter(C=>n.validate(C.value)).filter(C=>n.shouldAutoLink(C.value)).forEach(C=>{Dp(C.from,C.to,s.doc).some(z=>z.mark.type===n.type)||c.addMark(C.from,C.to,n.type.create({href:C.href}))})}}),!!c.steps.length)return c}})}function SO(n){return new dt({key:new Nt("handleClickLink"),props:{handleClick:(e,t,s)=>{var l,o;if(s.button!==0||!e.editable)return!1;let c=null;if(s.target instanceof HTMLAnchorElement)c=s.target;else{const d=s.target;if(!d)return!1;const h=n.editor.view.dom;c=d.closest("a"),c&&!h.contains(c)&&(c=null)}if(!c)return!1;let f=!1;if(n.enableClickSelection&&(f=n.editor.commands.extendMarkRange(n.type.name)),n.openOnClick){const d=Dv(e.state,n.type.name),h=(l=c.href)!=null?l:d.href,m=(o=c.target)!=null?o:d.target;h&&(window.open(h,m),f=!0)}return f}}})}function kO(n){return new dt({key:new Nt("handlePasteLink"),props:{handlePaste:(e,t,s)=>{const{shouldAutoLink:l}=n,{state:o}=e,{selection:c}=o,{empty:f}=c;if(f)return!1;let d="";s.content.forEach(m=>{d+=m.textContent});const h=fS(d,{defaultProtocol:n.defaultProtocol}).find(m=>m.isLink&&m.value===d);return!d||!h||l!==void 0&&!l(h.value)?!1:n.editor.commands.setMark(n.type,{href:h.href})}}})}function Vs(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(s=>{const l=typeof s=="string"?s:s.scheme;l&&t.push(l)}),!n||n.replace(bO,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var TO=si.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){C1(n);return}C1(n.scheme,n.optionalSlashes)})},onDestroy(){pO()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Vs(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(n),t=/^[a-z][a-z0-9+.-]*:/i.test(n);if(e||t&&!n.includes("@"))return!0;const l=(n.includes("@")?n.split("@").pop():n).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(l)||!/\./.test(l))}}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Vs(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Vs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ct(this.options.HTMLAttributes,n),0]:["a",Ct(this.options.HTMLAttributes,{...n,href:""}),0]},markdownTokenName:"link",parseMarkdown:(n,e)=>e.applyMark("link",e.parseInline(n.tokens||[]),{href:n.href,title:n.title||null}),renderMarkdown:(n,e)=>{var t,s,l,o;const c=(s=(t=n.attrs)==null?void 0:t.href)!=null?s:"",f=(o=(l=n.attrs)==null?void 0:l.title)!=null?o:"",d=e.renderChildren(n);return f?`[${d}](${c} "${f}")`:`[${d}](${c})`},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:s=>!!Vs(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:s=>!!Vs(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ni({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:s}=this.options,l=fS(n).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:c=>!!Vs(c,t),protocols:t,defaultProtocol:s}));l.length&&l.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(vO({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:s=>this.options.isAllowedUri(s,{defaultValidate:l=>!!Vs(l,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),n.push(SO({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(kO({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),n}}),EO=Object.defineProperty,MO=(n,e)=>{for(var t in e)EO(n,t,{get:e[t],enumerable:!0})},CO="listItem",w1="textStyle",N1=/^\s*([-+*])\s$/,dS=vn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Ct(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>n.type!=="list"||n.ordered?[]:{type:"bulletList",content:n.items?e.parseChildren(n.items):[]},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(CO,this.editor.getAttributes(w1)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=ll({find:N1,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ll({find:N1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(w1),editor:this.editor})),[n]}}),hS=vn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Ct(this.options.HTMLAttributes,n),0]},markdownTokenName:"list_item",parseMarkdown:(n,e)=>{if(n.type!=="list_item")return[];let t=[];if(n.tokens&&n.tokens.length>0)if(n.tokens.some(l=>l.type==="paragraph"))t=e.parseChildren(n.tokens);else{const l=n.tokens[0];if(l&&l.type==="text"&&l.tokens&&l.tokens.length>0){if(t=[{type:"paragraph",content:e.parseInline(l.tokens)}],n.tokens.length>1){const c=n.tokens.slice(1),f=e.parseChildren(c);t.push(...f)}}else t=e.parseChildren(n.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(n,e,t)=>Lp(n,e,s=>{var l,o;return s.parentType==="bulletList"?"- ":s.parentType==="orderedList"?`${(((o=(l=s.meta)==null?void 0:l.parentAttrs)==null?void 0:o.start)||1)+s.index}. `:"- "},t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),wO={};MO(wO,{findListItemPos:()=>Ho,getNextListDepth:()=>Kp,handleBackspace:()=>rp,handleDelete:()=>sp,hasListBefore:()=>pS,hasListItemAfter:()=>NO,hasListItemBefore:()=>mS,listItemHasSubList:()=>gS,nextListIsDeeper:()=>yS,nextListIsHigher:()=>bS});var Ho=(n,e)=>{const{$from:t}=e.selection,s=Mt(n,e.schema);let l=null,o=t.depth,c=t.pos,f=null;for(;o>0&&f===null;)l=t.node(o),l.type===s?f=o:(o-=1,c-=1);return f===null?null:{$pos:e.doc.resolve(c),depth:f}},Kp=(n,e)=>{const t=Ho(n,e);if(!t)return!1;const[,s]=O2(e,n,t.$pos.pos+4);return s},pS=(n,e,t)=>{const{$anchor:s}=n.selection,l=Math.max(0,s.pos-2),o=n.doc.resolve(l).node();return!(!o||!t.includes(o.type.name))},mS=(n,e)=>{var t;const{$anchor:s}=e.selection,l=e.doc.resolve(s.pos-2);return!(l.index()===0||((t=l.nodeBefore)==null?void 0:t.type.name)!==n)},gS=(n,e,t)=>{if(!t)return!1;const s=Mt(n,e.schema);let l=!1;return t.descendants(o=>{o.type===s&&(l=!0)}),l},rp=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!ys(n.state,e)&&pS(n.state,e,t)){const{$anchor:f}=n.state.selection,d=n.state.doc.resolve(f.before()-1),h=[];d.node().descendants((x,v)=>{x.type.name===e&&h.push({node:x,pos:v})});const m=h.at(-1);if(!m)return!1;const y=n.state.doc.resolve(d.start()+m.pos+1);return n.chain().cut({from:f.start()-1,to:f.end()+1},y.end()).joinForward().run()}if(!ys(n.state,e)||!z2(n.state))return!1;const s=Ho(e,n.state);if(!s)return!1;const o=n.state.doc.resolve(s.$pos.pos-2).node(s.depth),c=gS(e,n.state,o);return mS(e,n.state)&&!c?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},yS=(n,e)=>{const t=Kp(n,e),s=Ho(n,e);return!s||!t?!1:t>s.depth},bS=(n,e)=>{const t=Kp(n,e),s=Ho(n,e);return!s||!t?!1:t<s.depth},sp=(n,e)=>{if(!ys(n.state,e)||!R2(n.state,e))return!1;const{selection:t}=n.state,{$from:s,$to:l}=t;return!t.empty&&s.sameParent(l)?!1:yS(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():bS(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},NO=(n,e)=>{var t;const{$anchor:s}=e.selection,l=e.doc.resolve(s.pos-s.parentOffset-2);return!(l.index()===l.parent.childCount-1||((t=l.nodeAfter)==null?void 0:t.type.name)!==n)},xS=xt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&sp(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&sp(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:s})=>{n.state.schema.nodes[t]!==void 0&&rp(n,t,s)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:s})=>{n.state.schema.nodes[t]!==void 0&&rp(n,t,s)&&(e=!0)}),e}}}}),A1=/^(\s*)(\d+)\.\s+(.*)$/,AO=/^\s/;function OO(n){const e=[];let t=0,s=0;for(;t<n.length;){const l=n[t],o=l.match(A1);if(!o)break;const[,c,f,d]=o,h=c.length;let m=d,y=t+1;const x=[l];for(;y<n.length;){const v=n[y];if(v.match(A1))break;if(v.trim()==="")x.push(v),m+=`
`,y+=1;else if(v.match(AO))x.push(v),m+=`
${v.slice(h+2)}`,y+=1;else break}e.push({indent:h,number:parseInt(f,10),content:m.trim(),raw:x.join(`
`)}),s=y,t=y}return[e,s]}function vS(n,e,t){var s;const l=[];let o=0;for(;o<n.length;){const c=n[o];if(c.indent===e){const f=c.content.split(`
`),d=((s=f[0])==null?void 0:s.trim())||"",h=[];d&&h.push({type:"paragraph",raw:d,tokens:t.inlineTokens(d)});const m=f.slice(1).join(`
`).trim();if(m){const v=t.blockTokens(m);h.push(...v)}let y=o+1;const x=[];for(;y<n.length&&n[y].indent>e;)x.push(n[y]),y+=1;if(x.length>0){const v=Math.min(...x.map(E=>E.indent)),k=vS(x,v,t);h.push({type:"list",ordered:!0,start:x[0].number,items:k,raw:x.map(E=>E.raw).join(`
`)})}l.push({type:"list_item",raw:c.raw,tokens:h}),o=y}else o+=1}return l}function DO(n,e){return n.map(t=>{if(t.type!=="list_item")return e.parseChildren([t])[0];const s=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(l=>{if(l.type==="paragraph"||l.type==="list"||l.type==="blockquote"||l.type==="code")s.push(...e.parseChildren([l]));else if(l.type==="text"&&l.tokens){const o=e.parseChildren([l]);s.push({type:"paragraph",content:o})}else{const o=e.parseChildren([l]);o.length>0&&s.push(...o)}}),{type:"listItem",content:s}})}var jO="listItem",O1="textStyle",D1=/^(\d+)\.\s$/,SS=vn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Ct(this.options.HTMLAttributes,t),0]:["ol",Ct(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>{if(n.type!=="list"||!n.ordered)return[];const t=n.start||1,s=n.items?DO(n.items,e):[];return t!==1?{type:"orderedList",attrs:{start:t},content:s}:{type:"orderedList",content:s}},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:n=>{const e=n.match(/^(\s*)(\d+)\.\s+/),t=e?.index;return t!==void 0?t:-1},tokenize:(n,e,t)=>{var s;const l=n.split(`
`),[o,c]=OO(l);if(o.length===0)return;const f=vS(o,0,t);return f.length===0?void 0:{type:"list",ordered:!0,start:((s=o[0])==null?void 0:s.number)||1,items:f,raw:l.slice(0,c).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(jO,this.editor.getAttributes(O1)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=ll({find:D1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ll({find:D1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(O1)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),RO=/^\s*(\[([( |x])?\])\s$/,kS=vn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",Ct(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(n,e)=>{const t=[];if(n.tokens&&n.tokens.length>0?t.push(e.createNode("paragraph",{},e.parseInline(n.tokens))):n.text?t.push(e.createNode("paragraph",{},[e.createNode("text",{text:n.text})])):t.push(e.createNode("paragraph",{},[])),n.nestedTokens&&n.nestedTokens.length>0){const s=e.parseChildren(n.nestedTokens);t.push(...s)}return e.createNode("taskItem",{checked:n.checked||!1},t)},renderMarkdown:(n,e)=>{var t;const l=`- [${(t=n.attrs)!=null&&t.checked?"x":" "}] `;return Lp(n,e,l)},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:s})=>{const l=document.createElement("li"),o=document.createElement("label"),c=document.createElement("span"),f=document.createElement("input"),d=document.createElement("div"),h=y=>{var x,v;f.ariaLabel=((v=(x=this.options.a11y)==null?void 0:x.checkboxLabel)==null?void 0:v.call(x,y,f.checked))||`Task item checkbox for ${y.textContent||"empty task item"}`};h(n),o.contentEditable="false",f.type="checkbox",f.addEventListener("mousedown",y=>y.preventDefault()),f.addEventListener("change",y=>{if(!s.isEditable&&!this.options.onReadOnlyChecked){f.checked=!f.checked;return}const{checked:x}=y.target;s.isEditable&&typeof t=="function"&&s.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:v})=>{const k=t();if(typeof k!="number")return!1;const E=v.doc.nodeAt(k);return v.setNodeMarkup(k,void 0,{...E?.attrs,checked:x}),!0}).run(),!s.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,x)||(f.checked=!f.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([y,x])=>{l.setAttribute(y,x)}),l.dataset.checked=n.attrs.checked,f.checked=n.attrs.checked,o.append(f,c),l.append(o,d),Object.entries(e).forEach(([y,x])=>{l.setAttribute(y,x)});let m=new Set(Object.keys(e));return{dom:l,contentDOM:d,update:y=>{if(y.type!==this.type)return!1;l.dataset.checked=y.attrs.checked,f.checked=y.attrs.checked,h(y);const x=s.extensionManager.attributes,v=Oo(y,x),k=new Set(Object.keys(v)),E=this.options.HTMLAttributes;return m.forEach(M=>{k.has(M)||(M in E?l.setAttribute(M,E[M]):l.removeAttribute(M))}),Object.entries(v).forEach(([M,C])=>{C==null?M in E?l.setAttribute(M,E[M]):l.removeAttribute(M):l.setAttribute(M,C)}),m=k,!0}}}},addInputRules(){return[ll({find:RO,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),TS=vn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",Ct(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},parseMarkdown:(n,e)=>e.createNode("taskList",{},e.parseChildren(n.items||[])),renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(n){var e;const t=(e=n.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return t!==void 0?t:-1},tokenize(n,e,t){const s=o=>{const c=Ph(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:f=>({indentLevel:f[1].length,mainContent:f[4],checked:f[3].toLowerCase()==="x"}),createToken:(f,d)=>({type:"taskItem",raw:"",mainContent:f.mainContent,indentLevel:f.indentLevel,checked:f.checked,text:f.mainContent,tokens:t.inlineTokens(f.mainContent),nestedTokens:d}),customNestedParser:s},t);return c?[{type:"taskList",raw:c.raw,items:c.items}]:t.blockTokens(o)},l=Ph(n,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,c)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:t.inlineTokens(o.mainContent),nestedTokens:c}),customNestedParser:s},t);if(l)return{type:"taskList",raw:l.raw,items:l.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});xt.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(dS.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push(hS.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(xS.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(SS.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(kS.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(TS.configure(this.options.taskList)),n}});var j1="&nbsp;",zO="",LO=vn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Ct(this.options.HTMLAttributes,n),0]},parseMarkdown:(n,e)=>{const t=n.tokens||[];if(t.length===1&&t[0].type==="image")return e.parseChildren([t[0]]);const s=e.parseInline(t);return s.length===1&&s[0].type==="text"&&(s[0].text===j1||s[0].text===zO)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,s)},renderMarkdown:(n,e)=>{if(!n)return"";const t=Array.isArray(n.content)?n.content:[];return t.length===0?j1:e.renderChildren(t)},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),_O=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,BO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,HO=si.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Ct(this.options.HTMLAttributes,n),0]},markdownTokenName:"del",parseMarkdown:(n,e)=>e.applyMark("strike",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`~~${e.renderChildren(n)}~~`,addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[il({find:_O,type:this.type})]},addPasteRules(){return[ni({find:BO,type:this.type})]}}),UO=vn.create({name:"text",group:"inline",parseMarkdown:n=>({type:"text",text:n.text||""}),renderMarkdown:n=>n.text||""}),IO=si.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",Ct(this.options.HTMLAttributes,n),0]},parseMarkdown(n,e){return e.applyMark(this.name||"underline",e.parseInline(n.tokens||[]))},renderMarkdown(n,e){return`++${e.renderChildren(n)}++`},markdownTokenizer:{name:"underline",level:"inline",start(n){return n.indexOf("++")},tokenize(n,e,t){const l=/^(\+\+)([\s\S]+?)(\+\+)/.exec(n);if(!l)return;const o=l[2].trim();return{type:"underline",raw:l[0],text:o,tokens:t.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function VO(n={}){return new dt({view(e){return new qO(e,n)}})}class qO{constructor(e,t){var s;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(s=t.width)!==null&&s!==void 0?s:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(l=>{let o=c=>{this[l](c)};return e.dom.addEventListener(l,o),{name:l,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,s,l=this.editorView.dom,o=l.getBoundingClientRect(),c=o.width/l.offsetWidth,f=o.height/l.offsetHeight;if(t){let y=e.nodeBefore,x=e.nodeAfter;if(y||x){let v=this.editorView.nodeDOM(this.cursorPos-(y?y.nodeSize:0));if(v){let k=v.getBoundingClientRect(),E=y?k.bottom:k.top;y&&x&&(E=(E+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let M=this.width/2*f;s={left:k.left,right:k.right,top:E-M,bottom:E+M}}}}if(!s){let y=this.editorView.coordsAtPos(this.cursorPos),x=this.width/2*c;s={left:y.left-x,right:y.left+x,top:y.top,bottom:y.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,m;if(!d||d==document.body&&getComputedStyle(d).position=="static")h=-pageXOffset,m=-pageYOffset;else{let y=d.getBoundingClientRect(),x=y.width/d.offsetWidth,v=y.height/d.offsetHeight;h=y.left-d.scrollLeft*x,m=y.top-d.scrollTop*v}this.element.style.left=(s.left-h)/c+"px",this.element.style.top=(s.top-m)/f+"px",this.element.style.width=(s.right-s.left)/c+"px",this.element.style.height=(s.bottom-s.top)/f+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),s=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),l=s&&s.type.spec.disableDropCursor,o=typeof l=="function"?l(this.editorView,t,e):l;if(t&&!o){let c=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let f=gx(this.editorView.state.doc,c,this.editorView.dragging.slice);f!=null&&(c=f)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class gt extends Re{constructor(e){super(e,e)}map(e,t){let s=e.resolve(t.map(this.head));return gt.valid(s)?new gt(s):Re.near(s)}content(){return oe.empty}eq(e){return e instanceof gt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new gt(e.resolve(t.pos))}getBookmark(){return new Pp(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!$O(e)||!GO(e))return!1;let s=t.type.spec.allowGapCursor;if(s!=null)return s;let l=t.contentMatchAt(e.index()).defaultType;return l&&l.isTextblock}static findGapCursorFrom(e,t,s=!1){e:for(;;){if(!s&&gt.valid(e))return e;let l=e.pos,o=null;for(let c=e.depth;;c--){let f=e.node(c);if(t>0?e.indexAfter(c)<f.childCount:e.index(c)>0){o=f.child(t>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;l+=t;let d=e.doc.resolve(l);if(gt.valid(d))return d}for(;;){let c=t>0?o.firstChild:o.lastChild;if(!c){if(o.isAtom&&!o.isText&&!xe.isSelectable(o)){e=e.doc.resolve(l+o.nodeSize*t),s=!1;continue e}break}o=c,l+=t;let f=e.doc.resolve(l);if(gt.valid(f))return f}return null}}}gt.prototype.visible=!1;gt.findFrom=gt.findGapCursorFrom;Re.jsonID("gapcursor",gt);class Pp{constructor(e){this.pos=e}map(e){return new Pp(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return gt.valid(t)?new gt(t):Re.near(t)}}function ES(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function $O(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),s=n.node(e);if(t==0){if(s.type.spec.isolating)return!0;continue}for(let l=s.child(t-1);;l=l.lastChild){if(l.childCount==0&&!l.inlineContent||ES(l.type))return!0;if(l.inlineContent)return!1}}return!0}function GO(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),s=n.node(e);if(t==s.childCount){if(s.type.spec.isolating)return!0;continue}for(let l=s.child(t);;l=l.firstChild){if(l.childCount==0&&!l.inlineContent||ES(l.type))return!0;if(l.inlineContent)return!1}}return!0}function YO(){return new dt({props:{decorations:JO,createSelectionBetween(n,e,t){return e.pos==t.pos&&gt.valid(t)?new gt(t):null},handleClick:PO,handleKeyDown:KO,handleDOMEvents:{beforeinput:FO}}})}const KO=yv({ArrowLeft:hc("horiz",-1),ArrowRight:hc("horiz",1),ArrowUp:hc("vert",-1),ArrowDown:hc("vert",1)});function hc(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(s,l,o){let c=s.selection,f=e>0?c.$to:c.$from,d=c.empty;if(c instanceof ke){if(!o.endOfTextblock(t)||f.depth==0)return!1;d=!1,f=s.doc.resolve(e>0?f.after():f.before())}let h=gt.findGapCursorFrom(f,e,d);return h?(l&&l(s.tr.setSelection(new gt(h))),!0):!1}}function PO(n,e,t){if(!n||!n.editable)return!1;let s=n.state.doc.resolve(e);if(!gt.valid(s))return!1;let l=n.posAtCoords({left:t.clientX,top:t.clientY});return l&&l.inside>-1&&xe.isSelectable(n.state.doc.nodeAt(l.inside))?!1:(n.dispatch(n.state.tr.setSelection(new gt(s))),!0)}function FO(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof gt))return!1;let{$from:t}=n.state.selection,s=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!s)return!1;let l=Q.empty;for(let c=s.length-1;c>=0;c--)l=Q.from(s[c].createAndFill(null,l));let o=n.state.tr.replace(t.pos,t.pos,new oe(l,0,0));return o.setSelection(ke.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function JO(n){if(!(n.selection instanceof gt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ft.create(n.doc,[Xt.widget(n.selection.head,e,{key:"gapcursor"})])}var cu=200,Rt=function(){};Rt.prototype.append=function(e){return e.length?(e=Rt.from(e),!this.length&&e||e.length<cu&&this.leafAppend(e)||this.length<cu&&e.leafPrepend(this)||this.appendInner(e)):this};Rt.prototype.prepend=function(e){return e.length?Rt.from(e).append(this):this};Rt.prototype.appendInner=function(e){return new XO(this,e)};Rt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Rt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Rt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Rt.prototype.forEach=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length),t<=s?this.forEachInner(e,t,s,0):this.forEachInvertedInner(e,t,s,0)};Rt.prototype.map=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length);var l=[];return this.forEach(function(o,c){return l.push(e(o,c))},t,s),l};Rt.from=function(e){return e instanceof Rt?e:e&&e.length?new MS(e):Rt.empty};var MS=(function(n){function e(s){n.call(this),this.values=s}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(l,o){return l==0&&o==this.length?this:new e(this.values.slice(l,o))},e.prototype.getInner=function(l){return this.values[l]},e.prototype.forEachInner=function(l,o,c,f){for(var d=o;d<c;d++)if(l(this.values[d],f+d)===!1)return!1},e.prototype.forEachInvertedInner=function(l,o,c,f){for(var d=o-1;d>=c;d--)if(l(this.values[d],f+d)===!1)return!1},e.prototype.leafAppend=function(l){if(this.length+l.length<=cu)return new e(this.values.concat(l.flatten()))},e.prototype.leafPrepend=function(l){if(this.length+l.length<=cu)return new e(l.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e})(Rt);Rt.empty=new MS([]);var XO=(function(n){function e(t,s){n.call(this),this.left=t,this.right=s,this.length=t.length+s.length,this.depth=Math.max(t.depth,s.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(s){return s<this.left.length?this.left.get(s):this.right.get(s-this.left.length)},e.prototype.forEachInner=function(s,l,o,c){var f=this.left.length;if(l<f&&this.left.forEachInner(s,l,Math.min(o,f),c)===!1||o>f&&this.right.forEachInner(s,Math.max(l-f,0),Math.min(this.length,o)-f,c+f)===!1)return!1},e.prototype.forEachInvertedInner=function(s,l,o,c){var f=this.left.length;if(l>f&&this.right.forEachInvertedInner(s,l-f,Math.max(o,f)-f,c+f)===!1||o<f&&this.left.forEachInvertedInner(s,Math.min(l,f),o,c)===!1)return!1},e.prototype.sliceInner=function(s,l){if(s==0&&l==this.length)return this;var o=this.left.length;return l<=o?this.left.slice(s,l):s>=o?this.right.slice(s-o,l-o):this.left.slice(s,o).append(this.right.slice(0,l-o))},e.prototype.leafAppend=function(s){var l=this.right.leafAppend(s);if(l)return new e(this.left,l)},e.prototype.leafPrepend=function(s){var l=this.left.leafPrepend(s);if(l)return new e(l,this.right)},e.prototype.appendInner=function(s){return this.left.depth>=Math.max(this.right.depth,s.depth)+1?new e(this.left,new e(this.right,s)):new e(this,s)},e})(Rt);const QO=500;class In{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}let l,o;t&&(l=this.remapping(s,this.items.length),o=l.maps.length);let c=e.tr,f,d,h=[],m=[];return this.items.forEach((y,x)=>{if(!y.step){l||(l=this.remapping(s,x+1),o=l.maps.length),o--,m.push(y);return}if(l){m.push(new Jn(y.map));let v=y.step.map(l.slice(o)),k;v&&c.maybeStep(v).doc&&(k=c.mapping.maps[c.mapping.maps.length-1],h.push(new Jn(k,void 0,void 0,h.length+m.length))),o--,k&&l.appendMap(k,o)}else c.maybeStep(y.step);if(y.selection)return f=l?y.selection.map(l.slice(o)):y.selection,d=new In(this.items.slice(0,s).append(m.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:c,selection:f}}addTransform(e,t,s,l){let o=[],c=this.eventCount,f=this.items,d=!l&&f.length?f.get(f.length-1):null;for(let m=0;m<e.steps.length;m++){let y=e.steps[m].invert(e.docs[m]),x=new Jn(e.mapping.maps[m],y,t),v;(v=d&&d.merge(x))&&(x=v,m?o.pop():f=f.slice(0,f.length-1)),o.push(x),t&&(c++,t=void 0),l||(d=x)}let h=c-s.depth;return h>WO&&(f=ZO(f,h),c-=h),new In(f.append(o),c)}remapping(e,t){let s=new Eo;return this.items.forEach((l,o)=>{let c=l.mirrorOffset!=null&&o-l.mirrorOffset>=e?s.maps.length-l.mirrorOffset:void 0;s.appendMap(l.map,c)},e,t),s}addMaps(e){return this.eventCount==0?this:new In(this.items.append(e.map(t=>new Jn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let s=[],l=Math.max(0,this.items.length-t),o=e.mapping,c=e.steps.length,f=this.eventCount;this.items.forEach(x=>{x.selection&&f--},l);let d=t;this.items.forEach(x=>{let v=o.getMirror(--d);if(v==null)return;c=Math.min(c,v);let k=o.maps[v];if(x.step){let E=e.steps[v].invert(e.docs[v]),M=x.selection&&x.selection.map(o.slice(d+1,v));M&&f++,s.push(new Jn(k,E,M))}else s.push(new Jn(k))},l);let h=[];for(let x=t;x<c;x++)h.push(new Jn(o.maps[x]));let m=this.items.slice(0,l).append(h).append(s),y=new In(m,f);return y.emptyItemCount()>QO&&(y=y.compress(this.items.length-s.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),s=t.maps.length,l=[],o=0;return this.items.forEach((c,f)=>{if(f>=e)l.push(c),c.selection&&o++;else if(c.step){let d=c.step.map(t.slice(s)),h=d&&d.getMap();if(s--,h&&t.appendMap(h,s),d){let m=c.selection&&c.selection.map(t.slice(s));m&&o++;let y=new Jn(h.invert(),d,m),x,v=l.length-1;(x=l.length&&l[v].merge(y))?l[v]=x:l.push(y)}}else c.map&&s--},this.items.length,0),new In(Rt.from(l.reverse()),o)}}In.empty=new In(Rt.empty,0);function ZO(n,e){let t;return n.forEach((s,l)=>{if(s.selection&&e--==0)return t=l,!1}),n.slice(t)}class Jn{constructor(e,t,s,l){this.map=e,this.step=t,this.selection=s,this.mirrorOffset=l}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Jn(t.getMap().invert(),t,this.selection)}}}class ss{constructor(e,t,s,l,o){this.done=e,this.undone=t,this.prevRanges=s,this.prevTime=l,this.prevComposition=o}}const WO=20;function e3(n,e,t,s){let l=t.getMeta(Qs),o;if(l)return l.historyState;t.getMeta(r3)&&(n=new ss(n.done,n.undone,null,0,-1));let c=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(c&&c.getMeta(Qs))return c.getMeta(Qs).redo?new ss(n.done.addTransform(t,void 0,s,bc(e)),n.undone,R1(t.mapping.maps),n.prevTime,n.prevComposition):new ss(n.done,n.undone.addTransform(t,void 0,s,bc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let f=t.getMeta("composition"),d=n.prevTime==0||!c&&n.prevComposition!=f&&(n.prevTime<(t.time||0)-s.newGroupDelay||!t3(t,n.prevRanges)),h=c?Eh(n.prevRanges,t.mapping):R1(t.mapping.maps);return new ss(n.done.addTransform(t,d?e.selection.getBookmark():void 0,s,bc(e)),In.empty,h,t.time,f??n.prevComposition)}else return(o=t.getMeta("rebased"))?new ss(n.done.rebased(t,o),n.undone.rebased(t,o),Eh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new ss(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Eh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function t3(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((s,l)=>{for(let o=0;o<e.length;o+=2)s<=e[o+1]&&l>=e[o]&&(t=!0)}),t}function R1(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((s,l,o,c)=>e.push(o,c));return e}function Eh(n,e){if(!n)return null;let t=[];for(let s=0;s<n.length;s+=2){let l=e.map(n[s],1),o=e.map(n[s+1],-1);l<=o&&t.push(l,o)}return t}function n3(n,e,t){let s=bc(e),l=Qs.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,s);if(!o)return null;let c=o.selection.resolve(o.transform.doc),f=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),l,s),d=new ss(t?f:o.remaining,t?o.remaining:f,null,0,-1);return o.transform.setSelection(c).setMeta(Qs,{redo:t,historyState:d})}let Mh=!1,z1=null;function bc(n){let e=n.plugins;if(z1!=e){Mh=!1,z1=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Mh=!0;break}}return Mh}const Qs=new Nt("history"),r3=new Nt("closeHistory");function s3(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new dt({key:Qs,state:{init(){return new ss(In.empty,In.empty,null,0,-1)},apply(e,t,s){return e3(t,s,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let s=t.inputType,l=s=="historyUndo"?wS:s=="historyRedo"?NS:null;return!l||!e.editable?!1:(t.preventDefault(),l(e.state,e.dispatch))}}}})}function CS(n,e){return(t,s)=>{let l=Qs.getState(t);if(!l||(n?l.undone:l.done).eventCount==0)return!1;if(s){let o=n3(l,t,n);o&&s(e?o.scrollIntoView():o)}return!0}}const wS=CS(!1,!0),NS=CS(!0,!0);xt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=n?.node||this.editor.state.doc;if((n?.mode||this.options.mode)==="textSize"){const s=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(s)}return e.nodeSize},this.storage.words=n=>{const e=n?.node||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new dt({key:new Nt("characterCount"),appendTransaction:(e,t,s)=>{if(n)return;const l=this.options.limit;if(l==null||l===0){n=!0;return}const o=this.storage.characters({node:s.doc});if(o>l){const c=o-l,f=0,d=c;console.warn(`[CharacterCount] Initial content exceeded limit of ${l} characters. Content was automatically trimmed.`);const h=s.tr.deleteRange(f,d);return n=!0,h}n=!0},filterTransaction:(e,t)=>{const s=this.options.limit;if(!e.docChanged||s===0||s===null||s===void 0)return!0;const l=this.storage.characters({node:t.doc}),o=this.storage.characters({node:e.doc});if(o<=s||l>s&&o>s&&o<=l)return!0;if(l>s&&o>s&&o>l||!e.getMeta("paste"))return!1;const f=e.selection.$head.pos,d=o-s,h=f-d,m=f;return e.deleteRange(h,m),!(this.storage.characters({node:e.doc})>s)}})]}});var i3=xt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[VO(this.options)]}});xt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new dt({key:new Nt("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:s}=this.editor,{anchor:l}=e,o=[];if(!t||!s)return ft.create(n,[]);let c=0;this.options.mode==="deepest"&&n.descendants((d,h)=>{if(d.isText)return;if(!(l>=h&&l<=h+d.nodeSize-1))return!1;c+=1});let f=0;return n.descendants((d,h)=>{if(d.isText||!(l>=h&&l<=h+d.nodeSize-1))return!1;if(f+=1,this.options.mode==="deepest"&&c-f>0||this.options.mode==="shallowest"&&f>1)return this.options.mode==="deepest";o.push(Xt.node(h,h+d.nodeSize,{class:this.options.className}))}),ft.create(n,o)}}})]}});var l3=xt.create({name:"gapCursor",addProseMirrorPlugins(){return[YO()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Xe(me(n,"allowGapCursor",t)))!=null?e:null}}}),L1="placeholder";function o3(n){return n.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}xt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:L1,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const n=this.options.dataAttribute?`data-${o3(this.options.dataAttribute)}`:`data-${L1}`;return[new dt({key:new Nt("placeholder"),props:{decorations:({doc:e,selection:t})=>{const s=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:l}=t,o=[];if(!s)return null;const c=this.editor.isEmpty;return e.descendants((f,d)=>{const h=l>=d&&l<=d+f.nodeSize,m=!f.isLeaf&&Su(f);if((h||!this.options.showOnlyCurrent)&&m){const y=[this.options.emptyNodeClass];c&&y.push(this.options.emptyEditorClass);const x=Xt.node(d,d+f.nodeSize,{class:y.join(" "),[n]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:f,pos:d,hasAnchor:h}):this.options.placeholder});o.push(x)}return this.options.includeChildren}),ft.create(e,o)}}})]}});xt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:e}=this;return[new dt({key:new Nt("selection"),props:{decorations(t){return t.selection.empty||n.isFocused||!n.isEditable||Rv(t.selection)||n.view.dragging?null:ft.create(t.doc,[Xt.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function _1({types:n,node:e}){return e&&Array.isArray(n)&&n.includes(e.type)||e?.type===n}var a3=xt.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var n;const e=new Nt(this.name),t=this.options.node||((n=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:n.name)||"paragraph",s=Object.entries(this.editor.schema.nodes).map(([,l])=>l).filter(l=>(this.options.notAfter||[]).concat(t).includes(l.name));return[new dt({key:e,appendTransaction:(l,o,c)=>{const{doc:f,tr:d,schema:h}=c,m=e.getState(c),y=f.content.size,x=h.nodes[t];if(m)return d.insert(y,x.create())},state:{init:(l,o)=>{const c=o.tr.doc.lastChild;return!_1({node:c,types:s})},apply:(l,o)=>{if(!l.docChanged||l.getMeta("__uniqueIDTransaction"))return o;const c=l.doc.lastChild;return!_1({node:c,types:s})}}})]}}),c3=xt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>wS(n,e),redo:()=>({state:n,dispatch:e})=>NS(n,e)}},addProseMirrorPlugins(){return[s3(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),u3=xt.create({name:"starterKit",addExtensions(){var n,e,t,s;const l=[];return this.options.bold!==!1&&l.push(BA.configure(this.options.bold)),this.options.blockquote!==!1&&l.push(jA.configure(this.options.blockquote)),this.options.bulletList!==!1&&l.push(dS.configure(this.options.bulletList)),this.options.code!==!1&&l.push(IA.configure(this.options.code)),this.options.codeBlock!==!1&&l.push($A.configure(this.options.codeBlock)),this.options.document!==!1&&l.push(GA.configure(this.options.document)),this.options.dropcursor!==!1&&l.push(i3.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&l.push(l3.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&l.push(YA.configure(this.options.hardBreak)),this.options.heading!==!1&&l.push(KA.configure(this.options.heading)),this.options.undoRedo!==!1&&l.push(c3.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&l.push(PA.configure(this.options.horizontalRule)),this.options.italic!==!1&&l.push(ZA.configure(this.options.italic)),this.options.listItem!==!1&&l.push(hS.configure(this.options.listItem)),this.options.listKeymap!==!1&&l.push(xS.configure((n=this.options)==null?void 0:n.listKeymap)),this.options.link!==!1&&l.push(TO.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&l.push(SS.configure(this.options.orderedList)),this.options.paragraph!==!1&&l.push(LO.configure(this.options.paragraph)),this.options.strike!==!1&&l.push(HO.configure(this.options.strike)),this.options.text!==!1&&l.push(UO.configure(this.options.text)),this.options.underline!==!1&&l.push(IO.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&l.push(a3.configure((s=this.options)==null?void 0:s.trailingNode)),l}}),f3=u3,d3=TS,h3=kS;const es=({onClick:n,active:e,title:t,children:s})=>b.jsx("button",{type:"button",onClick:n,title:t,className:`
      w-8 h-8 flex items-center justify-center rounded
      text-sm font-bold transition-colors cursor-pointer
      ${e?"bg-[var(--color-border-main)] text-[var(--color-bg-card)]":"text-[var(--color-text-muted)] hover:text-[var(--color-text-main)] hover:bg-[var(--color-bg-white)]"}
    `,children:s}),p3=({editor:n,isFullscreen:e,onToggleFullscreen:t})=>n?b.jsxs("div",{className:"flex gap-1 p-2 border-b border-[var(--color-border-gray-300)] bg-[var(--color-bg-gray-50)]",children:[b.jsx(es,{onClick:()=>n.chain().focus().toggleHeading({level:1}).run(),active:n.isActive("heading",{level:1}),title:"Heading (Ctrl+Alt+1)",children:"H"}),b.jsx(es,{onClick:()=>n.chain().focus().toggleBold().run(),active:n.isActive("bold"),title:"Bold (Ctrl+B)",children:"B"}),b.jsx(es,{onClick:()=>n.chain().focus().toggleItalic().run(),active:n.isActive("italic"),title:"Italic (Ctrl+I)",children:b.jsx("span",{className:"italic",children:"I"})}),b.jsx("div",{className:"w-px bg-[var(--color-border-gray-300)] mx-1"}),b.jsx(es,{onClick:()=>n.chain().focus().toggleBulletList().run(),active:n.isActive("bulletList"),title:"Bullet List",children:""}),b.jsx(es,{onClick:()=>n.chain().focus().toggleOrderedList().run(),active:n.isActive("orderedList"),title:"Numbered List",children:"1."}),b.jsx(es,{onClick:()=>n.chain().focus().toggleTaskList().run(),active:n.isActive("taskList"),title:"Checkbox List",children:""}),b.jsx("div",{className:"w-px bg-[var(--color-border-gray-300)] mx-1"}),b.jsx(es,{onClick:()=>n.chain().focus().setHorizontalRule().run(),active:!1,title:"Horizontal Rule",children:""}),b.jsx("div",{className:"flex-1"}),b.jsx(es,{onClick:t,active:e,title:e?"Exit Fullscreen (Esc)":"Fullscreen",children:e?"":""})]}):null,m3=({value:n,onChange:e})=>{const[t,s]=J.useState(!1),l=wA({extensions:[f3.configure({heading:{levels:[1]},codeBlock:!1,code:!1,blockquote:!1,strike:!1}),d3,h3.configure({nested:!1})],content:n?B1(n):"",onUpdate:({editor:c})=>{const f=H1(c.getHTML());e(f)},editorProps:{attributes:{class:"prose prose-sm max-w-none p-3 min-h-[120px] focus:outline-none font-mono text-sm"}}});Xn.useEffect(()=>{l&&n!==void 0&&H1(l.getHTML())!==n&&l.commands.setContent(B1(n))},[n,l]),Xn.useEffect(()=>{const c=f=>{f.key==="Escape"&&t&&s(!1)};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[t]);const o=t?"fixed inset-0 z-50 flex flex-col bg-[var(--color-bg-base)]":"border-2 border-[var(--color-border-gray-300)] rounded-lg overflow-hidden bg-[var(--color-bg-input)] focus-within:border-[var(--color-border-main)] transition-colors";return b.jsxs("div",{className:o,children:[b.jsx(p3,{editor:l,isFullscreen:t,onToggleFullscreen:()=>s(!t)}),b.jsx("div",{className:t?"flex-1 overflow-auto":"",children:b.jsx(Zv,{editor:l})}),b.jsx("style",{children:`
        .ProseMirror {
          min-height: ${t?"calc(100vh - 60px)":"120px"};
          font-family: 'IBM Plex Mono', monospace;
          font-size: 14px;
          color: var(--color-text-main);
        }
        .ProseMirror:focus {
          outline: none;
        }
        .ProseMirror p {
          margin: 0.5em 0;
        }
        .ProseMirror h1 {
          font-size: 1.25em;
          font-weight: 700;
          margin: 0.75em 0 0.5em;
        }
        .ProseMirror strong {
          font-weight: 700;
        }
        .ProseMirror em {
          font-style: italic;
        }
        .ProseMirror ul, .ProseMirror.prose ul {
          list-style-type: disc !important;
          list-style-position: outside !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
        }
        .ProseMirror ol, .ProseMirror.prose ol {
          list-style-type: decimal !important;
          list-style-position: outside !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
        }
        .ProseMirror li, .ProseMirror.prose li {
          margin: 0.25em 0 !important;
          display: list-item !important;
        }
        .ProseMirror hr {
          border: none;
          border-top: 2px dashed var(--color-border-gray-400);
          margin: 1em 0;
        }
        /* Task List Styles */
        .ProseMirror ul[data-type="taskList"] {
          list-style: none !important;
          padding-left: 0 !important;
        }
        .ProseMirror ul[data-type="taskList"] li {
          display: flex !important;
          align-items: center;
          gap: 0.5em;
        }
        .ProseMirror ul[data-type="taskList"] li > label {
          flex-shrink: 0;
          margin-top: 0.15em;
        }
        .ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"] {
          width: 1em;
          height: 1em;
          cursor: pointer;
        }
        .ProseMirror ul[data-type="taskList"] li > div {
          flex: 1;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          color: var(--color-text-muted);
          pointer-events: none;
          float: left;
          height: 0;
        }
      `})]})};function B1(n){return n?n.replace(/^# (.+)$/gm,"<h1>$1</h1>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(new RegExp("(?<!\\*)\\*([^*]+)\\*(?!\\*)","g"),"<em>$1</em>").replace(/_(.+?)_/g,"<em>$1</em>").replace(/^---$/gm,"<hr>").replace(/^- \[x\] (.+)$/gm,"<taskitem checked>$1</taskitem>").replace(/^- \[ \] (.+)$/gm,"<taskitem>$1</taskitem>").replace(/^[*-] (.+)$/gm,"<li>$1</li>").replace(/^\d+\. (.+)$/gm,"<oli>$1</oli>").replace(/(<taskitem[^>]*>.*<\/taskitem>\n?)+/g,'<ul data-type="taskList">$&</ul>').replace(/<taskitem checked>/g,'<li data-type="taskItem" data-checked="true"><label><input type="checkbox" checked></label><div><p>').replace(/<taskitem>/g,'<li data-type="taskItem" data-checked="false"><label><input type="checkbox"></label><div><p>').replace(/<\/taskitem>/g,"</p></div></li>").replace(/(<li>.*<\/li>\n?)+/g,"<ul>$&</ul>").replace(/(<oli>.*<\/oli>\n?)+/g,"<ol>$&</ol>").replace(/<\/?oli>/g,t=>t.replace("oli","li")).split(`
`).map(t=>t.match(/^<(h1|ul|ol|hr|li)/)?t:t.trim()===""?"":t.match(/^<[a-z]/)?t:`<p>${t}</p>`).join(`
`):""}function H1(n){if(!n)return"";const e=document.createElement("div");e.innerHTML=n;let t="";const s=l=>{if(l.nodeType===Node.TEXT_NODE)return l.textContent;if(l.nodeType!==Node.ELEMENT_NODE)return"";const o=Array.from(l.childNodes).map(s).join("");switch(l.tagName.toLowerCase()){case"h1":return`# ${o}
`;case"p":return`${o}
`;case"strong":return`**${o}**`;case"em":return`*${o}*`;case"ul":return o;case"ol":return o;case"li":const c=l.parentElement;if(l.dataset?.type==="taskItem"||l.getAttribute("data-type")==="taskItem"){const d=l.dataset?.checked==="true"||l.getAttribute("data-checked")==="true"?"[x]":"[ ]",h=l.querySelector("div"),m=h?h.textContent.trim():o.trim();return`- ${d} ${m}
`}return c&&c.tagName.toLowerCase()==="ol"?`${Array.from(c.children).indexOf(l)+1}. ${o}
`:`- ${o}
`;case"hr":return`---
`;case"br":return`
`;case"label":return"";case"input":return"";default:return o}};return t=Array.from(e.childNodes).map(s).join(""),t.replace(/\n{3,}/g,`

`).trim()}const g3=({schema:n,uiSchema:e={},formData:t={},onChange:s,moduleId:l,onActionComplete:o})=>n?b.jsx("div",{className:"space-y-4",children:b.jsx(ip,{schema:n,uiSchema:e,value:t,onChange:c=>s(c),path:[],rootValue:t,onRootChange:s,moduleId:l,onActionComplete:o})}):null,ip=({schema:n,uiSchema:e,value:t,onChange:s,path:l,label:o,required:c,compact:f,rootValue:d,onRootChange:h,moduleId:m,onActionComplete:y})=>{const x=n.type,v=n.title||o,k=n.description,E=e?.["ui:options"]||{},M=e?.["ui:widget"];if(M==="location-search")return b.jsxs("div",{className:"mb-4",children:[v&&b.jsx("label",{className:qe.label,children:v}),b.jsx(V1,{value:t,onChange:s}),k&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});if(M==="key-value-list")return b.jsxs("div",{className:"mb-4",children:[v&&b.jsx("label",{className:qe.label,children:v}),b.jsx(hE,{value:t,onChange:s}),k&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});if(M==="preset-select"){const C=E.presets||{};return b.jsxs("div",{className:"mb-4",children:[v&&b.jsx("label",{className:qe.label,children:v}),b.jsx(mE,{value:t,onChange:s,presets:C,onPresetSelect:z=>{h&&d&&h({...d,...z})}}),k&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]})}if(M==="webhook-test")return b.jsx("div",{className:"mb-4",children:b.jsx(bE,{formData:d})});if(M==="action-button")return b.jsx(xE,{schema:n,uiSchema:e,moduleId:m,onActionComplete:y});if(M==="richtext")return b.jsxs("div",{className:"mb-4",children:[v&&b.jsx("label",{className:qe.label,children:v}),b.jsx(m3,{value:t,onChange:s}),k&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});if(x==="object"){const C=E.layout==="inline"||E.layout==="compact";return b.jsxs("div",{className:C?"flex flex-wrap gap-x-4 gap-y-2 items-end":"space-y-3",children:[v&&!C&&b.jsx("h3",{className:"font-bold text-sm text-zinc-700 uppercase tracking-wider",children:v}),k&&!C&&b.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:k}),Object.entries(n.properties||{}).map(([z,q])=>{const W=e?.[z]||{},G=t?.[z],P=C||W["ui:options"]?.compact,I=W["ui:showWhen"];return I&&t?.[I.field]!==I.value?null:b.jsx("div",{className:C?"flex-1 min-w-[120px]":"",children:b.jsx(ip,{schema:q,uiSchema:W,value:G,onChange:ie=>{const ce={...t,[z]:ie};s(ce)},path:[...l,z],label:q.title||z,required:n.required&&n.required.includes(z),compact:P,rootValue:d,onRootChange:h,moduleId:m,onActionComplete:y})},z)})]})}if(x==="array"){const C=t||[],z=n.items,q=e?.items||{};if(M==="checklist")return b.jsxs("div",{className:"space-y-2",children:[v&&b.jsx("label",{className:qe.label,children:v}),b.jsx(pE,{value:C,onChange:s}),k&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]});const W=()=>{const I=AS(z);s([...C,I])},G=I=>{const ie=[...C];ie.splice(I,1),s(ie)},P=(I,ie)=>{const ce=[...C];ce[I]=ie,s(ce)};return b.jsxs("div",{className:"space-y-2",children:[b.jsx("div",{className:"flex justify-between items-center",children:v&&b.jsx("label",{className:qe.label,children:v})}),k&&b.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:k}),b.jsx("div",{className:"space-y-2",children:C.map((I,ie)=>b.jsxs("div",{className:"flex gap-2 items-center p-3 border border-zinc-200 rounded-lg bg-white relative group",children:[b.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-zinc-100 flex items-center justify-center text-xs font-mono font-bold text-zinc-500",children:ie+1}),b.jsx("div",{className:"flex-1",children:b.jsx(ip,{schema:z,uiSchema:q,value:I,onChange:ce=>P(ie,ce),path:[...l,ie],moduleId:m})}),b.jsx("button",{type:"button",onClick:()=>G(ie),className:"text-gray-400 hover:text-red-500 transition-colors p-1",title:"Remove Item",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 256 256",children:b.jsx("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"})})})]},ie))}),(!n.maxItems||C.length<n.maxItems)&&b.jsxs("button",{type:"button",onClick:W,className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs font-bold tracking-wider cursor-pointer",children:["+ ",e?.["ui:addLabel"]||"Add Item"]}),n.maxItems&&C.length>=n.maxItems&&b.jsxs("div",{className:"text-center text-xs text-zinc-400 py-2",children:["Maximum limit of ",n.maxItems," reached"]})]})}return x==="boolean"?b.jsxs("div",{className:`flex items-center gap-2 ${f?"py-0":"py-1"}`,children:[b.jsx("input",{type:"checkbox",checked:t||!1,onChange:C=>s(C.target.checked),className:"w-4 h-4 text-black rounded border-2 border-zinc-300 focus:ring-0 focus:ring-offset-0",style:{accentColor:"black"}}),b.jsx("label",{className:`text-sm text-black select-none cursor-pointer ${f?"font-medium":""}`,onClick:()=>s(!t),children:v})]}):b.jsxs("div",{className:f?"mb-0":"mb-2",children:[v&&b.jsxs("div",{className:"flex justify-between items-center mb-1",children:[b.jsxs("label",{className:f?qe.labelSmall:qe.label,children:[v," ",c&&b.jsx("span",{className:"text-red-500 ml-1",title:"Required",children:"*"})]}),e?.["ui:randomExample"]&&b.jsx("button",{type:"button",onClick:()=>{const C=e["ui:randomExample"];if(Array.isArray(C)&&C.length>0){const z=C.filter(q=>q!==t);if(z.length===0){const q=C[Math.floor(Math.random()*C.length)];s(q)}else{const q=z[Math.floor(Math.random()*z.length)];s(q)}}},className:"text-xs text-zinc-400 hover:text-black hover:underline cursor-pointer transition-colors",title:"Insert random example",children:"Generate Example"})]}),n.enum?b.jsxs("select",{value:t??"",onChange:C=>s(C.target.value),className:f?qe.inputSmall:qe.input,children:[!c&&b.jsx("option",{value:"",children:"Select..."}),n.enum.map(C=>b.jsx("option",{value:C,children:C},C))]}):M==="textarea"?b.jsx("textarea",{value:t||"",onChange:C=>s(C.target.value),className:`${f?qe.inputSmall:qe.input} min-h-[100px] text-sm`,placeholder:e?.["ui:placeholder"],rows:E.rows||3}):b.jsx("input",{type:M==="password"?"password":x==="number"||x==="integer"?"number":"text",value:t??"",onChange:C=>{const z=C.target.value;s(x==="number"||x==="integer"?z===""?void 0:parseFloat(z):z)},className:f?qe.inputSmall:qe.input,placeholder:e?.["ui:placeholder"]}),k&&!f&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:k})]})},AS=n=>{if(n.default!==void 0)return n.default;switch(n.type){case"string":return"";case"number":case"integer":return 0;case"boolean":return!1;case"array":return[];case"object":const e={};return n.properties&&Object.keys(n.properties).forEach(t=>{e[t]=AS(n.properties[t])}),e;default:return null}},y3=({value:n,onChange:e,onBlur:t,className:s})=>{const[l,o]=J.useState(JSON.stringify(n||{},null,2)),[c,f]=J.useState(!0),d=J.useRef(null),h=J.useRef(!1);J.useEffect(()=>{h.current||o(JSON.stringify(n||{},null,2))},[n]);const m=v=>{const k=v.trim();return k===""?{}:JSON.parse(k)},y=v=>{const k=v.target.value;o(k);try{const E=m(k);f(!0),e(E)}catch{f(!1)}},x=v=>{h.current=!1;try{const k=m(l);f(!0),l.trim()===""&&o("{}"),t(k)}catch{o(JSON.stringify(n||{},null,2)),f(!0)}};return b.jsx("textarea",{ref:d,value:l,onChange:y,onFocus:()=>h.current=!0,onBlur:x,className:`${s} ${c?"":"border-red-500"}`})},b3=({module:n,updateConfig:e,onRefresh:t})=>{const{moduleTypes:s,loading:l}=zo(),o=n.config||{},c=s.find(h=>h.id===n.type),f=c?.configSchema,d=c?.uiSchema;if(f){const h=m=>{Object.keys(m).forEach(y=>{m[y]!==o[y]&&e(y,m[y])})};return b.jsx(g3,{schema:f,uiSchema:d,formData:o,onChange:h,moduleId:n.id,onActionComplete:t})}return l?b.jsx("div",{className:"p-4 text-center text-gray-500 italic",children:"Loading configuration schema..."}):b.jsxs("div",{className:"space-y-3",children:[b.jsx("p",{className:`${qe.textSubtle} mb-2`,children:"This module does not have a configuration schema. You can edit the raw JSON configuration below."}),b.jsx(y3,{config:o,updateConfig:(h,m)=>e(h,m)})]})},x3=({className:n,title:e="delete",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("path",{d:"M2.5,5.5V14c0,.828,.672,1.5,1.5,1.5H12c.828,0,1.5-.672,1.5-1.5V5.5",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:".5",x2:"15.5",y1:"3.5",y2:"3.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"8",x2:"8",y1:"7.5",y2:"12.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"10.5",x2:"10.5",y1:"7.5",y2:"12.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"5.5",x2:"5.5",y1:"7.5",y2:"12.5"}),b.jsx("polyline",{fill:"none",points:"5.5 3.5 5.5 .5 10.5 .5 10.5 3.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),v3=({moduleId:n,module:e,setModule:t,onClose:s,onSave:l,onDelete:o})=>{const c=J.useRef(null),{moduleTypes:f}=zo();return n===null||!e?null:b.jsx("div",{className:qe.modalBackdrop,onMouseDown:d=>{d.target===d.currentTarget&&(c.current="backdrop")},onClick:d=>{d.target===d.currentTarget&&c.current==="backdrop"&&(l(n,e,!0),s()),c.current=null},children:b.jsxs("div",{className:qe.modalContent,onClick:d=>d.stopPropagation(),children:[b.jsxs("div",{className:"flex justify-between items-start mb-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-bold text-black mb-1 ",children:"Edit Module"}),b.jsx("div",{className:"text-gray-600 text-sm ",children:b.jsxs("span",{className:"font-mono",children:["Type: ",f.find(d=>d.id===e?.type)?.label]})})]}),b.jsx(op,{onClick:()=>{l(n,e,!0),s()}})]}),b.jsxs("div",{className:"mb-6",children:[b.jsx("label",{className:qe.label,children:"Module Name"}),b.jsx("input",{type:"text",value:e?.name||"",onChange:d=>{t(h=>h&&{...h,name:d.target.value})},className:qe.input})]}),e&&b.jsx(b3,{module:e,updateConfig:(d,h)=>{t(m=>m&&{...m,config:{...m.config,[d]:h}})},onRefresh:async()=>{try{const m=(await(await fetch("/api/settings")).json()).modules?.[n];m&&t(m)}catch(d){console.error("Failed to refresh module:",d)}}}),b.jsxs("div",{className:"mt-8 pt-6 border-t-2 border-gray-300 flex justify-end gap-3",children:[b.jsxs("button",{type:"button",onClick:()=>o(n),className:"px-4 py-2 bg-transparent border-0 rounded-lg transition-all cursor-pointer flex items-center gap-2",style:{color:"var(--color-error-light)"},onMouseEnter:d=>{d.currentTarget.style.color="var(--color-error)"},onMouseLeave:d=>{d.currentTarget.style.color="var(--color-error-light)"},children:[b.jsx(x3,{className:"w-4 h-4"}),"Delete Module"]}),b.jsx(Ji,{onClick:()=>{l(n,e,!0),s()},children:"Save"})]})]})})},S3=({position:n,channel:e,onClose:t,onUpdate:s,timeFormat:l})=>{const o=J.useRef(null);return n===null?null:b.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onMouseDown:c=>{c.target===c.currentTarget&&(o.current="backdrop")},onClick:c=>{c.target===c.currentTarget&&o.current==="backdrop"&&t(),o.current=null},children:b.jsxs("div",{className:"border-4 rounded-xl p-4 sm:p-6 max-w-md w-full shadow-lg",style:{backgroundColor:"var(--color-bg-card)",borderColor:"var(--color-border-main)"},onClick:c=>c.stopPropagation(),children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsxs("h3",{className:"text-xl font-bold text-black ",children:["Schedule Channel ",n]}),b.jsx(op,{onClick:t})]}),b.jsxs("div",{className:"space-y-4",children:[b.jsx("div",{className:"text-sm text-gray-600 mb-4 ",children:"Add times when this channel should automatically print."}),b.jsxs("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:[(e?.schedule||[]).map((c,f)=>b.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border-2 border-gray-300 hover:border-black",style:{backgroundColor:"var(--color-bg-card)"},children:[b.jsx("span",{className:"text-black  text-lg",children:Ch(c,l)}),b.jsx("button",{onClick:()=>{const d=[...e?.schedule||[]];d.splice(f,1),s(d)},className:"text-red-600 hover:text-red-700 px-2  font-bold cursor-pointer hover-shimmer",children:""})]},f)),(!e?.schedule||e.schedule.length===0)&&b.jsx("div",{className:"text-gray-500 text-center py-4 italic ",children:"No scheduled times."})]}),b.jsx("div",{className:"pt-4 border-t-2 border-gray-300",children:b.jsxs("form",{onSubmit:c=>{c.preventDefault();const f=c.target.elements.timeInput,d=f.value;if(d){const h=e?.schedule||[];if(!h.includes(d)){const m=[...h,d].sort();s(m),f.value=""}}},className:"flex gap-2",children:[b.jsx("input",{name:"timeInput",type:"time",required:!0,className:"flex-1 border-2 border-gray-300 rounded-lg px-3 py-2 text-black focus:outline-none focus:border-black ",style:{backgroundColor:"var(--color-bg-card)"}}),b.jsx(Ji,{type:"submit",children:"Add"})]})})]})]})})},k3=({show:n,wifiStatus:e})=>{if(!n)return null;const t=e?.ap_ssid||"PC-1-Setup-<device>",s=e?.ap_password||"Check printed instructions";return b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:b.jsxs("div",{className:"bg-white border-4 border-black rounded-xl p-4 sm:p-6 md:p-8 max-w-md w-full text-center shadow-lg",children:[b.jsx("div",{className:"text-6xl mb-4",children:""}),b.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:"Setup Mode Activating..."}),b.jsxs("div",{className:"text-left space-y-4 bg-gray-50 p-4 rounded-lg border-2 border-gray-300 mb-6",children:[b.jsxs("div",{className:"flex gap-3",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"1"}),b.jsx("p",{className:"text-black text-sm",children:"Wait for the printer to print setup instructions."})]}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"2"}),b.jsxs("p",{className:"text-black text-sm",children:["Connect your device to the ",b.jsx("span",{className:"text-black bg-gray-200 px-1 rounded border border-gray-300",children:t})," ","WiFi network."]})]}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"3"}),b.jsxs("p",{className:"text-black text-sm",children:["Password: ",b.jsx("span",{className:"text-black bg-gray-200 px-1 rounded border border-gray-300",children:s})]})]}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"4"}),b.jsxs("p",{className:"text-black text-sm",children:["Navigate to ",b.jsx("span",{className:"text-black bg-gray-200 px-1 rounded border border-gray-300",children:"http://10.42.0.1"})," to configure WiFi."]})]})]}),b.jsx("p",{className:"text-yellow-600 text-xs italic",children:"Note: This page will stop responding as the device switches networks."})]})})},T3=({status:n})=>n.message?b.jsx("div",{className:`fixed bottom-8 left-1/2 -translate-x-1/2 z-50 px-6 py-3 rounded-full shadow-xl text-sm font-medium transition-all transform duration-300 ${n.type==="success"?"text-gray-200 shadow-black/50":"text-red-400 shadow-black/50"}`,style:{backgroundColor:"var(--color-bg-dark)"},children:n.message}):null,E3=({setSettings:n,setModules:e,setStatus:t})=>{const s=async()=>{if(confirm("Are you sure you want to reset ALL settings to default? This cannot be undone."))try{const o=await(await fetch("/api/settings/reset",{method:"POST"})).json();n(o.config),e({}),t({type:"success",message:"Settings reset to defaults."})}catch(l){console.error(l),t({type:"error",message:"Failed to reset settings."})}};return b.jsx("button",{onClick:s,className:"text-xs text-red-400 hover:text-red-300 border border-red-800/40 hover:border-red-700/60 rounded px-3 py-1.5 bg-transparent transition-colors cursor-pointer",children:"Reset All Settings to Default"})},M3=({className:n="w-4 h-4"})=>b.jsx("svg",{className:n,fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),C3=({className:n,title:e="border width",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("rect",{height:"3",width:"15",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:".5",y:"2.5"}),b.jsx("rect",{height:"2",width:"15",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:".5",y:"8.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:".5",x2:"15.5",y1:"13.5",y2:"13.5"})]})]}),w3=({className:n,title:e="preferences",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"12.5",x2:"15.5",y1:"12.5",y2:"12.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"0.5",x2:"3.5",y1:"3.5",y2:"3.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"9.5",x2:"15.5",y1:"3.5",y2:"3.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"0.5",x2:"6.5",y1:"12.5",y2:"12.5"}),b.jsx("rect",{height:"6",width:"3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"3.5",y:"0.5"}),b.jsx("rect",{height:"6",width:"3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"9.5",y:"9.5"})]})]});function N3(){const[n,e]=J.useState(null),[t,s]=J.useState(null),{moduleTypes:l}=zo(),[o,c]=J.useState({timezone:"",latitude:0,longitude:0,city_name:"",time_format:"12h",modules:{},channels:{}}),[f,d]=J.useState({}),[h,m]=J.useState({type:"",message:""}),[y,x]=J.useState(!0),[v,k]=J.useState(""),[E,M]=J.useState([]),[C,z]=J.useState(!1),[q,W]=J.useState("channels"),[G,P]=J.useState(null),[I,ie]=J.useState(!1),[ce,De]=J.useState(null),[rt,_e]=J.useState(null),[st,$e]=J.useState(null),[Ee,U]=J.useState(!1),Z=J.useRef(null);J.useEffect(()=>{let O=!0;const _=async()=>{try{const K=await(await fetch("/api/wifi/status")).json();if(s(K),e(K.mode),K.mode==="ap"){O&&x(!1);return}if(O){try{const[ue,re]=await Promise.all([fetch("/api/settings").then(te=>te.json()),fetch("/api/modules").then(te=>te.json())]);c(ue),d(re.modules||{}),x(!1)}catch(ue){console.error("Error fetching data:",ue),m({type:"error",message:"Failed to load settings. Is the backend running?"}),x(!1)}O=!1}}catch(ne){console.error("Error fetching WiFi status:",ne),O&&x(!1)}};_();const X=setInterval(_,1e4);return()=>{clearInterval(X),Z.current&&clearTimeout(Z.current)}},[]);const pe=async O=>{if(k(O),O.length<2){M([]),z(!1),Z.current&&(clearTimeout(Z.current),Z.current=null);return}Z.current&&clearTimeout(Z.current),z(!0),Z.current=setTimeout(async()=>{try{console.log("Searching for:",O);const _=new AbortController,X=setTimeout(()=>_.abort(),15e3),ne=await fetch(`/api/location/search?q=${encodeURIComponent(O)}&limit=20&use_api=false`,{signal:_.signal});if(clearTimeout(X),!ne.ok)throw new Error(`HTTP error! status: ${ne.status}`);const K=await ne.json();console.log("Search results:",K.results?.length||0),K.results?M(K.results):M([])}catch(_){_.name==="AbortError"?console.warn("Location search timed out"):(console.error("Error fetching locations:",_),M([]))}finally{z(!1),Z.current=null}},500)},Me=async(O,_)=>{try{const X=await fetch(`/api/channels/${O}/schedule`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(!X.ok)throw new Error("Failed to update schedule");const ne=await X.json();c(K=>({...K,channels:{...K.channels,[O]:ne.channel}})),m({type:"success",message:"Schedule updated!"}),setTimeout(()=>m({type:"",message:""}),3e3)}catch(X){console.error("Error updating schedule:",X),m({type:"error",message:"Failed to update schedule"})}},Ue=async O=>{try{if(!(await fetch(`/action/print-channel/${O}`,{method:"POST"})).ok)throw new Error("Failed to trigger print");m({type:"success",message:`Printing Channel ${O}...`}),setTimeout(()=>m({type:"",message:""}),3e3)}catch(_){console.error("Error triggering print:",_),m({type:"error",message:"Failed to trigger print"})}},N=async O=>{try{const _=await fetch(`/debug/print-module/${O}`,{method:"POST"});if(!_.ok){const ne=await _.json().catch(()=>({detail:"Failed to trigger print"}));throw new Error(ne.detail||"Failed to trigger print")}const X=await _.json();m({type:"success",message:X.message||"Printing module..."}),setTimeout(()=>m({type:"",message:""}),3e3)}catch(_){console.error("Error triggering module print:",_),m({type:"error",message:_.message||"Failed to trigger print"}),setTimeout(()=>m({type:"",message:""}),3e3)}},V=async O=>{c(_=>({..._,...O}));try{const _={...o,channels:o.channels||{},modules:f,...O};if(console.log("Auto-saving settings:",O),!(await fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).ok)throw new Error("Failed to save settings")}catch(_){console.error("Error auto-saving settings:",_),m({type:"error",message:"Failed to save settings automatically."})}},se=O=>{const X={city_name:O.city||O.name,state:O.state,latitude:O.latitude,longitude:O.longitude,timezone:O.timezone};k(""),M([]),V(X)},le=O=>({news:{news_api_key:""},rss:{rss_feeds:[]},weather:{},email:{email_host:"imap.gmail.com",email_user:"",email_password:"",polling_interval:60},games:{difficulty:"medium"},astronomy:{},calendar:{ical_sources:[],days_to_show:2},webhook:{url:"",method:"GET",headers:{},json_path:""},text:{content:""}})[O]||{},ve=async(O,_="")=>{try{const X=await fetch("/api/modules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:O,name:_||`${l.find(K=>K.id===O)?.label||O}`,config:le(O)})});if(!X.ok)throw new Error("Failed to create module");const ne=await X.json();return d(K=>({...K,[ne.module.id]:ne.module})),m({type:"success",message:"Module created successfully!"}),setTimeout(()=>m({type:"",message:""}),3e3),ne.module}catch(X){return console.error("Error creating module:",X),m({type:"error",message:"Failed to create module"}),null}},be=async(O,_)=>{try{const X=f[O];if(!X){console.error(`[UPDATE] Module ${O} not found`);return}if(_.type&&_.type!==X.type){console.error(`[UPDATE] Type mismatch! Target module is ${X.type}, but update has type ${_.type}. Rejecting update.`);return}if(_.id&&_.id!==O){console.error(`[UPDATE] ID mismatch! Target module ID is ${O}, but update has ID ${_.id}. Rejecting update.`);return}if(_.config){const re={..._.config};X.type==="news"?(re.rss_feeds&&delete re.rss_feeds,delete re.enable_newsapi):X.type==="rss"&&(re.news_api_key&&delete re.news_api_key,delete re.enable_newsapi),_.config=re}d(re=>{const te=re[O];return te?{...re,[O]:{...te,..._}}:re});const ne={...X,..._};ne.id=O;const K=await fetch(`/api/modules/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)});if(!K.ok)throw new Error("Failed to update module");const ue=await K.json();d(re=>({...re,[O]:ue.module})),m({type:"success",message:"Module updated successfully!"}),setTimeout(()=>m({type:"",message:""}),3e3)}catch(X){console.error("Error updating module:",X),m({type:"error",message:"Failed to update module"});const ne=await fetch(`/api/modules/${O}`);if(ne.ok){const K=await ne.json();d(ue=>({...ue,[O]:K.module}))}}},Ce=async O=>{if(confirm("Are you sure you want to delete this module?"))try{const _=[];for(const[ne,K]of Object.entries(o.channels))K.modules&&K.modules.some(ue=>ue.module_id===O)&&_.push(ne);for(const ne of _)await fetch(`/api/channels/${ne}/modules/${O}`,{method:"DELETE"});const X=await fetch(`/api/modules/${O}`,{method:"DELETE"});if(!X.ok){const ne=await X.json();throw new Error(ne.detail||"Failed to delete module")}d(ne=>{const K={...ne};return delete K[O],K}),c(ne=>{const K={...ne.channels};for(const ue in K)K[ue].modules&&(K[ue].modules=K[ue].modules.filter(re=>re.module_id!==O));return{...ne,channels:K}}),m({type:"success",message:"Module deleted successfully!"}),setTimeout(()=>m({type:"",message:""}),3e3),ce===O&&(De(null),_e(null))}catch(_){console.error("Error deleting module:",_),m({type:"error",message:_.message||"Failed to delete module"})}},et=async(O,_,X=null,ne={})=>{try{ne?.optimistic&&c(re=>{const te={...re.channels||{}},he=te[O]?{...te[O]}:{modules:[]},Ne=(he.modules||[]).filter($t=>$t.module_id!==_).sort(($t,qn)=>$t.order-qn.order),Ae=X===null?Ne.length:Math.max(0,Math.min(X,Ne.length)),ut=[...Ne];return ut.splice(Ae,0,{module_id:_,order:Ae}),he.modules=ut.map(($t,qn)=>({...$t,order:qn})),te[O]=he,{...re,channels:te}});const K=await fetch(`/api/channels/${O}/modules?module_id=${_}${X!==null?`&order=${X}`:""}`,{method:"POST"});if(!K.ok)throw new Error("Failed to assign module");const ue=await K.json();return c(re=>({...re,channels:{...re.channels,[O]:ue.channel}})),ne?.silent||(m({type:"success",message:"Module assigned to channel!"}),setTimeout(()=>m({type:"",message:""}),3e3)),ue.channel}catch(K){return console.error("Error assigning module:",K),m({type:"error",message:K.message||"Failed to assign module"}),null}},Ke=async(O,_,X={})=>{try{X?.optimistic&&c(ue=>{const re=ue.channels?.[O];if(!re||!re.modules)return ue;const te=re.modules.filter(he=>he.module_id!==_).sort((he,Ne)=>he.order-Ne.order).map((he,Ne)=>({...he,order:Ne}));return{...ue,channels:{...ue.channels,[O]:{...re,modules:te}}}});const ne=await fetch(`/api/channels/${O}/modules/${_}`,{method:"DELETE"});if(!ne.ok)throw new Error("Failed to remove module");const K=await ne.json();return c(ue=>({...ue,channels:{...ue.channels,[O]:K.channel}})),X?.silent||(m({type:"success",message:"Module removed from channel!"}),setTimeout(()=>m({type:"",message:""}),3e3)),K.channel}catch(ne){return console.error("Error removing module:",ne),m({type:"error",message:ne.message||"Failed to remove module"}),null}},fe=async(O,_,X={})=>{try{X?.optimistic&&c(ue=>{const re=ue.channels?.[O];if(!re||!re.modules)return ue;const te=re.modules.map(Gt=>Gt.module_id),he=new Set(te),Ne=_||{},Ae=Object.entries(Ne).sort((Gt,al)=>Gt[1]-al[1]).map(([Gt])=>Gt).filter(Gt=>he.has(Gt)),ut=te.filter(Gt=>!Object.prototype.hasOwnProperty.call(Ne,Gt)),qn=[...Ae,...ut].map((Gt,al)=>({module_id:Gt,order:al}));return{...ue,channels:{...ue.channels,[O]:{...re,modules:qn}}}});const ne=await fetch(`/api/channels/${O}/modules/reorder`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(!ne.ok)throw new Error("Failed to reorder modules");const K=await ne.json();return c(ue=>({...ue,channels:{...ue.channels,[O]:K.channel}})),K.channel}catch(ne){return console.error("Error reordering modules:",ne),m({type:"error",message:"Failed to reorder modules"}),null}},ge=(O,_,X)=>{const ne=o.channels[O];if(!ne||!ne.modules)return;const K=[...ne.modules].sort((Ne,Ae)=>Ne.order-Ae.order),ue=K.findIndex(Ne=>Ne.module_id===_);if(ue===-1)return;const re=X==="up"?ue-1:ue+1;if(re<0||re>=K.length)return;const te=K[ue].order;K[ue].order=K[re].order,K[re].order=te;const he={};K.forEach(Ne=>{he[Ne.module_id]=Ne.order}),fe(O,he,{optimistic:!0})},Ve=(O,_)=>{const X=o.channels[O],ne=o.channels[_],K={...o.channels,[O]:ne||{modules:[]},[_]:X||{modules:[]}};V({channels:K})},B=async()=>{try{await fetch("/api/wifi/ap-mode",{method:"POST"}),m({type:"success",message:"AP mode activating..."}),U(!0)}catch{m({type:"error",message:"Failed to activate AP mode"})}};return y?b.jsx("div",{className:"max-w-[800px] w-full p-8 text-center",children:"Loading settings..."}):n==="ap"?b.jsx(sE,{wifiStatus:t}):b.jsxs("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 min-h-screen",style:{backgroundColor:"var(--color-bg-base)",color:"var(--color-text-main)"},children:[b.jsx("div",{className:"mb-8 pt-4 pb-2",children:b.jsx("h1",{className:"text-3xl sm:text-4xl leading-none font-bold tracking-tighter",style:{color:"var(--color-text-main)"},children:"PC-1 SETTINGS"})}),b.jsxs("div",{className:"flex gap-2 mb-8 border-b-2 border-dashed",style:{borderColor:"var(--color-border-main)"},children:[b.jsxs("button",{type:"button",onClick:()=>W("general"),className:`px-6 py-2 font-bold tracking-wider transition-all text-sm flex items-center gap-2 ${q==="general"?"border-b-2 translate-y-[2px]":"border-b-2 border-transparent"}`,style:q==="general"?{borderColor:"var(--color-border-main)",color:"var(--color-text-main)"}:{color:"var(--color-text-muted)"},onMouseEnter:O=>{q!=="general"&&(O.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:O=>{q!=="general"&&(O.currentTarget.style.color="var(--color-text-muted)")},children:[b.jsx(w3,{className:"w-4 h-4"}),"GENERAL"]}),b.jsxs("button",{type:"button",onClick:()=>W("channels"),className:`px-6 py-2 font-bold tracking-wider transition-all text-sm flex items-center gap-2 ${q==="channels"?"border-b-2 translate-y-[2px]":"border-b-2 border-transparent"}`,style:q==="channels"?{borderColor:"var(--color-border-main)",color:"var(--color-text-main)"}:{color:"var(--color-text-muted)"},onMouseEnter:O=>{q!=="channels"&&(O.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:O=>{q!=="channels"&&(O.currentTarget.style.color="var(--color-text-muted)")},children:[b.jsx(C3,{className:"w-4 h-4"}),"CHANNELS"]})]}),b.jsxs("div",{className:"contents",children:[q==="general"&&b.jsxs(b.Fragment,{children:[b.jsx(cE,{searchTerm:v,searchResults:E,isSearching:C,handleSearch:pe,selectLocation:se,settings:o,saveGlobalSettings:V,triggerAPMode:B,wifiStatus:t}),b.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[b.jsxs("a",{href:"https://github.com/travmiller/paper-console",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-gray-600 hover:text-black transition-colors",children:[b.jsx(M3,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-mono",children:"paper-console"})]}),b.jsx(E3,{setSettings:c,setModules:d,setStatus:m})]})]}),q==="channels"&&b.jsx(dE,{settings:o,modules:f,triggerChannelPrint:Ue,triggerModulePrint:N,setShowScheduleModal:$e,swapChannels:Ve,setShowEditModuleModal:De,setEditingModule:_e,moveModuleInChannel:ge,assignModuleToChannel:et,reorderChannelModules:fe,removeModuleFromChannel:Ke,setShowAddModuleModal:P,setShowCreateUnassignedModal:ie,wifiStatus:t}),b.jsx(nb,{channelPosition:G,onClose:()=>P(null),onCreateModule:ve,onAssignModule:et,onOpenEdit:(O,_)=>{De(O),_e(_)}}),I&&b.jsx(nb,{channelPosition:null,isUnassigned:!0,onClose:()=>ie(!1),onCreateModule:async O=>{const _=await ve(O);return _&&(ie(!1),De(_.id),_e(JSON.parse(JSON.stringify(_)))),_},onAssignModule:async()=>{},onOpenEdit:(O,_)=>{De(O),_e(_)}}),b.jsx(v3,{moduleId:ce,module:rt,setModule:_e,onClose:()=>{De(null),_e(null)},onSave:be,onDelete:Ce}),b.jsx(S3,{position:st,channel:o.channels[st]||{},onClose:()=>$e(null),onUpdate:O=>Me(st,O),timeFormat:o.time_format}),b.jsx(k3,{show:Ee,wifiStatus:t}),b.jsx(T3,{status:h})]})]})}rE.createRoot(document.getElementById("root")).render(b.jsx(Xn.StrictMode,{children:b.jsx(N3,{})}));
