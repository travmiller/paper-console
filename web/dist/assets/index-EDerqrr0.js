(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=t(l);fetch(l.href,o)}})();function fp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qd={exports:{}},no={};var F0;function QT(){if(F0)return no;F0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,o){var c=null;if(o!==void 0&&(c=""+o),l.key!==void 0&&(c=""+l.key),"key"in l){o={};for(var f in l)f!=="key"&&(o[f]=l[f])}else o=l;return l=o.ref,{$$typeof:n,type:s,key:c,ref:l!==void 0?l:null,props:o}}return no.Fragment=e,no.jsx=t,no.jsxs=t,no}var X0;function ZT(){return X0||(X0=1,qd.exports=QT()),qd.exports}var b=ZT(),Vd={exports:{}},Ne={};var Q0;function WT(){if(Q0)return Ne;Q0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function v(N){return N===null||typeof N!="object"?null:(N=x&&N[x]||N["@@iterator"],typeof N=="function"?N:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function M(N,q,re){this.props=N,this.context=q,this.refs=C,this.updater=re||k}M.prototype.isReactComponent={},M.prototype.setState=function(N,q){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,q,"setState")},M.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function I(){}I.prototype=M.prototype;function $(N,q,re){this.props=N,this.context=q,this.refs=C,this.updater=re||k}var X=$.prototype=new I;X.constructor=$,E(X,M.prototype),X.isPureReactComponent=!0;var _=Array.isArray;function Y(){}var V={H:null,A:null,T:null,S:null},Z=Object.prototype.hasOwnProperty;function ie(N,q,re){var ae=re.ref;return{$$typeof:n,type:N,key:q,ref:ae!==void 0?ae:null,props:re}}function Te(N,q){return ie(N.type,q,N.props)}function $e(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function Oe(N){var q={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(re){return q[re]})}var rt=/\/+/g;function we(N,q){return typeof N=="object"&&N!==null&&N.key!=null?Oe(""+N.key):q.toString(36)}function he(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(Y,Y):(N.status="pending",N.then(function(q){N.status==="pending"&&(N.status="fulfilled",N.value=q)},function(q){N.status==="pending"&&(N.status="rejected",N.reason=q)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function B(N,q,re,ae,be){var ve=typeof N;(ve==="undefined"||ve==="boolean")&&(N=null);var De=!1;if(N===null)De=!0;else switch(ve){case"bigint":case"string":case"number":De=!0;break;case"object":switch(N.$$typeof){case n:case e:De=!0;break;case g:return De=N._init,B(De(N._payload),q,re,ae,be)}}if(De)return be=be(N),De=ae===""?"."+we(N,0):ae,_(be)?(re="",De!=null&&(re=De.replace(rt,"$&/")+"/"),B(be,q,re,"",function(ue){return ue})):be!=null&&($e(be)&&(be=Te(be,re+(be.key==null||N&&N.key===be.key?"":(""+be.key).replace(rt,"$&/")+"/")+De)),q.push(be)),1;De=0;var ut=ae===""?".":ae+":";if(_(N))for(var Ge=0;Ge<N.length;Ge++)ae=N[Ge],ve=ut+we(ae,Ge),De+=B(ae,q,re,ve,be);else if(Ge=v(N),typeof Ge=="function")for(N=Ge.call(N),Ge=0;!(ae=N.next()).done;)ae=ae.value,ve=ut+we(ae,Ge++),De+=B(ae,q,re,ve,be);else if(ve==="object"){if(typeof N.then=="function")return B(he(N),q,re,ae,be);throw q=String(N),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return De}function ee(N,q,re){if(N==null)return N;var ae=[],be=0;return B(N,ae,"","",function(ve){return q.call(re,ve,be++)}),ae}function me(N){if(N._status===-1){var q=N._result;q=q(),q.then(function(re){(N._status===0||N._status===-1)&&(N._status=1,N._result=re)},function(re){(N._status===0||N._status===-1)&&(N._status=2,N._result=re)}),N._status===-1&&(N._status=0,N._result=q)}if(N._status===1)return N._result.default;throw N._result}var Re=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Be={map:ee,forEach:function(N,q,re){ee(N,function(){q.apply(this,arguments)},re)},count:function(N){var q=0;return ee(N,function(){q++}),q},toArray:function(N){return ee(N,function(q){return q})||[]},only:function(N){if(!$e(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Ne.Activity=y,Ne.Children=Be,Ne.Component=M,Ne.Fragment=t,Ne.Profiler=l,Ne.PureComponent=$,Ne.StrictMode=s,Ne.Suspense=d,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(N){return V.H.useMemoCache(N)}},Ne.cache=function(N){return function(){return N.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(N,q,re){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ae=E({},N.props),be=N.key;if(q!=null)for(ve in q.key!==void 0&&(be=""+q.key),q)!Z.call(q,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&q.ref===void 0||(ae[ve]=q[ve]);var ve=arguments.length-2;if(ve===1)ae.children=re;else if(1<ve){for(var De=Array(ve),ut=0;ut<ve;ut++)De[ut]=arguments[ut+2];ae.children=De}return ie(N.type,be,ae)},Ne.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:o,_context:N},N},Ne.createElement=function(N,q,re){var ae,be={},ve=null;if(q!=null)for(ae in q.key!==void 0&&(ve=""+q.key),q)Z.call(q,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(be[ae]=q[ae]);var De=arguments.length-2;if(De===1)be.children=re;else if(1<De){for(var ut=Array(De),Ge=0;Ge<De;Ge++)ut[Ge]=arguments[Ge+2];be.children=ut}if(N&&N.defaultProps)for(ae in De=N.defaultProps,De)be[ae]===void 0&&(be[ae]=De[ae]);return ie(N,ve,be)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(N){return{$$typeof:f,render:N}},Ne.isValidElement=$e,Ne.lazy=function(N){return{$$typeof:g,_payload:{_status:-1,_result:N},_init:me}},Ne.memo=function(N,q){return{$$typeof:p,type:N,compare:q===void 0?null:q}},Ne.startTransition=function(N){var q=V.T,re={};V.T=re;try{var ae=N(),be=V.S;be!==null&&be(re,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(Y,Re)}catch(ve){Re(ve)}finally{q!==null&&re.types!==null&&(q.types=re.types),V.T=q}},Ne.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Ne.use=function(N){return V.H.use(N)},Ne.useActionState=function(N,q,re){return V.H.useActionState(N,q,re)},Ne.useCallback=function(N,q){return V.H.useCallback(N,q)},Ne.useContext=function(N){return V.H.useContext(N)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(N,q){return V.H.useDeferredValue(N,q)},Ne.useEffect=function(N,q){return V.H.useEffect(N,q)},Ne.useEffectEvent=function(N){return V.H.useEffectEvent(N)},Ne.useId=function(){return V.H.useId()},Ne.useImperativeHandle=function(N,q,re){return V.H.useImperativeHandle(N,q,re)},Ne.useInsertionEffect=function(N,q){return V.H.useInsertionEffect(N,q)},Ne.useLayoutEffect=function(N,q){return V.H.useLayoutEffect(N,q)},Ne.useMemo=function(N,q){return V.H.useMemo(N,q)},Ne.useOptimistic=function(N,q){return V.H.useOptimistic(N,q)},Ne.useReducer=function(N,q,re){return V.H.useReducer(N,q,re)},Ne.useRef=function(N){return V.H.useRef(N)},Ne.useState=function(N){return V.H.useState(N)},Ne.useSyncExternalStore=function(N,q,re){return V.H.useSyncExternalStore(N,q,re)},Ne.useTransition=function(){return V.H.useTransition()},Ne.version="19.2.1",Ne}var Z0;function Lo(){return Z0||(Z0=1,Vd.exports=WT()),Vd.exports}var Q=Lo();const er=fp(Q);var $d={exports:{}},ro={},Gd={exports:{}},Yd={};var W0;function eE(){return W0||(W0=1,(function(n){function e(B,ee){var me=B.length;B.push(ee);e:for(;0<me;){var Re=me-1>>>1,Be=B[Re];if(0<l(Be,ee))B[Re]=ee,B[me]=Be,me=Re;else break e}}function t(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var ee=B[0],me=B.pop();if(me!==ee){B[0]=me;e:for(var Re=0,Be=B.length,N=Be>>>1;Re<N;){var q=2*(Re+1)-1,re=B[q],ae=q+1,be=B[ae];if(0>l(re,me))ae<Be&&0>l(be,re)?(B[Re]=be,B[ae]=me,Re=ae):(B[Re]=re,B[q]=me,Re=q);else if(ae<Be&&0>l(be,me))B[Re]=be,B[ae]=me,Re=ae;else break e}}return ee}function l(B,ee){var me=B.sortIndex-ee.sortIndex;return me!==0?me:B.id-ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var d=[],p=[],g=1,y=null,x=3,v=!1,k=!1,E=!1,C=!1,M=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function X(B){for(var ee=t(p);ee!==null;){if(ee.callback===null)s(p);else if(ee.startTime<=B)s(p),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(p)}}function _(B){if(E=!1,X(B),!k)if(t(d)!==null)k=!0,Y||(Y=!0,Oe());else{var ee=t(p);ee!==null&&he(_,ee.startTime-B)}}var Y=!1,V=-1,Z=5,ie=-1;function Te(){return C?!0:!(n.unstable_now()-ie<Z)}function $e(){if(C=!1,Y){var B=n.unstable_now();ie=B;var ee=!0;try{e:{k=!1,E&&(E=!1,I(V),V=-1),v=!0;var me=x;try{t:{for(X(B),y=t(d);y!==null&&!(y.expirationTime>B&&Te());){var Re=y.callback;if(typeof Re=="function"){y.callback=null,x=y.priorityLevel;var Be=Re(y.expirationTime<=B);if(B=n.unstable_now(),typeof Be=="function"){y.callback=Be,X(B),ee=!0;break t}y===t(d)&&s(d),X(B)}else s(d);y=t(d)}if(y!==null)ee=!0;else{var N=t(p);N!==null&&he(_,N.startTime-B),ee=!1}}break e}finally{y=null,x=me,v=!1}ee=void 0}}finally{ee?Oe():Y=!1}}}var Oe;if(typeof $=="function")Oe=function(){$($e)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,we=rt.port2;rt.port1.onmessage=$e,Oe=function(){we.postMessage(null)}}else Oe=function(){M($e,0)};function he(B,ee){V=M(function(){B(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(B){switch(x){case 1:case 2:case 3:var ee=3;break;default:ee=x}var me=x;x=ee;try{return B()}finally{x=me}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(B,ee){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var me=x;x=B;try{return ee()}finally{x=me}},n.unstable_scheduleCallback=function(B,ee,me){var Re=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Re+me:Re):me=Re,B){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=me+Be,B={id:g++,callback:ee,priorityLevel:B,startTime:me,expirationTime:Be,sortIndex:-1},me>Re?(B.sortIndex=me,e(p,B),t(d)===null&&B===t(p)&&(E?(I(V),V=-1):E=!0,he(_,me-Re))):(B.sortIndex=Be,e(d,B),k||v||(k=!0,Y||(Y=!0,Oe()))),B},n.unstable_shouldYield=Te,n.unstable_wrapCallback=function(B){var ee=x;return function(){var me=x;x=ee;try{return B.apply(this,arguments)}finally{x=me}}}})(Yd)),Yd}var eb;function tE(){return eb||(eb=1,Gd.exports=eE()),Gd.exports}var Kd={exports:{}},Kt={};var tb;function nE(){if(tb)return Kt;tb=1;var n=Lo();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Kt.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(d,p,null,g)},Kt.flushSync=function(d){var p=c.T,g=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=p,s.p=g,s.d.f()}},Kt.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(d,p))},Kt.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Kt.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=f(g,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,v=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:v}):g==="script"&&s.d.X(d,{crossOrigin:y,integrity:x,fetchPriority:v,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Kt.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=f(p.as,p.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(d)},Kt.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=f(g,p.crossOrigin);s.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Kt.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=f(p.as,p.crossOrigin);s.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(d)},Kt.requestFormReset=function(d){s.d.r(d)},Kt.unstable_batchedUpdates=function(d,p){return d(p)},Kt.useFormState=function(d,p,g){return c.H.useFormState(d,p,g)},Kt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Kt.version="19.2.1",Kt}var nb;function Vx(){if(nb)return Kd.exports;nb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Kd.exports=nE(),Kd.exports}var rb;function rE(){if(rb)return ro;rb=1;var n=tE(),e=Lo(),t=Vx();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function f(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(o(r)!==r)throw Error(s(188))}function p(r){var i=r.alternate;if(!i){if(i=o(r),i===null)throw Error(s(188));return i!==r?null:r}for(var a=r,u=i;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(u=h.return,u!==null){a=u;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return d(h),r;if(m===u)return d(h),i;m=m.sibling}throw Error(s(188))}if(a.return!==u.return)a=h,u=m;else{for(var S=!1,T=h.child;T;){if(T===a){S=!0,a=h,u=m;break}if(T===u){S=!0,u=h,a=m;break}T=T.sibling}if(!S){for(T=m.child;T;){if(T===a){S=!0,a=m,u=h;break}if(T===u){S=!0,u=m,a=h;break}T=T.sibling}if(!S)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?r:i}function g(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=g(r),i!==null)return i;r=r.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),$=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),Te=Symbol.for("react.memo_cache_sentinel"),$e=Symbol.iterator;function Oe(r){return r===null||typeof r!="object"?null:(r=$e&&r[$e]||r["@@iterator"],typeof r=="function"?r:null)}var rt=Symbol.for("react.client.reference");function we(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===rt?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case E:return"Fragment";case M:return"Profiler";case C:return"StrictMode";case _:return"Suspense";case Y:return"SuspenseList";case ie:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case $:return r.displayName||"Context";case I:return(r._context.displayName||"Context")+".Consumer";case X:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case V:return i=r.displayName||null,i!==null?i:we(r.type)||"Memo";case Z:i=r._payload,r=r._init;try{return we(r(i))}catch{}}return null}var he=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Re=[],Be=-1;function N(r){return{current:r}}function q(r){0>Be||(r.current=Re[Be],Re[Be]=null,Be--)}function re(r,i){Be++,Re[Be]=r.current,r.current=i}var ae=N(null),be=N(null),ve=N(null),De=N(null);function ut(r,i){switch(re(ve,i),re(be,r),re(ae,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?b0(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=b0(i),r=x0(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}q(ae),re(ae,r)}function Ge(){q(ae),q(be),q(ve)}function ue(r){r.memoizedState!==null&&re(De,r);var i=ae.current,a=x0(i,r.type);i!==a&&(re(be,r),re(ae,a))}function Ee(r){be.current===r&&(q(ae),q(be)),De.current===r&&(q(De),Zl._currentValue=me)}var _e,Ye;function z(r){if(_e===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);_e=i&&i[1]||"",Ye=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_e+r+Ye}var O=!1;function H(r,i){if(!r||O)return"";O=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(U){var L=U}Reflect.construct(r,[],J)}else{try{J.call()}catch(U){L=U}r.call(J.prototype)}}else{try{throw Error()}catch(U){L=U}(J=r())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(U){if(U&&L&&typeof U.stack=="string")return[U.stack,L.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),S=m[0],T=m[1];if(S&&T){var w=S.split(`
`),R=T.split(`
`);for(h=u=0;u<w.length&&!w[u].includes("DetermineComponentFrameRoot");)u++;for(;h<R.length&&!R[h].includes("DetermineComponentFrameRoot");)h++;if(u===w.length||h===R.length)for(u=w.length-1,h=R.length-1;1<=u&&0<=h&&w[u]!==R[h];)h--;for(;1<=u&&0<=h;u--,h--)if(w[u]!==R[h]){if(u!==1||h!==1)do if(u--,h--,0>h||w[u]!==R[h]){var G=`
`+w[u].replace(" at new "," at ");return r.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",r.displayName)),G}while(1<=u&&0<=h);break}}}finally{O=!1,Error.prepareStackTrace=a}return(a=r?r.displayName||r.name:"")?z(a):""}function F(r,i){switch(r.tag){case 26:case 27:case 5:return z(r.type);case 16:return z("Lazy");case 13:return r.child!==i&&i!==null?z("Suspense Fallback"):z("Suspense");case 19:return z("SuspenseList");case 0:case 15:return H(r.type,!1);case 11:return H(r.type.render,!1);case 1:return H(r.type,!0);case 31:return z("Activity");default:return""}}function ne(r){try{var i="",a=null;do i+=F(r,a),a=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var K=Object.prototype.hasOwnProperty,fe=n.unstable_scheduleCallback,se=n.unstable_cancelCallback,le=n.unstable_shouldYield,Me=n.unstable_requestPaint,ge=n.unstable_now,pe=n.unstable_getCurrentPriorityLevel,Ke=n.unstable_ImmediatePriority,en=n.unstable_UserBlockingPriority,Tn=n.unstable_NormalPriority,Yt=n.unstable_LowPriority,Kn=n.unstable_IdlePriority,wu=n.log,zS=n.unstable_setDisableYieldValue,ul=null,fn=null;function Or(r){if(typeof wu=="function"&&zS(r),fn&&typeof fn.setStrictMode=="function")try{fn.setStrictMode(ul,r)}catch{}}var dn=Math.clz32?Math.clz32:BS,LS=Math.log,_S=Math.LN2;function BS(r){return r>>>=0,r===0?32:31-(LS(r)/_S|0)|0}var qo=256,Vo=262144,$o=4194304;function Ts(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Go(r,i,a){var u=r.pendingLanes;if(u===0)return 0;var h=0,m=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var T=u&134217727;return T!==0?(u=T&~m,u!==0?h=Ts(u):(S&=T,S!==0?h=Ts(S):a||(a=T&~r,a!==0&&(h=Ts(a))))):(T=u&~m,T!==0?h=Ts(T):S!==0?h=Ts(S):a||(a=u&~r,a!==0&&(h=Ts(a)))),h===0?0:i!==0&&i!==h&&(i&m)===0&&(m=h&-h,a=i&-i,m>=a||m===32&&(a&4194048)!==0)?i:h}function fl(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function HS(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wp(){var r=$o;return $o<<=1,($o&62914560)===0&&($o=4194304),r}function Nu(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function dl(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function US(r,i,a,u,h,m){var S=r.pendingLanes;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=a,r.entangledLanes&=a,r.errorRecoveryDisabledLanes&=a,r.shellSuspendCounter=0;var T=r.entanglements,w=r.expirationTimes,R=r.hiddenUpdates;for(a=S&~a;0<a;){var G=31-dn(a),J=1<<G;T[G]=0,w[G]=-1;var L=R[G];if(L!==null)for(R[G]=null,G=0;G<L.length;G++){var U=L[G];U!==null&&(U.lane&=-536870913)}a&=~J}u!==0&&em(r,u,0),m!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=m&~(S&~i))}function em(r,i,a){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-dn(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|a&261930}function tm(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var u=31-dn(a),h=1<<u;h&i|r[u]&i&&(r[u]|=i),a&=~h}}function nm(r,i){var a=i&-i;return a=(a&42)!==0?1:Au(a),(a&(r.suspendedLanes|i))!==0?0:a}function Au(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ou(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function rm(){var r=ee.p;return r!==0?r:(r=window.event,r===void 0?32:V0(r.type))}function sm(r,i){var a=ee.p;try{return ee.p=r,i()}finally{ee.p=a}}var Dr=Math.random().toString(36).slice(2),_t="__reactFiber$"+Dr,tn="__reactProps$"+Dr,ai="__reactContainer$"+Dr,Du="__reactEvents$"+Dr,IS="__reactListeners$"+Dr,qS="__reactHandles$"+Dr,im="__reactResources$"+Dr,hl="__reactMarker$"+Dr;function ju(r){delete r[_t],delete r[tn],delete r[Du],delete r[IS],delete r[qS]}function ci(r){var i=r[_t];if(i)return i;for(var a=r.parentNode;a;){if(i=a[ai]||a[_t]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=M0(r);r!==null;){if(a=r[_t])return a;r=M0(r)}return i}r=a,a=r.parentNode}return null}function ui(r){if(r=r[_t]||r[ai]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function pl(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function fi(r){var i=r[im];return i||(i=r[im]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Dt(r){r[hl]=!0}var lm=new Set,om={};function Es(r,i){di(r,i),di(r+"Capture",i)}function di(r,i){for(om[r]=i,r=0;r<i.length;r++)lm.add(i[r])}var VS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),am={},cm={};function $S(r){return K.call(cm,r)?!0:K.call(am,r)?!1:VS.test(r)?cm[r]=!0:(am[r]=!0,!1)}function Yo(r,i,a){if($S(i))if(a===null)r.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+a)}}function Ko(r,i,a){if(a===null)r.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+a)}}function rr(r,i,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttributeNS(i,a,""+u)}}function En(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function um(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function GS(r,i,a){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var h=u.get,m=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return h.call(this)},set:function(S){a=""+S,m.call(this,S)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Ru(r){if(!r._valueTracker){var i=um(r)?"checked":"value";r._valueTracker=GS(r,i,""+r[i])}}function fm(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),u="";return r&&(u=um(r)?r.checked?"true":"false":r.value),r=u,r!==a?(i.setValue(r),!0):!1}function Po(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var YS=/[\n"\\]/g;function Cn(r){return r.replace(YS,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function zu(r,i,a,u,h,m,S,T){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),i!=null?S==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+En(i)):r.value!==""+En(i)&&(r.value=""+En(i)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),i!=null?Lu(r,S,En(i)):a!=null?Lu(r,S,En(a)):u!=null&&r.removeAttribute("value"),h==null&&m!=null&&(r.defaultChecked=!!m),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.name=""+En(T):r.removeAttribute("name")}function dm(r,i,a,u,h,m,S,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){Ru(r);return}a=a!=null?""+En(a):"",i=i!=null?""+En(i):a,T||i===r.value||(r.value=i),r.defaultValue=i}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=T?r.checked:!!u,r.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S),Ru(r)}function Lu(r,i,a){i==="number"&&Po(r.ownerDocument)===r||r.defaultValue===""+a||(r.defaultValue=""+a)}function hi(r,i,a,u){if(r=r.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<r.length;a++)h=i.hasOwnProperty("$"+r[a].value),r[a].selected!==h&&(r[a].selected=h),h&&u&&(r[a].defaultSelected=!0)}else{for(a=""+En(a),i=null,h=0;h<r.length;h++){if(r[h].value===a){r[h].selected=!0,u&&(r[h].defaultSelected=!0);return}i!==null||r[h].disabled||(i=r[h])}i!==null&&(i.selected=!0)}}function hm(r,i,a){if(i!=null&&(i=""+En(i),i!==r.value&&(r.value=i),a==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=a!=null?""+En(a):""}function pm(r,i,a,u){if(i==null){if(u!=null){if(a!=null)throw Error(s(92));if(he(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),i=a}a=En(i),r.defaultValue=a,u=r.textContent,u===a&&u!==""&&u!==null&&(r.value=u),Ru(r)}function pi(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var KS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mm(r,i,a){var u=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,a):typeof a!="number"||a===0||KS.has(i)?i==="float"?r.cssFloat=a:r[i]=(""+a).trim():r[i]=a+"px"}function gm(r,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var h in i)u=i[h],i.hasOwnProperty(h)&&a[h]!==u&&mm(r,h,u)}else for(var m in i)i.hasOwnProperty(m)&&mm(r,m,i[m])}function _u(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),JS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jo(r){return JS.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function sr(){}var Bu=null;function Hu(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var mi=null,gi=null;function ym(r){var i=ui(r);if(i&&(r=i.stateNode)){var a=r[tn]||null;e:switch(r=i.stateNode,i.type){case"input":if(zu(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Cn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var u=a[i];if(u!==r&&u.form===r.form){var h=u[tn]||null;if(!h)throw Error(s(90));zu(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)u=a[i],u.form===r.form&&fm(u)}break e;case"textarea":hm(r,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&hi(r,!!a.multiple,i,!1)}}}var Uu=!1;function bm(r,i,a){if(Uu)return r(i,a);Uu=!0;try{var u=r(i);return u}finally{if(Uu=!1,(mi!==null||gi!==null)&&(La(),mi&&(i=mi,r=gi,gi=mi=null,ym(i),r)))for(i=0;i<r.length;i++)ym(r[i])}}function ml(r,i){var a=r.stateNode;if(a===null)return null;var u=a[tn]||null;if(u===null)return null;a=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iu=!1;if(ir)try{var gl={};Object.defineProperty(gl,"passive",{get:function(){Iu=!0}}),window.addEventListener("test",gl,gl),window.removeEventListener("test",gl,gl)}catch{Iu=!1}var jr=null,qu=null,Fo=null;function xm(){if(Fo)return Fo;var r,i=qu,a=i.length,u,h="value"in jr?jr.value:jr.textContent,m=h.length;for(r=0;r<a&&i[r]===h[r];r++);var S=a-r;for(u=1;u<=S&&i[a-u]===h[m-u];u++);return Fo=h.slice(r,1<u?1-u:void 0)}function Xo(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Qo(){return!0}function vm(){return!1}function nn(r){function i(a,u,h,m,S){this._reactName=a,this._targetInst=h,this.type=u,this.nativeEvent=m,this.target=S,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(a=r[T],this[T]=a?a(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Qo:vm,this.isPropagationStopped=vm,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),i}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zo=nn(Cs),yl=y({},Cs,{view:0,detail:0}),FS=nn(yl),Vu,$u,bl,Wo=y({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==bl&&(bl&&r.type==="mousemove"?(Vu=r.screenX-bl.screenX,$u=r.screenY-bl.screenY):$u=Vu=0,bl=r),Vu)},movementY:function(r){return"movementY"in r?r.movementY:$u}}),Sm=nn(Wo),XS=y({},Wo,{dataTransfer:0}),QS=nn(XS),ZS=y({},yl,{relatedTarget:0}),Gu=nn(ZS),WS=y({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),ek=nn(WS),tk=y({},Cs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),nk=nn(tk),rk=y({},Cs,{data:0}),km=nn(rk),sk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ik={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ok(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=lk[r])?!!i[r]:!1}function Yu(){return ok}var ak=y({},yl,{key:function(r){if(r.key){var i=sk[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Xo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ik[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yu,charCode:function(r){return r.type==="keypress"?Xo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Xo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ck=nn(ak),uk=y({},Wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tm=nn(uk),fk=y({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yu}),dk=nn(fk),hk=y({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),pk=nn(hk),mk=y({},Wo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),gk=nn(mk),yk=y({},Cs,{newState:0,oldState:0}),bk=nn(yk),xk=[9,13,27,32],Ku=ir&&"CompositionEvent"in window,xl=null;ir&&"documentMode"in document&&(xl=document.documentMode);var vk=ir&&"TextEvent"in window&&!xl,Em=ir&&(!Ku||xl&&8<xl&&11>=xl),Cm=" ",Mm=!1;function wm(r,i){switch(r){case"keyup":return xk.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var yi=!1;function Sk(r,i){switch(r){case"compositionend":return Nm(i);case"keypress":return i.which!==32?null:(Mm=!0,Cm);case"textInput":return r=i.data,r===Cm&&Mm?null:r;default:return null}}function kk(r,i){if(yi)return r==="compositionend"||!Ku&&wm(r,i)?(r=xm(),Fo=qu=jr=null,yi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Em&&i.locale!=="ko"?null:i.data;default:return null}}var Tk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Am(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Tk[r.type]:i==="textarea"}function Om(r,i,a,u){mi?gi?gi.push(u):gi=[u]:mi=u,i=Va(i,"onChange"),0<i.length&&(a=new Zo("onChange","change",null,a,u),r.push({event:a,listeners:i}))}var vl=null,Sl=null;function Ek(r){d0(r,0)}function ea(r){var i=pl(r);if(fm(i))return r}function Dm(r,i){if(r==="change")return i}var jm=!1;if(ir){var Pu;if(ir){var Ju="oninput"in document;if(!Ju){var Rm=document.createElement("div");Rm.setAttribute("oninput","return;"),Ju=typeof Rm.oninput=="function"}Pu=Ju}else Pu=!1;jm=Pu&&(!document.documentMode||9<document.documentMode)}function zm(){vl&&(vl.detachEvent("onpropertychange",Lm),Sl=vl=null)}function Lm(r){if(r.propertyName==="value"&&ea(Sl)){var i=[];Om(i,Sl,r,Hu(r)),bm(Ek,i)}}function Ck(r,i,a){r==="focusin"?(zm(),vl=i,Sl=a,vl.attachEvent("onpropertychange",Lm)):r==="focusout"&&zm()}function Mk(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ea(Sl)}function wk(r,i){if(r==="click")return ea(i)}function Nk(r,i){if(r==="input"||r==="change")return ea(i)}function Ak(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var hn=typeof Object.is=="function"?Object.is:Ak;function kl(r,i){if(hn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),u=Object.keys(i);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var h=a[u];if(!K.call(i,h)||!hn(r[h],i[h]))return!1}return!0}function _m(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Bm(r,i){var a=_m(r);r=0;for(var u;a;){if(a.nodeType===3){if(u=r+a.textContent.length,r<=i&&u>=i)return{node:a,offset:i-r};r=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_m(a)}}function Hm(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Hm(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Um(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Po(r.document);i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=Po(r.document)}return i}function Fu(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var Ok=ir&&"documentMode"in document&&11>=document.documentMode,bi=null,Xu=null,Tl=null,Qu=!1;function Im(r,i,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qu||bi==null||bi!==Po(u)||(u=bi,"selectionStart"in u&&Fu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Tl&&kl(Tl,u)||(Tl=u,u=Va(Xu,"onSelect"),0<u.length&&(i=new Zo("onSelect","select",null,i,a),r.push({event:i,listeners:u}),i.target=bi)))}function Ms(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var xi={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},Zu={},qm={};ir&&(qm=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);function ws(r){if(Zu[r])return Zu[r];if(!xi[r])return r;var i=xi[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in qm)return Zu[r]=i[a];return r}var Vm=ws("animationend"),$m=ws("animationiteration"),Gm=ws("animationstart"),Dk=ws("transitionrun"),jk=ws("transitionstart"),Rk=ws("transitioncancel"),Ym=ws("transitionend"),Km=new Map,Wu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wu.push("scrollEnd");function In(r,i){Km.set(r,i),Es(i,[r])}var ta=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Mn=[],vi=0,ef=0;function na(){for(var r=vi,i=ef=vi=0;i<r;){var a=Mn[i];Mn[i++]=null;var u=Mn[i];Mn[i++]=null;var h=Mn[i];Mn[i++]=null;var m=Mn[i];if(Mn[i++]=null,u!==null&&h!==null){var S=u.pending;S===null?h.next=h:(h.next=S.next,S.next=h),u.pending=h}m!==0&&Pm(a,h,m)}}function ra(r,i,a,u){Mn[vi++]=r,Mn[vi++]=i,Mn[vi++]=a,Mn[vi++]=u,ef|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function tf(r,i,a,u){return ra(r,i,a,u),sa(r)}function Ns(r,i){return ra(r,null,null,i),sa(r)}function Pm(r,i,a){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a);for(var h=!1,m=r.return;m!==null;)m.childLanes|=a,u=m.alternate,u!==null&&(u.childLanes|=a),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(h=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,h&&i!==null&&(h=31-dn(a),r=m.hiddenUpdates,u=r[h],u===null?r[h]=[i]:u.push(i),i.lane=a|536870912),m):null}function sa(r){if(50<Yl)throw Yl=0,fd=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Si={};function zk(r,i,a,u){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(r,i,a,u){return new zk(r,i,a,u)}function nf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function lr(r,i){var a=r.alternate;return a===null?(a=pn(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&65011712,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a.refCleanup=r.refCleanup,a}function Jm(r,i){r.flags&=65011714;var a=r.alternate;return a===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,i=a.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function ia(r,i,a,u,h,m){var S=0;if(u=r,typeof r=="function")nf(r)&&(S=1);else if(typeof r=="string")S=UT(r,a,ae.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case ie:return r=pn(31,a,i,h),r.elementType=ie,r.lanes=m,r;case E:return As(a.children,h,m,i);case C:S=8,h|=24;break;case M:return r=pn(12,a,i,h|2),r.elementType=M,r.lanes=m,r;case _:return r=pn(13,a,i,h),r.elementType=_,r.lanes=m,r;case Y:return r=pn(19,a,i,h),r.elementType=Y,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case $:S=10;break e;case I:S=9;break e;case X:S=11;break e;case V:S=14;break e;case Z:S=16,u=null;break e}S=29,a=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=pn(S,a,i,h),i.elementType=r,i.type=u,i.lanes=m,i}function As(r,i,a,u){return r=pn(7,r,u,i),r.lanes=a,r}function rf(r,i,a){return r=pn(6,r,null,i),r.lanes=a,r}function Fm(r){var i=pn(18,null,null,0);return i.stateNode=r,i}function sf(r,i,a){return i=pn(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Xm=new WeakMap;function wn(r,i){if(typeof r=="object"&&r!==null){var a=Xm.get(r);return a!==void 0?a:(i={value:r,source:i,stack:ne(i)},Xm.set(r,i),i)}return{value:r,source:i,stack:ne(i)}}var ki=[],Ti=0,la=null,El=0,Nn=[],An=0,Rr=null,Pn=1,Jn="";function or(r,i){ki[Ti++]=El,ki[Ti++]=la,la=r,El=i}function Qm(r,i,a){Nn[An++]=Pn,Nn[An++]=Jn,Nn[An++]=Rr,Rr=r;var u=Pn;r=Jn;var h=32-dn(u)-1;u&=~(1<<h),a+=1;var m=32-dn(i)+h;if(30<m){var S=h-h%5;m=(u&(1<<S)-1).toString(32),u>>=S,h-=S,Pn=1<<32-dn(i)+h|a<<h|u,Jn=m+r}else Pn=1<<m|a<<h|u,Jn=r}function lf(r){r.return!==null&&(or(r,1),Qm(r,1,0))}function of(r){for(;r===la;)la=ki[--Ti],ki[Ti]=null,El=ki[--Ti],ki[Ti]=null;for(;r===Rr;)Rr=Nn[--An],Nn[An]=null,Jn=Nn[--An],Nn[An]=null,Pn=Nn[--An],Nn[An]=null}function Zm(r,i){Nn[An++]=Pn,Nn[An++]=Jn,Nn[An++]=Rr,Pn=i.id,Jn=i.overflow,Rr=r}var Bt=null,ot=null,Ve=!1,zr=null,On=!1,af=Error(s(519));function Lr(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cl(wn(i,r)),af}function Wm(r){var i=r.stateNode,a=r.type,u=r.memoizedProps;switch(i[_t]=r,i[tn]=u,a){case"dialog":Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":case"embed":Ue("load",i);break;case"video":case"audio":for(a=0;a<Pl.length;a++)Ue(Pl[a],i);break;case"source":Ue("error",i);break;case"img":case"image":case"link":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"input":Ue("invalid",i),dm(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ue("invalid",i);break;case"textarea":Ue("invalid",i),pm(i,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||u.suppressHydrationWarning===!0||g0(i.textContent,a)?(u.popover!=null&&(Ue("beforetoggle",i),Ue("toggle",i)),u.onScroll!=null&&Ue("scroll",i),u.onScrollEnd!=null&&Ue("scrollend",i),u.onClick!=null&&(i.onclick=sr),i=!0):i=!1,i||Lr(r,!0)}function eg(r){for(Bt=r.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:On=!1;return;case 27:case 3:On=!0;return;default:Bt=Bt.return}}function Ei(r){if(r!==Bt)return!1;if(!Ve)return eg(r),Ve=!0,!1;var i=r.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=r.type,a=!(a!=="form"&&a!=="button")||Md(r.type,r.memoizedProps)),a=!a),a&&ot&&Lr(r),eg(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));ot=C0(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));ot=C0(r)}else i===27?(i=ot,Fr(r.type)?(r=Dd,Dd=null,ot=r):ot=i):ot=Bt?jn(r.stateNode.nextSibling):null;return!0}function Os(){ot=Bt=null,Ve=!1}function cf(){var r=zr;return r!==null&&(on===null?on=r:on.push.apply(on,r),zr=null),r}function Cl(r){zr===null?zr=[r]:zr.push(r)}var uf=N(null),Ds=null,ar=null;function _r(r,i,a){re(uf,i._currentValue),i._currentValue=a}function cr(r){r._currentValue=uf.current,q(uf)}function ff(r,i,a){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===a)break;r=r.return}}function df(r,i,a,u){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var m=h.dependencies;if(m!==null){var S=h.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=h;for(var w=0;w<i.length;w++)if(T.context===i[w]){m.lanes|=a,T=m.alternate,T!==null&&(T.lanes|=a),ff(m.return,a,r),u||(S=null);break e}m=T.next}}else if(h.tag===18){if(S=h.return,S===null)throw Error(s(341));S.lanes|=a,m=S.alternate,m!==null&&(m.lanes|=a),ff(S,a,r),S=null}else S=h.child;if(S!==null)S.return=h;else for(S=h;S!==null;){if(S===r){S=null;break}if(h=S.sibling,h!==null){h.return=S.return,S=h;break}S=S.return}h=S}}function Ci(r,i,a,u){r=null;for(var h=i,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var S=h.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var T=h.type;hn(h.pendingProps.value,S.value)||(r!==null?r.push(T):r=[T])}}else if(h===De.current){if(S=h.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(Zl):r=[Zl])}h=h.return}r!==null&&df(i,r,a,u),i.flags|=262144}function oa(r){for(r=r.firstContext;r!==null;){if(!hn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function js(r){Ds=r,ar=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Ht(r){return tg(Ds,r)}function aa(r,i){return Ds===null&&js(r),tg(r,i)}function tg(r,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ar===null){if(r===null)throw Error(s(308));ar=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else ar=ar.next=i;return a}var Lk=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(a,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(a){return a()})}},_k=n.unstable_scheduleCallback,Bk=n.unstable_NormalPriority,kt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hf(){return{controller:new Lk,data:new Map,refCount:0}}function Ml(r){r.refCount--,r.refCount===0&&_k(Bk,function(){r.controller.abort()})}var wl=null,pf=0,Mi=0,wi=null;function Hk(r,i){if(wl===null){var a=wl=[];pf=0,Mi=yd(),wi={status:"pending",value:void 0,then:function(u){a.push(u)}}}return pf++,i.then(ng,ng),i}function ng(){if(--pf===0&&wl!==null){wi!==null&&(wi.status="fulfilled");var r=wl;wl=null,Mi=0,wi=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function Uk(r,i){var a=[],u={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(u.status="rejected",u.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),u}var rg=B.S;B.S=function(r,i){Iy=ge(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Hk(r,i),rg!==null&&rg(r,i)};var Rs=N(null);function mf(){var r=Rs.current;return r!==null?r:st.pooledCache}function ca(r,i){i===null?re(Rs,Rs.current):re(Rs,i.pool)}function sg(){var r=mf();return r===null?null:{parent:kt._currentValue,pool:r}}var Ni=Error(s(460)),gf=Error(s(474)),ua=Error(s(542)),fa={then:function(){}};function ig(r){return r=r.status,r==="fulfilled"||r==="rejected"}function lg(r,i,a){switch(a=r[a],a===void 0?r.push(i):a!==i&&(i.then(sr,sr),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,ag(r),r;default:if(typeof i.status=="string")i.then(sr,sr);else{if(r=st,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=u}},function(u){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,ag(r),r}throw Ls=i,Ni}}function zs(r){try{var i=r._init;return i(r._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ls=a,Ni):a}}var Ls=null;function og(){if(Ls===null)throw Error(s(459));var r=Ls;return Ls=null,r}function ag(r){if(r===Ni||r===ua)throw Error(s(483))}var Ai=null,Nl=0;function da(r){var i=Nl;return Nl+=1,Ai===null&&(Ai=[]),lg(Ai,r,i)}function Al(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function ha(r,i){throw i.$$typeof===x?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function cg(r){function i(D,A){if(r){var j=D.deletions;j===null?(D.deletions=[A],D.flags|=16):j.push(A)}}function a(D,A){if(!r)return null;for(;A!==null;)i(D,A),A=A.sibling;return null}function u(D){for(var A=new Map;D!==null;)D.key!==null?A.set(D.key,D):A.set(D.index,D),D=D.sibling;return A}function h(D,A){return D=lr(D,A),D.index=0,D.sibling=null,D}function m(D,A,j){return D.index=j,r?(j=D.alternate,j!==null?(j=j.index,j<A?(D.flags|=67108866,A):j):(D.flags|=67108866,A)):(D.flags|=1048576,A)}function S(D){return r&&D.alternate===null&&(D.flags|=67108866),D}function T(D,A,j,P){return A===null||A.tag!==6?(A=rf(j,D.mode,P),A.return=D,A):(A=h(A,j),A.return=D,A)}function w(D,A,j,P){var xe=j.type;return xe===E?G(D,A,j.props.children,P,j.key):A!==null&&(A.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Z&&zs(xe)===A.type)?(A=h(A,j.props),Al(A,j),A.return=D,A):(A=ia(j.type,j.key,j.props,null,D.mode,P),Al(A,j),A.return=D,A)}function R(D,A,j,P){return A===null||A.tag!==4||A.stateNode.containerInfo!==j.containerInfo||A.stateNode.implementation!==j.implementation?(A=sf(j,D.mode,P),A.return=D,A):(A=h(A,j.children||[]),A.return=D,A)}function G(D,A,j,P,xe){return A===null||A.tag!==7?(A=As(j,D.mode,P,xe),A.return=D,A):(A=h(A,j),A.return=D,A)}function J(D,A,j){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=rf(""+A,D.mode,j),A.return=D,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case v:return j=ia(A.type,A.key,A.props,null,D.mode,j),Al(j,A),j.return=D,j;case k:return A=sf(A,D.mode,j),A.return=D,A;case Z:return A=zs(A),J(D,A,j)}if(he(A)||Oe(A))return A=As(A,D.mode,j,null),A.return=D,A;if(typeof A.then=="function")return J(D,da(A),j);if(A.$$typeof===$)return J(D,aa(D,A),j);ha(D,A)}return null}function L(D,A,j,P){var xe=A!==null?A.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return xe!==null?null:T(D,A,""+j,P);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case v:return j.key===xe?w(D,A,j,P):null;case k:return j.key===xe?R(D,A,j,P):null;case Z:return j=zs(j),L(D,A,j,P)}if(he(j)||Oe(j))return xe!==null?null:G(D,A,j,P,null);if(typeof j.then=="function")return L(D,A,da(j),P);if(j.$$typeof===$)return L(D,A,aa(D,j),P);ha(D,j)}return null}function U(D,A,j,P,xe){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return D=D.get(j)||null,T(A,D,""+P,xe);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case v:return D=D.get(P.key===null?j:P.key)||null,w(A,D,P,xe);case k:return D=D.get(P.key===null?j:P.key)||null,R(A,D,P,xe);case Z:return P=zs(P),U(D,A,j,P,xe)}if(he(P)||Oe(P))return D=D.get(j)||null,G(A,D,P,xe,null);if(typeof P.then=="function")return U(D,A,j,da(P),xe);if(P.$$typeof===$)return U(D,A,j,aa(A,P),xe);ha(A,P)}return null}function ce(D,A,j,P){for(var xe=null,Pe=null,de=A,je=A=0,qe=null;de!==null&&je<j.length;je++){de.index>je?(qe=de,de=null):qe=de.sibling;var Je=L(D,de,j[je],P);if(Je===null){de===null&&(de=qe);break}r&&de&&Je.alternate===null&&i(D,de),A=m(Je,A,je),Pe===null?xe=Je:Pe.sibling=Je,Pe=Je,de=qe}if(je===j.length)return a(D,de),Ve&&or(D,je),xe;if(de===null){for(;je<j.length;je++)de=J(D,j[je],P),de!==null&&(A=m(de,A,je),Pe===null?xe=de:Pe.sibling=de,Pe=de);return Ve&&or(D,je),xe}for(de=u(de);je<j.length;je++)qe=U(de,D,je,j[je],P),qe!==null&&(r&&qe.alternate!==null&&de.delete(qe.key===null?je:qe.key),A=m(qe,A,je),Pe===null?xe=qe:Pe.sibling=qe,Pe=qe);return r&&de.forEach(function(es){return i(D,es)}),Ve&&or(D,je),xe}function ke(D,A,j,P){if(j==null)throw Error(s(151));for(var xe=null,Pe=null,de=A,je=A=0,qe=null,Je=j.next();de!==null&&!Je.done;je++,Je=j.next()){de.index>je?(qe=de,de=null):qe=de.sibling;var es=L(D,de,Je.value,P);if(es===null){de===null&&(de=qe);break}r&&de&&es.alternate===null&&i(D,de),A=m(es,A,je),Pe===null?xe=es:Pe.sibling=es,Pe=es,de=qe}if(Je.done)return a(D,de),Ve&&or(D,je),xe;if(de===null){for(;!Je.done;je++,Je=j.next())Je=J(D,Je.value,P),Je!==null&&(A=m(Je,A,je),Pe===null?xe=Je:Pe.sibling=Je,Pe=Je);return Ve&&or(D,je),xe}for(de=u(de);!Je.done;je++,Je=j.next())Je=U(de,D,je,Je.value,P),Je!==null&&(r&&Je.alternate!==null&&de.delete(Je.key===null?je:Je.key),A=m(Je,A,je),Pe===null?xe=Je:Pe.sibling=Je,Pe=Je);return r&&de.forEach(function(XT){return i(D,XT)}),Ve&&or(D,je),xe}function nt(D,A,j,P){if(typeof j=="object"&&j!==null&&j.type===E&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case v:e:{for(var xe=j.key;A!==null;){if(A.key===xe){if(xe=j.type,xe===E){if(A.tag===7){a(D,A.sibling),P=h(A,j.props.children),P.return=D,D=P;break e}}else if(A.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Z&&zs(xe)===A.type){a(D,A.sibling),P=h(A,j.props),Al(P,j),P.return=D,D=P;break e}a(D,A);break}else i(D,A);A=A.sibling}j.type===E?(P=As(j.props.children,D.mode,P,j.key),P.return=D,D=P):(P=ia(j.type,j.key,j.props,null,D.mode,P),Al(P,j),P.return=D,D=P)}return S(D);case k:e:{for(xe=j.key;A!==null;){if(A.key===xe)if(A.tag===4&&A.stateNode.containerInfo===j.containerInfo&&A.stateNode.implementation===j.implementation){a(D,A.sibling),P=h(A,j.children||[]),P.return=D,D=P;break e}else{a(D,A);break}else i(D,A);A=A.sibling}P=sf(j,D.mode,P),P.return=D,D=P}return S(D);case Z:return j=zs(j),nt(D,A,j,P)}if(he(j))return ce(D,A,j,P);if(Oe(j)){if(xe=Oe(j),typeof xe!="function")throw Error(s(150));return j=xe.call(j),ke(D,A,j,P)}if(typeof j.then=="function")return nt(D,A,da(j),P);if(j.$$typeof===$)return nt(D,A,aa(D,j),P);ha(D,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,A!==null&&A.tag===6?(a(D,A.sibling),P=h(A,j),P.return=D,D=P):(a(D,A),P=rf(j,D.mode,P),P.return=D,D=P),S(D)):a(D,A)}return function(D,A,j,P){try{Nl=0;var xe=nt(D,A,j,P);return Ai=null,xe}catch(de){if(de===Ni||de===ua)throw de;var Pe=pn(29,de,null,D.mode);return Pe.lanes=P,Pe.return=D,Pe}finally{}}}var _s=cg(!0),ug=cg(!1),Br=!1;function yf(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bf(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Hr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ur(r,i,a){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Xe&2)!==0){var h=u.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),u.pending=i,i=sa(r),Pm(r,null,a),i}return ra(r,u,i,a),sa(r)}function Ol(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,a|=u,i.lanes=a,tm(r,a)}}function xf(r,i){var a=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=S:m=m.next=S,a=a.next}while(a!==null);m===null?h=m=i:m=m.next=i}else h=m=i;a={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}var vf=!1;function Dl(){if(vf){var r=wi;if(r!==null)throw r}}function jl(r,i,a,u){vf=!1;var h=r.updateQueue;Br=!1;var m=h.firstBaseUpdate,S=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var w=T,R=w.next;w.next=null,S===null?m=R:S.next=R,S=w;var G=r.alternate;G!==null&&(G=G.updateQueue,T=G.lastBaseUpdate,T!==S&&(T===null?G.firstBaseUpdate=R:T.next=R,G.lastBaseUpdate=w))}if(m!==null){var J=h.baseState;S=0,G=R=w=null,T=m;do{var L=T.lane&-536870913,U=L!==T.lane;if(U?(Ie&L)===L:(u&L)===L){L!==0&&L===Mi&&(vf=!0),G!==null&&(G=G.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ce=r,ke=T;L=i;var nt=a;switch(ke.tag){case 1:if(ce=ke.payload,typeof ce=="function"){J=ce.call(nt,J,L);break e}J=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=ke.payload,L=typeof ce=="function"?ce.call(nt,J,L):ce,L==null)break e;J=y({},J,L);break e;case 2:Br=!0}}L=T.callback,L!==null&&(r.flags|=64,U&&(r.flags|=8192),U=h.callbacks,U===null?h.callbacks=[L]:U.push(L))}else U={lane:L,tag:T.tag,payload:T.payload,callback:T.callback,next:null},G===null?(R=G=U,w=J):G=G.next=U,S|=L;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;U=T,T=U.next,U.next=null,h.lastBaseUpdate=U,h.shared.pending=null}}while(!0);G===null&&(w=J),h.baseState=w,h.firstBaseUpdate=R,h.lastBaseUpdate=G,m===null&&(h.shared.lanes=0),Gr|=S,r.lanes=S,r.memoizedState=J}}function fg(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function dg(r,i){var a=r.callbacks;if(a!==null)for(r.callbacks=null,r=0;r<a.length;r++)fg(a[r],i)}var Oi=N(null),pa=N(0);function hg(r,i){r=br,re(pa,r),re(Oi,i),br=r|i.baseLanes}function Sf(){re(pa,br),re(Oi,Oi.current)}function kf(){br=pa.current,q(Oi),q(pa)}var mn=N(null),Dn=null;function Ir(r){var i=r.alternate;re(xt,xt.current&1),re(mn,r),Dn===null&&(i===null||Oi.current!==null||i.memoizedState!==null)&&(Dn=r)}function Tf(r){re(xt,xt.current),re(mn,r),Dn===null&&(Dn=r)}function pg(r){r.tag===22?(re(xt,xt.current),re(mn,r),Dn===null&&(Dn=r)):qr()}function qr(){re(xt,xt.current),re(mn,mn.current)}function gn(r){q(mn),Dn===r&&(Dn=null),q(xt)}var xt=N(0);function ma(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ad(a)||Od(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ur=0,Ae=null,et=null,Tt=null,ga=!1,Di=!1,Bs=!1,ya=0,Rl=0,ji=null,Ik=0;function mt(){throw Error(s(321))}function Ef(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!hn(r[a],i[a]))return!1;return!0}function Cf(r,i,a,u,h,m){return ur=m,Ae=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=r===null||r.memoizedState===null?Qg:If,Bs=!1,m=a(u,h),Bs=!1,Di&&(m=gg(i,a,u,h)),mg(r),m}function mg(r){B.H=_l;var i=et!==null&&et.next!==null;if(ur=0,Tt=et=Ae=null,ga=!1,Rl=0,ji=null,i)throw Error(s(300));r===null||Et||(r=r.dependencies,r!==null&&oa(r)&&(Et=!0))}function gg(r,i,a,u){Ae=r;var h=0;do{if(Di&&(ji=null),Rl=0,Di=!1,25<=h)throw Error(s(301));if(h+=1,Tt=et=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}B.H=Zg,m=i(a,u)}while(Di);return m}function qk(){var r=B.H,i=r.useState()[0];return i=typeof i.then=="function"?zl(i):i,r=r.useState()[0],(et!==null?et.memoizedState:null)!==r&&(Ae.flags|=1024),i}function Mf(){var r=ya!==0;return ya=0,r}function wf(r,i,a){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~a}function Nf(r){if(ga){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ga=!1}ur=0,Tt=et=Ae=null,Di=!1,Rl=ya=0,ji=null}function Xt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Ae.memoizedState=Tt=r:Tt=Tt.next=r,Tt}function vt(){if(et===null){var r=Ae.alternate;r=r!==null?r.memoizedState:null}else r=et.next;var i=Tt===null?Ae.memoizedState:Tt.next;if(i!==null)Tt=i,et=r;else{if(r===null)throw Ae.alternate===null?Error(s(467)):Error(s(310));et=r,r={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Tt===null?Ae.memoizedState=Tt=r:Tt=Tt.next=r}return Tt}function ba(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zl(r){var i=Rl;return Rl+=1,ji===null&&(ji=[]),r=lg(ji,r,i),i=Ae,(Tt===null?i.memoizedState:Tt.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?Qg:If),r}function xa(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return zl(r);if(r.$$typeof===$)return Ht(r)}throw Error(s(438,String(r)))}function Af(r){var i=null,a=Ae.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var u=Ae.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=ba(),Ae.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(r),u=0;u<r;u++)a[u]=Te;return i.index++,a}function fr(r,i){return typeof i=="function"?i(r):i}function va(r){var i=vt();return Of(i,et,r)}function Of(r,i,a){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var h=r.baseQueue,m=u.pending;if(m!==null){if(h!==null){var S=h.next;h.next=m.next,m.next=S}i.baseQueue=h=m,u.pending=null}if(m=r.baseState,h===null)r.memoizedState=m;else{i=h.next;var T=S=null,w=null,R=i,G=!1;do{var J=R.lane&-536870913;if(J!==R.lane?(Ie&J)===J:(ur&J)===J){var L=R.revertLane;if(L===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),J===Mi&&(G=!0);else if((ur&L)===L){R=R.next,L===Mi&&(G=!0);continue}else J={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},w===null?(T=w=J,S=m):w=w.next=J,Ae.lanes|=L,Gr|=L;J=R.action,Bs&&a(m,J),m=R.hasEagerState?R.eagerState:a(m,J)}else L={lane:J,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},w===null?(T=w=L,S=m):w=w.next=L,Ae.lanes|=J,Gr|=J;R=R.next}while(R!==null&&R!==i);if(w===null?S=m:w.next=T,!hn(m,r.memoizedState)&&(Et=!0,G&&(a=wi,a!==null)))throw a;r.memoizedState=m,r.baseState=S,r.baseQueue=w,u.lastRenderedState=m}return h===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Df(r){var i=vt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=r;var u=a.dispatch,h=a.pending,m=i.memoizedState;if(h!==null){a.pending=null;var S=h=h.next;do m=r(m,S.action),S=S.next;while(S!==h);hn(m,i.memoizedState)||(Et=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,u]}function yg(r,i,a){var u=Ae,h=vt(),m=Ve;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=i();var S=!hn((et||h).memoizedState,a);if(S&&(h.memoizedState=a,Et=!0),h=h.queue,zf(vg.bind(null,u,h,r),[r]),h.getSnapshot!==i||S||Tt!==null&&Tt.memoizedState.tag&1){if(u.flags|=2048,Ri(9,{destroy:void 0},xg.bind(null,u,h,a,i),null),st===null)throw Error(s(349));m||(ur&127)!==0||bg(u,i,a)}return a}function bg(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=Ae.updateQueue,i===null?(i=ba(),Ae.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function xg(r,i,a,u){i.value=a,i.getSnapshot=u,Sg(i)&&kg(r)}function vg(r,i,a){return a(function(){Sg(i)&&kg(r)})}function Sg(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!hn(r,a)}catch{return!0}}function kg(r){var i=Ns(r,2);i!==null&&an(i,r,2)}function jf(r){var i=Xt();if(typeof r=="function"){var a=r;if(r=a(),Bs){Or(!0);try{a()}finally{Or(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:r},i}function Tg(r,i,a,u){return r.baseState=a,Of(r,et,typeof u=="function"?u:fr)}function Vk(r,i,a,u,h){if(Ta(r))throw Error(s(485));if(r=i.action,r!==null){var m={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){m.listeners.push(S)}};B.T!==null?a(!0):m.isTransition=!1,u(m),a=i.pending,a===null?(m.next=i.pending=m,Eg(i,m)):(m.next=a.next,i.pending=a.next=m)}}function Eg(r,i){var a=i.action,u=i.payload,h=r.state;if(i.isTransition){var m=B.T,S={};B.T=S;try{var T=a(h,u),w=B.S;w!==null&&w(S,T),Cg(r,i,T)}catch(R){Rf(r,i,R)}finally{m!==null&&S.types!==null&&(m.types=S.types),B.T=m}}else try{m=a(h,u),Cg(r,i,m)}catch(R){Rf(r,i,R)}}function Cg(r,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Mg(r,i,u)},function(u){return Rf(r,i,u)}):Mg(r,i,a)}function Mg(r,i,a){i.status="fulfilled",i.value=a,wg(i),r.state=a,i=r.pending,i!==null&&(a=i.next,a===i?r.pending=null:(a=a.next,i.next=a,Eg(r,a)))}function Rf(r,i,a){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=a,wg(i),i=i.next;while(i!==u)}r.action=null}function wg(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function Ng(r,i){return i}function Ag(r,i){if(Ve){var a=st.formState;if(a!==null){e:{var u=Ae;if(Ve){if(ot){t:{for(var h=ot,m=On;h.nodeType!==8;){if(!m){h=null;break t}if(h=jn(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){ot=jn(h.nextSibling),u=h.data==="F!";break e}}Lr(u)}u=!1}u&&(i=a[0])}}return a=Xt(),a.memoizedState=a.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ng,lastRenderedState:i},a.queue=u,a=Jg.bind(null,Ae,u),u.dispatch=a,u=jf(!1),m=Uf.bind(null,Ae,!1,u.queue),u=Xt(),h={state:i,dispatch:null,action:r,pending:null},u.queue=h,a=Vk.bind(null,Ae,h,m,a),h.dispatch=a,u.memoizedState=r,[i,a,!1]}function Og(r){var i=vt();return Dg(i,et,r)}function Dg(r,i,a){if(i=Of(r,i,Ng)[0],r=va(fr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=zl(i)}catch(S){throw S===Ni?ua:S}else u=i;i=vt();var h=i.queue,m=h.dispatch;return a!==i.memoizedState&&(Ae.flags|=2048,Ri(9,{destroy:void 0},$k.bind(null,h,a),null)),[u,m,r]}function $k(r,i){r.action=i}function jg(r){var i=vt(),a=et;if(a!==null)return Dg(i,a,r);vt(),i=i.memoizedState,a=vt();var u=a.queue.dispatch;return a.memoizedState=r,[i,u,!1]}function Ri(r,i,a,u){return r={tag:r,create:a,deps:u,inst:i,next:null},i=Ae.updateQueue,i===null&&(i=ba(),Ae.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=r.next=r:(u=a.next,a.next=r,r.next=u,i.lastEffect=r),r}function Rg(){return vt().memoizedState}function Sa(r,i,a,u){var h=Xt();Ae.flags|=r,h.memoizedState=Ri(1|i,{destroy:void 0},a,u===void 0?null:u)}function ka(r,i,a,u){var h=vt();u=u===void 0?null:u;var m=h.memoizedState.inst;et!==null&&u!==null&&Ef(u,et.memoizedState.deps)?h.memoizedState=Ri(i,m,a,u):(Ae.flags|=r,h.memoizedState=Ri(1|i,m,a,u))}function zg(r,i){Sa(8390656,8,r,i)}function zf(r,i){ka(2048,8,r,i)}function Gk(r){Ae.flags|=4;var i=Ae.updateQueue;if(i===null)i=ba(),Ae.updateQueue=i,i.events=[r];else{var a=i.events;a===null?i.events=[r]:a.push(r)}}function Lg(r){var i=vt().memoizedState;return Gk({ref:i,nextImpl:r}),function(){if((Xe&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function _g(r,i){return ka(4,2,r,i)}function Bg(r,i){return ka(4,4,r,i)}function Hg(r,i){if(typeof i=="function"){r=r();var a=i(r);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Ug(r,i,a){a=a!=null?a.concat([r]):null,ka(4,4,Hg.bind(null,i,r),a)}function Lf(){}function Ig(r,i){var a=vt();i=i===void 0?null:i;var u=a.memoizedState;return i!==null&&Ef(i,u[1])?u[0]:(a.memoizedState=[r,i],r)}function qg(r,i){var a=vt();i=i===void 0?null:i;var u=a.memoizedState;if(i!==null&&Ef(i,u[1]))return u[0];if(u=r(),Bs){Or(!0);try{r()}finally{Or(!1)}}return a.memoizedState=[u,i],u}function _f(r,i,a){return a===void 0||(ur&1073741824)!==0&&(Ie&261930)===0?r.memoizedState=i:(r.memoizedState=a,r=Vy(),Ae.lanes|=r,Gr|=r,a)}function Vg(r,i,a,u){return hn(a,i)?a:Oi.current!==null?(r=_f(r,a,u),hn(r,i)||(Et=!0),r):(ur&42)===0||(ur&1073741824)!==0&&(Ie&261930)===0?(Et=!0,r.memoizedState=a):(r=Vy(),Ae.lanes|=r,Gr|=r,i)}function $g(r,i,a,u,h){var m=ee.p;ee.p=m!==0&&8>m?m:8;var S=B.T,T={};B.T=T,Uf(r,!1,i,a);try{var w=h(),R=B.S;if(R!==null&&R(T,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var G=Uk(w,u);Ll(r,i,G,xn(r))}else Ll(r,i,u,xn(r))}catch(J){Ll(r,i,{then:function(){},status:"rejected",reason:J},xn())}finally{ee.p=m,S!==null&&T.types!==null&&(S.types=T.types),B.T=S}}function Yk(){}function Bf(r,i,a,u){if(r.tag!==5)throw Error(s(476));var h=Gg(r).queue;$g(r,h,i,me,a===null?Yk:function(){return Yg(r),a(u)})}function Gg(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:me},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:a},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Yg(r){var i=Gg(r);i.next===null&&(i=r.alternate.memoizedState),Ll(r,i.next.queue,{},xn())}function Hf(){return Ht(Zl)}function Kg(){return vt().memoizedState}function Pg(){return vt().memoizedState}function Kk(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var a=xn();r=Hr(a);var u=Ur(i,r,a);u!==null&&(an(u,i,a),Ol(u,i,a)),i={cache:hf()},r.payload=i;return}i=i.return}}function Pk(r,i,a){var u=xn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ta(r)?Fg(i,a):(a=tf(r,i,a,u),a!==null&&(an(a,r,u),Xg(a,i,u)))}function Jg(r,i,a){var u=xn();Ll(r,i,a,u)}function Ll(r,i,a,u){var h={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ta(r))Fg(i,h);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var S=i.lastRenderedState,T=m(S,a);if(h.hasEagerState=!0,h.eagerState=T,hn(T,S))return ra(r,i,h,0),st===null&&na(),!1}catch{}finally{}if(a=tf(r,i,h,u),a!==null)return an(a,r,u),Xg(a,i,u),!0}return!1}function Uf(r,i,a,u){if(u={lane:2,revertLane:yd(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ta(r)){if(i)throw Error(s(479))}else i=tf(r,a,u,2),i!==null&&an(i,r,2)}function Ta(r){var i=r.alternate;return r===Ae||i!==null&&i===Ae}function Fg(r,i){Di=ga=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function Xg(r,i,a){if((a&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,a|=u,i.lanes=a,tm(r,a)}}var _l={readContext:Ht,use:xa,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};_l.useEffectEvent=mt;var Qg={readContext:Ht,use:xa,useCallback:function(r,i){return Xt().memoizedState=[r,i===void 0?null:i],r},useContext:Ht,useEffect:zg,useImperativeHandle:function(r,i,a){a=a!=null?a.concat([r]):null,Sa(4194308,4,Hg.bind(null,i,r),a)},useLayoutEffect:function(r,i){return Sa(4194308,4,r,i)},useInsertionEffect:function(r,i){Sa(4,2,r,i)},useMemo:function(r,i){var a=Xt();i=i===void 0?null:i;var u=r();if(Bs){Or(!0);try{r()}finally{Or(!1)}}return a.memoizedState=[u,i],u},useReducer:function(r,i,a){var u=Xt();if(a!==void 0){var h=a(i);if(Bs){Or(!0);try{a(i)}finally{Or(!1)}}}else h=i;return u.memoizedState=u.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},u.queue=r,r=r.dispatch=Pk.bind(null,Ae,r),[u.memoizedState,r]},useRef:function(r){var i=Xt();return r={current:r},i.memoizedState=r},useState:function(r){r=jf(r);var i=r.queue,a=Jg.bind(null,Ae,i);return i.dispatch=a,[r.memoizedState,a]},useDebugValue:Lf,useDeferredValue:function(r,i){var a=Xt();return _f(a,r,i)},useTransition:function(){var r=jf(!1);return r=$g.bind(null,Ae,r.queue,!0,!1),Xt().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,a){var u=Ae,h=Xt();if(Ve){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),st===null)throw Error(s(349));(Ie&127)!==0||bg(u,i,a)}h.memoizedState=a;var m={value:a,getSnapshot:i};return h.queue=m,zg(vg.bind(null,u,m,r),[r]),u.flags|=2048,Ri(9,{destroy:void 0},xg.bind(null,u,m,a,i),null),a},useId:function(){var r=Xt(),i=st.identifierPrefix;if(Ve){var a=Jn,u=Pn;a=(u&~(1<<32-dn(u)-1)).toString(32)+a,i="_"+i+"R_"+a,a=ya++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Ik++,i="_"+i+"r_"+a.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Hf,useFormState:Ag,useActionState:Ag,useOptimistic:function(r){var i=Xt();i.memoizedState=i.baseState=r;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Uf.bind(null,Ae,!0,a),a.dispatch=i,[r,i]},useMemoCache:Af,useCacheRefresh:function(){return Xt().memoizedState=Kk.bind(null,Ae)},useEffectEvent:function(r){var i=Xt(),a={impl:r};return i.memoizedState=a,function(){if((Xe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},If={readContext:Ht,use:xa,useCallback:Ig,useContext:Ht,useEffect:zf,useImperativeHandle:Ug,useInsertionEffect:_g,useLayoutEffect:Bg,useMemo:qg,useReducer:va,useRef:Rg,useState:function(){return va(fr)},useDebugValue:Lf,useDeferredValue:function(r,i){var a=vt();return Vg(a,et.memoizedState,r,i)},useTransition:function(){var r=va(fr)[0],i=vt().memoizedState;return[typeof r=="boolean"?r:zl(r),i]},useSyncExternalStore:yg,useId:Kg,useHostTransitionStatus:Hf,useFormState:Og,useActionState:Og,useOptimistic:function(r,i){var a=vt();return Tg(a,et,r,i)},useMemoCache:Af,useCacheRefresh:Pg};If.useEffectEvent=Lg;var Zg={readContext:Ht,use:xa,useCallback:Ig,useContext:Ht,useEffect:zf,useImperativeHandle:Ug,useInsertionEffect:_g,useLayoutEffect:Bg,useMemo:qg,useReducer:Df,useRef:Rg,useState:function(){return Df(fr)},useDebugValue:Lf,useDeferredValue:function(r,i){var a=vt();return et===null?_f(a,r,i):Vg(a,et.memoizedState,r,i)},useTransition:function(){var r=Df(fr)[0],i=vt().memoizedState;return[typeof r=="boolean"?r:zl(r),i]},useSyncExternalStore:yg,useId:Kg,useHostTransitionStatus:Hf,useFormState:jg,useActionState:jg,useOptimistic:function(r,i){var a=vt();return et!==null?Tg(a,et,r,i):(a.baseState=r,[r,a.queue.dispatch])},useMemoCache:Af,useCacheRefresh:Pg};Zg.useEffectEvent=Lg;function qf(r,i,a,u){i=r.memoizedState,a=a(u,i),a=a==null?i:y({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Vf={enqueueSetState:function(r,i,a){r=r._reactInternals;var u=xn(),h=Hr(u);h.payload=i,a!=null&&(h.callback=a),i=Ur(r,h,u),i!==null&&(an(i,r,u),Ol(i,r,u))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var u=xn(),h=Hr(u);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Ur(r,h,u),i!==null&&(an(i,r,u),Ol(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=xn(),u=Hr(a);u.tag=2,i!=null&&(u.callback=i),i=Ur(r,u,a),i!==null&&(an(i,r,a),Ol(i,r,a))}};function Wg(r,i,a,u,h,m,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,S):i.prototype&&i.prototype.isPureReactComponent?!kl(a,u)||!kl(h,m):!0}function ey(r,i,a,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,u),i.state!==r&&Vf.enqueueReplaceState(i,i.state,null)}function Hs(r,i){var a=i;if("ref"in i){a={};for(var u in i)u!=="ref"&&(a[u]=i[u])}if(r=r.defaultProps){a===i&&(a=y({},a));for(var h in r)a[h]===void 0&&(a[h]=r[h])}return a}function ty(r){ta(r)}function ny(r){console.error(r)}function ry(r){ta(r)}function Ea(r,i){try{var a=r.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function sy(r,i,a){try{var u=r.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function $f(r,i,a){return a=Hr(a),a.tag=3,a.payload={element:null},a.callback=function(){Ea(r,i)},a}function iy(r){return r=Hr(r),r.tag=3,r}function ly(r,i,a,u){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=u.value;r.payload=function(){return h(m)},r.callback=function(){sy(i,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){sy(i,a,u),typeof h!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function Jk(r,i,a,u,h){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=a.alternate,i!==null&&Ci(i,a,h,!0),a=mn.current,a!==null){switch(a.tag){case 31:case 13:return Dn===null?_a():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,u===fa?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([u]):i.add(u),pd(r,u,h)),!1;case 22:return a.flags|=65536,u===fa?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([u]):a.add(u)),pd(r,u,h)),!1}throw Error(s(435,a.tag))}return pd(r,u,h),_a(),!1}if(Ve)return i=mn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,u!==af&&(r=Error(s(422),{cause:u}),Cl(wn(r,a)))):(u!==af&&(i=Error(s(423),{cause:u}),Cl(wn(i,a))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,u=wn(u,a),h=$f(r.stateNode,u,h),xf(r,h),gt!==4&&(gt=2)),!1;var m=Error(s(520),{cause:u});if(m=wn(m,a),Gl===null?Gl=[m]:Gl.push(m),gt!==4&&(gt=2),i===null)return!0;u=wn(u,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,r=h&-h,a.lanes|=r,r=$f(a.stateNode,u,r),xf(a,r),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Yr===null||!Yr.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=iy(h),ly(h,r,a,u),xf(a,h),!1}a=a.return}while(a!==null);return!1}var Gf=Error(s(461)),Et=!1;function Ut(r,i,a,u){i.child=r===null?ug(i,null,a,u):_s(i,r.child,a,u)}function oy(r,i,a,u,h){a=a.render;var m=i.ref;if("ref"in u){var S={};for(var T in u)T!=="ref"&&(S[T]=u[T])}else S=u;return js(i),u=Cf(r,i,a,S,m,h),T=Mf(),r!==null&&!Et?(wf(r,i,h),dr(r,i,h)):(Ve&&T&&lf(i),i.flags|=1,Ut(r,i,u,h),i.child)}function ay(r,i,a,u,h){if(r===null){var m=a.type;return typeof m=="function"&&!nf(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,cy(r,i,m,u,h)):(r=ia(a.type,null,u,i,i.mode,h),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!Zf(r,h)){var S=m.memoizedProps;if(a=a.compare,a=a!==null?a:kl,a(S,u)&&r.ref===i.ref)return dr(r,i,h)}return i.flags|=1,r=lr(m,u),r.ref=i.ref,r.return=i,i.child=r}function cy(r,i,a,u,h){if(r!==null){var m=r.memoizedProps;if(kl(m,u)&&r.ref===i.ref)if(Et=!1,i.pendingProps=u=m,Zf(r,h))(r.flags&131072)!==0&&(Et=!0);else return i.lanes=r.lanes,dr(r,i,h)}return Yf(r,i,a,u,h)}function uy(r,i,a,u){var h=u.children,m=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,r!==null){for(u=i.child=r.child,h=0;u!==null;)h=h|u.lanes|u.childLanes,u=u.sibling;u=h&~m}else u=0,i.child=null;return fy(r,i,m,a,u)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&ca(i,m!==null?m.cachePool:null),m!==null?hg(i,m):Sf(),pg(i);else return u=i.lanes=536870912,fy(r,i,m!==null?m.baseLanes|a:a,a,u)}else m!==null?(ca(i,m.cachePool),hg(i,m),qr(),i.memoizedState=null):(r!==null&&ca(i,null),Sf(),qr());return Ut(r,i,h,a),i.child}function Bl(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function fy(r,i,a,u,h){var m=mf();return m=m===null?null:{parent:kt._currentValue,pool:m},i.memoizedState={baseLanes:a,cachePool:m},r!==null&&ca(i,null),Sf(),pg(i),r!==null&&Ci(r,i,u,!0),i.childLanes=h,null}function Ca(r,i){return i=wa({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function dy(r,i,a){return _s(i,r.child,null,a),r=Ca(i,i.pendingProps),r.flags|=2,gn(i),i.memoizedState=null,r}function Fk(r,i,a){var u=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(Ve){if(u.mode==="hidden")return r=Ca(i,u),i.lanes=536870912,Bl(null,r);if(Tf(i),(r=ot)?(r=E0(r,On),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Rr!==null?{id:Pn,overflow:Jn}:null,retryLane:536870912,hydrationErrors:null},a=Fm(r),a.return=i,i.child=a,Bt=i,ot=null)):r=null,r===null)throw Lr(i);return i.lanes=536870912,null}return Ca(i,u)}var m=r.memoizedState;if(m!==null){var S=m.dehydrated;if(Tf(i),h)if(i.flags&256)i.flags&=-257,i=dy(r,i,a);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(Et||Ci(r,i,a,!1),h=(a&r.childLanes)!==0,Et||h){if(u=st,u!==null&&(S=nm(u,a),S!==0&&S!==m.retryLane))throw m.retryLane=S,Ns(r,S),an(u,r,S),Gf;_a(),i=dy(r,i,a)}else r=m.treeContext,ot=jn(S.nextSibling),Bt=i,Ve=!0,zr=null,On=!1,r!==null&&Zm(i,r),i=Ca(i,u),i.flags|=4096;return i}return r=lr(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Ma(r,i){var a=i.ref;if(a===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(r===null||r.ref!==a)&&(i.flags|=4194816)}}function Yf(r,i,a,u,h){return js(i),a=Cf(r,i,a,u,void 0,h),u=Mf(),r!==null&&!Et?(wf(r,i,h),dr(r,i,h)):(Ve&&u&&lf(i),i.flags|=1,Ut(r,i,a,h),i.child)}function hy(r,i,a,u,h,m){return js(i),i.updateQueue=null,a=gg(i,u,a,h),mg(r),u=Mf(),r!==null&&!Et?(wf(r,i,m),dr(r,i,m)):(Ve&&u&&lf(i),i.flags|=1,Ut(r,i,a,m),i.child)}function py(r,i,a,u,h){if(js(i),i.stateNode===null){var m=Si,S=a.contextType;typeof S=="object"&&S!==null&&(m=Ht(S)),m=new a(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Vf,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},yf(i),S=a.contextType,m.context=typeof S=="object"&&S!==null?Ht(S):Si,m.state=i.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(qf(i,a,S,u),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(S=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),S!==m.state&&Vf.enqueueReplaceState(m,m.state,null),jl(i,u,m,h),Dl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){m=i.stateNode;var T=i.memoizedProps,w=Hs(a,T);m.props=w;var R=m.context,G=a.contextType;S=Si,typeof G=="object"&&G!==null&&(S=Ht(G));var J=a.getDerivedStateFromProps;G=typeof J=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,G||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||R!==S)&&ey(i,m,u,S),Br=!1;var L=i.memoizedState;m.state=L,jl(i,u,m,h),Dl(),R=i.memoizedState,T||L!==R||Br?(typeof J=="function"&&(qf(i,a,J,u),R=i.memoizedState),(w=Br||Wg(i,a,w,u,L,R,S))?(G||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=R),m.props=u,m.state=R,m.context=S,u=w):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,bf(r,i),S=i.memoizedProps,G=Hs(a,S),m.props=G,J=i.pendingProps,L=m.context,R=a.contextType,w=Si,typeof R=="object"&&R!==null&&(w=Ht(R)),T=a.getDerivedStateFromProps,(R=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==J||L!==w)&&ey(i,m,u,w),Br=!1,L=i.memoizedState,m.state=L,jl(i,u,m,h),Dl();var U=i.memoizedState;S!==J||L!==U||Br||r!==null&&r.dependencies!==null&&oa(r.dependencies)?(typeof T=="function"&&(qf(i,a,T,u),U=i.memoizedState),(G=Br||Wg(i,a,G,u,L,U,w)||r!==null&&r.dependencies!==null&&oa(r.dependencies))?(R||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,U,w),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,U,w)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||S===r.memoizedProps&&L===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&L===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=U),m.props=u,m.state=U,m.context=w,u=G):(typeof m.componentDidUpdate!="function"||S===r.memoizedProps&&L===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&L===r.memoizedState||(i.flags|=1024),u=!1)}return m=u,Ma(r,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&u?(i.child=_s(i,r.child,null,h),i.child=_s(i,null,a,h)):Ut(r,i,a,h),i.memoizedState=m.state,r=i.child):r=dr(r,i,h),r}function my(r,i,a,u){return Os(),i.flags|=256,Ut(r,i,a,u),i.child}var Kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pf(r){return{baseLanes:r,cachePool:sg()}}function Jf(r,i,a){return r=r!==null?r.childLanes&~a:0,i&&(r|=bn),r}function gy(r,i,a){var u=i.pendingProps,h=!1,m=(i.flags&128)!==0,S;if((S=m)||(S=r!==null&&r.memoizedState===null?!1:(xt.current&2)!==0),S&&(h=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,r===null){if(Ve){if(h?Ir(i):qr(),(r=ot)?(r=E0(r,On),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Rr!==null?{id:Pn,overflow:Jn}:null,retryLane:536870912,hydrationErrors:null},a=Fm(r),a.return=i,i.child=a,Bt=i,ot=null)):r=null,r===null)throw Lr(i);return Od(r)?i.lanes=32:i.lanes=536870912,null}var T=u.children;return u=u.fallback,h?(qr(),h=i.mode,T=wa({mode:"hidden",children:T},h),u=As(u,h,a,null),T.return=i,u.return=i,T.sibling=u,i.child=T,u=i.child,u.memoizedState=Pf(a),u.childLanes=Jf(r,S,a),i.memoizedState=Kf,Bl(null,u)):(Ir(i),Ff(i,T))}var w=r.memoizedState;if(w!==null&&(T=w.dehydrated,T!==null)){if(m)i.flags&256?(Ir(i),i.flags&=-257,i=Xf(r,i,a)):i.memoizedState!==null?(qr(),i.child=r.child,i.flags|=128,i=null):(qr(),T=u.fallback,h=i.mode,u=wa({mode:"visible",children:u.children},h),T=As(T,h,a,null),T.flags|=2,u.return=i,T.return=i,u.sibling=T,i.child=u,_s(i,r.child,null,a),u=i.child,u.memoizedState=Pf(a),u.childLanes=Jf(r,S,a),i.memoizedState=Kf,i=Bl(null,u));else if(Ir(i),Od(T)){if(S=T.nextSibling&&T.nextSibling.dataset,S)var R=S.dgst;S=R,u=Error(s(419)),u.stack="",u.digest=S,Cl({value:u,source:null,stack:null}),i=Xf(r,i,a)}else if(Et||Ci(r,i,a,!1),S=(a&r.childLanes)!==0,Et||S){if(S=st,S!==null&&(u=nm(S,a),u!==0&&u!==w.retryLane))throw w.retryLane=u,Ns(r,u),an(S,r,u),Gf;Ad(T)||_a(),i=Xf(r,i,a)}else Ad(T)?(i.flags|=192,i.child=r.child,i=null):(r=w.treeContext,ot=jn(T.nextSibling),Bt=i,Ve=!0,zr=null,On=!1,r!==null&&Zm(i,r),i=Ff(i,u.children),i.flags|=4096);return i}return h?(qr(),T=u.fallback,h=i.mode,w=r.child,R=w.sibling,u=lr(w,{mode:"hidden",children:u.children}),u.subtreeFlags=w.subtreeFlags&65011712,R!==null?T=lr(R,T):(T=As(T,h,a,null),T.flags|=2),T.return=i,u.return=i,u.sibling=T,i.child=u,Bl(null,u),u=i.child,T=r.child.memoizedState,T===null?T=Pf(a):(h=T.cachePool,h!==null?(w=kt._currentValue,h=h.parent!==w?{parent:w,pool:w}:h):h=sg(),T={baseLanes:T.baseLanes|a,cachePool:h}),u.memoizedState=T,u.childLanes=Jf(r,S,a),i.memoizedState=Kf,Bl(r.child,u)):(Ir(i),a=r.child,r=a.sibling,a=lr(a,{mode:"visible",children:u.children}),a.return=i,a.sibling=null,r!==null&&(S=i.deletions,S===null?(i.deletions=[r],i.flags|=16):S.push(r)),i.child=a,i.memoizedState=null,a)}function Ff(r,i){return i=wa({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function wa(r,i){return r=pn(22,r,null,i),r.lanes=0,r}function Xf(r,i,a){return _s(i,r.child,null,a),r=Ff(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function yy(r,i,a){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),ff(r.return,i,a)}function Qf(r,i,a,u,h,m){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:h,treeForkCount:m}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=h,S.treeForkCount=m)}function by(r,i,a){var u=i.pendingProps,h=u.revealOrder,m=u.tail;u=u.children;var S=xt.current,T=(S&2)!==0;if(T?(S=S&1|2,i.flags|=128):S&=1,re(xt,S),Ut(r,i,u,a),u=Ve?El:0,!T&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&yy(r,a,i);else if(r.tag===19)yy(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)r=a.alternate,r!==null&&ma(r)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Qf(i,!1,h,a,m,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(r=h.alternate,r!==null&&ma(r)===null){i.child=h;break}r=h.sibling,h.sibling=a,a=h,h=r}Qf(i,!0,a,null,m,u);break;case"together":Qf(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function dr(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),Gr|=i.lanes,(a&i.childLanes)===0)if(r!==null){if(Ci(r,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,a=lr(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=lr(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function Zf(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&oa(r)))}function Xk(r,i,a){switch(i.tag){case 3:ut(i,i.stateNode.containerInfo),_r(i,kt,r.memoizedState.cache),Os();break;case 27:case 5:ue(i);break;case 4:ut(i,i.stateNode.containerInfo);break;case 10:_r(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Tf(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ir(i),i.flags|=128,null):(a&i.child.childLanes)!==0?gy(r,i,a):(Ir(i),r=dr(r,i,a),r!==null?r.sibling:null);Ir(i);break;case 19:var h=(r.flags&128)!==0;if(u=(a&i.childLanes)!==0,u||(Ci(r,i,a,!1),u=(a&i.childLanes)!==0),h){if(u)return by(r,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(xt,xt.current),u)break;return null;case 22:return i.lanes=0,uy(r,i,a,i.pendingProps);case 24:_r(i,kt,r.memoizedState.cache)}return dr(r,i,a)}function xy(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps)Et=!0;else{if(!Zf(r,a)&&(i.flags&128)===0)return Et=!1,Xk(r,i,a);Et=(r.flags&131072)!==0}else Et=!1,Ve&&(i.flags&1048576)!==0&&Qm(i,El,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=zs(i.elementType),i.type=r,typeof r=="function")nf(r)?(u=Hs(r,u),i.tag=1,i=py(null,i,r,u,a)):(i.tag=0,i=Yf(null,i,r,u,a));else{if(r!=null){var h=r.$$typeof;if(h===X){i.tag=11,i=oy(null,i,r,u,a);break e}else if(h===V){i.tag=14,i=ay(null,i,r,u,a);break e}}throw i=we(r)||r,Error(s(306,i,""))}}return i;case 0:return Yf(r,i,i.type,i.pendingProps,a);case 1:return u=i.type,h=Hs(u,i.pendingProps),py(r,i,u,h,a);case 3:e:{if(ut(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var m=i.memoizedState;h=m.element,bf(r,i),jl(i,u,null,a);var S=i.memoizedState;if(u=S.cache,_r(i,kt,u),u!==m.cache&&df(i,[kt],a,!0),Dl(),u=S.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=my(r,i,u,a);break e}else if(u!==h){h=wn(Error(s(424)),i),Cl(h),i=my(r,i,u,a);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ot=jn(r.firstChild),Bt=i,Ve=!0,zr=null,On=!0,a=ug(i,null,u,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Os(),u===h){i=dr(r,i,a);break e}Ut(r,i,u,a)}i=i.child}return i;case 26:return Ma(r,i),r===null?(a=O0(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ve||(a=i.type,r=i.pendingProps,u=$a(ve.current).createElement(a),u[_t]=i,u[tn]=r,It(u,a,r),Dt(u),i.stateNode=u):i.memoizedState=O0(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return ue(i),r===null&&Ve&&(u=i.stateNode=w0(i.type,i.pendingProps,ve.current),Bt=i,On=!0,h=ot,Fr(i.type)?(Dd=h,ot=jn(u.firstChild)):ot=h),Ut(r,i,i.pendingProps.children,a),Ma(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&Ve&&((h=u=ot)&&(u=MT(u,i.type,i.pendingProps,On),u!==null?(i.stateNode=u,Bt=i,ot=jn(u.firstChild),On=!1,h=!0):h=!1),h||Lr(i)),ue(i),h=i.type,m=i.pendingProps,S=r!==null?r.memoizedProps:null,u=m.children,Md(h,m)?u=null:S!==null&&Md(h,S)&&(i.flags|=32),i.memoizedState!==null&&(h=Cf(r,i,qk,null,null,a),Zl._currentValue=h),Ma(r,i),Ut(r,i,u,a),i.child;case 6:return r===null&&Ve&&((r=a=ot)&&(a=wT(a,i.pendingProps,On),a!==null?(i.stateNode=a,Bt=i,ot=null,r=!0):r=!1),r||Lr(i)),null;case 13:return gy(r,i,a);case 4:return ut(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=_s(i,null,u,a):Ut(r,i,u,a),i.child;case 11:return oy(r,i,i.type,i.pendingProps,a);case 7:return Ut(r,i,i.pendingProps,a),i.child;case 8:return Ut(r,i,i.pendingProps.children,a),i.child;case 12:return Ut(r,i,i.pendingProps.children,a),i.child;case 10:return u=i.pendingProps,_r(i,i.type,u.value),Ut(r,i,u.children,a),i.child;case 9:return h=i.type._context,u=i.pendingProps.children,js(i),h=Ht(h),u=u(h),i.flags|=1,Ut(r,i,u,a),i.child;case 14:return ay(r,i,i.type,i.pendingProps,a);case 15:return cy(r,i,i.type,i.pendingProps,a);case 19:return by(r,i,a);case 31:return Fk(r,i,a);case 22:return uy(r,i,a,i.pendingProps);case 24:return js(i),u=Ht(kt),r===null?(h=mf(),h===null&&(h=st,m=hf(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),i.memoizedState={parent:u,cache:h},yf(i),_r(i,kt,h)):((r.lanes&a)!==0&&(bf(r,i),jl(i,null,null,a),Dl()),h=r.memoizedState,m=i.memoizedState,h.parent!==u?(h={parent:u,cache:u},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),_r(i,kt,u)):(u=m.cache,_r(i,kt,u),u!==h.cache&&df(i,[kt],a,!0))),Ut(r,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function hr(r){r.flags|=4}function Wf(r,i,a,u,h){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(h&335544128)===h)if(r.stateNode.complete)r.flags|=8192;else if(Ky())r.flags|=8192;else throw Ls=fa,gf}else r.flags&=-16777217}function vy(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!L0(i))if(Ky())r.flags|=8192;else throw Ls=fa,gf}function Na(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Wp():536870912,r.lanes|=i,Bi|=i)}function Hl(r,i){if(!Ve)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function at(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,u=0;if(i)for(var h=r.child;h!==null;)a|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)a|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=u,r.childLanes=a,i}function Qk(r,i,a){var u=i.pendingProps;switch(of(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(i),null;case 1:return at(i),null;case 3:return a=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),cr(kt),Ge(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(r===null||r.child===null)&&(Ei(i)?hr(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,cf())),at(i),null;case 26:var h=i.type,m=i.memoizedState;return r===null?(hr(i),m!==null?(at(i),vy(i,m)):(at(i),Wf(i,h,null,u,a))):m?m!==r.memoizedState?(hr(i),at(i),vy(i,m)):(at(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&hr(i),at(i),Wf(i,h,r,u,a)),null;case 27:if(Ee(i),a=ve.current,h=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&hr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return at(i),null}r=ae.current,Ei(i)?Wm(i):(r=w0(h,u,a),i.stateNode=r,hr(i))}return at(i),null;case 5:if(Ee(i),h=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&hr(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return at(i),null}if(m=ae.current,Ei(i))Wm(i);else{var S=$a(ve.current);switch(m){case 1:m=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=S.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?S.createElement(h,{is:u.is}):S.createElement(h)}}m[_t]=i,m[tn]=u;e:for(S=i.child;S!==null;){if(S.tag===5||S.tag===6)m.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===i)break e;for(;S.sibling===null;){if(S.return===null||S.return===i)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}i.stateNode=m;e:switch(It(m,h,u),h){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&hr(i)}}return at(i),Wf(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,a),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&hr(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=ve.current,Ei(i)){if(r=i.stateNode,a=i.memoizedProps,u=null,h=Bt,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}r[_t]=i,r=!!(r.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||g0(r.nodeValue,a)),r||Lr(i,!0)}else r=$a(r).createTextNode(u),r[_t]=i,i.stateNode=r}return at(i),null;case 31:if(a=i.memoizedState,r===null||r.memoizedState!==null){if(u=Ei(i),a!==null){if(r===null){if(!u)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[_t]=i}else Os(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;at(i),r=!1}else a=cf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=a),r=!0;if(!r)return i.flags&256?(gn(i),i):(gn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return at(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=Ei(i),u!==null&&u.dehydrated!==null){if(r===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[_t]=i}else Os(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;at(i),h=!1}else h=cf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(gn(i),i):(gn(i),null)}return gn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=u!==null,r=r!==null&&r.memoizedState!==null,a&&(u=i.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048)),a!==r&&a&&(i.child.flags|=8192),Na(i,i.updateQueue),at(i),null);case 4:return Ge(),r===null&&Sd(i.stateNode.containerInfo),at(i),null;case 10:return cr(i.type),at(i),null;case 19:if(q(xt),u=i.memoizedState,u===null)return at(i),null;if(h=(i.flags&128)!==0,m=u.rendering,m===null)if(h)Hl(u,!1);else{if(gt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=ma(r),m!==null){for(i.flags|=128,Hl(u,!1),r=m.updateQueue,i.updateQueue=r,Na(i,r),i.subtreeFlags=0,r=a,a=i.child;a!==null;)Jm(a,r),a=a.sibling;return re(xt,xt.current&1|2),Ve&&or(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&ge()>Ra&&(i.flags|=128,h=!0,Hl(u,!1),i.lanes=4194304)}else{if(!h)if(r=ma(m),r!==null){if(i.flags|=128,h=!0,r=r.updateQueue,i.updateQueue=r,Na(i,r),Hl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Ve)return at(i),null}else 2*ge()-u.renderingStartTime>Ra&&a!==536870912&&(i.flags|=128,h=!0,Hl(u,!1),i.lanes=4194304);u.isBackwards?(m.sibling=i.child,i.child=m):(r=u.last,r!==null?r.sibling=m:i.child=m,u.last=m)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=ge(),r.sibling=null,a=xt.current,re(xt,h?a&1|2:a&1),Ve&&or(i,u.treeForkCount),r):(at(i),null);case 22:case 23:return gn(i),kf(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(a&536870912)!==0&&(i.flags&128)===0&&(at(i),i.subtreeFlags&6&&(i.flags|=8192)):at(i),a=i.updateQueue,a!==null&&Na(i,a.retryQueue),a=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==a&&(i.flags|=2048),r!==null&&q(Rs),null;case 24:return a=null,r!==null&&(a=r.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),cr(kt),at(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Zk(r,i){switch(of(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return cr(kt),Ge(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Ee(i),null;case 31:if(i.memoizedState!==null){if(gn(i),i.alternate===null)throw Error(s(340));Os()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(gn(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Os()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return q(xt),null;case 4:return Ge(),null;case 10:return cr(i.type),null;case 22:case 23:return gn(i),kf(),r!==null&&q(Rs),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return cr(kt),null;case 25:return null;default:return null}}function Sy(r,i){switch(of(i),i.tag){case 3:cr(kt),Ge();break;case 26:case 27:case 5:Ee(i);break;case 4:Ge();break;case 31:i.memoizedState!==null&&gn(i);break;case 13:gn(i);break;case 19:q(xt);break;case 10:cr(i.type);break;case 22:case 23:gn(i),kf(),r!==null&&q(Rs);break;case 24:cr(kt)}}function Ul(r,i){try{var a=i.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var h=u.next;a=h;do{if((a.tag&r)===r){u=void 0;var m=a.create,S=a.inst;u=m(),S.destroy=u}a=a.next}while(a!==h)}}catch(T){Ze(i,i.return,T)}}function Vr(r,i,a){try{var u=i.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var m=h.next;u=m;do{if((u.tag&r)===r){var S=u.inst,T=S.destroy;if(T!==void 0){S.destroy=void 0,h=i;var w=a,R=T;try{R()}catch(G){Ze(h,w,G)}}}u=u.next}while(u!==m)}}catch(G){Ze(i,i.return,G)}}function ky(r){var i=r.updateQueue;if(i!==null){var a=r.stateNode;try{dg(i,a)}catch(u){Ze(r,r.return,u)}}}function Ty(r,i,a){a.props=Hs(r.type,r.memoizedProps),a.state=r.memoizedState;try{a.componentWillUnmount()}catch(u){Ze(r,i,u)}}function Il(r,i){try{var a=r.ref;if(a!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof a=="function"?r.refCleanup=a(u):a.current=u}}catch(h){Ze(r,i,h)}}function Fn(r,i){var a=r.ref,u=r.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(h){Ze(r,i,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Ze(r,i,h)}else a.current=null}function Ey(r){var i=r.type,a=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(h){Ze(r,r.return,h)}}function ed(r,i,a){try{var u=r.stateNode;vT(u,r.type,a,i),u[tn]=i}catch(h){Ze(r,r.return,h)}}function Cy(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Fr(r.type)||r.tag===4}function td(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Cy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Fr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function nd(r,i,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(r,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(r),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=sr));else if(u!==4&&(u===27&&Fr(r.type)&&(a=r.stateNode,i=null),r=r.child,r!==null))for(nd(r,i,a),r=r.sibling;r!==null;)nd(r,i,a),r=r.sibling}function Aa(r,i,a){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(u!==4&&(u===27&&Fr(r.type)&&(a=r.stateNode),r=r.child,r!==null))for(Aa(r,i,a),r=r.sibling;r!==null;)Aa(r,i,a),r=r.sibling}function My(r){var i=r.stateNode,a=r.memoizedProps;try{for(var u=r.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);It(i,u,a),i[_t]=r,i[tn]=a}catch(m){Ze(r,r.return,m)}}var pr=!1,Ct=!1,rd=!1,wy=typeof WeakSet=="function"?WeakSet:Set,jt=null;function Wk(r,i){if(r=r.containerInfo,Ed=Xa,r=Um(r),Fu(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var h=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var S=0,T=-1,w=-1,R=0,G=0,J=r,L=null;t:for(;;){for(var U;J!==a||h!==0&&J.nodeType!==3||(T=S+h),J!==m||u!==0&&J.nodeType!==3||(w=S+u),J.nodeType===3&&(S+=J.nodeValue.length),(U=J.firstChild)!==null;)L=J,J=U;for(;;){if(J===r)break t;if(L===a&&++R===h&&(T=S),L===m&&++G===u&&(w=S),(U=J.nextSibling)!==null)break;J=L,L=J.parentNode}J=U}a=T===-1||w===-1?null:{start:T,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(Cd={focusedElem:r,selectionRange:a},Xa=!1,jt=i;jt!==null;)if(i=jt,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,jt=r;else for(;jt!==null;){switch(i=jt,m=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(a=0;a<r.length;a++)h=r[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,a=i,h=m.memoizedProps,m=m.memoizedState,u=a.stateNode;try{var ce=Hs(a.type,h);r=u.getSnapshotBeforeUpdate(ce,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(ke){Ze(a,a.return,ke)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,a=r.nodeType,a===9)Nd(r);else if(a===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Nd(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,jt=r;break}jt=i.return}}function Ny(r,i,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:gr(r,a),u&4&&Ul(5,a);break;case 1:if(gr(r,a),u&4)if(r=a.stateNode,i===null)try{r.componentDidMount()}catch(S){Ze(a,a.return,S)}else{var h=Hs(a.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(h,i,r.__reactInternalSnapshotBeforeUpdate)}catch(S){Ze(a,a.return,S)}}u&64&&ky(a),u&512&&Il(a,a.return);break;case 3:if(gr(r,a),u&64&&(r=a.updateQueue,r!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{dg(r,i)}catch(S){Ze(a,a.return,S)}}break;case 27:i===null&&u&4&&My(a);case 26:case 5:gr(r,a),i===null&&u&4&&Ey(a),u&512&&Il(a,a.return);break;case 12:gr(r,a);break;case 31:gr(r,a),u&4&&Dy(r,a);break;case 13:gr(r,a),u&4&&jy(r,a),u&64&&(r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(a=aT.bind(null,a),NT(r,a))));break;case 22:if(u=a.memoizedState!==null||pr,!u){i=i!==null&&i.memoizedState!==null||Ct,h=pr;var m=Ct;pr=u,(Ct=i)&&!m?yr(r,a,(a.subtreeFlags&8772)!==0):gr(r,a),pr=h,Ct=m}break;case 30:break;default:gr(r,a)}}function Ay(r){var i=r.alternate;i!==null&&(r.alternate=null,Ay(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&ju(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ft=null,rn=!1;function mr(r,i,a){for(a=a.child;a!==null;)Oy(r,i,a),a=a.sibling}function Oy(r,i,a){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(ul,a)}catch{}switch(a.tag){case 26:Ct||Fn(a,i),mr(r,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ct||Fn(a,i);var u=ft,h=rn;Fr(a.type)&&(ft=a.stateNode,rn=!1),mr(r,i,a),Fl(a.stateNode),ft=u,rn=h;break;case 5:Ct||Fn(a,i);case 6:if(u=ft,h=rn,ft=null,mr(r,i,a),ft=u,rn=h,ft!==null)if(rn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(m){Ze(a,i,m)}else try{ft.removeChild(a.stateNode)}catch(m){Ze(a,i,m)}break;case 18:ft!==null&&(rn?(r=ft,k0(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.stateNode),Yi(r)):k0(ft,a.stateNode));break;case 4:u=ft,h=rn,ft=a.stateNode.containerInfo,rn=!0,mr(r,i,a),ft=u,rn=h;break;case 0:case 11:case 14:case 15:Vr(2,a,i),Ct||Vr(4,a,i),mr(r,i,a);break;case 1:Ct||(Fn(a,i),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Ty(a,i,u)),mr(r,i,a);break;case 21:mr(r,i,a);break;case 22:Ct=(u=Ct)||a.memoizedState!==null,mr(r,i,a),Ct=u;break;default:mr(r,i,a)}}function Dy(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Yi(r)}catch(a){Ze(i,i.return,a)}}}function jy(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Yi(r)}catch(a){Ze(i,i.return,a)}}function eT(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new wy),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new wy),i;default:throw Error(s(435,r.tag))}}function Oa(r,i){var a=eT(r);i.forEach(function(u){if(!a.has(u)){a.add(u);var h=cT.bind(null,r,u);u.then(h,h)}})}function sn(r,i){var a=i.deletions;if(a!==null)for(var u=0;u<a.length;u++){var h=a[u],m=r,S=i,T=S;e:for(;T!==null;){switch(T.tag){case 27:if(Fr(T.type)){ft=T.stateNode,rn=!1;break e}break;case 5:ft=T.stateNode,rn=!1;break e;case 3:case 4:ft=T.stateNode.containerInfo,rn=!0;break e}T=T.return}if(ft===null)throw Error(s(160));Oy(m,S,h),ft=null,rn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Ry(i,r),i=i.sibling}var qn=null;function Ry(r,i){var a=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:sn(i,r),ln(r),u&4&&(Vr(3,r,r.return),Ul(3,r),Vr(5,r,r.return));break;case 1:sn(i,r),ln(r),u&512&&(Ct||a===null||Fn(a,a.return)),u&64&&pr&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(a=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var h=qn;if(sn(i,r),ln(r),u&512&&(Ct||a===null||Fn(a,a.return)),u&4){var m=a!==null?a.memoizedState:null;if(u=r.memoizedState,a===null)if(u===null)if(r.stateNode===null){e:{u=r.type,a=r.memoizedProps,h=h.ownerDocument||h;t:switch(u){case"title":m=h.getElementsByTagName("title")[0],(!m||m[hl]||m[_t]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(u),h.head.insertBefore(m,h.querySelector("head > title"))),It(m,u,a),m[_t]=r,Dt(m),u=m;break e;case"link":var S=R0("link","href",h).get(u+(a.href||""));if(S){for(var T=0;T<S.length;T++)if(m=S[T],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(T,1);break t}}m=h.createElement(u),It(m,u,a),h.head.appendChild(m);break;case"meta":if(S=R0("meta","content",h).get(u+(a.content||""))){for(T=0;T<S.length;T++)if(m=S[T],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(T,1);break t}}m=h.createElement(u),It(m,u,a),h.head.appendChild(m);break;default:throw Error(s(468,u))}m[_t]=r,Dt(m),u=m}r.stateNode=u}else z0(h,r.type,r.stateNode);else r.stateNode=j0(h,u,r.memoizedProps);else m!==u?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,u===null?z0(h,r.type,r.stateNode):j0(h,u,r.memoizedProps)):u===null&&r.stateNode!==null&&ed(r,r.memoizedProps,a.memoizedProps)}break;case 27:sn(i,r),ln(r),u&512&&(Ct||a===null||Fn(a,a.return)),a!==null&&u&4&&ed(r,r.memoizedProps,a.memoizedProps);break;case 5:if(sn(i,r),ln(r),u&512&&(Ct||a===null||Fn(a,a.return)),r.flags&32){h=r.stateNode;try{pi(h,"")}catch(ce){Ze(r,r.return,ce)}}u&4&&r.stateNode!=null&&(h=r.memoizedProps,ed(r,h,a!==null?a.memoizedProps:h)),u&1024&&(rd=!0);break;case 6:if(sn(i,r),ln(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,a=r.stateNode;try{a.nodeValue=u}catch(ce){Ze(r,r.return,ce)}}break;case 3:if(Ka=null,h=qn,qn=Ga(i.containerInfo),sn(i,r),qn=h,ln(r),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Yi(i.containerInfo)}catch(ce){Ze(r,r.return,ce)}rd&&(rd=!1,zy(r));break;case 4:u=qn,qn=Ga(r.stateNode.containerInfo),sn(i,r),ln(r),qn=u;break;case 12:sn(i,r),ln(r);break;case 31:sn(i,r),ln(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Oa(r,u)));break;case 13:sn(i,r),ln(r),r.child.flags&8192&&r.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ja=ge()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Oa(r,u)));break;case 22:h=r.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,R=pr,G=Ct;if(pr=R||h,Ct=G||w,sn(i,r),Ct=G,pr=R,ln(r),u&8192)e:for(i=r.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||w||pr||Ct||Us(r)),a=null,i=r;;){if(i.tag===5||i.tag===26){if(a===null){w=a=i;try{if(m=w.stateNode,h)S=m.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{T=w.stateNode;var J=w.memoizedProps.style,L=J!=null&&J.hasOwnProperty("display")?J.display:null;T.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(ce){Ze(w,w.return,ce)}}}else if(i.tag===6){if(a===null){w=i;try{w.stateNode.nodeValue=h?"":w.memoizedProps}catch(ce){Ze(w,w.return,ce)}}}else if(i.tag===18){if(a===null){w=i;try{var U=w.stateNode;h?T0(U,!0):T0(w.stateNode,!1)}catch(ce){Ze(w,w.return,ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Oa(r,a))));break;case 19:sn(i,r),ln(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Oa(r,u)));break;case 30:break;case 21:break;default:sn(i,r),ln(r)}}function ln(r){var i=r.flags;if(i&2){try{for(var a,u=r.return;u!==null;){if(Cy(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,m=td(r);Aa(r,m,h);break;case 5:var S=a.stateNode;a.flags&32&&(pi(S,""),a.flags&=-33);var T=td(r);Aa(r,T,S);break;case 3:case 4:var w=a.stateNode.containerInfo,R=td(r);nd(r,R,w);break;default:throw Error(s(161))}}catch(G){Ze(r,r.return,G)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function zy(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;zy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function gr(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ny(r,i.alternate,i),i=i.sibling}function Us(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Vr(4,i,i.return),Us(i);break;case 1:Fn(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Ty(i,i.return,a),Us(i);break;case 27:Fl(i.stateNode);case 26:case 5:Fn(i,i.return),Us(i);break;case 22:i.memoizedState===null&&Us(i);break;case 30:Us(i);break;default:Us(i)}r=r.sibling}}function yr(r,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,h=r,m=i,S=m.flags;switch(m.tag){case 0:case 11:case 15:yr(h,m,a),Ul(4,m);break;case 1:if(yr(h,m,a),u=m,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(R){Ze(u,u.return,R)}if(u=m,h=u.updateQueue,h!==null){var T=u.stateNode;try{var w=h.shared.hiddenCallbacks;if(w!==null)for(h.shared.hiddenCallbacks=null,h=0;h<w.length;h++)fg(w[h],T)}catch(R){Ze(u,u.return,R)}}a&&S&64&&ky(m),Il(m,m.return);break;case 27:My(m);case 26:case 5:yr(h,m,a),a&&u===null&&S&4&&Ey(m),Il(m,m.return);break;case 12:yr(h,m,a);break;case 31:yr(h,m,a),a&&S&4&&Dy(h,m);break;case 13:yr(h,m,a),a&&S&4&&jy(h,m);break;case 22:m.memoizedState===null&&yr(h,m,a),Il(m,m.return);break;case 30:break;default:yr(h,m,a)}i=i.sibling}}function sd(r,i){var a=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==a&&(r!=null&&r.refCount++,a!=null&&Ml(a))}function id(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Ml(r))}function Vn(r,i,a,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ly(r,i,a,u),i=i.sibling}function Ly(r,i,a,u){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Vn(r,i,a,u),h&2048&&Ul(9,i);break;case 1:Vn(r,i,a,u);break;case 3:Vn(r,i,a,u),h&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Ml(r)));break;case 12:if(h&2048){Vn(r,i,a,u),r=i.stateNode;try{var m=i.memoizedProps,S=m.id,T=m.onPostCommit;typeof T=="function"&&T(S,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(w){Ze(i,i.return,w)}}else Vn(r,i,a,u);break;case 31:Vn(r,i,a,u);break;case 13:Vn(r,i,a,u);break;case 23:break;case 22:m=i.stateNode,S=i.alternate,i.memoizedState!==null?m._visibility&2?Vn(r,i,a,u):ql(r,i):m._visibility&2?Vn(r,i,a,u):(m._visibility|=2,zi(r,i,a,u,(i.subtreeFlags&10256)!==0||!1)),h&2048&&sd(S,i);break;case 24:Vn(r,i,a,u),h&2048&&id(i.alternate,i);break;default:Vn(r,i,a,u)}}function zi(r,i,a,u,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=r,S=i,T=a,w=u,R=S.flags;switch(S.tag){case 0:case 11:case 15:zi(m,S,T,w,h),Ul(8,S);break;case 23:break;case 22:var G=S.stateNode;S.memoizedState!==null?G._visibility&2?zi(m,S,T,w,h):ql(m,S):(G._visibility|=2,zi(m,S,T,w,h)),h&&R&2048&&sd(S.alternate,S);break;case 24:zi(m,S,T,w,h),h&&R&2048&&id(S.alternate,S);break;default:zi(m,S,T,w,h)}i=i.sibling}}function ql(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=r,u=i,h=u.flags;switch(u.tag){case 22:ql(a,u),h&2048&&sd(u.alternate,u);break;case 24:ql(a,u),h&2048&&id(u.alternate,u);break;default:ql(a,u)}i=i.sibling}}var Vl=8192;function Li(r,i,a){if(r.subtreeFlags&Vl)for(r=r.child;r!==null;)_y(r,i,a),r=r.sibling}function _y(r,i,a){switch(r.tag){case 26:Li(r,i,a),r.flags&Vl&&r.memoizedState!==null&&IT(a,qn,r.memoizedState,r.memoizedProps);break;case 5:Li(r,i,a);break;case 3:case 4:var u=qn;qn=Ga(r.stateNode.containerInfo),Li(r,i,a),qn=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Vl,Vl=16777216,Li(r,i,a),Vl=u):Li(r,i,a));break;default:Li(r,i,a)}}function By(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function $l(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];jt=u,Uy(u,r)}By(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Hy(r),r=r.sibling}function Hy(r){switch(r.tag){case 0:case 11:case 15:$l(r),r.flags&2048&&Vr(9,r,r.return);break;case 3:$l(r);break;case 12:$l(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Da(r)):$l(r);break;default:$l(r)}}function Da(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];jt=u,Uy(u,r)}By(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Vr(8,i,i.return),Da(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Da(i));break;default:Da(i)}r=r.sibling}}function Uy(r,i){for(;jt!==null;){var a=jt;switch(a.tag){case 0:case 11:case 15:Vr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ml(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,jt=u;else e:for(a=r;jt!==null;){u=jt;var h=u.sibling,m=u.return;if(Ay(u),u===a){jt=null;break e}if(h!==null){h.return=m,jt=h;break e}jt=m}}}var tT={getCacheForType:function(r){var i=Ht(kt),a=i.data.get(r);return a===void 0&&(a=r(),i.data.set(r,a)),a},cacheSignal:function(){return Ht(kt).controller.signal}},nT=typeof WeakMap=="function"?WeakMap:Map,Xe=0,st=null,He=null,Ie=0,Qe=0,yn=null,$r=!1,_i=!1,ld=!1,br=0,gt=0,Gr=0,Is=0,od=0,bn=0,Bi=0,Gl=null,on=null,ad=!1,ja=0,Iy=0,Ra=1/0,za=null,Yr=null,At=0,Kr=null,Hi=null,xr=0,cd=0,ud=null,qy=null,Yl=0,fd=null;function xn(){return(Xe&2)!==0&&Ie!==0?Ie&-Ie:B.T!==null?yd():rm()}function Vy(){if(bn===0)if((Ie&536870912)===0||Ve){var r=Vo;Vo<<=1,(Vo&3932160)===0&&(Vo=262144),bn=r}else bn=536870912;return r=mn.current,r!==null&&(r.flags|=32),bn}function an(r,i,a){(r===st&&(Qe===2||Qe===9)||r.cancelPendingCommit!==null)&&(Ui(r,0),Pr(r,Ie,bn,!1)),dl(r,a),((Xe&2)===0||r!==st)&&(r===st&&((Xe&2)===0&&(Is|=a),gt===4&&Pr(r,Ie,bn,!1)),Xn(r))}function $y(r,i,a){if((Xe&6)!==0)throw Error(s(327));var u=!a&&(i&127)===0&&(i&r.expiredLanes)===0||fl(r,i),h=u?iT(r,i):hd(r,i,!0),m=u;do{if(h===0){_i&&!u&&Pr(r,i,0,!1);break}else{if(a=r.current.alternate,m&&!rT(a)){h=hd(r,i,!1),m=!1;continue}if(h===2){if(m=i,r.errorRecoveryDisabledLanes&m)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;e:{var T=r;h=Gl;var w=T.current.memoizedState.isDehydrated;if(w&&(Ui(T,S).flags|=256),S=hd(T,S,!1),S!==2){if(ld&&!w){T.errorRecoveryDisabledLanes|=m,Is|=m,h=4;break e}m=on,on=h,m!==null&&(on===null?on=m:on.push.apply(on,m))}h=S}if(m=!1,h!==2)continue}}if(h===1){Ui(r,0),Pr(r,i,0,!0);break}e:{switch(u=r,m=h,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Pr(u,i,bn,!$r);break e;case 2:on=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=ja+300-ge(),10<h)){if(Pr(u,i,bn,!$r),Go(u,0,!0)!==0)break e;xr=i,u.timeoutHandle=v0(Gy.bind(null,u,a,on,za,ad,i,bn,Is,Bi,$r,m,"Throttled",-0,0),h);break e}Gy(u,a,on,za,ad,i,bn,Is,Bi,$r,m,null,-0,0)}}break}while(!0);Xn(r)}function Gy(r,i,a,u,h,m,S,T,w,R,G,J,L,U){if(r.timeoutHandle=-1,J=i.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:sr},_y(i,m,J);var ce=(m&62914560)===m?ja-ge():(m&4194048)===m?Iy-ge():0;if(ce=qT(J,ce),ce!==null){xr=m,r.cancelPendingCommit=ce(Zy.bind(null,r,i,m,a,u,h,S,T,w,G,J,null,L,U)),Pr(r,m,S,!R);return}}Zy(r,i,m,a,u,h,S,T,w)}function rT(r){for(var i=r;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var h=a[u],m=h.getSnapshot;h=h.value;try{if(!hn(m(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Pr(r,i,a,u){i&=~od,i&=~Is,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var h=i;0<h;){var m=31-dn(h),S=1<<m;u[m]=-1,h&=~S}a!==0&&em(r,a,i)}function La(){return(Xe&6)===0?(Kl(0),!1):!0}function dd(){if(He!==null){if(Qe===0)var r=He.return;else r=He,ar=Ds=null,Nf(r),Ai=null,Nl=0,r=He;for(;r!==null;)Sy(r.alternate,r),r=r.return;He=null}}function Ui(r,i){var a=r.timeoutHandle;a!==-1&&(r.timeoutHandle=-1,TT(a)),a=r.cancelPendingCommit,a!==null&&(r.cancelPendingCommit=null,a()),xr=0,dd(),st=r,He=a=lr(r.current,null),Ie=i,Qe=0,yn=null,$r=!1,_i=fl(r,i),ld=!1,Bi=bn=od=Is=Gr=gt=0,on=Gl=null,ad=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var h=31-dn(u),m=1<<h;i|=r[h],u&=~m}return br=i,na(),a}function Yy(r,i){Ae=null,B.H=_l,i===Ni||i===ua?(i=og(),Qe=3):i===gf?(i=og(),Qe=4):Qe=i===Gf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,yn=i,He===null&&(gt=1,Ea(r,wn(i,r.current)))}function Ky(){var r=mn.current;return r===null?!0:(Ie&4194048)===Ie?Dn===null:(Ie&62914560)===Ie||(Ie&536870912)!==0?r===Dn:!1}function Py(){var r=B.H;return B.H=_l,r===null?_l:r}function Jy(){var r=B.A;return B.A=tT,r}function _a(){gt=4,$r||(Ie&4194048)!==Ie&&mn.current!==null||(_i=!0),(Gr&134217727)===0&&(Is&134217727)===0||st===null||Pr(st,Ie,bn,!1)}function hd(r,i,a){var u=Xe;Xe|=2;var h=Py(),m=Jy();(st!==r||Ie!==i)&&(za=null,Ui(r,i)),i=!1;var S=gt;e:do try{if(Qe!==0&&He!==null){var T=He,w=yn;switch(Qe){case 8:dd(),S=6;break e;case 3:case 2:case 9:case 6:mn.current===null&&(i=!0);var R=Qe;if(Qe=0,yn=null,Ii(r,T,w,R),a&&_i){S=0;break e}break;default:R=Qe,Qe=0,yn=null,Ii(r,T,w,R)}}sT(),S=gt;break}catch(G){Yy(r,G)}while(!0);return i&&r.shellSuspendCounter++,ar=Ds=null,Xe=u,B.H=h,B.A=m,He===null&&(st=null,Ie=0,na()),S}function sT(){for(;He!==null;)Fy(He)}function iT(r,i){var a=Xe;Xe|=2;var u=Py(),h=Jy();st!==r||Ie!==i?(za=null,Ra=ge()+500,Ui(r,i)):_i=fl(r,i);e:do try{if(Qe!==0&&He!==null){i=He;var m=yn;t:switch(Qe){case 1:Qe=0,yn=null,Ii(r,i,m,1);break;case 2:case 9:if(ig(m)){Qe=0,yn=null,Xy(i);break}i=function(){Qe!==2&&Qe!==9||st!==r||(Qe=7),Xn(r)},m.then(i,i);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:ig(m)?(Qe=0,yn=null,Xy(i)):(Qe=0,yn=null,Ii(r,i,m,7));break;case 5:var S=null;switch(He.tag){case 26:S=He.memoizedState;case 5:case 27:var T=He;if(S?L0(S):T.stateNode.complete){Qe=0,yn=null;var w=T.sibling;if(w!==null)He=w;else{var R=T.return;R!==null?(He=R,Ba(R)):He=null}break t}}Qe=0,yn=null,Ii(r,i,m,5);break;case 6:Qe=0,yn=null,Ii(r,i,m,6);break;case 8:dd(),gt=6;break e;default:throw Error(s(462))}}lT();break}catch(G){Yy(r,G)}while(!0);return ar=Ds=null,B.H=u,B.A=h,Xe=a,He!==null?0:(st=null,Ie=0,na(),gt)}function lT(){for(;He!==null&&!le();)Fy(He)}function Fy(r){var i=xy(r.alternate,r,br);r.memoizedProps=r.pendingProps,i===null?Ba(r):He=i}function Xy(r){var i=r,a=i.alternate;switch(i.tag){case 15:case 0:i=hy(a,i,i.pendingProps,i.type,void 0,Ie);break;case 11:i=hy(a,i,i.pendingProps,i.type.render,i.ref,Ie);break;case 5:Nf(i);default:Sy(a,i),i=He=Jm(i,br),i=xy(a,i,br)}r.memoizedProps=r.pendingProps,i===null?Ba(r):He=i}function Ii(r,i,a,u){ar=Ds=null,Nf(i),Ai=null,Nl=0;var h=i.return;try{if(Jk(r,h,i,a,Ie)){gt=1,Ea(r,wn(a,r.current)),He=null;return}}catch(m){if(h!==null)throw He=h,m;gt=1,Ea(r,wn(a,r.current)),He=null;return}i.flags&32768?(Ve||u===1?r=!0:_i||(Ie&536870912)!==0?r=!1:($r=r=!0,(u===2||u===9||u===3||u===6)&&(u=mn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Qy(i,r)):Ba(i)}function Ba(r){var i=r;do{if((i.flags&32768)!==0){Qy(i,$r);return}r=i.return;var a=Qk(i.alternate,i,br);if(a!==null){He=a;return}if(i=i.sibling,i!==null){He=i;return}He=i=r}while(i!==null);gt===0&&(gt=5)}function Qy(r,i){do{var a=Zk(r.alternate,r);if(a!==null){a.flags&=32767,He=a;return}if(a=r.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(r=r.sibling,r!==null)){He=r;return}He=r=a}while(r!==null);gt=6,He=null}function Zy(r,i,a,u,h,m,S,T,w){r.cancelPendingCommit=null;do Ha();while(At!==0);if((Xe&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=ef,US(r,a,m,S,T,w),r===st&&(He=st=null,Ie=0),Hi=i,Kr=r,xr=a,cd=m,ud=h,qy=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,uT(Tn,function(){return r0(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=B.T,B.T=null,h=ee.p,ee.p=2,S=Xe,Xe|=4;try{Wk(r,i,a)}finally{Xe=S,ee.p=h,B.T=u}}At=1,Wy(),e0(),t0()}}function Wy(){if(At===1){At=0;var r=Kr,i=Hi,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var u=ee.p;ee.p=2;var h=Xe;Xe|=4;try{Ry(i,r);var m=Cd,S=Um(r.containerInfo),T=m.focusedElem,w=m.selectionRange;if(S!==T&&T&&T.ownerDocument&&Hm(T.ownerDocument.documentElement,T)){if(w!==null&&Fu(T)){var R=w.start,G=w.end;if(G===void 0&&(G=R),"selectionStart"in T)T.selectionStart=R,T.selectionEnd=Math.min(G,T.value.length);else{var J=T.ownerDocument||document,L=J&&J.defaultView||window;if(L.getSelection){var U=L.getSelection(),ce=T.textContent.length,ke=Math.min(w.start,ce),nt=w.end===void 0?ke:Math.min(w.end,ce);!U.extend&&ke>nt&&(S=nt,nt=ke,ke=S);var D=Bm(T,ke),A=Bm(T,nt);if(D&&A&&(U.rangeCount!==1||U.anchorNode!==D.node||U.anchorOffset!==D.offset||U.focusNode!==A.node||U.focusOffset!==A.offset)){var j=J.createRange();j.setStart(D.node,D.offset),U.removeAllRanges(),ke>nt?(U.addRange(j),U.extend(A.node,A.offset)):(j.setEnd(A.node,A.offset),U.addRange(j))}}}}for(J=[],U=T;U=U.parentNode;)U.nodeType===1&&J.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<J.length;T++){var P=J[T];P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}Xa=!!Ed,Cd=Ed=null}finally{Xe=h,ee.p=u,B.T=a}}r.current=i,At=2}}function e0(){if(At===2){At=0;var r=Kr,i=Hi,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var u=ee.p;ee.p=2;var h=Xe;Xe|=4;try{Ny(r,i.alternate,i)}finally{Xe=h,ee.p=u,B.T=a}}At=3}}function t0(){if(At===4||At===3){At=0,Me();var r=Kr,i=Hi,a=xr,u=qy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?At=5:(At=0,Hi=Kr=null,n0(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&(Yr=null),Ou(a),i=i.stateNode,fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(ul,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=B.T,h=ee.p,ee.p=2,B.T=null;try{for(var m=r.onRecoverableError,S=0;S<u.length;S++){var T=u[S];m(T.value,{componentStack:T.stack})}}finally{B.T=i,ee.p=h}}(xr&3)!==0&&Ha(),Xn(r),h=r.pendingLanes,(a&261930)!==0&&(h&42)!==0?r===fd?Yl++:(Yl=0,fd=r):Yl=0,Kl(0)}}function n0(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Ml(i)))}function Ha(){return Wy(),e0(),t0(),r0()}function r0(){if(At!==5)return!1;var r=Kr,i=cd;cd=0;var a=Ou(xr),u=B.T,h=ee.p;try{ee.p=32>a?32:a,B.T=null,a=ud,ud=null;var m=Kr,S=xr;if(At=0,Hi=Kr=null,xr=0,(Xe&6)!==0)throw Error(s(331));var T=Xe;if(Xe|=4,Hy(m.current),Ly(m,m.current,S,a),Xe=T,Kl(0,!1),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(ul,m)}catch{}return!0}finally{ee.p=h,B.T=u,n0(r,i)}}function s0(r,i,a){i=wn(a,i),i=$f(r.stateNode,i,2),r=Ur(r,i,2),r!==null&&(dl(r,2),Xn(r))}function Ze(r,i,a){if(r.tag===3)s0(r,r,a);else for(;i!==null;){if(i.tag===3){s0(i,r,a);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Yr===null||!Yr.has(u))){r=wn(a,r),a=iy(2),u=Ur(i,a,2),u!==null&&(ly(a,u,i,r),dl(u,2),Xn(u));break}}i=i.return}}function pd(r,i,a){var u=r.pingCache;if(u===null){u=r.pingCache=new nT;var h=new Set;u.set(i,h)}else h=u.get(i),h===void 0&&(h=new Set,u.set(i,h));h.has(a)||(ld=!0,h.add(a),r=oT.bind(null,r,i,a),i.then(r,r))}function oT(r,i,a){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&a,r.warmLanes&=~a,st===r&&(Ie&a)===a&&(gt===4||gt===3&&(Ie&62914560)===Ie&&300>ge()-ja?(Xe&2)===0&&Ui(r,0):od|=a,Bi===Ie&&(Bi=0)),Xn(r)}function i0(r,i){i===0&&(i=Wp()),r=Ns(r,i),r!==null&&(dl(r,i),Xn(r))}function aT(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),i0(r,a)}function cT(r,i){var a=0;switch(r.tag){case 31:case 13:var u=r.stateNode,h=r.memoizedState;h!==null&&(a=h.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),i0(r,a)}function uT(r,i){return fe(r,i)}var Ua=null,qi=null,md=!1,Ia=!1,gd=!1,Jr=0;function Xn(r){r!==qi&&r.next===null&&(qi===null?Ua=qi=r:qi=qi.next=r),Ia=!0,md||(md=!0,dT())}function Kl(r,i){if(!gd&&Ia){gd=!0;do for(var a=!1,u=Ua;u!==null;){if(r!==0){var h=u.pendingLanes;if(h===0)var m=0;else{var S=u.suspendedLanes,T=u.pingedLanes;m=(1<<31-dn(42|r)+1)-1,m&=h&~(S&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,c0(u,m))}else m=Ie,m=Go(u,u===st?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||fl(u,m)||(a=!0,c0(u,m));u=u.next}while(a);gd=!1}}function fT(){l0()}function l0(){Ia=md=!1;var r=0;Jr!==0&&kT()&&(r=Jr);for(var i=ge(),a=null,u=Ua;u!==null;){var h=u.next,m=o0(u,i);m===0?(u.next=null,a===null?Ua=h:a.next=h,h===null&&(qi=a)):(a=u,(r!==0||(m&3)!==0)&&(Ia=!0)),u=h}At!==0&&At!==5||Kl(r),Jr!==0&&(Jr=0)}function o0(r,i){for(var a=r.suspendedLanes,u=r.pingedLanes,h=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var S=31-dn(m),T=1<<S,w=h[S];w===-1?((T&a)===0||(T&u)!==0)&&(h[S]=HS(T,i)):w<=i&&(r.expiredLanes|=T),m&=~T}if(i=st,a=Ie,a=Go(r,r===i?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,a===0||r===i&&(Qe===2||Qe===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&se(u),r.callbackNode=null,r.callbackPriority=0;if((a&3)===0||fl(r,a)){if(i=a&-a,i===r.callbackPriority)return i;switch(u!==null&&se(u),Ou(a)){case 2:case 8:a=en;break;case 32:a=Tn;break;case 268435456:a=Kn;break;default:a=Tn}return u=a0.bind(null,r),a=fe(a,u),r.callbackPriority=i,r.callbackNode=a,i}return u!==null&&u!==null&&se(u),r.callbackPriority=2,r.callbackNode=null,2}function a0(r,i){if(At!==0&&At!==5)return r.callbackNode=null,r.callbackPriority=0,null;var a=r.callbackNode;if(Ha()&&r.callbackNode!==a)return null;var u=Ie;return u=Go(r,r===st?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:($y(r,u,i),o0(r,ge()),r.callbackNode!=null&&r.callbackNode===a?a0.bind(null,r):null)}function c0(r,i){if(Ha())return null;$y(r,i,!0)}function dT(){ET(function(){(Xe&6)!==0?fe(Ke,fT):l0()})}function yd(){if(Jr===0){var r=Mi;r===0&&(r=qo,qo<<=1,(qo&261888)===0&&(qo=256)),Jr=r}return Jr}function u0(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Jo(""+r)}function f0(r,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,r.id&&a.setAttribute("form",r.id),i.parentNode.insertBefore(a,i),r=new FormData(r),a.parentNode.removeChild(a),r}function hT(r,i,a,u,h){if(i==="submit"&&a&&a.stateNode===h){var m=u0((h[tn]||null).action),S=u.submitter;S&&(i=(i=S[tn]||null)?u0(i.formAction):S.getAttribute("formAction"),i!==null&&(m=i,S=null));var T=new Zo("action","action",null,u,h);r.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Jr!==0){var w=S?f0(h,S):new FormData(h);Bf(a,{pending:!0,data:w,method:h.method,action:m},null,w)}}else typeof m=="function"&&(T.preventDefault(),w=S?f0(h,S):new FormData(h),Bf(a,{pending:!0,data:w,method:h.method,action:m},m,w))},currentTarget:h}]})}}for(var bd=0;bd<Wu.length;bd++){var xd=Wu[bd],pT=xd.toLowerCase(),mT=xd[0].toUpperCase()+xd.slice(1);In(pT,"on"+mT)}In(Vm,"onAnimationEnd"),In($m,"onAnimationIteration"),In(Gm,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(Dk,"onTransitionRun"),In(jk,"onTransitionStart"),In(Rk,"onTransitionCancel"),In(Ym,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),Es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Es("onBeforeInput",["compositionend","keypress","textInput","paste"]),Es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function d0(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var u=r[a],h=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var S=u.length-1;0<=S;S--){var T=u[S],w=T.instance,R=T.currentTarget;if(T=T.listener,w!==m&&h.isPropagationStopped())break e;m=T,h.currentTarget=R;try{m(h)}catch(G){ta(G)}h.currentTarget=null,m=w}else for(S=0;S<u.length;S++){if(T=u[S],w=T.instance,R=T.currentTarget,T=T.listener,w!==m&&h.isPropagationStopped())break e;m=T,h.currentTarget=R;try{m(h)}catch(G){ta(G)}h.currentTarget=null,m=w}}}}function Ue(r,i){var a=i[Du];a===void 0&&(a=i[Du]=new Set);var u=r+"__bubble";a.has(u)||(h0(i,r,2,!1),a.add(u))}function vd(r,i,a){var u=0;i&&(u|=4),h0(a,r,u,i)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Sd(r){if(!r[qa]){r[qa]=!0,lm.forEach(function(a){a!=="selectionchange"&&(gT.has(a)||vd(a,!1,r),vd(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[qa]||(i[qa]=!0,vd("selectionchange",!1,i))}}function h0(r,i,a,u){switch(V0(i)){case 2:var h=GT;break;case 8:h=YT;break;default:h=_d}a=h.bind(null,i,a,r),h=void 0,!Iu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),u?h!==void 0?r.addEventListener(i,a,{capture:!0,passive:h}):r.addEventListener(i,a,!0):h!==void 0?r.addEventListener(i,a,{passive:h}):r.addEventListener(i,a,!1)}function kd(r,i,a,u,h){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var T=u.stateNode.containerInfo;if(T===h)break;if(S===4)for(S=u.return;S!==null;){var w=S.tag;if((w===3||w===4)&&S.stateNode.containerInfo===h)return;S=S.return}for(;T!==null;){if(S=ci(T),S===null)return;if(w=S.tag,w===5||w===6||w===26||w===27){u=m=S;continue e}T=T.parentNode}}u=u.return}bm(function(){var R=m,G=Hu(a),J=[];e:{var L=Km.get(r);if(L!==void 0){var U=Zo,ce=r;switch(r){case"keypress":if(Xo(a)===0)break e;case"keydown":case"keyup":U=ck;break;case"focusin":ce="focus",U=Gu;break;case"focusout":ce="blur",U=Gu;break;case"beforeblur":case"afterblur":U=Gu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=Sm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=QS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=dk;break;case Vm:case $m:case Gm:U=ek;break;case Ym:U=pk;break;case"scroll":case"scrollend":U=FS;break;case"wheel":U=gk;break;case"copy":case"cut":case"paste":U=nk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Tm;break;case"toggle":case"beforetoggle":U=bk}var ke=(i&4)!==0,nt=!ke&&(r==="scroll"||r==="scrollend"),D=ke?L!==null?L+"Capture":null:L;ke=[];for(var A=R,j;A!==null;){var P=A;if(j=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||j===null||D===null||(P=ml(A,D),P!=null&&ke.push(Jl(A,P,j))),nt)break;A=A.return}0<ke.length&&(L=new U(L,ce,null,a,G),J.push({event:L,listeners:ke}))}}if((i&7)===0){e:{if(L=r==="mouseover"||r==="pointerover",U=r==="mouseout"||r==="pointerout",L&&a!==Bu&&(ce=a.relatedTarget||a.fromElement)&&(ci(ce)||ce[ai]))break e;if((U||L)&&(L=G.window===G?G:(L=G.ownerDocument)?L.defaultView||L.parentWindow:window,U?(ce=a.relatedTarget||a.toElement,U=R,ce=ce?ci(ce):null,ce!==null&&(nt=o(ce),ke=ce.tag,ce!==nt||ke!==5&&ke!==27&&ke!==6)&&(ce=null)):(U=null,ce=R),U!==ce)){if(ke=Sm,P="onMouseLeave",D="onMouseEnter",A="mouse",(r==="pointerout"||r==="pointerover")&&(ke=Tm,P="onPointerLeave",D="onPointerEnter",A="pointer"),nt=U==null?L:pl(U),j=ce==null?L:pl(ce),L=new ke(P,A+"leave",U,a,G),L.target=nt,L.relatedTarget=j,P=null,ci(G)===R&&(ke=new ke(D,A+"enter",ce,a,G),ke.target=j,ke.relatedTarget=nt,P=ke),nt=P,U&&ce)t:{for(ke=yT,D=U,A=ce,j=0,P=D;P;P=ke(P))j++;P=0;for(var xe=A;xe;xe=ke(xe))P++;for(;0<j-P;)D=ke(D),j--;for(;0<P-j;)A=ke(A),P--;for(;j--;){if(D===A||A!==null&&D===A.alternate){ke=D;break t}D=ke(D),A=ke(A)}ke=null}else ke=null;U!==null&&p0(J,L,U,ke,!1),ce!==null&&nt!==null&&p0(J,nt,ce,ke,!0)}}e:{if(L=R?pl(R):window,U=L.nodeName&&L.nodeName.toLowerCase(),U==="select"||U==="input"&&L.type==="file")var Pe=Dm;else if(Am(L))if(jm)Pe=Nk;else{Pe=Mk;var de=Ck}else U=L.nodeName,!U||U.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?R&&_u(R.elementType)&&(Pe=Dm):Pe=wk;if(Pe&&(Pe=Pe(r,R))){Om(J,Pe,a,G);break e}de&&de(r,L,R),r==="focusout"&&R&&L.type==="number"&&R.memoizedProps.value!=null&&Lu(L,"number",L.value)}switch(de=R?pl(R):window,r){case"focusin":(Am(de)||de.contentEditable==="true")&&(bi=de,Xu=R,Tl=null);break;case"focusout":Tl=Xu=bi=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,Im(J,a,G);break;case"selectionchange":if(Ok)break;case"keydown":case"keyup":Im(J,a,G)}var je;if(Ku)e:{switch(r){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else yi?wm(r,a)&&(qe="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(qe="onCompositionStart");qe&&(Em&&a.locale!=="ko"&&(yi||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&yi&&(je=xm()):(jr=G,qu="value"in jr?jr.value:jr.textContent,yi=!0)),de=Va(R,qe),0<de.length&&(qe=new km(qe,r,null,a,G),J.push({event:qe,listeners:de}),je?qe.data=je:(je=Nm(a),je!==null&&(qe.data=je)))),(je=vk?Sk(r,a):kk(r,a))&&(qe=Va(R,"onBeforeInput"),0<qe.length&&(de=new km("onBeforeInput","beforeinput",null,a,G),J.push({event:de,listeners:qe}),de.data=je)),hT(J,r,R,a,G)}d0(J,i)})}function Jl(r,i,a){return{instance:r,listener:i,currentTarget:a}}function Va(r,i){for(var a=i+"Capture",u=[];r!==null;){var h=r,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=ml(r,a),h!=null&&u.unshift(Jl(r,h,m)),h=ml(r,i),h!=null&&u.push(Jl(r,h,m))),r.tag===3)return u;r=r.return}return[]}function yT(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function p0(r,i,a,u,h){for(var m=i._reactName,S=[];a!==null&&a!==u;){var T=a,w=T.alternate,R=T.stateNode;if(T=T.tag,w!==null&&w===u)break;T!==5&&T!==26&&T!==27||R===null||(w=R,h?(R=ml(a,m),R!=null&&S.unshift(Jl(a,R,w))):h||(R=ml(a,m),R!=null&&S.push(Jl(a,R,w)))),a=a.return}S.length!==0&&r.push({event:i,listeners:S})}var bT=/\r\n?/g,xT=/\u0000|\uFFFD/g;function m0(r){return(typeof r=="string"?r:""+r).replace(bT,`
`).replace(xT,"")}function g0(r,i){return i=m0(i),m0(r)===i}function tt(r,i,a,u,h,m){switch(a){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||pi(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&pi(r,""+u);break;case"className":Ko(r,"class",u);break;case"tabIndex":Ko(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ko(r,a,u);break;case"style":gm(r,u,m);break;case"data":if(i!=="object"){Ko(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||a!=="href")){r.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=Jo(""+u),r.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&tt(r,i,"name",h.name,h,null),tt(r,i,"formEncType",h.formEncType,h,null),tt(r,i,"formMethod",h.formMethod,h,null),tt(r,i,"formTarget",h.formTarget,h,null)):(tt(r,i,"encType",h.encType,h,null),tt(r,i,"method",h.method,h,null),tt(r,i,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(a);break}u=Jo(""+u),r.setAttribute(a,u);break;case"onClick":u!=null&&(r.onclick=sr);break;case"onScroll":u!=null&&Ue("scroll",r);break;case"onScrollEnd":u!=null&&Ue("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(h.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}a=Jo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""+u):r.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,""):r.removeAttribute(a);break;case"capture":case"download":u===!0?r.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(a,u):r.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(a,u):r.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(a):r.setAttribute(a,u);break;case"popover":Ue("beforetoggle",r),Ue("toggle",r),Yo(r,"popover",u);break;case"xlinkActuate":rr(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":rr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":rr(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":rr(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":rr(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":rr(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":rr(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":rr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":rr(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Yo(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=PS.get(a)||a,Yo(r,a,u))}}function Td(r,i,a,u,h,m){switch(a){case"style":gm(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(h.children!=null)throw Error(s(60));r.innerHTML=a}}break;case"children":typeof u=="string"?pi(r,u):(typeof u=="number"||typeof u=="bigint")&&pi(r,""+u);break;case"onScroll":u!=null&&Ue("scroll",r);break;case"onScrollEnd":u!=null&&Ue("scrollend",r);break;case"onClick":u!=null&&(r.onclick=sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!om.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),m=r[tn]||null,m=m!=null?m[a]:null,typeof m=="function"&&r.removeEventListener(i,m,h),typeof u=="function")){typeof m!="function"&&m!==null&&(a in r?r[a]=null:r.hasAttribute(a)&&r.removeAttribute(a)),r.addEventListener(i,u,h);break e}a in r?r[a]=u:u===!0?r.setAttribute(a,""):Yo(r,a,u)}}}function It(r,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",r),Ue("load",r);var u=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var S=a[m];if(S!=null)switch(m){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:tt(r,i,m,S,a,null)}}h&&tt(r,i,"srcSet",a.srcSet,a,null),u&&tt(r,i,"src",a.src,a,null);return;case"input":Ue("invalid",r);var T=m=S=h=null,w=null,R=null;for(u in a)if(a.hasOwnProperty(u)){var G=a[u];if(G!=null)switch(u){case"name":h=G;break;case"type":S=G;break;case"checked":w=G;break;case"defaultChecked":R=G;break;case"value":m=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:tt(r,i,u,G,a,null)}}dm(r,m,T,w,R,S,h,!1);return;case"select":Ue("invalid",r),u=S=m=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":m=T;break;case"defaultValue":S=T;break;case"multiple":u=T;default:tt(r,i,h,T,a,null)}i=m,a=S,r.multiple=!!u,i!=null?hi(r,!!u,i,!1):a!=null&&hi(r,!!u,a,!0);return;case"textarea":Ue("invalid",r),m=h=u=null;for(S in a)if(a.hasOwnProperty(S)&&(T=a[S],T!=null))switch(S){case"value":u=T;break;case"defaultValue":h=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:tt(r,i,S,T,a,null)}pm(r,u,h,m);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(u=a[w],u!=null))switch(w){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(r,i,w,u,a,null)}return;case"dialog":Ue("beforetoggle",r),Ue("toggle",r),Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":Ue("load",r);break;case"video":case"audio":for(u=0;u<Pl.length;u++)Ue(Pl[u],r);break;case"image":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"embed":case"source":case"link":Ue("error",r),Ue("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in a)if(a.hasOwnProperty(R)&&(u=a[R],u!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:tt(r,i,R,u,a,null)}return;default:if(_u(i)){for(G in a)a.hasOwnProperty(G)&&(u=a[G],u!==void 0&&Td(r,i,G,u,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(u=a[T],u!=null&&tt(r,i,T,u,a,null))}function vT(r,i,a,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,S=null,T=null,w=null,R=null,G=null;for(U in a){var J=a[U];if(a.hasOwnProperty(U)&&J!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":w=J;default:u.hasOwnProperty(U)||tt(r,i,U,null,u,J)}}for(var L in u){var U=u[L];if(J=a[L],u.hasOwnProperty(L)&&(U!=null||J!=null))switch(L){case"type":m=U;break;case"name":h=U;break;case"checked":R=U;break;case"defaultChecked":G=U;break;case"value":S=U;break;case"defaultValue":T=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(137,i));break;default:U!==J&&tt(r,i,L,U,u,J)}}zu(r,S,T,w,R,G,m,h);return;case"select":U=S=T=L=null;for(m in a)if(w=a[m],a.hasOwnProperty(m)&&w!=null)switch(m){case"value":break;case"multiple":U=w;default:u.hasOwnProperty(m)||tt(r,i,m,null,u,w)}for(h in u)if(m=u[h],w=a[h],u.hasOwnProperty(h)&&(m!=null||w!=null))switch(h){case"value":L=m;break;case"defaultValue":T=m;break;case"multiple":S=m;default:m!==w&&tt(r,i,h,m,u,w)}i=T,a=S,u=U,L!=null?hi(r,!!a,L,!1):!!u!=!!a&&(i!=null?hi(r,!!a,i,!0):hi(r,!!a,a?[]:"",!1));return;case"textarea":U=L=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:tt(r,i,T,null,u,h)}for(S in u)if(h=u[S],m=a[S],u.hasOwnProperty(S)&&(h!=null||m!=null))switch(S){case"value":L=h;break;case"defaultValue":U=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==m&&tt(r,i,S,h,u,m)}hm(r,L,U);return;case"option":for(var ce in a)if(L=a[ce],a.hasOwnProperty(ce)&&L!=null&&!u.hasOwnProperty(ce))switch(ce){case"selected":r.selected=!1;break;default:tt(r,i,ce,null,u,L)}for(w in u)if(L=u[w],U=a[w],u.hasOwnProperty(w)&&L!==U&&(L!=null||U!=null))switch(w){case"selected":r.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:tt(r,i,w,L,u,U)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in a)L=a[ke],a.hasOwnProperty(ke)&&L!=null&&!u.hasOwnProperty(ke)&&tt(r,i,ke,null,u,L);for(R in u)if(L=u[R],U=a[R],u.hasOwnProperty(R)&&L!==U&&(L!=null||U!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(137,i));break;default:tt(r,i,R,L,u,U)}return;default:if(_u(i)){for(var nt in a)L=a[nt],a.hasOwnProperty(nt)&&L!==void 0&&!u.hasOwnProperty(nt)&&Td(r,i,nt,void 0,u,L);for(G in u)L=u[G],U=a[G],!u.hasOwnProperty(G)||L===U||L===void 0&&U===void 0||Td(r,i,G,L,u,U);return}}for(var D in a)L=a[D],a.hasOwnProperty(D)&&L!=null&&!u.hasOwnProperty(D)&&tt(r,i,D,null,u,L);for(J in u)L=u[J],U=a[J],!u.hasOwnProperty(J)||L===U||L==null&&U==null||tt(r,i,J,L,u,U)}function y0(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ST(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var h=a[u],m=h.transferSize,S=h.initiatorType,T=h.duration;if(m&&T&&y0(S)){for(S=0,T=h.responseEnd,u+=1;u<a.length;u++){var w=a[u],R=w.startTime;if(R>T)break;var G=w.transferSize,J=w.initiatorType;G&&y0(J)&&(w=w.responseEnd,S+=G*(w<T?1:(T-R)/(w-R)))}if(--u,i+=8*(m+S)/(h.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Ed=null,Cd=null;function $a(r){return r.nodeType===9?r:r.ownerDocument}function b0(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function x0(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Md(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var wd=null;function kT(){var r=window.event;return r&&r.type==="popstate"?r===wd?!1:(wd=r,!0):(wd=null,!1)}var v0=typeof setTimeout=="function"?setTimeout:void 0,TT=typeof clearTimeout=="function"?clearTimeout:void 0,S0=typeof Promise=="function"?Promise:void 0,ET=typeof queueMicrotask=="function"?queueMicrotask:typeof S0<"u"?function(r){return S0.resolve(null).then(r).catch(CT)}:v0;function CT(r){setTimeout(function(){throw r})}function Fr(r){return r==="head"}function k0(r,i){var a=i,u=0;do{var h=a.nextSibling;if(r.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(u===0){r.removeChild(h),Yi(i);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Fl(r.ownerDocument.documentElement);else if(a==="head"){a=r.ownerDocument.head,Fl(a);for(var m=a.firstChild;m;){var S=m.nextSibling,T=m.nodeName;m[hl]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=S}}else a==="body"&&Fl(r.ownerDocument.body);a=h}while(a);Yi(i)}function T0(r,i){var a=r;r=0;do{var u=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(r===0)break;r--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||r++;a=u}while(a)}function Nd(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Nd(a),ju(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}r.removeChild(a)}}function MT(r,i,a,u){for(;r.nodeType===1;){var h=a;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[hl])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=jn(r.nextSibling),r===null)break}return null}function wT(r,i,a){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=jn(r.nextSibling),r===null))return null;return r}function E0(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=jn(r.nextSibling),r===null))return null;return r}function Ad(r){return r.data==="$?"||r.data==="$~"}function Od(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function NT(r,i){var a=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||a.readyState!=="loading")i();else{var u=function(){i(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function jn(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Dd=null;function C0(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"||a==="/&"){if(i===0)return jn(r.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}r=r.nextSibling}return null}function M0(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return r;i--}else a!=="/$"&&a!=="/&"||i++}r=r.previousSibling}return null}function w0(r,i,a){switch(i=$a(a),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Fl(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);ju(r)}var Rn=new Map,N0=new Set;function Ga(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var vr=ee.d;ee.d={f:AT,r:OT,D:DT,C:jT,L:RT,m:zT,X:_T,S:LT,M:BT};function AT(){var r=vr.f(),i=La();return r||i}function OT(r){var i=ui(r);i!==null&&i.tag===5&&i.type==="form"?Yg(i):vr.r(r)}var Vi=typeof document>"u"?null:document;function A0(r,i,a){var u=Vi;if(u&&typeof i=="string"&&i){var h=Cn(i);h='link[rel="'+r+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),N0.has(h)||(N0.add(h),r={rel:r,crossOrigin:a,href:i},u.querySelector(h)===null&&(i=u.createElement("link"),It(i,"link",r),Dt(i),u.head.appendChild(i)))}}function DT(r){vr.D(r),A0("dns-prefetch",r,null)}function jT(r,i){vr.C(r,i),A0("preconnect",r,i)}function RT(r,i,a){vr.L(r,i,a);var u=Vi;if(u&&r&&i){var h='link[rel="preload"][as="'+Cn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Cn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Cn(a.imageSizes)+'"]')):h+='[href="'+Cn(r)+'"]';var m=h;switch(i){case"style":m=$i(r);break;case"script":m=Gi(r)}Rn.has(m)||(r=y({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:r,as:i},a),Rn.set(m,r),u.querySelector(h)!==null||i==="style"&&u.querySelector(Xl(m))||i==="script"&&u.querySelector(Ql(m))||(i=u.createElement("link"),It(i,"link",r),Dt(i),u.head.appendChild(i)))}}function zT(r,i){vr.m(r,i);var a=Vi;if(a&&r){var u=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Cn(u)+'"][href="'+Cn(r)+'"]',m=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Gi(r)}if(!Rn.has(m)&&(r=y({rel:"modulepreload",href:r},i),Rn.set(m,r),a.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ql(m)))return}u=a.createElement("link"),It(u,"link",r),Dt(u),a.head.appendChild(u)}}}function LT(r,i,a){vr.S(r,i,a);var u=Vi;if(u&&r){var h=fi(u).hoistableStyles,m=$i(r);i=i||"default";var S=h.get(m);if(!S){var T={loading:0,preload:null};if(S=u.querySelector(Xl(m)))T.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":i},a),(a=Rn.get(m))&&jd(r,a);var w=S=u.createElement("link");Dt(w),It(w,"link",r),w._p=new Promise(function(R,G){w.onload=R,w.onerror=G}),w.addEventListener("load",function(){T.loading|=1}),w.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Ya(S,i,u)}S={type:"stylesheet",instance:S,count:1,state:T},h.set(m,S)}}}function _T(r,i){vr.X(r,i);var a=Vi;if(a&&r){var u=fi(a).hoistableScripts,h=Gi(r),m=u.get(h);m||(m=a.querySelector(Ql(h)),m||(r=y({src:r,async:!0},i),(i=Rn.get(h))&&Rd(r,i),m=a.createElement("script"),Dt(m),It(m,"link",r),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function BT(r,i){vr.M(r,i);var a=Vi;if(a&&r){var u=fi(a).hoistableScripts,h=Gi(r),m=u.get(h);m||(m=a.querySelector(Ql(h)),m||(r=y({src:r,async:!0,type:"module"},i),(i=Rn.get(h))&&Rd(r,i),m=a.createElement("script"),Dt(m),It(m,"link",r),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function O0(r,i,a,u){var h=(h=ve.current)?Ga(h):null;if(!h)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=$i(a.href),a=fi(h).hoistableStyles,u=a.get(i),u||(u={type:"style",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){r=$i(a.href);var m=fi(h).hoistableStyles,S=m.get(r);if(S||(h=h.ownerDocument||h,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,S),(m=h.querySelector(Xl(r)))&&!m._p&&(S.instance=m,S.state.loading=5),Rn.has(r)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Rn.set(r,a),m||HT(h,r,a,S.state))),i&&u===null)throw Error(s(528,""));return S}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Gi(a),a=fi(h).hoistableScripts,u=a.get(i),u||(u={type:"script",instance:null,count:0,state:null},a.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function $i(r){return'href="'+Cn(r)+'"'}function Xl(r){return'link[rel="stylesheet"]['+r+"]"}function D0(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function HT(r,i,a,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),It(i,"link",a),Dt(i),r.head.appendChild(i))}function Gi(r){return'[src="'+Cn(r)+'"]'}function Ql(r){return"script[async]"+r}function j0(r,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Cn(a.href)+'"]');if(u)return i.instance=u,Dt(u),u;var h=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Dt(u),It(u,"style",h),Ya(u,a.precedence,r),i.instance=u;case"stylesheet":h=$i(a.href);var m=r.querySelector(Xl(h));if(m)return i.state.loading|=4,i.instance=m,Dt(m),m;u=D0(a),(h=Rn.get(h))&&jd(u,h),m=(r.ownerDocument||r).createElement("link"),Dt(m);var S=m;return S._p=new Promise(function(T,w){S.onload=T,S.onerror=w}),It(m,"link",u),i.state.loading|=4,Ya(m,a.precedence,r),i.instance=m;case"script":return m=Gi(a.src),(h=r.querySelector(Ql(m)))?(i.instance=h,Dt(h),h):(u=a,(h=Rn.get(m))&&(u=y({},a),Rd(u,h)),r=r.ownerDocument||r,h=r.createElement("script"),Dt(h),It(h,"link",u),r.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Ya(u,a.precedence,r));return i.instance}function Ya(r,i,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,m=h,S=0;S<u.length;S++){var T=u[S];if(T.dataset.precedence===i)m=T;else if(m!==h)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(r,i.firstChild))}function jd(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Rd(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Ka=null;function R0(r,i,a){if(Ka===null){var u=new Map,h=Ka=new Map;h.set(a,u)}else h=Ka,u=h.get(a),u||(u=new Map,h.set(a,u));if(u.has(r))return u;for(u.set(r,null),a=a.getElementsByTagName(r),h=0;h<a.length;h++){var m=a[h];if(!(m[hl]||m[_t]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var S=m.getAttribute(i)||"";S=r+S;var T=u.get(S);T?T.push(m):u.set(S,[m])}}return u}function z0(r,i,a){r=r.ownerDocument||r,r.head.insertBefore(a,i==="title"?r.querySelector("head > title"):null)}function UT(r,i,a){if(a===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function L0(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function IT(r,i,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=$i(u.href),m=i.querySelector(Xl(h));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Pa.bind(r),i.then(r,r)),a.state.loading|=4,a.instance=m,Dt(m);return}m=i.ownerDocument||i,u=D0(u),(h=Rn.get(h))&&jd(u,h),m=m.createElement("link"),Dt(m);var S=m;S._p=new Promise(function(T,w){S.onload=T,S.onerror=w}),It(m,"link",u),a.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(r.count++,a=Pa.bind(r),i.addEventListener("load",a),i.addEventListener("error",a))}}var zd=0;function qT(r,i){return r.stylesheets&&r.count===0&&Fa(r,r.stylesheets),0<r.count||0<r.imgCount?function(a){var u=setTimeout(function(){if(r.stylesheets&&Fa(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4+i);0<r.imgBytes&&zd===0&&(zd=62500*ST());var h=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Fa(r,r.stylesheets),r.unsuspend)){var m=r.unsuspend;r.unsuspend=null,m()}},(r.imgBytes>zd?50:800)+i);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(h)}}:null}function Pa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fa(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ja=null;function Fa(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ja=new Map,i.forEach(VT,r),Ja=null,Pa.call(r))}function VT(r,i){if(!(i.state.loading&4)){var a=Ja.get(r);if(a)var u=a.get(null);else{a=new Map,Ja.set(r,a);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var S=h[m];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}h=i.instance,S=h.getAttribute("data-precedence"),m=a.get(S)||u,m===u&&a.set(null,h),a.set(S,h),this.count++,u=Pa.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),m?m.parentNode.insertBefore(h,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),i.state.loading|=4}}var Zl={$$typeof:$,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function $T(r,i,a,u,h,m,S,T,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nu(0),this.hiddenUpdates=Nu(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function _0(r,i,a,u,h,m,S,T,w,R,G,J){return r=new $T(r,i,a,S,w,R,G,J,T),i=1,m===!0&&(i|=24),m=pn(3,null,null,i),r.current=m,m.stateNode=r,i=hf(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:a,cache:i},yf(m),r}function B0(r){return r?(r=Si,r):Si}function H0(r,i,a,u,h,m){h=B0(h),u.context===null?u.context=h:u.pendingContext=h,u=Hr(i),u.payload={element:a},m=m===void 0?null:m,m!==null&&(u.callback=m),a=Ur(r,u,i),a!==null&&(an(a,r,i),Ol(a,r,i))}function U0(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function Ld(r,i){U0(r,i),(r=r.alternate)&&U0(r,i)}function I0(r){if(r.tag===13||r.tag===31){var i=Ns(r,67108864);i!==null&&an(i,r,67108864),Ld(r,67108864)}}function q0(r){if(r.tag===13||r.tag===31){var i=xn();i=Au(i);var a=Ns(r,i);a!==null&&an(a,r,i),Ld(r,i)}}var Xa=!0;function GT(r,i,a,u){var h=B.T;B.T=null;var m=ee.p;try{ee.p=2,_d(r,i,a,u)}finally{ee.p=m,B.T=h}}function YT(r,i,a,u){var h=B.T;B.T=null;var m=ee.p;try{ee.p=8,_d(r,i,a,u)}finally{ee.p=m,B.T=h}}function _d(r,i,a,u){if(Xa){var h=Bd(u);if(h===null)kd(r,i,u,Qa,a),$0(r,u);else if(PT(h,r,i,a,u))u.stopPropagation();else if($0(r,u),i&4&&-1<KT.indexOf(r)){for(;h!==null;){var m=ui(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var S=Ts(m.pendingLanes);if(S!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;S;){var w=1<<31-dn(S);T.entanglements[1]|=w,S&=~w}Xn(m),(Xe&6)===0&&(Ra=ge()+500,Kl(0))}}break;case 31:case 13:T=Ns(m,2),T!==null&&an(T,m,2),La(),Ld(m,2)}if(m=Bd(u),m===null&&kd(r,i,u,Qa,a),m===h)break;h=m}h!==null&&u.stopPropagation()}else kd(r,i,u,null,a)}}function Bd(r){return r=Hu(r),Hd(r)}var Qa=null;function Hd(r){if(Qa=null,r=ci(r),r!==null){var i=o(r);if(i===null)r=null;else{var a=i.tag;if(a===13){if(r=c(i),r!==null)return r;r=null}else if(a===31){if(r=f(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Qa=r,null}function V0(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pe()){case Ke:return 2;case en:return 8;case Tn:case Yt:return 32;case Kn:return 268435456;default:return 32}default:return 32}}var Ud=!1,Xr=null,Qr=null,Zr=null,Wl=new Map,eo=new Map,Wr=[],KT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $0(r,i){switch(r){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Wl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":eo.delete(i.pointerId)}}function to(r,i,a,u,h,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:a,eventSystemFlags:u,nativeEvent:m,targetContainers:[h]},i!==null&&(i=ui(i),i!==null&&I0(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),r)}function PT(r,i,a,u,h){switch(i){case"focusin":return Xr=to(Xr,r,i,a,u,h),!0;case"dragenter":return Qr=to(Qr,r,i,a,u,h),!0;case"mouseover":return Zr=to(Zr,r,i,a,u,h),!0;case"pointerover":var m=h.pointerId;return Wl.set(m,to(Wl.get(m)||null,r,i,a,u,h)),!0;case"gotpointercapture":return m=h.pointerId,eo.set(m,to(eo.get(m)||null,r,i,a,u,h)),!0}return!1}function G0(r){var i=ci(r.target);if(i!==null){var a=o(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){r.blockedOn=i,sm(r.priority,function(){q0(a)});return}}else if(i===31){if(i=f(a),i!==null){r.blockedOn=i,sm(r.priority,function(){q0(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Za(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=Bd(r.nativeEvent);if(a===null){a=r.nativeEvent;var u=new a.constructor(a.type,a);Bu=u,a.target.dispatchEvent(u),Bu=null}else return i=ui(a),i!==null&&I0(i),r.blockedOn=a,!1;i.shift()}return!0}function Y0(r,i,a){Za(r)&&a.delete(i)}function JT(){Ud=!1,Xr!==null&&Za(Xr)&&(Xr=null),Qr!==null&&Za(Qr)&&(Qr=null),Zr!==null&&Za(Zr)&&(Zr=null),Wl.forEach(Y0),eo.forEach(Y0)}function Wa(r,i){r.blockedOn===i&&(r.blockedOn=null,Ud||(Ud=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,JT)))}var ec=null;function K0(r){ec!==r&&(ec=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ec===r&&(ec=null);for(var i=0;i<r.length;i+=3){var a=r[i],u=r[i+1],h=r[i+2];if(typeof u!="function"){if(Hd(u||a)===null)continue;break}var m=ui(a);m!==null&&(r.splice(i,3),i-=3,Bf(m,{pending:!0,data:h,method:a.method,action:u},u,h))}}))}function Yi(r){function i(w){return Wa(w,r)}Xr!==null&&Wa(Xr,r),Qr!==null&&Wa(Qr,r),Zr!==null&&Wa(Zr,r),Wl.forEach(i),eo.forEach(i);for(var a=0;a<Wr.length;a++){var u=Wr[a];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Wr.length&&(a=Wr[0],a.blockedOn===null);)G0(a),a.blockedOn===null&&Wr.shift();if(a=(r.ownerDocument||r).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var h=a[u],m=a[u+1],S=h[tn]||null;if(typeof m=="function")S||K0(a);else if(S){var T=null;if(m&&m.hasAttribute("formAction")){if(h=m,S=m[tn]||null)T=S.formAction;else if(Hd(h)!==null)continue}else T=S.action;typeof T=="function"?a[u+1]=T:(a.splice(u,3),u-=3),K0(a)}}}function P0(){function r(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(S){return h=S})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,h=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Id(r){this._internalRoot=r}tc.prototype.render=Id.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,u=xn();H0(a,u,r,i,null,null)},tc.prototype.unmount=Id.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;H0(r.current,2,null,r,null,null),La(),i[ai]=null}};function tc(r){this._internalRoot=r}tc.prototype.unstable_scheduleHydration=function(r){if(r){var i=rm();r={blockedOn:null,target:r,priority:i};for(var a=0;a<Wr.length&&i!==0&&i<Wr[a].priority;a++);Wr.splice(a,0,r),a===0&&G0(r)}};var J0=e.version;if(J0!=="19.2.1")throw Error(s(527,J0,"19.2.1"));ee.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=p(i),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var FT={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{ul=nc.inject(FT),fn=nc}catch{}}return ro.createRoot=function(r,i){if(!l(r))throw Error(s(299));var a=!1,u="",h=ty,m=ny,S=ry;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError)),i=_0(r,1,!1,null,null,a,u,null,h,m,S,P0),r[ai]=i.current,Sd(r),new Id(i)},ro.hydrateRoot=function(r,i,a){if(!l(r))throw Error(s(299));var u=!1,h="",m=ty,S=ny,T=ry,w=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(w=a.formState)),i=_0(r,1,!0,i,a??null,u,h,w,m,S,T,P0),i.context=B0(null),a=i.current,u=xn(),u=Au(u),h=Hr(u),h.callback=null,Ur(a,h,u),a=u,i.current.lanes=a,dl(i,a),Xn(i),r[ai]=i.current,Sd(r),new tc(i)},ro.version="19.2.1",ro}var sb;function sE(){if(sb)return $d.exports;sb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$d.exports=rE(),$d.exports}var iE=sE();const lE=fp(iE),Oh="pc1_admin_token",oE="X-PC1-Auth-Required",aE="X-PC1-Admin-Token";function cE(){return window.localStorage.getItem(Oh)||""}function uE(n){const e=(n||"").trim();if(!e){window.localStorage.removeItem(Oh);return}window.localStorage.setItem(Oh,e)}function ib(n={},e=""){return e?{...n,[aE]:e}:n}async function it(n,e={}){const t=cE(),s=ib(e.headers||{},t);let l=await fetch(n,{...e,headers:s});const o=l.headers.get(oE)==="true";if(l.status!==401||!o)return l;const c=window.prompt("Enter PC-1 admin token");if(!c)return l;const f=c.trim();if(!f)return l;uE(f);const d=ib(e.headers||{},f);return l=await fetch(n,{...e,headers:d}),l}function fE({wifiStatus:n}){const[e,t]=Q.useState([]),[s,l]=Q.useState(""),[o,c]=Q.useState(""),[f,d]=Q.useState(!1),[p,g]=Q.useState(!1),[y,x]=Q.useState(!1),[v,k]=Q.useState(""),[E,C]=Q.useState(!1);Q.useEffect(()=>{M()},[]);const M=async()=>{d(!0),k("");try{const Y=await(await fetch("/api/wifi/networks")).json();t(Y.networks||[])}catch(_){k("Failed to scan networks"),console.error(_)}finally{d(!1)}},I=async _=>{if(_.preventDefault(),!s){k("Please select a network");return}g(!0),k("");try{const Y=await it("/api/wifi/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ssid:s,password:o||null})});if(Y.ok)x(!0),g(!1);else{const V=await Y.json();k(V.detail||"Failed to connect"),g(!1)}}catch{x(!0),g(!1)}},$="w-full p-3 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border",X="w-full py-3 px-4 rounded-lg font-bold transition-all";return y?b.jsx("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 bg-white min-h-screen",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-6xl mb-6",children:""}),b.jsx("h1",{className:"text-3xl mb-4 font-bold text-black",children:"Connecting to WiFi..."}),b.jsxs("p",{className:"text-gray-600 mb-6",children:["Your PC-1 is now connecting to ",b.jsx("strong",{className:"text-black",children:s})]}),b.jsxs("div",{className:"bg-bg-card border-4 border-black rounded-xl p-6 text-left mb-6 shadow-lg",children:[b.jsx("h2",{className:"font-bold text-black mb-4",children:"Next Steps:"}),b.jsxs("ol",{className:"space-y-3 text-black",children:[b.jsxs("li",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"1"}),b.jsxs("span",{children:["Disconnect from ",b.jsx("strong",{children:n?.ap_ssid||"PC-1 Setup network"})," on your phone"]})]}),b.jsxs("li",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"2"}),b.jsxs("span",{children:["Connect your phone to ",b.jsx("strong",{children:s})]})]}),b.jsxs("li",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"3"}),b.jsx("span",{children:"Wait about 30 seconds for the device to connect"})]}),b.jsxs("li",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"bg-black text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-sm font-bold",children:"4"}),b.jsxs("span",{children:["Visit ",b.jsx("strong",{className:"text-black",children:"http://pc-1.local"})," to access settings"]})]})]})]}),b.jsx("p",{className:"text-sm text-gray-600",children:"If the connection fails, the PC-1 will re-create the setup network automatically."})]})}):b.jsxs("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 bg-white min-h-screen",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("h1",{className:"text-3xl sm:text-4xl mb-4 font-bold text-black",children:"WiFi Setup"}),b.jsx("p",{className:"text-gray-600",children:"Connect your PC-1 to your home WiFi network"})]}),v&&b.jsxs("div",{className:"bg-white border-2 border-red-500 text-red-600 p-4 rounded-lg mb-6",children:[b.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),v]}),b.jsx("div",{className:"bg-bg-card border-4 border-black rounded-xl p-4 flex flex-col shadow-lg mb-6",children:b.jsxs("form",{onSubmit:I,className:"space-y-6",children:[E?b.jsxs(b.Fragment,{children:[b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 font-bold text-black",children:"Network Name (SSID)"}),b.jsx("input",{type:"text",value:s,onChange:_=>l(_.target.value),className:$,placeholder:"Enter WiFi network name",required:!0,disabled:p})]}),b.jsx("button",{type:"button",onClick:()=>{C(!1),l("")},className:"text-sm text-gray-600 hover:text-black underline cursor-pointer",children:" Back to network list"})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b.jsx("label",{className:"block font-bold text-black",children:"Available Networks"}),b.jsx("button",{type:"button",onClick:M,disabled:f,className:"text-sm px-3 py-1 bg-transparent border-2 border-gray-300 hover:border-black rounded-lg text-black transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:f?"Scanning...":"Refresh"})]}),b.jsxs("select",{value:s,onChange:_=>l(_.target.value),className:$,required:!0,disabled:p,children:[b.jsx("option",{value:"",children:"-- Select a network --"}),e.map(_=>b.jsxs("option",{value:_.ssid,children:[_.ssid," (",_.signal,"%) ",_.secure?"":""]},_.ssid))]})]}),b.jsx("button",{type:"button",onClick:()=>C(!0),className:"text-sm text-gray-600 hover:text-black underline cursor-pointer",children:"Enter network name manually"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 font-bold text-black",children:"Password"}),b.jsx("input",{type:"password",value:o,onChange:_=>c(_.target.value),className:$,placeholder:"Enter WiFi password (leave blank if open network)",disabled:p})]}),b.jsx("button",{type:"submit",disabled:p||!s,className:`${X} bg-transparent border-2 border-black text-black hover:bg-black hover:text-white disabled:opacity-50 disabled:cursor-not-allowed disabled:border-gray-300 disabled:text-gray-400 cursor-pointer`,children:p?"Connecting...":"Connect to WiFi"})]})}),b.jsxs("div",{className:"mt-8 p-4 bg-bg-card border-4 border-black rounded-xl shadow-lg",children:[b.jsxs("p",{className:"text-sm text-black mb-2",children:[b.jsx("strong",{children:"Note:"})," After clicking Connect, this device will disconnect from the setup network and join your home WiFi."]}),b.jsx("p",{className:"text-sm text-gray-600",children:"You'll need to reconnect your phone to your home WiFi to access the settings page."})]})]})}const Dh=(n,e="12h")=>{if(!n)return"";if(e==="24h")return n;const[t,s]=n.split(":"),l=parseInt(t,10),o=l>=12?"PM":"AM";return`${l%12||12}:${s} ${o}`},dt="#000000",ts="#3a3a3a",qs="#4a4a4a",Pd="#525252",$x=[`radial-gradient(circle at 20% 30%, ${dt} 0%, ${ts} 25%, ${dt} 50%, ${qs} 75%, ${dt} 100%)`,`radial-gradient(circle at 80% 70%, ${dt} 0%, ${qs} 20%, ${dt} 40%, ${ts} 60%, ${dt} 80%, ${Pd} 100%)`,`radial-gradient(ellipse at 50% 20%, ${dt} 0%, ${ts} 30%, ${dt} 60%, ${qs} 90%, ${dt} 100%)`,`radial-gradient(circle at 70% 50%, ${dt} 0%, ${Pd} 15%, ${dt} 35%, ${ts} 55%, ${dt} 75%, ${qs} 100%)`,`radial-gradient(ellipse at 30% 80%, ${dt} 0%, ${qs} 25%, ${dt} 50%, ${ts} 75%, ${dt} 100%)`,`radial-gradient(circle at 60% 40%, ${dt} 0%, ${ts} 20%, ${dt} 45%, ${Pd} 70%, ${dt} 100%)`,`radial-gradient(ellipse at 40% 60%, ${dt} 0%, ${qs} 30%, ${dt} 60%, ${ts} 90%, ${dt} 100%)`,`radial-gradient(circle at 50% 50%, ${dt} 0%, ${ts} 25%, ${dt} 50%, ${qs} 75%, ${dt} 100%)`],Qi=({children:n,onClick:e,disabled:t=!1,className:s="",type:l="button",loading:o=!1,...c})=>{const d={className:`px-6 py-2 bg-transparent border-2 rounded-lg font-bold transition-all cursor-pointer flex items-center gap-2 ${s}`,style:{borderColor:"var(--color-text-muted)",color:"var(--color-text-muted)"},onMouseEnter:p=>{!t&&!o&&(p.currentTarget.style.backgroundColor="var(--color-bg-white)",p.currentTarget.style.borderColor="var(--color-border-main)",p.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:p=>{!t&&!o&&(p.currentTarget.style.backgroundColor="transparent",p.currentTarget.style.borderColor="var(--color-text-muted)",p.currentTarget.style.color="var(--color-text-muted)")}};return b.jsx("button",{type:l,onClick:e,disabled:t||o,className:d.className,style:d.style,onMouseEnter:d.onMouseEnter,onMouseLeave:d.onMouseLeave,...c,children:o?"Loading...":n})},Wi=({className:n})=>b.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:[b.jsx("title",{children:"wifi"}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("circle",{fill:"currentColor",cx:"8",cy:"12.5",r:"1.5"}),b.jsx("path",{fill:"currentColor",d:"M11.5,10C10.6,9,9.3,8.5,8,8.5S5.4,9,4.5,10L3.1,8.6C4.4,7.2,6.1,6.5,8,6.5s3.6,0.7,4.9,2.1 L11.5,10z"}),b.jsx("path",{fill:"currentColor",d:"M8,2C5,2,2.2,3.1,0,5.2l1.4,1.4C3.2,4.9,5.5,4,8,4s4.8,0.9,6.6,2.7L16,5.2C13.8,3.1,11,2,8,2z"})]})]}),Sc=({className:n,style:e,...t})=>b.jsxs("svg",{className:n,style:e,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",...t,children:[b.jsx("title",{children:"wifi-off"}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("path",{fill:"currentColor",d:"M8.142,7.507C8.094,7.506,8.048,7.5,8,7.5c-1.9,0-3.6,0.7-4.9,2.1L4.5,11 c0.798-0.886,1.912-1.357,3.06-1.457L8.142,7.507z"}),b.jsx("path",{fill:"currentColor",d:"M10.13,7.827L9.573,9.776c0.724,0.242,1.398,0.636,1.927,1.224l1.4-1.4 C12.11,8.749,11.171,8.161,10.13,7.827z"}),b.jsx("path",{fill:"currentColor",d:"M8.848,5.039l0.557-1.946C8.942,3.037,8.475,3,8,3C5,3,2.2,4.1,0,6.2l1.4,1.4C3.2,5.9,5.5,5,8,5 C8.286,5,8.568,5.015,8.848,5.039z"}),b.jsx("path",{fill:"currentColor",d:"M11.368,3.493l-0.55,1.924c1.4,0.428,2.684,1.186,3.781,2.283L16,6.2 C14.651,4.913,13.076,4.005,11.368,3.493z"}),b.jsx("path",{fill:"currentColor",d:"M6.001,16c-0.092,0-0.184-0.013-0.275-0.039c-0.531-0.152-0.839-0.705-0.688-1.236l4-14 c0.152-0.532,0.711-0.839,1.236-0.687c0.531,0.152,0.839,0.705,0.688,1.236l-4,14C6.836,15.714,6.436,16,6.001,16z"})]})]}),Fe={input:"w-full p-3 text-base bg-white border-2 border-zinc-300 rounded-lg text-black focus:border-black focus:outline-none ",inputSmall:"w-full p-2 text-sm bg-white border-2 border-zinc-300 rounded-lg text-black focus:border-black focus:outline-none ",label:"block mb-2 text-sm text-black  font-bold",labelSmall:"block mb-1 text-xs text-black  font-bold",buttonPrimary:"px-6 py-2 bg-transparent border-2 border-black text-black  font-bold rounded-lg hover:bg-black hover:text-white transition-all cursor-pointer",buttonDanger:"px-4 py-2 text-xs bg-transparent border-2 border-red-500 text-red-600 rounded-lg hover:bg-red-600 hover:text-white  font-bold transition-colors cursor-pointer",buttonGhost:"text-xs px-2 py-0.5 rounded border-2 bg-transparent text-zinc-500 border-zinc-400 hover:text-black hover:border-black  transition-colors cursor-pointer hover-shimmer",modalBackdrop:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",modalContent:"bg-white border-4 border-black rounded-xl p-4 sm:p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-lg",textSubtle:"text-xs text-zinc-500 "},Gx=({value:n={},onChange:e,placeholder:t="Type city name (e.g. Boston, London, Tokyo)"})=>{const[s,l]=Q.useState(""),[o,c]=Q.useState([]),[f,d]=Q.useState(!1),p=Q.useRef(null),g=Q.useRef(null);Q.useEffect(()=>{const k=E=>{p.current&&!p.current.contains(E.target)&&c([])};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const y=async k=>{if(l(k),g.current&&clearTimeout(g.current),k.length<2){c([]),d(!1);return}g.current=setTimeout(async()=>{d(!0);try{const E=new AbortController,C=setTimeout(()=>E.abort(),15e3),M=await fetch(`/api/location/search?q=${encodeURIComponent(k)}&limit=20&use_api=false`,{signal:E.signal});clearTimeout(C);const I=await M.json();I.results?c(I.results):c([])}catch(E){E.name==="AbortError"?console.warn("Location search timed out"):(console.error("Error fetching locations:",E),c([]))}finally{d(!1)}},500)},x=k=>{const C={city_name:k.city||k.name,latitude:k.latitude,longitude:k.longitude,timezone:k.timezone,state:k.state,zipcode:k.zipcode};e(C),l(""),c([])},v=n&&n.city_name;return b.jsxs("div",{className:"space-y-3",ref:p,children:[b.jsxs("div",{className:"relative",children:[b.jsx("input",{type:"text",value:s,onChange:k=>y(k.target.value),placeholder:t,className:Fe.input,autoComplete:"off"}),f&&b.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:b.jsx("div",{className:"w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin"})}),o.length>0&&b.jsx("ul",{className:"absolute w-full z-10 max-h-[300px] overflow-y-auto bg-white border-2 border-gray-300 border-t-0 rounded-b-lg shadow-lg list-none p-0 m-0",children:o.map(k=>b.jsx("li",{onClick:()=>x(k),className:"p-3 cursor-pointer border-b-2 border-gray-200 last:border-0 hover:bg-gray-50 transition-colors group",children:b.jsx("div",{className:"flex items-start justify-between",children:b.jsx("div",{className:"flex-1 min-w-0",children:b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("strong",{className:"text-black transition-colors",children:k.name}),k.state&&b.jsx("span",{className:"text-gray-500 text-xs",children:k.state}),k.zipcode&&b.jsxs("span",{className:"text-gray-500 text-xs",children:["(",k.zipcode,")"]}),k.population&&k.population>0&&b.jsx("span",{className:"text-xs text-gray-600",children:k.population>=1e6?`${(k.population/1e6).toFixed(1)}M`:k.population>=1e3?`${(k.population/1e3).toFixed(0)}K`:k.population}),k.country_code&&k.country_code!=="US"&&b.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-gray-100 text-gray-700 rounded border border-gray-300",children:k.country_code})]})})})},k.id))})]}),v?b.jsxs("div",{className:"bg-gray-50 border-2 border-gray-300 rounded-lg p-3 space-y-2",children:[b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:Fe.textSubtle,children:"City"}),b.jsxs("span",{className:"text-sm font-medium",children:[n.city_name,n.state&&`, ${n.state}`]})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:Fe.textSubtle,children:"Timezone"}),b.jsx("span",{className:"text-sm",children:n.timezone||"Not set"})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:Fe.textSubtle,children:"Coordinates"}),b.jsxs("span",{className:"text-sm",children:[n.latitude?.toFixed(4),", ",n.longitude?.toFixed(4)]})]})]}):b.jsx("p",{className:`${Fe.textSubtle} mt-1`,children:"Unless set, uses global location."})]})},dE=({settings:n,saveGlobalSettings:e,triggerAPMode:t,wifiStatus:s})=>{const l="w-full p-3 text-base border-2 border-gray-300 rounded-lg focus:outline-none box-border",o="block mb-2 font-bold",c=$x,[f,d]=Q.useState(null),[p,g]=Q.useState(""),[y,x]=Q.useState(""),[v,k]=Q.useState({type:"",message:""}),[E,C]=Q.useState(!1),[M,I]=Q.useState(null),[$,X]=Q.useState(!1),[_,Y]=Q.useState({type:"",message:""}),[V,Z]=Q.useState(!1),[ie,Te]=Q.useState(""),[$e,Oe]=Q.useState(""),[rt,we]=Q.useState(!1),[he,B]=Q.useState(null),[ee,me]=Q.useState(!1),[Re,Be]=Q.useState(!1),[N,q]=Q.useState({type:"",message:""}),[re,ae]=Q.useState(null),[be,ve]=Q.useState({stage:"",progress:0});Q.useEffect(()=>{const ue=async()=>{try{const Ye=await(await fetch("/api/system/time")).json();Ye.datetime&&(d(Ye),g(z=>z||Ye.date),x(z=>z||Ye.time.substring(0,5)))}catch(_e){console.error("Error fetching system time:",_e)}};ue();const Ee=setInterval(ue,3e4);return()=>clearInterval(Ee)},[]),Q.useEffect(()=>{if(n&&(n.timezone||n.city_name||n.time_sync_mode!==void 0)){const ue=n.time_sync_mode||"manual";console.log("[TimeSync] Loading preference:",{syncMode:ue,time_sync_mode:n.time_sync_mode}),C(ue==="automatic")}},[n]),Q.useEffect(()=>{const ue=async()=>{try{const Ye=await(await fetch("/api/system/ssh/status")).json();I(Ye)}catch(_e){console.error("Error fetching SSH status:",_e)}};ue();const Ee=setInterval(ue,3e4);return()=>clearInterval(Ee)},[]),Q.useEffect(()=>{(async()=>{try{const _e=await(await fetch("/api/system/version")).json();_e.version&&ae(_e.version)}catch(Ee){console.error("Error fetching current version:",Ee)}})()},[]);const De=(ue,Ee)=>ue?.detail||ue?.error||ue?.message||Ee,ut=async()=>{if(!s?.connected){k({type:"error",message:"Internet connection required for automatic time sync"}),setTimeout(()=>k({type:"",message:""}),5e3);return}k({type:"",message:""});try{const Ee=await(await it("/api/system/time/sync",{method:"POST"})).json();if(Ee.success){k({type:"success",message:Ee.message||"Time synchronized successfully"});const Ye=await(await fetch("/api/system/time")).json();Ye.datetime&&(d(Ye),g(Ye.date),x(Ye.time.substring(0,5)))}else k({type:"error",message:De(Ee,"Failed to sync time")})}catch(ue){k({type:"error",message:"Error syncing time: "+ue.message})}setTimeout(()=>k({type:"",message:""}),5e3)},Ge=async()=>{if(!p||!y){k({type:"error",message:"Please enter both date and time"}),setTimeout(()=>k({type:"",message:""}),5e3);return}const ue=p.trim();if(!/^\d{4}-\d{2}-\d{2}$/.test(ue)){k({type:"error",message:"Invalid date format. Please use YYYY-MM-DD format."}),setTimeout(()=>k({type:"",message:""}),5e3);return}let _e=String(y||"").trim();if(!_e||_e.length===0){k({type:"error",message:"Please enter a valid time"}),setTimeout(()=>k({type:"",message:""}),5e3);return}const Ye=/^(\d{1,2}):(\d{2})(:(\d{2}))?$/,z=_e.match(Ye);if(!z){console.error("Time validation failed:",{normalizedTime:_e,original:y,type:typeof y,length:_e.length,charCodes:_e.split("").map(le=>`${le}(${le.charCodeAt(0)})`)}),k({type:"error",message:`Invalid time format: "${_e}". Please use HH:MM format (e.g., 14:30).`}),setTimeout(()=>k({type:"",message:""}),5e3);return}const O=z[1].padStart(2,"0"),H=z[2],F=z[4]||"00",ne=parseInt(O,10),K=parseInt(H,10),fe=parseInt(F,10);if(isNaN(ne)||ne<0||ne>23){k({type:"error",message:`Invalid hours: ${O}. Must be between 00 and 23.`}),setTimeout(()=>k({type:"",message:""}),5e3);return}if(isNaN(K)||K<0||K>59){k({type:"error",message:`Invalid minutes: ${H}. Must be between 00 and 59.`}),setTimeout(()=>k({type:"",message:""}),5e3);return}if(isNaN(fe)||fe<0||fe>59){k({type:"error",message:`Invalid seconds: ${F}. Must be between 00 and 59.`}),setTimeout(()=>k({type:"",message:""}),5e3);return}const se=`${O}:${H}:${F}`;k({type:"",message:""});try{console.log("Setting time:",{date:ue,time:se});const le=await it("/api/system/time",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:ue,time:se})});if(!le.ok)throw new Error(`HTTP error! status: ${le.status}`);const Me=await le.json();Me.success?(k({type:"success",message:Me.message||"System time set successfully"}),C(!1),setTimeout(async()=>{try{const pe=await(await fetch("/api/system/time")).json();pe.datetime&&(d(pe),g(pe.date),x(pe.time.substring(0,5)))}catch(ge){console.error("Error refreshing time:",ge)}},1e3)):k({type:"error",message:De(Me,"Failed to set system time. The application may need sudo privileges.")})}catch(le){console.error("Error setting system time:",le),k({type:"error",message:`Error setting system time: ${le.message}. Make sure the backend is running and has proper permissions.`})}setTimeout(()=>k({type:"",message:""}),5e3)};return b.jsxs("div",{className:"space-y-4",children:[b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[5]||c[0]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Updates"}),b.jsx("p",{className:"text-sm text-gray-600 mb-4 ",children:"Check for software updates and keep your PC-1 running the latest version."}),re&&b.jsxs("div",{className:"mb-4 text-sm",children:[b.jsx("span",{className:"text-gray-600 font-bold",children:"Current Version: "}),b.jsx("span",{className:"font-mono font-bold text-black",children:re})]}),he&&!Re&&b.jsxs("div",{className:`mb-4 p-3 rounded-lg text-sm ${he.up_to_date?"bg-gray-100 text-black":"bg-white text-black border-2 border-gray-300 border-dashed"}`,children:[b.jsx("div",{className:"font-bold mb-1",children:he.message}),b.jsx("div",{className:"text-xs text-gray-600 mt-1",children:he.up_to_date?b.jsxs(b.Fragment,{children:["Current version: ",b.jsx("span",{className:"font-mono",children:he.current_version||"unknown"})]}):b.jsxs(b.Fragment,{children:["Current: ",b.jsx("span",{className:"font-mono",children:he.current_version||"unknown"}),"  Latest: ",b.jsx("span",{className:"font-mono",children:he.latest_version||"unknown"}),he.commits_behind>0&&b.jsxs(b.Fragment,{children:[" (",he.commits_behind," ",he.commits_behind===1?"update":"updates",")"]})]})})]}),N.message&&!Re&&N.type==="error"&&b.jsxs("div",{className:"mb-4 p-3 rounded-lg text-sm border-2 bg-white text-black border-black border-dashed",children:[b.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),N.message]}),Re&&b.jsxs("div",{className:"mb-4 p-4 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[b.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b.jsx("span",{className:"text-sm font-bold text-black",children:be.stage||"Installing update..."}),b.jsxs("span",{className:"text-xs text-gray-600 font-mono",children:[be.progress,"%"]})]}),b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:b.jsx("div",{className:"bg-black h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:`${be.progress}%`}})})]}),!Re&&b.jsxs("div",{className:"flex gap-3",children:[b.jsx(Qi,{onClick:async()=>{me(!0),q({type:"",message:""});try{const Ee=await(await fetch("/api/system/updates/check")).json();B(Ee),Ee.error&&(q({type:"error",message:Ee.error}),setTimeout(()=>q({type:"",message:""}),5e3))}catch{q({type:"error",message:"Could not check for updates. Check your internet connection."}),setTimeout(()=>q({type:"",message:""}),5e3)}finally{me(!1)}},disabled:ee,loading:ee,className:"flex-1",children:"Check for Updates"}),he&&he.available&&!Re&&b.jsx(Qi,{onClick:async()=>{if(!confirm("Install the update now? The device will restart automatically. The page will refresh automatically once the update is complete."))return;Be(!0),q({type:"",message:""}),ve({stage:"Installing update...",progress:10});try{const Ee=setInterval(()=>{ve(z=>z.progress<50?{...z,progress:Math.min(z.progress+2,50)}:z)},500),_e=await it("/api/system/updates/install",{method:"POST"});clearInterval(Ee),ve({stage:"Update installed! Restarting service...",progress:60});const Ye=await _e.json();if(Ye.success)ve({stage:"Service restarting...",progress:70}),B(null);else{ve({stage:"",progress:0}),q({type:"error",message:De(Ye,"Update failed. Please try again.")}),Be(!1);return}}catch{ve({stage:"Service restarting...",progress:70}),B(null)}const ue=setTimeout(()=>{window.location.reload()},45e3);setTimeout(()=>{ve({stage:"Waiting for service to restart...",progress:75});let Ee=0;const _e=30,Ye=async()=>{Ee++;const z=Math.min(75+Math.floor(Ee/_e*20),95);ve({stage:"Waiting for service to restart...",progress:z});const O=new AbortController,H=setTimeout(()=>O.abort(),2e3);try{const F=await fetch("/api/health",{method:"GET",signal:O.signal});if(clearTimeout(H),F.ok){ve({stage:"Service ready! Reloading page...",progress:100}),clearTimeout(ue),setTimeout(()=>window.location.reload(),500);return}else Ee<_e?setTimeout(Ye,1e3):(ve({stage:"Reloading page...",progress:100}),clearTimeout(ue),setTimeout(()=>window.location.reload(),500))}catch{clearTimeout(H),Ee<_e?setTimeout(Ye,1e3):(ve({stage:"Reloading page...",progress:100}),clearTimeout(ue),setTimeout(()=>window.location.reload(),500))}};Ye()},5e3)},disabled:Re,className:"flex-1",children:"Install Update"})]})]})}),s&&b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[0]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Network"}),b.jsx("div",{className:"flex items-center justify-between",children:b.jsxs("div",{className:"flex-1",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[s.connected?b.jsx(Wi,{className:"w-4 h-4",style:{color:"var(--color-text-muted)"}}):b.jsx(Sc,{className:"w-4 h-4",style:{color:"var(--color-error)"}}),b.jsx("span",{className:"font-bold text-black ",children:s.connected&&s.ssid?s.ssid:s.mode==="ap"?"Setup Mode (AP)":"Not Connected"}),b.jsx("button",{type:"button",onClick:t,className:"text-xs underline ml-2 cursor-pointer font-bold",style:{color:"var(--color-brass)"},onMouseEnter:ue=>ue.currentTarget.style.color="var(--color-text-main)",onMouseLeave:ue=>ue.currentTarget.style.color="var(--color-brass)",children:"Reset WiFi"})]}),s.connected&&s.ip&&b.jsxs("div",{className:"text-xs text-gray-600 mt-1 ",children:["IP: ",s.ip]})]})})]})}),b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[1]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Time Settings"}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block mb-2 text-sm text-gray-600  font-bold",children:"Time Format"}),b.jsxs("select",{value:n.time_format||"12h",onChange:ue=>e({time_format:ue.target.value}),className:l,children:[b.jsx("option",{value:"12h",children:"12-hour (3:45 PM)"}),b.jsx("option",{value:"24h",children:"24-hour (15:45)"})]}),b.jsx("p",{className:"text-xs text-gray-600 mt-1 ",children:"Choose how times are displayed across all modules"})]}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block mb-3 text-sm font-medium text-black  font-bold",children:"Set Time"}),b.jsxs("div",{className:"flex gap-0 mb-0",children:[b.jsxs("label",{className:`relative flex flex-col items-center px-4 py-2 border-t-2 border-l-2 border-r-2 cursor-pointer transition-all rounded-tl-lg ${E?"border-gray-300 border-b-2 border-b-black bg-white hover:border-black z-0":"border-black border-b-0 bg-white z-10"}`,children:[b.jsx("input",{type:"radio",name:"timeMode",checked:!E,onChange:async()=>{console.log("[TimeSync] Switching to manual mode"),C(!1),e({time_sync_mode:"manual"});try{await it("/api/system/time/sync/disable",{method:"POST"}).catch(()=>{})}catch{}f&&(!p&&f.date&&g(f.date),!y&&f.time&&x(f.time.substring(0,5)))},className:"sr-only"}),b.jsx("span",{className:`text-sm font-medium  ${E?"text-gray-600":"text-black font-bold"}`,children:"Manual"})]}),b.jsxs("label",{className:`relative flex flex-col items-center px-4 py-2 border-t-2 border-l-2 border-r-2 cursor-pointer transition-all rounded-tr-lg ${E?"border-black border-b-0 bg-white z-10":"border-gray-300 border-b-2 border-b-black bg-white hover:border-black z-0"}`,children:[b.jsx("input",{type:"radio",name:"timeMode",checked:E,onChange:()=>{console.log("[TimeSync] Switching to automatic mode"),C(!0),e({time_sync_mode:"automatic"}),s?.connected&&ut()},className:"sr-only"}),b.jsxs("div",{className:"flex items-baseline justify-center gap-1.5",children:[b.jsx(Wi,{className:`w-3 h-3 flex-shrink-0 ${E?"text-black":"text-gray-600"}`,style:{transform:"translateY(0.125rem)"}}),b.jsx("span",{className:`text-sm font-medium  ${E?"text-black font-bold":"text-gray-600"}`,children:"Automatic"})]})]})]}),E&&b.jsx("div",{className:"p-4 border-2 border-black rounded-b-lg -mt-[2px]",children:s?.connected?b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-bold text-black mb-2 ",children:"Time Set Automatically"}),f&&b.jsxs("div",{className:"p-3 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[b.jsx("div",{className:"text-xs text-gray-600 mb-1 uppercase font-bold",children:"Current Time"}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("div",{className:"text-lg font-bold text-black",children:[f.date," ",Dh(f.time,n.time_format||"12h")]}),b.jsx(Wi,{className:"w-3.5 h-3.5",style:{color:"var(--color-text-muted)"}})]})]})]}):b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-bold text-black mb-2 ",children:"Not Syncing"}),b.jsx("p",{className:"text-sm text-yellow-700 mb-3 ",children:"Internet connection required for automatic time synchronization. Connect to WiFi or use manual mode."}),f&&b.jsxs("div",{className:"p-3 bg-gray-50 border-2 border-gray-300 rounded-lg",children:[b.jsx("div",{className:"text-xs text-gray-600 mb-1 uppercase font-bold",children:"Current Time"}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("div",{className:"text-lg font-bold text-black",children:[f.date," ",Dh(f.time,n.time_format||"12h")]}),b.jsx(Sc,{className:"w-3.5 h-3.5",style:{color:"var(--color-error)"}})]})]})]})}),!E&&b.jsxs("div",{className:"p-4 border-2 border-black rounded-b-lg -mt-[2px]",children:[b.jsxs("div",{className:"grid grid-cols-1 min-[340px]:grid-cols-2 gap-3 mb-3",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Date"}),b.jsx("input",{type:"date",value:p,onChange:ue=>g(ue.target.value),className:"w-full py-3 px-2 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border "})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Time"}),b.jsx("input",{type:"time",value:y||"",onChange:ue=>{const Ee=ue.target.value;x(Ee),console.log("Time input changed:",Ee,"Type:",typeof Ee)},className:"w-full py-3 px-2 text-base bg-white border-2 border-gray-300 rounded-lg text-black focus:border-black focus:outline-none box-border ",step:"1",required:!0})]})]}),b.jsx(Qi,{onClick:Ge,className:"w-full",children:"Set System Time"}),b.jsx("p",{className:"text-xs text-gray-600 mt-2 text-center ",children:"Use this when offline or to set a specific time"})]}),v.message&&b.jsxs("div",{className:`mt-4 p-3 rounded-lg text-sm  border-2 ${v.type==="success"?"bg-gray-100 text-black border-black":"bg-white text-black border-black border-dashed"}`,children:[v.type==="error"&&b.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),v.message]})]})]})}),b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[2]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Location"}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{className:"block mb-2 text-sm text-gray-600 font-bold",children:"Set Location"}),b.jsx(Gx,{value:n,onChange:ue=>e(ue)})]})]})}),b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[3]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"Printer Settings"}),b.jsxs("div",{children:[b.jsx("label",{className:o,children:"Maximum Print Lines"}),b.jsx("input",{type:"number",min:"0",max:"1000",value:n.max_print_lines??200,onChange:ue=>e({max_print_lines:parseInt(ue.target.value)||0}),className:l}),b.jsx("p",{className:"text-xs text-gray-600 mt-1 ",children:"Maximum lines per print job to prevent endless prints. Set to 0 for no limit (default: 200)"})]})]})}),b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:c[4]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight mb-3",children:"SSH Access"}),b.jsx("p",{className:"text-sm text-gray-600 mb-4 ",children:"Manage SSH (Secure Shell) access to your PC-1 device. SSH allows advanced users to access the device via command line."}),M&&M.available?b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:[b.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b.jsx("span",{className:"text-sm font-medium text-black  font-bold",children:"SSH Service"}),b.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium  border-2 ${M.enabled&&M.active?"bg-white text-black border-black":M.enabled?"bg-gray-200 text-black border-gray-400":"bg-white text-gray-500 border-gray-300"}`,children:M.enabled&&M.active?"Enabled & Active":M.enabled?"Enabled":M.active?"Active":"Disabled"})]}),M.username&&b.jsxs("p",{className:"text-xs text-gray-600 mt-1 ",children:["Username: ",b.jsx("span",{className:"text-black ",children:M.username})]}),M.enabled&&b.jsxs("p",{className:"text-xs text-gray-600 mt-1 ",children:["Connect via: ",b.jsxs("span",{className:"text-black ",children:["ssh ",M.username||"admin","@pc-1.local"]})]})]}),b.jsxs("div",{className:"flex gap-3",children:[M.enabled?b.jsx("button",{type:"button",onClick:async()=>{if(confirm("Are you sure you want to disable SSH? You may lose remote access to the device.")){X(!0),Y({type:"",message:""});try{const Ee=await(await it("/api/system/ssh/disable",{method:"POST"})).json();if(Ee.success){Y({type:"success",message:Ee.message});const Ye=await(await fetch("/api/system/ssh/status")).json();I(Ye)}else Y({type:"error",message:De(Ee,"Failed to disable SSH")})}catch{Y({type:"error",message:"Error disabling SSH"})}finally{X(!1),setTimeout(()=>Y({type:"",message:""}),5e3)}}},disabled:$,className:"flex-1 py-2.5 px-4 bg-transparent border-0 rounded-lg transition-all cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed font-bold",style:{color:"var(--color-error-light)"},onMouseEnter:ue=>{$||(ue.currentTarget.style.color="var(--color-error)")},onMouseLeave:ue=>{$||(ue.currentTarget.style.color="var(--color-error-light)")},children:$?"Disabling...":"Disable SSH"}):b.jsx("button",{type:"button",onClick:async()=>{X(!0),Y({type:"",message:""});try{const Ee=await(await it("/api/system/ssh/enable",{method:"POST"})).json();if(Ee.success){Y({type:"success",message:Ee.message});const Ye=await(await fetch("/api/system/ssh/status")).json();I(Ye)}else Y({type:"error",message:De(Ee,"Failed to enable SSH")})}catch{Y({type:"error",message:"Error enabling SSH"})}finally{X(!1),setTimeout(()=>Y({type:"",message:""}),5e3)}},disabled:$,className:"flex-1 py-2.5 px-4 bg-transparent border-2 border-black text-black disabled:border-gray-300 disabled:text-gray-400 disabled:cursor-not-allowed rounded-lg  font-bold hover:bg-black hover:text-white transition-all cursor-pointer",children:$?"Enabling...":"Enable SSH"}),M.enabled&&b.jsx("button",{type:"button",onClick:()=>Z(!V),className:"flex-1 py-2.5 px-4 bg-transparent border-2 border-gray-400 text-black rounded-lg  font-bold hover:border-black hover:bg-white transition-all cursor-pointer",children:V?"Cancel":"Change Password"})]}),V&&M.enabled&&b.jsxs("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:[b.jsx("h4",{className:"text-sm font-medium text-black mb-3  font-bold",children:"Change SSH Password"}),b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"New Password"}),b.jsx("input",{type:"password",value:ie,onChange:ue=>Te(ue.target.value),placeholder:"Minimum 8 characters",className:l,minLength:8})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block mb-2 text-sm text-black  font-bold",children:"Confirm Password"}),b.jsx("input",{type:"password",value:$e,onChange:ue=>Oe(ue.target.value),placeholder:"Re-enter password",className:l,minLength:8})]}),b.jsx(Qi,{onClick:async()=>{if(!ie||ie.length<8){Y({type:"error",message:"Password must be at least 8 characters"}),setTimeout(()=>Y({type:"",message:""}),5e3);return}if(ie!==$e){Y({type:"error",message:"Passwords do not match"}),setTimeout(()=>Y({type:"",message:""}),5e3);return}we(!0),Y({type:"",message:""});try{const Ee=await(await it("/api/system/ssh/password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({new_password:ie})})).json();Ee.success?(Y({type:"success",message:Ee.message}),Te(""),Oe(""),Z(!1)):Y({type:"error",message:De(Ee,"Failed to change password")})}catch{Y({type:"error",message:"Error changing password"})}finally{we(!1),setTimeout(()=>Y({type:"",message:""}),5e3)}},disabled:rt||!ie||!$e,loading:rt,className:"w-full",children:"Change Password"})]})]}),_.message&&b.jsxs("div",{className:`p-3 rounded-lg text-sm  border-2 ${_.type==="success"?"bg-gray-100 text-black border-black":"bg-white text-black border-black border-dashed"}`,children:[_.type==="error"&&b.jsx("span",{className:"font-bold mr-2",children:"ERROR:"}),_.message]})]}):b.jsx("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:b.jsx("p",{className:"text-sm text-gray-500 ",children:"SSH isn't available in testing mode"})})]})})]})},hE=[{id:"news",label:"News API",offline:!1,icon:"newspaper"},{id:"weather",label:"Weather",offline:!1,icon:"cloud-sun"}];let Vs=null,Jd=null;function _o(){const[n,e]=Q.useState(Vs||[]),[t,s]=Q.useState(!Vs);return Q.useEffect(()=>{Vs||(Jd||(Jd=fetch("/api/module-types").then(l=>{if(!l.ok)throw new Error("Failed to load module types");return l.json()}).then(l=>(Vs=l.moduleTypes||[],Vs)).catch(l=>(console.error("Error loading module types:",l),Vs=hE,Vs))),Jd.then(l=>{e(l),s(!1)}))},[]),{moduleTypes:n,loading:t}}const Fd=({className:n,title:e="print",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("polyline",{fill:"none",points:"3.5 3.5 3.5 0.5 12.5 0.5 12.5 3.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),b.jsx("path",{d:"M3.5,12.5H.5v-4a3,3,0,0,1,3-3h9a3,3,0,0,1,3,3v4h-3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),b.jsx("rect",{height:"6",width:"9",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"3.5",y:"9.5"})]})]}),pE=({className:n,title:e="schedule",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"11.5",x2:"15.5",y1:"0.5",y2:"4.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"7",x2:"7",y1:"5.5",y2:"8.5"}),b.jsx("circle",{cx:"7",cy:"9",fill:"none",r:"6.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),Xd=({className:n,title:e="arrow up",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsx("g",{fill:"currentColor",children:b.jsx("polyline",{fill:"none",points:"15.5,10.5 8,5.5 0.5,10.5 ",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),Qd=({className:n,title:e="arrow down",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsx("g",{fill:"currentColor",children:b.jsx("polyline",{fill:"none",points:"15.5,5.5 8,10.5 0.5,5.5 ",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),jh=({className:n,title:e="warning",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsx("path",{fill:"currentColor",d:"M236.8,188.09,149.35,36.22h0a24.76,24.76,0,0,0-42.7,0L19.2,188.09a23.51,23.51,0,0,0,0,23.72A24.35,24.35,0,0,0,40.55,224h174.9a24.35,24.35,0,0,0,21.33-12.19A23.51,23.51,0,0,0,236.8,188.09ZM120,104a8,8,0,0,1,16,0v40a8,8,0,0,1-16,0Zm8,88a12,12,0,1,1,12-12A12,12,0,0,1,128,192Z"})]}),Yx=n=>{const e={},t=n?.config||{};if(String(n?.name||"").trim()||(e.name="Module name is required."),n?.type==="email"){const s=String(t.email_user||"").trim(),l=String(t.email_password||"").trim(),o=String(t.email_service||"Gmail"),c=String(t.email_host||"").trim(),f=Number(t.email_port??993);s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(e.email_user="Enter a valid email address."):e.email_user="Email address is required.",l||(e.email_password="App password is required."),o==="Custom"&&(c||(e.email_host="IMAP host is required for custom provider."),(!Number.isFinite(f)||f<1||f>65535)&&(e.email_port="Enter a valid IMAP port (1-65535)."))}if(n?.type==="webhook"){const s=String(t.url||"").trim(),l=String(t.method||"GET").toUpperCase(),o=String(t.body||"").trim();if(!s)e.url="URL is required.";else try{const c=new URL(s);["http:","https:"].includes(c.protocol)||(e.url="URL must start with http:// or https://")}catch{e.url="Enter a valid URL."}if(l==="POST"&&o)try{JSON.parse(o)}catch{e.body="Body must be valid JSON."}}return e},lb=n=>Object.keys(Yx(n)).length,mE=({settings:n,modules:e,triggerChannelPrint:t,triggerModulePrint:s,setShowScheduleModal:l,swapChannels:o,setShowEditModuleModal:c,setEditingModule:f,moveModuleInChannel:d,assignModuleToChannel:p,reorderChannelModules:g,removeModuleFromChannel:y,setShowAddModuleModal:x,setShowCreateUnassignedModal:v,wifiStatus:k})=>{const{moduleTypes:E}=_o(),C=Q.useRef({}),M=Q.useRef(null),I=Q.useRef(!1),$=Q.useRef(null),[X,_]=Q.useState(null),[Y,V]=Q.useState(null),Z=Q.useRef(null),ie=Q.useRef(new Map),Te=z=>typeof z=="string"&&z.trim().length>0,$e=z=>!z||typeof z!="object"?!1:z.type==="horizontalRule"?!0:z.type==="text"?typeof z.text=="string"&&z.text.trim().length>0:Array.isArray(z.content)?z.content.some(O=>$e(O)):!1,Oe=z=>{const O=z?.config||{};switch(z?.type){case"news":return Te(O.news_api_key);case"rss":return Array.isArray(O.rss_feeds)&&O.rss_feeds.some(H=>Te(String(H||"")));case"email":return Te(O.email_user)&&Te(O.email_password);case"calendar":return Array.isArray(O.ical_sources)&&O.ical_sources.some(H=>Te(H?.url));case"webhook":return Te(O.url);case"text":return $e(O.content_doc);case"weather":return Te(O.city_name)||Te(n?.city_name);default:return!0}},rt=z=>`channel:${z}`,we=z=>{if(z==="unassigned")return{type:"unassigned"};if(z?.startsWith("channel:")){const O=Number(z.split(":")[1]);if(Number.isFinite(O))return{type:"channel",position:O}}return null},he=z=>{const O={};return z.forEach((H,F)=>{O[H]=F}),O},B=(z,O,H)=>{const F=[...z],[ne]=F.splice(O,1);return F.splice(H,0,ne),F},ee=z=>{V(O=>z?O&&O.listId===z.listId&&O.index===z.index&&Math.abs(O.top-z.top)<1?O:z:O&&null),Z.current=z,z?.listId&&ie.current.set(z.listId,z)},me=(z,O)=>{const H=C.current[z];if(!H)return null;const F=Array.from(H.querySelectorAll('[data-dnd-item="true"]')),ne=H.getBoundingClientRect();if(F.length===0)return{listId:z,index:0,top:Math.max(8,Math.floor(ne.height/2))};let K=F.length;for(let le=0;le<F.length;le+=1){const Me=F[le].getBoundingClientRect(),ge=Me.top+Me.height/2;if(O<ge){K=le;break}}let fe;if(K===0){const le=F[0].getBoundingClientRect(),Me=Math.max(0,le.top-ne.top);fe=le.top-ne.top-Me/2}else if(K>=F.length){const le=F[F.length-1].getBoundingClientRect(),Me=Math.max(0,ne.bottom-le.bottom);fe=le.bottom-ne.top+Me/2-1}else{const le=F[K-1].getBoundingClientRect(),Me=F[K].getBoundingClientRect(),ge=Math.max(0,Me.top-le.bottom);fe=le.bottom-ne.top+ge/2-1}const se=Math.max(6,Math.min(fe,ne.height-6));return{listId:z,index:K,top:se}},Re=(z,O)=>{if(z.target.closest('[data-no-drag="true"]')){z.preventDefault();return}const H=z.currentTarget?.getBoundingClientRect?.();O.itemHeight=H?.height||44,I.current=!0,z.dataTransfer.effectAllowed="move",z.dataTransfer.setData("text/plain",O.moduleId),M.current=O,_(O)},Be=(z,O)=>{if(!M.current||(z.preventDefault(),$.current))return;const H=z.clientY;$.current=requestAnimationFrame(()=>{$.current=null;const F=me(O,H);ee(F)})},N=z=>{z.currentTarget.contains(z.relatedTarget)},q=()=>{$.current&&(cancelAnimationFrame($.current),$.current=null),V(null),_(null),M.current=null,Z.current=null,ie.current.clear(),setTimeout(()=>{I.current=!1},0)},re=z=>{const O=we(z);return O?O.type==="unassigned"?_e.map(H=>H.id):(ve[O.position]||[]).map(H=>H.module_id):[]},ae=(z,O)=>{I.current||(c(z),f(JSON.parse(JSON.stringify(O))))},be=(z,O)=>{z.preventDefault();const H=M.current;if(!H)return;const ne=ie.current.get(O)||me(O,z.clientY)||Y,K=ne?ne.index:0,fe=H.listId,se=we(fe),le=we(O);if(!se||!le){q();return}if(fe===O){const Me=re(fe),ge=Me.indexOf(H.moduleId);if(ge===-1){q();return}let pe=K;if(pe>ge&&(pe-=1),pe===ge){q();return}const Ke=B(Me,ge,pe);se.type==="unassigned"?Ge(Ke):g(se.position,he(Ke),{optimistic:!0}),q();return}if(se.type==="unassigned"&&le.type==="channel"){const Me=re(O),ge=Math.max(0,Math.min(K,Me.length)),pe=[...Me];pe.splice(ge,0,H.moduleId),Ge(Ke=>Ke.filter(en=>en!==H.moduleId)),q(),(async()=>await p(le.position,H.moduleId,ge,{silent:!0,optimistic:!0})&&await g(le.position,he(pe),{optimistic:!0}))();return}if(se.type==="channel"&&le.type==="unassigned"){const Me=Math.max(0,Math.min(K,_e.length));Ge(ge=>{const pe=ge.filter(Ke=>Ke!==H.moduleId);return pe.splice(Me,0,H.moduleId),pe}),y(se.position,H.moduleId,{silent:!0,optimistic:!0}),q();return}if(se.type==="channel"&&le.type==="channel"){const Me=re(O),ge=Math.max(0,Math.min(K,Me.length)),pe=[...Me];pe.splice(ge,0,H.moduleId),q(),(async()=>!await y(se.position,H.moduleId,{silent:!0,optimistic:!0})||!await p(le.position,H.moduleId,ge,{silent:!0,optimistic:!0})||await g(le.position,he(pe),{optimistic:!0}))();return}q()},ve=(()=>{const z={};for(let O=1;O<=8;O+=1){const F=((n.channels?.[O]||{modules:[]}).modules||[]).map(ne=>({...ne,module:e[ne.module_id]})).filter(ne=>ne.module).sort((ne,K)=>ne.order-K.order);z[O]=F}return z})(),De=(()=>{const z=new Set;return Object.values(n.channels||{}).forEach(O=>{(O.modules||[]).forEach(H=>{z.add(H.module_id)})}),Object.values(e||{}).filter(O=>!z.has(O.id))})(),[ut,Ge]=Q.useState([]),ue=De.map(z=>z.id),Ee=new Set(ue);Q.useEffect(()=>{Ge(z=>{const O=new Set(ue),H=z.filter(K=>O.has(K)),F=new Set(H),ne=ue.filter(K=>!F.has(K));return ne.length===0&&H.length===z.length?z:[...H,...ne]})},[ue]);const _e=ut.filter(z=>Ee.has(z)).map(z=>e[z]).filter(Boolean),Ye=(z,O)=>{const H=ut.findIndex(ne=>ne===z);if(H===-1)return;const F=[...ut];O==="up"&&H>0?([F[H],F[H-1]]=[F[H-1],F[H]],Ge(F)):O==="down"&&H<F.length-1&&([F[H],F[H+1]]=[F[H+1],F[H]],Ge(F))};return b.jsxs("div",{className:"space-y-4",children:[b.jsx("div",{className:"space-y-4",children:[1,2,3,4,5,6,7,8].map(z=>{const O=n.channels?.[z]||{},H=ve[z]||[],F=rt(z),ne=$x;return b.jsx("div",{className:"rounded-xl p-[4px] shadow-lg",style:{background:ne[z-1]},children:b.jsxs("div",{className:"bg-bg-card rounded-lg p-4 flex flex-col h-full",children:[b.jsxs("div",{className:"flex items-center justify-between mb-3 gap-4",children:[b.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto",children:[b.jsx("h3",{className:"font-bold text-black  text-lg tracking-tight",children:z}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx("button",{type:"button",onClick:()=>t(z),className:"group flex items-center justify-center px-2 py-1 rounded border-2 bg-transparent border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer","aria-label":`Print channel ${z}`,title:"Print Channel",children:b.jsx(Fd,{className:"w-3.5 h-3.5 text-gray-400 group-hover:text-black transition-all"})}),b.jsxs("button",{type:"button",onClick:()=>l(z),className:`group flex items-center gap-1 px-2 py-1 rounded border-2 transition-all cursor-pointer ${O.schedule&&O.schedule.length>0?"bg-transparent shadow-sm":"bg-transparent border-gray-300 hover:border-black hover:bg-white"}`,style:O.schedule&&O.schedule.length>0?{color:"var(--color-brass)",borderColor:"var(--color-brass)"}:{},onMouseEnter:K=>{O.schedule&&O.schedule.length>0&&(K.currentTarget.style.backgroundColor="var(--color-brass-10)")},onMouseLeave:K=>{O.schedule&&O.schedule.length>0&&(K.currentTarget.style.backgroundColor="transparent")},"aria-label":`Configure schedule for channel ${z}`,title:"Configure Schedule",children:[b.jsx(pE,{className:`w-3.5 h-3.5 transition-all ${O.schedule?.length>0?"":"text-gray-400 group-hover:text-black"}`,style:O.schedule?.length>0?{color:"var(--color-brass)"}:{}}),b.jsx("span",{className:`text-xs font-bold ${O.schedule?.length>0?"":"text-gray-400 group-hover:text-black"}`,style:O.schedule?.length>0?{color:"var(--color-brass)"}:{},children:O.schedule?.length||0})]})]})]}),b.jsxs("div",{className:"flex gap-1",children:[b.jsx("button",{type:"button",onClick:K=>{K.preventDefault(),o(z,z-1)},disabled:z===1,className:"px-2 py-1 text-xs  border-2 border-gray-300 hover:border-black rounded text-gray-600 hover:text-black transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer hover:bg-white","aria-label":`Move channel ${z} up`,title:"Move channel up",children:b.jsx(Xd,{className:"w-3 h-3"})}),b.jsx("button",{type:"button",onClick:K=>{K.preventDefault(),o(z,z+1)},disabled:z===8,className:"px-2 py-1 text-xs  border-2 border-gray-300 hover:border-black rounded text-gray-600 hover:text-black transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer hover:bg-white","aria-label":`Move channel ${z} down`,title:"Move channel down",children:b.jsx(Qd,{className:"w-3 h-3"})})]})]}),b.jsxs("div",{ref:K=>{C.current[F]=K},onDragOver:K=>Be(K,F),onDragLeave:N,onDrop:K=>be(K,F),"data-drop-active":Y?.listId===F,className:"space-y-2 mb-2 flex-grow min-h-[36px] dnd-list",role:"list",children:[H.map((K,fe)=>b.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border-2 border-gray-600 hover:border-black group transition-all dnd-item cursor-pointer",style:{backgroundColor:"var(--color-bg-card)"},onMouseEnter:se=>se.currentTarget.style.setProperty("background-color","var(--color-bg-white)","important"),onMouseLeave:se=>se.currentTarget.style.setProperty("background-color","var(--color-bg-card)","important"),onClick:()=>ae(K.module_id,e[K.module_id]),onDragOver:se=>Be(se,F),onDrop:se=>be(se,F),draggable:!0,"data-dnd-item":"true","data-dragging":X?.moduleId===K.module_id?"true":"false",onDragStart:se=>Re(se,{moduleId:K.module_id,listId:F,index:fe}),onDragEnd:q,role:"listitem",children:[b.jsx("div",{className:"flex-1 min-w-0 mr-2",children:(()=>{const se=E.find(wu=>wu.id===K.module.type),le=se?!se.offline:!1,Me=Oe(K.module),pe=le&&!Me,Ke=lb(K.module),en=Ke>0,Tn=K.module.name?.trim()||"(unnamed module)",Yt=k?.connected;let Kn="var(--color-text-muted)";return Yt?pe&&(Kn="var(--color-brass)"):Kn="var(--color-error)",b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[b.jsx("div",{className:"text-sm font-bold text-gray-700 group-hover:text-black truncate transition-colors flex-1 min-w-0",children:Tn}),en&&b.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[9px] font-bold tracking-wide uppercase shrink-0",style:{color:"var(--color-error)"},title:`Malformed config: ${Ke} issue${Ke===1?"":"s"}`,children:[b.jsx(jh,{className:"w-3 h-3"}),"Malformed"]})]}),b.jsxs("div",{className:`text-[10px]  truncate flex items-baseline gap-1 ${pe?"":"text-gray-700"}`,style:pe?{color:"var(--color-brass)"}:{},children:[le&&(Yt?b.jsx(Wi,{className:"w-2.5 h-2.5 flex-shrink-0 group-hover:text-black transition-colors",style:{transform:"translateY(0.125rem)",color:Kn}}):b.jsx(Sc,{className:"w-2.5 h-2.5 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-error)"}})),b.jsx("span",{className:"truncate font-mono group-hover:text-black transition-colors",style:{color:"var(--color-text-muted)"},children:se?.label?.toUpperCase()})]})]})})()}),b.jsxs("div",{className:"flex gap-2 items-center",onClick:se=>se.stopPropagation(),"data-no-drag":"true",children:[b.jsx("button",{type:"button",onClick:()=>s(K.module_id),className:"px-1.5 py-1 rounded border border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer","aria-label":`Print module ${K.module.name}`,title:"Print this module",children:b.jsx(Fd,{className:"w-3 h-3 text-gray-400 hover:text-black transition-colors"})}),b.jsxs("div",{className:"flex flex-col gap-0.5",children:[b.jsx("button",{type:"button",onClick:()=>d(z,K.module_id,"up"),disabled:fe===0,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","aria-label":`Move module ${K.module.name} up in channel ${z}`,onMouseEnter:se=>{const le=se.currentTarget.querySelector("svg");le&&(le.style.color="var(--color-text-main)")},onMouseLeave:se=>{const le=se.currentTarget.querySelector("svg");le&&(le.style.color="var(--color-text-muted)")},children:b.jsx(Xd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})}),b.jsx("button",{type:"button",onClick:()=>d(z,K.module_id,"down"),disabled:fe===H.length-1,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","aria-label":`Move module ${K.module.name} down in channel ${z}`,onMouseEnter:se=>{const le=se.currentTarget.querySelector("svg");le&&(le.style.color="var(--color-text-main)")},onMouseLeave:se=>{const le=se.currentTarget.querySelector("svg");le&&(le.style.color="var(--color-text-muted)")},children:b.jsx(Qd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})})]})]})]},K.module_id)),Y?.listId===F&&b.jsx("div",{className:"dnd-indicator",style:{top:Y.top}})]}),b.jsx("div",{className:"mt-auto",children:b.jsx("button",{type:"button",onClick:()=>x(z),onDragOver:K=>Be(K,F),onDrop:K=>be(K,F),className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs  font-bold tracking-wider cursor-pointer",style:{backgroundColor:"transparent"},onMouseEnter:K=>K.currentTarget.style.backgroundColor="var(--color-bg-white)",onMouseLeave:K=>K.currentTarget.style.backgroundColor="transparent",title:"Add a module to this channel",children:"+ ADD MODULE"})})]})},z)})}),b.jsxs("div",{className:"mt-8",children:[b.jsx("h3",{className:"text-lg font-bold text-black mb-4 tracking-tight border-b-2 border-dashed border-gray-300 pb-2",children:"UNASSIGNED MODULES"}),b.jsxs("div",{ref:z=>{C.current.unassigned=z},onDragOver:z=>Be(z,"unassigned"),onDragLeave:N,onDrop:z=>be(z,"unassigned"),"data-drop-active":Y?.listId==="unassigned",className:"space-y-2 min-h-[36px] dnd-list",role:"list",children:[_e.length===0?b.jsx("div",{className:"text-sm text-gray-500 italic py-4",children:"No unassigned modules. Create a module below or assign existing modules to channels."}):_e.map((z,O)=>{const H=E.find(pe=>pe.id===z.type),F=H?!H.offline:!1,ne=Oe(z),K=F&&!ne,fe=lb(z),se=fe>0,le=z.name?.trim()||"(unnamed module)",Me=k?.connected;let ge="var(--color-text-muted)";return Me?K&&(ge="var(--color-brass)"):ge="var(--color-error)",b.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border-2 border-gray-300 hover:border-black group transition-all dnd-item cursor-pointer",style:{backgroundColor:"var(--color-bg-card)"},onMouseEnter:pe=>pe.currentTarget.style.setProperty("background-color","var(--color-bg-white)","important"),onMouseLeave:pe=>pe.currentTarget.style.setProperty("background-color","var(--color-bg-card)","important"),onClick:()=>ae(z.id,z),onDragOver:pe=>Be(pe,"unassigned"),onDrop:pe=>be(pe,"unassigned"),draggable:!0,"data-dnd-item":"true","data-dragging":X?.moduleId===z.id?"true":"false",onDragStart:pe=>Re(pe,{moduleId:z.id,listId:"unassigned",index:O}),onDragEnd:q,role:"listitem",children:[b.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[b.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[b.jsx("div",{className:"text-sm font-bold text-gray-700 group-hover:text-black truncate transition-colors flex-1 min-w-0",children:le}),se&&b.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[9px] font-bold tracking-wide uppercase shrink-0",style:{color:"var(--color-error)"},title:`Malformed config: ${fe} issue${fe===1?"":"s"}`,children:[b.jsx(jh,{className:"w-3 h-3"}),"Malformed"]})]}),b.jsxs("div",{className:`text-[10px] truncate flex items-baseline gap-1 ${K?"":"text-gray-700"}`,style:K?{color:"var(--color-brass)"}:{},children:[F&&(Me?b.jsx(Wi,{className:"w-2.5 h-2.5 flex-shrink-0 group-hover:text-black transition-colors",style:{transform:"translateY(0.125rem)",color:ge}}):b.jsx(Sc,{className:"w-2.5 h-2.5 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-error)"}})),b.jsx("span",{className:"truncate font-mono group-hover:text-black transition-colors",style:{color:"var(--color-text-muted)"},children:H?.label?.toUpperCase()})]})]}),b.jsxs("div",{className:"flex gap-2 items-center",onClick:pe=>pe.stopPropagation(),"data-no-drag":"true",children:[b.jsx("button",{type:"button",onClick:()=>s(z.id),className:"px-1.5 py-1 rounded border border-gray-300 hover:border-black hover:bg-white transition-all cursor-pointer","aria-label":`Print module ${z.name}`,title:"Print this module",children:b.jsx(Fd,{className:"w-3 h-3 text-gray-400 hover:text-black transition-colors"})}),b.jsxs("div",{className:"flex flex-col gap-0.5",children:[b.jsx("button",{type:"button",onClick:()=>Ye(z.id,"up"),disabled:_e.findIndex(pe=>pe.id===z.id)===0,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","aria-label":`Move unassigned module ${z.name} up`,onMouseEnter:pe=>{const Ke=pe.currentTarget.querySelector("svg");Ke&&(Ke.style.color="var(--color-text-main)")},onMouseLeave:pe=>{const Ke=pe.currentTarget.querySelector("svg");Ke&&(Ke.style.color="var(--color-text-muted)")},children:b.jsx(Xd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})}),b.jsx("button",{type:"button",onClick:()=>Ye(z.id,"down"),disabled:_e.findIndex(pe=>pe.id===z.id)===_e.length-1,className:"px-1 py-0.5 text-[10px] leading-none disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","aria-label":`Move unassigned module ${z.name} down`,onMouseEnter:pe=>{const Ke=pe.currentTarget.querySelector("svg");Ke&&(Ke.style.color="var(--color-text-main)")},onMouseLeave:pe=>{const Ke=pe.currentTarget.querySelector("svg");Ke&&(Ke.style.color="var(--color-text-muted)")},children:b.jsx(Qd,{className:"w-2.5 h-2.5 transition-colors",style:{color:"var(--color-text-muted)"}})})]})]})]},z.id)}),Y?.listId==="unassigned"&&b.jsx("div",{className:"dnd-indicator",style:{top:Y.top}})]}),b.jsx("div",{className:"mt-4",children:b.jsx("button",{type:"button",onClick:()=>{v&&v(!0)},className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs font-bold tracking-wider cursor-pointer",style:{backgroundColor:"transparent"},onMouseEnter:z=>z.currentTarget.style.backgroundColor="var(--color-bg-white)",onMouseLeave:z=>z.currentTarget.style.backgroundColor="transparent",title:"Add a new unassigned module",children:"+ ADD MODULE"})})]})]})},dp=({onClick:n,className:e="",ariaLabel:t="Close",...s})=>b.jsx("button",{onClick:n,"aria-label":t,className:`text-gray-500 hover:text-black text-2xl cursor-pointer hover-shimmer ${e}`,type:"button",...s,children:""}),ob=({channelPosition:n,onClose:e,onCreateModule:t,onAssignModule:s,onOpenEdit:l,isUnassigned:o=!1})=>{const c=Q.useRef(null),{moduleTypes:f}=_o();return n===null&&!o?null:b.jsx("div",{className:Fe.modalBackdrop,onMouseDown:d=>{d.target===d.currentTarget&&(c.current="backdrop")},onClick:d=>{d.target===d.currentTarget&&c.current==="backdrop"&&e(),c.current=null},children:b.jsxs("div",{className:Fe.modalContent,onClick:d=>d.stopPropagation(),children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h3",{className:"text-xl font-bold text-black ",children:n?`Add Module to Channel ${n}`:"Create Module"}),b.jsx(dp,{onClick:e})]}),b.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[...f].sort((d,p)=>d.offline&&!p.offline?-1:!d.offline&&p.offline?1:d.label.localeCompare(p.label)).map(d=>b.jsx("button",{type:"button",onClick:async()=>{const p=await t(d.id);p&&(n&&await s(n,p.id),e(),l(p.id,p))},className:"flex flex-col items-center p-4 bg-white border-2 border-gray-300 hover:border-black rounded-lg transition-colors text-center group cursor-pointer hover-shimmer",children:b.jsxs("div",{className:"flex items-baseline justify-center gap-1.5",children:[!d.offline&&b.jsx(Wi,{className:"w-3 h-3 flex-shrink-0",style:{transform:"translateY(0.125rem)",color:"var(--color-text-muted)"}}),b.jsx("span",{className:"font-bold text-black group-hover:text-black ",children:d.label})]})},d.id))})]})})},gE=({value:n={},onChange:e})=>{const[t,s]=Q.useState(()=>Object.entries(n||{}).map(([d,p])=>({key:d,value:p}))),l=d=>{const p={};d.forEach(g=>{g.key.trim()&&(p[g.key.trim()]=g.value)}),e(p)},o=(d,p,g)=>{const y=[...t];y[d]={...y[d],[p]:g},s(y),l(y)},c=()=>{s([...t,{key:"",value:""}])},f=d=>{const p=t.filter((g,y)=>y!==d);s(p),l(p)};return b.jsxs("div",{className:"space-y-2",children:[t.map((d,p)=>b.jsxs("div",{className:"flex gap-2 items-center",children:[b.jsx("input",{type:"text",value:d.key,onChange:g=>o(p,"key",g.target.value),placeholder:"Key",className:`${Fe.inputSmall} flex-1`}),b.jsx("input",{type:"text",value:d.value,onChange:g=>o(p,"value",g.target.value),placeholder:"Value",className:`${Fe.inputSmall} flex-1`}),b.jsx("button",{type:"button",onClick:()=>f(p),className:`${Fe.buttonDanger} flex-shrink-0 px-2`,children:""})]},p)),b.jsx("button",{type:"button",onClick:c,className:`${Fe.buttonGhost} text-xs w-full border-dashed border-2 border-gray-200 py-1`,children:"+ Add Entry"})]})},yE=({value:n,onChange:e,presets:t={},onPresetSelect:s})=>{const l=o=>{const c=o.target.value;if(e(c),c&&t[c]&&s){const f=t[c];let d={};if(f.values)d=f.values;else{const{label:p,...g}=f;d=g}s(d)}};return b.jsx("select",{value:n||"custom",onChange:l,className:Fe.input,children:Object.entries(t).map(([o,c])=>b.jsx("option",{value:o,children:c.label||o},o))})},bE=({className:n,title:e="check",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsx("g",{fill:"currentColor",children:b.jsx("path",{d:"M0.5,7l4,4.5 c0,0,2.5-5.5,11-8.5",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})})]}),xE=({formData:n={}})=>{const[e,t]=Q.useState(!1),[s,l]=Q.useState(null),o=async()=>{t(!0),l(null);try{const f=await(await it("/api/webhook/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();l(f)}catch(c){l({success:!1,error:c.message})}finally{t(!1)}};return b.jsxs("div",{className:"space-y-3",children:[b.jsx("button",{type:"button",onClick:o,disabled:e||!n.url,className:"text-sm px-3 py-1.5 border-2 border-gray-300 rounded-lg hover:border-black disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e?b.jsxs("span",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"w-3 h-3 border-2 border-black border-t-transparent rounded-full animate-spin"}),"Testing..."]}):"Test Webhook"}),s&&b.jsx("div",{className:`p-3 rounded-lg text-sm border-2 ${s.success?"bg-gray-50 border-gray-300":"bg-white border-black border-dashed"}`,children:s.success?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex items-center gap-2 text-black font-bold mb-2",children:[b.jsx(bE,{className:"w-4 h-4"}),b.jsx("span",{children:"Success"}),s.status_code&&b.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["(HTTP ",s.status_code,")"]})]}),s.json_path&&b.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Extracted from: ",b.jsx("code",{className:"bg-gray-200 px-1 rounded",children:s.json_path})]}),b.jsx("div",{className:"bg-white border border-gray-200 rounded p-2 font-mono text-xs whitespace-pre-wrap break-words max-h-32 overflow-y-auto",children:s.content})]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex items-center gap-2 text-black font-bold mb-2",children:[b.jsx(jh,{className:"w-4 h-4"}),b.jsx("span",{children:"Error"})]}),b.jsx("div",{className:"text-gray-600 text-xs",children:s.error}),s.raw_response&&b.jsxs("details",{className:"mt-2",children:[b.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer",children:"Show raw response"}),b.jsx("div",{className:"bg-gray-100 border border-gray-200 rounded p-2 font-mono text-xs whitespace-pre-wrap break-words max-h-32 overflow-y-auto mt-1",children:s.raw_response})]})]})})]})},vE=({schema:n,uiSchema:e={},moduleId:t,onActionComplete:s})=>{const[l,o]=Q.useState(!1),[c,f]=Q.useState(null),d=e["ui:options"]||{},p=d.action||"default",g=d.label||n?.title||"Action",y=d.confirmMessage,x=d.style||"primary",v=async()=>{if(!(y&&!window.confirm(y))){if(!t){console.error("ActionButton: moduleId is required"),f("error");return}o(!0),f(null);try{const E=await it(`/api/modules/${t}/actions/${p}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(E.ok){const C=await E.json();f("success"),C.reload&&s?setTimeout(()=>s(),300):setTimeout(()=>f(null),2e3)}else f("error")}catch(E){console.error("ActionButton error:",E),f("error")}finally{o(!1)}}};let k=Fe.buttonPrimary;return x==="danger"?k="px-4 py-2 rounded-lg font-medium bg-red-600 text-white hover:bg-red-700 transition-colors disabled:opacity-50":x==="ghost"?k=Fe.buttonGhost:x==="link"&&(k="text-black hover:text-zinc-600 underline text-sm font-bold disabled:opacity-50"),b.jsxs("div",{className:"mb-4",children:[b.jsx("button",{type:"button",onClick:v,disabled:l,className:k,children:l?"Processing...":g}),c==="success"&&b.jsx("span",{className:"ml-3 text-green-600 text-sm",children:" Done"}),c==="error"&&b.jsx("span",{className:"ml-3 text-red-600 text-sm",children:" Failed"})]})};var SE=Vx();const kE=fp(SE);var Zd={exports:{}},Wd={};var ab;function TE(){if(ab)return Wd;ab=1;var n=Lo();function e(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,l=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function f(y,x){var v=x(),k=s({inst:{value:v,getSnapshot:x}}),E=k[0].inst,C=k[1];return o(function(){E.value=v,E.getSnapshot=x,d(E)&&C({inst:E})},[y,v,x]),l(function(){return d(E)&&C({inst:E}),y(function(){d(E)&&C({inst:E})})},[y]),c(v),v}function d(y){var x=y.getSnapshot;y=y.value;try{var v=x();return!t(y,v)}catch{return!0}}function p(y,x){return x()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return Wd.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,Wd}var cb;function Kx(){return cb||(cb=1,Zd.exports=TE()),Zd.exports}var Px=Kx();function qt(n){this.content=n}qt.prototype={constructor:qt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var s=t&&t!=n?this.remove(t):this,l=s.find(n),o=s.content.slice();return l==-1?o.push(t||n,e):(o[l+1]=e,t&&(o[l]=t)),new qt(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new qt(t)},addToStart:function(n,e){return new qt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new qt(t)},addBefore:function(n,e,t){var s=this.remove(e),l=s.content.slice(),o=s.find(n);return l.splice(o==-1?l.length:o,0,e,t),new qt(l)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=qt.from(n),n.size?new qt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=qt.from(n),n.size?new qt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=qt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};qt.from=function(n){if(n instanceof qt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new qt(e)};function Jx(n,e,t){for(let s=0;;s++){if(s==n.childCount||s==e.childCount)return n.childCount==e.childCount?null:t;let l=n.child(s),o=e.child(s);if(l==o){t+=l.nodeSize;continue}if(!l.sameMarkup(o))return t;if(l.isText&&l.text!=o.text){for(let c=0;l.text[c]==o.text[c];c++)t++;return t}if(l.content.size||o.content.size){let c=Jx(l.content,o.content,t+1);if(c!=null)return c}t+=l.nodeSize}}function Fx(n,e,t,s){for(let l=n.childCount,o=e.childCount;;){if(l==0||o==0)return l==o?null:{a:t,b:s};let c=n.child(--l),f=e.child(--o),d=c.nodeSize;if(c==f){t-=d,s-=d;continue}if(!c.sameMarkup(f))return{a:t,b:s};if(c.isText&&c.text!=f.text){let p=0,g=Math.min(c.text.length,f.text.length);for(;p<g&&c.text[c.text.length-p-1]==f.text[f.text.length-p-1];)p++,t--,s--;return{a:t,b:s}}if(c.content.size||f.content.size){let p=Fx(c.content,f.content,t-1,s-1);if(p)return p}t-=d,s-=d}}class W{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let s=0;s<e.length;s++)this.size+=e[s].nodeSize}nodesBetween(e,t,s,l=0,o){for(let c=0,f=0;f<t;c++){let d=this.content[c],p=f+d.nodeSize;if(p>e&&s(d,l+f,o||null,c)!==!1&&d.content.size){let g=f+1;d.nodesBetween(Math.max(0,e-g),Math.min(d.content.size,t-g),s,l+g)}f=p}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,s,l){let o="",c=!0;return this.nodesBetween(e,t,(f,d)=>{let p=f.isText?f.text.slice(Math.max(e,d)-d,t-d):f.isLeaf?l?typeof l=="function"?l(f):l:f.type.spec.leafText?f.type.spec.leafText(f):"":"";f.isBlock&&(f.isLeaf&&p||f.isTextblock)&&s&&(c?c=!1:o+=s),o+=p},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,s=e.firstChild,l=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(s)&&(l[l.length-1]=t.withText(t.text+s.text),o=1);o<e.content.length;o++)l.push(e.content[o]);return new W(l,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let s=[],l=0;if(t>e)for(let o=0,c=0;c<t;o++){let f=this.content[o],d=c+f.nodeSize;d>e&&((c<e||d>t)&&(f.isText?f=f.cut(Math.max(0,e-c),Math.min(f.text.length,t-c)):f=f.cut(Math.max(0,e-c-1),Math.min(f.content.size,t-c-1))),s.push(f),l+=f.nodeSize),c=d}return new W(s,l)}cutByIndex(e,t){return e==t?W.empty:e==0&&t==this.content.length?this:new W(this.content.slice(e,t))}replaceChild(e,t){let s=this.content[e];if(s==t)return this;let l=this.content.slice(),o=this.size+t.nodeSize-s.nodeSize;return l[e]=t,new W(l,o)}addToStart(e){return new W([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new W(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,s=0;t<this.content.length;t++){let l=this.content[t];e(l,s,t),s+=l.nodeSize}}findDiffStart(e,t=0){return Jx(this,e,t)}findDiffEnd(e,t=this.size,s=e.size){return Fx(this,e,t,s)}findIndex(e){if(e==0)return rc(0,e);if(e==this.size)return rc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,s=0;;t++){let l=this.child(t),o=s+l.nodeSize;if(o>=e)return o==e?rc(t+1,o):rc(t,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return W.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new W(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return W.empty;let t,s=0;for(let l=0;l<e.length;l++){let o=e[l];s+=o.nodeSize,l&&o.isText&&e[l-1].sameMarkup(o)?(t||(t=e.slice(0,l)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new W(t||e,s)}static from(e){if(!e)return W.empty;if(e instanceof W)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new W([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}W.empty=new W([],0);const eh={index:0,offset:0};function rc(n,e){return eh.index=n,eh.offset=e,eh}function kc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let s=0;s<n.length;s++)if(!kc(n[s],e[s]))return!1}else{for(let s in n)if(!(s in e)||!kc(n[s],e[s]))return!1;for(let s in e)if(!(s in n))return!1}return!0}let lt=class Rh{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,s=!1;for(let l=0;l<e.length;l++){let o=e[l];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,l));else{if(o.type.excludes(this.type))return e;!s&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,l)),t.push(this),s=!0),t&&t.push(o)}}return t||(t=e.slice()),s||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&kc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let s=e.marks[t.type];if(!s)throw new RangeError(`There is no mark type ${t.type} in this schema`);let l=s.create(t.attrs);return s.checkAttrs(l.attrs),l}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++)if(!e[s].eq(t[s]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Rh.none;if(e instanceof Rh)return[e];let t=e.slice();return t.sort((s,l)=>s.type.rank-l.type.rank),t}};lt.none=[];class Tc extends Error{}class oe{constructor(e,t,s){this.content=e,this.openStart=t,this.openEnd=s}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let s=Qx(this.content,e+this.openStart,t);return s&&new oe(s,this.openStart,this.openEnd)}removeBetween(e,t){return new oe(Xx(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return oe.empty;let s=t.openStart||0,l=t.openEnd||0;if(typeof s!="number"||typeof l!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new oe(W.fromJSON(e,t.content),s,l)}static maxOpen(e,t=!0){let s=0,l=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)s++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)l++;return new oe(e,s,l)}}oe.empty=new oe(W.empty,0,0);function Xx(n,e,t){let{index:s,offset:l}=n.findIndex(e),o=n.maybeChild(s),{index:c,offset:f}=n.findIndex(t);if(l==e||o.isText){if(f!=t&&!n.child(c).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(s!=c)throw new RangeError("Removing non-flat range");return n.replaceChild(s,o.copy(Xx(o.content,e-l-1,t-l-1)))}function Qx(n,e,t,s){let{index:l,offset:o}=n.findIndex(e),c=n.maybeChild(l);if(o==e||c.isText)return s&&!s.canReplace(l,l,t)?null:n.cut(0,e).append(t).append(n.cut(e));let f=Qx(c.content,e-o-1,t,c);return f&&n.replaceChild(l,c.copy(f))}function EE(n,e,t){if(t.openStart>n.depth)throw new Tc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Tc("Inconsistent open depths");return Zx(n,e,t,0)}function Zx(n,e,t,s){let l=n.index(s),o=n.node(s);if(l==e.index(s)&&s<n.depth-t.openStart){let c=Zx(n,e,t,s+1);return o.copy(o.content.replaceChild(l,c))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==s&&e.depth==s){let c=n.parent,f=c.content;return Xs(c,f.cut(0,n.parentOffset).append(t.content).append(f.cut(e.parentOffset)))}else{let{start:c,end:f}=CE(t,n);return Xs(o,e1(n,c,f,e,s))}else return Xs(o,Ec(n,e,s))}function Wx(n,e){if(!e.type.compatibleContent(n.type))throw new Tc("Cannot join "+e.type.name+" onto "+n.type.name)}function zh(n,e,t){let s=n.node(t);return Wx(s,e.node(t)),s}function Fs(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function po(n,e,t,s){let l=(e||n).node(t),o=0,c=e?e.index(t):l.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(Fs(n.nodeAfter,s),o++));for(let f=o;f<c;f++)Fs(l.child(f),s);e&&e.depth==t&&e.textOffset&&Fs(e.nodeBefore,s)}function Xs(n,e){return n.type.checkContent(e),n.copy(e)}function e1(n,e,t,s,l){let o=n.depth>l&&zh(n,e,l+1),c=s.depth>l&&zh(t,s,l+1),f=[];return po(null,n,l,f),o&&c&&e.index(l)==t.index(l)?(Wx(o,c),Fs(Xs(o,e1(n,e,t,s,l+1)),f)):(o&&Fs(Xs(o,Ec(n,e,l+1)),f),po(e,t,l,f),c&&Fs(Xs(c,Ec(t,s,l+1)),f)),po(s,null,l,f),new W(f)}function Ec(n,e,t){let s=[];if(po(null,n,t,s),n.depth>t){let l=zh(n,e,t+1);Fs(Xs(l,Ec(n,e,t+1)),s)}return po(e,null,t,s),new W(s)}function CE(n,e){let t=e.depth-n.openStart,l=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)l=e.node(o).copy(W.from(l));return{start:l.resolveNoCache(n.openStart+t),end:l.resolveNoCache(l.content.size-n.openEnd-t)}}class Eo{constructor(e,t,s){this.pos=e,this.path=t,this.parentOffset=s,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let s=this.pos-this.path[this.path.length-1],l=e.child(t);return s?e.child(t).cut(s):l}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let s=this.path[t*3],l=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)l+=s.child(o).nodeSize;return l}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return lt.none;if(this.textOffset)return e.child(t).marks;let s=e.maybeChild(t-1),l=e.maybeChild(t);if(!s){let f=s;s=l,l=f}let o=s.marks;for(var c=0;c<o.length;c++)o[c].type.spec.inclusive===!1&&(!l||!o[c].isInSet(l.marks))&&(o=o[c--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let s=t.marks,l=e.parent.maybeChild(e.index());for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!l||!s[o].isInSet(l.marks))&&(s=s[o--].removeFromSet(s));return s}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let s=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);s>=0;s--)if(e.pos<=this.end(s)&&(!t||t(this.node(s))))return new Cc(this,e,s);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let s=[],l=0,o=t;for(let c=e;;){let{index:f,offset:d}=c.content.findIndex(o),p=o-d;if(s.push(c,f,l+d),!p||(c=c.child(f),c.isText))break;o=p-1,l+=d+1}return new Eo(t,s,o)}static resolveCached(e,t){let s=ub.get(e);if(s)for(let o=0;o<s.elts.length;o++){let c=s.elts[o];if(c.pos==t)return c}else ub.set(e,s=new ME);let l=s.elts[s.i]=Eo.resolve(e,t);return s.i=(s.i+1)%wE,l}}class ME{constructor(){this.elts=[],this.i=0}}const wE=12,ub=new WeakMap;class Cc{constructor(e,t,s){this.$from=e,this.$to=t,this.depth=s}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const NE=Object.create(null);class Yn{constructor(e,t,s,l=lt.none){this.type=e,this.attrs=t,this.marks=l,this.content=s||W.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,s,l=0){this.content.nodesBetween(e,t,s,l,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,s,l){return this.content.textBetween(e,t,s,l)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,s){return this.type==e&&kc(this.attrs,t||e.defaultAttrs||NE)&&lt.sameSet(this.marks,s||lt.none)}copy(e=null){return e==this.content?this:new Yn(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Yn(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,s=!1){if(e==t)return oe.empty;let l=this.resolve(e),o=this.resolve(t),c=s?0:l.sharedDepth(t),f=l.start(c),p=l.node(c).content.cut(l.pos-f,o.pos-f);return new oe(p,l.depth-c,o.depth-c)}replace(e,t,s){return EE(this.resolve(e),this.resolve(t),s)}nodeAt(e){for(let t=this;;){let{index:s,offset:l}=t.content.findIndex(e);if(t=t.maybeChild(s),!t)return null;if(l==e||t.isText)return t;e-=l+1}}childAfter(e){let{index:t,offset:s}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:s}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:s}=this.content.findIndex(e);if(s<e)return{node:this.content.child(t),index:t,offset:s};let l=this.content.child(t-1);return{node:l,index:t-1,offset:s-l.nodeSize}}resolve(e){return Eo.resolveCached(this,e)}resolveNoCache(e){return Eo.resolve(this,e)}rangeHasMark(e,t,s){let l=!1;return t>e&&this.nodesBetween(e,t,o=>(s.isInSet(o.marks)&&(l=!0),!l)),l}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),t1(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,s=W.empty,l=0,o=s.childCount){let c=this.contentMatchAt(e).matchFragment(s,l,o),f=c&&c.matchFragment(this.content,t);if(!f||!f.validEnd)return!1;for(let d=l;d<o;d++)if(!this.type.allowsMarks(s.child(d).marks))return!1;return!0}canReplaceWith(e,t,s,l){if(l&&!this.type.allowsMarks(l))return!1;let o=this.contentMatchAt(e).matchType(s),c=o&&o.matchFragment(this.content,t);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=lt.none;for(let t=0;t<this.marks.length;t++){let s=this.marks[t];s.type.checkAttrs(s.attrs),e=s.addToSet(e)}if(!lt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let s;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");s=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,s)}let l=W.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,l,s);return o.type.checkAttrs(o.attrs),o}}Yn.prototype.text=void 0;class Mc extends Yn{constructor(e,t,s,l){if(super(e,t,null,l),!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):t1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Mc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Mc(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function t1(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class ei{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let s=new AE(e,t);if(s.next==null)return ei.empty;let l=n1(s);s.next&&s.err("Unexpected trailing text");let o=_E(LE(l));return BE(o,s),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,s=e.childCount){let l=this;for(let o=t;l&&o<s;o++)l=l.matchType(e.child(o).type);return l}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let s=0;s<e.next.length;s++)if(this.next[t].type==e.next[s].type)return!0;return!1}fillBefore(e,t=!1,s=0){let l=[this];function o(c,f){let d=c.matchFragment(e,s);if(d&&(!t||d.validEnd))return W.from(f.map(p=>p.createAndFill()));for(let p=0;p<c.next.length;p++){let{type:g,next:y}=c.next[p];if(!(g.isText||g.hasRequiredAttrs())&&l.indexOf(y)==-1){l.push(y);let x=o(y,f.concat(g));if(x)return x}}return null}return o(this,[])}findWrapping(e){for(let s=0;s<this.wrapCache.length;s+=2)if(this.wrapCache[s]==e)return this.wrapCache[s+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),s=[{match:this,type:null,via:null}];for(;s.length;){let l=s.shift(),o=l.match;if(o.matchType(e)){let c=[];for(let f=l;f.type;f=f.via)c.push(f.type);return c.reverse()}for(let c=0;c<o.next.length;c++){let{type:f,next:d}=o.next[c];!f.isLeaf&&!f.hasRequiredAttrs()&&!(f.name in t)&&(!l.type||d.validEnd)&&(s.push({match:f.contentMatch,type:f,via:l}),t[f.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(s){e.push(s);for(let l=0;l<s.next.length;l++)e.indexOf(s.next[l].next)==-1&&t(s.next[l].next)}return t(this),e.map((s,l)=>{let o=l+(s.validEnd?"*":" ")+" ";for(let c=0;c<s.next.length;c++)o+=(c?", ":"")+s.next[c].type.name+"->"+e.indexOf(s.next[c].next);return o}).join(`
`)}}ei.empty=new ei(!0);class AE{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function n1(n){let e=[];do e.push(OE(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function OE(n){let e=[];do e.push(DE(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function DE(n){let e=zE(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=jE(n,e);else break;return e}function fb(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function jE(n,e){let t=fb(n),s=t;return n.eat(",")&&(n.next!="}"?s=fb(n):s=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:s,expr:e}}function RE(n,e){let t=n.nodeTypes,s=t[e];if(s)return[s];let l=[];for(let o in t){let c=t[o];c.isInGroup(e)&&l.push(c)}return l.length==0&&n.err("No node type or group '"+e+"' found"),l}function zE(n){if(n.eat("(")){let e=n1(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=RE(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function LE(n){let e=[[]];return l(o(n,0),t()),e;function t(){return e.push([])-1}function s(c,f,d){let p={term:d,to:f};return e[c].push(p),p}function l(c,f){c.forEach(d=>d.to=f)}function o(c,f){if(c.type=="choice")return c.exprs.reduce((d,p)=>d.concat(o(p,f)),[]);if(c.type=="seq")for(let d=0;;d++){let p=o(c.exprs[d],f);if(d==c.exprs.length-1)return p;l(p,f=t())}else if(c.type=="star"){let d=t();return s(f,d),l(o(c.expr,d),d),[s(d)]}else if(c.type=="plus"){let d=t();return l(o(c.expr,f),d),l(o(c.expr,d),d),[s(d)]}else{if(c.type=="opt")return[s(f)].concat(o(c.expr,f));if(c.type=="range"){let d=f;for(let p=0;p<c.min;p++){let g=t();l(o(c.expr,d),g),d=g}if(c.max==-1)l(o(c.expr,d),d);else for(let p=c.min;p<c.max;p++){let g=t();s(d,g),l(o(c.expr,d),g),d=g}return[s(d)]}else{if(c.type=="name")return[s(f,void 0,c.value)];throw new Error("Unknown expr type")}}}}function r1(n,e){return e-n}function db(n,e){let t=[];return s(e),t.sort(r1);function s(l){let o=n[l];if(o.length==1&&!o[0].term)return s(o[0].to);t.push(l);for(let c=0;c<o.length;c++){let{term:f,to:d}=o[c];!f&&t.indexOf(d)==-1&&s(d)}}}function _E(n){let e=Object.create(null);return t(db(n,0));function t(s){let l=[];s.forEach(c=>{n[c].forEach(({term:f,to:d})=>{if(!f)return;let p;for(let g=0;g<l.length;g++)l[g][0]==f&&(p=l[g][1]);db(n,d).forEach(g=>{p||l.push([f,p=[]]),p.indexOf(g)==-1&&p.push(g)})})});let o=e[s.join(",")]=new ei(s.indexOf(n.length-1)>-1);for(let c=0;c<l.length;c++){let f=l[c][1].sort(r1);o.next.push({type:l[c][0],next:e[f.join(",")]||t(f)})}return o}}function BE(n,e){for(let t=0,s=[n];t<s.length;t++){let l=s[t],o=!l.validEnd,c=[];for(let f=0;f<l.next.length;f++){let{type:d,next:p}=l.next[f];c.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),s.indexOf(p)==-1&&s.push(p)}o&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function s1(n){let e=Object.create(null);for(let t in n){let s=n[t];if(!s.hasDefault)return null;e[t]=s.default}return e}function i1(n,e){let t=Object.create(null);for(let s in n){let l=e&&e[s];if(l===void 0){let o=n[s];if(o.hasDefault)l=o.default;else throw new RangeError("No value supplied for attribute "+s)}t[s]=l}return t}function l1(n,e,t,s){for(let l in e)if(!(l in n))throw new RangeError(`Unsupported attribute ${l} for ${t} of type ${l}`);for(let l in n){let o=n[l];o.validate&&o.validate(e[l])}}function o1(n,e){let t=Object.create(null);if(e)for(let s in e)t[s]=new UE(n,s,e[s]);return t}let hb=class a1{constructor(e,t,s){this.name=e,this.schema=t,this.spec=s,this.markSet=null,this.groups=s.group?s.group.split(" "):[],this.attrs=o1(e,s.attrs),this.defaultAttrs=s1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(s.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ei.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:i1(this.attrs,e)}create(e=null,t,s){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Yn(this,this.computeAttrs(e),W.from(t),lt.setFrom(s))}createChecked(e=null,t,s){return t=W.from(t),this.checkContent(t),new Yn(this,this.computeAttrs(e),t,lt.setFrom(s))}createAndFill(e=null,t,s){if(e=this.computeAttrs(e),t=W.from(t),t.size){let c=this.contentMatch.fillBefore(t);if(!c)return null;t=c.append(t)}let l=this.contentMatch.matchFragment(t),o=l&&l.fillBefore(W.empty,!0);return o?new Yn(this,e,t.append(o),lt.setFrom(s)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let s=0;s<e.childCount;s++)if(!this.allowsMarks(e.child(s).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){l1(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let s=0;s<e.length;s++)this.allowsMarkType(e[s].type)?t&&t.push(e[s]):t||(t=e.slice(0,s));return t?t.length?t:lt.none:e}static compile(e,t){let s=Object.create(null);e.forEach((o,c)=>s[o]=new a1(o,t,c));let l=t.spec.topNode||"doc";if(!s[l])throw new RangeError("Schema is missing its top node type ('"+l+"')");if(!s.text)throw new RangeError("Every schema needs a 'text' type");for(let o in s.text.attrs)throw new RangeError("The text node type should not have attributes");return s}};function HE(n,e,t){let s=t.split("|");return l=>{let o=l===null?"null":typeof l;if(s.indexOf(o)<0)throw new RangeError(`Expected value of type ${s} for attribute ${e} on type ${n}, got ${o}`)}}class UE{constructor(e,t,s){this.hasDefault=Object.prototype.hasOwnProperty.call(s,"default"),this.default=s.default,this.validate=typeof s.validate=="string"?HE(e,t,s.validate):s.validate}get isRequired(){return!this.hasDefault}}class du{constructor(e,t,s,l){this.name=e,this.rank=t,this.schema=s,this.spec=l,this.attrs=o1(e,l.attrs),this.excluded=null;let o=s1(this.attrs);this.instance=o?new lt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new lt(this,i1(this.attrs,e))}static compile(e,t){let s=Object.create(null),l=0;return e.forEach((o,c)=>s[o]=new du(o,l++,t,c)),s}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){l1(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class c1{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let l in e)t[l]=e[l];t.nodes=qt.from(e.nodes),t.marks=qt.from(e.marks||{}),this.nodes=hb.compile(this.spec.nodes,this),this.marks=du.compile(this.spec.marks,this);let s=Object.create(null);for(let l in this.nodes){if(l in this.marks)throw new RangeError(l+" can not be both a node and a mark");let o=this.nodes[l],c=o.spec.content||"",f=o.spec.marks;if(o.contentMatch=s[c]||(s[c]=ei.parse(c,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=f=="_"?null:f?pb(this,f.split(" ")):f==""||!o.inlineContent?[]:null}for(let l in this.marks){let o=this.marks[l],c=o.spec.excludes;o.excluded=c==null?[o]:c==""?[]:pb(this,c.split(" "))}this.nodeFromJSON=l=>Yn.fromJSON(this,l),this.markFromJSON=l=>lt.fromJSON(this,l),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,s,l){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof hb){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,s,l)}text(e,t){let s=this.nodes.text;return new Mc(s,s.defaultAttrs,e,lt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function pb(n,e){let t=[];for(let s=0;s<e.length;s++){let l=e[s],o=n.marks[l],c=o;if(o)t.push(o);else for(let f in n.marks){let d=n.marks[f];(l=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(l)>-1)&&t.push(c=d)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[s]+"'")}return t}function IE(n){return n.tag!=null}function qE(n){return n.style!=null}class ps{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let s=this.matchedStyles=[];t.forEach(l=>{if(IE(l))this.tags.push(l);else if(qE(l)){let o=/[^=]*/.exec(l.style)[0];s.indexOf(o)<0&&s.push(o),this.styles.push(l)}}),this.normalizeLists=!this.tags.some(l=>{if(!/^(ul|ol)\b/.test(l.tag)||!l.node)return!1;let o=e.nodes[l.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let s=new gb(this,t,!1);return s.addAll(e,lt.none,t.from,t.to),s.finish()}parseSlice(e,t={}){let s=new gb(this,t,!0);return s.addAll(e,lt.none,t.from,t.to),oe.maxOpen(s.finish())}matchTag(e,t,s){for(let l=s?this.tags.indexOf(s)+1:0;l<this.tags.length;l++){let o=this.tags[l];if(GE(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let c=o.getAttrs(e);if(c===!1)continue;o.attrs=c||void 0}return o}}}matchStyle(e,t,s,l){for(let o=l?this.styles.indexOf(l)+1:0;o<this.styles.length;o++){let c=this.styles[o],f=c.style;if(!(f.indexOf(e)!=0||c.context&&!s.matchesContext(c.context)||f.length>e.length&&(f.charCodeAt(e.length)!=61||f.slice(e.length+1)!=t))){if(c.getAttrs){let d=c.getAttrs(t);if(d===!1)continue;c.attrs=d||void 0}return c}}}static schemaRules(e){let t=[];function s(l){let o=l.priority==null?50:l.priority,c=0;for(;c<t.length;c++){let f=t[c];if((f.priority==null?50:f.priority)<o)break}t.splice(c,0,l)}for(let l in e.marks){let o=e.marks[l].spec.parseDOM;o&&o.forEach(c=>{s(c=yb(c)),c.mark||c.ignore||c.clearMark||(c.mark=l)})}for(let l in e.nodes){let o=e.nodes[l].spec.parseDOM;o&&o.forEach(c=>{s(c=yb(c)),c.node||c.ignore||c.mark||(c.node=l)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ps(e,ps.schemaRules(e)))}}const u1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},VE={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},f1={ol:!0,ul:!0},Co=1,Lh=2,mo=4;function mb(n,e,t){return e!=null?(e?Co:0)|(e==="full"?Lh:0):n&&n.whitespace=="pre"?Co|Lh:t&~mo}class sc{constructor(e,t,s,l,o,c){this.type=e,this.attrs=t,this.marks=s,this.solid=l,this.options=c,this.content=[],this.activeMarks=lt.none,this.match=o||(c&mo?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(W.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let s=this.type.contentMatch,l;return(l=s.findWrapping(e.type))?(this.match=s,l):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Co)){let s=this.content[this.content.length-1],l;if(s&&s.isText&&(l=/[ \t\r\n\u000c]+$/.exec(s.text))){let o=s;s.text.length==l[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-l[0].length))}}let t=W.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(W.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!u1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class gb{constructor(e,t,s){this.parser=e,this.options=t,this.isOpen=s,this.open=0,this.localPreserveWS=!1;let l=t.topNode,o,c=mb(null,t.preserveWhitespace,0)|(s?mo:0);l?o=new sc(l.type,l.attrs,lt.none,!0,t.topMatch||l.type.contentMatch,c):s?o=new sc(null,null,lt.none,!0,null,c):o=new sc(e.schema.topNodeType,null,lt.none,!0,null,c),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let s=e.nodeValue,l=this.top,o=l.options&Lh?"full":this.localPreserveWS||(l.options&Co)>0,{schema:c}=this.parser;if(o==="full"||l.inlineContext(e)||/[^ \t\r\n\u000c]/.test(s)){if(o)if(o==="full")s=s.replace(/\r\n?/g,`
`);else if(c.linebreakReplacement&&/[\r\n]/.test(s)&&this.top.findWrapping(c.linebreakReplacement.create())){let f=s.split(/\r?\n|\r/);for(let d=0;d<f.length;d++)d&&this.insertNode(c.linebreakReplacement.create(),t,!0),f[d]&&this.insertNode(c.text(f[d]),t,!/\S/.test(f[d]));s=""}else s=s.replace(/\r?\n|\r/g," ");else if(s=s.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(s)&&this.open==this.nodes.length-1){let f=l.content[l.content.length-1],d=e.previousSibling;(!f||d&&d.nodeName=="BR"||f.isText&&/[ \t\r\n\u000c]$/.test(f.text))&&(s=s.slice(1))}s&&this.insertNode(c.text(s),t,!/\S/.test(s)),this.findInText(e)}else this.findInside(e)}addElement(e,t,s){let l=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),f;f1.hasOwnProperty(c)&&this.parser.normalizeLists&&$E(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(f=this.parser.matchTag(e,this,s));e:if(d?d.ignore:VE.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let p,g=this.needsBlock;if(u1.hasOwnProperty(c))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),p=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=d&&d.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),p&&this.sync(o),this.needsBlock=g}else{let p=this.readStyles(e,t);p&&this.addElementByRule(e,d,p,d.consuming===!1?f:void 0)}this.localPreserveWS=l}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let s=e.style;if(s&&s.length)for(let l=0;l<this.parser.matchedStyles.length;l++){let o=this.parser.matchedStyles[l],c=s.getPropertyValue(o);if(c)for(let f=void 0;;){let d=this.parser.matchStyle(o,c,this,f);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(p=>!d.clearMark(p)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)f=d;else break}}return t}addElementByRule(e,t,s,l){let o,c;if(t.node)if(c=this.parser.schema.nodes[t.node],c.isLeaf)this.insertNode(c.create(t.attrs),s,e.nodeName=="BR")||this.leafFallback(e,s);else{let d=this.enter(c,t.attrs||null,s,t.preserveWhitespace);d&&(o=!0,s=d)}else{let d=this.parser.schema.marks[t.mark];s=s.concat(d.create(t.attrs))}let f=this.top;if(c&&c.isLeaf)this.findInside(e);else if(l)this.addElement(e,s,l);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,s,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,s),this.findAround(e,d,!1)}o&&this.sync(f)&&this.open--}addAll(e,t,s,l){let o=s||0;for(let c=s?e.childNodes[s]:e.firstChild,f=l==null?null:e.childNodes[l];c!=f;c=c.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(c,t);this.findAtPoint(e,o)}findPlace(e,t,s){let l,o;for(let c=this.open,f=0;c>=0;c--){let d=this.nodes[c],p=d.findWrapping(e);if(p&&(!l||l.length>p.length+f)&&(l=p,o=d,!p.length))break;if(d.solid){if(s)break;f+=2}}if(!l)return null;this.sync(o);for(let c=0;c<l.length;c++)t=this.enterInner(l[c],null,t,!1);return t}insertNode(e,t,s){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let l=this.findPlace(e,t,s);if(l){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let c=lt.none;for(let f of l.concat(e.marks))(o.type?o.type.allowsMarkType(f.type):bb(f.type,e.type))&&(c=f.addToSet(c));return o.content.push(e.mark(c)),!0}return!1}enter(e,t,s,l){let o=this.findPlace(e.create(t),s,!1);return o&&(o=this.enterInner(e,t,s,!0,l)),o}enterInner(e,t,s,l=!1,o){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let f=mb(e,o,c.options);c.options&mo&&c.content.length==0&&(f|=mo);let d=lt.none;return s=s.filter(p=>(c.type?c.type.allowsMarkType(p.type):bb(p.type,e))?(d=p.addToSet(d),!1):!0),this.nodes.push(new sc(e,t,d,l,null,f)),this.open++,s}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Co)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let s=this.nodes[t].content;for(let l=s.length-1;l>=0;l--)e+=s[l].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==e&&this.find[s].offset==t&&(this.find[s].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,s){if(e!=t&&this.find)for(let l=0;l<this.find.length;l++)this.find[l].pos==null&&e.nodeType==1&&e.contains(this.find[l].node)&&t.compareDocumentPosition(this.find[l].node)&(s?2:4)&&(this.find[l].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),s=this.options.context,l=!this.isOpen&&(!s||s.parent.type==this.nodes[0].type),o=-(s?s.depth+1:0)+(l?0:1),c=(f,d)=>{for(;f>=0;f--){let p=t[f];if(p==""){if(f==t.length-1||f==0)continue;for(;d>=o;d--)if(c(f-1,d))return!0;return!1}else{let g=d>0||d==0&&l?this.nodes[d].type:s&&d>=o?s.node(d-o).type:null;if(!g||g.name!=p&&!g.isInGroup(p))return!1;d--}}return!0};return c(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(s&&s.isTextblock&&s.defaultAttrs)return s}for(let t in this.parser.schema.nodes){let s=this.parser.schema.nodes[t];if(s.isTextblock&&s.defaultAttrs)return s}}}function $E(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let s=e.nodeType==1?e.nodeName.toLowerCase():null;s&&f1.hasOwnProperty(s)&&t?(t.appendChild(e),e=t):s=="li"?t=e:s&&(t=null)}}function GE(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function yb(n){let e={};for(let t in n)e[t]=n[t];return e}function bb(n,e){let t=e.schema.nodes;for(let s in t){let l=t[s];if(!l.allowsMarkType(n))continue;let o=[],c=f=>{o.push(f);for(let d=0;d<f.edgeCount;d++){let{type:p,next:g}=f.edge(d);if(p==e||o.indexOf(g)<0&&c(g))return!0}};if(c(l.contentMatch))return!0}}class ii{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},s){s||(s=th(t).createDocumentFragment());let l=s,o=[];return e.forEach(c=>{if(o.length||c.marks.length){let f=0,d=0;for(;f<o.length&&d<c.marks.length;){let p=c.marks[d];if(!this.marks[p.type.name]){d++;continue}if(!p.eq(o[f][0])||p.type.spec.spanning===!1)break;f++,d++}for(;f<o.length;)l=o.pop()[1];for(;d<c.marks.length;){let p=c.marks[d++],g=this.serializeMark(p,c.isInline,t);g&&(o.push([p,l]),l.appendChild(g.dom),l=g.contentDOM||g.dom)}}l.appendChild(this.serializeNodeInner(c,t))}),s}serializeNodeInner(e,t){let{dom:s,contentDOM:l}=gc(th(t),this.nodes[e.type.name](e),null,e.attrs);if(l){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,l)}return s}serializeNode(e,t={}){let s=this.serializeNodeInner(e,t);for(let l=e.marks.length-1;l>=0;l--){let o=this.serializeMark(e.marks[l],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(s),s=o.dom)}return s}serializeMark(e,t,s={}){let l=this.marks[e.type.name];return l&&gc(th(s),l(e,t),null,e.attrs)}static renderSpec(e,t,s=null,l){return gc(e,t,s,l)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ii(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=xb(e.nodes);return t.text||(t.text=s=>s.text),t}static marksFromSchema(e){return xb(e.marks)}}function xb(n){let e={};for(let t in n){let s=n[t].spec.toDOM;s&&(e[t]=s)}return e}function th(n){return n.document||window.document}const vb=new WeakMap;function YE(n){let e=vb.get(n);return e===void 0&&vb.set(n,e=KE(n)),e}function KE(n){let e=null;function t(s){if(s&&typeof s=="object")if(Array.isArray(s))if(typeof s[0]=="string")e||(e=[]),e.push(s);else for(let l=0;l<s.length;l++)t(s[l]);else for(let l in s)t(s[l])}return t(n),e}function gc(n,e,t,s){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let l=e[0],o;if(typeof l!="string")throw new RangeError("Invalid array passed to renderSpec");if(s&&(o=YE(s))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=l.indexOf(" ");c>0&&(t=l.slice(0,c),l=l.slice(c+1));let f,d=t?n.createElementNS(t,l):n.createElement(l),p=e[1],g=1;if(p&&typeof p=="object"&&p.nodeType==null&&!Array.isArray(p)){g=2;for(let y in p)if(p[y]!=null){let x=y.indexOf(" ");x>0?d.setAttributeNS(y.slice(0,x),y.slice(x+1),p[y]):y=="style"&&d.style?d.style.cssText=p[y]:d.setAttribute(y,p[y])}}for(let y=g;y<e.length;y++){let x=e[y];if(x===0){if(y<e.length-1||y>g)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:v,contentDOM:k}=gc(n,x,t,s);if(d.appendChild(v),k){if(f)throw new RangeError("Multiple content holes");f=k}}}return{dom:d,contentDOM:f}}const d1=65535,h1=Math.pow(2,16);function PE(n,e){return n+e*h1}function Sb(n){return n&d1}function JE(n){return(n-(n&d1))/h1}const p1=1,m1=2,yc=4,g1=8;class _h{constructor(e,t,s){this.pos=e,this.delInfo=t,this.recover=s}get deleted(){return(this.delInfo&g1)>0}get deletedBefore(){return(this.delInfo&(p1|yc))>0}get deletedAfter(){return(this.delInfo&(m1|yc))>0}get deletedAcross(){return(this.delInfo&yc)>0}}class vn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&vn.empty)return vn.empty}recover(e){let t=0,s=Sb(e);if(!this.inverted)for(let l=0;l<s;l++)t+=this.ranges[l*3+2]-this.ranges[l*3+1];return this.ranges[s*3]+t+JE(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,s){let l=0,o=this.inverted?2:1,c=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?l:0);if(d>e)break;let p=this.ranges[f+o],g=this.ranges[f+c],y=d+p;if(e<=y){let x=p?e==d?-1:e==y?1:t:t,v=d+l+(x<0?0:g);if(s)return v;let k=e==(t<0?d:y)?null:PE(f/3,e-d),E=e==d?m1:e==y?p1:yc;return(t<0?e!=d:e!=y)&&(E|=g1),new _h(v,E,k)}l+=g-p}return s?e+l:new _h(e+l,0,null)}touches(e,t){let s=0,l=Sb(t),o=this.inverted?2:1,c=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let d=this.ranges[f]-(this.inverted?s:0);if(d>e)break;let p=this.ranges[f+o],g=d+p;if(e<=g&&f==l*3)return!0;s+=this.ranges[f+c]-p}return!1}forEach(e){let t=this.inverted?2:1,s=this.inverted?1:2;for(let l=0,o=0;l<this.ranges.length;l+=3){let c=this.ranges[l],f=c-(this.inverted?o:0),d=c+(this.inverted?0:o),p=this.ranges[l+t],g=this.ranges[l+s];e(f,f+p,d,d+g),o+=g-p}}invert(){return new vn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?vn.empty:new vn(e<0?[0,-e,0]:[0,0,e])}}vn.empty=new vn([]);class Mo{constructor(e,t,s=0,l=e?e.length:0){this.mirror=t,this.from=s,this.to=l,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Mo(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,s=this._maps.length;t<e._maps.length;t++){let l=e.getMirror(t);this.appendMap(e._maps[t],l!=null&&l<t?s+l:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,s=this._maps.length+e._maps.length;t>=0;t--){let l=e.getMirror(t);this.appendMap(e._maps[t].invert(),l!=null&&l>t?s-l-1:void 0)}}invert(){let e=new Mo;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let s=this.from;s<this.to;s++)e=this._maps[s].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,s){let l=0;for(let o=this.from;o<this.to;o++){let c=this._maps[o],f=c.mapResult(e,t);if(f.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,e=this._maps[d].recover(f.recover);continue}}l|=f.delInfo,e=f.pos}return s?e:new _h(e,l,null)}}const nh=Object.create(null);class Ft{getMap(){return vn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let s=nh[t.stepType];if(!s)throw new RangeError(`No step type ${t.stepType} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in nh)throw new RangeError("Duplicate use of step JSON ID "+e);return nh[e]=t,t.prototype.jsonID=e,t}}class Mt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Mt(e,null)}static fail(e){return new Mt(null,e)}static fromReplace(e,t,s,l){try{return Mt.ok(e.replace(t,s,l))}catch(o){if(o instanceof Tc)return Mt.fail(o.message);throw o}}}function hp(n,e,t){let s=[];for(let l=0;l<n.childCount;l++){let o=n.child(l);o.content.size&&(o=o.copy(hp(o.content,e,o))),o.isInline&&(o=e(o,t,l)),s.push(o)}return W.fromArray(s)}class fs extends Ft{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=e.resolve(this.from),l=s.node(s.sharedDepth(this.to)),o=new oe(hp(t.content,(c,f)=>!c.isAtom||!f.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),l),t.openStart,t.openEnd);return Mt.fromReplace(e,this.from,this.to,o)}invert(){return new Gn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new fs(t.pos,s.pos,this.mark)}merge(e){return e instanceof fs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new fs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new fs(t.from,t.to,e.markFromJSON(t.mark))}}Ft.jsonID("addMark",fs);class Gn extends Ft{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=new oe(hp(t.content,l=>l.mark(this.mark.removeFromSet(l.marks)),e),t.openStart,t.openEnd);return Mt.fromReplace(e,this.from,this.to,s)}invert(){return new fs(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new Gn(t.pos,s.pos,this.mark)}merge(e){return e instanceof Gn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Gn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Gn(t.from,t.to,e.markFromJSON(t.mark))}}Ft.jsonID("removeMark",Gn);class ds extends Ft{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Mt.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Mt.fromReplace(e,this.pos,this.pos+1,new oe(W.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let s=this.mark.addToSet(t.marks);if(s.length==t.marks.length){for(let l=0;l<t.marks.length;l++)if(!t.marks[l].isInSet(s))return new ds(this.pos,t.marks[l]);return new ds(this.pos,this.mark)}}return new ti(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ds(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ds(t.pos,e.markFromJSON(t.mark))}}Ft.jsonID("addNodeMark",ds);class ti extends Ft{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Mt.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Mt.fromReplace(e,this.pos,this.pos+1,new oe(W.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new ds(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ti(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ti(t.pos,e.markFromJSON(t.mark))}}Ft.jsonID("removeNodeMark",ti);class Rt extends Ft{constructor(e,t,s,l=!1){super(),this.from=e,this.to=t,this.slice=s,this.structure=l}apply(e){return this.structure&&Bh(e,this.from,this.to)?Mt.fail("Structure replace would overwrite content"):Mt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new vn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Rt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deletedAcross&&s.deletedAcross?null:new Rt(t.pos,Math.max(t.pos,s.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Rt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?oe.empty:new oe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Rt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?oe.empty:new oe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Rt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Rt(t.from,t.to,oe.fromJSON(e,t.slice),!!t.structure)}}Ft.jsonID("replace",Rt);class zt extends Ft{constructor(e,t,s,l,o,c,f=!1){super(),this.from=e,this.to=t,this.gapFrom=s,this.gapTo=l,this.slice=o,this.insert=c,this.structure=f}apply(e){if(this.structure&&(Bh(e,this.from,this.gapFrom)||Bh(e,this.gapTo,this.to)))return Mt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Mt.fail("Gap is not a flat range");let s=this.slice.insertAt(this.insert,t.content);return s?Mt.fromReplace(e,this.from,this.to,s):Mt.fail("Content does not fit in gap")}getMap(){return new vn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new zt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1),l=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?s.pos:e.map(this.gapTo,1);return t.deletedAcross&&s.deletedAcross||l<t.pos||o>s.pos?null:new zt(t.pos,s.pos,l,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new zt(t.from,t.to,t.gapFrom,t.gapTo,oe.fromJSON(e,t.slice),t.insert,!!t.structure)}}Ft.jsonID("replaceAround",zt);function Bh(n,e,t){let s=n.resolve(e),l=t-e,o=s.depth;for(;l>0&&o>0&&s.indexAfter(o)==s.node(o).childCount;)o--,l--;if(l>0){let c=s.node(o).maybeChild(s.indexAfter(o));for(;l>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,l--}}return!1}function FE(n,e,t,s){let l=[],o=[],c,f;n.doc.nodesBetween(e,t,(d,p,g)=>{if(!d.isInline)return;let y=d.marks;if(!s.isInSet(y)&&g.type.allowsMarkType(s.type)){let x=Math.max(p,e),v=Math.min(p+d.nodeSize,t),k=s.addToSet(y);for(let E=0;E<y.length;E++)y[E].isInSet(k)||(c&&c.to==x&&c.mark.eq(y[E])?c.to=v:l.push(c=new Gn(x,v,y[E])));f&&f.to==x?f.to=v:o.push(f=new fs(x,v,s))}}),l.forEach(d=>n.step(d)),o.forEach(d=>n.step(d))}function XE(n,e,t,s){let l=[],o=0;n.doc.nodesBetween(e,t,(c,f)=>{if(!c.isInline)return;o++;let d=null;if(s instanceof du){let p=c.marks,g;for(;g=s.isInSet(p);)(d||(d=[])).push(g),p=g.removeFromSet(p)}else s?s.isInSet(c.marks)&&(d=[s]):d=c.marks;if(d&&d.length){let p=Math.min(f+c.nodeSize,t);for(let g=0;g<d.length;g++){let y=d[g],x;for(let v=0;v<l.length;v++){let k=l[v];k.step==o-1&&y.eq(l[v].style)&&(x=k)}x?(x.to=p,x.step=o):l.push({style:y,from:Math.max(f,e),to:p,step:o})}}}),l.forEach(c=>n.step(new Gn(c.from,c.to,c.style)))}function pp(n,e,t,s=t.contentMatch,l=!0){let o=n.doc.nodeAt(e),c=[],f=e+1;for(let d=0;d<o.childCount;d++){let p=o.child(d),g=f+p.nodeSize,y=s.matchType(p.type);if(!y)c.push(new Rt(f,g,oe.empty));else{s=y;for(let x=0;x<p.marks.length;x++)t.allowsMarkType(p.marks[x].type)||n.step(new Gn(f,g,p.marks[x]));if(l&&p.isText&&t.whitespace!="pre"){let x,v=/\r?\n|\r/g,k;for(;x=v.exec(p.text);)k||(k=new oe(W.from(t.schema.text(" ",t.allowedMarks(p.marks))),0,0)),c.push(new Rt(f+x.index,f+x.index+x[0].length,k))}}f=g}if(!s.validEnd){let d=s.fillBefore(W.empty,!0);n.replace(f,f,new oe(d,0,0))}for(let d=c.length-1;d>=0;d--)n.step(c[d])}function QE(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function cl(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let s=n.depth,l=0,o=0;;--s){let c=n.$from.node(s),f=n.$from.index(s)+l,d=n.$to.indexAfter(s)-o;if(s<n.depth&&c.canReplace(f,d,t))return s;if(s==0||c.type.spec.isolating||!QE(c,f,d))break;f&&(l=1),d<c.childCount&&(o=1)}return null}function ZE(n,e,t){let{$from:s,$to:l,depth:o}=e,c=s.before(o+1),f=l.after(o+1),d=c,p=f,g=W.empty,y=0;for(let k=o,E=!1;k>t;k--)E||s.index(k)>0?(E=!0,g=W.from(s.node(k).copy(g)),y++):d--;let x=W.empty,v=0;for(let k=o,E=!1;k>t;k--)E||l.after(k+1)<l.end(k)?(E=!0,x=W.from(l.node(k).copy(x)),v++):p++;n.step(new zt(d,p,c,f,new oe(g.append(x),y,v),g.size-y,!0))}function mp(n,e,t=null,s=n){let l=WE(n,e),o=l&&eC(s,e);return o?l.map(kb).concat({type:e,attrs:t}).concat(o.map(kb)):null}function kb(n){return{type:n,attrs:null}}function WE(n,e){let{parent:t,startIndex:s,endIndex:l}=n,o=t.contentMatchAt(s).findWrapping(e);if(!o)return null;let c=o.length?o[0]:e;return t.canReplaceWith(s,l,c)?o:null}function eC(n,e){let{parent:t,startIndex:s,endIndex:l}=n,o=t.child(s),c=e.contentMatch.findWrapping(o.type);if(!c)return null;let d=(c.length?c[c.length-1]:e).contentMatch;for(let p=s;d&&p<l;p++)d=d.matchType(t.child(p).type);return!d||!d.validEnd?null:c}function tC(n,e,t){let s=W.empty;for(let c=t.length-1;c>=0;c--){if(s.size){let f=t[c].type.contentMatch.matchFragment(s);if(!f||!f.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}s=W.from(t[c].type.create(t[c].attrs,s))}let l=e.start,o=e.end;n.step(new zt(l,o,l,o,new oe(s,0,0),t.length,!0))}function nC(n,e,t,s,l){if(!s.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(c,f)=>{let d=typeof l=="function"?l(c):l;if(c.isTextblock&&!c.hasMarkup(s,d)&&rC(n.doc,n.mapping.slice(o).map(f),s)){let p=null;if(s.schema.linebreakReplacement){let v=s.whitespace=="pre",k=!!s.contentMatch.matchType(s.schema.linebreakReplacement);v&&!k?p=!1:!v&&k&&(p=!0)}p===!1&&b1(n,c,f,o),pp(n,n.mapping.slice(o).map(f,1),s,void 0,p===null);let g=n.mapping.slice(o),y=g.map(f,1),x=g.map(f+c.nodeSize,1);return n.step(new zt(y,x,y+1,x-1,new oe(W.from(s.create(d,null,c.marks)),0,0),1,!0)),p===!0&&y1(n,c,f,o),!1}})}function y1(n,e,t,s){e.forEach((l,o)=>{if(l.isText){let c,f=/\r?\n|\r/g;for(;c=f.exec(l.text);){let d=n.mapping.slice(s).map(t+1+o+c.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function b1(n,e,t,s){e.forEach((l,o)=>{if(l.type==l.type.schema.linebreakReplacement){let c=n.mapping.slice(s).map(t+1+o);n.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function rC(n,e,t){let s=n.resolve(e),l=s.index();return s.parent.canReplaceWith(l,l+1,t)}function sC(n,e,t,s,l){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let c=t.create(s,null,l||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,c);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new zt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new oe(W.from(c),0,0),1,!0))}function wr(n,e,t=1,s){let l=n.resolve(e),o=l.depth-t,c=s&&s[s.length-1]||l.parent;if(o<0||l.parent.type.spec.isolating||!l.parent.canReplace(l.index(),l.parent.childCount)||!c.type.validContent(l.parent.content.cutByIndex(l.index(),l.parent.childCount)))return!1;for(let p=l.depth-1,g=t-2;p>o;p--,g--){let y=l.node(p),x=l.index(p);if(y.type.spec.isolating)return!1;let v=y.content.cutByIndex(x,y.childCount),k=s&&s[g+1];k&&(v=v.replaceChild(0,k.type.create(k.attrs)));let E=s&&s[g]||y;if(!y.canReplace(x+1,y.childCount)||!E.type.validContent(v))return!1}let f=l.indexAfter(o),d=s&&s[0];return l.node(o).canReplaceWith(f,f,d?d.type:l.node(o+1).type)}function iC(n,e,t=1,s){let l=n.doc.resolve(e),o=W.empty,c=W.empty;for(let f=l.depth,d=l.depth-t,p=t-1;f>d;f--,p--){o=W.from(l.node(f).copy(o));let g=s&&s[p];c=W.from(g?g.type.create(g.attrs,c):l.node(f).copy(c))}n.step(new Rt(e,e,new oe(o.append(c),t,t),!0))}function vs(n,e){let t=n.resolve(e),s=t.index();return x1(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(s,s+1)}function lC(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:s}=n.type.schema;for(let l=0;l<e.childCount;l++){let o=e.child(l),c=o.type==s?n.type.schema.nodes.text:o.type;if(t=t.matchType(c),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function x1(n,e){return!!(n&&e&&!n.isLeaf&&lC(n,e))}function hu(n,e,t=-1){let s=n.resolve(e);for(let l=s.depth;;l--){let o,c,f=s.index(l);if(l==s.depth?(o=s.nodeBefore,c=s.nodeAfter):t>0?(o=s.node(l+1),f++,c=s.node(l).maybeChild(f)):(o=s.node(l).maybeChild(f-1),c=s.node(l+1)),o&&!o.isTextblock&&x1(o,c)&&s.node(l).canReplace(f,f+1))return e;if(l==0)break;e=t<0?s.before(l):s.after(l)}}function oC(n,e,t){let s=null,{linebreakReplacement:l}=n.doc.type.schema,o=n.doc.resolve(e-t),c=o.node().type;if(l&&c.inlineContent){let g=c.whitespace=="pre",y=!!c.contentMatch.matchType(l);g&&!y?s=!1:!g&&y&&(s=!0)}let f=n.steps.length;if(s===!1){let g=n.doc.resolve(e+t);b1(n,g.node(),g.before(),f)}c.inlineContent&&pp(n,e+t-1,c,o.node().contentMatchAt(o.index()),s==null);let d=n.mapping.slice(f),p=d.map(e-t);if(n.step(new Rt(p,d.map(e+t,-1),oe.empty,!0)),s===!0){let g=n.doc.resolve(p);y1(n,g.node(),g.before(),n.steps.length)}return n}function aC(n,e,t){let s=n.resolve(e);if(s.parent.canReplaceWith(s.index(),s.index(),t))return e;if(s.parentOffset==0)for(let l=s.depth-1;l>=0;l--){let o=s.index(l);if(s.node(l).canReplaceWith(o,o,t))return s.before(l+1);if(o>0)return null}if(s.parentOffset==s.parent.content.size)for(let l=s.depth-1;l>=0;l--){let o=s.indexAfter(l);if(s.node(l).canReplaceWith(o,o,t))return s.after(l+1);if(o<s.node(l).childCount)return null}return null}function v1(n,e,t){let s=n.resolve(e);if(!t.content.size)return e;let l=t.content;for(let o=0;o<t.openStart;o++)l=l.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let c=s.depth;c>=0;c--){let f=c==s.depth?0:s.pos<=(s.start(c+1)+s.end(c+1))/2?-1:1,d=s.index(c)+(f>0?1:0),p=s.node(c),g=!1;if(o==1)g=p.canReplace(d,d,l);else{let y=p.contentMatchAt(d).findWrapping(l.firstChild.type);g=y&&p.canReplaceWith(d,d,y[0])}if(g)return f==0?s.pos:f<0?s.before(c+1):s.after(c+1)}return null}function pu(n,e,t=e,s=oe.empty){if(e==t&&!s.size)return null;let l=n.resolve(e),o=n.resolve(t);return S1(l,o,s)?new Rt(e,t,s):new cC(l,o,s).fit()}function S1(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class cC{constructor(e,t,s){this.$from=e,this.$to=t,this.unplaced=s,this.frontier=[],this.placed=W.empty;for(let l=0;l<=e.depth;l++){let o=e.node(l);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(l))})}for(let l=e.depth;l>0;l--)this.placed=W.from(e.node(l).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let p=this.findFittable();p?this.placeNodes(p):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,s=this.$from,l=this.close(e<0?this.$to:s.doc.resolve(e));if(!l)return null;let o=this.placed,c=s.depth,f=l.depth;for(;c&&f&&o.childCount==1;)o=o.firstChild.content,c--,f--;let d=new oe(o,c,f);return e>-1?new zt(s.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||s.pos!=this.$to.pos?new Rt(s.pos,l.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,s=0,l=this.unplaced.openEnd;s<e;s++){let o=t.firstChild;if(t.childCount>1&&(l=0),o.type.spec.isolating&&l<=s){e=s;break}t=o.content}for(let t=1;t<=2;t++)for(let s=t==1?e:this.unplaced.openStart;s>=0;s--){let l,o=null;s?(o=rh(this.unplaced.content,s-1).firstChild,l=o.content):l=this.unplaced.content;let c=l.firstChild;for(let f=this.depth;f>=0;f--){let{type:d,match:p}=this.frontier[f],g,y=null;if(t==1&&(c?p.matchType(c.type)||(y=p.fillBefore(W.from(c),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:s,frontierDepth:f,parent:o,inject:y};if(t==2&&c&&(g=p.findWrapping(c.type)))return{sliceDepth:s,frontierDepth:f,parent:o,wrap:g};if(o&&p.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:s}=this.unplaced,l=rh(e,t);return!l.childCount||l.firstChild.isLeaf?!1:(this.unplaced=new oe(e,t+1,Math.max(s,l.size+t>=e.size-s?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:s}=this.unplaced,l=rh(e,t);if(l.childCount<=1&&t>0){let o=e.size-t<=t+l.size;this.unplaced=new oe(ao(e,t-1,1),t-1,o?t-1:s)}else this.unplaced=new oe(ao(e,t,1),t,s)}placeNodes({sliceDepth:e,frontierDepth:t,parent:s,inject:l,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let E=0;E<o.length;E++)this.openFrontierNode(o[E]);let c=this.unplaced,f=s?s.content:c.content,d=c.openStart-e,p=0,g=[],{match:y,type:x}=this.frontier[t];if(l){for(let E=0;E<l.childCount;E++)g.push(l.child(E));y=y.matchFragment(l)}let v=f.size+e-(c.content.size-c.openEnd);for(;p<f.childCount;){let E=f.child(p),C=y.matchType(E.type);if(!C)break;p++,(p>1||d==0||E.content.size)&&(y=C,g.push(k1(E.mark(x.allowedMarks(E.marks)),p==1?d:0,p==f.childCount?v:-1)))}let k=p==f.childCount;k||(v=-1),this.placed=co(this.placed,t,W.from(g)),this.frontier[t].match=y,k&&v<0&&s&&s.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,C=f;E<v;E++){let M=C.lastChild;this.frontier.push({type:M.type,match:M.contentMatchAt(M.childCount)}),C=M.content}this.unplaced=k?e==0?oe.empty:new oe(ao(c.content,e-1,1),e-1,v<0?c.openEnd:e-1):new oe(ao(c.content,e,p),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!sh(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:s}=this.$to,l=this.$to.after(s);for(;s>1&&l==this.$to.end(--s);)++l;return l}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:s,type:l}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),c=sh(e,t,l,s,o);if(c){for(let f=t-1;f>=0;f--){let{match:d,type:p}=this.frontier[f],g=sh(e,f,p,d,!0);if(!g||g.childCount)continue e}return{depth:t,fit:c,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=co(this.placed,t.depth,t.fit)),e=t.move;for(let s=t.depth+1;s<=e.depth;s++){let l=e.node(s),o=l.type.contentMatch.fillBefore(l.content,!0,e.index(s));this.openFrontierNode(l.type,l.attrs,o)}return e}openFrontierNode(e,t=null,s){let l=this.frontier[this.depth];l.match=l.match.matchType(e),this.placed=co(this.placed,this.depth,W.from(e.create(t,s))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(W.empty,!0);t.childCount&&(this.placed=co(this.placed,this.frontier.length,t))}}function ao(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(ao(n.firstChild.content,e-1,t)))}function co(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(co(n.lastChild.content,e-1,t)))}function rh(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function k1(n,e,t){if(e<=0)return n;let s=n.content;return e>1&&(s=s.replaceChild(0,k1(s.firstChild,e-1,s.childCount==1?t-1:0))),e>0&&(s=n.type.contentMatch.fillBefore(s).append(s),t<=0&&(s=s.append(n.type.contentMatch.matchFragment(s).fillBefore(W.empty,!0)))),n.copy(s)}function sh(n,e,t,s,l){let o=n.node(e),c=l?n.indexAfter(e):n.index(e);if(c==o.childCount&&!t.compatibleContent(o.type))return null;let f=s.fillBefore(o.content,!0,c);return f&&!uC(t,o.content,c)?f:null}function uC(n,e,t){for(let s=t;s<e.childCount;s++)if(!n.allowsMarks(e.child(s).marks))return!0;return!1}function fC(n){return n.spec.defining||n.spec.definingForContent}function dC(n,e,t,s){if(!s.size)return n.deleteRange(e,t);let l=n.doc.resolve(e),o=n.doc.resolve(t);if(S1(l,o,s))return n.step(new Rt(e,t,s));let c=E1(l,o);c[c.length-1]==0&&c.pop();let f=-(l.depth+1);c.unshift(f);for(let x=l.depth,v=l.pos-1;x>0;x--,v--){let k=l.node(x).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;c.indexOf(x)>-1?f=x:l.before(x)==v&&c.splice(1,0,-x)}let d=c.indexOf(f),p=[],g=s.openStart;for(let x=s.content,v=0;;v++){let k=x.firstChild;if(p.push(k),v==s.openStart)break;x=k.content}for(let x=g-1;x>=0;x--){let v=p[x],k=fC(v.type);if(k&&!v.sameMarkup(l.node(Math.abs(f)-1)))g=x;else if(k||!v.type.isTextblock)break}for(let x=s.openStart;x>=0;x--){let v=(x+g+1)%(s.openStart+1),k=p[v];if(k)for(let E=0;E<c.length;E++){let C=c[(E+d)%c.length],M=!0;C<0&&(M=!1,C=-C);let I=l.node(C-1),$=l.index(C-1);if(I.canReplaceWith($,$,k.type,k.marks))return n.replace(l.before(C),M?o.after(C):t,new oe(T1(s.content,0,s.openStart,v),v,s.openEnd))}}let y=n.steps.length;for(let x=c.length-1;x>=0&&(n.replace(e,t,s),!(n.steps.length>y));x--){let v=c[x];v<0||(e=l.before(v),t=o.after(v))}}function T1(n,e,t,s,l){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(T1(o.content,e+1,t,s,o)))}if(e>s){let o=l.contentMatchAt(0),c=o.fillBefore(n).append(n);n=c.append(o.matchFragment(c).fillBefore(W.empty,!0))}return n}function hC(n,e,t,s){if(!s.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let l=aC(n.doc,e,s.type);l!=null&&(e=t=l)}n.replaceRange(e,t,new oe(W.from(s),0,0))}function pC(n,e,t){let s=n.doc.resolve(e),l=n.doc.resolve(t),o=E1(s,l);for(let c=0;c<o.length;c++){let f=o[c],d=c==o.length-1;if(d&&f==0||s.node(f).type.contentMatch.validEnd)return n.delete(s.start(f),l.end(f));if(f>0&&(d||s.node(f-1).canReplace(s.index(f-1),l.indexAfter(f-1))))return n.delete(s.before(f),l.after(f))}for(let c=1;c<=s.depth&&c<=l.depth;c++)if(e-s.start(c)==s.depth-c&&t>s.end(c)&&l.end(c)-t!=l.depth-c&&s.start(c-1)==l.start(c-1)&&s.node(c-1).canReplace(s.index(c-1),l.index(c-1)))return n.delete(s.before(c),t);n.delete(e,t)}function E1(n,e){let t=[],s=Math.min(n.depth,e.depth);for(let l=s;l>=0;l--){let o=n.start(l);if(o<n.pos-(n.depth-l)||e.end(l)>e.pos+(e.depth-l)||n.node(l).type.spec.isolating||e.node(l).type.spec.isolating)break;(o==e.start(l)||l==n.depth&&l==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&l&&e.start(l-1)==o-1)&&t.push(l)}return t}class el extends Ft{constructor(e,t,s){super(),this.pos=e,this.attr=t,this.value=s}apply(e){let t=e.nodeAt(this.pos);if(!t)return Mt.fail("No node at attribute step's position");let s=Object.create(null);for(let o in t.attrs)s[o]=t.attrs[o];s[this.attr]=this.value;let l=t.type.create(s,null,t.marks);return Mt.fromReplace(e,this.pos,this.pos+1,new oe(W.from(l),0,t.isLeaf?0:1))}getMap(){return vn.empty}invert(e){return new el(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new el(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new el(t.pos,t.attr,t.value)}}Ft.jsonID("attr",el);class wo extends Ft{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let l in e.attrs)t[l]=e.attrs[l];t[this.attr]=this.value;let s=e.type.create(t,e.content,e.marks);return Mt.ok(s)}getMap(){return vn.empty}invert(e){return new wo(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new wo(t.attr,t.value)}}Ft.jsonID("docAttr",wo);let nl=class extends Error{};nl=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};nl.prototype=Object.create(Error.prototype);nl.prototype.constructor=nl;nl.prototype.name="TransformError";class C1{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Mo}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new nl(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,t=-1e9;for(let s=0;s<this.mapping.maps.length;s++){let l=this.mapping.maps[s];s&&(e=l.map(e,1),t=l.map(t,-1)),l.forEach((o,c,f,d)=>{e=Math.min(e,f),t=Math.max(t,d)})}return e==1e9?null:{from:e,to:t}}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,s=oe.empty){let l=pu(this.doc,e,t,s);return l&&this.step(l),this}replaceWith(e,t,s){return this.replace(e,t,new oe(W.from(s),0,0))}delete(e,t){return this.replace(e,t,oe.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,s){return dC(this,e,t,s),this}replaceRangeWith(e,t,s){return hC(this,e,t,s),this}deleteRange(e,t){return pC(this,e,t),this}lift(e,t){return ZE(this,e,t),this}join(e,t=1){return oC(this,e,t),this}wrap(e,t){return tC(this,e,t),this}setBlockType(e,t=e,s,l=null){return nC(this,e,t,s,l),this}setNodeMarkup(e,t,s=null,l){return sC(this,e,t,s,l),this}setNodeAttribute(e,t,s){return this.step(new el(e,t,s)),this}setDocAttribute(e,t){return this.step(new wo(e,t)),this}addNodeMark(e,t){return this.step(new ds(e,t)),this}removeNodeMark(e,t){let s=this.doc.nodeAt(e);if(!s)throw new RangeError("No node at position "+e);if(t instanceof lt)t.isInSet(s.marks)&&this.step(new ti(e,t));else{let l=s.marks,o,c=[];for(;o=t.isInSet(l);)c.push(new ti(e,o)),l=o.removeFromSet(l);for(let f=c.length-1;f>=0;f--)this.step(c[f])}return this}split(e,t=1,s){return iC(this,e,t,s),this}addMark(e,t,s){return FE(this,e,t,s),this}removeMark(e,t,s){return XE(this,e,t,s),this}clearIncompatible(e,t,s){return pp(this,e,t,s),this}}const ih=Object.create(null);class Le{constructor(e,t,s){this.$anchor=e,this.$head=t,this.ranges=s||[new mC(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=oe.empty){let s=t.content.lastChild,l=null;for(let f=0;f<t.openEnd;f++)l=s,s=s.lastChild;let o=e.steps.length,c=this.ranges;for(let f=0;f<c.length;f++){let{$from:d,$to:p}=c[f],g=e.mapping.slice(o);e.replaceRange(g.map(d.pos),g.map(p.pos),f?oe.empty:t),f==0&&Cb(e,o,(s?s.isInline:l&&l.isTextblock)?-1:1)}}replaceWith(e,t){let s=e.steps.length,l=this.ranges;for(let o=0;o<l.length;o++){let{$from:c,$to:f}=l[o],d=e.mapping.slice(s),p=d.map(c.pos),g=d.map(f.pos);o?e.deleteRange(p,g):(e.replaceRangeWith(p,g,t),Cb(e,s,t.isInline?-1:1))}}static findFrom(e,t,s=!1){let l=e.parent.inlineContent?new Ce(e):Ji(e.node(0),e.parent,e.pos,e.index(),t,s);if(l)return l;for(let o=e.depth-1;o>=0;o--){let c=t<0?Ji(e.node(0),e.node(o),e.before(o+1),e.index(o),t,s):Ji(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,s);if(c)return c}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Sn(e.node(0))}static atStart(e){return Ji(e,e,0,0,1)||new Sn(e)}static atEnd(e){return Ji(e,e,e.content.size,e.childCount,-1)||new Sn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let s=ih[t.type];if(!s)throw new RangeError(`No selection type ${t.type} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in ih)throw new RangeError("Duplicate use of selection JSON ID "+e);return ih[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Ce.between(this.$anchor,this.$head).getBookmark()}}Le.prototype.visible=!0;class mC{constructor(e,t){this.$from=e,this.$to=t}}let Tb=!1;function Eb(n){!Tb&&!n.parent.inlineContent&&(Tb=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Ce extends Le{constructor(e,t=e){Eb(e),Eb(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let s=e.resolve(t.map(this.head));if(!s.parent.inlineContent)return Le.near(s);let l=e.resolve(t.map(this.anchor));return new Ce(l.parent.inlineContent?l:s,s)}replace(e,t=oe.empty){if(super.replace(e,t),t==oe.empty){let s=this.$from.marksAcross(this.$to);s&&e.ensureMarks(s)}}eq(e){return e instanceof Ce&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new mu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ce(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,s=t){let l=e.resolve(t);return new this(l,s==t?l:e.resolve(s))}static between(e,t,s){let l=e.pos-t.pos;if((!s||l)&&(s=l>=0?1:-1),!t.parent.inlineContent){let o=Le.findFrom(t,s,!0)||Le.findFrom(t,-s,!0);if(o)t=o.$head;else return Le.near(t,s)}return e.parent.inlineContent||(l==0?e=t:(e=(Le.findFrom(e,-s,!0)||Le.findFrom(e,s,!0)).$anchor,e.pos<t.pos!=l<0&&(e=t))),new Ce(e,t)}}Le.jsonID("text",Ce);class mu{constructor(e,t){this.anchor=e,this.head=t}map(e){return new mu(e.map(this.anchor),e.map(this.head))}resolve(e){return Ce.between(e.resolve(this.anchor),e.resolve(this.head))}}class Se extends Le{constructor(e){let t=e.nodeAfter,s=e.node(0).resolve(e.pos+t.nodeSize);super(e,s),this.node=t}map(e,t){let{deleted:s,pos:l}=t.mapResult(this.anchor),o=e.resolve(l);return s?Le.near(o):new Se(o)}content(){return new oe(W.from(this.node),0,0)}eq(e){return e instanceof Se&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new gp(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Se(e.resolve(t.anchor))}static create(e,t){return new Se(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Se.prototype.visible=!1;Le.jsonID("node",Se);class gp{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:s}=e.mapResult(this.anchor);return t?new mu(s,s):new gp(s)}resolve(e){let t=e.resolve(this.anchor),s=t.nodeAfter;return s&&Se.isSelectable(s)?new Se(t):Le.near(t)}}class Sn extends Le{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=oe.empty){if(t==oe.empty){e.delete(0,e.doc.content.size);let s=Le.atStart(e.doc);s.eq(e.selection)||e.setSelection(s)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Sn(e)}map(e){return new Sn(e)}eq(e){return e instanceof Sn}getBookmark(){return gC}}Le.jsonID("all",Sn);const gC={map(){return this},resolve(n){return new Sn(n)}};function Ji(n,e,t,s,l,o=!1){if(e.inlineContent)return Ce.create(n,t);for(let c=s-(l>0?0:1);l>0?c<e.childCount:c>=0;c+=l){let f=e.child(c);if(f.isAtom){if(!o&&Se.isSelectable(f))return Se.create(n,t-(l<0?f.nodeSize:0))}else{let d=Ji(n,f,t+l,l<0?f.childCount:0,l,o);if(d)return d}t+=f.nodeSize*l}return null}function Cb(n,e,t){let s=n.steps.length-1;if(s<e)return;let l=n.steps[s];if(!(l instanceof Rt||l instanceof zt))return;let o=n.mapping.maps[s],c;o.forEach((f,d,p,g)=>{c==null&&(c=g)}),n.setSelection(Le.near(n.doc.resolve(c),t))}const Mb=1,ic=2,wb=4;class yC extends C1{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Mb)&~ic,this.storedMarks=null,this}get selectionSet(){return(this.updated&Mb)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ic,this}ensureMarks(e){return lt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ic)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~ic,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let s=this.selection;return t&&(e=e.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||lt.none))),s.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,s){let l=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(l.text(e),!0):this.deleteSelection();{if(s==null&&(s=t),!e)return this.deleteRange(t,s);let o=this.storedMarks;if(!o){let c=this.doc.resolve(t);o=s==t?c.marks():c.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(t,s,l.text(e,o)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(Le.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=wb,this}get scrolledIntoView(){return(this.updated&wb)>0}}function Nb(n,e){return!e||!n?n:n.bind(e)}class uo{constructor(e,t,s){this.name=e,this.init=Nb(t.init,s),this.apply=Nb(t.apply,s)}}const bC=[new uo("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new uo("selection",{init(n,e){return n.selection||Le.atStart(e.doc)},apply(n){return n.selection}}),new uo("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,s){return s.selection.$cursor?n.storedMarks:null}}),new uo("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class lh{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=bC.slice(),t&&t.forEach(s=>{if(this.pluginsByKey[s.key])throw new RangeError("Adding different instances of a keyed plugin ("+s.key+")");this.plugins.push(s),this.pluginsByKey[s.key]=s,s.spec.state&&this.fields.push(new uo(s.key,s.spec.state,s))})}}class Zi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let s=0;s<this.config.plugins.length;s++)if(s!=t){let l=this.config.plugins[s];if(l.spec.filterTransaction&&!l.spec.filterTransaction.call(l,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],s=this.applyInner(e),l=null;for(;;){let o=!1;for(let c=0;c<this.config.plugins.length;c++){let f=this.config.plugins[c];if(f.spec.appendTransaction){let d=l?l[c].n:0,p=l?l[c].state:this,g=d<t.length&&f.spec.appendTransaction.call(f,d?t.slice(d):t,p,s);if(g&&s.filterTransaction(g,c)){if(g.setMeta("appendedTransaction",e),!l){l=[];for(let y=0;y<this.config.plugins.length;y++)l.push(y<c?{state:s,n:t.length}:{state:this,n:0})}t.push(g),s=s.applyInner(g),o=!0}l&&(l[c]={state:s,n:t.length})}}if(!o)return{state:s,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Zi(this.config),s=this.config.fields;for(let l=0;l<s.length;l++){let o=s[l];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new yC(this)}static create(e){let t=new lh(e.doc?e.doc.type.schema:e.schema,e.plugins),s=new Zi(t);for(let l=0;l<t.fields.length;l++)s[t.fields[l].name]=t.fields[l].init(e,s);return s}reconfigure(e){let t=new lh(this.schema,e.plugins),s=t.fields,l=new Zi(t);for(let o=0;o<s.length;o++){let c=s[o].name;l[c]=this.hasOwnProperty(c)?this[c]:s[o].init(e,l)}return l}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(s=>s.toJSON())),e&&typeof e=="object")for(let s in e){if(s=="doc"||s=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let l=e[s],o=l.spec.state;o&&o.toJSON&&(t[s]=o.toJSON.call(l,this[l.key]))}return t}static fromJSON(e,t,s){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let l=new lh(e.schema,e.plugins),o=new Zi(l);return l.fields.forEach(c=>{if(c.name=="doc")o.doc=Yn.fromJSON(e.schema,t.doc);else if(c.name=="selection")o.selection=Le.fromJSON(o.doc,t.selection);else if(c.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(s)for(let f in s){let d=s[f],p=d.spec.state;if(d.key==c.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(t,f)){o[c.name]=p.fromJSON.call(d,e,t[f],o);return}}o[c.name]=c.init(e,o)}}),o}}function M1(n,e,t){for(let s in n){let l=n[s];l instanceof Function?l=l.bind(e):s=="handleDOMEvents"&&(l=M1(l,e,{})),t[s]=l}return t}class pt{constructor(e){this.spec=e,this.props={},e.props&&M1(e.props,this,this.props),this.key=e.key?e.key.key:w1("plugin")}getState(e){return e[this.key]}}const oh=Object.create(null);function w1(n){return n in oh?n+"$"+ ++oh[n]:(oh[n]=0,n+"$")}class Ot{constructor(e="key"){this.key=w1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const yp=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function N1(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const A1=(n,e,t)=>{let s=N1(n,t);if(!s)return!1;let l=bp(s);if(!l){let c=s.blockRange(),f=c&&cl(c);return f==null?!1:(e&&e(n.tr.lift(c,f).scrollIntoView()),!0)}let o=l.nodeBefore;if(H1(n,l,e,-1))return!0;if(s.parent.content.size==0&&(rl(o,"end")||Se.isSelectable(o)))for(let c=s.depth;;c--){let f=pu(n.doc,s.before(c),s.after(c),oe.empty);if(f&&f.slice.size<f.to-f.from){if(e){let d=n.tr.step(f);d.setSelection(rl(o,"end")?Le.findFrom(d.doc.resolve(d.mapping.map(l.pos,-1)),-1):Se.create(d.doc,l.pos-o.nodeSize)),e(d.scrollIntoView())}return!0}if(c==1||s.node(c-1).childCount>1)break}return o.isAtom&&l.depth==s.depth-1?(e&&e(n.tr.delete(l.pos-o.nodeSize,l.pos).scrollIntoView()),!0):!1},xC=(n,e,t)=>{let s=N1(n,t);if(!s)return!1;let l=bp(s);return l?O1(n,l,e):!1},vC=(n,e,t)=>{let s=j1(n,t);if(!s)return!1;let l=xp(s);return l?O1(n,l,e):!1};function O1(n,e,t){let s=e.nodeBefore,l=s,o=e.pos-1;for(;!l.isTextblock;o--){if(l.type.spec.isolating)return!1;let g=l.lastChild;if(!g)return!1;l=g}let c=e.nodeAfter,f=c,d=e.pos+1;for(;!f.isTextblock;d++){if(f.type.spec.isolating)return!1;let g=f.firstChild;if(!g)return!1;f=g}let p=pu(n.doc,o,d,oe.empty);if(!p||p.from!=o||p instanceof Rt&&p.slice.size>=d-o)return!1;if(t){let g=n.tr.step(p);g.setSelection(Ce.create(g.doc,o)),t(g.scrollIntoView())}return!0}function rl(n,e,t=!1){for(let s=n;s;s=e=="start"?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(t&&s.childCount!=1)return!1}return!1}const D1=(n,e,t)=>{let{$head:s,empty:l}=n.selection,o=s;if(!l)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):s.parentOffset>0)return!1;o=bp(s)}let c=o&&o.nodeBefore;return!c||!Se.isSelectable(c)?!1:(e&&e(n.tr.setSelection(Se.create(n.doc,o.pos-c.nodeSize)).scrollIntoView()),!0)};function bp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function j1(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const R1=(n,e,t)=>{let s=j1(n,t);if(!s)return!1;let l=xp(s);if(!l)return!1;let o=l.nodeAfter;if(H1(n,l,e,1))return!0;if(s.parent.content.size==0&&(rl(o,"start")||Se.isSelectable(o))){let c=pu(n.doc,s.before(),s.after(),oe.empty);if(c&&c.slice.size<c.to-c.from){if(e){let f=n.tr.step(c);f.setSelection(rl(o,"start")?Le.findFrom(f.doc.resolve(f.mapping.map(l.pos)),1):Se.create(f.doc,f.mapping.map(l.pos))),e(f.scrollIntoView())}return!0}}return o.isAtom&&l.depth==s.depth-1?(e&&e(n.tr.delete(l.pos,l.pos+o.nodeSize).scrollIntoView()),!0):!1},z1=(n,e,t)=>{let{$head:s,empty:l}=n.selection,o=s;if(!l)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):s.parentOffset<s.parent.content.size)return!1;o=xp(s)}let c=o&&o.nodeAfter;return!c||!Se.isSelectable(c)?!1:(e&&e(n.tr.setSelection(Se.create(n.doc,o.pos)).scrollIntoView()),!0)};function xp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const SC=(n,e)=>{let t=n.selection,s=t instanceof Se,l;if(s){if(t.node.isTextblock||!vs(n.doc,t.from))return!1;l=t.from}else if(l=hu(n.doc,t.from,-1),l==null)return!1;if(e){let o=n.tr.join(l);s&&o.setSelection(Se.create(o.doc,l-n.doc.resolve(l).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},kC=(n,e)=>{let t=n.selection,s;if(t instanceof Se){if(t.node.isTextblock||!vs(n.doc,t.to))return!1;s=t.to}else if(s=hu(n.doc,t.to,1),s==null)return!1;return e&&e(n.tr.join(s).scrollIntoView()),!0},TC=(n,e)=>{let{$from:t,$to:s}=n.selection,l=t.blockRange(s),o=l&&cl(l);return o==null?!1:(e&&e(n.tr.lift(l,o).scrollIntoView()),!0)},L1=(n,e)=>{let{$head:t,$anchor:s}=n.selection;return!t.parent.type.spec.code||!t.sameParent(s)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function vp(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const EC=(n,e)=>{let{$head:t,$anchor:s}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(s))return!1;let l=t.node(-1),o=t.indexAfter(-1),c=vp(l.contentMatchAt(o));if(!c||!l.canReplaceWith(o,o,c))return!1;if(e){let f=t.after(),d=n.tr.replaceWith(f,f,c.createAndFill());d.setSelection(Le.near(d.doc.resolve(f),1)),e(d.scrollIntoView())}return!0},_1=(n,e)=>{let t=n.selection,{$from:s,$to:l}=t;if(t instanceof Sn||s.parent.inlineContent||l.parent.inlineContent)return!1;let o=vp(l.parent.contentMatchAt(l.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let c=(!s.parentOffset&&l.index()<l.parent.childCount?s:l).pos,f=n.tr.insert(c,o.createAndFill());f.setSelection(Ce.create(f.doc,c+1)),e(f.scrollIntoView())}return!0},B1=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(wr(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let s=t.blockRange(),l=s&&cl(s);return l==null?!1:(e&&e(n.tr.lift(s,l).scrollIntoView()),!0)};function CC(n){return(e,t)=>{let{$from:s,$to:l}=e.selection;if(e.selection instanceof Se&&e.selection.node.isBlock)return!s.parentOffset||!wr(e.doc,s.pos)?!1:(t&&t(e.tr.split(s.pos).scrollIntoView()),!0);if(!s.depth)return!1;let o=[],c,f,d=!1,p=!1;for(let v=s.depth;;v--)if(s.node(v).isBlock){d=s.end(v)==s.pos+(s.depth-v),p=s.start(v)==s.pos-(s.depth-v),f=vp(s.node(v-1).contentMatchAt(s.indexAfter(v-1))),o.unshift(d&&f?{type:f}:null),c=v;break}else{if(v==1)return!1;o.unshift(null)}let g=e.tr;(e.selection instanceof Ce||e.selection instanceof Sn)&&g.deleteSelection();let y=g.mapping.map(s.pos),x=wr(g.doc,y,o.length,o);if(x||(o[0]=f?{type:f}:null,x=wr(g.doc,y,o.length,o)),!x)return!1;if(g.split(y,o.length,o),!d&&p&&s.node(c).type!=f){let v=g.mapping.map(s.before(c)),k=g.doc.resolve(v);f&&s.node(c-1).canReplaceWith(k.index(),k.index()+1,f)&&g.setNodeMarkup(g.mapping.map(s.before(c)),f)}return t&&t(g.scrollIntoView()),!0}}const MC=CC(),wC=(n,e)=>{let{$from:t,to:s}=n.selection,l,o=t.sharedDepth(s);return o==0?!1:(l=t.before(o),e&&e(n.tr.setSelection(Se.create(n.doc,l))),!0)};function NC(n,e,t){let s=e.nodeBefore,l=e.nodeAfter,o=e.index();return!s||!l||!s.type.compatibleContent(l.type)?!1:!s.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-s.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(l.isTextblock||vs(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function H1(n,e,t,s){let l=e.nodeBefore,o=e.nodeAfter,c,f,d=l.type.spec.isolating||o.type.spec.isolating;if(!d&&NC(n,e,t))return!0;let p=!d&&e.parent.canReplace(e.index(),e.index()+1);if(p&&(c=(f=l.contentMatchAt(l.childCount)).findWrapping(o.type))&&f.matchType(c[0]||o.type).validEnd){if(t){let v=e.pos+o.nodeSize,k=W.empty;for(let M=c.length-1;M>=0;M--)k=W.from(c[M].create(null,k));k=W.from(l.copy(k));let E=n.tr.step(new zt(e.pos-1,v,e.pos,v,new oe(k,1,0),c.length,!0)),C=E.doc.resolve(v+2*c.length);C.nodeAfter&&C.nodeAfter.type==l.type&&vs(E.doc,C.pos)&&E.join(C.pos),t(E.scrollIntoView())}return!0}let g=o.type.spec.isolating||s>0&&d?null:Le.findFrom(e,1),y=g&&g.$from.blockRange(g.$to),x=y&&cl(y);if(x!=null&&x>=e.depth)return t&&t(n.tr.lift(y,x).scrollIntoView()),!0;if(p&&rl(o,"start",!0)&&rl(l,"end")){let v=l,k=[];for(;k.push(v),!v.isTextblock;)v=v.lastChild;let E=o,C=1;for(;!E.isTextblock;E=E.firstChild)C++;if(v.canReplace(v.childCount,v.childCount,E.content)){if(t){let M=W.empty;for(let $=k.length-1;$>=0;$--)M=W.from(k[$].copy(M));let I=n.tr.step(new zt(e.pos-k.length,e.pos+o.nodeSize,e.pos+C,e.pos+o.nodeSize-C,new oe(M,k.length,0),0,!0));t(I.scrollIntoView())}return!0}}return!1}function U1(n){return function(e,t){let s=e.selection,l=n<0?s.$from:s.$to,o=l.depth;for(;l.node(o).isInline;){if(!o)return!1;o--}return l.node(o).isTextblock?(t&&t(e.tr.setSelection(Ce.create(e.doc,n<0?l.start(o):l.end(o)))),!0):!1}}const AC=U1(-1),OC=U1(1);function DC(n,e=null){return function(t,s){let{$from:l,$to:o}=t.selection,c=l.blockRange(o),f=c&&mp(c,n,e);return f?(s&&s(t.tr.wrap(c,f).scrollIntoView()),!0):!1}}function Ab(n,e=null){return function(t,s){let l=!1;for(let o=0;o<t.selection.ranges.length&&!l;o++){let{$from:{pos:c},$to:{pos:f}}=t.selection.ranges[o];t.doc.nodesBetween(c,f,(d,p)=>{if(l)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)l=!0;else{let g=t.doc.resolve(p),y=g.index();l=g.parent.canReplaceWith(y,y+1,n)}})}if(!l)return!1;if(s){let o=t.tr;for(let c=0;c<t.selection.ranges.length;c++){let{$from:{pos:f},$to:{pos:d}}=t.selection.ranges[c];o.setBlockType(f,d,n,e)}s(o.scrollIntoView())}return!0}}function Sp(...n){return function(e,t,s){for(let l=0;l<n.length;l++)if(n[l](e,t,s))return!0;return!1}}Sp(yp,A1,D1);Sp(yp,R1,z1);Sp(L1,_1,B1,MC);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function jC(n,e=null){return function(t,s){let{$from:l,$to:o}=t.selection,c=l.blockRange(o);if(!c)return!1;let f=s?t.tr:null;return RC(f,c,n,e)?(s&&s(f.scrollIntoView()),!0):!1}}function RC(n,e,t,s=null){let l=!1,o=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=c.resolve(e.start-2);o=new Cc(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Cc(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),l=!0}let f=mp(o,t,s,e);return f?(n&&zC(n,e,f,l,t),!0):!1}function zC(n,e,t,s,l){let o=W.empty;for(let g=t.length-1;g>=0;g--)o=W.from(t[g].type.create(t[g].attrs,o));n.step(new zt(e.start-(s?2:0),e.end,e.start,e.end,new oe(o,0,0),t.length,!0));let c=0;for(let g=0;g<t.length;g++)t[g].type==l&&(c=g+1);let f=t.length-c,d=e.start+t.length-(s?2:0),p=e.parent;for(let g=e.startIndex,y=e.endIndex,x=!0;g<y;g++,x=!1)!x&&wr(n.doc,d,f)&&(n.split(d,f),d+=2*f),d+=p.child(g).nodeSize;return n}function LC(n){return function(e,t){let{$from:s,$to:l}=e.selection,o=s.blockRange(l,c=>c.childCount>0&&c.firstChild.type==n);return o?t?s.node(o.depth-1).type==n?_C(e,t,n,o):BC(e,t,o):!0:!1}}function _C(n,e,t,s){let l=n.tr,o=s.end,c=s.$to.end(s.depth);o<c&&(l.step(new zt(o-1,c,o,c,new oe(W.from(t.create(null,s.parent.copy())),1,0),1,!0)),s=new Cc(l.doc.resolve(s.$from.pos),l.doc.resolve(c),s.depth));const f=cl(s);if(f==null)return!1;l.lift(s,f);let d=l.doc.resolve(l.mapping.map(o,-1)-1);return vs(l.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&l.join(d.pos),e(l.scrollIntoView()),!0}function BC(n,e,t){let s=n.tr,l=t.parent;for(let v=t.end,k=t.endIndex-1,E=t.startIndex;k>E;k--)v-=l.child(k).nodeSize,s.delete(v-1,v+1);let o=s.doc.resolve(t.start),c=o.nodeAfter;if(s.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let f=t.startIndex==0,d=t.endIndex==l.childCount,p=o.node(-1),g=o.index(-1);if(!p.canReplace(g+(f?0:1),g+1,c.content.append(d?W.empty:W.from(l))))return!1;let y=o.pos,x=y+c.nodeSize;return s.step(new zt(y-(f?1:0),x+(d?1:0),y+1,x-1,new oe((f?W.empty:W.from(l.copy(W.empty))).append(d?W.empty:W.from(l.copy(W.empty))),f?0:1,d?0:1),f?0:1)),e(s.scrollIntoView()),!0}function HC(n){return function(e,t){let{$from:s,$to:l}=e.selection,o=s.blockRange(l,p=>p.childCount>0&&p.firstChild.type==n);if(!o)return!1;let c=o.startIndex;if(c==0)return!1;let f=o.parent,d=f.child(c-1);if(d.type!=n)return!1;if(t){let p=d.lastChild&&d.lastChild.type==f.type,g=W.from(p?n.create():null),y=new oe(W.from(n.create(null,W.from(f.type.create(null,g)))),p?3:1,0),x=o.start,v=o.end;t(e.tr.step(new zt(x-(p?3:1),v,x,v,y,1,!0)).scrollIntoView())}return!0}}const Vt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},sl=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Hh=null;const Cr=function(n,e,t){let s=Hh||(Hh=document.createRange());return s.setEnd(n,t??n.nodeValue.length),s.setStart(n,e||0),s},UC=function(){Hh=null},ni=function(n,e,t,s){return t&&(Ob(n,e,t,s,-1)||Ob(n,e,t,s,1))},IC=/^(img|br|input|textarea|hr)$/i;function Ob(n,e,t,s,l){for(var o;;){if(n==t&&e==s)return!0;if(e==(l<0?0:Bn(n))){let c=n.parentNode;if(!c||c.nodeType!=1||Bo(n)||IC.test(n.nodeName)||n.contentEditable=="false")return!1;e=Vt(n)+(l<0?0:1),n=c}else if(n.nodeType==1){let c=n.childNodes[e+(l<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((o=c.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=l;else return!1;else n=c,e=l<0?Bn(n):0}else return!1}}function Bn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function qC(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Bn(n)}else if(n.parentNode&&!Bo(n))e=Vt(n),n=n.parentNode;else return null}}function VC(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Bo(n))e=Vt(n)+1,n=n.parentNode;else return null}}function $C(n,e,t){for(let s=e==0,l=e==Bn(n);s||l;){if(n==t)return!0;let o=Vt(n);if(n=n.parentNode,!n)return!1;s=s&&o==0,l=l&&o==Bn(n)}}function Bo(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const gu=function(n){return n.focusNode&&ni(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Gs(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function GC(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function YC(n,e,t){if(n.caretPositionFromPoint)try{let s=n.caretPositionFromPoint(e,t);if(s)return{node:s.offsetNode,offset:Math.min(Bn(s.offsetNode),s.offset)}}catch{}if(n.caretRangeFromPoint){let s=n.caretRangeFromPoint(e,t);if(s)return{node:s.startContainer,offset:Math.min(Bn(s.startContainer),s.startOffset)}}}const tr=typeof navigator<"u"?navigator:null,Db=typeof document<"u"?document:null,Ss=tr&&tr.userAgent||"",Uh=/Edge\/(\d+)/.exec(Ss),I1=/MSIE \d/.exec(Ss),Ih=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ss),un=!!(I1||Ih||Uh),ms=I1?document.documentMode:Ih?+Ih[1]:Uh?+Uh[1]:0,Hn=!un&&/gecko\/(\d+)/i.test(Ss);Hn&&+(/Firefox\/(\d+)/.exec(Ss)||[0,0])[1];const qh=!un&&/Chrome\/(\d+)/.exec(Ss),Gt=!!qh,q1=qh?+qh[1]:0,Jt=!un&&!!tr&&/Apple Computer/.test(tr.vendor),il=Jt&&(/Mobile\/\w+/.test(Ss)||!!tr&&tr.maxTouchPoints>2),_n=il||(tr?/Mac/.test(tr.platform):!1),V1=tr?/Win/.test(tr.platform):!1,Mr=/Android \d/.test(Ss),Ho=!!Db&&"webkitFontSmoothing"in Db.documentElement.style,KC=Ho?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function PC(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Sr(n,e){return typeof n=="number"?n:n[e]}function JC(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,s=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*s}}function jb(n,e,t){let s=n.someProp("scrollThreshold")||0,l=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let c=t||n.dom;c;){if(c.nodeType!=1){c=sl(c);continue}let f=c,d=f==o.body,p=d?PC(o):JC(f),g=0,y=0;if(e.top<p.top+Sr(s,"top")?y=-(p.top-e.top+Sr(l,"top")):e.bottom>p.bottom-Sr(s,"bottom")&&(y=e.bottom-e.top>p.bottom-p.top?e.top+Sr(l,"top")-p.top:e.bottom-p.bottom+Sr(l,"bottom")),e.left<p.left+Sr(s,"left")?g=-(p.left-e.left+Sr(l,"left")):e.right>p.right-Sr(s,"right")&&(g=e.right-p.right+Sr(l,"right")),g||y)if(d)o.defaultView.scrollBy(g,y);else{let v=f.scrollLeft,k=f.scrollTop;y&&(f.scrollTop+=y),g&&(f.scrollLeft+=g);let E=f.scrollLeft-v,C=f.scrollTop-k;e={left:e.left-E,top:e.top-C,right:e.right-E,bottom:e.bottom-C}}let x=d?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(x))break;c=x=="absolute"?c.offsetParent:sl(c)}}function FC(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),s,l;for(let o=(e.left+e.right)/2,c=t+1;c<Math.min(innerHeight,e.bottom);c+=5){let f=n.root.elementFromPoint(o,c);if(!f||f==n.dom||!n.dom.contains(f))continue;let d=f.getBoundingClientRect();if(d.top>=t-20){s=f,l=d.top;break}}return{refDOM:s,refTop:l,stack:$1(n.dom)}}function $1(n){let e=[],t=n.ownerDocument;for(let s=n;s&&(e.push({dom:s,top:s.scrollTop,left:s.scrollLeft}),n!=t);s=sl(s));return e}function XC({refDOM:n,refTop:e,stack:t}){let s=n?n.getBoundingClientRect().top:0;G1(t,s==0?0:s-e)}function G1(n,e){for(let t=0;t<n.length;t++){let{dom:s,top:l,left:o}=n[t];s.scrollTop!=l+e&&(s.scrollTop=l+e),s.scrollLeft!=o&&(s.scrollLeft=o)}}let Ki=null;function QC(n){if(n.setActive)return n.setActive();if(Ki)return n.focus(Ki);let e=$1(n);n.focus(Ki==null?{get preventScroll(){return Ki={preventScroll:!0},!0}}:void 0),Ki||(Ki=!1,G1(e,0))}function Y1(n,e){let t,s=2e8,l,o=0,c=e.top,f=e.top,d,p;for(let g=n.firstChild,y=0;g;g=g.nextSibling,y++){let x;if(g.nodeType==1)x=g.getClientRects();else if(g.nodeType==3)x=Cr(g).getClientRects();else continue;for(let v=0;v<x.length;v++){let k=x[v];if(k.top<=c&&k.bottom>=f){c=Math.max(k.bottom,c),f=Math.min(k.top,f);let E=k.left>e.left?k.left-e.left:k.right<e.left?e.left-k.right:0;if(E<s){t=g,s=E,l=E&&t.nodeType==3?{left:k.right<e.left?k.right:k.left,top:e.top}:e,g.nodeType==1&&E&&(o=y+(e.left>=(k.left+k.right)/2?1:0));continue}}else k.top>e.top&&!d&&k.left<=e.left&&k.right>=e.left&&(d=g,p={left:Math.max(k.left,Math.min(k.right,e.left)),top:k.top});!t&&(e.left>=k.right&&e.top>=k.top||e.left>=k.left&&e.top>=k.bottom)&&(o=y+1)}}return!t&&d&&(t=d,l=p,s=0),t&&t.nodeType==3?ZC(t,l):!t||s&&t.nodeType==1?{node:n,offset:o}:Y1(t,l)}function ZC(n,e){let t=n.nodeValue.length,s=document.createRange(),l;for(let o=0;o<t;o++){s.setEnd(n,o+1),s.setStart(n,o);let c=ss(s,1);if(c.top!=c.bottom&&kp(e,c)){l={node:n,offset:o+(e.left>=(c.left+c.right)/2?1:0)};break}}return s.detach(),l||{node:n,offset:0}}function kp(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function WC(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function eM(n,e,t){let{node:s,offset:l}=Y1(e,t),o=-1;if(s.nodeType==1&&!s.firstChild){let c=s.getBoundingClientRect();o=c.left!=c.right&&t.left>(c.left+c.right)/2?1:-1}return n.docView.posFromDOM(s,l,o)}function tM(n,e,t,s){let l=-1;for(let o=e,c=!1;o!=n.dom;){let f=n.docView.nearestDesc(o,!0),d;if(!f)return null;if(f.dom.nodeType==1&&(f.node.isBlock&&f.parent||!f.contentDOM)&&((d=f.dom.getBoundingClientRect()).width||d.height)&&(f.node.isBlock&&f.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(f.dom.nodeName)&&(!c&&d.left>s.left||d.top>s.top?l=f.posBefore:(!c&&d.right<s.left||d.bottom<s.top)&&(l=f.posAfter),c=!0),!f.contentDOM&&l<0&&!f.node.isText))return(f.node.isBlock?s.top<(d.top+d.bottom)/2:s.left<(d.left+d.right)/2)?f.posBefore:f.posAfter;o=f.dom.parentNode}return l>-1?l:n.docView.posFromDOM(e,t,-1)}function K1(n,e,t){let s=n.childNodes.length;if(s&&t.top<t.bottom)for(let l=Math.max(0,Math.min(s-1,Math.floor(s*(e.top-t.top)/(t.bottom-t.top))-2)),o=l;;){let c=n.childNodes[o];if(c.nodeType==1){let f=c.getClientRects();for(let d=0;d<f.length;d++){let p=f[d];if(kp(e,p))return K1(c,e,p)}}if((o=(o+1)%s)==l)break}return n}function nM(n,e){let t=n.dom.ownerDocument,s,l=0,o=YC(t,e.left,e.top);o&&({node:s,offset:l}=o);let c=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),f;if(!c||!n.dom.contains(c.nodeType!=1?c.parentNode:c)){let p=n.dom.getBoundingClientRect();if(!kp(e,p)||(c=K1(n.dom,e,p),!c))return null}if(Jt)for(let p=c;s&&p;p=sl(p))p.draggable&&(s=void 0);if(c=WC(c,e),s){if(Hn&&s.nodeType==1&&(l=Math.min(l,s.childNodes.length),l<s.childNodes.length)){let g=s.childNodes[l],y;g.nodeName=="IMG"&&(y=g.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&l++}let p;Ho&&l&&s.nodeType==1&&(p=s.childNodes[l-1]).nodeType==1&&p.contentEditable=="false"&&p.getBoundingClientRect().top>=e.top&&l--,s==n.dom&&l==s.childNodes.length-1&&s.lastChild.nodeType==1&&e.top>s.lastChild.getBoundingClientRect().bottom?f=n.state.doc.content.size:(l==0||s.nodeType!=1||s.childNodes[l-1].nodeName!="BR")&&(f=tM(n,s,l,e))}f==null&&(f=eM(n,c,e));let d=n.docView.nearestDesc(c,!0);return{pos:f,inside:d?d.posAtStart-d.border:-1}}function Rb(n){return n.top<n.bottom||n.left<n.right}function ss(n,e){let t=n.getClientRects();if(t.length){let s=t[e<0?0:t.length-1];if(Rb(s))return s}return Array.prototype.find.call(t,Rb)||n.getBoundingClientRect()}const rM=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function P1(n,e,t){let{node:s,offset:l,atom:o}=n.docView.domFromPos(e,t<0?-1:1),c=Ho||Hn;if(s.nodeType==3)if(c&&(rM.test(s.nodeValue)||(t<0?!l:l==s.nodeValue.length))){let d=ss(Cr(s,l,l),t);if(Hn&&l&&/\s/.test(s.nodeValue[l-1])&&l<s.nodeValue.length){let p=ss(Cr(s,l-1,l-1),-1);if(p.top==d.top){let g=ss(Cr(s,l,l+1),-1);if(g.top!=d.top)return so(g,g.left<p.left)}}return d}else{let d=l,p=l,g=t<0?1:-1;return t<0&&!l?(p++,g=-1):t>=0&&l==s.nodeValue.length?(d--,g=1):t<0?d--:p++,so(ss(Cr(s,d,p),g),g<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&l&&(t<0||l==Bn(s))){let d=s.childNodes[l-1];if(d.nodeType==1)return ah(d.getBoundingClientRect(),!1)}if(o==null&&l<Bn(s)){let d=s.childNodes[l];if(d.nodeType==1)return ah(d.getBoundingClientRect(),!0)}return ah(s.getBoundingClientRect(),t>=0)}if(o==null&&l&&(t<0||l==Bn(s))){let d=s.childNodes[l-1],p=d.nodeType==3?Cr(d,Bn(d)-(c?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(p)return so(ss(p,1),!1)}if(o==null&&l<Bn(s)){let d=s.childNodes[l];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let p=d?d.nodeType==3?Cr(d,0,c?0:1):d.nodeType==1?d:null:null;if(p)return so(ss(p,-1),!0)}return so(ss(s.nodeType==3?Cr(s):s,-t),t>=0)}function so(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function ah(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function J1(n,e,t){let s=n.state,l=n.root.activeElement;s!=e&&n.updateState(e),l!=n.dom&&n.focus();try{return t()}finally{s!=e&&n.updateState(s),l!=n.dom&&l&&l.focus()}}function sM(n,e,t){let s=e.selection,l=t=="up"?s.$from:s.$to;return J1(n,e,()=>{let{node:o}=n.docView.domFromPos(l.pos,t=="up"?-1:1);for(;;){let f=n.docView.nearestDesc(o,!0);if(!f)break;if(f.node.isBlock){o=f.contentDOM||f.dom;break}o=f.dom.parentNode}let c=P1(n,l.pos,1);for(let f=o.firstChild;f;f=f.nextSibling){let d;if(f.nodeType==1)d=f.getClientRects();else if(f.nodeType==3)d=Cr(f,0,f.nodeValue.length).getClientRects();else continue;for(let p=0;p<d.length;p++){let g=d[p];if(g.bottom>g.top+1&&(t=="up"?c.top-g.top>(g.bottom-c.top)*2:g.bottom-c.bottom>(c.bottom-g.top)*2))return!1}}return!0})}const iM=/[\u0590-\u08ac]/;function lM(n,e,t){let{$head:s}=e.selection;if(!s.parent.isTextblock)return!1;let l=s.parentOffset,o=!l,c=l==s.parent.content.size,f=n.domSelection();return f?!iM.test(s.parent.textContent)||!f.modify?t=="left"||t=="backward"?o:c:J1(n,e,()=>{let{focusNode:d,focusOffset:p,anchorNode:g,anchorOffset:y}=n.domSelectionRange(),x=f.caretBidiLevel;f.modify("move",t,"character");let v=s.depth?n.docView.domAfterPos(s.before()):n.dom,{focusNode:k,focusOffset:E}=n.domSelectionRange(),C=k&&!v.contains(k.nodeType==1?k:k.parentNode)||d==k&&p==E;try{f.collapse(g,y),d&&(d!=g||p!=y)&&f.extend&&f.extend(d,p)}catch{}return x!=null&&(f.caretBidiLevel=x),C}):s.pos==s.start()||s.pos==s.end()}let zb=null,Lb=null,_b=!1;function oM(n,e,t){return zb==e&&Lb==t?_b:(zb=e,Lb=t,_b=t=="up"||t=="down"?sM(n,e,t):lM(n,e,t))}const Un=0,Bb=1,Ys=2,nr=3;class Uo{constructor(e,t,s,l){this.parent=e,this.children=t,this.dom=s,this.contentDOM=l,this.dirty=Un,s.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,s){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,s=this.posAtStart;;t++){let l=this.children[t];if(l==e)return s;s+=l.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,s){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(s<0){let o,c;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((c=o.pmViewDesc)&&c.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(c)+c.size:this.posAtStart}else{let o,c;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((c=o.pmViewDesc)&&c.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(c):this.posAtEnd}let l;if(e==this.dom&&this.contentDOM)l=t>Vt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))l=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){l=!1;break}if(o.previousSibling)break}if(l==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){l=!0;break}if(o.nextSibling)break}}return l??s>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let s=!0,l=e;l;l=l.parentNode){let o=this.getDesc(l),c;if(o&&(!t||o.node))if(s&&(c=o.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))s=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let s=t;s;s=s.parent)if(s==this)return t}posFromDOM(e,t,s){for(let l=e;l;l=l.parentNode){let o=this.getDesc(l);if(o)return o.localPosFromDOM(e,t,s)}return-1}descAt(e){for(let t=0,s=0;t<this.children.length;t++){let l=this.children[t],o=s+l.size;if(s==e&&o!=s){for(;!l.border&&l.children.length;)for(let c=0;c<l.children.length;c++){let f=l.children[c];if(f.size){l=f;break}}return l}if(e<o)return l.descAt(e-s-l.border);s=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let s=0,l=0;for(let o=0;s<this.children.length;s++){let c=this.children[s],f=o+c.size;if(f>e||c instanceof X1){l=e-o;break}o=f}if(l)return this.children[s].domFromPos(l-this.children[s].border,t);for(let o;s&&!(o=this.children[s-1]).size&&o instanceof F1&&o.side>=0;s--);if(t<=0){let o,c=!0;for(;o=s?this.children[s-1]:null,!(!o||o.dom.parentNode==this.contentDOM);s--,c=!1);return o&&t&&c&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?Vt(o.dom)+1:0}}else{let o,c=!0;for(;o=s<this.children.length?this.children[s]:null,!(!o||o.dom.parentNode==this.contentDOM);s++,c=!1);return o&&c&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?Vt(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,s=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let l=-1,o=-1;for(let c=s,f=0;;f++){let d=this.children[f],p=c+d.size;if(l==-1&&e<=p){let g=c+d.border;if(e>=g&&t<=p-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,g);e=c;for(let y=f;y>0;y--){let x=this.children[y-1];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(1)){l=Vt(x.dom)+1;break}e-=x.size}l==-1&&(l=0)}if(l>-1&&(p>t||f==this.children.length-1)){t=p;for(let g=f+1;g<this.children.length;g++){let y=this.children[g];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){o=Vt(y.dom);break}t+=y.size}o==-1&&(o=this.contentDOM.childNodes.length);break}c=p}return{node:this.contentDOM,from:e,to:t,fromOffset:l,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:s}=this.domFromPos(e,0);if(t.nodeType!=1||s==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[s]}setSelection(e,t,s,l=!1){let o=Math.min(e,t),c=Math.max(e,t);for(let v=0,k=0;v<this.children.length;v++){let E=this.children[v],C=k+E.size;if(o>k&&c<C)return E.setSelection(e-k-E.border,t-k-E.border,s,l);k=C}let f=this.domFromPos(e,e?-1:1),d=t==e?f:this.domFromPos(t,t?-1:1),p=s.root.getSelection(),g=s.domSelectionRange(),y=!1;if((Hn||Jt)&&e==t){let{node:v,offset:k}=f;if(v.nodeType==3){if(y=!!(k&&v.nodeValue[k-1]==`
`),y&&k==v.nodeValue.length)for(let E=v,C;E;E=E.parentNode){if(C=E.nextSibling){C.nodeName=="BR"&&(f=d={node:C.parentNode,offset:Vt(C)+1});break}let M=E.pmViewDesc;if(M&&M.node&&M.node.isBlock)break}}else{let E=v.childNodes[k-1];y=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(Hn&&g.focusNode&&g.focusNode!=d.node&&g.focusNode.nodeType==1){let v=g.focusNode.childNodes[g.focusOffset];v&&v.contentEditable=="false"&&(l=!0)}if(!(l||y&&Jt)&&ni(f.node,f.offset,g.anchorNode,g.anchorOffset)&&ni(d.node,d.offset,g.focusNode,g.focusOffset))return;let x=!1;if((p.extend||e==t)&&!(y&&Hn)){p.collapse(f.node,f.offset);try{e!=t&&p.extend(d.node,d.offset),x=!0}catch{}}if(!x){if(e>t){let k=f;f=d,d=k}let v=document.createRange();v.setEnd(d.node,d.offset),v.setStart(f.node,f.offset),p.removeAllRanges(),p.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let s=0,l=0;l<this.children.length;l++){let o=this.children[l],c=s+o.size;if(s==c?e<=c&&t>=s:e<c&&t>s){let f=s+o.border,d=c-o.border;if(e>=f&&t<=d){this.dirty=e==s||t==c?Ys:Bb,e==f&&t==d&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=nr:o.markDirty(e-f,t-f);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Ys:nr}s=c}this.dirty=Ys}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let s=e==1?Ys:Bb;t.dirty<s&&(t.dirty=s)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class F1 extends Uo{constructor(e,t,s,l){let o,c=t.type.toDOM;if(typeof c=="function"&&(c=c(s,()=>{if(!o)return l;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(c.nodeType!=1){let f=document.createElement("span");f.appendChild(c),c=f}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==Un&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class aM extends Uo{constructor(e,t,s,l){super(e,[],t,null),this.textDOM=s,this.text=l}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ri extends Uo{constructor(e,t,s,l,o){super(e,[],s,l),this.mark=t,this.spec=o}static create(e,t,s,l){let o=l.nodeViews[t.type.name],c=o&&o(t,l,s);return(!c||!c.dom)&&(c=ii.renderSpec(document,t.type.spec.toDOM(t,s),null,t.attrs)),new ri(e,t,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&nr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=nr&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Un){let s=this.parent;for(;!s.node;)s=s.parent;s.dirty<this.dirty&&(s.dirty=this.dirty),this.dirty=Un}}slice(e,t,s){let l=ri.create(this.parent,this.mark,!0,s),o=this.children,c=this.size;t<c&&(o=$h(o,t,c,s)),e>0&&(o=$h(o,0,e,s));for(let f=0;f<o.length;f++)o[f].parent=l;return l.children=o,l}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class gs extends Uo{constructor(e,t,s,l,o,c,f,d,p){super(e,[],o,c),this.node=t,this.outerDeco=s,this.innerDeco=l,this.nodeDOM=f}static create(e,t,s,l,o,c){let f=o.nodeViews[t.type.name],d,p=f&&f(t,o,()=>{if(!d)return c;if(d.parent)return d.parent.posBeforeChild(d)},s,l),g=p&&p.dom,y=p&&p.contentDOM;if(t.isText){if(!g)g=document.createTextNode(t.text);else if(g.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else g||({dom:g,contentDOM:y}=ii.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&g.nodeName!="BR"&&(g.hasAttribute("contenteditable")||(g.contentEditable="false"),t.type.spec.draggable&&(g.draggable=!0));let x=g;return g=W1(g,s,t),p?d=new cM(e,t,s,l,g,y||null,x,p,o,c+1):t.isText?new yu(e,t,s,l,g,x,o):new gs(e,t,s,l,g,y||null,x,o,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let s=this.children[t];if(this.dom.contains(s.dom.parentNode)){e.contentElement=s.dom.parentNode;break}}e.contentElement||(e.getContent=()=>W.empty)}return e}matchesNode(e,t,s){return this.dirty==Un&&e.eq(this.node)&&wc(t,this.outerDeco)&&s.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let s=this.node.inlineContent,l=t,o=e.composing?this.localCompositionInfo(e,t):null,c=o&&o.pos>-1?o:null,f=o&&o.pos<0,d=new fM(this,c&&c.node,e);pM(this.node,this.innerDeco,(p,g,y)=>{p.spec.marks?d.syncToMarks(p.spec.marks,s,e,g):p.type.side>=0&&!y&&d.syncToMarks(g==this.node.childCount?lt.none:this.node.child(g).marks,s,e,g),d.placeWidget(p,e,l)},(p,g,y,x)=>{d.syncToMarks(p.marks,s,e,x);let v;d.findNodeMatch(p,g,y,x)||f&&e.state.selection.from>l&&e.state.selection.to<l+p.nodeSize&&(v=d.findIndexWithChild(o.node))>-1&&d.updateNodeAt(p,g,y,v,e)||d.updateNextNode(p,g,y,e,x,l)||d.addNode(p,g,y,e,l),l+=p.nodeSize}),d.syncToMarks([],s,e,0),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==Ys)&&(c&&this.protectLocalComposition(e,c),Q1(this.contentDOM,this.children,e),il&&mM(this.dom))}localCompositionInfo(e,t){let{from:s,to:l}=e.state.selection;if(!(e.state.selection instanceof Ce)||s<t||l>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let c=o.nodeValue,f=gM(this.node.content,c,s-t,l-t);return f<0?null:{node:o,pos:f,text:c}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:s,text:l}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let c=new aM(this,o,t,l);e.input.compositionNodes.push(c),this.children=$h(this.children,s,s+l.length,e,c)}update(e,t,s,l){return this.dirty==nr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,s,l),!0)}updateInner(e,t,s,l){this.updateOuterDeco(t),this.node=e,this.innerDeco=s,this.contentDOM&&this.updateChildren(l,this.posAtStart),this.dirty=Un}updateOuterDeco(e){if(wc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,s=this.dom;this.dom=Z1(this.dom,this.nodeDOM,Vh(this.outerDeco,this.node,t),Vh(e,this.node,t)),this.dom!=s&&(s.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Hb(n,e,t,s,l){W1(s,e,n);let o=new gs(void 0,n,e,t,s,s,s,l,0);return o.contentDOM&&o.updateChildren(l,0),o}class yu extends gs{constructor(e,t,s,l,o,c,f){super(e,t,s,l,o,null,c,f,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,s,l){return this.dirty==nr||this.dirty!=Un&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Un||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,l.trackWrites==this.nodeDOM&&(l.trackWrites=null)),this.node=e,this.dirty=Un,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,s){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,s)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,s){let l=this.node.cut(e,t),o=document.createTextNode(l.text);return new yu(this.parent,l,this.outerDeco,this.innerDeco,o,o,s)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=nr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class X1 extends Uo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Un&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class cM extends gs{constructor(e,t,s,l,o,c,f,d,p,g){super(e,t,s,l,o,c,f,p,g),this.spec=d}update(e,t,s,l){if(this.dirty==nr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,s);return o&&this.updateInner(e,t,s,l),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,s,l)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,s,l){this.spec.setSelection?this.spec.setSelection(e,t,s.root):super.setSelection(e,t,s,l)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Q1(n,e,t){let s=n.firstChild,l=!1;for(let o=0;o<e.length;o++){let c=e[o],f=c.dom;if(f.parentNode==n){for(;f!=s;)s=Ub(s),l=!0;s=s.nextSibling}else l=!0,n.insertBefore(f,s);if(c instanceof ri){let d=s?s.previousSibling:n.lastChild;Q1(c.contentDOM,c.children,t),s=d?d.nextSibling:n.firstChild}}for(;s;)s=Ub(s),l=!0;l&&t.trackWrites==n&&(t.trackWrites=null)}const go=function(n){n&&(this.nodeName=n)};go.prototype=Object.create(null);const Ks=[new go];function Vh(n,e,t){if(n.length==0)return Ks;let s=t?Ks[0]:new go,l=[s];for(let o=0;o<n.length;o++){let c=n[o].type.attrs;if(c){c.nodeName&&l.push(s=new go(c.nodeName));for(let f in c){let d=c[f];d!=null&&(t&&l.length==1&&l.push(s=new go(e.isInline?"span":"div")),f=="class"?s.class=(s.class?s.class+" ":"")+d:f=="style"?s.style=(s.style?s.style+";":"")+d:f!="nodeName"&&(s[f]=d))}}}return l}function Z1(n,e,t,s){if(t==Ks&&s==Ks)return e;let l=e;for(let o=0;o<s.length;o++){let c=s[o],f=t[o];if(o){let d;f&&f.nodeName==c.nodeName&&l!=n&&(d=l.parentNode)&&d.nodeName.toLowerCase()==c.nodeName||(d=document.createElement(c.nodeName),d.pmIsDeco=!0,d.appendChild(l),f=Ks[0]),l=d}uM(l,f||Ks[0],c)}return l}function uM(n,e,t){for(let s in e)s!="class"&&s!="style"&&s!="nodeName"&&!(s in t)&&n.removeAttribute(s);for(let s in t)s!="class"&&s!="style"&&s!="nodeName"&&t[s]!=e[s]&&n.setAttribute(s,t[s]);if(e.class!=t.class){let s=e.class?e.class.split(" ").filter(Boolean):[],l=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<s.length;o++)l.indexOf(s[o])==-1&&n.classList.remove(s[o]);for(let o=0;o<l.length;o++)s.indexOf(l[o])==-1&&n.classList.add(l[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let s=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,l;for(;l=s.exec(e.style);)n.style.removeProperty(l[1])}t.style&&(n.style.cssText+=t.style)}}function W1(n,e,t){return Z1(n,n,Ks,Vh(e,t,n.nodeType!=1))}function wc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Ub(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class fM{constructor(e,t,s){this.lock=t,this.view=s,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=dM(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let s=e;s<t;s++)this.top.children[s].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,s,l){let o=0,c=this.stack.length>>1,f=Math.min(c,e.length);for(;o<f&&(o==c-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<c;)this.destroyRest(),this.top.dirty=Un,this.index=this.stack.pop(),this.top=this.stack.pop(),c--;for(;c<e.length;){this.stack.push(this.top,this.index+1);let d=-1,p=this.top.children.length;l<this.preMatch.index&&(p=Math.min(this.index+3,p));for(let g=this.index;g<p;g++){let y=this.top.children[g];if(y.matchesMark(e[c])&&!this.isLocked(y.dom)){d=g;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let g=ri.create(this.top,e[c],t,s);this.top.children.splice(this.index,0,g),this.top=g,this.changed=!0}this.index=0,c++}}findNodeMatch(e,t,s,l){let o=-1,c;if(l>=this.preMatch.index&&(c=this.preMatch.matches[l-this.preMatch.index]).parent==this.top&&c.matchesNode(e,t,s))o=this.top.children.indexOf(c,this.index);else for(let f=this.index,d=Math.min(this.top.children.length,f+5);f<d;f++){let p=this.top.children[f];if(p.matchesNode(e,t,s)&&!this.preMatch.matched.has(p)){o=f;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,s,l,o){let c=this.top.children[l];return c.dirty==nr&&c.dom==c.contentDOM&&(c.dirty=Ys),c.update(e,t,s,o)?(this.destroyBetween(this.index,l),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let s=e.pmViewDesc;if(s){for(let l=this.index;l<this.top.children.length;l++)if(this.top.children[l]==s)return l}return-1}e=t}}updateNextNode(e,t,s,l,o,c){for(let f=this.index;f<this.top.children.length;f++){let d=this.top.children[f];if(d instanceof gs){let p=this.preMatch.matched.get(d);if(p!=null&&p!=o)return!1;let g=d.dom,y,x=this.isLocked(g)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=nr&&wc(t,d.outerDeco));if(!x&&d.update(e,t,s,l))return this.destroyBetween(this.index,f),d.dom!=g&&(this.changed=!0),this.index++,!0;if(!x&&(y=this.recreateWrapper(d,e,t,s,l,c)))return this.destroyBetween(this.index,f),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=Ys,y.updateChildren(l,c+1),y.dirty=Un),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,s,l,o,c){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!wc(s,e.outerDeco)||!l.eq(e.innerDeco))return null;let f=gs.create(this.top,t,s,l,o,c);if(f.contentDOM){f.children=e.children,e.children=[];for(let d of f.children)d.parent=f}return e.destroy(),f}addNode(e,t,s,l,o){let c=gs.create(this.top,e,t,s,l,o);c.contentDOM&&c.updateChildren(l,o+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,t,s){let l=this.index<this.top.children.length?this.top.children[this.index]:null;if(l&&l.matchesWidget(e)&&(e==l.widget||!l.widget.type.toDOM.parentNode))this.index++;else{let o=new F1(this.top,e,t,s);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ri;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof yu)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Jt||Gt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let s=document.createElement(e);e=="IMG"&&(s.className="ProseMirror-separator",s.alt=""),e=="BR"&&(s.className="ProseMirror-trailingBreak");let l=new X1(this.top,[],s,null);t!=this.top?t.children.push(l):t.children.splice(this.index++,0,l),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function dM(n,e){let t=e,s=t.children.length,l=n.childCount,o=new Map,c=[];e:for(;l>0;){let f;for(;;)if(s){let p=t.children[s-1];if(p instanceof ri)t=p,s=p.children.length;else{f=p,s--;break}}else{if(t==e)break e;s=t.parent.children.indexOf(t),t=t.parent}let d=f.node;if(d){if(d!=n.child(l-1))break;--l,o.set(f,l),c.push(f)}}return{index:l,matched:o,matches:c.reverse()}}function hM(n,e){return n.type.side-e.type.side}function pM(n,e,t,s){let l=e.locals(n),o=0;if(l.length==0){for(let p=0;p<n.childCount;p++){let g=n.child(p);s(g,l,e.forChild(o,g),p),o+=g.nodeSize}return}let c=0,f=[],d=null;for(let p=0;;){let g,y;for(;c<l.length&&l[c].to==o;){let C=l[c++];C.widget&&(g?(y||(y=[g])).push(C):g=C)}if(g)if(y){y.sort(hM);for(let C=0;C<y.length;C++)t(y[C],p,!!d)}else t(g,p,!!d);let x,v;if(d)v=-1,x=d,d=null;else if(p<n.childCount)v=p,x=n.child(p++);else break;for(let C=0;C<f.length;C++)f[C].to<=o&&f.splice(C--,1);for(;c<l.length&&l[c].from<=o&&l[c].to>o;)f.push(l[c++]);let k=o+x.nodeSize;if(x.isText){let C=k;c<l.length&&l[c].from<C&&(C=l[c].from);for(let M=0;M<f.length;M++)f[M].to<C&&(C=f[M].to);C<k&&(d=x.cut(C-o),x=x.cut(0,C-o),k=C,v=-1)}else for(;c<l.length&&l[c].to<k;)c++;let E=x.isInline&&!x.isLeaf?f.filter(C=>!C.inline):f.slice();s(x,E,e.forChild(o,x),v),o=k}}function mM(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function gM(n,e,t,s){for(let l=0,o=0;l<n.childCount&&o<=s;){let c=n.child(l++),f=o;if(o+=c.nodeSize,!c.isText)continue;let d=c.text;for(;l<n.childCount;){let p=n.child(l++);if(o+=p.nodeSize,!p.isText)break;d+=p.text}if(o>=t){if(o>=s&&d.slice(s-e.length-f,s-f)==e)return s-e.length;let p=f<s?d.lastIndexOf(e,s-f-1):-1;if(p>=0&&p+e.length+f>=t)return f+p;if(t==s&&d.length>=s+e.length-f&&d.slice(s-f,s-f+e.length)==e)return s}}return-1}function $h(n,e,t,s,l){let o=[];for(let c=0,f=0;c<n.length;c++){let d=n[c],p=f,g=f+=d.size;p>=t||g<=e?o.push(d):(p<e&&o.push(d.slice(0,e-p,s)),l&&(o.push(l),l=void 0),g>t&&o.push(d.slice(t-p,d.size,s)))}return o}function Tp(n,e=null){let t=n.domSelectionRange(),s=n.state.doc;if(!t.focusNode)return null;let l=n.docView.nearestDesc(t.focusNode),o=l&&l.size==0,c=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(c<0)return null;let f=s.resolve(c),d,p;if(gu(t)){for(d=c;l&&!l.node;)l=l.parent;let y=l.node;if(l&&y.isAtom&&Se.isSelectable(y)&&l.parent&&!(y.isInline&&$C(t.focusNode,t.focusOffset,l.dom))){let x=l.posBefore;p=new Se(c==x?f:s.resolve(x))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=c,x=c;for(let v=0;v<t.rangeCount;v++){let k=t.getRangeAt(v);y=Math.min(y,n.docView.posFromDOM(k.startContainer,k.startOffset,1)),x=Math.max(x,n.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(y<0)return null;[d,c]=x==n.state.selection.anchor?[x,y]:[y,x],f=s.resolve(c)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let g=s.resolve(d);if(!p){let y=e=="pointer"||n.state.selection.head<f.pos&&!o?1:-1;p=Ep(n,g,f,y)}return p}function ev(n){return n.editable?n.hasFocus():nv(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Nr(n,e=!1){let t=n.state.selection;if(tv(n,t),!!ev(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Gt){let s=n.domSelectionRange(),l=n.domObserver.currentSelection;if(s.anchorNode&&l.anchorNode&&ni(s.anchorNode,s.anchorOffset,l.anchorNode,l.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)bM(n);else{let{anchor:s,head:l}=t,o,c;Ib&&!(t instanceof Ce)&&(t.$from.parent.inlineContent||(o=qb(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(c=qb(n,t.to))),n.docView.setSelection(s,l,n,e),Ib&&(o&&Vb(o),c&&Vb(c)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&yM(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Ib=Jt||Gt&&q1<63;function qb(n,e){let{node:t,offset:s}=n.docView.domFromPos(e,0),l=s<t.childNodes.length?t.childNodes[s]:null,o=s?t.childNodes[s-1]:null;if(Jt&&l&&l.contentEditable=="false")return ch(l);if((!l||l.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(l)return ch(l);if(o)return ch(o)}}function ch(n){return n.contentEditable="true",Jt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Vb(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function yM(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),s=t.anchorNode,l=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=s||t.anchorOffset!=l)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!ev(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function bM(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,s=t.nodeName=="IMG";s?e.collapse(t.parentNode,Vt(t)+1):e.collapse(t,0),!s&&!n.state.selection.visible&&un&&ms<=11&&(t.disabled=!0,t.disabled=!1)}function tv(n,e){if(e instanceof Se){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&($b(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else $b(n)}function $b(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Ep(n,e,t,s){return n.someProp("createSelectionBetween",l=>l(n,e,t))||Ce.between(e,t,s)}function Gb(n){return n.editable&&!n.hasFocus()?!1:nv(n)}function nv(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function xM(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return ni(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Gh(n,e){let{$anchor:t,$head:s}=n.selection,l=e>0?t.max(s):t.min(s),o=l.parent.inlineContent?l.depth?n.doc.resolve(e>0?l.after():l.before()):null:l;return o&&Le.findFrom(o,e)}function is(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Yb(n,e,t){let s=n.state.selection;if(s instanceof Ce)if(t.indexOf("s")>-1){let{$head:l}=s,o=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let c=n.state.doc.resolve(l.pos+o.nodeSize*(e<0?-1:1));return is(n,new Ce(s.$anchor,c))}else if(s.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let l=Gh(n.state,e);return l&&l instanceof Se?is(n,l):!1}else if(!(_n&&t.indexOf("m")>-1)){let l=s.$head,o=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter,c;if(!o||o.isText)return!1;let f=e<0?l.pos-o.nodeSize:l.pos;return o.isAtom||(c=n.docView.descAt(f))&&!c.contentDOM?Se.isSelectable(o)?is(n,new Se(e<0?n.state.doc.resolve(l.pos-o.nodeSize):l)):Ho?is(n,new Ce(n.state.doc.resolve(e<0?f:f+o.nodeSize))):!1:!1}}else return!1;else{if(s instanceof Se&&s.node.isInline)return is(n,new Ce(e>0?s.$to:s.$from));{let l=Gh(n.state,e);return l?is(n,l):!1}}}function Nc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function yo(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Pi(n,e){return e<0?vM(n):SM(n)}function vM(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let l,o,c=!1;for(Hn&&t.nodeType==1&&s<Nc(t)&&yo(t.childNodes[s],-1)&&(c=!0);;)if(s>0){if(t.nodeType!=1)break;{let f=t.childNodes[s-1];if(yo(f,-1))l=t,o=--s;else if(f.nodeType==3)t=f,s=t.nodeValue.length;else break}}else{if(rv(t))break;{let f=t.previousSibling;for(;f&&yo(f,-1);)l=t.parentNode,o=Vt(f),f=f.previousSibling;if(f)t=f,s=Nc(t);else{if(t=t.parentNode,t==n.dom)break;s=0}}}c?Yh(n,t,s):l&&Yh(n,l,o)}function SM(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let l=Nc(t),o,c;for(;;)if(s<l){if(t.nodeType!=1)break;let f=t.childNodes[s];if(yo(f,1))o=t,c=++s;else break}else{if(rv(t))break;{let f=t.nextSibling;for(;f&&yo(f,1);)o=f.parentNode,c=Vt(f)+1,f=f.nextSibling;if(f)t=f,s=0,l=Nc(t);else{if(t=t.parentNode,t==n.dom)break;s=l=0}}}o&&Yh(n,o,c)}function rv(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function kM(n,e){for(;n&&e==n.childNodes.length&&!Bo(n);)e=Vt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function TM(n,e){for(;n&&!e&&!Bo(n);)e=Vt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Yh(n,e,t){if(e.nodeType!=3){let o,c;(c=kM(e,t))?(e=c,t=0):(o=TM(e,t))&&(e=o,t=o.nodeValue.length)}let s=n.domSelection();if(!s)return;if(gu(s)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),s.removeAllRanges(),s.addRange(o)}else s.extend&&s.extend(e,t);n.domObserver.setCurSelection();let{state:l}=n;setTimeout(()=>{n.state==l&&Nr(n)},50)}function Kb(n,e){let t=n.state.doc.resolve(e);if(!(Gt||V1)&&t.parent.inlineContent){let l=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),c=(o.top+o.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(o.left-l.left)>1)return o.left<l.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),c=(o.top+o.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(o.left-l.left)>1)return o.left>l.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Pb(n,e,t){let s=n.state.selection;if(s instanceof Ce&&!s.empty||t.indexOf("s")>-1||_n&&t.indexOf("m")>-1)return!1;let{$from:l,$to:o}=s;if(!l.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let c=Gh(n.state,e);if(c&&c instanceof Se)return is(n,c)}if(!l.parent.inlineContent){let c=e<0?l:o,f=s instanceof Sn?Le.near(c,e):Le.findFrom(c,e);return f?is(n,f):!1}return!1}function Jb(n,e){if(!(n.state.selection instanceof Ce))return!0;let{$head:t,$anchor:s,empty:l}=n.state.selection;if(!t.sameParent(s))return!0;if(!l)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let c=n.state.tr;return e<0?c.delete(t.pos-o.nodeSize,t.pos):c.delete(t.pos,t.pos+o.nodeSize),n.dispatch(c),!0}return!1}function Fb(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function EM(n){if(!Jt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let s=e.firstChild;Fb(n,s,"true"),setTimeout(()=>Fb(n,s,"false"),20)}return!1}function CM(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function MM(n,e){let t=e.keyCode,s=CM(e);if(t==8||_n&&t==72&&s=="c")return Jb(n,-1)||Pi(n,-1);if(t==46&&!e.shiftKey||_n&&t==68&&s=="c")return Jb(n,1)||Pi(n,1);if(t==13||t==27)return!0;if(t==37||_n&&t==66&&s=="c"){let l=t==37?Kb(n,n.state.selection.from)=="ltr"?-1:1:-1;return Yb(n,l,s)||Pi(n,l)}else if(t==39||_n&&t==70&&s=="c"){let l=t==39?Kb(n,n.state.selection.from)=="ltr"?1:-1:1;return Yb(n,l,s)||Pi(n,l)}else{if(t==38||_n&&t==80&&s=="c")return Pb(n,-1,s)||Pi(n,-1);if(t==40||_n&&t==78&&s=="c")return EM(n)||Pb(n,1,s)||Pi(n,1);if(s==(_n?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Cp(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:s,openStart:l,openEnd:o}=e;for(;l>1&&o>1&&s.childCount==1&&s.firstChild.childCount==1;){l--,o--;let v=s.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),s=v.content}let c=n.someProp("clipboardSerializer")||ii.fromSchema(n.state.schema),f=cv(),d=f.createElement("div");d.appendChild(c.serializeFragment(s,{document:f}));let p=d.firstChild,g,y=0;for(;p&&p.nodeType==1&&(g=av[p.nodeName.toLowerCase()]);){for(let v=g.length-1;v>=0;v--){let k=f.createElement(g[v]);for(;d.firstChild;)k.appendChild(d.firstChild);d.appendChild(k),y++}p=d.firstChild}p&&p.nodeType==1&&p.setAttribute("data-pm-slice",`${l} ${o}${y?` -${y}`:""} ${JSON.stringify(t)}`);let x=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:x,slice:e}}function sv(n,e,t,s,l){let o=l.parent.type.spec.code,c,f;if(!t&&!e)return null;let d=!!e&&(s||o||!t);if(d){if(n.someProp("transformPastedText",x=>{e=x(e,o||s,n)}),o)return f=new oe(W.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",x=>{f=x(f,n,!0)}),f;let y=n.someProp("clipboardTextParser",x=>x(e,l,s,n));if(y)f=y;else{let x=l.marks(),{schema:v}=n.state,k=ii.fromSchema(v);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let C=c.appendChild(document.createElement("p"));E&&C.appendChild(k.serializeNode(v.text(E,x)))})}}else n.someProp("transformPastedHTML",y=>{t=y(t,n)}),c=OM(t),Ho&&DM(c);let p=c&&c.querySelector("[data-pm-slice]"),g=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let y=+g[3];y>0;y--){let x=c.firstChild;for(;x&&x.nodeType!=1;)x=x.nextSibling;if(!x)break;c=x}if(f||(f=(n.someProp("clipboardParser")||n.someProp("domParser")||ps.fromSchema(n.state.schema)).parseSlice(c,{preserveWhitespace:!!(d||g),context:l,ruleFromNode(x){return x.nodeName=="BR"&&!x.nextSibling&&x.parentNode&&!wM.test(x.parentNode.nodeName)?{ignore:!0}:null}})),g)f=jM(Xb(f,+g[1],+g[2]),g[4]);else if(f=oe.maxOpen(NM(f.content,l),!0),f.openStart||f.openEnd){let y=0,x=0;for(let v=f.content.firstChild;y<f.openStart&&!v.type.spec.isolating;y++,v=v.firstChild);for(let v=f.content.lastChild;x<f.openEnd&&!v.type.spec.isolating;x++,v=v.lastChild);f=Xb(f,y,x)}return n.someProp("transformPasted",y=>{f=y(f,n,d)}),f}const wM=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function NM(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let l=e.node(t).contentMatchAt(e.index(t)),o,c=[];if(n.forEach(f=>{if(!c)return;let d=l.findWrapping(f.type),p;if(!d)return c=null;if(p=c.length&&o.length&&lv(d,o,f,c[c.length-1],0))c[c.length-1]=p;else{c.length&&(c[c.length-1]=ov(c[c.length-1],o.length));let g=iv(f,d);c.push(g),l=l.matchType(g.type),o=d}}),c)return W.from(c)}return n}function iv(n,e,t=0){for(let s=e.length-1;s>=t;s--)n=e[s].create(null,W.from(n));return n}function lv(n,e,t,s,l){if(l<n.length&&l<e.length&&n[l]==e[l]){let o=lv(n,e,t,s.lastChild,l+1);if(o)return s.copy(s.content.replaceChild(s.childCount-1,o));if(s.contentMatchAt(s.childCount).matchType(l==n.length-1?t.type:n[l+1]))return s.copy(s.content.append(W.from(iv(t,n,l+1))))}}function ov(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,ov(n.lastChild,e-1)),s=n.contentMatchAt(n.childCount).fillBefore(W.empty,!0);return n.copy(t.append(s))}function Kh(n,e,t,s,l,o){let c=e<0?n.firstChild:n.lastChild,f=c.content;return n.childCount>1&&(o=0),l<s-1&&(f=Kh(f,e,t,s,l+1,o)),l>=t&&(f=e<0?c.contentMatchAt(0).fillBefore(f,o<=l).append(f):f.append(c.contentMatchAt(c.childCount).fillBefore(W.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,c.copy(f))}function Xb(n,e,t){return e<n.openStart&&(n=new oe(Kh(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new oe(Kh(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const av={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Qb=null;function cv(){return Qb||(Qb=document.implementation.createHTMLDocument("title"))}let uh=null;function AM(n){let e=window.trustedTypes;return e?(uh||(uh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),uh.createHTML(n)):n}function OM(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=cv().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(n),l;if((l=s&&av[s[1].toLowerCase()])&&(n=l.map(o=>"<"+o+">").join("")+n+l.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=AM(n),l)for(let o=0;o<l.length;o++)t=t.querySelector(l[o])||t;return t}function DM(n){let e=n.querySelectorAll(Gt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let s=e[t];s.childNodes.length==1&&s.textContent==""&&s.parentNode&&s.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),s)}}function jM(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,s;try{s=JSON.parse(e)}catch{return n}let{content:l,openStart:o,openEnd:c}=n;for(let f=s.length-2;f>=0;f-=2){let d=t.nodes[s[f]];if(!d||d.hasRequiredAttrs())break;l=W.from(d.create(s[f+1],l)),o++,c++}return new oe(l,o,c)}const Zt={},Wt={},RM={touchstart:!0,touchmove:!0};class zM{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function LM(n){for(let e in Zt){let t=Zt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=s=>{BM(n,s)&&!Mp(n,s)&&(n.editable||!(s.type in Wt))&&t(n,s)},RM[e]?{passive:!0}:void 0)}Jt&&n.dom.addEventListener("input",()=>null),Ph(n)}function hs(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function _M(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Ph(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=s=>Mp(n,s))})}function Mp(n,e){return n.someProp("handleDOMEvents",t=>{let s=t[e.type];return s?s(n,e)||e.defaultPrevented:!1})}function BM(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function HM(n,e){!Mp(n,e)&&Zt[e.type]&&(n.editable||!(e.type in Wt))&&Zt[e.type](n,e)}Wt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!fv(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Mr&&Gt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),il&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let s=Date.now();n.input.lastIOSEnter=s,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==s&&(n.someProp("handleKeyDown",l=>l(n,Gs(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",s=>s(n,t))||MM(n,t)?t.preventDefault():hs(n,"key")};Wt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Wt.keypress=(n,e)=>{let t=e;if(fv(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||_n&&t.metaKey)return;if(n.someProp("handleKeyPress",l=>l(n,t))){t.preventDefault();return}let s=n.state.selection;if(!(s instanceof Ce)||!s.$from.sameParent(s.$to)){let l=String.fromCharCode(t.charCode),o=()=>n.state.tr.insertText(l).scrollIntoView();!/[\r\n]/.test(l)&&!n.someProp("handleTextInput",c=>c(n,s.$from.pos,s.$to.pos,l,o))&&n.dispatch(o()),t.preventDefault()}};function bu(n){return{left:n.clientX,top:n.clientY}}function UM(n,e){let t=e.x-n.clientX,s=e.y-n.clientY;return t*t+s*s<100}function wp(n,e,t,s,l){if(s==-1)return!1;let o=n.state.doc.resolve(s);for(let c=o.depth+1;c>0;c--)if(n.someProp(e,f=>c>o.depth?f(n,t,o.nodeAfter,o.before(c),l,!0):f(n,t,o.node(c),o.before(c),l,!1)))return!0;return!1}function tl(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let s=n.state.tr.setSelection(e);s.setMeta("pointer",!0),n.dispatch(s)}function IM(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),s=t.nodeAfter;return s&&s.isAtom&&Se.isSelectable(s)?(tl(n,new Se(t)),!0):!1}function qM(n,e){if(e==-1)return!1;let t=n.state.selection,s,l;t instanceof Se&&(s=t.node);let o=n.state.doc.resolve(e);for(let c=o.depth+1;c>0;c--){let f=c>o.depth?o.nodeAfter:o.node(c);if(Se.isSelectable(f)){s&&t.$from.depth>0&&c>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?l=o.before(t.$from.depth):l=o.before(c);break}}return l!=null?(tl(n,Se.create(n.state.doc,l)),!0):!1}function VM(n,e,t,s,l){return wp(n,"handleClickOn",e,t,s)||n.someProp("handleClick",o=>o(n,e,s))||(l?qM(n,t):IM(n,t))}function $M(n,e,t,s){return wp(n,"handleDoubleClickOn",e,t,s)||n.someProp("handleDoubleClick",l=>l(n,e,s))}function GM(n,e,t,s){return wp(n,"handleTripleClickOn",e,t,s)||n.someProp("handleTripleClick",l=>l(n,e,s))||YM(n,t,s)}function YM(n,e,t){if(t.button!=0)return!1;let s=n.state.doc;if(e==-1)return s.inlineContent?(tl(n,Ce.create(s,0,s.content.size)),!0):!1;let l=s.resolve(e);for(let o=l.depth+1;o>0;o--){let c=o>l.depth?l.nodeAfter:l.node(o),f=l.before(o);if(c.inlineContent)tl(n,Ce.create(s,f+1,f+1+c.content.size));else if(Se.isSelectable(c))tl(n,Se.create(s,f));else continue;return!0}}function Np(n){return Ac(n)}const uv=_n?"metaKey":"ctrlKey";Zt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let s=Np(n),l=Date.now(),o="singleClick";l-n.input.lastClick.time<500&&UM(t,n.input.lastClick)&&!t[uv]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:l,x:t.clientX,y:t.clientY,type:o,button:t.button};let c=n.posAtCoords(bu(t));c&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new KM(n,c,t,!!s)):(o=="doubleClick"?$M:GM)(n,c.pos,c.inside,t)?t.preventDefault():hs(n,"pointer"))};class KM{constructor(e,t,s,l){this.view=e,this.pos=t,this.event=s,this.flushed=l,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!s[uv],this.allowDefault=s.shiftKey;let o,c;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),c=t.inside;else{let g=e.state.doc.resolve(t.pos);o=g.parent,c=g.depth?g.before():0}const f=l?null:s.target,d=f?e.docView.nearestDesc(f,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:p}=e.state;(s.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||p instanceof Se&&p.from<=c&&p.to>c)&&(this.mightDrag={node:o,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Hn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),hs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Nr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(bu(e))),this.updateAllowDefault(e),this.allowDefault||!t?hs(this.view,"pointer"):VM(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Jt&&this.mightDrag&&!this.mightDrag.node.isAtom||Gt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(tl(this.view,Le.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):hs(this.view,"pointer")}move(e){this.updateAllowDefault(e),hs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Zt.touchstart=n=>{n.input.lastTouch=Date.now(),Np(n),hs(n,"pointer")};Zt.touchmove=n=>{n.input.lastTouch=Date.now(),hs(n,"pointer")};Zt.contextmenu=n=>Np(n);function fv(n,e){return n.composing?!0:Jt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const PM=Mr?5e3:-1;Wt.compositionstart=Wt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Ce&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(s=>s.type.spec.inclusive===!1)||Gt&&V1&&JM(n)))n.markCursor=n.state.storedMarks||t.marks(),Ac(n,!0),n.markCursor=null;else if(Ac(n,!e.selection.empty),Hn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let s=n.domSelectionRange();for(let l=s.focusNode,o=s.focusOffset;l&&l.nodeType==1&&o!=0;){let c=o<0?l.lastChild:l.childNodes[o-1];if(!c)break;if(c.nodeType==3){let f=n.domSelection();f&&f.collapse(c,c.nodeValue.length);break}else l=c,o=-1}}n.input.composing=!0}dv(n,PM)};function JM(n){let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(!e||e.nodeType!=1||t>=e.childNodes.length)return!1;let s=e.childNodes[t];return s.nodeType==1&&s.contentEditable=="false"}Wt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.badSafariComposition?n.domObserver.forceFlush():n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,dv(n,20))};function dv(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Ac(n),e))}function hv(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=XM());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function FM(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=qC(e.focusNode,e.focusOffset),s=VC(e.focusNode,e.focusOffset);if(t&&s&&t!=s){let l=s.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||s==o)return o;if(!l||!l.isText(s.nodeValue))return s;if(n.input.compositionNode==s){let c=t.pmViewDesc;if(!(!c||!c.isText(t.nodeValue)))return s}}return t||s}function XM(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Ac(n,e=!1){if(!(Mr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),hv(n),e||n.docView&&n.docView.dirty){let t=Tp(n),s=n.state.selection;return t&&!t.eq(s)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!s.$from.node(s.$from.sharedDepth(s.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function QM(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let s=getSelection(),l=document.createRange();l.selectNodeContents(e),n.dom.blur(),s.removeAllRanges(),s.addRange(l),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const No=un&&ms<15||il&&KC<604;Zt.copy=Wt.cut=(n,e)=>{let t=e,s=n.state.selection,l=t.type=="cut";if(s.empty)return;let o=No?null:t.clipboardData,c=s.content(),{dom:f,text:d}=Cp(n,c);o?(t.preventDefault(),o.clearData(),o.setData("text/html",f.innerHTML),o.setData("text/plain",d)):QM(n,f),l&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function ZM(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function WM(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,s=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(s.contentEditable="true"),s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus();let l=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),s.parentNode&&s.parentNode.removeChild(s),t?Ao(n,s.value,null,l,e):Ao(n,s.textContent,s.innerHTML,l,e)},50)}function Ao(n,e,t,s,l){let o=sv(n,e,t,s,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,l,o||oe.empty)))return!0;if(!o)return!1;let c=ZM(o),f=c?n.state.tr.replaceSelectionWith(c,s):n.state.tr.replaceSelection(o);return n.dispatch(f.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function pv(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Wt.paste=(n,e)=>{let t=e;if(n.composing&&!Mr)return;let s=No?null:t.clipboardData,l=n.input.shiftKey&&n.input.lastKeyCode!=45;s&&Ao(n,pv(s),s.getData("text/html"),l,t)?t.preventDefault():WM(n,t)};class mv{constructor(e,t,s){this.slice=e,this.move=t,this.node=s}}const ew=_n?"altKey":"ctrlKey";function gv(n,e){let t=n.someProp("dragCopies",s=>!s(e));return t??!e[ew]}Zt.dragstart=(n,e)=>{let t=e,s=n.input.mouseDown;if(s&&s.done(),!t.dataTransfer)return;let l=n.state.selection,o=l.empty?null:n.posAtCoords(bu(t)),c;if(!(o&&o.pos>=l.from&&o.pos<=(l instanceof Se?l.to-1:l.to))){if(s&&s.mightDrag)c=Se.create(n.state.doc,s.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=n.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=n.docView&&(c=Se.create(n.state.doc,y.posBefore))}}let f=(c||n.state.selection).content(),{dom:d,text:p,slice:g}=Cp(n,f);(!t.dataTransfer.files.length||!Gt||q1>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(No?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",No||t.dataTransfer.setData("text/plain",p),n.dragging=new mv(g,gv(n,t),c)};Zt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Wt.dragover=Wt.dragenter=(n,e)=>e.preventDefault();Wt.drop=(n,e)=>{try{tw(n,e,n.dragging)}finally{n.dragging=null}};function tw(n,e,t){if(!e.dataTransfer)return;let s=n.posAtCoords(bu(e));if(!s)return;let l=n.state.doc.resolve(s.pos),o=t&&t.slice;o?n.someProp("transformPasted",v=>{o=v(o,n,!1)}):o=sv(n,pv(e.dataTransfer),No?null:e.dataTransfer.getData("text/html"),!1,l);let c=!!(t&&gv(n,e));if(n.someProp("handleDrop",v=>v(n,e,o||oe.empty,c))){e.preventDefault();return}if(!o)return;e.preventDefault();let f=o?v1(n.state.doc,l.pos,o):l.pos;f==null&&(f=l.pos);let d=n.state.tr;if(c){let{node:v}=t;v?v.replace(d):d.deleteSelection()}let p=d.mapping.map(f),g=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,y=d.doc;if(g?d.replaceRangeWith(p,p,o.content.firstChild):d.replaceRange(p,p,o),d.doc.eq(y))return;let x=d.doc.resolve(p);if(g&&Se.isSelectable(o.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new Se(x));else{let v=d.mapping.map(f);d.mapping.maps[d.mapping.maps.length-1].forEach((k,E,C,M)=>v=M),d.setSelection(Ep(n,x,d.doc.resolve(v)))}n.focus(),n.dispatch(d.setMeta("uiEvent","drop"))}Zt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Nr(n)},20))};Zt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Zt.beforeinput=(n,e)=>{if(Gt&&Mr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:s}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=s||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,Gs(8,"Backspace")))))return;let{$cursor:l}=n.state.selection;l&&l.pos>0&&n.dispatch(n.state.tr.delete(l.pos-1,l.pos).scrollIntoView())},50)}};for(let n in Wt)Zt[n]=Wt[n];function Oo(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Oc{constructor(e,t){this.toDOM=e,this.spec=t||Qs,this.side=this.spec.side||0}map(e,t,s,l){let{pos:o,deleted:c}=e.mapResult(t.from+l,this.side<0?-1:1);return c?null:new Qt(o-s,o-s,this)}valid(){return!0}eq(e){return this==e||e instanceof Oc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Oo(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ys{constructor(e,t){this.attrs=e,this.spec=t||Qs}map(e,t,s,l){let o=e.map(t.from+l,this.spec.inclusiveStart?-1:1)-s,c=e.map(t.to+l,this.spec.inclusiveEnd?1:-1)-s;return o>=c?null:new Qt(o,c,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ys&&Oo(this.attrs,e.attrs)&&Oo(this.spec,e.spec)}static is(e){return e.type instanceof ys}destroy(){}}class Ap{constructor(e,t){this.attrs=e,this.spec=t||Qs}map(e,t,s,l){let o=e.mapResult(t.from+l,1);if(o.deleted)return null;let c=e.mapResult(t.to+l,-1);return c.deleted||c.pos<=o.pos?null:new Qt(o.pos-s,c.pos-s,this)}valid(e,t){let{index:s,offset:l}=e.content.findIndex(t.from),o;return l==t.from&&!(o=e.child(s)).isText&&l+o.nodeSize==t.to}eq(e){return this==e||e instanceof Ap&&Oo(this.attrs,e.attrs)&&Oo(this.spec,e.spec)}destroy(){}}class Qt{constructor(e,t,s){this.from=e,this.to=t,this.type=s}copy(e,t){return new Qt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,s){return this.type.map(e,this,t,s)}static widget(e,t,s){return new Qt(e,e,new Oc(t,s))}static inline(e,t,s,l){return new Qt(e,t,new ys(s,l))}static node(e,t,s,l){return new Qt(e,t,new Ap(s,l))}get spec(){return this.type.spec}get inline(){return this.type instanceof ys}get widget(){return this.type instanceof Oc}}const Fi=[],Qs={};class ht{constructor(e,t){this.local=e.length?e:Fi,this.children=t.length?t:Fi}static create(e,t){return t.length?Dc(t,e,0,Qs):Pt}find(e,t,s){let l=[];return this.findInner(e??0,t??1e9,l,0,s),l}findInner(e,t,s,l,o){for(let c=0;c<this.local.length;c++){let f=this.local[c];f.from<=t&&f.to>=e&&(!o||o(f.spec))&&s.push(f.copy(f.from+l,f.to+l))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<t&&this.children[c+1]>e){let f=this.children[c]+1;this.children[c+2].findInner(e-f,t-f,s,l+f,o)}}map(e,t,s){return this==Pt||e.maps.length==0?this:this.mapInner(e,t,0,0,s||Qs)}mapInner(e,t,s,l,o){let c;for(let f=0;f<this.local.length;f++){let d=this.local[f].map(e,s,l);d&&d.type.valid(t,d)?(c||(c=[])).push(d):o.onRemove&&o.onRemove(this.local[f].spec)}return this.children.length?nw(this.children,c||[],e,t,s,l,o):c?new ht(c.sort(Zs),Fi):Pt}add(e,t){return t.length?this==Pt?ht.create(e,t):this.addInner(e,t,0):this}addInner(e,t,s){let l,o=0;e.forEach((f,d)=>{let p=d+s,g;if(g=bv(t,f,p)){for(l||(l=this.children.slice());o<l.length&&l[o]<d;)o+=3;l[o]==d?l[o+2]=l[o+2].addInner(f,g,p+1):l.splice(o,0,d,d+f.nodeSize,Dc(g,f,p+1,Qs)),o+=3}});let c=yv(o?xv(t):t,-s);for(let f=0;f<c.length;f++)c[f].type.valid(e,c[f])||c.splice(f--,1);return new ht(c.length?this.local.concat(c).sort(Zs):this.local,l||this.children)}remove(e){return e.length==0||this==Pt?this:this.removeInner(e,0)}removeInner(e,t){let s=this.children,l=this.local;for(let o=0;o<s.length;o+=3){let c,f=s[o]+t,d=s[o+1]+t;for(let g=0,y;g<e.length;g++)(y=e[g])&&y.from>f&&y.to<d&&(e[g]=null,(c||(c=[])).push(y));if(!c)continue;s==this.children&&(s=this.children.slice());let p=s[o+2].removeInner(c,f+1);p!=Pt?s[o+2]=p:(s.splice(o,3),o-=3)}if(l.length){for(let o=0,c;o<e.length;o++)if(c=e[o])for(let f=0;f<l.length;f++)l[f].eq(c,t)&&(l==this.local&&(l=this.local.slice()),l.splice(f--,1))}return s==this.children&&l==this.local?this:l.length||s.length?new ht(l,s):Pt}forChild(e,t){if(this==Pt)return this;if(t.isLeaf)return ht.empty;let s,l;for(let f=0;f<this.children.length;f+=3)if(this.children[f]>=e){this.children[f]==e&&(s=this.children[f+2]);break}let o=e+1,c=o+t.content.size;for(let f=0;f<this.local.length;f++){let d=this.local[f];if(d.from<c&&d.to>o&&d.type instanceof ys){let p=Math.max(o,d.from)-o,g=Math.min(c,d.to)-o;p<g&&(l||(l=[])).push(d.copy(p,g))}}if(l){let f=new ht(l.sort(Zs),Fi);return s?new cs([f,s]):f}return s||Pt}eq(e){if(this==e)return!0;if(!(e instanceof ht)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Op(this.localsInner(e))}localsInner(e){if(this==Pt)return Fi;if(e.inlineContent||!this.local.some(ys.is))return this.local;let t=[];for(let s=0;s<this.local.length;s++)this.local[s].type instanceof ys||t.push(this.local[s]);return t}forEachSet(e){e(this)}}ht.empty=new ht([],[]);ht.removeOverlap=Op;const Pt=ht.empty;class cs{constructor(e){this.members=e}map(e,t){const s=this.members.map(l=>l.map(e,t,Qs));return cs.from(s)}forChild(e,t){if(t.isLeaf)return ht.empty;let s=[];for(let l=0;l<this.members.length;l++){let o=this.members[l].forChild(e,t);o!=Pt&&(o instanceof cs?s=s.concat(o.members):s.push(o))}return cs.from(s)}eq(e){if(!(e instanceof cs)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,s=!0;for(let l=0;l<this.members.length;l++){let o=this.members[l].localsInner(e);if(o.length)if(!t)t=o;else{s&&(t=t.slice(),s=!1);for(let c=0;c<o.length;c++)t.push(o[c])}}return t?Op(s?t:t.sort(Zs)):Fi}static from(e){switch(e.length){case 0:return Pt;case 1:return e[0];default:return new cs(e.every(t=>t instanceof ht)?e:e.reduce((t,s)=>t.concat(s instanceof ht?s:s.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function nw(n,e,t,s,l,o,c){let f=n.slice();for(let p=0,g=o;p<t.maps.length;p++){let y=0;t.maps[p].forEach((x,v,k,E)=>{let C=E-k-(v-x);for(let M=0;M<f.length;M+=3){let I=f[M+1];if(I<0||x>I+g-y)continue;let $=f[M]+g-y;v>=$?f[M+1]=x<=$?-2:-1:x>=g&&C&&(f[M]+=C,f[M+1]+=C)}y+=C}),g=t.maps[p].map(g,-1)}let d=!1;for(let p=0;p<f.length;p+=3)if(f[p+1]<0){if(f[p+1]==-2){d=!0,f[p+1]=-1;continue}let g=t.map(n[p]+o),y=g-l;if(y<0||y>=s.content.size){d=!0;continue}let x=t.map(n[p+1]+o,-1),v=x-l,{index:k,offset:E}=s.content.findIndex(y),C=s.maybeChild(k);if(C&&E==y&&E+C.nodeSize==v){let M=f[p+2].mapInner(t,C,g+1,n[p]+o+1,c);M!=Pt?(f[p]=y,f[p+1]=v,f[p+2]=M):(f[p+1]=-2,d=!0)}else d=!0}if(d){let p=rw(f,n,e,t,l,o,c),g=Dc(p,s,0,c);e=g.local;for(let y=0;y<f.length;y+=3)f[y+1]<0&&(f.splice(y,3),y-=3);for(let y=0,x=0;y<g.children.length;y+=3){let v=g.children[y];for(;x<f.length&&f[x]<v;)x+=3;f.splice(x,0,g.children[y],g.children[y+1],g.children[y+2])}}return new ht(e.sort(Zs),f)}function yv(n,e){if(!e||!n.length)return n;let t=[];for(let s=0;s<n.length;s++){let l=n[s];t.push(new Qt(l.from+e,l.to+e,l.type))}return t}function rw(n,e,t,s,l,o,c){function f(d,p){for(let g=0;g<d.local.length;g++){let y=d.local[g].map(s,l,p);y?t.push(y):c.onRemove&&c.onRemove(d.local[g].spec)}for(let g=0;g<d.children.length;g+=3)f(d.children[g+2],d.children[g]+p+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&f(n[d+2],e[d]+o+1);return t}function bv(n,e,t){if(e.isLeaf)return null;let s=t+e.nodeSize,l=null;for(let o=0,c;o<n.length;o++)(c=n[o])&&c.from>t&&c.to<s&&((l||(l=[])).push(c),n[o]=null);return l}function xv(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Dc(n,e,t,s){let l=[],o=!1;e.forEach((f,d)=>{let p=bv(n,f,d+t);if(p){o=!0;let g=Dc(p,f,t+d+1,s);g!=Pt&&l.push(d,d+f.nodeSize,g)}});let c=yv(o?xv(n):n,-t).sort(Zs);for(let f=0;f<c.length;f++)c[f].type.valid(e,c[f])||(s.onRemove&&s.onRemove(c[f].spec),c.splice(f--,1));return c.length||l.length?new ht(c,l):Pt}function Zs(n,e){return n.from-e.from||n.to-e.to}function Op(n){let e=n;for(let t=0;t<e.length-1;t++){let s=e[t];if(s.from!=s.to)for(let l=t+1;l<e.length;l++){let o=e[l];if(o.from==s.from){o.to!=s.to&&(e==n&&(e=n.slice()),e[l]=o.copy(o.from,s.to),Zb(e,l+1,o.copy(s.to,o.to)));continue}else{o.from<s.to&&(e==n&&(e=n.slice()),e[t]=s.copy(s.from,o.from),Zb(e,l,s.copy(o.from,s.to)));break}}}return e}function Zb(n,e,t){for(;e<n.length&&Zs(t,n[e])>0;)e++;n.splice(e,0,t)}function fh(n){let e=[];return n.someProp("decorations",t=>{let s=t(n.state);s&&s!=Pt&&e.push(s)}),n.cursorWrapper&&e.push(ht.create(n.state.doc,[n.cursorWrapper.deco])),cs.from(e)}const sw={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},iw=un&&ms<=11;class lw{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class ow{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new lw,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(s=>{for(let l=0;l<s.length;l++)this.queue.push(s[l]);un&&ms<=11&&s.some(l=>l.type=="childList"&&l.removedNodes.length||l.type=="characterData"&&l.oldValue.length>l.target.nodeValue.length)?this.flushSoon():Jt&&e.composing&&s.some(l=>l.type=="childList"&&l.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),iw&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,sw)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Gb(this.view)){if(this.suppressingSelectionUpdates)return Nr(this.view);if(un&&ms<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ni(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,s;for(let o=e.focusNode;o;o=sl(o))t.add(o);for(let o=e.anchorNode;o;o=sl(o))if(t.has(o)){s=o;break}let l=s&&this.view.docView.nearestDesc(s);if(l&&l.ignoreMutation({type:"selection",target:s.nodeType==3?s.parentNode:s}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let s=e.domSelectionRange(),l=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(s)&&Gb(e)&&!this.ignoreSelectionChange(s),o=-1,c=-1,f=!1,d=[];if(e.editable)for(let g=0;g<t.length;g++){let y=this.registerMutation(t[g],d);y&&(o=o<0?y.from:Math.min(y.from,o),c=c<0?y.to:Math.max(y.to,c),y.typeOver&&(f=!0))}if(d.some(g=>g.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let g of d)if(g.nodeName=="BR"&&g.parentNode){let y=g.nextSibling;y&&y.nodeType==1&&y.contentEditable=="false"&&g.parentNode.removeChild(g)}}else if(Hn&&d.length){let g=d.filter(y=>y.nodeName=="BR");if(g.length==2){let[y,x]=g;y.parentNode&&y.parentNode.parentNode==x.parentNode?x.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let x of g){let v=x.parentNode;v&&v.nodeName=="LI"&&(!y||uw(e,y)!=v)&&x.remove()}}}let p=null;o<0&&l&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&gu(s)&&(p=Tp(e))&&p.eq(Le.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Nr(e),this.currentSelection.set(s),e.scrollToSelection()):(o>-1||l)&&(o>-1&&(e.docView.markDirty(o,c),aw(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,fw(e,d)),this.handleDOMChange(o,c,f,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(s)||Nr(e),this.currentSelection.set(s))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let s=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(s==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!s||s.ignoreMutation(e))return null;if(e.type=="childList"){for(let g=0;g<e.addedNodes.length;g++){let y=e.addedNodes[g];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(s.contentDOM&&s.contentDOM!=s.dom&&!s.contentDOM.contains(e.target))return{from:s.posBefore,to:s.posAfter};let l=e.previousSibling,o=e.nextSibling;if(un&&ms<=11&&e.addedNodes.length)for(let g=0;g<e.addedNodes.length;g++){let{previousSibling:y,nextSibling:x}=e.addedNodes[g];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(l=y),(!x||Array.prototype.indexOf.call(e.addedNodes,x)<0)&&(o=x)}let c=l&&l.parentNode==e.target?Vt(l)+1:0,f=s.localPosFromDOM(e.target,c,-1),d=o&&o.parentNode==e.target?Vt(o):e.target.childNodes.length,p=s.localPosFromDOM(e.target,d,1);return{from:f,to:p}}else return e.type=="attributes"?{from:s.posAtStart-s.border,to:s.posAtEnd+s.border}:(this.lastChangedTextNode=e.target,{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Wb=new WeakMap,ex=!1;function aw(n){if(!Wb.has(n)&&(Wb.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Hn,ex)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ex=!0}}function tx(n,e){let t=e.startContainer,s=e.startOffset,l=e.endContainer,o=e.endOffset,c=n.domAtPos(n.state.selection.anchor);return ni(c.node,c.offset,l,o)&&([t,s,l,o]=[l,o,t,s]),{anchorNode:t,anchorOffset:s,focusNode:l,focusOffset:o}}function cw(n,e){if(e.getComposedRanges){let l=e.getComposedRanges(n.root)[0];if(l)return tx(n,l)}let t;function s(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",s,!0),t?tx(n,t):null}function uw(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let s=n.docView.nearestDesc(t,!0);if(s&&s.node.isBlock)return t}return null}function fw(n,e){var t;let{focusNode:s,focusOffset:l}=n.domSelectionRange();for(let o of e)if(((t=o.parentNode)===null||t===void 0?void 0:t.nodeName)=="TR"){let c=o.nextSibling;for(;c&&c.nodeName!="TD"&&c.nodeName!="TH";)c=c.nextSibling;if(c){let f=c;for(;;){let d=f.firstChild;if(!d||d.nodeType!=1||d.contentEditable=="false"||/^(BR|IMG)$/.test(d.nodeName))break;f=d}f.insertBefore(o,f.firstChild),s==o&&n.domSelection().collapse(o,l)}else o.parentNode.removeChild(o)}}function dw(n,e,t){let{node:s,fromOffset:l,toOffset:o,from:c,to:f}=n.docView.parseRange(e,t),d=n.domSelectionRange(),p,g=d.anchorNode;if(g&&n.dom.contains(g.nodeType==1?g:g.parentNode)&&(p=[{node:g,offset:d.anchorOffset}],gu(d)||p.push({node:d.focusNode,offset:d.focusOffset})),Gt&&n.input.lastKeyCode===8)for(let C=o;C>l;C--){let M=s.childNodes[C-1],I=M.pmViewDesc;if(M.nodeName=="BR"&&!I){o=C;break}if(!I||I.size)break}let y=n.state.doc,x=n.someProp("domParser")||ps.fromSchema(n.state.schema),v=y.resolve(c),k=null,E=x.parse(s,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:l,to:o,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:p,ruleFromNode:hw,context:v});if(p&&p[0].pos!=null){let C=p[0].pos,M=p[1]&&p[1].pos;M==null&&(M=C),k={anchor:C+c,head:M+c}}return{doc:E,sel:k,from:c,to:f}}function hw(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Jt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Jt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const pw=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function mw(n,e,t,s,l){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let V=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,Z=Tp(n,V);if(Z&&!n.state.selection.eq(Z)){if(Gt&&Mr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Te=>Te(n,Gs(13,"Enter"))))return;let ie=n.state.tr.setSelection(Z);V=="pointer"?ie.setMeta("pointer",!0):V=="key"&&ie.scrollIntoView(),o&&ie.setMeta("composition",o),n.dispatch(ie)}return}let c=n.state.doc.resolve(e),f=c.sharedDepth(t);e=c.before(f+1),t=n.state.doc.resolve(t).after(f+1);let d=n.state.selection,p=dw(n,e,t),g=n.state.doc,y=g.slice(p.from,p.to),x,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(x=n.state.selection.to,v="end"):(x=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let k=bw(y.content,p.doc.content,p.from,x,v);if(k&&n.input.domChangeCount++,(il&&n.input.lastIOSEnter>Date.now()-225||Mr)&&l.some(V=>V.nodeType==1&&!pw.test(V.nodeName))&&(!k||k.endA>=k.endB)&&n.someProp("handleKeyDown",V=>V(n,Gs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!k)if(s&&d instanceof Ce&&!d.empty&&d.$head.sameParent(d.$anchor)&&!n.composing&&!(p.sel&&p.sel.anchor!=p.sel.head))k={start:d.from,endA:d.to,endB:d.to};else{if(p.sel){let V=nx(n,n.state.doc,p.sel);if(V&&!V.eq(n.state.selection)){let Z=n.state.tr.setSelection(V);o&&Z.setMeta("composition",o),n.dispatch(Z)}}return}n.state.selection.from<n.state.selection.to&&k.start==k.endB&&n.state.selection instanceof Ce&&(k.start>n.state.selection.from&&k.start<=n.state.selection.from+2&&n.state.selection.from>=p.from?k.start=n.state.selection.from:k.endA<n.state.selection.to&&k.endA>=n.state.selection.to-2&&n.state.selection.to<=p.to&&(k.endB+=n.state.selection.to-k.endA,k.endA=n.state.selection.to)),un&&ms<=11&&k.endB==k.start+1&&k.endA==k.start&&k.start>p.from&&p.doc.textBetween(k.start-p.from-1,k.start-p.from+1)==" "&&(k.start--,k.endA--,k.endB--);let E=p.doc.resolveNoCache(k.start-p.from),C=p.doc.resolveNoCache(k.endB-p.from),M=g.resolve(k.start),I=E.sameParent(C)&&E.parent.inlineContent&&M.end()>=k.endA;if((il&&n.input.lastIOSEnter>Date.now()-225&&(!I||l.some(V=>V.nodeName=="DIV"||V.nodeName=="P"))||!I&&E.pos<p.doc.content.size&&(!E.sameParent(C)||!E.parent.inlineContent)&&E.pos<C.pos&&!/\S/.test(p.doc.textBetween(E.pos,C.pos,"","")))&&n.someProp("handleKeyDown",V=>V(n,Gs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>k.start&&yw(g,k.start,k.endA,E,C)&&n.someProp("handleKeyDown",V=>V(n,Gs(8,"Backspace")))){Mr&&Gt&&n.domObserver.suppressSelectionUpdates();return}Gt&&k.endB==k.start&&(n.input.lastChromeDelete=Date.now()),Mr&&!I&&E.start()!=C.start()&&C.parentOffset==0&&E.depth==C.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==k.endA&&(k.endB-=2,C=p.doc.resolveNoCache(k.endB-p.from),setTimeout(()=>{n.someProp("handleKeyDown",function(V){return V(n,Gs(13,"Enter"))})},20));let $=k.start,X=k.endA,_=V=>{let Z=V||n.state.tr.replace($,X,p.doc.slice(k.start-p.from,k.endB-p.from));if(p.sel){let ie=nx(n,Z.doc,p.sel);ie&&!(Gt&&n.composing&&ie.empty&&(k.start!=k.endB||n.input.lastChromeDelete<Date.now()-100)&&(ie.head==$||ie.head==Z.mapping.map(X)-1)||un&&ie.empty&&ie.head==$)&&Z.setSelection(ie)}return o&&Z.setMeta("composition",o),Z.scrollIntoView()},Y;if(I)if(E.pos==C.pos){un&&ms<=11&&E.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Nr(n),20));let V=_(n.state.tr.delete($,X)),Z=g.resolve(k.start).marksAcross(g.resolve(k.endA));Z&&V.ensureMarks(Z),n.dispatch(V)}else if(k.endA==k.endB&&(Y=gw(E.parent.content.cut(E.parentOffset,C.parentOffset),M.parent.content.cut(M.parentOffset,k.endA-M.start())))){let V=_(n.state.tr);Y.type=="add"?V.addMark($,X,Y.mark):V.removeMark($,X,Y.mark),n.dispatch(V)}else if(E.parent.child(E.index()).isText&&E.index()==C.index()-(C.textOffset?0:1)){let V=E.parent.textBetween(E.parentOffset,C.parentOffset),Z=()=>_(n.state.tr.insertText(V,$,X));n.someProp("handleTextInput",ie=>ie(n,$,X,V,Z))||n.dispatch(Z())}else n.dispatch(_());else n.dispatch(_())}function nx(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Ep(n,e.resolve(t.anchor),e.resolve(t.head))}function gw(n,e){let t=n.firstChild.marks,s=e.firstChild.marks,l=t,o=s,c,f,d;for(let g=0;g<s.length;g++)l=s[g].removeFromSet(l);for(let g=0;g<t.length;g++)o=t[g].removeFromSet(o);if(l.length==1&&o.length==0)f=l[0],c="add",d=g=>g.mark(f.addToSet(g.marks));else if(l.length==0&&o.length==1)f=o[0],c="remove",d=g=>g.mark(f.removeFromSet(g.marks));else return null;let p=[];for(let g=0;g<e.childCount;g++)p.push(d(e.child(g)));if(W.from(p).eq(n))return{mark:f,type:c}}function yw(n,e,t,s,l){if(t-e<=l.pos-s.pos||dh(s,!0,!1)<l.pos)return!1;let o=n.resolve(e);if(!s.parent.isTextblock){let f=o.nodeAfter;return f!=null&&t==e+f.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let c=n.resolve(dh(o,!0,!0));return!c.parent.isTextblock||c.pos>t||dh(c,!0,!1)<t?!1:s.parent.content.cut(s.parentOffset).eq(c.parent.content)}function dh(n,e,t){let s=n.depth,l=e?n.end():n.pos;for(;s>0&&(e||n.indexAfter(s)==n.node(s).childCount);)s--,l++,e=!1;if(t){let o=n.node(s).maybeChild(n.indexAfter(s));for(;o&&!o.isLeaf;)o=o.firstChild,l++}return l}function bw(n,e,t,s,l){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:c,b:f}=n.findDiffEnd(e,t+n.size,t+e.size);if(l=="end"){let d=Math.max(0,o-Math.min(c,f));s-=c+d-o}if(c<o&&n.size<e.size){let d=s<=o&&s>=c?o-s:0;o-=d,o&&o<e.size&&rx(e.textBetween(o-1,o+1))&&(o+=d?1:-1),f=o+(f-c),c=o}else if(f<o){let d=s<=o&&s>=f?o-s:0;o-=d,o&&o<n.size&&rx(n.textBetween(o-1,o+1))&&(o+=d?1:-1),c=o+(c-f),f=o}return{start:o,endA:c,endB:f}}function rx(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class vv{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new zM,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(ax),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=lx(this),ix(this),this.nodeViews=ox(this),this.docView=Hb(this.state.doc,sx(this),fh(this),this.dom,this),this.domObserver=new ow(this,(s,l,o,c)=>mw(this,s,l,o,c)),this.domObserver.start(),LM(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ph(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(ax),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let s in this._props)t[s]=this._props[s];t.state=this.state;for(let s in e)t[s]=e[s];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var s;let l=this.state,o=!1,c=!1;e.storedMarks&&this.composing&&(hv(this),c=!0),this.state=e;let f=l.plugins!=e.plugins||this._props.plugins!=t.plugins;if(f||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=ox(this);vw(v,this.nodeViews)&&(this.nodeViews=v,o=!0)}(f||t.handleDOMEvents!=this._props.handleDOMEvents)&&Ph(this),this.editable=lx(this),ix(this);let d=fh(this),p=sx(this),g=l.plugins!=e.plugins&&!l.doc.eq(e.doc)?"reset":e.scrollToSelection>l.scrollToSelection?"to selection":"preserve",y=o||!this.docView.matchesNode(e.doc,p,d);(y||!e.selection.eq(l.selection))&&(c=!0);let x=g=="preserve"&&c&&this.dom.style.overflowAnchor==null&&FC(this);if(c){this.domObserver.stop();let v=y&&(un||Gt)&&!this.composing&&!l.selection.empty&&!e.selection.empty&&xw(l.selection,e.selection);if(y){let k=Gt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=FM(this)),(o||!this.docView.update(e.doc,p,d,this))&&(this.docView.updateOuterDeco(p),this.docView.destroy(),this.docView=Hb(e.doc,p,d,this.dom,this)),k&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&xM(this))?Nr(this,v):(tv(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(l),!((s=this.dragging)===null||s===void 0)&&s.node&&!l.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,l),g=="reset"?this.dom.scrollTop=0:g=="to selection"?this.scrollToSelection():x&&XC(x)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Se){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&jb(this,t.getBoundingClientRect(),e)}else jb(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let s=this.directPlugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let s=this.state.plugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let s=this.pluginViews[t];s.update&&s.update(this,e)}}updateDraggedNode(e,t){let s=e.node,l=-1;if(this.state.doc.nodeAt(s.from)==s.node)l=s.from;else{let o=s.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==s.node&&(l=o)}this.dragging=new mv(e.slice,e.move,l<0?void 0:Se.create(this.state.doc,l))}someProp(e,t){let s=this._props&&this._props[e],l;if(s!=null&&(l=t?t(s):s))return l;for(let c=0;c<this.directPlugins.length;c++){let f=this.directPlugins[c].props[e];if(f!=null&&(l=t?t(f):f))return l}let o=this.state.plugins;if(o)for(let c=0;c<o.length;c++){let f=o[c].props[e];if(f!=null&&(l=t?t(f):f))return l}}hasFocus(){if(un){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&QC(this.dom),Nr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return nM(this,e)}coordsAtPos(e,t=1){return P1(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,s=-1){let l=this.docView.posFromDOM(e,t,s);if(l==null)throw new RangeError("DOM position not inside the editor");return l}endOfTextblock(e,t){return oM(this,t||this.state,e)}pasteHTML(e,t){return Ao(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Ao(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Cp(this,e)}destroy(){this.docView&&(_M(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],fh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,UC())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return HM(this,e)}domSelectionRange(){let e=this.domSelection();return e?Jt&&this.root.nodeType===11&&GC(this.dom.ownerDocument)==this.dom&&cw(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}vv.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function sx(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let s in t)s=="class"?e.class+=" "+t[s]:s=="style"?e.style=(e.style?e.style+";":"")+t[s]:!e[s]&&s!="contenteditable"&&s!="nodeName"&&(e[s]=String(t[s]))}),e.translate||(e.translate="no"),[Qt.node(0,n.state.doc.content.size,e)]}function ix(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Qt.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function lx(n){return!n.someProp("editable",e=>e(n.state)===!1)}function xw(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function ox(n){let e=Object.create(null);function t(s){for(let l in s)Object.prototype.hasOwnProperty.call(e,l)||(e[l]=s[l])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function vw(n,e){let t=0,s=0;for(let l in n){if(n[l]!=e[l])return!0;t++}for(let l in e)s++;return t!=s}function ax(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var bs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},jc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Sw=typeof navigator<"u"&&/Mac/.test(navigator.platform),kw=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var $t=0;$t<10;$t++)bs[48+$t]=bs[96+$t]=String($t);for(var $t=1;$t<=24;$t++)bs[$t+111]="F"+$t;for(var $t=65;$t<=90;$t++)bs[$t]=String.fromCharCode($t+32),jc[$t]=String.fromCharCode($t);for(var hh in bs)jc.hasOwnProperty(hh)||(jc[hh]=bs[hh]);function Tw(n){var e=Sw&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||kw&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?jc:bs)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const Ew=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Cw=typeof navigator<"u"&&/Win/.test(navigator.platform);function Mw(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let s,l,o,c;for(let f=0;f<e.length-1;f++){let d=e[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))Ew?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(t="Alt-"+t),l&&(t="Ctrl-"+t),c&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function ww(n){let e=Object.create(null);for(let t in n)e[Mw(t)]=n[t];return e}function ph(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function Nw(n){return new pt({props:{handleKeyDown:Sv(n)}})}function Sv(n){let e=ww(n);return function(t,s){let l=Tw(s),o,c=e[ph(l,s)];if(c&&c(t.state,t.dispatch,t))return!0;if(l.length==1&&l!=" "){if(s.shiftKey){let f=e[ph(l,s,!1)];if(f&&f(t.state,t.dispatch,t))return!0}if((s.altKey||s.metaKey||s.ctrlKey)&&!(Cw&&s.ctrlKey&&s.altKey)&&(o=bs[s.keyCode])&&o!=l){let f=e[ph(o,s)];if(f&&f(t.state,t.dispatch,t))return!0}}return!1}}var Aw=Object.defineProperty,Dp=(n,e)=>{for(var t in e)Aw(n,t,{get:e[t],enumerable:!0})};function xu(n){const{state:e,transaction:t}=n;let{selection:s}=t,{doc:l}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return s},get doc(){return l},get tr(){return s=t.selection,l=t.doc,o=t.storedMarks,t}}}var vu=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:e,state:t}=this,{view:s}=e,{tr:l}=t,o=this.buildProps(l);return Object.fromEntries(Object.entries(n).map(([c,f])=>[c,(...p)=>{const g=f(...p)(o);return!l.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(l),g}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,e=!0){const{rawCommands:t,editor:s,state:l}=this,{view:o}=s,c=[],f=!!n,d=n||l.tr,p=()=>(!f&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(d),c.every(y=>y===!0)),g={...Object.fromEntries(Object.entries(t).map(([y,x])=>[y,(...k)=>{const E=this.buildProps(d,e),C=x(...k)(E);return c.push(C),g}])),run:p};return g}createCan(n){const{rawCommands:e,state:t}=this,s=!1,l=n||t.tr,o=this.buildProps(l,s);return{...Object.fromEntries(Object.entries(e).map(([f,d])=>[f,(...p)=>d(...p)({...o,dispatch:void 0})])),chain:()=>this.createChain(l,s)}}buildProps(n,e=!0){const{rawCommands:t,editor:s,state:l}=this,{view:o}=s,c={tr:n,editor:s,view:o,state:xu({state:l,transaction:n}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(n,e),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,(...p)=>d(...p)(c)]))}};return c}},kv={};Dp(kv,{blur:()=>Ow,clearContent:()=>Dw,clearNodes:()=>jw,command:()=>Rw,createParagraphNear:()=>zw,cut:()=>Lw,deleteCurrentNode:()=>_w,deleteNode:()=>Bw,deleteRange:()=>Hw,deleteSelection:()=>Uw,enter:()=>Iw,exitCode:()=>qw,extendMarkRange:()=>Vw,first:()=>$w,focus:()=>Yw,forEach:()=>Kw,insertContent:()=>Pw,insertContentAt:()=>Xw,joinBackward:()=>Ww,joinDown:()=>Zw,joinForward:()=>e2,joinItemBackward:()=>t2,joinItemForward:()=>n2,joinTextblockBackward:()=>r2,joinTextblockForward:()=>s2,joinUp:()=>Qw,keyboardShortcut:()=>l2,lift:()=>o2,liftEmptyBlock:()=>a2,liftListItem:()=>c2,newlineInCode:()=>u2,resetAttributes:()=>f2,scrollIntoView:()=>d2,selectAll:()=>h2,selectNodeBackward:()=>p2,selectNodeForward:()=>m2,selectParentNode:()=>g2,selectTextblockEnd:()=>y2,selectTextblockStart:()=>b2,setContent:()=>x2,setMark:()=>U2,setMeta:()=>I2,setNode:()=>q2,setNodeSelection:()=>V2,setTextDirection:()=>$2,setTextSelection:()=>G2,sinkListItem:()=>Y2,splitBlock:()=>K2,splitListItem:()=>P2,toggleList:()=>J2,toggleMark:()=>F2,toggleNode:()=>X2,toggleWrap:()=>Q2,undoInputRule:()=>Z2,unsetAllMarks:()=>W2,unsetMark:()=>eN,unsetTextDirection:()=>tN,updateAttributes:()=>nN,wrapIn:()=>rN,wrapInList:()=>sN});var Ow=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window?.getSelection())==null||t.removeAllRanges())}),!0),Dw=(n=!0)=>({commands:e})=>e.setContent("",{emitUpdate:n}),jw=()=>({state:n,tr:e,dispatch:t})=>{const{selection:s}=e,{ranges:l}=s;return t&&l.forEach(({$from:o,$to:c})=>{n.doc.nodesBetween(o.pos,c.pos,(f,d)=>{if(f.type.isText)return;const{doc:p,mapping:g}=e,y=p.resolve(g.map(d)),x=p.resolve(g.map(d+f.nodeSize)),v=y.blockRange(x);if(!v)return;const k=cl(v);if(f.type.isTextblock){const{defaultType:E}=y.parent.contentMatchAt(y.index());e.setNodeMarkup(v.start,E)}(k||k===0)&&e.lift(v,k)})}),!0},Rw=n=>e=>n(e),zw=()=>({state:n,dispatch:e})=>_1(n,e),Lw=(n,e)=>({editor:t,tr:s})=>{const{state:l}=t,o=l.doc.slice(n.from,n.to);s.deleteRange(n.from,n.to);const c=s.mapping.map(e);return s.insert(c,o.content),s.setSelection(new Ce(s.doc.resolve(Math.max(c-1,0)))),!0},_w=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,s=t.$anchor.node();if(s.content.size>0)return!1;const l=n.selection.$anchor;for(let o=l.depth;o>0;o-=1)if(l.node(o).type===s.type){if(e){const f=l.before(o),d=l.after(o);n.delete(f,d).scrollIntoView()}return!0}return!1};function wt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}var Bw=n=>({tr:e,state:t,dispatch:s})=>{const l=wt(n,t.schema),o=e.selection.$anchor;for(let c=o.depth;c>0;c-=1)if(o.node(c).type===l){if(s){const d=o.before(c),p=o.after(c);e.delete(d,p).scrollIntoView()}return!0}return!1},Hw=n=>({tr:e,dispatch:t})=>{const{from:s,to:l}=n;return t&&e.delete(s,l),!0},Uw=()=>({state:n,dispatch:e})=>yp(n,e),Iw=()=>({commands:n})=>n.keyboardShortcut("Enter"),qw=()=>({state:n,dispatch:e})=>EC(n,e);function jp(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function Rc(n,e,t={strict:!0}){const s=Object.keys(e);return s.length?s.every(l=>t.strict?e[l]===n[l]:jp(e[l])?e[l].test(n[l]):e[l]===n[l]):!0}function Tv(n,e,t={}){return n.find(s=>s.type===e&&Rc(Object.fromEntries(Object.keys(t).map(l=>[l,s.attrs[l]])),t))}function cx(n,e,t={}){return!!Tv(n,e,t)}function Rp(n,e,t){var s;if(!n||!e)return;let l=n.parent.childAfter(n.parentOffset);if((!l.node||!l.node.marks.some(g=>g.type===e))&&(l=n.parent.childBefore(n.parentOffset)),!l.node||!l.node.marks.some(g=>g.type===e)||(t=t||((s=l.node.marks[0])==null?void 0:s.attrs),!Tv([...l.node.marks],e,t)))return;let c=l.index,f=n.start()+l.offset,d=c+1,p=f+l.node.nodeSize;for(;c>0&&cx([...n.parent.child(c-1).marks],e,t);)c-=1,f-=n.parent.child(c).nodeSize;for(;d<n.parent.childCount&&cx([...n.parent.child(d).marks],e,t);)p+=n.parent.child(d).nodeSize,d+=1;return{from:f,to:p}}function Ar(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}var Vw=(n,e={})=>({tr:t,state:s,dispatch:l})=>{const o=Ar(n,s.schema),{doc:c,selection:f}=t,{$from:d,from:p,to:g}=f;if(l){const y=Rp(d,o,e);if(y&&y.from<=p&&y.to>=g){const x=Ce.create(c,y.from,y.to);t.setSelection(x)}}return!0},$w=n=>e=>{const t=typeof n=="function"?n(e):n;for(let s=0;s<t.length;s+=1)if(t[s](e))return!0;return!1};function Ev(n){return n instanceof Ce}function Ps(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Cv(n,e=null){if(!e)return null;const t=Le.atStart(n),s=Le.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return s;const l=t.from,o=s.to;return e==="all"?Ce.create(n,Ps(0,l,o),Ps(n.content.size,l,o)):Ce.create(n,Ps(e,l,o),Ps(e,l,o))}function ux(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function zc(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Gw(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Yw=(n=null,e={})=>({editor:t,view:s,tr:l,dispatch:o})=>{e={scrollIntoView:!0,...e};const c=()=>{(zc()||ux())&&s.dom.focus(),Gw()&&!zc()&&!ux()&&s.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{t.isDestroyed||(s.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};try{if(s.hasFocus()&&n===null||n===!1)return!0}catch{return!1}if(o&&n===null&&!Ev(t.state.selection))return c(),!0;const f=Cv(l.doc,n)||t.state.selection,d=t.state.selection.eq(f);return o&&(d||l.setSelection(f),d&&l.storedMarks&&l.setStoredMarks(l.storedMarks),c()),!0},Kw=(n,e)=>t=>n.every((s,l)=>e(s,{...t,index:l})),Pw=(n,e)=>({tr:t,commands:s})=>s.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Mv=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const s=e[t];s.nodeType===3&&s.nodeValue&&/^(\n\s\s|\n)$/.test(s.nodeValue)?n.removeChild(s):s.nodeType===1&&Mv(s)}return n};function lc(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Mv(t)}function Do(n,e,t){if(n instanceof Yn||n instanceof W)return n;t={slice:!0,parseOptions:{},...t};const s=typeof n=="object"&&n!==null,l=typeof n=="string";if(s)try{if(Array.isArray(n)&&n.length>0)return W.fromArray(n.map(f=>e.nodeFromJSON(f)));const c=e.nodeFromJSON(n);return t.errorOnInvalidContent&&c.check(),c}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),Do("",e,t)}if(l){if(t.errorOnInvalidContent){let c=!1,f="";const d=new c1({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:p=>(c=!0,f=typeof p=="string"?p:p.outerHTML,null)}]}})});if(t.slice?ps.fromSchema(d).parseSlice(lc(n),t.parseOptions):ps.fromSchema(d).parse(lc(n),t.parseOptions),t.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${f}`)})}const o=ps.fromSchema(e);return t.slice?o.parseSlice(lc(n),t.parseOptions).content:o.parse(lc(n),t.parseOptions)}return Do("",e,t)}function Jw(n,e,t){const s=n.steps.length-1;if(s<e)return;const l=n.steps[s];if(!(l instanceof Rt||l instanceof zt))return;const o=n.mapping.maps[s];let c=0;o.forEach((f,d,p,g)=>{c===0&&(c=g)}),n.setSelection(Le.near(n.doc.resolve(c),t))}var Fw=n=>!("type"in n),Xw=(n,e,t)=>({tr:s,dispatch:l,editor:o})=>{var c;if(l){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let f;const d=C=>{o.emit("contentError",{editor:o,error:C,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},p={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Do(e,o.schema,{parseOptions:p,errorOnInvalidContent:!0})}catch(C){d(C)}try{f=Do(e,o.schema,{parseOptions:p,errorOnInvalidContent:(c=t.errorOnInvalidContent)!=null?c:o.options.enableContentCheck})}catch(C){return d(C),!1}let{from:g,to:y}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},x=!0,v=!0;if((Fw(f)?f:[f]).forEach(C=>{C.check(),x=x?C.isText&&C.marks.length===0:!1,v=v?C.isBlock:!1}),g===y&&v){const{parent:C}=s.doc.resolve(g);C.isTextblock&&!C.type.spec.code&&!C.childCount&&(g-=1,y+=1)}let E;if(x){if(Array.isArray(e))E=e.map(C=>C.text||"").join("");else if(e instanceof W){let C="";e.forEach(M=>{M.text&&(C+=M.text)}),E=C}else typeof e=="object"&&e&&e.text?E=e.text:E=e;s.insertText(E,g,y)}else{E=f;const C=s.doc.resolve(g),M=C.node(),I=C.parentOffset===0,$=M.isText||M.isTextblock,X=M.content.size>0;I&&$&&X&&(g=Math.max(0,g-1)),s.replaceWith(g,y,E)}t.updateSelection&&Jw(s,s.steps.length-1,-1),t.applyInputRules&&s.setMeta("applyInputRules",{from:g,text:E}),t.applyPasteRules&&s.setMeta("applyPasteRules",{from:g,text:E})}return!0},Qw=()=>({state:n,dispatch:e})=>SC(n,e),Zw=()=>({state:n,dispatch:e})=>kC(n,e),Ww=()=>({state:n,dispatch:e})=>A1(n,e),e2=()=>({state:n,dispatch:e})=>R1(n,e),t2=()=>({state:n,dispatch:e,tr:t})=>{try{const s=hu(n.doc,n.selection.$from.pos,-1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},n2=()=>({state:n,dispatch:e,tr:t})=>{try{const s=hu(n.doc,n.selection.$from.pos,1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},r2=()=>({state:n,dispatch:e})=>xC(n,e),s2=()=>({state:n,dispatch:e})=>vC(n,e);function wv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function i2(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let s,l,o,c;for(let f=0;f<e.length-1;f+=1){const d=e[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))zc()||wv()?c=!0:l=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return s&&(t=`Alt-${t}`),l&&(t=`Ctrl-${t}`),c&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}var l2=n=>({editor:e,view:t,tr:s,dispatch:l})=>{const o=i2(n).split(/-(?!$)/),c=o.find(p=>!["Alt","Ctrl","Meta","Shift"].includes(p)),f=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",p=>p(t,f))});return d?.steps.forEach(p=>{const g=p.map(s.mapping);g&&l&&s.maybeStep(g)}),!0};function xs(n,e,t={}){const{from:s,to:l,empty:o}=n.selection,c=e?wt(e,n.schema):null,f=[];n.doc.nodesBetween(s,l,(y,x)=>{if(y.isText)return;const v=Math.max(s,x),k=Math.min(l,x+y.nodeSize);f.push({node:y,from:v,to:k})});const d=l-s,p=f.filter(y=>c?c.name===y.node.type.name:!0).filter(y=>Rc(y.node.attrs,t,{strict:!1}));return o?!!p.length:p.reduce((y,x)=>y+x.to-x.from,0)>=d}var o2=(n,e={})=>({state:t,dispatch:s})=>{const l=wt(n,t.schema);return xs(t,l,e)?TC(t,s):!1},a2=()=>({state:n,dispatch:e})=>B1(n,e),c2=n=>({state:e,dispatch:t})=>{const s=wt(n,e.schema);return LC(s)(e,t)},u2=()=>({state:n,dispatch:e})=>L1(n,e);function Su(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function fx(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((s,l)=>(t.includes(l)||(s[l]=n[l]),s),{})}var f2=(n,e)=>({tr:t,state:s,dispatch:l})=>{let o=null,c=null;const f=Su(typeof n=="string"?n:n.name,s.schema);if(!f)return!1;f==="node"&&(o=wt(n,s.schema)),f==="mark"&&(c=Ar(n,s.schema));let d=!1;return t.selection.ranges.forEach(p=>{s.doc.nodesBetween(p.$from.pos,p.$to.pos,(g,y)=>{o&&o===g.type&&(d=!0,l&&t.setNodeMarkup(y,void 0,fx(g.attrs,e))),c&&g.marks.length&&g.marks.forEach(x=>{c===x.type&&(d=!0,l&&t.addMark(y,y+g.nodeSize,c.create(fx(x.attrs,e))))})})}),d},d2=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),h2=()=>({tr:n,dispatch:e})=>{if(e){const t=new Sn(n.doc);n.setSelection(t)}return!0},p2=()=>({state:n,dispatch:e})=>D1(n,e),m2=()=>({state:n,dispatch:e})=>z1(n,e),g2=()=>({state:n,dispatch:e})=>wC(n,e),y2=()=>({state:n,dispatch:e})=>OC(n,e),b2=()=>({state:n,dispatch:e})=>AC(n,e);function Jh(n,e,t={},s={}){return Do(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:s.errorOnInvalidContent})}var x2=(n,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:s={}}={})=>({editor:l,tr:o,dispatch:c,commands:f})=>{const{doc:d}=o;if(s.preserveWhitespace!=="full"){const p=Jh(n,l.schema,s,{errorOnInvalidContent:e??l.options.enableContentCheck});return c&&o.replaceWith(0,d.content.size,p).setMeta("preventUpdate",!t),!0}return c&&o.setMeta("preventUpdate",!t),f.insertContentAt({from:0,to:d.content.size},n,{parseOptions:s,errorOnInvalidContent:e??l.options.enableContentCheck})};function Nv(n,e){const t=Ar(e,n.schema),{from:s,to:l,empty:o}=n.selection,c=[];o?(n.storedMarks&&c.push(...n.storedMarks),c.push(...n.selection.$head.marks())):n.doc.nodesBetween(s,l,d=>{c.push(...d.marks)});const f=c.find(d=>d.type.name===t.name);return f?{...f.attrs}:{}}function Av(n,e){const t=new C1(n);return e.forEach(s=>{s.steps.forEach(l=>{t.step(l)})}),t}function v2(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function S2(n,e,t){const s=[];return n.nodesBetween(e.from,e.to,(l,o)=>{t(l)&&s.push({node:l,pos:o})}),s}function k2(n,e){for(let t=n.depth;t>0;t-=1){const s=n.node(t);if(e(s))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:s}}}function ku(n){return e=>k2(e.$from,n)}function ye(n,e,t){return n.config[e]===void 0&&n.parent?ye(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?ye(n.parent,e,t):null}):n.config[e]}function zp(n){return n.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},s=ye(e,"addExtensions",t);return s?[e,...zp(s())]:e}).flat(10)}function Lp(n,e){const t=ii.fromSchema(e).serializeFragment(n),l=document.implementation.createHTMLDocument().createElement("div");return l.appendChild(t),l.innerHTML}function Ov(n){return typeof n=="function"}function We(n,e=void 0,...t){return Ov(n)?e?n.bind(e)(...t):n(...t):n}function T2(n={}){return Object.keys(n).length===0&&n.constructor===Object}function ll(n){const e=n.filter(l=>l.type==="extension"),t=n.filter(l=>l.type==="node"),s=n.filter(l=>l.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:s}}function Dv(n){const e=[],{nodeExtensions:t,markExtensions:s}=ll(n),l=[...t,...s],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(c=>{const f={name:c.name,options:c.options,storage:c.storage,extensions:l},d=ye(c,"addGlobalAttributes",f);if(!d)return;d().forEach(g=>{g.types.forEach(y=>{Object.entries(g.attributes).forEach(([x,v])=>{e.push({type:y,name:x,attribute:{...o,...v}})})})})}),l.forEach(c=>{const f={name:c.name,options:c.options,storage:c.storage},d=ye(c,"addAttributes",f);if(!d)return;const p=d();Object.entries(p).forEach(([g,y])=>{const x={...o,...y};typeof x?.default=="function"&&(x.default=x.default()),x?.isRequired&&x?.default===void 0&&delete x.default,e.push({type:c.name,name:g,attribute:x})})}),e}function Nt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const s={...e};return Object.entries(t).forEach(([l,o])=>{if(!s[l]){s[l]=o;return}if(l==="class"){const f=o?String(o).split(" "):[],d=s[l]?s[l].split(" "):[],p=f.filter(g=>!d.includes(g));s[l]=[...d,...p].join(" ")}else if(l==="style"){const f=o?o.split(";").map(g=>g.trim()).filter(Boolean):[],d=s[l]?s[l].split(";").map(g=>g.trim()).filter(Boolean):[],p=new Map;d.forEach(g=>{const[y,x]=g.split(":").map(v=>v.trim());p.set(y,x)}),f.forEach(g=>{const[y,x]=g.split(":").map(v=>v.trim());p.set(y,x)}),s[l]=Array.from(p.entries()).map(([g,y])=>`${g}: ${y}`).join("; ")}else s[l]=o}),s},{})}function jo(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,s)=>Nt(t,s),{})}function E2(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function dx(n,e){return"style"in n?n:{...n,getAttrs:t=>{const s=n.getAttrs?n.getAttrs(t):n.attrs;if(s===!1)return!1;const l=e.reduce((o,c)=>{const f=c.attribute.parseHTML?c.attribute.parseHTML(t):E2(t.getAttribute(c.name));return f==null?o:{...o,[c.name]:f}},{});return{...s,...l}}}}function hx(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&T2(t)?!1:t!=null))}function px(n){var e,t;const s={};return!((e=n?.attribute)!=null&&e.isRequired)&&"default"in(n?.attribute||{})&&(s.default=n.attribute.default),((t=n?.attribute)==null?void 0:t.validate)!==void 0&&(s.validate=n.attribute.validate),[n.name,s]}function C2(n,e){var t;const s=Dv(n),{nodeExtensions:l,markExtensions:o}=ll(n),c=(t=l.find(p=>ye(p,"topNode")))==null?void 0:t.name,f=Object.fromEntries(l.map(p=>{const g=s.filter(M=>M.type===p.name),y={name:p.name,options:p.options,storage:p.storage,editor:e},x=n.reduce((M,I)=>{const $=ye(I,"extendNodeSchema",y);return{...M,...$?$(p):{}}},{}),v=hx({...x,content:We(ye(p,"content",y)),marks:We(ye(p,"marks",y)),group:We(ye(p,"group",y)),inline:We(ye(p,"inline",y)),atom:We(ye(p,"atom",y)),selectable:We(ye(p,"selectable",y)),draggable:We(ye(p,"draggable",y)),code:We(ye(p,"code",y)),whitespace:We(ye(p,"whitespace",y)),linebreakReplacement:We(ye(p,"linebreakReplacement",y)),defining:We(ye(p,"defining",y)),isolating:We(ye(p,"isolating",y)),attrs:Object.fromEntries(g.map(px))}),k=We(ye(p,"parseHTML",y));k&&(v.parseDOM=k.map(M=>dx(M,g)));const E=ye(p,"renderHTML",y);E&&(v.toDOM=M=>E({node:M,HTMLAttributes:jo(M,g)}));const C=ye(p,"renderText",y);return C&&(v.toText=C),[p.name,v]})),d=Object.fromEntries(o.map(p=>{const g=s.filter(C=>C.type===p.name),y={name:p.name,options:p.options,storage:p.storage,editor:e},x=n.reduce((C,M)=>{const I=ye(M,"extendMarkSchema",y);return{...C,...I?I(p):{}}},{}),v=hx({...x,inclusive:We(ye(p,"inclusive",y)),excludes:We(ye(p,"excludes",y)),group:We(ye(p,"group",y)),spanning:We(ye(p,"spanning",y)),code:We(ye(p,"code",y)),attrs:Object.fromEntries(g.map(px))}),k=We(ye(p,"parseHTML",y));k&&(v.parseDOM=k.map(C=>dx(C,g)));const E=ye(p,"renderHTML",y);return E&&(v.toDOM=C=>E({mark:C,HTMLAttributes:jo(C,g)})),[p.name,v]}));return new c1({topNode:c,nodes:f,marks:d})}function M2(n){const e=n.filter((t,s)=>n.indexOf(t)!==s);return Array.from(new Set(e))}function Lc(n){return n.sort((t,s)=>{const l=ye(t,"priority")||100,o=ye(s,"priority")||100;return l>o?-1:l<o?1:0})}function jv(n){const e=Lc(zp(n)),t=M2(e.map(s=>s.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),e}function Rv(n,e,t){const{from:s,to:l}=e,{blockSeparator:o=`

`,textSerializers:c={}}=t||{};let f="";return n.nodesBetween(s,l,(d,p,g,y)=>{var x;d.isBlock&&p>s&&(f+=o);const v=c?.[d.type.name];if(v)return g&&(f+=v({node:d,pos:p,parent:g,index:y,range:e})),!1;d.isText&&(f+=(x=d?.text)==null?void 0:x.slice(Math.max(s,p)-p,l-p))}),f}function w2(n,e){const t={from:0,to:n.content.size};return Rv(n,t,e)}function zv(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function N2(n,e){const t=wt(e,n.schema),{from:s,to:l}=n.selection,o=[];n.doc.nodesBetween(s,l,f=>{o.push(f)});const c=o.reverse().find(f=>f.type.name===t.name);return c?{...c.attrs}:{}}function Lv(n,e){const t=Su(typeof e=="string"?e:e.name,n.schema);return t==="node"?N2(n,e):t==="mark"?Nv(n,e):{}}function A2(n,e=JSON.stringify){const t={};return n.filter(s=>{const l=e(s);return Object.prototype.hasOwnProperty.call(t,l)?!1:t[l]=!0})}function O2(n){const e=A2(n);return e.length===1?e:e.filter((t,s)=>!e.filter((o,c)=>c!==s).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function _v(n){const{mapping:e,steps:t}=n,s=[];return e.maps.forEach((l,o)=>{const c=[];if(l.ranges.length)l.forEach((f,d)=>{c.push({from:f,to:d})});else{const{from:f,to:d}=t[o];if(f===void 0||d===void 0)return;c.push({from:f,to:d})}c.forEach(({from:f,to:d})=>{const p=e.slice(o).map(f,-1),g=e.slice(o).map(d),y=e.invert().map(p,-1),x=e.invert().map(g);s.push({oldRange:{from:y,to:x},newRange:{from:p,to:g}})})}),O2(s)}function _p(n,e,t){const s=[];return n===e?t.resolve(n).marks().forEach(l=>{const o=t.resolve(n),c=Rp(o,l.type);c&&s.push({mark:l,...c})}):t.nodesBetween(n,e,(l,o)=>{!l||l?.nodeSize===void 0||s.push(...l.marks.map(c=>({from:o,to:o+l.nodeSize,mark:c})))}),s}var D2=(n,e,t,s=20)=>{const l=n.doc.resolve(t);let o=s,c=null;for(;o>0&&c===null;){const f=l.node(o);f?.type.name===e?c=f:o-=1}return[c,o]};function oc(n,e){return e.nodes[n]||e.marks[n]||null}function bc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([s])=>{const l=n.find(o=>o.type===e&&o.name===s);return l?l.attribute.keepOnSplit:!1}))}var j2=(n,e=500)=>{let t="";const s=n.parentOffset;return n.parent.nodesBetween(Math.max(0,s-e),s,(l,o,c,f)=>{var d,p;const g=((p=(d=l.type.spec).toText)==null?void 0:p.call(d,{node:l,pos:o,parent:c,index:f}))||l.textContent||"%leaf%";t+=l.isAtom&&!l.isText?g:g.slice(0,Math.max(0,s-o))}),t};function Fh(n,e,t={}){const{empty:s,ranges:l}=n.selection,o=e?Ar(e,n.schema):null;if(s)return!!(n.storedMarks||n.selection.$from.marks()).filter(y=>o?o.name===y.type.name:!0).find(y=>Rc(y.attrs,t,{strict:!1}));let c=0;const f=[];if(l.forEach(({$from:y,$to:x})=>{const v=y.pos,k=x.pos;n.doc.nodesBetween(v,k,(E,C)=>{if(!E.isText&&!E.marks.length)return;const M=Math.max(v,C),I=Math.min(k,C+E.nodeSize),$=I-M;c+=$,f.push(...E.marks.map(X=>({mark:X,from:M,to:I})))})}),c===0)return!1;const d=f.filter(y=>o?o.name===y.mark.type.name:!0).filter(y=>Rc(y.mark.attrs,t,{strict:!1})).reduce((y,x)=>y+x.to-x.from,0),p=f.filter(y=>o?y.mark.type!==o&&y.mark.type.excludes(o):!0).reduce((y,x)=>y+x.to-x.from,0);return(d>0?d+p:d)>=c}function R2(n,e,t={}){if(!e)return xs(n,null,t)||Fh(n,null,t);const s=Su(e,n.schema);return s==="node"?xs(n,e,t):s==="mark"?Fh(n,e,t):!1}var z2=(n,e)=>{const{$from:t,$to:s,$anchor:l}=n.selection;if(e){const o=ku(f=>f.type.name===e)(n.selection);if(!o)return!1;const c=n.doc.resolve(o.pos+1);return l.pos+1===c.end()}return!(s.parentOffset<s.parent.nodeSize-2||t.pos!==s.pos)},L2=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function mx(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function gx(n,e){const{nodeExtensions:t}=ll(e),s=t.find(c=>c.name===n);if(!s)return!1;const l={name:s.name,options:s.options,storage:s.storage},o=We(ye(s,"group",l));return typeof o!="string"?!1:o.split(" ").includes("list")}function Tu(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var s;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((s=n.text)!=null?s:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let l=!0;return n.content.forEach(o=>{l!==!1&&(Tu(o,{ignoreWhitespace:t,checkChildren:e})||(l=!1))}),l}return!1}function Bv(n){return n instanceof Se}var Hv=class Uv{constructor(e){this.position=e}static fromJSON(e){return new Uv(e.position)}toJSON(){return{position:this.position}}};function _2(n,e){const t=e.mapping.mapResult(n.position);return{position:new Hv(t.pos),mapResult:t}}function B2(n){return new Hv(n)}function H2(n,e,t){var s;const{selection:l}=e;let o=null;if(Ev(l)&&(o=l.$cursor),o){const f=(s=n.storedMarks)!=null?s:o.marks();return o.parent.type.allowsMarkType(t)&&(!!t.isInSet(f)||!f.some(p=>p.type.excludes(t)))}const{ranges:c}=l;return c.some(({$from:f,$to:d})=>{let p=f.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(f.pos,d.pos,(g,y,x)=>{if(p)return!1;if(g.isInline){const v=!x||x.type.allowsMarkType(t),k=!!t.isInSet(g.marks)||!g.marks.some(E=>E.type.excludes(t));p=v&&k}return!p}),p})}var U2=(n,e={})=>({tr:t,state:s,dispatch:l})=>{const{selection:o}=t,{empty:c,ranges:f}=o,d=Ar(n,s.schema);if(l)if(c){const p=Nv(s,d);t.addStoredMark(d.create({...p,...e}))}else f.forEach(p=>{const g=p.$from.pos,y=p.$to.pos;s.doc.nodesBetween(g,y,(x,v)=>{const k=Math.max(v,g),E=Math.min(v+x.nodeSize,y);x.marks.find(M=>M.type===d)?x.marks.forEach(M=>{d===M.type&&t.addMark(k,E,d.create({...M.attrs,...e}))}):t.addMark(k,E,d.create(e))})});return H2(s,t,d)},I2=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),q2=(n,e={})=>({state:t,dispatch:s,chain:l})=>{const o=wt(n,t.schema);let c;return t.selection.$anchor.sameParent(t.selection.$head)&&(c=t.selection.$anchor.parent.attrs),o.isTextblock?l().command(({commands:f})=>Ab(o,{...c,...e})(t)?!0:f.clearNodes()).command(({state:f})=>Ab(o,{...c,...e})(f,s)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},V2=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,l=Ps(n,0,s.content.size),o=Se.create(s,l);e.setSelection(o)}return!0},$2=(n,e)=>({tr:t,state:s,dispatch:l})=>{const{selection:o}=s;let c,f;return typeof e=="number"?(c=e,f=e):e&&"from"in e&&"to"in e?(c=e.from,f=e.to):(c=o.from,f=o.to),l&&t.doc.nodesBetween(c,f,(d,p)=>{d.isText||t.setNodeMarkup(p,void 0,{...d.attrs,dir:n})}),!0},G2=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,{from:l,to:o}=typeof n=="number"?{from:n,to:n}:n,c=Ce.atStart(s).from,f=Ce.atEnd(s).to,d=Ps(l,c,f),p=Ps(o,c,f),g=Ce.create(s,d,p);e.setSelection(g)}return!0},Y2=n=>({state:e,dispatch:t})=>{const s=wt(n,e.schema);return HC(s)(e,t)};function yx(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const s=t.filter(l=>e?.includes(l.type.name));n.tr.ensureMarks(s)}}var K2=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:s,editor:l})=>{const{selection:o,doc:c}=e,{$from:f,$to:d}=o,p=l.extensionManager.attributes,g=bc(p,f.node().type.name,f.node().attrs);if(o instanceof Se&&o.node.isBlock)return!f.parentOffset||!wr(c,f.pos)?!1:(s&&(n&&yx(t,l.extensionManager.splittableMarks),e.split(f.pos).scrollIntoView()),!0);if(!f.parent.isBlock)return!1;const y=d.parentOffset===d.parent.content.size,x=f.depth===0?void 0:v2(f.node(-1).contentMatchAt(f.indexAfter(-1)));let v=y&&x?[{type:x,attrs:g}]:void 0,k=wr(e.doc,e.mapping.map(f.pos),1,v);if(!v&&!k&&wr(e.doc,e.mapping.map(f.pos),1,x?[{type:x}]:void 0)&&(k=!0,v=x?[{type:x,attrs:g}]:void 0),s){if(k&&(o instanceof Ce&&e.deleteSelection(),e.split(e.mapping.map(f.pos),1,v),x&&!y&&!f.parentOffset&&f.parent.type!==x)){const E=e.mapping.map(f.before()),C=e.doc.resolve(E);f.node(-1).canReplaceWith(C.index(),C.index()+1,x)&&e.setNodeMarkup(e.mapping.map(f.before()),x)}n&&yx(t,l.extensionManager.splittableMarks),e.scrollIntoView()}return k},P2=(n,e={})=>({tr:t,state:s,dispatch:l,editor:o})=>{var c;const f=wt(n,s.schema),{$from:d,$to:p}=s.selection,g=s.selection.node;if(g&&g.isBlock||d.depth<2||!d.sameParent(p))return!1;const y=d.node(-1);if(y.type!==f)return!1;const x=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==f||d.index(-2)!==d.node(-2).childCount-1)return!1;if(l){let M=W.empty;const I=d.index(-1)?1:d.index(-2)?2:3;for(let Z=d.depth-I;Z>=d.depth-3;Z-=1)M=W.from(d.node(Z).copy(M));const $=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,X={...bc(x,d.node().type.name,d.node().attrs),...e},_=((c=f.contentMatch.defaultType)==null?void 0:c.createAndFill(X))||void 0;M=M.append(W.from(f.createAndFill(null,_)||void 0));const Y=d.before(d.depth-(I-1));t.replace(Y,d.after(-$),new oe(M,4-I,0));let V=-1;t.doc.nodesBetween(Y,t.doc.content.size,(Z,ie)=>{if(V>-1)return!1;Z.isTextblock&&Z.content.size===0&&(V=ie+1)}),V>-1&&t.setSelection(Ce.near(t.doc.resolve(V))),t.scrollIntoView()}return!0}const v=p.pos===d.end()?y.contentMatchAt(0).defaultType:null,k={...bc(x,y.type.name,y.attrs),...e},E={...bc(x,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,p.pos);const C=v?[{type:f,attrs:k},{type:v,attrs:E}]:[{type:f,attrs:k}];if(!wr(t.doc,d.pos,2))return!1;if(l){const{selection:M,storedMarks:I}=s,{splittableMarks:$}=o.extensionManager,X=I||M.$to.parentOffset&&M.$from.marks();if(t.split(d.pos,2,C).scrollIntoView(),!X||!l)return!0;const _=X.filter(Y=>$.includes(Y.type.name));t.ensureMarks(_)}return!0},mh=(n,e)=>{const t=ku(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(s===void 0)return!0;const l=n.doc.nodeAt(s);return t.node.type===l?.type&&vs(n.doc,t.pos)&&n.join(t.pos),!0},gh=(n,e)=>{const t=ku(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(t.start).after(t.depth);if(s===void 0)return!0;const l=n.doc.nodeAt(s);return t.node.type===l?.type&&vs(n.doc,s)&&n.join(s),!0},J2=(n,e,t,s={})=>({editor:l,tr:o,state:c,dispatch:f,chain:d,commands:p,can:g})=>{const{extensions:y,splittableMarks:x}=l.extensionManager,v=wt(n,c.schema),k=wt(e,c.schema),{selection:E,storedMarks:C}=c,{$from:M,$to:I}=E,$=M.blockRange(I),X=C||E.$to.parentOffset&&E.$from.marks();if(!$)return!1;const _=ku(Y=>gx(Y.type.name,y))(E);if($.depth>=1&&_&&$.depth-_.depth<=1){if(_.node.type===v)return p.liftListItem(k);if(gx(_.node.type.name,y)&&v.validContent(_.node.content)&&f)return d().command(()=>(o.setNodeMarkup(_.pos,v),!0)).command(()=>mh(o,v)).command(()=>gh(o,v)).run()}return!t||!X||!f?d().command(()=>g().wrapInList(v,s)?!0:p.clearNodes()).wrapInList(v,s).command(()=>mh(o,v)).command(()=>gh(o,v)).run():d().command(()=>{const Y=g().wrapInList(v,s),V=X.filter(Z=>x.includes(Z.type.name));return o.ensureMarks(V),Y?!0:p.clearNodes()}).wrapInList(v,s).command(()=>mh(o,v)).command(()=>gh(o,v)).run()},F2=(n,e={},t={})=>({state:s,commands:l})=>{const{extendEmptyMarkRange:o=!1}=t,c=Ar(n,s.schema);return Fh(s,c,e)?l.unsetMark(c,{extendEmptyMarkRange:o}):l.setMark(c,e)},X2=(n,e,t={})=>({state:s,commands:l})=>{const o=wt(n,s.schema),c=wt(e,s.schema),f=xs(s,o,t);let d;return s.selection.$anchor.sameParent(s.selection.$head)&&(d=s.selection.$anchor.parent.attrs),f?l.setNode(c,d):l.setNode(o,{...d,...t})},Q2=(n,e={})=>({state:t,commands:s})=>{const l=wt(n,t.schema);return xs(t,l,e)?s.lift(l):s.wrapIn(l,e)},Z2=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let s=0;s<t.length;s+=1){const l=t[s];let o;if(l.spec.isInputRules&&(o=l.getState(n))){if(e){const c=n.tr,f=o.transform;for(let d=f.steps.length-1;d>=0;d-=1)c.step(f.steps[d].invert(f.docs[d]));if(o.text){const d=c.doc.resolve(o.from).marks();c.replaceWith(o.from,o.to,n.schema.text(o.text,d))}else c.delete(o.from,o.to)}return!0}}return!1},W2=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:s,ranges:l}=t;return s||e&&l.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},eN=(n,e={})=>({tr:t,state:s,dispatch:l})=>{var o;const{extendEmptyMarkRange:c=!1}=e,{selection:f}=t,d=Ar(n,s.schema),{$from:p,empty:g,ranges:y}=f;if(!l)return!0;if(g&&c){let{from:x,to:v}=f;const k=(o=p.marks().find(C=>C.type===d))==null?void 0:o.attrs,E=Rp(p,d,k);E&&(x=E.from,v=E.to),t.removeMark(x,v,d)}else y.forEach(x=>{t.removeMark(x.$from.pos,x.$to.pos,d)});return t.removeStoredMark(d),!0},tN=n=>({tr:e,state:t,dispatch:s})=>{const{selection:l}=t;let o,c;return typeof n=="number"?(o=n,c=n):n&&"from"in n&&"to"in n?(o=n.from,c=n.to):(o=l.from,c=l.to),s&&e.doc.nodesBetween(o,c,(f,d)=>{if(f.isText)return;const p={...f.attrs};delete p.dir,e.setNodeMarkup(d,void 0,p)}),!0},nN=(n,e={})=>({tr:t,state:s,dispatch:l})=>{let o=null,c=null;const f=Su(typeof n=="string"?n:n.name,s.schema);if(!f)return!1;f==="node"&&(o=wt(n,s.schema)),f==="mark"&&(c=Ar(n,s.schema));let d=!1;return t.selection.ranges.forEach(p=>{const g=p.$from.pos,y=p.$to.pos;let x,v,k,E;t.selection.empty?s.doc.nodesBetween(g,y,(C,M)=>{o&&o===C.type&&(d=!0,k=Math.max(M,g),E=Math.min(M+C.nodeSize,y),x=M,v=C)}):s.doc.nodesBetween(g,y,(C,M)=>{M<g&&o&&o===C.type&&(d=!0,k=Math.max(M,g),E=Math.min(M+C.nodeSize,y),x=M,v=C),M>=g&&M<=y&&(o&&o===C.type&&(d=!0,l&&t.setNodeMarkup(M,void 0,{...C.attrs,...e})),c&&C.marks.length&&C.marks.forEach(I=>{if(c===I.type&&(d=!0,l)){const $=Math.max(M,g),X=Math.min(M+C.nodeSize,y);t.addMark($,X,c.create({...I.attrs,...e}))}}))}),v&&(x!==void 0&&l&&t.setNodeMarkup(x,void 0,{...v.attrs,...e}),c&&v.marks.length&&v.marks.forEach(C=>{c===C.type&&l&&t.addMark(k,E,c.create({...C.attrs,...e}))}))}),d},rN=(n,e={})=>({state:t,dispatch:s})=>{const l=wt(n,t.schema);return DC(l,e)(t,s)},sN=(n,e={})=>({state:t,dispatch:s})=>{const l=wt(n,t.schema);return jC(l,e)(t,s)},iN=class{constructor(){this.callbacks={}}on(n,e){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(e),this}emit(n,...e){const t=this.callbacks[n];return t&&t.forEach(s=>s.apply(this,e)),this}off(n,e){const t=this.callbacks[n];return t&&(e?this.callbacks[n]=t.filter(s=>s!==e):delete this.callbacks[n]),this}once(n,e){const t=(...s)=>{this.off(n,t),e.apply(this,s)};return this.on(n,t)}removeAllListeners(){this.callbacks={}}},Eu=class{constructor(n){var e;this.find=n.find,this.handler=n.handler,this.undoable=(e=n.undoable)!=null?e:!0}},lN=(n,e)=>{if(jp(e))return e.exec(n);const t=e(n);if(!t)return null;const s=[t.text];return s.index=t.index,s.input=n,s.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),s.push(t.replaceWith)),s};function ac(n){var e;const{editor:t,from:s,to:l,text:o,rules:c,plugin:f}=n,{view:d}=t;if(d.composing)return!1;const p=d.state.doc.resolve(s);if(p.parent.type.spec.code||(e=p.nodeBefore||p.nodeAfter)!=null&&e.marks.find(x=>x.type.spec.code))return!1;let g=!1;const y=j2(p)+o;return c.forEach(x=>{if(g)return;const v=lN(y,x.find);if(!v)return;const k=d.state.tr,E=xu({state:d.state,transaction:k}),C={from:s-(v[0].length-o.length),to:l},{commands:M,chain:I,can:$}=new vu({editor:t,state:E});x.handler({state:E,range:C,match:v,commands:M,chain:I,can:$})===null||!k.steps.length||(x.undoable&&k.setMeta(f,{transform:k,from:s,to:l,text:o}),d.dispatch(k),g=!0)}),g}function oN(n){const{editor:e,rules:t}=n,s=new pt({state:{init(){return null},apply(l,o,c){const f=l.getMeta(s);if(f)return f;const d=l.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:g}=d;typeof g=="string"?g=g:g=Lp(W.from(g),c.schema);const{from:y}=d,x=y+g.length;ac({editor:e,from:y,to:x,text:g,rules:t,plugin:s})}),l.selectionSet||l.docChanged?null:o}},props:{handleTextInput(l,o,c,f){return ac({editor:e,from:o,to:c,text:f,rules:t,plugin:s})},handleDOMEvents:{compositionend:l=>(setTimeout(()=>{const{$cursor:o}=l.state.selection;o&&ac({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:s})}),!1)},handleKeyDown(l,o){if(o.key!=="Enter")return!1;const{$cursor:c}=l.state.selection;return c?ac({editor:e,from:c.pos,to:c.pos,text:`
`,rules:t,plugin:s}):!1}},isInputRules:!0});return s}function aN(n){return Object.prototype.toString.call(n).slice(8,-1)}function cc(n){return aN(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Iv(n,e){const t={...n};return cc(n)&&cc(e)&&Object.keys(e).forEach(s=>{cc(e[s])&&cc(n[s])?t[s]=Iv(n[s],e[s]):t[s]=e[s]}),t}var Bp=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...We(ye(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...We(ye(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const e=this.extend({...this.config,addOptions:()=>Iv(this.options,n)});return e.name=this.name,e.parent=this.parent,e}extend(n={}){const e=new this.constructor({...this.config,...n});return e.parent=this,this.child=e,e.name="name"in n?n.name:e.parent.name,e}},li=class qv extends Bp{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new qv(t)}static handleExit({editor:e,mark:t}){const{tr:s}=e.state,l=e.state.selection.$from;if(l.pos===l.end()){const c=l.marks();if(!!!c.find(p=>p?.type.name===t.name))return!1;const d=c.find(p=>p?.type.name===t.name);return d&&s.removeStoredMark(d),s.insertText(" ",l.pos),e.view.dispatch(s),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function cN(n){return typeof n=="number"}var uN=class{constructor(n){this.find=n.find,this.handler=n.handler}},fN=(n,e,t)=>{if(jp(e))return[...n.matchAll(e)];const s=e(n,t);return s?s.map(l=>{const o=[l.text];return o.index=l.index,o.input=n,o.data=l.data,l.replaceWith&&(l.text.includes(l.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(l.replaceWith)),o}):[]};function dN(n){const{editor:e,state:t,from:s,to:l,rule:o,pasteEvent:c,dropEvent:f}=n,{commands:d,chain:p,can:g}=new vu({editor:e,state:t}),y=[];return t.doc.nodesBetween(s,l,(v,k)=>{var E,C,M,I,$;if((C=(E=v.type)==null?void 0:E.spec)!=null&&C.code||!(v.isText||v.isTextblock||v.isInline))return;const X=($=(I=(M=v.content)==null?void 0:M.size)!=null?I:v.nodeSize)!=null?$:0,_=Math.max(s,k),Y=Math.min(l,k+X);if(_>=Y)return;const V=v.isText?v.text||"":v.textBetween(_-k,Y-k,void 0,"");fN(V,o.find,c).forEach(ie=>{if(ie.index===void 0)return;const Te=_+ie.index+1,$e=Te+ie[0].length,Oe={from:t.tr.mapping.map(Te),to:t.tr.mapping.map($e)},rt=o.handler({state:t,range:Oe,match:ie,commands:d,chain:p,can:g,pasteEvent:c,dropEvent:f});y.push(rt)})}),y.every(v=>v!==null)}var uc=null,hN=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",n),t};function pN(n){const{editor:e,rules:t}=n;let s=null,l=!1,o=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,f;try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}const d=({state:g,from:y,to:x,rule:v,pasteEvt:k})=>{const E=g.tr,C=xu({state:g,transaction:E});if(!(!dN({editor:e,state:C,from:Math.max(y-1,0),to:x.b-1,rule:v,pasteEvent:k,dropEvent:f})||!E.steps.length)){try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,E}};return t.map(g=>new pt({view(y){const x=k=>{var E;s=(E=y.dom.parentElement)!=null&&E.contains(k.target)?y.dom.parentElement:null,s&&(uc=e)},v=()=>{uc&&(uc=null)};return window.addEventListener("dragstart",x),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",x),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(y,x)=>{if(o=s===y.dom.parentElement,f=x,!o){const v=uc;v?.isEditable&&setTimeout(()=>{const k=v.state.selection;k&&v.commands.deleteRange({from:k.from,to:k.to})},10)}return!1},paste:(y,x)=>{var v;const k=(v=x.clipboardData)==null?void 0:v.getData("text/html");return c=x,l=!!k?.includes("data-pm-slice"),!1}}},appendTransaction:(y,x,v)=>{const k=y[0],E=k.getMeta("uiEvent")==="paste"&&!l,C=k.getMeta("uiEvent")==="drop"&&!o,M=k.getMeta("applyPasteRules"),I=!!M;if(!E&&!C&&!I)return;if(I){let{text:_}=M;typeof _=="string"?_=_:_=Lp(W.from(_),v.schema);const{from:Y}=M,V=Y+_.length,Z=hN(_);return d({rule:g,state:v,from:Y,to:{b:V},pasteEvt:Z})}const $=x.doc.content.findDiffStart(v.doc.content),X=x.doc.content.findDiffEnd(v.doc.content);if(!(!cN($)||!X||$===X.b))return d({rule:g,state:v,from:$,to:X,pasteEvt:c})}}))}var Cu=class{constructor(n,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=n,this.extensions=jv(n),this.schema=C2(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((n,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:oc(e.name,this.schema)},s=ye(e,"addCommands",t);return s?{...n,...s()}:n},{})}get plugins(){const{editor:n}=this;return Lc([...this.extensions].reverse()).flatMap(s=>{const l={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:n,type:oc(s.name,this.schema)},o=[],c=ye(s,"addKeyboardShortcuts",l);let f={};if(s.type==="mark"&&ye(s,"exitable",l)&&(f.ArrowRight=()=>li.handleExit({editor:n,mark:s})),c){const x=Object.fromEntries(Object.entries(c()).map(([v,k])=>[v,()=>k({editor:n})]));f={...f,...x}}const d=Nw(f);o.push(d);const p=ye(s,"addInputRules",l);if(mx(s,n.options.enableInputRules)&&p){const x=p();if(x&&x.length){const v=oN({editor:n,rules:x}),k=Array.isArray(v)?v:[v];o.push(...k)}}const g=ye(s,"addPasteRules",l);if(mx(s,n.options.enablePasteRules)&&g){const x=g();if(x&&x.length){const v=pN({editor:n,rules:x});o.push(...v)}}const y=ye(s,"addProseMirrorPlugins",l);if(y){const x=y();o.push(...x)}return o})}get attributes(){return Dv(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:e}=ll(this.extensions);return Object.fromEntries(e.filter(t=>!!ye(t,"addNodeView")).map(t=>{const s=this.attributes.filter(d=>d.type===t.name),l={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:wt(t.name,this.schema)},o=ye(t,"addNodeView",l);if(!o)return[];const c=o();if(!c)return[];const f=(d,p,g,y,x)=>{const v=jo(d,s);return c({node:d,view:p,getPos:g,decorations:y,innerDecorations:x,editor:n,extension:t,HTMLAttributes:v})};return[t.name,f]}))}dispatchTransaction(n){const{editor:e}=this;return Lc([...this.extensions].reverse()).reduceRight((s,l)=>{const o={name:l.name,options:l.options,storage:this.editor.extensionStorage[l.name],editor:e,type:oc(l.name,this.schema)},c=ye(l,"dispatchTransaction",o);return c?f=>{c.call(o,{transaction:f,next:s})}:s},n)}get markViews(){const{editor:n}=this,{markExtensions:e}=ll(this.extensions);return Object.fromEntries(e.filter(t=>!!ye(t,"addMarkView")).map(t=>{const s=this.attributes.filter(f=>f.type===t.name),l={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:Ar(t.name,this.schema)},o=ye(t,"addMarkView",l);if(!o)return[];const c=(f,d,p)=>{const g=jo(f,s);return o()({mark:f,view:d,inline:p,editor:n,extension:t,HTMLAttributes:g,updateAttributes:y=>{NN(f,n,y)}})};return[t.name,c]}))}setupExtensions(){const n=this.extensions;this.editor.extensionStorage=Object.fromEntries(n.map(e=>[e.name,e.storage])),n.forEach(e=>{var t;const s={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:oc(e.name,this.schema)};e.type==="mark"&&((t=We(ye(e,"keepOnSplit",s)))==null||t)&&this.splittableMarks.push(e.name);const l=ye(e,"onBeforeCreate",s),o=ye(e,"onCreate",s),c=ye(e,"onUpdate",s),f=ye(e,"onSelectionUpdate",s),d=ye(e,"onTransaction",s),p=ye(e,"onFocus",s),g=ye(e,"onBlur",s),y=ye(e,"onDestroy",s);l&&this.editor.on("beforeCreate",l),o&&this.editor.on("create",o),c&&this.editor.on("update",c),f&&this.editor.on("selectionUpdate",f),d&&this.editor.on("transaction",d),p&&this.editor.on("focus",p),g&&this.editor.on("blur",g),y&&this.editor.on("destroy",y)})}};Cu.resolve=jv;Cu.sort=Lc;Cu.flatten=zp;var mN={};Dp(mN,{ClipboardTextSerializer:()=>$v,Commands:()=>Gv,Delete:()=>Yv,Drop:()=>Kv,Editable:()=>Pv,FocusEvents:()=>Fv,Keymap:()=>Xv,Paste:()=>Qv,Tabindex:()=>Zv,TextDirection:()=>Wv,focusEventsPluginKey:()=>Jv});var St=class Vv extends Bp{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new Vv(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},$v=St.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new pt({key:new Ot("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:s,selection:l}=e,{ranges:o}=l,c=Math.min(...o.map(g=>g.$from.pos)),f=Math.max(...o.map(g=>g.$to.pos)),d=zv(t);return Rv(s,{from:c,to:f},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),Gv=St.create({name:"commands",addCommands(){return{...kv}}}),Yv=St.create({name:"delete",onUpdate({transaction:n,appendedTransactions:e}){var t,s,l;const o=()=>{var c,f,d,p;if((p=(d=(f=(c=this.editor.options.coreExtensionOptions)==null?void 0:c.delete)==null?void 0:f.filterTransaction)==null?void 0:d.call(f,n))!=null?p:n.getMeta("y-sync$"))return;const g=Av(n.before,[n,...e]);_v(g).forEach(v=>{g.mapping.mapResult(v.oldRange.from).deletedAfter&&g.mapping.mapResult(v.oldRange.to).deletedBefore&&g.before.nodesBetween(v.oldRange.from,v.oldRange.to,(k,E)=>{const C=E+k.nodeSize-2,M=v.oldRange.from<=E&&C<=v.oldRange.to;this.editor.emit("delete",{type:"node",node:k,from:E,to:C,newFrom:g.mapping.map(E),newTo:g.mapping.map(C),deletedRange:v.oldRange,newRange:v.newRange,partial:!M,editor:this.editor,transaction:n,combinedTransform:g})})});const x=g.mapping;g.steps.forEach((v,k)=>{var E,C;if(v instanceof Gn){const M=x.slice(k).map(v.from,-1),I=x.slice(k).map(v.to),$=x.invert().map(M,-1),X=x.invert().map(I),_=(E=g.doc.nodeAt(M-1))==null?void 0:E.marks.some(V=>V.eq(v.mark)),Y=(C=g.doc.nodeAt(I))==null?void 0:C.marks.some(V=>V.eq(v.mark));this.editor.emit("delete",{type:"mark",mark:v.mark,from:v.from,to:v.to,deletedRange:{from:$,to:X},newRange:{from:M,to:I},partial:!!(Y||_),editor:this.editor,transaction:n,combinedTransform:g})}})};(l=(s=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:s.async)==null||l?setTimeout(o,0):o()}}),Kv=St.create({name:"drop",addProseMirrorPlugins(){return[new pt({key:new Ot("tiptapDrop"),props:{handleDrop:(n,e,t,s)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:s})}}})]}}),Pv=St.create({name:"editable",addProseMirrorPlugins(){return[new pt({key:new Ot("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Jv=new Ot("focusEvents"),Fv=St.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new pt({key:Jv,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const s=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1},blur:(e,t)=>{n.isFocused=!1;const s=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1}}}})]}}),Xv=St.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:f})=>{const{selection:d,doc:p}=f,{empty:g,$anchor:y}=d,{pos:x,parent:v}=y,k=y.parent.isTextblock&&x>0?f.doc.resolve(x-1):y,E=k.parent.type.spec.isolating,C=y.pos-y.parentOffset,M=E&&k.parent.childCount===1?C===y.pos:Le.atStart(p).from===x;return!g||!v.type.isTextblock||v.textContent.length||!M||M&&y.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),s={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},l={...s},o={...s,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return zc()||wv()?o:l},addProseMirrorPlugins(){return[new pt({key:new Ot("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(E=>E.getMeta("composition")))return;const s=n.some(E=>E.docChanged)&&!e.doc.eq(t.doc),l=n.some(E=>E.getMeta("preventClearDocument"));if(!s||l)return;const{empty:o,from:c,to:f}=e.selection,d=Le.atStart(e.doc).from,p=Le.atEnd(e.doc).to;if(o||!(c===d&&f===p)||!Tu(t.doc))return;const x=t.tr,v=xu({state:t,transaction:x}),{commands:k}=new vu({editor:this.editor,state:v});if(k.clearNodes(),!!x.steps.length)return x}})]}}),Qv=St.create({name:"paste",addProseMirrorPlugins(){return[new pt({key:new Ot("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),Zv=St.create({name:"tabindex",addProseMirrorPlugins(){return[new pt({key:new Ot("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Wv=St.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:n}=ll(this.extensions);return[{types:n.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const t=e.getAttribute("dir");return t&&(t==="ltr"||t==="rtl"||t==="auto")?t:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new pt({key:new Ot("textDirection"),props:{attributes:()=>{const n=this.options.direction;return n?{dir:n}:{}}}})]}}),gN=class fo{constructor(e,t,s=!1,l=null){this.currentNode=null,this.actualDepth=null,this.isBlock=s,this.resolvedPos=e,this.editor=t,this.currentNode=l}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,s=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,s=this.to-1}this.editor.commands.insertContentAt({from:t,to:s},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new fo(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new fo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new fo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,s)=>{const l=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,c=t.isInline,f=this.pos+s+(o?0:1);if(f<0||f>this.resolvedPos.doc.nodeSize-2)return;const d=this.resolvedPos.doc.resolve(f);if(!l&&!c&&d.depth<=this.depth)return;const p=new fo(d,this.editor,l,l||c?t:null);l&&(p.actualDepth=this.depth+1),e.push(p)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let s=null,l=this.parent;for(;l&&!s;){if(l.node.type.name===e)if(Object.keys(t).length>0){const o=l.node.attrs,c=Object.keys(t);for(let f=0;f<c.length;f+=1){const d=c[f];if(o[d]!==t[d])break}}else s=l;l=l.parent}return s}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},s=!1){let l=[];if(!this.children||this.children.length===0)return l;const o=Object.keys(t);return this.children.forEach(c=>{s&&l.length>0||(c.node.type.name===e&&o.every(d=>t[d]===c.node.attrs[d])&&l.push(c),!(s&&l.length>0)&&(l=l.concat(c.querySelectorAll(e,t,s))))}),l}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},yN=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function bN(n,e,t){const s=document.querySelector("style[data-tiptap-style]");if(s!==null)return s;const l=document.createElement("style");return e&&l.setAttribute("nonce",e),l.setAttribute("data-tiptap-style",""),l.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(l),l}var xN=class extends iN{constructor(n={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:s})=>{throw s},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:_2,createMappablePosition:B2},this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:s,slice:l,moved:o})=>this.options.onDrop(s,l,o)),this.on("paste",({event:s,slice:l})=>this.options.onPaste(s,l)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=Cv(e,this.options.autofocus);this.editorState=Zi.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n?.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=bN(yN,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,e=!0){this.setOptions({editable:n}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.dispatchTransaction(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in n)return Reflect.get(n,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,e){const t=Ov(e)?e(n,[...this.state.plugins]):[...this.state.plugins,n],s=this.state.reconfigure({plugins:t});return this.view.updateState(s),s}unregisterPlugin(n){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(n).forEach(l=>{const o=typeof l=="string"?`${l}$`:l.key;t=t.filter(c=>!c.key.startsWith(o))}),e.length===t.length)return;const s=this.state.reconfigure({plugins:t});return this.view.updateState(s),s}createExtensionManager(){var n,e;const s=[...this.options.enableCoreExtensions?[Pv,$v.configure({blockSeparator:(e=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Gv,Fv,Xv,Zv,Kv,Qv,Yv,Wv.configure({direction:this.options.textDirection})].filter(l=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[l.name]!==!1:!0):[],...this.options.extensions].filter(l=>["extension","node","mark"].includes(l?.type));this.extensionManager=new Cu(s,this)}createCommandManager(){this.commandManager=new vu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=Jh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),n=Jh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){const{editorProps:e,enableExtensionDispatchTransaction:t}=this.options,s=e.dispatchTransaction||this.dispatchTransaction.bind(this),l=t?this.extensionManager.dispatchTransaction(s):s;this.editorView=new vv(n,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:l,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.prependClass(),this.injectCSS();const c=this.view.dom;c.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(p=>{var g;return(g=this.capturedTransaction)==null?void 0:g.step(p)});return}const{state:e,transactions:t}=this.state.applyTransaction(n),s=!this.state.selection.eq(e.selection),l=t.includes(n),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:e}),!l)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:t.slice(1)}),s&&this.emit("selectionUpdate",{editor:this,transaction:n});const c=t.findLast(p=>p.getMeta("focus")||p.getMeta("blur")),f=c?.getMeta("focus"),d=c?.getMeta("blur");f&&this.emit("focus",{editor:this,event:f.event,transaction:c}),d&&this.emit("blur",{editor:this,event:d.event,transaction:c}),!(n.getMeta("preventUpdate")||!t.some(p=>p.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:t.slice(1)})}getAttributes(n){return Lv(this.state,n)}isActive(n,e){const t=typeof n=="string"?n:null,s=typeof n=="string"?e:n;return R2(this.state,t,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Lp(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:e=`

`,textSerializers:t={}}=n||{};return w2(this.state.doc,{blockSeparator:e,textSerializers:{...zv(this.schema),...t}})}get isEmpty(){return Tu(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,e;return(e=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?e:!0}$node(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(n,e))||null}$nodes(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(n,e))||null}$pos(n){const e=this.state.doc.resolve(n);return new gN(e,this)}get $doc(){return this.$pos(0)}};function ol(n){return new Eu({find:n.find,handler:({state:e,range:t,match:s})=>{const l=We(n.getAttributes,void 0,s);if(l===!1||l===null)return null;const{tr:o}=e,c=s[s.length-1],f=s[0];if(c){const d=f.search(/\S/),p=t.from+f.indexOf(c),g=p+c.length;if(_p(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(E=>E===n.type&&E!==v.mark.type)).filter(v=>v.to>p).length)return null;g<t.to&&o.delete(g,t.to),p>t.from&&o.delete(t.from+d,p);const x=t.from+d+c.length;o.addMark(t.from+d,x,n.type.create(l||{})),o.removeStoredMark(n.type)}},undoable:n.undoable})}function vN(n){return new Eu({find:n.find,handler:({state:e,range:t,match:s})=>{const l=We(n.getAttributes,void 0,s)||{},{tr:o}=e,c=t.from;let f=t.to;const d=n.type.create(l);if(s[1]){const p=s[0].lastIndexOf(s[1]);let g=c+p;g>f?g=f:f=g+s[1].length;const y=s[0][s[0].length-1];o.insertText(y,c+s[0].length-1),o.replaceWith(g,f,d)}else if(s[0]){const p=n.type.isInline?c:c-1;o.insert(p,n.type.create(l)).delete(o.mapping.map(c),o.mapping.map(f))}o.scrollIntoView()},undoable:n.undoable})}function Xh(n){return new Eu({find:n.find,handler:({state:e,range:t,match:s})=>{const l=e.doc.resolve(t.from),o=We(n.getAttributes,void 0,s)||{};if(!l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)},undoable:n.undoable})}function al(n){return new Eu({find:n.find,handler:({state:e,range:t,match:s,chain:l})=>{const o=We(n.getAttributes,void 0,s)||{},c=e.tr.delete(t.from,t.to),d=c.doc.resolve(t.from).blockRange(),p=d&&mp(d,n.type,o);if(!p)return null;if(c.wrap(d,p),n.keepMarks&&n.editor){const{selection:y,storedMarks:x}=e,{splittableMarks:v}=n.editor.extensionManager,k=x||y.$to.parentOffset&&y.$from.marks();if(k){const E=k.filter(C=>v.includes(C.type.name));c.ensureMarks(E)}}if(n.keepAttributes){const y=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";l().updateAttributes(y,o).run()}const g=c.doc.resolve(t.from-1).nodeBefore;g&&g.type===n.type&&vs(c.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(s,g))&&c.join(t.from-1)},undoable:n.undoable})}function SN(n,e){const{selection:t}=n,{$from:s}=t;if(t instanceof Se){const o=s.index();return s.parent.canReplaceWith(o,o+1,e)}let l=s.depth;for(;l>=0;){const o=s.index(l);if(s.node(l).contentMatchAt(o).matchType(e))return!0;l-=1}return!1}var kN={};Dp(kN,{createAtomBlockMarkdownSpec:()=>TN,createBlockMarkdownSpec:()=>EN,createInlineMarkdownSpec:()=>wN,parseAttributes:()=>Hp,parseIndentedBlocks:()=>Qh,renderNestedMarkdownContent:()=>Ip,serializeAttributes:()=>Up});function Hp(n){if(!n?.trim())return{};const e={},t=[],s=n.replace(/["']([^"']*)["']/g,p=>(t.push(p),`__QUOTED_${t.length-1}__`)),l=s.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(l){const p=l.map(g=>g.trim().slice(1));e.class=p.join(" ")}const o=s.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const c=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(s.matchAll(c)).forEach(([,p,g])=>{var y;const x=parseInt(((y=g.match(/__QUOTED_(\d+)__/))==null?void 0:y[1])||"0",10),v=t[x];v&&(e[p]=v.slice(1,-1))});const d=s.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(g=>{g.match(/^[a-zA-Z][\w-]*$/)&&(e[g]=!0)}),e}function Up(n){if(!n||Object.keys(n).length===0)return"";const e=[];return n.class&&String(n.class).split(/\s+/).filter(Boolean).forEach(s=>e.push(`.${s}`)),n.id&&e.push(`#${n.id}`),Object.entries(n).forEach(([t,s])=>{t==="class"||t==="id"||(s===!0?e.push(t):s!==!1&&s!=null&&e.push(`${t}="${String(s)}"`))}),e.join(" ")}function TN(n){const{nodeName:e,name:t,parseAttributes:s=Hp,serializeAttributes:l=Up,defaultAttributes:o={},requiredAttributes:c=[],allowedAttributes:f}=n,d=t||e,p=g=>{if(!f)return g;const y={};return f.forEach(x=>{x in g&&(y[x]=g[x])}),y};return{parseMarkdown:(g,y)=>{const x={...o,...g.attributes};return y.createNode(e,x,[])},markdownTokenizer:{name:e,level:"block",start(g){var y;const x=new RegExp(`^:::${d}(?:\\s|$)`,"m"),v=(y=g.match(x))==null?void 0:y.index;return v!==void 0?v:-1},tokenize(g,y,x){const v=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),k=g.match(v);if(!k)return;const E=k[1]||"",C=s(E);if(!c.find(I=>!(I in C)))return{type:e,raw:k[0],attributes:C}}},renderMarkdown:g=>{const y=p(g.attrs||{}),x=l(y),v=x?` {${x}}`:"";return`:::${d}${v} :::`}}}function EN(n){const{nodeName:e,name:t,getContent:s,parseAttributes:l=Hp,serializeAttributes:o=Up,defaultAttributes:c={},content:f="block",allowedAttributes:d}=n,p=t||e,g=y=>{if(!d)return y;const x={};return d.forEach(v=>{v in y&&(x[v]=y[v])}),x};return{parseMarkdown:(y,x)=>{let v;if(s){const E=s(y);v=typeof E=="string"?[{type:"text",text:E}]:E}else f==="block"?v=x.parseChildren(y.tokens||[]):v=x.parseInline(y.tokens||[]);const k={...c,...y.attributes};return x.createNode(e,k,v)},markdownTokenizer:{name:e,level:"block",start(y){var x;const v=new RegExp(`^:::${p}`,"m"),k=(x=y.match(v))==null?void 0:x.index;return k!==void 0?k:-1},tokenize(y,x,v){var k;const E=new RegExp(`^:::${p}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),C=y.match(E);if(!C)return;const[M,I=""]=C,$=l(I);let X=1;const _=M.length;let Y="";const V=/^:::([\w-]*)(\s.*)?/gm,Z=y.slice(_);for(V.lastIndex=0;;){const ie=V.exec(Z);if(ie===null)break;const Te=ie.index,$e=ie[1];if(!((k=ie[2])!=null&&k.endsWith(":::"))){if($e)X+=1;else if(X-=1,X===0){const Oe=Z.slice(0,Te);Y=Oe.trim();const rt=y.slice(0,_+Te+ie[0].length);let we=[];if(Y)if(f==="block")for(we=v.blockTokens(Oe),we.forEach(he=>{he.text&&(!he.tokens||he.tokens.length===0)&&(he.tokens=v.inlineTokens(he.text))});we.length>0;){const he=we[we.length-1];if(he.type==="paragraph"&&(!he.text||he.text.trim()===""))we.pop();else break}else we=v.inlineTokens(Y);return{type:e,raw:rt,attributes:$,content:Y,tokens:we}}}}}},renderMarkdown:(y,x)=>{const v=g(y.attrs||{}),k=o(v),E=k?` {${k}}`:"",C=x.renderChildren(y.content||[],`

`);return`:::${p}${E}

${C}

:::`}}}function CN(n){if(!n.trim())return{};const e={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let s=t.exec(n);for(;s!==null;){const[,l,o,c]=s;e[l]=o||c,s=t.exec(n)}return e}function MN(n){return Object.entries(n).filter(([,e])=>e!=null).map(([e,t])=>`${e}="${t}"`).join(" ")}function wN(n){const{nodeName:e,name:t,getContent:s,parseAttributes:l=CN,serializeAttributes:o=MN,defaultAttributes:c={},selfClosing:f=!1,allowedAttributes:d}=n,p=t||e,g=x=>{if(!d)return x;const v={};return d.forEach(k=>{const E=typeof k=="string"?k:k.name,C=typeof k=="string"?void 0:k.skipIfDefault;if(E in x){const M=x[E];if(C!==void 0&&M===C)return;v[E]=M}}),v},y=p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(x,v)=>{const k={...c,...x.attributes};if(f)return v.createNode(e,k);const E=s?s(x):x.content||"";return E?v.createNode(e,k,[v.createTextNode(E)]):v.createNode(e,k,[])},markdownTokenizer:{name:e,level:"inline",start(x){const v=f?new RegExp(`\\[${y}\\s*[^\\]]*\\]`):new RegExp(`\\[${y}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${y}\\]`),k=x.match(v),E=k?.index;return E!==void 0?E:-1},tokenize(x,v,k){const E=f?new RegExp(`^\\[${y}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${y}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${y}\\]`),C=x.match(E);if(!C)return;let M="",I="";if(f){const[,X]=C;I=X}else{const[,X,_]=C;I=X,M=_||""}const $=l(I.trim());return{type:e,raw:C[0],content:M.trim(),attributes:$}}},renderMarkdown:x=>{let v="";s?v=s(x):x.content&&x.content.length>0&&(v=x.content.filter(M=>M.type==="text").map(M=>M.text).join(""));const k=g(x.attrs||{}),E=o(k),C=E?` ${E}`:"";return f?`[${p}${C}]`:`[${p}${C}]${v}[/${p}]`}}}function Qh(n,e,t){var s,l,o,c;const f=n.split(`
`),d=[];let p="",g=0;const y=e.baseIndentSize||2;for(;g<f.length;){const x=f[g],v=x.match(e.itemPattern);if(!v){if(d.length>0)break;if(x.trim()===""){g+=1,p=`${p}${x}
`;continue}else return}const k=e.extractItemData(v),{indentLevel:E,mainContent:C}=k;p=`${p}${x}
`;const M=[C];for(g+=1;g<f.length;){const _=f[g];if(_.trim()===""){const V=f.slice(g+1).findIndex(Te=>Te.trim()!=="");if(V===-1)break;if((((l=(s=f[g+1+V].match(/^(\s*)/))==null?void 0:s[1])==null?void 0:l.length)||0)>E){M.push(_),p=`${p}${_}
`,g+=1;continue}else break}if((((c=(o=_.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:c.length)||0)>E)M.push(_),p=`${p}${_}
`,g+=1;else break}let I;const $=M.slice(1);if($.length>0){const _=$.map(Y=>Y.slice(E+y)).join(`
`);_.trim()&&(e.customNestedParser?I=e.customNestedParser(_):I=t.blockTokens(_))}const X=e.createToken(k,I);d.push(X)}if(d.length!==0)return{items:d,raw:p}}function Ip(n,e,t,s){if(!n||!Array.isArray(n.content))return"";const l=typeof t=="function"?t(s):t,[o,...c]=n.content,f=e.renderChildren([o]),d=[`${l}${f}`];return c&&c.length>0&&c.forEach(p=>{const g=e.renderChildren([p]);if(g){const y=g.split(`
`).map(x=>x?e.indent(x):"").join(`
`);d.push(y)}}),d.join(`
`)}function NN(n,e,t={}){const{state:s}=e,{doc:l,tr:o}=s,c=n;l.descendants((f,d)=>{const p=o.mapping.map(d),g=o.mapping.map(d)+f.nodeSize;let y=null;if(f.marks.forEach(v=>{if(v!==c)return!1;y=v}),!y)return;let x=!1;if(Object.keys(t).forEach(v=>{t[v]!==y.attrs[v]&&(x=!0)}),x){const v=n.type.create({...n.attrs,...t});o.removeMark(p,g,n.type),o.addMark(p,g,v)}}),o.docChanged&&e.view.dispatch(o)}var kn=class eS extends Bp{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new eS(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function si(n){return new uN({find:n.find,handler:({state:e,range:t,match:s,pasteEvent:l})=>{const o=We(n.getAttributes,void 0,s,l);if(o===!1||o===null)return null;const{tr:c}=e,f=s[s.length-1],d=s[0];let p=t.to;if(f){const g=d.search(/\S/),y=t.from+d.indexOf(f),x=y+f.length;if(_p(t.from,t.to,e.doc).filter(k=>k.mark.type.excluded.find(C=>C===n.type&&C!==k.mark.type)).filter(k=>k.to>y).length)return null;x<t.to&&c.delete(x,t.to),y>t.from&&c.delete(t.from+g,y),p=t.from+g+f.length,c.addMark(t.from+g,p,n.type.create(o||{})),c.removeStoredMark(n.type)}}})}const{getOwnPropertyNames:AN,getOwnPropertySymbols:ON}=Object,{hasOwnProperty:DN}=Object.prototype;function yh(n,e){return function(s,l,o){return n(s,l,o)&&e(s,l,o)}}function fc(n){return function(t,s,l){if(!t||!s||typeof t!="object"||typeof s!="object")return n(t,s,l);const{cache:o}=l,c=o.get(t),f=o.get(s);if(c&&f)return c===s&&f===t;o.set(t,s),o.set(s,t);const d=n(t,s,l);return o.delete(t),o.delete(s),d}}function jN(n){return n?.[Symbol.toStringTag]}function bx(n){return AN(n).concat(ON(n))}const RN=Object.hasOwn||((n,e)=>DN.call(n,e));function oi(n,e){return n===e||!n&&!e&&n!==n&&e!==e}const zN="__v",LN="__o",_N="_owner",{getOwnPropertyDescriptor:xx,keys:vx}=Object;function BN(n,e){return n.byteLength===e.byteLength&&_c(new Uint8Array(n),new Uint8Array(e))}function HN(n,e,t){let s=n.length;if(e.length!==s)return!1;for(;s-- >0;)if(!t.equals(n[s],e[s],s,s,n,e,t))return!1;return!0}function UN(n,e){return n.byteLength===e.byteLength&&_c(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function IN(n,e){return oi(n.getTime(),e.getTime())}function qN(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function VN(n,e){return n===e}function Sx(n,e,t){const s=n.size;if(s!==e.size)return!1;if(!s)return!0;const l=new Array(s),o=n.entries();let c,f,d=0;for(;(c=o.next())&&!c.done;){const p=e.entries();let g=!1,y=0;for(;(f=p.next())&&!f.done;){if(l[y]){y++;continue}const x=c.value,v=f.value;if(t.equals(x[0],v[0],d,y,n,e,t)&&t.equals(x[1],v[1],x[0],v[0],n,e,t)){g=l[y]=!0;break}y++}if(!g)return!1;d++}return!0}const $N=oi;function GN(n,e,t){const s=vx(n);let l=s.length;if(vx(e).length!==l)return!1;for(;l-- >0;)if(!tS(n,e,t,s[l]))return!1;return!0}function io(n,e,t){const s=bx(n);let l=s.length;if(bx(e).length!==l)return!1;let o,c,f;for(;l-- >0;)if(o=s[l],!tS(n,e,t,o)||(c=xx(n,o),f=xx(e,o),(c||f)&&(!c||!f||c.configurable!==f.configurable||c.enumerable!==f.enumerable||c.writable!==f.writable)))return!1;return!0}function YN(n,e){return oi(n.valueOf(),e.valueOf())}function KN(n,e){return n.source===e.source&&n.flags===e.flags}function kx(n,e,t){const s=n.size;if(s!==e.size)return!1;if(!s)return!0;const l=new Array(s),o=n.values();let c,f;for(;(c=o.next())&&!c.done;){const d=e.values();let p=!1,g=0;for(;(f=d.next())&&!f.done;){if(!l[g]&&t.equals(c.value,f.value,c.value,f.value,n,e,t)){p=l[g]=!0;break}g++}if(!p)return!1}return!0}function _c(n,e){let t=n.byteLength;if(e.byteLength!==t||n.byteOffset!==e.byteOffset)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function PN(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function tS(n,e,t,s){return(s===_N||s===LN||s===zN)&&(n.$$typeof||e.$$typeof)?!0:RN(e,s)&&t.equals(n[s],e[s],s,s,n,e,t)}const JN="[object ArrayBuffer]",FN="[object Arguments]",XN="[object Boolean]",QN="[object DataView]",ZN="[object Date]",WN="[object Error]",eA="[object Map]",tA="[object Number]",nA="[object Object]",rA="[object RegExp]",sA="[object Set]",iA="[object String]",lA={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},oA="[object URL]",aA=Object.prototype.toString;function cA({areArrayBuffersEqual:n,areArraysEqual:e,areDataViewsEqual:t,areDatesEqual:s,areErrorsEqual:l,areFunctionsEqual:o,areMapsEqual:c,areNumbersEqual:f,areObjectsEqual:d,arePrimitiveWrappersEqual:p,areRegExpsEqual:g,areSetsEqual:y,areTypedArraysEqual:x,areUrlsEqual:v,unknownTagComparators:k}){return function(C,M,I){if(C===M)return!0;if(C==null||M==null)return!1;const $=typeof C;if($!==typeof M)return!1;if($!=="object")return $==="number"?f(C,M,I):$==="function"?o(C,M,I):!1;const X=C.constructor;if(X!==M.constructor)return!1;if(X===Object)return d(C,M,I);if(Array.isArray(C))return e(C,M,I);if(X===Date)return s(C,M,I);if(X===RegExp)return g(C,M,I);if(X===Map)return c(C,M,I);if(X===Set)return y(C,M,I);const _=aA.call(C);if(_===ZN)return s(C,M,I);if(_===rA)return g(C,M,I);if(_===eA)return c(C,M,I);if(_===sA)return y(C,M,I);if(_===nA)return typeof C.then!="function"&&typeof M.then!="function"&&d(C,M,I);if(_===oA)return v(C,M,I);if(_===WN)return l(C,M,I);if(_===FN)return d(C,M,I);if(lA[_])return x(C,M,I);if(_===JN)return n(C,M,I);if(_===QN)return t(C,M,I);if(_===XN||_===tA||_===iA)return p(C,M,I);if(k){let Y=k[_];if(!Y){const V=jN(C);V&&(Y=k[V])}if(Y)return Y(C,M,I)}return!1}}function uA({circular:n,createCustomConfig:e,strict:t}){let s={areArrayBuffersEqual:BN,areArraysEqual:t?io:HN,areDataViewsEqual:UN,areDatesEqual:IN,areErrorsEqual:qN,areFunctionsEqual:VN,areMapsEqual:t?yh(Sx,io):Sx,areNumbersEqual:$N,areObjectsEqual:t?io:GN,arePrimitiveWrappersEqual:YN,areRegExpsEqual:KN,areSetsEqual:t?yh(kx,io):kx,areTypedArraysEqual:t?yh(_c,io):_c,areUrlsEqual:PN,unknownTagComparators:void 0};if(e&&(s=Object.assign({},s,e(s))),n){const l=fc(s.areArraysEqual),o=fc(s.areMapsEqual),c=fc(s.areObjectsEqual),f=fc(s.areSetsEqual);s=Object.assign({},s,{areArraysEqual:l,areMapsEqual:o,areObjectsEqual:c,areSetsEqual:f})}return s}function fA(n){return function(e,t,s,l,o,c,f){return n(e,t,f)}}function dA({circular:n,comparator:e,createState:t,equals:s,strict:l}){if(t)return function(f,d){const{cache:p=n?new WeakMap:void 0,meta:g}=t();return e(f,d,{cache:p,equals:s,meta:g,strict:l})};if(n)return function(f,d){return e(f,d,{cache:new WeakMap,equals:s,meta:void 0,strict:l})};const o={cache:void 0,equals:s,meta:void 0,strict:l};return function(f,d){return e(f,d,o)}}const hA=ks();ks({strict:!0});ks({circular:!0});ks({circular:!0,strict:!0});ks({createInternalComparator:()=>oi});ks({strict:!0,createInternalComparator:()=>oi});ks({circular:!0,createInternalComparator:()=>oi});ks({circular:!0,createInternalComparator:()=>oi,strict:!0});function ks(n={}){const{circular:e=!1,createInternalComparator:t,createState:s,strict:l=!1}=n,o=uA(n),c=cA(o),f=t?t(c):fA(c);return dA({circular:e,comparator:c,createState:s,equals:f,strict:l})}var bh={exports:{}},xh={};var Tx;function pA(){if(Tx)return xh;Tx=1;var n=Lo(),e=Kx();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var s=typeof Object.is=="function"?Object.is:t,l=e.useSyncExternalStore,o=n.useRef,c=n.useEffect,f=n.useMemo,d=n.useDebugValue;return xh.useSyncExternalStoreWithSelector=function(p,g,y,x,v){var k=o(null);if(k.current===null){var E={hasValue:!1,value:null};k.current=E}else E=k.current;k=f(function(){function M(Y){if(!I){if(I=!0,$=Y,Y=x(Y),v!==void 0&&E.hasValue){var V=E.value;if(v(V,Y))return X=V}return X=Y}if(V=X,s($,Y))return V;var Z=x(Y);return v!==void 0&&v(V,Z)?($=Y,V):($=Y,X=Z)}var I=!1,$,X,_=y===void 0?null:y;return[function(){return M(g())},_===null?void 0:function(){return M(_())}]},[g,y,x,v]);var C=l(p,k[0],k[1]);return c(function(){E.hasValue=!0,E.value=C},[C]),d(C),C},xh}var Ex;function mA(){return Ex||(Ex=1,bh.exports=pA()),bh.exports}var gA=mA(),yA=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},bA=({contentComponent:n})=>{const e=Px.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return b.jsx(b.Fragment,{children:Object.values(e)})};function xA(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,s){e={...e,[t]:kE.createPortal(s.reactElement,s.element,t)},n.forEach(l=>l())},removeRenderer(t){const s={...e};delete s[t],e=s,n.forEach(l=>l())}}}var vA=class extends er.Component{constructor(n){var e;super(n),this.editorContentRef=er.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=n.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var n;const e=this.props.editor;if(e&&!e.isDestroyed&&((n=e.view.dom)!=null&&n.parentNode)){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t}),e.contentComponent=xA(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(s=>s.hasContentComponentInitialized?s:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((n=e.view.dom)!=null&&n.parentNode))return;const t=document.createElement("div");t.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:t})}catch{}}}render(){const{editor:n,innerRef:e,...t}=this.props;return b.jsxs(b.Fragment,{children:[b.jsx("div",{ref:yA(e,this.editorContentRef),...t}),n?.contentComponent&&b.jsx(bA,{contentComponent:n.contentComponent})]})}},SA=Q.forwardRef((n,e)=>{const t=er.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return er.createElement(vA,{key:t,innerRef:e,...n})}),nS=er.memo(SA),kA=typeof window<"u"?Q.useLayoutEffect:Q.useEffect,TA=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function EA(n){var e;const[t]=Q.useState(()=>new TA(n.editor)),s=gA.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!=null?e:hA);return kA(()=>t.watch(n.editor),[n.editor,t]),Q.useDebugValue(s),s}var CA=!1,Zh=typeof window>"u",MA=Zh||!!(typeof window<"u"&&window.next),wA=class rS{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Zh||MA?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...s)=>{var l,o;return(o=(l=this.options.current).onBeforeCreate)==null?void 0:o.call(l,...s)},onBlur:(...s)=>{var l,o;return(o=(l=this.options.current).onBlur)==null?void 0:o.call(l,...s)},onCreate:(...s)=>{var l,o;return(o=(l=this.options.current).onCreate)==null?void 0:o.call(l,...s)},onDestroy:(...s)=>{var l,o;return(o=(l=this.options.current).onDestroy)==null?void 0:o.call(l,...s)},onFocus:(...s)=>{var l,o;return(o=(l=this.options.current).onFocus)==null?void 0:o.call(l,...s)},onSelectionUpdate:(...s)=>{var l,o;return(o=(l=this.options.current).onSelectionUpdate)==null?void 0:o.call(l,...s)},onTransaction:(...s)=>{var l,o;return(o=(l=this.options.current).onTransaction)==null?void 0:o.call(l,...s)},onUpdate:(...s)=>{var l,o;return(o=(l=this.options.current).onUpdate)==null?void 0:o.call(l,...s)},onContentError:(...s)=>{var l,o;return(o=(l=this.options.current).onContentError)==null?void 0:o.call(l,...s)},onDrop:(...s)=>{var l,o;return(o=(l=this.options.current).onDrop)==null?void 0:o.call(l,...s)},onPaste:(...s)=>{var l,o;return(o=(l=this.options.current).onPaste)==null?void 0:o.call(l,...s)},onDelete:(...s)=>{var l,o;return(o=(l=this.options.current).onDelete)==null?void 0:o.call(l,...s)}};return new xN(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(s=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(s)?!0:s==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((l,o)=>{var c;return l===((c=t.extensions)==null?void 0:c[o])}):e[s]===t[s])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?rS.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((s,l)=>s===e[l]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function NA(n={},e=[]){const t=Q.useRef(n);t.current=n;const[s]=Q.useState(()=>new wA(t)),l=Px.useSyncExternalStore(s.subscribe,s.getEditor,s.getServerSnapshot);return Q.useDebugValue(l),Q.useEffect(s.onRender(e)),EA({editor:l,selector:({transactionNumber:o})=>n.shouldRerenderOnTransaction===!1||n.shouldRerenderOnTransaction===void 0?null:n.immediatelyRender&&o===0?0:o+1}),l}var sS=Q.createContext({editor:null});sS.Consumer;var AA=Q.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),OA=()=>Q.useContext(AA);er.forwardRef((n,e)=>{const{onDragStart:t}=OA(),s=n.as||"div";return b.jsx(s,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});er.createContext({markViewContentRef:()=>{}});var qp=Q.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});qp.displayName="TiptapContext";var DA=()=>Q.useContext(qp);function iS({editor:n,instance:e,children:t}){const s=n??e;if(!s)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const l=Q.useMemo(()=>({editor:s}),[s]),o=Q.useMemo(()=>({editor:s}),[s]);return b.jsx(sS.Provider,{value:o,children:b.jsx(qp.Provider,{value:l,children:t})})}iS.displayName="Tiptap";function lS({...n}){const{editor:e}=DA();return b.jsx(nS,{editor:e,...n})}lS.displayName="Tiptap.Content";Object.assign(iS,{Content:lS});var Bc=(n,e)=>{if(n==="slot")return 0;if(n instanceof Function)return n(e);const{children:t,...s}=e??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,s,t]},jA=/^\s*>\s$/,RA=kn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return Bc("blockquote",{...Nt(this.options.HTMLAttributes,n),children:Bc("slot",{})})},parseMarkdown:(n,e)=>e.createNode("blockquote",void 0,e.parseChildren(n.tokens||[])),renderMarkdown:(n,e)=>{if(!n.content)return"";const t=">",s=[];return n.content.forEach(l=>{const f=e.renderChildren([l]).split(`
`).map(d=>d.trim()===""?t:`${t} ${d}`);s.push(f.join(`
`))}),s.join(`
${t}
`)},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[al({find:jA,type:this.type})]}}),zA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,LA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,_A=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,BA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,HA=li.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return Bc("strong",{...Nt(this.options.HTMLAttributes,n),children:Bc("slot",{})})},markdownTokenName:"strong",parseMarkdown:(n,e)=>e.applyMark("bold",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`**${e.renderChildren(n)}**`,addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ol({find:zA,type:this.type}),ol({find:_A,type:this.type})]},addPasteRules(){return[si({find:LA,type:this.type}),si({find:BA,type:this.type})]}}),UA=/(^|[^`])`([^`]+)`(?!`)$/,IA=/(^|[^`])`([^`]+)`(?!`)/g,qA=li.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Nt(this.options.HTMLAttributes,n),0]},markdownTokenName:"codespan",parseMarkdown:(n,e)=>e.applyMark("code",[{type:"text",text:n.text||""}]),renderMarkdown:(n,e)=>n.content?`\`${e.renderChildren(n.content)}\``:"",addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ol({find:UA,type:this.type})]},addPasteRules(){return[si({find:IA,type:this.type})]}}),vh=4,VA=/^```([a-z]+)?[\s\n]$/,$A=/^~~~([a-z]+)?[\s\n]$/,GA=kn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:vh,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options;if(!t)return null;const o=[...((e=n.firstElementChild)==null?void 0:e.classList)||[]].filter(c=>c.startsWith(t)).map(c=>c.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Nt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(n,e)=>{var t;return((t=n.raw)==null?void 0:t.startsWith("```"))===!1&&n.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:n.lang||null},n.text?[e.createTextNode(n.text)]:[])},renderMarkdown:(n,e)=>{var t;let s="";const l=((t=n.attrs)==null?void 0:t.language)||"";return n.content?s=[`\`\`\`${l}`,e.renderChildren(n.content),"```"].join(`
`):s=`\`\`\`${l}

\`\`\``,s},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:vh,{state:s}=n,{selection:l}=s,{$from:o,empty:c}=l;if(o.parent.type!==this.type)return!1;const f=" ".repeat(t);return c?n.commands.insertContent(f):n.commands.command(({tr:d})=>{const{from:p,to:g}=l,v=s.doc.textBetween(p,g,`
`,`
`).split(`
`).map(k=>f+k).join(`
`);return d.replaceWith(p,g,s.schema.text(v)),!0})},"Shift-Tab":({editor:n})=>{var e;if(!this.options.enableTabIndentation)return!1;const t=(e=this.options.tabSize)!=null?e:vh,{state:s}=n,{selection:l}=s,{$from:o,empty:c}=l;return o.parent.type!==this.type?!1:c?n.commands.command(({tr:f})=>{var d;const{pos:p}=o,g=o.start(),y=o.end(),v=s.doc.textBetween(g,y,`
`,`
`).split(`
`);let k=0,E=0;const C=p-g;for(let Y=0;Y<v.length;Y+=1){if(E+v[Y].length>=C){k=Y;break}E+=v[Y].length+1}const I=((d=v[k].match(/^ */))==null?void 0:d[0])||"",$=Math.min(I.length,t);if($===0)return!0;let X=g;for(let Y=0;Y<k;Y+=1)X+=v[Y].length+1;return f.delete(X,X+$),p-X<=$&&f.setSelection(Ce.create(f.doc,X)),!0}):n.commands.command(({tr:f})=>{const{from:d,to:p}=l,x=s.doc.textBetween(d,p,`
`,`
`).split(`
`).map(v=>{var k;const E=((k=v.match(/^ */))==null?void 0:k[0])||"",C=Math.min(E.length,t);return v.slice(C)}).join(`
`);return f.replaceWith(d,p,s.schema.text(x)),!0})},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:s,empty:l}=t;if(!l||s.parent.type!==this.type)return!1;const o=s.parentOffset===s.parent.nodeSize-2,c=s.parent.textContent.endsWith(`

`);return!o||!c?!1:n.chain().command(({tr:f})=>(f.delete(s.pos-2,s.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:s}=e,{$from:l,empty:o}=t;if(!o||l.parent.type!==this.type||!(l.parentOffset===l.parent.nodeSize-2))return!1;const f=l.after();return f===void 0?!1:s.nodeAt(f)?n.commands.command(({tr:p})=>(p.setSelection(Le.near(s.resolve(f))),!0)):n.commands.exitCode()}}},addInputRules(){return[Xh({find:VA,type:this.type,getAttributes:n=>({language:n[1]})}),Xh({find:$A,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new pt({key:new Ot("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),s=e.clipboardData.getData("vscode-editor-data"),l=s?JSON.parse(s):void 0,o=l?.mode;if(!t||!o)return!1;const{tr:c,schema:f}=n.state,d=f.text(t.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:o},d)),c.selection.$from.parent.type!==this.type&&c.setSelection(Ce.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),n.dispatch(c),!0}}})]}}),YA=kn.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`

`):""}),KA=kn.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Nt(this.options.HTMLAttributes,n)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:s})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:l,storedMarks:o}=t;if(l.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:f}=s.extensionManager,d=o||l.$to.parentOffset&&l.$from.marks();return e().insertContent({type:this.name}).command(({tr:p,dispatch:g})=>{if(g&&d&&c){const y=d.filter(x=>f.includes(x.type.name));p.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),PA=kn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Nt(this.options.HTMLAttributes,e),0]},parseMarkdown:(n,e)=>e.createNode("heading",{level:n.depth||1},e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>{var t;const s=(t=n.attrs)!=null&&t.level?parseInt(n.attrs.level,10):1,l="#".repeat(s);return n.content?`${l} ${e.renderChildren(n.content)}`:""},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Xh({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),JA=kn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Nt(this.options.HTMLAttributes,n)]},markdownTokenName:"hr",parseMarkdown:(n,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!SN(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:s}=t,l=n();return Bv(t)?l.insertContentAt(s.pos,{type:this.name}):l.insertContent({type:this.name}),l.command(({state:o,tr:c,dispatch:f})=>{if(f){const{$to:d}=c.selection,p=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?c.setSelection(Ce.create(c.doc,d.pos+1)):d.nodeAfter.isBlock?c.setSelection(Se.create(c.doc,d.pos)):c.setSelection(Ce.create(c.doc,d.pos));else{const g=o.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,y=g?.create();y&&(c.insert(p,y),c.setSelection(Ce.create(c.doc,p+1)))}c.scrollIntoView()}return!0}).run()}}},addInputRules(){return[vN({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),FA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,XA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,QA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ZA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,WA=li.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Nt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(n,e)=>e.applyMark("italic",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`*${e.renderChildren(n)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ol({find:FA,type:this.type}),ol({find:QA,type:this.type})]},addPasteRules(){return[si({find:XA,type:this.type}),si({find:ZA,type:this.type})]}});const eO="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",tO="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Wh="numeric",ep="ascii",tp="alpha",bo="asciinumeric",ho="alphanumeric",np="domain",oS="emoji",nO="scheme",rO="slashscheme",Sh="whitespace";function sO(n,e){return n in e||(e[n]=[]),e[n]}function Js(n,e,t){e[Wh]&&(e[bo]=!0,e[ho]=!0),e[ep]&&(e[bo]=!0,e[tp]=!0),e[bo]&&(e[ho]=!0),e[tp]&&(e[ho]=!0),e[ho]&&(e[np]=!0),e[oS]&&(e[np]=!0);for(const s in e){const l=sO(s,t);l.indexOf(n)<0&&l.push(n)}}function iO(n,e){const t={};for(const s in e)e[s].indexOf(n)>=0&&(t[s]=!0);return t}function cn(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}cn.groups={};cn.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let s=0;s<e.jr.length;s++){const l=e.jr[s][0],o=e.jr[s][1];if(o&&l.test(n))return o}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,s){for(let l=0;l<n.length;l++)this.tt(n[l],e,t,s)},tr(n,e,t,s){s=s||cn.groups;let l;return e&&e.j?l=e:(l=new cn(e),t&&s&&Js(e,t,s)),this.jr.push([n,l]),l},ts(n,e,t,s){let l=this;const o=n.length;if(!o)return l;for(let c=0;c<o-1;c++)l=l.tt(n[c]);return l.tt(n[o-1],e,t,s)},tt(n,e,t,s){s=s||cn.groups;const l=this;if(e&&e.j)return l.j[n]=e,e;const o=e;let c,f=l.go(n);if(f?(c=new cn,Object.assign(c.j,f.j),c.jr.push.apply(c.jr,f.jr),c.jd=f.jd,c.t=f.t):c=new cn,o){if(s)if(c.t&&typeof c.t=="string"){const d=Object.assign(iO(c.t,s),t);Js(o,d,s)}else t&&Js(o,t,s);c.t=o}return l.j[n]=c,c}};const ze=(n,e,t,s,l)=>n.ta(e,t,s,l),yt=(n,e,t,s,l)=>n.tr(e,t,s,l),Cx=(n,e,t,s,l)=>n.ts(e,t,s,l),te=(n,e,t,s,l)=>n.tt(e,t,s,l),Er="WORD",rp="UWORD",aS="ASCIINUMERICAL",cS="ALPHANUMERICAL",Ro="LOCALHOST",sp="TLD",ip="UTLD",xc="SCHEME",Xi="SLASH_SCHEME",Vp="NUM",lp="WS",$p="NL",xo="OPENBRACE",vo="CLOSEBRACE",Hc="OPENBRACKET",Uc="CLOSEBRACKET",Ic="OPENPAREN",qc="CLOSEPAREN",Vc="OPENANGLEBRACKET",$c="CLOSEANGLEBRACKET",Gc="FULLWIDTHLEFTPAREN",Yc="FULLWIDTHRIGHTPAREN",Kc="LEFTCORNERBRACKET",Pc="RIGHTCORNERBRACKET",Jc="LEFTWHITECORNERBRACKET",Fc="RIGHTWHITECORNERBRACKET",Xc="FULLWIDTHLESSTHAN",Qc="FULLWIDTHGREATERTHAN",Zc="AMPERSAND",Wc="APOSTROPHE",eu="ASTERISK",ls="AT",tu="BACKSLASH",nu="BACKTICK",ru="CARET",us="COLON",Gp="COMMA",su="DOLLAR",Qn="DOT",iu="EQUALS",Yp="EXCLAMATION",Ln="HYPHEN",So="PERCENT",lu="PIPE",ou="PLUS",au="POUND",ko="QUERY",Kp="QUOTE",uS="FULLWIDTHMIDDLEDOT",Pp="SEMI",Zn="SLASH",To="TILDE",cu="UNDERSCORE",fS="EMOJI",uu="SYM";var dS=Object.freeze({__proto__:null,ALPHANUMERICAL:cS,AMPERSAND:Zc,APOSTROPHE:Wc,ASCIINUMERICAL:aS,ASTERISK:eu,AT:ls,BACKSLASH:tu,BACKTICK:nu,CARET:ru,CLOSEANGLEBRACKET:$c,CLOSEBRACE:vo,CLOSEBRACKET:Uc,CLOSEPAREN:qc,COLON:us,COMMA:Gp,DOLLAR:su,DOT:Qn,EMOJI:fS,EQUALS:iu,EXCLAMATION:Yp,FULLWIDTHGREATERTHAN:Qc,FULLWIDTHLEFTPAREN:Gc,FULLWIDTHLESSTHAN:Xc,FULLWIDTHMIDDLEDOT:uS,FULLWIDTHRIGHTPAREN:Yc,HYPHEN:Ln,LEFTCORNERBRACKET:Kc,LEFTWHITECORNERBRACKET:Jc,LOCALHOST:Ro,NL:$p,NUM:Vp,OPENANGLEBRACKET:Vc,OPENBRACE:xo,OPENBRACKET:Hc,OPENPAREN:Ic,PERCENT:So,PIPE:lu,PLUS:ou,POUND:au,QUERY:ko,QUOTE:Kp,RIGHTCORNERBRACKET:Pc,RIGHTWHITECORNERBRACKET:Fc,SCHEME:xc,SEMI:Pp,SLASH:Zn,SLASH_SCHEME:Xi,SYM:uu,TILDE:To,TLD:sp,UNDERSCORE:cu,UTLD:ip,UWORD:rp,WORD:Er,WS:lp});const kr=/[a-z]/,lo=new RegExp("\\p{L}","u"),kh=new RegExp("\\p{Emoji}","u"),Tr=/\d/,Th=/\s/,Mx="\r",Eh=`
`,lO="",oO="",Ch="";let dc=null,hc=null;function aO(n=[]){const e={};cn.groups=e;const t=new cn;dc==null&&(dc=wx(eO)),hc==null&&(hc=wx(tO)),te(t,"'",Wc),te(t,"{",xo),te(t,"}",vo),te(t,"[",Hc),te(t,"]",Uc),te(t,"(",Ic),te(t,")",qc),te(t,"<",Vc),te(t,">",$c),te(t,"",Gc),te(t,"",Yc),te(t,"",Kc),te(t,"",Pc),te(t,"",Jc),te(t,"",Fc),te(t,"",Xc),te(t,"",Qc),te(t,"&",Zc),te(t,"*",eu),te(t,"@",ls),te(t,"`",nu),te(t,"^",ru),te(t,":",us),te(t,",",Gp),te(t,"$",su),te(t,".",Qn),te(t,"=",iu),te(t,"!",Yp),te(t,"-",Ln),te(t,"%",So),te(t,"|",lu),te(t,"+",ou),te(t,"#",au),te(t,"?",ko),te(t,'"',Kp),te(t,"/",Zn),te(t,";",Pp),te(t,"~",To),te(t,"_",cu),te(t,"\\",tu),te(t,"",uS);const s=yt(t,Tr,Vp,{[Wh]:!0});yt(s,Tr,s);const l=yt(s,kr,aS,{[bo]:!0}),o=yt(s,lo,cS,{[ho]:!0}),c=yt(t,kr,Er,{[ep]:!0});yt(c,Tr,l),yt(c,kr,c),yt(l,Tr,l),yt(l,kr,l);const f=yt(t,lo,rp,{[tp]:!0});yt(f,kr),yt(f,Tr,o),yt(f,lo,f),yt(o,Tr,o),yt(o,kr),yt(o,lo,o);const d=te(t,Eh,$p,{[Sh]:!0}),p=te(t,Mx,lp,{[Sh]:!0}),g=yt(t,Th,lp,{[Sh]:!0});te(t,Ch,g),te(p,Eh,d),te(p,Ch,g),yt(p,Th,g),te(g,Mx),te(g,Eh),yt(g,Th,g),te(g,Ch,g);const y=yt(t,kh,fS,{[oS]:!0});te(y,"#"),yt(y,kh,y),te(y,lO,y);const x=te(y,oO);te(x,"#"),yt(x,kh,y);const v=[[kr,c],[Tr,l]],k=[[kr,null],[lo,f],[Tr,o]];for(let E=0;E<dc.length;E++)ns(t,dc[E],sp,Er,v);for(let E=0;E<hc.length;E++)ns(t,hc[E],ip,rp,k);Js(sp,{tld:!0,ascii:!0},e),Js(ip,{utld:!0,alpha:!0},e),ns(t,"file",xc,Er,v),ns(t,"mailto",xc,Er,v),ns(t,"http",Xi,Er,v),ns(t,"https",Xi,Er,v),ns(t,"ftp",Xi,Er,v),ns(t,"ftps",Xi,Er,v),Js(xc,{scheme:!0,ascii:!0},e),Js(Xi,{slashscheme:!0,ascii:!0},e),n=n.sort((E,C)=>E[0]>C[0]?1:-1);for(let E=0;E<n.length;E++){const C=n[E][0],I=n[E][1]?{[nO]:!0}:{[rO]:!0};C.indexOf("-")>=0?I[np]=!0:kr.test(C)?Tr.test(C)?I[bo]=!0:I[ep]=!0:I[Wh]=!0,Cx(t,C,C,I)}return Cx(t,"localhost",Ro,{ascii:!0}),t.jd=new cn(uu),{start:t,tokens:Object.assign({groups:e},dS)}}function hS(n,e){const t=cO(e.replace(/[A-Z]/g,f=>f.toLowerCase())),s=t.length,l=[];let o=0,c=0;for(;c<s;){let f=n,d=null,p=0,g=null,y=-1,x=-1;for(;c<s&&(d=f.go(t[c]));)f=d,f.accepts()?(y=0,x=0,g=f):y>=0&&(y+=t[c].length,x++),p+=t[c].length,o+=t[c].length,c++;o-=y,c-=x,p-=y,l.push({t:g.t,v:e.slice(o-p,o),s:o-p,e:o})}return l}function cO(n){const e=[],t=n.length;let s=0;for(;s<t;){let l=n.charCodeAt(s),o,c=l<55296||l>56319||s+1===t||(o=n.charCodeAt(s+1))<56320||o>57343?n[s]:n.slice(s,s+2);e.push(c),s+=c.length}return e}function ns(n,e,t,s,l){let o;const c=e.length;for(let f=0;f<c-1;f++){const d=e[f];n.j[d]?o=n.j[d]:(o=new cn(s),o.jr=l.slice(),n.j[d]=o),n=o}return o=new cn(t),o.jr=l.slice(),n.j[e[c-1]]=o,o}function wx(n){const e=[],t=[];let s=0,l="0123456789";for(;s<n.length;){let o=0;for(;l.indexOf(n[s+o])>=0;)o++;if(o>0){e.push(t.join(""));for(let c=parseInt(n.substring(s,s+o),10);c>0;c--)t.pop();s+=o}else t.push(n[s]),s++}return e}const zo={defaultProtocol:"http",events:null,format:Nx,formatHref:Nx,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Jp(n,e=null){let t=Object.assign({},zo);n&&(t=Object.assign(t,n instanceof Jp?n.o:n));const s=t.ignoreTags,l=[];for(let o=0;o<s.length;o++)l.push(s[o].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=l}Jp.prototype={o:zo,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const s=e!=null;let l=this.o[n];return l&&(typeof l=="object"?(l=t.t in l?l[t.t]:zo[n],typeof l=="function"&&s&&(l=l(e,t))):typeof l=="function"&&s&&(l=l(e,t.t,t)),l)},getObj(n,e,t){let s=this.o[n];return typeof s=="function"&&e!=null&&(s=s(e,t.t,t)),s},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function Nx(n){return n}function pS(n,e){this.t="token",this.v=n,this.tk=e}pS.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),s=n.get("format",e,this);return t&&s.length>t?s.substring(0,t)+"":s},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=zo.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),s=n.get("formatHref",t,this),l=n.get("tagName",t,e),o=this.toFormattedString(n),c={},f=n.get("className",t,e),d=n.get("target",t,e),p=n.get("rel",t,e),g=n.getObj("attributes",t,e),y=n.getObj("events",t,e);return c.href=s,f&&(c.class=f),d&&(c.target=d),p&&(c.rel=p),g&&Object.assign(c,g),{tagName:l,attributes:c,content:o,eventListeners:y}}};function Mu(n,e){class t extends pS{constructor(l,o){super(l,o),this.t=n}}for(const s in e)t.prototype[s]=e[s];return t.t=n,t}const Ax=Mu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Ox=Mu("text"),uO=Mu("nl"),pc=Mu("url",{isLink:!0,toHref(n=zo.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Ro&&n[1].t===us}}),zn=n=>new cn(n);function fO({groups:n}){const e=n.domain.concat([Zc,eu,ls,tu,nu,ru,su,iu,Ln,Vp,So,lu,ou,au,Zn,uu,To,cu]),t=[Wc,us,Gp,Qn,Yp,So,ko,Kp,Pp,Vc,$c,xo,vo,Uc,Hc,Ic,qc,Gc,Yc,Kc,Pc,Jc,Fc,Xc,Qc],s=[Zc,Wc,eu,tu,nu,ru,su,iu,Ln,xo,vo,So,lu,ou,au,ko,Zn,uu,To,cu],l=zn(),o=te(l,To);ze(o,s,o),ze(o,n.domain,o);const c=zn(),f=zn(),d=zn();ze(l,n.domain,c),ze(l,n.scheme,f),ze(l,n.slashscheme,d),ze(c,s,o),ze(c,n.domain,c);const p=te(c,ls);te(o,ls,p),te(f,ls,p),te(d,ls,p);const g=te(o,Qn);ze(g,s,o),ze(g,n.domain,o);const y=zn();ze(p,n.domain,y),ze(y,n.domain,y);const x=te(y,Qn);ze(x,n.domain,y);const v=zn(Ax);ze(x,n.tld,v),ze(x,n.utld,v),te(p,Ro,v);const k=te(y,Ln);te(k,Ln,k),ze(k,n.domain,y),ze(v,n.domain,y),te(v,Qn,x),te(v,Ln,k);const E=te(v,us);ze(E,n.numeric,Ax);const C=te(c,Ln),M=te(c,Qn);te(C,Ln,C),ze(C,n.domain,c),ze(M,s,o),ze(M,n.domain,c);const I=zn(pc);ze(M,n.tld,I),ze(M,n.utld,I),ze(I,n.domain,c),ze(I,s,o),te(I,Qn,M),te(I,Ln,C),te(I,ls,p);const $=te(I,us),X=zn(pc);ze($,n.numeric,X);const _=zn(pc),Y=zn();ze(_,e,_),ze(_,t,Y),ze(Y,e,_),ze(Y,t,Y),te(I,Zn,_),te(X,Zn,_);const V=te(f,us),Z=te(d,us),ie=te(Z,Zn),Te=te(ie,Zn);ze(f,n.domain,c),te(f,Qn,M),te(f,Ln,C),ze(d,n.domain,c),te(d,Qn,M),te(d,Ln,C),ze(V,n.domain,_),te(V,Zn,_),te(V,ko,_),ze(Te,n.domain,_),ze(Te,e,_),te(Te,Zn,_);const $e=[[xo,vo],[Hc,Uc],[Ic,qc],[Vc,$c],[Gc,Yc],[Kc,Pc],[Jc,Fc],[Xc,Qc]];for(let Oe=0;Oe<$e.length;Oe++){const[rt,we]=$e[Oe],he=te(_,rt);te(Y,rt,he),te(he,we,_);const B=zn(pc);ze(he,e,B);const ee=zn();ze(he,t),ze(B,e,B),ze(B,t,ee),ze(ee,e,B),ze(ee,t,ee),te(B,we,_),te(ee,we,_)}return te(l,Ro,I),te(l,$p,uO),{start:l,tokens:dS}}function dO(n,e,t){let s=t.length,l=0,o=[],c=[];for(;l<s;){let f=n,d=null,p=null,g=0,y=null,x=-1;for(;l<s&&!(d=f.go(t[l].t));)c.push(t[l++]);for(;l<s&&(p=d||f.go(t[l].t));)d=null,f=p,f.accepts()?(x=0,y=f):x>=0&&x++,l++,g++;if(x<0)l-=g,l<s&&(c.push(t[l]),l++);else{c.length>0&&(o.push(Mh(Ox,e,c)),c=[]),l-=x,g-=x;const v=y.t,k=t.slice(l-g,l);o.push(Mh(v,e,k))}}return c.length>0&&o.push(Mh(Ox,e,c)),o}function Mh(n,e,t){const s=t[0].s,l=t[t.length-1].e,o=e.slice(s,l);return new n(o,t)}const hO=typeof console<"u"&&console&&console.warn||(()=>{}),pO="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ct={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function mO(){return cn.groups={},ct.scanner=null,ct.parser=null,ct.tokenQueue=[],ct.pluginQueue=[],ct.customSchemes=[],ct.initialized=!1,ct}function Dx(n,e=!1){if(ct.initialized&&hO(`linkifyjs: already initialized - will not register custom scheme "${n}" ${pO}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);ct.customSchemes.push([n,e])}function gO(){ct.scanner=aO(ct.customSchemes);for(let n=0;n<ct.tokenQueue.length;n++)ct.tokenQueue[n][1]({scanner:ct.scanner});ct.parser=fO(ct.scanner.tokens);for(let n=0;n<ct.pluginQueue.length;n++)ct.pluginQueue[n][1]({scanner:ct.scanner,parser:ct.parser});return ct.initialized=!0,ct}function Fp(n){return ct.initialized||gO(),dO(ct.parser.start,n,hS(ct.scanner.start,n))}Fp.scan=hS;function mS(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const s=new Jp(t),l=Fp(n),o=[];for(let c=0;c<l.length;c++){const f=l[c];f.isLink&&(!e||f.t===e)&&s.check(f)&&o.push(f.toFormattedObject(s))}return o}var Xp="[\0- -\u2029]",yO=new RegExp(Xp),bO=new RegExp(`${Xp}$`),xO=new RegExp(Xp,"g");function vO(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function SO(n){return new pt({key:new Ot("autolink"),appendTransaction:(e,t,s)=>{const l=e.some(p=>p.docChanged)&&!t.doc.eq(s.doc),o=e.some(p=>p.getMeta("preventAutolink"));if(!l||o)return;const{tr:c}=s,f=Av(t.doc,[...e]);if(_v(f).forEach(({newRange:p})=>{const g=S2(s.doc,p,v=>v.isTextblock);let y,x;if(g.length>1)y=g[0],x=s.doc.textBetween(y.pos,y.pos+y.node.nodeSize,void 0," ");else if(g.length){const v=s.doc.textBetween(p.from,p.to," "," ");if(!bO.test(v))return;y=g[0],x=s.doc.textBetween(y.pos,p.to,void 0," ")}if(y&&x){const v=x.split(yO).filter(Boolean);if(v.length<=0)return!1;const k=v[v.length-1],E=y.pos+x.lastIndexOf(k);if(!k)return!1;const C=Fp(k).map(M=>M.toObject(n.defaultProtocol));if(!vO(C))return!1;C.filter(M=>M.isLink).map(M=>({...M,from:E+M.start+1,to:E+M.end+1})).filter(M=>s.schema.marks.code?!s.doc.rangeHasMark(M.from,M.to,s.schema.marks.code):!0).filter(M=>n.validate(M.value)).filter(M=>n.shouldAutoLink(M.value)).forEach(M=>{_p(M.from,M.to,s.doc).some(I=>I.mark.type===n.type)||c.addMark(M.from,M.to,n.type.create({href:M.href}))})}}),!!c.steps.length)return c}})}function kO(n){return new pt({key:new Ot("handleClickLink"),props:{handleClick:(e,t,s)=>{var l,o;if(s.button!==0||!e.editable)return!1;let c=null;if(s.target instanceof HTMLAnchorElement)c=s.target;else{const d=s.target;if(!d)return!1;const p=n.editor.view.dom;c=d.closest("a"),c&&!p.contains(c)&&(c=null)}if(!c)return!1;let f=!1;if(n.enableClickSelection&&(f=n.editor.commands.extendMarkRange(n.type.name)),n.openOnClick){const d=Lv(e.state,n.type.name),p=(l=c.href)!=null?l:d.href,g=(o=c.target)!=null?o:d.target;p&&(window.open(p,g),f=!0)}return f}}})}function TO(n){return new pt({key:new Ot("handlePasteLink"),props:{handlePaste:(e,t,s)=>{const{shouldAutoLink:l}=n,{state:o}=e,{selection:c}=o,{empty:f}=c;if(f)return!1;let d="";s.content.forEach(g=>{d+=g.textContent});const p=mS(d,{defaultProtocol:n.defaultProtocol}).find(g=>g.isLink&&g.value===d);return!d||!p||l!==void 0&&!l(p.value)?!1:n.editor.commands.setMark(n.type,{href:p.href})}}})}function $s(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(s=>{const l=typeof s=="string"?s:s.scheme;l&&t.push(l)}),!n||n.replace(xO,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var EO=li.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){Dx(n);return}Dx(n.scheme,n.optionalSlashes)})},onDestroy(){mO()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!$s(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(n),t=/^[a-z][a-z0-9+.-]*:/i.test(n);if(e||t&&!n.includes("@"))return!0;const l=(n.includes("@")?n.split("@").pop():n).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(l)||!/\./.test(l))}}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!$s(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!$s(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Nt(this.options.HTMLAttributes,n),0]:["a",Nt(this.options.HTMLAttributes,{...n,href:""}),0]},markdownTokenName:"link",parseMarkdown:(n,e)=>e.applyMark("link",e.parseInline(n.tokens||[]),{href:n.href,title:n.title||null}),renderMarkdown:(n,e)=>{var t,s,l,o;const c=(s=(t=n.attrs)==null?void 0:t.href)!=null?s:"",f=(o=(l=n.attrs)==null?void 0:l.title)!=null?o:"",d=e.renderChildren(n);return f?`[${d}](${c} "${f}")`:`[${d}](${c})`},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:s=>!!$s(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:s=>!!$s(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[si({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:s}=this.options,l=mS(n).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:c=>!!$s(c,t),protocols:t,defaultProtocol:s}));l.length&&l.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(SO({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:s=>this.options.isAllowedUri(s,{defaultValidate:l=>!!$s(l,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),n.push(kO({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(TO({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),n}}),CO=Object.defineProperty,MO=(n,e)=>{for(var t in e)CO(n,t,{get:e[t],enumerable:!0})},wO="listItem",jx="textStyle",Rx=/^\s*([-+*])\s$/,gS=kn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Nt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>n.type!=="list"||n.ordered?[]:{type:"bulletList",content:n.items?e.parseChildren(n.items):[]},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(wO,this.editor.getAttributes(jx)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=al({find:Rx,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=al({find:Rx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(jx),editor:this.editor})),[n]}}),yS=kn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Nt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list_item",parseMarkdown:(n,e)=>{if(n.type!=="list_item")return[];let t=[];if(n.tokens&&n.tokens.length>0)if(n.tokens.some(l=>l.type==="paragraph"))t=e.parseChildren(n.tokens);else{const l=n.tokens[0];if(l&&l.type==="text"&&l.tokens&&l.tokens.length>0){if(t=[{type:"paragraph",content:e.parseInline(l.tokens)}],n.tokens.length>1){const c=n.tokens.slice(1),f=e.parseChildren(c);t.push(...f)}}else t=e.parseChildren(n.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(n,e,t)=>Ip(n,e,s=>{var l,o;return s.parentType==="bulletList"?"- ":s.parentType==="orderedList"?`${(((o=(l=s.meta)==null?void 0:l.parentAttrs)==null?void 0:o.start)||1)+s.index}. `:"- "},t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),NO={};MO(NO,{findListItemPos:()=>Io,getNextListDepth:()=>Qp,handleBackspace:()=>op,handleDelete:()=>ap,hasListBefore:()=>bS,hasListItemAfter:()=>AO,hasListItemBefore:()=>xS,listItemHasSubList:()=>vS,nextListIsDeeper:()=>SS,nextListIsHigher:()=>kS});var Io=(n,e)=>{const{$from:t}=e.selection,s=wt(n,e.schema);let l=null,o=t.depth,c=t.pos,f=null;for(;o>0&&f===null;)l=t.node(o),l.type===s?f=o:(o-=1,c-=1);return f===null?null:{$pos:e.doc.resolve(c),depth:f}},Qp=(n,e)=>{const t=Io(n,e);if(!t)return!1;const[,s]=D2(e,n,t.$pos.pos+4);return s},bS=(n,e,t)=>{const{$anchor:s}=n.selection,l=Math.max(0,s.pos-2),o=n.doc.resolve(l).node();return!(!o||!t.includes(o.type.name))},xS=(n,e)=>{var t;const{$anchor:s}=e.selection,l=e.doc.resolve(s.pos-2);return!(l.index()===0||((t=l.nodeBefore)==null?void 0:t.type.name)!==n)},vS=(n,e,t)=>{if(!t)return!1;const s=wt(n,e.schema);let l=!1;return t.descendants(o=>{o.type===s&&(l=!0)}),l},op=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!xs(n.state,e)&&bS(n.state,e,t)){const{$anchor:f}=n.state.selection,d=n.state.doc.resolve(f.before()-1),p=[];d.node().descendants((x,v)=>{x.type.name===e&&p.push({node:x,pos:v})});const g=p.at(-1);if(!g)return!1;const y=n.state.doc.resolve(d.start()+g.pos+1);return n.chain().cut({from:f.start()-1,to:f.end()+1},y.end()).joinForward().run()}if(!xs(n.state,e)||!L2(n.state))return!1;const s=Io(e,n.state);if(!s)return!1;const o=n.state.doc.resolve(s.$pos.pos-2).node(s.depth),c=vS(e,n.state,o);return xS(e,n.state)&&!c?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},SS=(n,e)=>{const t=Qp(n,e),s=Io(n,e);return!s||!t?!1:t>s.depth},kS=(n,e)=>{const t=Qp(n,e),s=Io(n,e);return!s||!t?!1:t<s.depth},ap=(n,e)=>{if(!xs(n.state,e)||!z2(n.state,e))return!1;const{selection:t}=n.state,{$from:s,$to:l}=t;return!t.empty&&s.sameParent(l)?!1:SS(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():kS(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},AO=(n,e)=>{var t;const{$anchor:s}=e.selection,l=e.doc.resolve(s.pos-s.parentOffset-2);return!(l.index()===l.parent.childCount-1||((t=l.nodeAfter)==null?void 0:t.type.name)!==n)},TS=St.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&ap(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&ap(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:s})=>{n.state.schema.nodes[t]!==void 0&&op(n,t,s)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:s})=>{n.state.schema.nodes[t]!==void 0&&op(n,t,s)&&(e=!0)}),e}}}}),zx=/^(\s*)(\d+)\.\s+(.*)$/,OO=/^\s/;function DO(n){const e=[];let t=0,s=0;for(;t<n.length;){const l=n[t],o=l.match(zx);if(!o)break;const[,c,f,d]=o,p=c.length;let g=d,y=t+1;const x=[l];for(;y<n.length;){const v=n[y];if(v.match(zx))break;if(v.trim()==="")x.push(v),g+=`
`,y+=1;else if(v.match(OO))x.push(v),g+=`
${v.slice(p+2)}`,y+=1;else break}e.push({indent:p,number:parseInt(f,10),content:g.trim(),raw:x.join(`
`)}),s=y,t=y}return[e,s]}function ES(n,e,t){var s;const l=[];let o=0;for(;o<n.length;){const c=n[o];if(c.indent===e){const f=c.content.split(`
`),d=((s=f[0])==null?void 0:s.trim())||"",p=[];d&&p.push({type:"paragraph",raw:d,tokens:t.inlineTokens(d)});const g=f.slice(1).join(`
`).trim();if(g){const v=t.blockTokens(g);p.push(...v)}let y=o+1;const x=[];for(;y<n.length&&n[y].indent>e;)x.push(n[y]),y+=1;if(x.length>0){const v=Math.min(...x.map(E=>E.indent)),k=ES(x,v,t);p.push({type:"list",ordered:!0,start:x[0].number,items:k,raw:x.map(E=>E.raw).join(`
`)})}l.push({type:"list_item",raw:c.raw,tokens:p}),o=y}else o+=1}return l}function jO(n,e){return n.map(t=>{if(t.type!=="list_item")return e.parseChildren([t])[0];const s=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(l=>{if(l.type==="paragraph"||l.type==="list"||l.type==="blockquote"||l.type==="code")s.push(...e.parseChildren([l]));else if(l.type==="text"&&l.tokens){const o=e.parseChildren([l]);s.push({type:"paragraph",content:o})}else{const o=e.parseChildren([l]);o.length>0&&s.push(...o)}}),{type:"listItem",content:s}})}var RO="listItem",Lx="textStyle",_x=/^(\d+)\.\s$/,CS=kn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Nt(this.options.HTMLAttributes,t),0]:["ol",Nt(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,e)=>{if(n.type!=="list"||!n.ordered)return[];const t=n.start||1,s=n.items?jO(n.items,e):[];return t!==1?{type:"orderedList",attrs:{start:t},content:s}:{type:"orderedList",content:s}},renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:n=>{const e=n.match(/^(\s*)(\d+)\.\s+/),t=e?.index;return t!==void 0?t:-1},tokenize:(n,e,t)=>{var s;const l=n.split(`
`),[o,c]=DO(l);if(o.length===0)return;const f=ES(o,0,t);return f.length===0?void 0:{type:"list",ordered:!0,start:((s=o[0])==null?void 0:s.number)||1,items:f,raw:l.slice(0,c).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(RO,this.editor.getAttributes(Lx)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=al({find:_x,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=al({find:_x,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Lx)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),zO=/^\s*(\[([( |x])?\])\s$/,MS=kn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",Nt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(n,e)=>{const t=[];if(n.tokens&&n.tokens.length>0?t.push(e.createNode("paragraph",{},e.parseInline(n.tokens))):n.text?t.push(e.createNode("paragraph",{},[e.createNode("text",{text:n.text})])):t.push(e.createNode("paragraph",{},[])),n.nestedTokens&&n.nestedTokens.length>0){const s=e.parseChildren(n.nestedTokens);t.push(...s)}return e.createNode("taskItem",{checked:n.checked||!1},t)},renderMarkdown:(n,e)=>{var t;const l=`- [${(t=n.attrs)!=null&&t.checked?"x":" "}] `;return Ip(n,e,l)},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:s})=>{const l=document.createElement("li"),o=document.createElement("label"),c=document.createElement("span"),f=document.createElement("input"),d=document.createElement("div"),p=y=>{var x,v;f.ariaLabel=((v=(x=this.options.a11y)==null?void 0:x.checkboxLabel)==null?void 0:v.call(x,y,f.checked))||`Task item checkbox for ${y.textContent||"empty task item"}`};p(n),o.contentEditable="false",f.type="checkbox",f.addEventListener("mousedown",y=>y.preventDefault()),f.addEventListener("change",y=>{if(!s.isEditable&&!this.options.onReadOnlyChecked){f.checked=!f.checked;return}const{checked:x}=y.target;s.isEditable&&typeof t=="function"&&s.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:v})=>{const k=t();if(typeof k!="number")return!1;const E=v.doc.nodeAt(k);return v.setNodeMarkup(k,void 0,{...E?.attrs,checked:x}),!0}).run(),!s.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,x)||(f.checked=!f.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([y,x])=>{l.setAttribute(y,x)}),l.dataset.checked=n.attrs.checked,f.checked=n.attrs.checked,o.append(f,c),l.append(o,d),Object.entries(e).forEach(([y,x])=>{l.setAttribute(y,x)});let g=new Set(Object.keys(e));return{dom:l,contentDOM:d,update:y=>{if(y.type!==this.type)return!1;l.dataset.checked=y.attrs.checked,f.checked=y.attrs.checked,p(y);const x=s.extensionManager.attributes,v=jo(y,x),k=new Set(Object.keys(v)),E=this.options.HTMLAttributes;return g.forEach(C=>{k.has(C)||(C in E?l.setAttribute(C,E[C]):l.removeAttribute(C))}),Object.entries(v).forEach(([C,M])=>{M==null?C in E?l.setAttribute(C,E[C]):l.removeAttribute(C):l.setAttribute(C,M)}),g=k,!0}}}},addInputRules(){return[al({find:zO,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),wS=kn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",Nt(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},parseMarkdown:(n,e)=>e.createNode("taskList",{},e.parseChildren(n.items||[])),renderMarkdown:(n,e)=>n.content?e.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(n){var e;const t=(e=n.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return t!==void 0?t:-1},tokenize(n,e,t){const s=o=>{const c=Qh(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:f=>({indentLevel:f[1].length,mainContent:f[4],checked:f[3].toLowerCase()==="x"}),createToken:(f,d)=>({type:"taskItem",raw:"",mainContent:f.mainContent,indentLevel:f.indentLevel,checked:f.checked,text:f.mainContent,tokens:t.inlineTokens(f.mainContent),nestedTokens:d}),customNestedParser:s},t);return c?[{type:"taskList",raw:c.raw,items:c.items}]:t.blockTokens(o)},l=Qh(n,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,c)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:t.inlineTokens(o.mainContent),nestedTokens:c}),customNestedParser:s},t);if(l)return{type:"taskList",raw:l.raw,items:l.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});St.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(gS.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push(yS.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(TS.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(CS.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(MS.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(wS.configure(this.options.taskList)),n}});var Bx="&nbsp;",LO="",_O=kn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Nt(this.options.HTMLAttributes,n),0]},parseMarkdown:(n,e)=>{const t=n.tokens||[];if(t.length===1&&t[0].type==="image")return e.parseChildren([t[0]]);const s=e.parseInline(t);return s.length===1&&s[0].type==="text"&&(s[0].text===Bx||s[0].text===LO)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,s)},renderMarkdown:(n,e)=>{if(!n)return"";const t=Array.isArray(n.content)?n.content:[];return t.length===0?Bx:e.renderChildren(t)},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),BO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,HO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,UO=li.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Nt(this.options.HTMLAttributes,n),0]},markdownTokenName:"del",parseMarkdown:(n,e)=>e.applyMark("strike",e.parseInline(n.tokens||[])),renderMarkdown:(n,e)=>`~~${e.renderChildren(n)}~~`,addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ol({find:BO,type:this.type})]},addPasteRules(){return[si({find:HO,type:this.type})]}}),IO=kn.create({name:"text",group:"inline",parseMarkdown:n=>({type:"text",text:n.text||""}),renderMarkdown:n=>n.text||""}),qO=li.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",Nt(this.options.HTMLAttributes,n),0]},parseMarkdown(n,e){return e.applyMark(this.name||"underline",e.parseInline(n.tokens||[]))},renderMarkdown(n,e){return`++${e.renderChildren(n)}++`},markdownTokenizer:{name:"underline",level:"inline",start(n){return n.indexOf("++")},tokenize(n,e,t){const l=/^(\+\+)([\s\S]+?)(\+\+)/.exec(n);if(!l)return;const o=l[2].trim();return{type:"underline",raw:l[0],text:o,tokens:t.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function VO(n={}){return new pt({view(e){return new $O(e,n)}})}class $O{constructor(e,t){var s;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(s=t.width)!==null&&s!==void 0?s:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(l=>{let o=c=>{this[l](c)};return e.dom.addEventListener(l,o),{name:l,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,s,l=this.editorView.dom,o=l.getBoundingClientRect(),c=o.width/l.offsetWidth,f=o.height/l.offsetHeight;if(t){let y=e.nodeBefore,x=e.nodeAfter;if(y||x){let v=this.editorView.nodeDOM(this.cursorPos-(y?y.nodeSize:0));if(v){let k=v.getBoundingClientRect(),E=y?k.bottom:k.top;y&&x&&(E=(E+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let C=this.width/2*f;s={left:k.left,right:k.right,top:E-C,bottom:E+C}}}}if(!s){let y=this.editorView.coordsAtPos(this.cursorPos),x=this.width/2*c;s={left:y.left-x,right:y.left+x,top:y.top,bottom:y.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let p,g;if(!d||d==document.body&&getComputedStyle(d).position=="static")p=-pageXOffset,g=-pageYOffset;else{let y=d.getBoundingClientRect(),x=y.width/d.offsetWidth,v=y.height/d.offsetHeight;p=y.left-d.scrollLeft*x,g=y.top-d.scrollTop*v}this.element.style.left=(s.left-p)/c+"px",this.element.style.top=(s.top-g)/f+"px",this.element.style.width=(s.right-s.left)/c+"px",this.element.style.height=(s.bottom-s.top)/f+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),s=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),l=s&&s.type.spec.disableDropCursor,o=typeof l=="function"?l(this.editorView,t,e):l;if(t&&!o){let c=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let f=v1(this.editorView.state.doc,c,this.editorView.dragging.slice);f!=null&&(c=f)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class bt extends Le{constructor(e){super(e,e)}map(e,t){let s=e.resolve(t.map(this.head));return bt.valid(s)?new bt(s):Le.near(s)}content(){return oe.empty}eq(e){return e instanceof bt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new bt(e.resolve(t.pos))}getBookmark(){return new Zp(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!GO(e)||!YO(e))return!1;let s=t.type.spec.allowGapCursor;if(s!=null)return s;let l=t.contentMatchAt(e.index()).defaultType;return l&&l.isTextblock}static findGapCursorFrom(e,t,s=!1){e:for(;;){if(!s&&bt.valid(e))return e;let l=e.pos,o=null;for(let c=e.depth;;c--){let f=e.node(c);if(t>0?e.indexAfter(c)<f.childCount:e.index(c)>0){o=f.child(t>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;l+=t;let d=e.doc.resolve(l);if(bt.valid(d))return d}for(;;){let c=t>0?o.firstChild:o.lastChild;if(!c){if(o.isAtom&&!o.isText&&!Se.isSelectable(o)){e=e.doc.resolve(l+o.nodeSize*t),s=!1;continue e}break}o=c,l+=t;let f=e.doc.resolve(l);if(bt.valid(f))return f}return null}}}bt.prototype.visible=!1;bt.findFrom=bt.findGapCursorFrom;Le.jsonID("gapcursor",bt);class Zp{constructor(e){this.pos=e}map(e){return new Zp(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return bt.valid(t)?new bt(t):Le.near(t)}}function NS(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function GO(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),s=n.node(e);if(t==0){if(s.type.spec.isolating)return!0;continue}for(let l=s.child(t-1);;l=l.lastChild){if(l.childCount==0&&!l.inlineContent||NS(l.type))return!0;if(l.inlineContent)return!1}}return!0}function YO(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),s=n.node(e);if(t==s.childCount){if(s.type.spec.isolating)return!0;continue}for(let l=s.child(t);;l=l.firstChild){if(l.childCount==0&&!l.inlineContent||NS(l.type))return!0;if(l.inlineContent)return!1}}return!0}function KO(){return new pt({props:{decorations:XO,createSelectionBetween(n,e,t){return e.pos==t.pos&&bt.valid(t)?new bt(t):null},handleClick:JO,handleKeyDown:PO,handleDOMEvents:{beforeinput:FO}}})}const PO=Sv({ArrowLeft:mc("horiz",-1),ArrowRight:mc("horiz",1),ArrowUp:mc("vert",-1),ArrowDown:mc("vert",1)});function mc(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(s,l,o){let c=s.selection,f=e>0?c.$to:c.$from,d=c.empty;if(c instanceof Ce){if(!o.endOfTextblock(t)||f.depth==0)return!1;d=!1,f=s.doc.resolve(e>0?f.after():f.before())}let p=bt.findGapCursorFrom(f,e,d);return p?(l&&l(s.tr.setSelection(new bt(p))),!0):!1}}function JO(n,e,t){if(!n||!n.editable)return!1;let s=n.state.doc.resolve(e);if(!bt.valid(s))return!1;let l=n.posAtCoords({left:t.clientX,top:t.clientY});return l&&l.inside>-1&&Se.isSelectable(n.state.doc.nodeAt(l.inside))?!1:(n.dispatch(n.state.tr.setSelection(new bt(s))),!0)}function FO(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof bt))return!1;let{$from:t}=n.state.selection,s=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!s)return!1;let l=W.empty;for(let c=s.length-1;c>=0;c--)l=W.from(s[c].createAndFill(null,l));let o=n.state.tr.replace(t.pos,t.pos,new oe(l,0,0));return o.setSelection(Ce.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function XO(n){if(!(n.selection instanceof bt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ht.create(n.doc,[Qt.widget(n.selection.head,e,{key:"gapcursor"})])}var fu=200,Lt=function(){};Lt.prototype.append=function(e){return e.length?(e=Lt.from(e),!this.length&&e||e.length<fu&&this.leafAppend(e)||this.length<fu&&e.leafPrepend(this)||this.appendInner(e)):this};Lt.prototype.prepend=function(e){return e.length?Lt.from(e).append(this):this};Lt.prototype.appendInner=function(e){return new QO(this,e)};Lt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Lt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Lt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Lt.prototype.forEach=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length),t<=s?this.forEachInner(e,t,s,0):this.forEachInvertedInner(e,t,s,0)};Lt.prototype.map=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length);var l=[];return this.forEach(function(o,c){return l.push(e(o,c))},t,s),l};Lt.from=function(e){return e instanceof Lt?e:e&&e.length?new AS(e):Lt.empty};var AS=(function(n){function e(s){n.call(this),this.values=s}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(l,o){return l==0&&o==this.length?this:new e(this.values.slice(l,o))},e.prototype.getInner=function(l){return this.values[l]},e.prototype.forEachInner=function(l,o,c,f){for(var d=o;d<c;d++)if(l(this.values[d],f+d)===!1)return!1},e.prototype.forEachInvertedInner=function(l,o,c,f){for(var d=o-1;d>=c;d--)if(l(this.values[d],f+d)===!1)return!1},e.prototype.leafAppend=function(l){if(this.length+l.length<=fu)return new e(this.values.concat(l.flatten()))},e.prototype.leafPrepend=function(l){if(this.length+l.length<=fu)return new e(l.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e})(Lt);Lt.empty=new AS([]);var QO=(function(n){function e(t,s){n.call(this),this.left=t,this.right=s,this.length=t.length+s.length,this.depth=Math.max(t.depth,s.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(s){return s<this.left.length?this.left.get(s):this.right.get(s-this.left.length)},e.prototype.forEachInner=function(s,l,o,c){var f=this.left.length;if(l<f&&this.left.forEachInner(s,l,Math.min(o,f),c)===!1||o>f&&this.right.forEachInner(s,Math.max(l-f,0),Math.min(this.length,o)-f,c+f)===!1)return!1},e.prototype.forEachInvertedInner=function(s,l,o,c){var f=this.left.length;if(l>f&&this.right.forEachInvertedInner(s,l-f,Math.max(o,f)-f,c+f)===!1||o<f&&this.left.forEachInvertedInner(s,Math.min(l,f),o,c)===!1)return!1},e.prototype.sliceInner=function(s,l){if(s==0&&l==this.length)return this;var o=this.left.length;return l<=o?this.left.slice(s,l):s>=o?this.right.slice(s-o,l-o):this.left.slice(s,o).append(this.right.slice(0,l-o))},e.prototype.leafAppend=function(s){var l=this.right.leafAppend(s);if(l)return new e(this.left,l)},e.prototype.leafPrepend=function(s){var l=this.left.leafPrepend(s);if(l)return new e(l,this.right)},e.prototype.appendInner=function(s){return this.left.depth>=Math.max(this.right.depth,s.depth)+1?new e(this.left,new e(this.right,s)):new e(this,s)},e})(Lt);const ZO=500;class $n{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}let l,o;t&&(l=this.remapping(s,this.items.length),o=l.maps.length);let c=e.tr,f,d,p=[],g=[];return this.items.forEach((y,x)=>{if(!y.step){l||(l=this.remapping(s,x+1),o=l.maps.length),o--,g.push(y);return}if(l){g.push(new Wn(y.map));let v=y.step.map(l.slice(o)),k;v&&c.maybeStep(v).doc&&(k=c.mapping.maps[c.mapping.maps.length-1],p.push(new Wn(k,void 0,void 0,p.length+g.length))),o--,k&&l.appendMap(k,o)}else c.maybeStep(y.step);if(y.selection)return f=l?y.selection.map(l.slice(o)):y.selection,d=new $n(this.items.slice(0,s).append(g.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:c,selection:f}}addTransform(e,t,s,l){let o=[],c=this.eventCount,f=this.items,d=!l&&f.length?f.get(f.length-1):null;for(let g=0;g<e.steps.length;g++){let y=e.steps[g].invert(e.docs[g]),x=new Wn(e.mapping.maps[g],y,t),v;(v=d&&d.merge(x))&&(x=v,g?o.pop():f=f.slice(0,f.length-1)),o.push(x),t&&(c++,t=void 0),l||(d=x)}let p=c-s.depth;return p>e3&&(f=WO(f,p),c-=p),new $n(f.append(o),c)}remapping(e,t){let s=new Mo;return this.items.forEach((l,o)=>{let c=l.mirrorOffset!=null&&o-l.mirrorOffset>=e?s.maps.length-l.mirrorOffset:void 0;s.appendMap(l.map,c)},e,t),s}addMaps(e){return this.eventCount==0?this:new $n(this.items.append(e.map(t=>new Wn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let s=[],l=Math.max(0,this.items.length-t),o=e.mapping,c=e.steps.length,f=this.eventCount;this.items.forEach(x=>{x.selection&&f--},l);let d=t;this.items.forEach(x=>{let v=o.getMirror(--d);if(v==null)return;c=Math.min(c,v);let k=o.maps[v];if(x.step){let E=e.steps[v].invert(e.docs[v]),C=x.selection&&x.selection.map(o.slice(d+1,v));C&&f++,s.push(new Wn(k,E,C))}else s.push(new Wn(k))},l);let p=[];for(let x=t;x<c;x++)p.push(new Wn(o.maps[x]));let g=this.items.slice(0,l).append(p).append(s),y=new $n(g,f);return y.emptyItemCount()>ZO&&(y=y.compress(this.items.length-s.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),s=t.maps.length,l=[],o=0;return this.items.forEach((c,f)=>{if(f>=e)l.push(c),c.selection&&o++;else if(c.step){let d=c.step.map(t.slice(s)),p=d&&d.getMap();if(s--,p&&t.appendMap(p,s),d){let g=c.selection&&c.selection.map(t.slice(s));g&&o++;let y=new Wn(p.invert(),d,g),x,v=l.length-1;(x=l.length&&l[v].merge(y))?l[v]=x:l.push(y)}}else c.map&&s--},this.items.length,0),new $n(Lt.from(l.reverse()),o)}}$n.empty=new $n(Lt.empty,0);function WO(n,e){let t;return n.forEach((s,l)=>{if(s.selection&&e--==0)return t=l,!1}),n.slice(t)}class Wn{constructor(e,t,s,l){this.map=e,this.step=t,this.selection=s,this.mirrorOffset=l}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Wn(t.getMap().invert(),t,this.selection)}}}class as{constructor(e,t,s,l,o){this.done=e,this.undone=t,this.prevRanges=s,this.prevTime=l,this.prevComposition=o}}const e3=20;function t3(n,e,t,s){let l=t.getMeta(Ws),o;if(l)return l.historyState;t.getMeta(s3)&&(n=new as(n.done,n.undone,null,0,-1));let c=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(c&&c.getMeta(Ws))return c.getMeta(Ws).redo?new as(n.done.addTransform(t,void 0,s,vc(e)),n.undone,Hx(t.mapping.maps),n.prevTime,n.prevComposition):new as(n.done,n.undone.addTransform(t,void 0,s,vc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let f=t.getMeta("composition"),d=n.prevTime==0||!c&&n.prevComposition!=f&&(n.prevTime<(t.time||0)-s.newGroupDelay||!n3(t,n.prevRanges)),p=c?wh(n.prevRanges,t.mapping):Hx(t.mapping.maps);return new as(n.done.addTransform(t,d?e.selection.getBookmark():void 0,s,vc(e)),$n.empty,p,t.time,f??n.prevComposition)}else return(o=t.getMeta("rebased"))?new as(n.done.rebased(t,o),n.undone.rebased(t,o),wh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new as(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),wh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function n3(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((s,l)=>{for(let o=0;o<e.length;o+=2)s<=e[o+1]&&l>=e[o]&&(t=!0)}),t}function Hx(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((s,l,o,c)=>e.push(o,c));return e}function wh(n,e){if(!n)return null;let t=[];for(let s=0;s<n.length;s+=2){let l=e.map(n[s],1),o=e.map(n[s+1],-1);l<=o&&t.push(l,o)}return t}function r3(n,e,t){let s=vc(e),l=Ws.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,s);if(!o)return null;let c=o.selection.resolve(o.transform.doc),f=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),l,s),d=new as(t?f:o.remaining,t?o.remaining:f,null,0,-1);return o.transform.setSelection(c).setMeta(Ws,{redo:t,historyState:d})}let Nh=!1,Ux=null;function vc(n){let e=n.plugins;if(Ux!=e){Nh=!1,Ux=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Nh=!0;break}}return Nh}const Ws=new Ot("history"),s3=new Ot("closeHistory");function i3(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new pt({key:Ws,state:{init(){return new as($n.empty,$n.empty,null,0,-1)},apply(e,t,s){return t3(t,s,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let s=t.inputType,l=s=="historyUndo"?DS:s=="historyRedo"?jS:null;return!l||!e.editable?!1:(t.preventDefault(),l(e.state,e.dispatch))}}}})}function OS(n,e){return(t,s)=>{let l=Ws.getState(t);if(!l||(n?l.undone:l.done).eventCount==0)return!1;if(s){let o=r3(l,t,n);o&&s(e?o.scrollIntoView():o)}return!0}}const DS=OS(!1,!0),jS=OS(!0,!0);St.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=n?.node||this.editor.state.doc;if((n?.mode||this.options.mode)==="textSize"){const s=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(s)}return e.nodeSize},this.storage.words=n=>{const e=n?.node||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new pt({key:new Ot("characterCount"),appendTransaction:(e,t,s)=>{if(n)return;const l=this.options.limit;if(l==null||l===0){n=!0;return}const o=this.storage.characters({node:s.doc});if(o>l){const c=o-l,f=0,d=c;console.warn(`[CharacterCount] Initial content exceeded limit of ${l} characters. Content was automatically trimmed.`);const p=s.tr.deleteRange(f,d);return n=!0,p}n=!0},filterTransaction:(e,t)=>{const s=this.options.limit;if(!e.docChanged||s===0||s===null||s===void 0)return!0;const l=this.storage.characters({node:t.doc}),o=this.storage.characters({node:e.doc});if(o<=s||l>s&&o>s&&o<=l)return!0;if(l>s&&o>s&&o>l||!e.getMeta("paste"))return!1;const f=e.selection.$head.pos,d=o-s,p=f-d,g=f;return e.deleteRange(p,g),!(this.storage.characters({node:e.doc})>s)}})]}});var l3=St.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[VO(this.options)]}});St.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new pt({key:new Ot("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:s}=this.editor,{anchor:l}=e,o=[];if(!t||!s)return ht.create(n,[]);let c=0;this.options.mode==="deepest"&&n.descendants((d,p)=>{if(d.isText)return;if(!(l>=p&&l<=p+d.nodeSize-1))return!1;c+=1});let f=0;return n.descendants((d,p)=>{if(d.isText||!(l>=p&&l<=p+d.nodeSize-1))return!1;if(f+=1,this.options.mode==="deepest"&&c-f>0||this.options.mode==="shallowest"&&f>1)return this.options.mode==="deepest";o.push(Qt.node(p,p+d.nodeSize,{class:this.options.className}))}),ht.create(n,o)}}})]}});var o3=St.create({name:"gapCursor",addProseMirrorPlugins(){return[KO()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=We(ye(n,"allowGapCursor",t)))!=null?e:null}}}),Ix="placeholder";function a3(n){return n.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}St.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:Ix,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const n=this.options.dataAttribute?`data-${a3(this.options.dataAttribute)}`:`data-${Ix}`;return[new pt({key:new Ot("placeholder"),props:{decorations:({doc:e,selection:t})=>{const s=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:l}=t,o=[];if(!s)return null;const c=this.editor.isEmpty;return e.descendants((f,d)=>{const p=l>=d&&l<=d+f.nodeSize,g=!f.isLeaf&&Tu(f);if((p||!this.options.showOnlyCurrent)&&g){const y=[this.options.emptyNodeClass];c&&y.push(this.options.emptyEditorClass);const x=Qt.node(d,d+f.nodeSize,{class:y.join(" "),[n]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:f,pos:d,hasAnchor:p}):this.options.placeholder});o.push(x)}return this.options.includeChildren}),ht.create(e,o)}}})]}});St.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:e}=this;return[new pt({key:new Ot("selection"),props:{decorations(t){return t.selection.empty||n.isFocused||!n.isEditable||Bv(t.selection)||n.view.dragging?null:ht.create(t.doc,[Qt.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function qx({types:n,node:e}){return e&&Array.isArray(n)&&n.includes(e.type)||e?.type===n}var c3=St.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var n;const e=new Ot(this.name),t=this.options.node||((n=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:n.name)||"paragraph",s=Object.entries(this.editor.schema.nodes).map(([,l])=>l).filter(l=>(this.options.notAfter||[]).concat(t).includes(l.name));return[new pt({key:e,appendTransaction:(l,o,c)=>{const{doc:f,tr:d,schema:p}=c,g=e.getState(c),y=f.content.size,x=p.nodes[t];if(g)return d.insert(y,x.create())},state:{init:(l,o)=>{const c=o.tr.doc.lastChild;return!qx({node:c,types:s})},apply:(l,o)=>{if(!l.docChanged||l.getMeta("__uniqueIDTransaction"))return o;const c=l.doc.lastChild;return!qx({node:c,types:s})}}})]}}),u3=St.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>DS(n,e),redo:()=>({state:n,dispatch:e})=>jS(n,e)}},addProseMirrorPlugins(){return[i3(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),f3=St.create({name:"starterKit",addExtensions(){var n,e,t,s;const l=[];return this.options.bold!==!1&&l.push(HA.configure(this.options.bold)),this.options.blockquote!==!1&&l.push(RA.configure(this.options.blockquote)),this.options.bulletList!==!1&&l.push(gS.configure(this.options.bulletList)),this.options.code!==!1&&l.push(qA.configure(this.options.code)),this.options.codeBlock!==!1&&l.push(GA.configure(this.options.codeBlock)),this.options.document!==!1&&l.push(YA.configure(this.options.document)),this.options.dropcursor!==!1&&l.push(l3.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&l.push(o3.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&l.push(KA.configure(this.options.hardBreak)),this.options.heading!==!1&&l.push(PA.configure(this.options.heading)),this.options.undoRedo!==!1&&l.push(u3.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&l.push(JA.configure(this.options.horizontalRule)),this.options.italic!==!1&&l.push(WA.configure(this.options.italic)),this.options.listItem!==!1&&l.push(yS.configure(this.options.listItem)),this.options.listKeymap!==!1&&l.push(TS.configure((n=this.options)==null?void 0:n.listKeymap)),this.options.link!==!1&&l.push(EO.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&l.push(CS.configure(this.options.orderedList)),this.options.paragraph!==!1&&l.push(_O.configure(this.options.paragraph)),this.options.strike!==!1&&l.push(UO.configure(this.options.strike)),this.options.text!==!1&&l.push(IO.configure(this.options.text)),this.options.underline!==!1&&l.push(qO.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&l.push(c3.configure((s=this.options)==null?void 0:s.trailingNode)),l}}),d3=f3,h3=wS,p3=MS;const rs=({onClick:n,active:e,title:t,children:s})=>b.jsx("button",{type:"button",onClick:n,title:t,className:`
      w-8 h-8 flex items-center justify-center rounded
      text-sm font-bold transition-colors cursor-pointer
      ${e?"bg-[var(--color-border-main)] text-[var(--color-bg-card)]":"text-[var(--color-text-muted)] hover:text-[var(--color-text-main)] hover:bg-[var(--color-bg-white)]"}
    `,children:s}),m3=({editor:n,isFullscreen:e,onToggleFullscreen:t})=>n?b.jsxs("div",{className:"flex gap-1 p-2 border-b border-[var(--color-border-gray-300)] bg-[var(--color-bg-gray-50)]",children:[b.jsx(rs,{onClick:()=>n.chain().focus().toggleHeading({level:1}).run(),active:n.isActive("heading",{level:1}),title:"Heading (Ctrl+Alt+1)",children:"H"}),b.jsx(rs,{onClick:()=>n.chain().focus().toggleBold().run(),active:n.isActive("bold"),title:"Bold (Ctrl+B)",children:"B"}),b.jsx(rs,{onClick:()=>n.chain().focus().toggleItalic().run(),active:n.isActive("italic"),title:"Italic (Ctrl+I)",children:b.jsx("span",{className:"italic",children:"I"})}),b.jsx("div",{className:"w-px bg-[var(--color-border-gray-300)] mx-1"}),b.jsx(rs,{onClick:()=>n.chain().focus().toggleBulletList().run(),active:n.isActive("bulletList"),title:"Bullet List",children:""}),b.jsx(rs,{onClick:()=>n.chain().focus().toggleOrderedList().run(),active:n.isActive("orderedList"),title:"Numbered List",children:"1."}),b.jsx(rs,{onClick:()=>n.chain().focus().toggleTaskList().run(),active:n.isActive("taskList"),title:"Checkbox List",children:""}),b.jsx("div",{className:"w-px bg-[var(--color-border-gray-300)] mx-1"}),b.jsx(rs,{onClick:()=>n.chain().focus().setHorizontalRule().run(),active:!1,title:"Horizontal Rule",children:""}),b.jsx("div",{className:"flex-1"}),b.jsx(rs,{onClick:t,active:e,title:e?"Exit Fullscreen (Esc)":"Fullscreen",children:e?"":""})]}):null,g3=({value:n,onChange:e})=>{const[t,s]=Q.useState(!1),l=NA({extensions:[d3.configure({heading:{levels:[1]},codeBlock:!1,code:!1,blockquote:!1,strike:!1}),h3,p3.configure({nested:!1})],content:Ah(n),onUpdate:({editor:c})=>{e(c.getJSON())},editorProps:{attributes:{class:"prose prose-sm max-w-none p-3 min-h-[120px] focus:outline-none font-mono text-sm"}}});er.useEffect(()=>{if(l&&n!==void 0){const c=Ah(n),f=Ah(l.getJSON());x3(f,c)||l.commands.setContent(c,!1)}},[n,l]),er.useEffect(()=>{const c=f=>{f.key==="Escape"&&t&&s(!1)};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[t]);const o=t?"fixed inset-0 z-50 flex flex-col bg-[var(--color-bg-base)]":"border-2 border-[var(--color-border-gray-300)] rounded-lg overflow-hidden bg-[var(--color-bg-input)] focus-within:border-[var(--color-border-main)] transition-colors";return b.jsxs("div",{className:o,children:[b.jsx(m3,{editor:l,isFullscreen:t,onToggleFullscreen:()=>s(!t)}),b.jsx("div",{className:t?"flex-1 overflow-auto":"",children:b.jsx(nS,{editor:l})}),b.jsx("style",{children:`
        .ProseMirror {
          min-height: ${t?"calc(100vh - 60px)":"120px"};
          font-family: 'IBM Plex Mono', monospace;
          font-size: 14px;
          color: var(--color-text-main);
        }
        .ProseMirror:focus {
          outline: none;
        }
        .ProseMirror p {
          margin: 0.5em 0;
        }
        .ProseMirror h1 {
          font-size: 1.25em;
          font-weight: 700;
          margin: 0.75em 0 0.5em;
        }
        .ProseMirror strong {
          font-weight: 700;
        }
        .ProseMirror em {
          font-style: italic;
        }
        .ProseMirror ul, .ProseMirror.prose ul {
          list-style-type: disc !important;
          list-style-position: outside !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
        }
        .ProseMirror ol, .ProseMirror.prose ol {
          list-style-type: decimal !important;
          list-style-position: outside !important;
          padding-left: 1.5em !important;
          margin: 0.5em 0 !important;
        }
        .ProseMirror li, .ProseMirror.prose li {
          margin: 0.25em 0 !important;
          display: list-item !important;
        }
        .ProseMirror hr {
          border: none;
          border-top: 2px dashed var(--color-border-gray-400);
          margin: 1em 0;
        }
        /* Task List Styles */
        .ProseMirror ul[data-type="taskList"] {
          list-style: none !important;
          padding-left: 0 !important;
        }
        .ProseMirror ul[data-type="taskList"] li {
          display: flex !important;
          align-items: center;
          gap: 0.5em;
        }
        .ProseMirror ul[data-type="taskList"] li > label {
          flex-shrink: 0;
          margin-top: 0.15em;
        }
        .ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"] {
          width: 1em;
          height: 1em;
          cursor: pointer;
        }
        .ProseMirror ul[data-type="taskList"] li > div {
          flex: 1;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          content: attr(data-placeholder);
          color: var(--color-text-muted);
          pointer-events: none;
          float: left;
          height: 0;
        }
      `})]})};function Ah(n){return n&&typeof n=="object"&&n.type==="doc"&&Array.isArray(n.content)?n:typeof n=="string"&&n.trim().length>0?y3(n):b3()}function y3(n){const t=n.split(`
`).map(s=>s.trim()?{type:"paragraph",content:[{type:"text",text:s}]}:{type:"paragraph"});return{type:"doc",content:t.length>0?t:[{type:"paragraph"}]}}function b3(){return{type:"doc",content:[{type:"paragraph"}]}}function x3(n,e){return JSON.stringify(n)===JSON.stringify(e)}const v3=({schema:n,uiSchema:e={},formData:t={},onChange:s,moduleId:l,onActionComplete:o,validationErrors:c={},showValidation:f=!1,onUserInteraction:d=()=>{}})=>n?b.jsx("div",{className:"space-y-4",children:b.jsx(cp,{schema:n,uiSchema:e,value:t,onChange:p=>s(p),path:[],rootValue:t,onRootChange:s,moduleId:l,onActionComplete:o,validationErrors:c,showValidation:f,onUserInteraction:d})}):null,cp=({schema:n,uiSchema:e,value:t,onChange:s,path:l,label:o,required:c,compact:f,rootValue:d,onRootChange:p,moduleId:g,onActionComplete:y,validationErrors:x={},showValidation:v=!1,onUserInteraction:k=()=>{}})=>{const E=n.type,C=n.title||o,M=n.description,I=l.join("."),$=v&&I?x[I]:"",X=!!$,_=X?`schema-error-${I.replace(/[^a-zA-Z0-9_-]/g,"-")}`:void 0,Y=e?.["ui:options"]||{},V=e?.["ui:widget"];if(V==="location-search")return b.jsxs("div",{className:"mb-4",children:[C&&b.jsx("label",{className:Fe.label,children:C}),b.jsx(Gx,{value:t,onChange:Z=>{k(),s(Z)}}),M&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:M}),X&&b.jsx("p",{id:_,className:"text-xs mt-1",style:{color:"var(--color-error)"},children:$})]});if(V==="key-value-list")return b.jsxs("div",{className:"mb-4",children:[C&&b.jsx("label",{className:Fe.label,children:C}),b.jsx(gE,{value:t,onChange:Z=>{k(),s(Z)}}),M&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:M}),X&&b.jsx("p",{id:_,className:"text-xs mt-1",style:{color:"var(--color-error)"},children:$})]});if(V==="preset-select"){const Z=Y.presets||{};return b.jsxs("div",{className:"mb-4",children:[C&&b.jsx("label",{className:Fe.label,children:C}),b.jsx(yE,{value:t,onChange:ie=>{k(),s(ie)},presets:Z,onPresetSelect:ie=>{p&&d&&(k(),p({...d,...ie}))}}),M&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:M}),X&&b.jsx("p",{id:_,className:"text-xs mt-1",style:{color:"var(--color-error)"},children:$})]})}if(V==="webhook-test")return b.jsx("div",{className:"mb-4",children:b.jsx(xE,{formData:d})});if(V==="action-button")return b.jsx(vE,{schema:n,uiSchema:e,moduleId:g,onActionComplete:y});if(V==="richtext")return b.jsxs("div",{className:"mb-4",children:[C&&b.jsx("label",{className:Fe.label,children:C}),b.jsx(g3,{value:t,onChange:Z=>{k(),s(Z)}}),M&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:M})]});if(E==="object"){const Z=Y.layout==="inline"||Y.layout==="compact";return b.jsxs("div",{className:Z?"flex flex-wrap gap-x-4 gap-y-2 items-end":"space-y-3",children:[C&&!Z&&b.jsx("h3",{className:"font-bold text-sm text-zinc-700 uppercase tracking-wider",children:C}),M&&!Z&&b.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:M}),Object.entries(n.properties||{}).map(([ie,Te])=>{const $e=e?.[ie]||{},Oe=t?.[ie],rt=Z||$e["ui:options"]?.compact,we=$e["ui:showWhen"];return we&&t?.[we.field]!==we.value?null:b.jsx("div",{className:Z?"flex-1 min-w-[120px]":"",children:b.jsx(cp,{schema:Te,uiSchema:$e,value:Oe,onChange:he=>{const B={...t,[ie]:he};s(B)},path:[...l,ie],label:Te.title||ie,required:n.required&&n.required.includes(ie),compact:rt,rootValue:d,onRootChange:p,moduleId:g,onActionComplete:y,validationErrors:x,showValidation:v,onUserInteraction:k})},ie)})]})}if(E==="array"){const Z=t||[],ie=n.items,Te=e?.items||{},$e=()=>{const we=RS(ie);k(),s([...Z,we])},Oe=we=>{const he=[...Z];he.splice(we,1),k(),s(he)},rt=(we,he)=>{const B=[...Z];B[we]=he,k(),s(B)};return b.jsxs("div",{className:"space-y-2",children:[b.jsx("div",{className:"flex justify-between items-center",children:C&&b.jsx("label",{className:Fe.label,children:C})}),M&&b.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:M}),b.jsx("div",{className:"space-y-2",children:Z.map((we,he)=>b.jsxs("div",{className:"flex gap-2 items-center p-3 border border-zinc-200 rounded-lg bg-white relative group",children:[b.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-zinc-100 flex items-center justify-center text-xs font-mono font-bold text-zinc-500",children:he+1}),b.jsx("div",{className:"flex-1",children:b.jsx(cp,{schema:ie,uiSchema:Te,value:we,onChange:B=>rt(he,B),path:[...l,he],moduleId:g,validationErrors:x,showValidation:v,onUserInteraction:k})}),b.jsx("button",{type:"button",onClick:()=>Oe(he),className:"text-gray-400 hover:text-red-500 transition-colors p-1",title:"Remove Item","aria-label":`Remove item ${he+1}`,children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 256 256",children:b.jsx("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"})})})]},he))}),(!n.maxItems||Z.length<n.maxItems)&&b.jsxs("button",{type:"button",onClick:$e,className:"w-full px-2 py-3 bg-transparent border-2 border-dashed border-gray-300 hover:border-black rounded-lg text-gray-400 hover:text-black transition-all text-xs font-bold tracking-wider cursor-pointer",children:["+ ",e?.["ui:addLabel"]||"Add Item"]}),n.maxItems&&Z.length>=n.maxItems&&b.jsxs("div",{className:"text-center text-xs text-zinc-400 py-2",children:["Maximum limit of ",n.maxItems," reached"]})]})}return E==="boolean"?b.jsxs("div",{className:`flex items-center gap-2 ${f?"py-0":"py-1"}`,children:[b.jsx("input",{type:"checkbox",checked:t||!1,onChange:Z=>{k(),s(Z.target.checked)},className:"w-4 h-4 text-black rounded border-2 border-zinc-300 focus:ring-0 focus:ring-offset-0",style:{accentColor:"black"}}),b.jsx("label",{className:`text-sm text-black select-none cursor-pointer ${f?"font-medium":""}`,onClick:()=>{k(),s(!t)},children:C})]}):b.jsxs("div",{className:f?"mb-0":"mb-2",children:[C&&b.jsxs("div",{className:"flex justify-between items-center mb-1",children:[b.jsxs("label",{className:f?Fe.labelSmall:Fe.label,children:[C," ",c&&b.jsx("span",{className:"text-red-500 ml-1",title:"Required",children:"*"})]}),e?.["ui:randomExample"]&&b.jsx("button",{type:"button",onClick:()=>{const Z=e["ui:randomExample"];if(Array.isArray(Z)&&Z.length>0){const ie=Z.filter(Te=>Te!==t);if(ie.length===0){const Te=Z[Math.floor(Math.random()*Z.length)];s(Te)}else{const Te=ie[Math.floor(Math.random()*ie.length)];s(Te)}}},className:"text-xs text-zinc-400 hover:text-black hover:underline cursor-pointer transition-colors",title:"Insert random example",children:"Generate Example"})]}),n.enum?b.jsxs("select",{value:t??"",onChange:Z=>{k(),s(Z.target.value)},className:`${f?Fe.inputSmall:Fe.input} ${X?"border-red-500":""}`,style:X?{borderColor:"var(--color-error)"}:void 0,"aria-invalid":X,"aria-describedby":_,children:[!c&&b.jsx("option",{value:"",children:"Select..."}),n.enum.map(Z=>b.jsx("option",{value:Z,children:Z},Z))]}):V==="textarea"?b.jsx("textarea",{value:t||"",onChange:Z=>{k(),s(Z.target.value)},className:`${f?Fe.inputSmall:Fe.input} min-h-[100px] text-sm ${X?"border-red-500":""}`,style:X?{borderColor:"var(--color-error)"}:void 0,placeholder:e?.["ui:placeholder"],rows:Y.rows||3,"aria-invalid":X,"aria-describedby":_}):b.jsx("input",{type:V==="password"?"password":E==="number"||E==="integer"?"number":"text",value:t??"",onChange:Z=>{k();const ie=Z.target.value;s(E==="number"||E==="integer"?ie===""?void 0:parseFloat(ie):ie)},className:`${f?Fe.inputSmall:Fe.input} ${X?"border-red-500":""}`,style:X?{borderColor:"var(--color-error)"}:void 0,placeholder:e?.["ui:placeholder"],"aria-invalid":X,"aria-describedby":_}),M&&!f&&b.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:M}),X&&b.jsx("p",{id:_,className:"text-xs mt-1",style:{color:"var(--color-error)"},children:$})]})},RS=n=>{if(n.default!==void 0)return n.default;switch(n.type){case"string":return"";case"number":case"integer":return 0;case"boolean":return!1;case"array":return[];case"object":{const e={};return n.properties&&Object.keys(n.properties).forEach(t=>{e[t]=RS(n.properties[t])}),e}default:return null}},S3=({value:n,onChange:e,onBlur:t,className:s})=>{const[l,o]=Q.useState(JSON.stringify(n||{},null,2)),[c,f]=Q.useState(!0),[d,p]=Q.useState(!1),g=JSON.stringify(n||{},null,2),y=k=>{const E=k.trim();return E===""?{}:JSON.parse(E)},x=k=>{const E=k.target.value;o(E);try{const C=y(E);f(!0),e(C)}catch{f(!1)}},v=()=>{p(!1);try{const k=y(l);f(!0),l.trim()===""&&o("{}"),t(k)}catch{o(JSON.stringify(n||{},null,2)),f(!0)}};return b.jsx("textarea",{value:d?l:g,onChange:x,onFocus:()=>{p(!0),o(g)},onBlur:v,className:`${s} ${c?"":"border-red-500"}`})},k3=({module:n,updateConfig:e,onRefresh:t,validationErrors:s={},showValidation:l=!1,onUserInteraction:o=()=>{}})=>{const{moduleTypes:c,loading:f}=_o(),d=n.config||{},p=c.find(x=>x.id===n.type),g=p?.configSchema,y=p?.uiSchema;if(g){const x=v=>{Object.keys(v).forEach(k=>{v[k]!==d[k]&&e(k,v[k])})};return b.jsx(v3,{schema:g,uiSchema:y,formData:d,onChange:x,moduleId:n.id,onActionComplete:t,validationErrors:s,showValidation:l,onUserInteraction:o})}return f?b.jsx("div",{className:"p-4 text-center text-gray-500 italic",children:"Loading configuration schema..."}):b.jsxs("div",{className:"space-y-3",children:[b.jsx("p",{className:`${Fe.textSubtle} mb-2`,children:"This module does not have a configuration schema. You can edit the raw JSON configuration below."}),b.jsx(S3,{config:d,updateConfig:(x,v)=>e(x,v)})]})},T3=({className:n,title:e="delete",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("path",{d:"M2.5,5.5V14c0,.828,.672,1.5,1.5,1.5H12c.828,0,1.5-.672,1.5-1.5V5.5",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:".5",x2:"15.5",y1:"3.5",y2:"3.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"8",x2:"8",y1:"7.5",y2:"12.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"10.5",x2:"10.5",y1:"7.5",y2:"12.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"5.5",x2:"5.5",y1:"7.5",y2:"12.5"}),b.jsx("polyline",{fill:"none",points:"5.5 3.5 5.5 .5 10.5 .5 10.5 3.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),up=n=>Array.isArray(n)?n.map(e=>up(e)):n&&typeof n=="object"?Object.keys(n).sort().reduce((e,t)=>(e[t]=up(n[t]),e),{}):n,oo=n=>JSON.stringify(up(n)),E3=({moduleId:n,module:e,setModule:t,onClose:s,onSave:l,onDelete:o})=>{const c=Q.useRef(null),f=Q.useRef(""),d=Q.useRef(null),{moduleTypes:p}=_o(),[g,y]=Q.useState(!1),[x,v]=Q.useState(!1),[k,E]=Q.useState(!1);Q.useEffect(()=>{!n||!e||d.current!==n&&(d.current=n,f.current=oo(e),y(!1),v(!1),E(!1))},[n,e]),Q.useEffect(()=>{!e||k||(f.current=oo(e))},[e,k]);const C=Q.useMemo(()=>Yx(e),[e]),M=oo(e)!==f.current,I=k&&M&&!x,$=()=>{x||k&&M&&!window.confirm("Discard unsaved changes?")||s()},X=async()=>{if(y(!0),!!I)try{v(!0),await Promise.resolve(l(n,e,!0)),f.current=oo(e),E(!1),s()}finally{v(!1)}};return n===null||!e?null:b.jsx("div",{className:Fe.modalBackdrop,onMouseDown:_=>{_.target===_.currentTarget&&(c.current="backdrop")},onClick:_=>{_.target===_.currentTarget&&c.current==="backdrop"&&$(),c.current=null},children:b.jsxs("div",{className:Fe.modalContent,onClick:_=>_.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"edit-module-title",children:[b.jsxs("div",{className:"flex justify-between items-start mb-6",children:[b.jsxs("div",{children:[b.jsx("h3",{id:"edit-module-title",className:"text-xl font-bold text-black mb-1 ",children:"Edit Module"}),b.jsx("div",{className:"text-gray-600 text-sm ",children:b.jsxs("span",{className:"font-mono",children:["Type: ",p.find(_=>_.id===e?.type)?.label]})}),k&&M&&b.jsx("div",{className:"mt-2 text-xs font-bold",style:{color:"var(--color-brass)"},children:"Unsaved changes"})]}),b.jsx(dp,{onClick:$,ariaLabel:"Close edit module dialog"})]}),b.jsxs("div",{className:"mb-6",children:[b.jsx("label",{className:Fe.label,children:"Module Name"}),b.jsx("input",{type:"text",value:e?.name||"",onChange:_=>{E(!0),t(Y=>Y&&{...Y,name:_.target.value})},className:`${Fe.input} ${g&&C.name?"border-red-500":""}`,"aria-invalid":!!(g&&C.name),"aria-describedby":g&&C.name?"module-name-error":void 0}),g&&C.name&&b.jsx("p",{id:"module-name-error",className:"text-xs mt-1",style:{color:"var(--color-error)"},children:C.name})]}),e&&b.jsx("div",{className:"pb-28",children:b.jsx(k3,{module:e,validationErrors:C,showValidation:g,onUserInteraction:()=>E(!0),updateConfig:(_,Y)=>{t(V=>V&&{...V,config:{...V.config,[_]:Y}})},onRefresh:async()=>{try{const V=(await(await it("/api/settings")).json()).modules?.[n];V&&(t(V),f.current=oo(V),y(!1),E(!1))}catch(_){console.error("Failed to refresh module:",_)}}})}),b.jsxs("div",{className:"sticky bottom-0 -mx-4 sm:-mx-6 mt-6 px-4 sm:px-6 py-4 border-t-2 border-gray-300 bg-bg-card flex items-center justify-between gap-3",children:[b.jsx("div",{className:"flex items-center",children:b.jsxs("button",{type:"button",onClick:()=>o(n),className:"px-1 py-1 bg-transparent border-0 rounded-lg transition-all cursor-pointer flex items-center gap-2",style:{color:"var(--color-error-light)"},onMouseEnter:_=>{_.currentTarget.style.color="var(--color-error)"},onMouseLeave:_=>{_.currentTarget.style.color="var(--color-error-light)"},children:[b.jsx(T3,{className:"w-4 h-4"}),"Delete Module"]})}),b.jsx("div",{className:"flex items-center",children:b.jsx(Qi,{onClick:X,disabled:!I,children:x?"Saving...":"Save"})})]})]})})},C3=({position:n,channel:e,onClose:t,onUpdate:s,timeFormat:l})=>{const o=Q.useRef(null);return n===null?null:b.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onMouseDown:c=>{c.target===c.currentTarget&&(o.current="backdrop")},onClick:c=>{c.target===c.currentTarget&&o.current==="backdrop"&&t(),o.current=null},children:b.jsxs("div",{className:"border-4 rounded-xl p-4 sm:p-6 max-w-md w-full shadow-lg",style:{backgroundColor:"var(--color-bg-card)",borderColor:"var(--color-border-main)"},onClick:c=>c.stopPropagation(),children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsxs("h3",{className:"text-xl font-bold text-black ",children:["Schedule Channel ",n]}),b.jsx(dp,{onClick:t})]}),b.jsxs("div",{className:"space-y-4",children:[b.jsx("div",{className:"text-sm text-gray-600 mb-4 ",children:"Add times when this channel should automatically print."}),b.jsxs("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:[(e?.schedule||[]).map((c,f)=>b.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border-2 border-gray-300 hover:border-black",style:{backgroundColor:"var(--color-bg-card)"},children:[b.jsx("span",{className:"text-black  text-lg",children:Dh(c,l)}),b.jsx("button",{onClick:()=>{const d=[...e?.schedule||[]];d.splice(f,1),s(d)},className:"text-red-600 hover:text-red-700 px-2  font-bold cursor-pointer hover-shimmer",children:""})]},f)),(!e?.schedule||e.schedule.length===0)&&b.jsx("div",{className:"text-gray-500 text-center py-4 italic ",children:"No scheduled times."})]}),b.jsx("div",{className:"pt-4 border-t-2 border-gray-300",children:b.jsxs("form",{onSubmit:c=>{c.preventDefault();const f=c.target.elements.timeInput,d=f.value;if(d){const p=e?.schedule||[];if(!p.includes(d)){const g=[...p,d].sort();s(g),f.value=""}}},className:"flex gap-2",children:[b.jsx("input",{name:"timeInput",type:"time",required:!0,className:"flex-1 border-2 border-gray-300 rounded-lg px-3 py-2 text-black focus:outline-none focus:border-black ",style:{backgroundColor:"var(--color-bg-card)"}}),b.jsx(Qi,{type:"submit",children:"Add"})]})})]})]})})},M3=({show:n,wifiStatus:e})=>{if(!n)return null;const t=e?.ap_ssid||"PC-1-Setup-<device>",s=e?.ap_password||"Check printed instructions";return b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:b.jsxs("div",{className:"bg-white border-4 border-black rounded-xl p-4 sm:p-6 md:p-8 max-w-md w-full text-center shadow-lg",children:[b.jsx("div",{className:"text-6xl mb-4",children:""}),b.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:"Setup Mode Activating..."}),b.jsxs("div",{className:"text-left space-y-4 bg-gray-50 p-4 rounded-lg border-2 border-gray-300 mb-6",children:[b.jsxs("div",{className:"flex gap-3",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"1"}),b.jsx("p",{className:"text-black text-sm",children:"Wait for the printer to print setup instructions."})]}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"2"}),b.jsxs("p",{className:"text-black text-sm",children:["Connect your device to the ",b.jsx("span",{className:"text-black bg-gray-200 px-1 rounded border border-gray-300",children:t})," ","WiFi network."]})]}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"3"}),b.jsxs("p",{className:"text-black text-sm",children:["Password: ",b.jsx("span",{className:"text-black bg-gray-200 px-1 rounded border border-gray-300",children:s})]})]}),b.jsxs("div",{className:"flex gap-3",children:[b.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full text-white flex items-center justify-center text-sm font-bold",style:{backgroundColor:"var(--color-brass)"},children:"4"}),b.jsxs("p",{className:"text-black text-sm",children:["Navigate to ",b.jsx("span",{className:"text-black bg-gray-200 px-1 rounded border border-gray-300",children:"http://10.42.0.1"})," to configure WiFi."]})]})]}),b.jsx("p",{className:"text-yellow-600 text-xs italic",children:"Note: This page will stop responding as the device switches networks."})]})})},w3=({status:n})=>n.message?b.jsx("div",{className:`fixed bottom-8 left-1/2 -translate-x-1/2 z-50 px-6 py-3 rounded-full shadow-xl text-sm font-medium transition-all transform duration-300 ${n.type==="success"?"text-gray-200 shadow-black/50":"text-red-400 shadow-black/50"}`,style:{backgroundColor:"var(--color-bg-dark)"},children:n.message}):null,N3=({setSettings:n,setModules:e,setStatus:t})=>{const s=async()=>{if(confirm("Are you sure you want to reset ALL settings to default? This cannot be undone."))try{const l=await it("/api/settings/reset",{method:"POST"});if(!l.ok)throw new Error("Failed to reset settings");const o=await l.json();n(o.config),e({}),t({type:"success",message:"Settings reset to defaults."})}catch(l){console.error(l),t({type:"error",message:"Failed to reset settings."})}};return b.jsx("button",{onClick:s,className:"text-xs text-red-400 hover:text-red-300 border border-red-800/40 hover:border-red-700/60 rounded px-3 py-1.5 bg-transparent transition-colors cursor-pointer",children:"Reset All Settings to Default"})},A3=({className:n="w-4 h-4"})=>b.jsx("svg",{className:n,fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),O3=({className:n,title:e="border width",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("rect",{height:"3",width:"15",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:".5",y:"2.5"}),b.jsx("rect",{height:"2",width:"15",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:".5",y:"8.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:".5",x2:"15.5",y1:"13.5",y2:"13.5"})]})]}),D3=({className:n,title:e="preferences",...t})=>b.jsxs("svg",{className:n,height:"16",width:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",...t,children:[b.jsx("title",{children:e}),b.jsxs("g",{fill:"currentColor",children:[b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"12.5",x2:"15.5",y1:"12.5",y2:"12.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"0.5",x2:"3.5",y1:"3.5",y2:"3.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"9.5",x2:"15.5",y1:"3.5",y2:"3.5"}),b.jsx("line",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x1:"0.5",x2:"6.5",y1:"12.5",y2:"12.5"}),b.jsx("rect",{height:"6",width:"3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"3.5",y:"0.5"}),b.jsx("rect",{height:"6",width:"3",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",x:"9.5",y:"9.5"})]})]});function j3(){const[n,e]=Q.useState(null),[t,s]=Q.useState(null),{moduleTypes:l}=_o(),[o,c]=Q.useState({timezone:"",latitude:0,longitude:0,city_name:"",time_format:"12h",modules:{},channels:{}}),[f,d]=Q.useState({}),[p,g]=Q.useState({type:"",message:""}),[y,x]=Q.useState(!0),[v,k]=Q.useState(""),[E,C]=Q.useState([]),[M,I]=Q.useState(!1),[$,X]=Q.useState("channels"),[_,Y]=Q.useState(null),[V,Z]=Q.useState(!1),[ie,Te]=Q.useState(null),[$e,Oe]=Q.useState(null),[rt,we]=Q.useState(null),[he,B]=Q.useState(!1),ee=Q.useRef(null);Q.useEffect(()=>{let O=!0;const H=async()=>{try{const K=await(await fetch("/api/wifi/status")).json();if(s(K),e(K.mode),K.mode==="ap"){O&&x(!1);return}if(O){try{const[fe,se]=await Promise.all([it("/api/settings").then(le=>le.json()),it("/api/modules").then(le=>le.json())]);c(fe),d(se.modules||{}),x(!1)}catch(fe){console.error("Error fetching data:",fe),g({type:"error",message:"Failed to load settings. Is the backend running?"}),x(!1)}O=!1}}catch(ne){console.error("Error fetching WiFi status:",ne),O&&x(!1)}};H();const F=setInterval(H,1e4);return()=>{clearInterval(F),ee.current&&clearTimeout(ee.current)}},[]);const me=async O=>{if(k(O),O.length<2){C([]),I(!1),ee.current&&(clearTimeout(ee.current),ee.current=null);return}ee.current&&clearTimeout(ee.current),I(!0),ee.current=setTimeout(async()=>{try{console.log("Searching for:",O);const H=new AbortController,F=setTimeout(()=>H.abort(),15e3),ne=await fetch(`/api/location/search?q=${encodeURIComponent(O)}&limit=20&use_api=false`,{signal:H.signal});if(clearTimeout(F),!ne.ok)throw new Error(`HTTP error! status: ${ne.status}`);const K=await ne.json();console.log("Search results:",K.results?.length||0),K.results?C(K.results):C([])}catch(H){H.name==="AbortError"?console.warn("Location search timed out"):(console.error("Error fetching locations:",H),C([]))}finally{I(!1),ee.current=null}},500)},Re=async(O,H)=>{try{const F=await it(`/api/channels/${O}/schedule`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)});if(!F.ok)throw new Error("Failed to update schedule");const ne=await F.json();c(K=>({...K,channels:{...K.channels,[O]:ne.channel}})),g({type:"success",message:"Schedule updated!"}),setTimeout(()=>g({type:"",message:""}),3e3)}catch(F){console.error("Error updating schedule:",F),g({type:"error",message:"Failed to update schedule"})}},Be=async O=>{try{if(!(await it(`/action/print-channel/${O}`,{method:"POST"})).ok)throw new Error("Failed to trigger print");g({type:"success",message:`Printing Channel ${O}...`}),setTimeout(()=>g({type:"",message:""}),3e3)}catch(H){console.error("Error triggering print:",H),g({type:"error",message:"Failed to trigger print"})}},N=async O=>{try{const H=await it(`/debug/print-module/${O}`,{method:"POST"});if(!H.ok){const ne=await H.json().catch(()=>({detail:"Failed to trigger print"}));throw new Error(ne.detail||"Failed to trigger print")}const F=await H.json();g({type:"success",message:F.message||"Printing module..."}),setTimeout(()=>g({type:"",message:""}),3e3)}catch(H){console.error("Error triggering module print:",H),g({type:"error",message:H.message||"Failed to trigger print"}),setTimeout(()=>g({type:"",message:""}),3e3)}},q=async O=>{c(H=>({...H,...O}));try{const H={...o,channels:o.channels||{},modules:f,...O};if(console.log("Auto-saving settings:",O),!(await it("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)})).ok)throw new Error("Failed to save settings")}catch(H){console.error("Error auto-saving settings:",H),g({type:"error",message:"Failed to save settings automatically."})}},re=O=>{const F={city_name:O.city||O.name,state:O.state,latitude:O.latitude,longitude:O.longitude,timezone:O.timezone};k(""),C([]),q(F)},ae=O=>({news:{news_api_key:""},rss:{rss_feeds:[]},weather:{},email:{email_host:"imap.gmail.com",email_user:"",email_password:"",polling_interval:60},games:{difficulty:"medium"},astronomy:{},calendar:{ical_sources:[],view_mode:"month"},webhook:{url:"",method:"GET",headers:{},json_path:""},text:{content_doc:{type:"doc",content:[{type:"paragraph"}]}}})[O]||{},be=async(O,H="")=>{try{const F=await it("/api/modules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:O,name:H||`${l.find(K=>K.id===O)?.label||O}`,config:ae(O)})});if(!F.ok)throw new Error("Failed to create module");const ne=await F.json();return d(K=>({...K,[ne.module.id]:ne.module})),g({type:"success",message:"Module created successfully!"}),setTimeout(()=>g({type:"",message:""}),3e3),ne.module}catch(F){return console.error("Error creating module:",F),g({type:"error",message:"Failed to create module"}),null}},ve=async(O,H)=>{try{const F=f[O];if(!F){console.error(`[UPDATE] Module ${O} not found`);return}if(H.type&&H.type!==F.type){console.error(`[UPDATE] Type mismatch! Target module is ${F.type}, but update has type ${H.type}. Rejecting update.`);return}if(H.id&&H.id!==O){console.error(`[UPDATE] ID mismatch! Target module ID is ${O}, but update has ID ${H.id}. Rejecting update.`);return}if(H.config){const se={...H.config};F.type==="news"?(se.rss_feeds&&delete se.rss_feeds,delete se.enable_newsapi):F.type==="rss"&&(se.news_api_key&&delete se.news_api_key,delete se.enable_newsapi),H.config=se}d(se=>{const le=se[O];return le?{...se,[O]:{...le,...H}}:se});const ne={...F,...H};ne.id=O;const K=await it(`/api/modules/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)});if(!K.ok)throw new Error("Failed to update module");const fe=await K.json();d(se=>({...se,[O]:fe.module})),g({type:"success",message:"Module updated successfully!"}),setTimeout(()=>g({type:"",message:""}),3e3)}catch(F){console.error("Error updating module:",F),g({type:"error",message:"Failed to update module"});const ne=await it(`/api/modules/${O}`);if(ne.ok){const K=await ne.json();d(fe=>({...fe,[O]:K.module}))}}},De=async O=>{if(confirm("Are you sure you want to delete this module?"))try{const H=[];for(const[ne,K]of Object.entries(o.channels))K.modules&&K.modules.some(fe=>fe.module_id===O)&&H.push(ne);for(const ne of H)await it(`/api/channels/${ne}/modules/${O}`,{method:"DELETE"});const F=await it(`/api/modules/${O}`,{method:"DELETE"});if(!F.ok){const ne=await F.json();throw new Error(ne.detail||"Failed to delete module")}d(ne=>{const K={...ne};return delete K[O],K}),c(ne=>{const K={...ne.channels};for(const fe in K)K[fe].modules&&(K[fe].modules=K[fe].modules.filter(se=>se.module_id!==O));return{...ne,channels:K}}),g({type:"success",message:"Module deleted successfully!"}),setTimeout(()=>g({type:"",message:""}),3e3),ie===O&&(Te(null),Oe(null))}catch(H){console.error("Error deleting module:",H),g({type:"error",message:H.message||"Failed to delete module"})}},ut=async(O,H,F=null,ne={})=>{try{ne?.optimistic&&c(se=>{const le={...se.channels||{}},Me=le[O]?{...le[O]}:{modules:[]},ge=(Me.modules||[]).filter(en=>en.module_id!==H).sort((en,Tn)=>en.order-Tn.order),pe=F===null?ge.length:Math.max(0,Math.min(F,ge.length)),Ke=[...ge];return Ke.splice(pe,0,{module_id:H,order:pe}),Me.modules=Ke.map((en,Tn)=>({...en,order:Tn})),le[O]=Me,{...se,channels:le}});const K=await it(`/api/channels/${O}/modules?module_id=${H}${F!==null?`&order=${F}`:""}`,{method:"POST"});if(!K.ok)throw new Error("Failed to assign module");const fe=await K.json();return c(se=>({...se,channels:{...se.channels,[O]:fe.channel}})),ne?.silent||(g({type:"success",message:"Module assigned to channel!"}),setTimeout(()=>g({type:"",message:""}),3e3)),fe.channel}catch(K){return console.error("Error assigning module:",K),g({type:"error",message:K.message||"Failed to assign module"}),null}},Ge=async(O,H,F={})=>{try{F?.optimistic&&c(fe=>{const se=fe.channels?.[O];if(!se||!se.modules)return fe;const le=se.modules.filter(Me=>Me.module_id!==H).sort((Me,ge)=>Me.order-ge.order).map((Me,ge)=>({...Me,order:ge}));return{...fe,channels:{...fe.channels,[O]:{...se,modules:le}}}});const ne=await it(`/api/channels/${O}/modules/${H}`,{method:"DELETE"});if(!ne.ok)throw new Error("Failed to remove module");const K=await ne.json();return c(fe=>({...fe,channels:{...fe.channels,[O]:K.channel}})),F?.silent||(g({type:"success",message:"Module removed from channel!"}),setTimeout(()=>g({type:"",message:""}),3e3)),K.channel}catch(ne){return console.error("Error removing module:",ne),g({type:"error",message:ne.message||"Failed to remove module"}),null}},ue=async(O,H,F={})=>{try{F?.optimistic&&c(fe=>{const se=fe.channels?.[O];if(!se||!se.modules)return fe;const le=se.modules.map(Yt=>Yt.module_id),Me=new Set(le),ge=H||{},pe=Object.entries(ge).sort((Yt,Kn)=>Yt[1]-Kn[1]).map(([Yt])=>Yt).filter(Yt=>Me.has(Yt)),Ke=le.filter(Yt=>!Object.prototype.hasOwnProperty.call(ge,Yt)),Tn=[...pe,...Ke].map((Yt,Kn)=>({module_id:Yt,order:Kn}));return{...fe,channels:{...fe.channels,[O]:{...se,modules:Tn}}}});const ne=await it(`/api/channels/${O}/modules/reorder`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)});if(!ne.ok)throw new Error("Failed to reorder modules");const K=await ne.json();return c(fe=>({...fe,channels:{...fe.channels,[O]:K.channel}})),K.channel}catch(ne){return console.error("Error reordering modules:",ne),g({type:"error",message:"Failed to reorder modules"}),null}},Ee=(O,H,F)=>{const ne=o.channels[O];if(!ne||!ne.modules)return;const K=[...ne.modules].sort((ge,pe)=>ge.order-pe.order),fe=K.findIndex(ge=>ge.module_id===H);if(fe===-1)return;const se=F==="up"?fe-1:fe+1;if(se<0||se>=K.length)return;const le=K[fe].order;K[fe].order=K[se].order,K[se].order=le;const Me={};K.forEach(ge=>{Me[ge.module_id]=ge.order}),ue(O,Me,{optimistic:!0})},_e=(O,H)=>{const F=o.channels[O],ne=o.channels[H],K={...o.channels,[O]:ne||{modules:[]},[H]:F||{modules:[]}};q({channels:K})},Ye=async()=>{try{if(!(await it("/api/wifi/ap-mode",{method:"POST"})).ok)throw new Error("Failed to activate AP mode");g({type:"success",message:"AP mode activating..."}),B(!0)}catch{g({type:"error",message:"Failed to activate AP mode"})}},z=(O,H)=>{const F=["general","channels"],ne=F.indexOf(H);ne!==-1&&(O.key==="ArrowRight"?(O.preventDefault(),X(F[(ne+1)%F.length])):O.key==="ArrowLeft"?(O.preventDefault(),X(F[(ne-1+F.length)%F.length])):O.key==="Home"?(O.preventDefault(),X(F[0])):O.key==="End"&&(O.preventDefault(),X(F[F.length-1])))};return y?b.jsx("div",{className:"max-w-[800px] w-full p-8 text-center",children:"Loading settings..."}):n==="ap"?b.jsx(fE,{wifiStatus:t}):b.jsxs("div",{className:"max-w-[480px] w-full mx-auto px-2 pt-4 pb-12 sm:px-6 sm:pt-8 sm:pb-16 min-h-screen",style:{backgroundColor:"var(--color-bg-base)",color:"var(--color-text-main)"},children:[b.jsx("div",{className:"mb-8 pt-4 pb-2",children:b.jsx("h1",{className:"text-3xl sm:text-4xl leading-none font-bold tracking-tighter",style:{color:"var(--color-text-main)"},children:"PC-1 SETTINGS"})}),b.jsxs("div",{className:"flex gap-2 mb-8 border-b-2 border-dashed",style:{borderColor:"var(--color-border-main)"},role:"tablist","aria-label":"Settings sections",children:[b.jsxs("button",{id:"settings-tab-general",role:"tab","aria-selected":$==="general","aria-controls":"settings-panel-general",tabIndex:$==="general"?0:-1,type:"button",onClick:()=>X("general"),onKeyDown:O=>z(O,"general"),className:`px-6 py-2 font-bold tracking-wider transition-all text-sm flex items-center gap-2 ${$==="general"?"border-b-2 translate-y-[2px]":"border-b-2 border-transparent"}`,style:$==="general"?{borderColor:"var(--color-border-main)",color:"var(--color-text-main)"}:{color:"var(--color-text-muted)"},onMouseEnter:O=>{$!=="general"&&(O.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:O=>{$!=="general"&&(O.currentTarget.style.color="var(--color-text-muted)")},children:[b.jsx(D3,{className:"w-4 h-4","aria-hidden":"true"}),"GENERAL"]}),b.jsxs("button",{id:"settings-tab-channels",role:"tab","aria-selected":$==="channels","aria-controls":"settings-panel-channels",tabIndex:$==="channels"?0:-1,type:"button",onClick:()=>X("channels"),onKeyDown:O=>z(O,"channels"),className:`px-6 py-2 font-bold tracking-wider transition-all text-sm flex items-center gap-2 ${$==="channels"?"border-b-2 translate-y-[2px]":"border-b-2 border-transparent"}`,style:$==="channels"?{borderColor:"var(--color-border-main)",color:"var(--color-text-main)"}:{color:"var(--color-text-muted)"},onMouseEnter:O=>{$!=="channels"&&(O.currentTarget.style.color="var(--color-text-main)")},onMouseLeave:O=>{$!=="channels"&&(O.currentTarget.style.color="var(--color-text-muted)")},children:[b.jsx(O3,{className:"w-4 h-4","aria-hidden":"true"}),"CHANNELS"]})]}),b.jsxs("div",{className:"contents",children:[b.jsx("div",{id:"settings-panel-general",role:"tabpanel","aria-labelledby":"settings-tab-general",hidden:$!=="general",className:$==="general"?"contents":"hidden",children:$==="general"&&b.jsxs(b.Fragment,{children:[b.jsx(dE,{searchTerm:v,searchResults:E,isSearching:M,handleSearch:me,selectLocation:re,settings:o,saveGlobalSettings:q,triggerAPMode:Ye,wifiStatus:t}),b.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[b.jsxs("a",{href:"https://github.com/travmiller/paper-console",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-gray-600 hover:text-black transition-colors",children:[b.jsx(A3,{className:"w-5 h-5"}),b.jsx("span",{className:"text-sm font-mono",children:"paper-console"})]}),b.jsx(N3,{setSettings:c,setModules:d,setStatus:g})]})]})}),b.jsx("div",{id:"settings-panel-channels",role:"tabpanel","aria-labelledby":"settings-tab-channels",hidden:$!=="channels",className:$==="channels"?"contents":"hidden",children:$==="channels"&&b.jsx(mE,{settings:o,modules:f,triggerChannelPrint:Be,triggerModulePrint:N,setShowScheduleModal:we,swapChannels:_e,setShowEditModuleModal:Te,setEditingModule:Oe,moveModuleInChannel:Ee,assignModuleToChannel:ut,reorderChannelModules:ue,removeModuleFromChannel:Ge,setShowAddModuleModal:Y,setShowCreateUnassignedModal:Z,wifiStatus:t})}),b.jsx(ob,{channelPosition:_,onClose:()=>Y(null),onCreateModule:be,onAssignModule:ut,onOpenEdit:(O,H)=>{Te(O),Oe(H)}}),V&&b.jsx(ob,{channelPosition:null,isUnassigned:!0,onClose:()=>Z(!1),onCreateModule:async O=>{const H=await be(O);return H&&(Z(!1),Te(H.id),Oe(JSON.parse(JSON.stringify(H)))),H},onAssignModule:async()=>{},onOpenEdit:(O,H)=>{Te(O),Oe(H)}}),b.jsx(E3,{moduleId:ie,module:$e,setModule:Oe,onClose:()=>{Te(null),Oe(null)},onSave:ve,onDelete:De}),b.jsx(C3,{position:rt,channel:o.channels[rt]||{},onClose:()=>we(null),onUpdate:O=>Re(rt,O),timeFormat:o.time_format}),b.jsx(M3,{show:he,wifiStatus:t}),b.jsx(w3,{status:p})]})]})}lE.createRoot(document.getElementById("root")).render(b.jsx(er.StrictMode,{children:b.jsx(j3,{})}));
